var __defProp=Object.defineProperty,__defProps=Object.defineProperties,__getOwnPropDesc=Object.getOwnPropertyDescriptor,__getOwnPropDescs=Object.getOwnPropertyDescriptors,__getOwnPropNames=Object.getOwnPropertyNames,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(a,e,t)=>e in a?__defProp(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,__spreadValues=(a,e)=>{for(var t in e||(e={}))__hasOwnProp.call(e,t)&&__defNormalProp(a,t,e[t]);if(__getOwnPropSymbols)for(var t of __getOwnPropSymbols(e))__propIsEnum.call(e,t)&&__defNormalProp(a,t,e[t]);return a},__spreadProps=(a,e)=>__defProps(a,__getOwnPropDescs(e)),__objRest=(a,e)=>{var t={};for(var r in a)__hasOwnProp.call(a,r)&&e.indexOf(r)<0&&(t[r]=a[r]);if(a!=null&&__getOwnPropSymbols)for(var r of __getOwnPropSymbols(a))e.indexOf(r)<0&&__propIsEnum.call(a,r)&&(t[r]=a[r]);return t},__export=(a,e)=>{for(var t in e)__defProp(a,t,{get:e[t],enumerable:!0})},__copyProps=(a,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of __getOwnPropNames(e))!__hasOwnProp.call(a,s)&&s!==t&&__defProp(a,s,{get:()=>e[s],enumerable:!(r=__getOwnPropDesc(e,s))||r.enumerable});return a},__reExport=(a,e,t)=>(__copyProps(a,e,"default"),t&&__copyProps(t,e,"default")),__toCommonJS=a=>__copyProps(__defProp({},"__esModule",{value:!0}),a),__decorateClass=(a,e,t,r)=>{for(var s=r>1?void 0:r?__getOwnPropDesc(e,t):e,i=a.length-1,n;i>=0;i--)(n=a[i])&&(s=(r?n(e,t,s):n(s))||s);return r&&s&&__defProp(e,t,s),s},main_exports={};__export(main_exports,{GridChartsModule:()=>GridChartsModule,__FORCE_MODULE_DETECTION_AG_GRID_CORE_EXT:()=>__FORCE_MODULE_DETECTION_AG_GRID_CORE_EXT,agCharts:()=>agCharts}),module.exports=__toCommonJS(main_exports);var import_core65=require("@ag-grid-community/core"),import_core66=require("@ag-grid-enterprise/core"),import_range_selection=require("@ag-grid-enterprise/range-selection"),import_core55=require("@ag-grid-community/core"),import_ag_charts_community36=require("ag-charts-community"),import_core54=require("@ag-grid-community/core"),import_core48=require("@ag-grid-community/core"),import_core46=require("@ag-grid-community/core"),import_core13=require("@ag-grid-community/core"),import_core6=require("@ag-grid-community/core"),import_core4=require("@ag-grid-community/core"),import_core=require("@ag-grid-community/core"),_ChartDatasource=class H extends import_core.BeanStub{getData(e){if(e.crossFiltering){if(e.grouping)return console.warn("AG Grid: crossing filtering with row grouping is not supported."),{chartData:[],columnNames:{}};if(!this.gridOptionsService.isRowModelType("clientSide"))return console.warn("AG Grid: crossing filtering is only supported in the client side row model."),{chartData:[],columnNames:{}}}this.gridOptionsService.isRowModelType("serverSide")&&e.pivoting&&this.updatePivotKeysForSSRM();const r=this.extractRowsFromGridRowModel(e);return r.chartData=this.aggregateRowsByDimension(e,r.chartData),r}extractRowsFromGridRowModel(e){let t=[];const r={},s={},i={};let n={},o=[],l;if(e.crossFiltering)n=this.getFilteredRowNodes(),o=this.getAllRowNodes(),l=o.length;else{const c=this.gridRowModel.getRowCount()-1;l=(e.endRow>=0?Math.min(e.endRow,c):c)-e.startRow+1}for(let c=0;c<l;c++){const h={},u=e.crossFiltering?o[c]:this.gridRowModel.getRow(c+e.startRow);e.dimensionCols.forEach(d=>{const p=d.colId,g=this.columnModel.getGridColumn(p);if(g){const C=this.valueService.getValue(g,u);if(e.grouping){const m=C&&C.toString?String(C.toString()):"",v=H.getGroupLabels(u,m);h[p]={labels:v,toString:function(){return this.labels.filter(y=>!!y).reverse().join(" - ")}},u.group&&(s[v.toString()]=c);const f=v.slice(1,v.length).toString();f&&(i[f]=s[f])}else h[p]=C}else h[ChartDataModel.DEFAULT_CATEGORY]=c+1}),e.valueCols.forEach(d=>{let p=[];const g=d.getColDef().pivotKeys;g&&(p=g.slice());const C=d.getColDef().headerName;C&&p.push(C),p.length>0&&(r[d.getId()]=p);const m=d.getColId();if(e.crossFiltering){const v=m+"-filtered-out",f=this.valueService.getValue(d,u),y=f!=null&&typeof f.toNumber=="function"?f.toNumber():f;n[u.id]?(h[m]=y,h[v]=e.aggFunc||e.isScatter?void 0:0):(h[m]=e.aggFunc||e.isScatter?void 0:0,h[v]=y)}else{let v=this.valueService.getValue(d,u);v&&v.hasOwnProperty("toString")&&(v=parseFloat(v.toString())),h[m]=v!=null&&typeof v.toNumber=="function"?v.toNumber():v}}),u.footer&&(h.footer=!0),t.push(h)}if(e.grouping){const c=import_core._.values(i),h=(u,d)=>!u.footer&&!import_core._.includes(c,d);t=t.filter(h)}return{chartData:t,columnNames:r}}aggregateRowsByDimension(e,t){const r=e.dimensionCols;if(!e.aggFunc||r.length===0)return t;const s=import_core._.last(r),i=s&&s.colId,n={},o=[];return t.forEach(l=>{let c=n;r.forEach(h=>{const u=h.colId,d=l[u];if(u===i){let p=c[d];p||(p={__children:[]},r.forEach(g=>{const C=g.colId;p[C]=l[C]}),c[d]=p,o.push(p)),p.__children.push(l)}else c[d]||(c[d]={}),c=c[d]})}),import_core.ModuleRegistry.__assertRegistered(import_core.ModuleNames.RowGroupingModule,"Charting Aggregation",this.context.getGridId())&&o.forEach(l=>e.valueCols.forEach(c=>{if(e.crossFiltering)e.valueCols.forEach(h=>{const u=h.getColId(),d=l.__children.filter(v=>typeof v[u]<"u").map(v=>v[u]);let p=this.aggregationStage.aggregateValues(d,e.aggFunc);l[h.getId()]=p&&typeof p.value<"u"?p.value:p;const g=`${u}-filtered-out`,C=l.__children.filter(v=>typeof v[g]<"u").map(v=>v[g]);let m=this.aggregationStage.aggregateValues(C,e.aggFunc);l[g]=m&&typeof m.value<"u"?m.value:m});else{const h=l.__children.map(d=>d[c.getId()]);let u=0;import_core.ModuleRegistry.__assertRegistered(import_core.ModuleNames.RowGroupingModule,"Charting Aggregation",this.context.getGridId())&&(u=this.aggregationStage.aggregateValues(h,e.aggFunc)),l[c.getId()]=u&&typeof u.value<"u"?u.value:u}})),o}updatePivotKeysForSSRM(){const e=this.columnModel.getSecondaryColumns();if(!e)return;const t=this.extractPivotKeySeparator(e);e.forEach(r=>{if(t==="")r.getColDef().pivotKeys=[];else{const s=r.getColId().split(t);r.getColDef().pivotKeys=s.slice(0,s.length-1)}})}extractPivotKeySeparator(e){if(e.length===0)return"";const t=(s,i)=>{const n=s.getGroupId();return s.getParent()?t(s.getParent(),n):i.split(n)[1][0]},r=e[0];return r.getParent()==null?"":t(r.getParent(),r.getColId())}static getGroupLabels(e,t){const r=[t];for(;e&&e.level!==0;)e=e.parent,e&&r.push(e.key);return r}getFilteredRowNodes(){const e={};return this.gridRowModel.forEachNodeAfterFilterAndSort(t=>{e[t.id]=t}),e}getAllRowNodes(){let e=[];return this.gridRowModel.forEachNode(t=>{e.push(t)}),this.sortRowNodes(e)}sortRowNodes(e){const t=this.sortController.getSortOptions();return!t||t.length==0?e:this.rowNodeSorter.doFullSort(e,t)}};__decorateClass([(0,import_core.Autowired)("rowModel")],_ChartDatasource.prototype,"gridRowModel",2),__decorateClass([(0,import_core.Autowired)("valueService")],_ChartDatasource.prototype,"valueService",2),__decorateClass([(0,import_core.Autowired)("columnModel")],_ChartDatasource.prototype,"columnModel",2),__decorateClass([(0,import_core.Autowired)("rowNodeSorter")],_ChartDatasource.prototype,"rowNodeSorter",2),__decorateClass([(0,import_core.Autowired)("sortController")],_ChartDatasource.prototype,"sortController",2),__decorateClass([(0,import_core.Optional)("aggregationStage")],_ChartDatasource.prototype,"aggregationStage",2);var ChartDatasource=_ChartDatasource,import_core2=require("@ag-grid-community/core"),ChartColumnService=class extends import_core2.BeanStub{getColumn(a){return this.columnModel.getPrimaryColumn(a)}getAllDisplayedColumns(){return this.columnModel.getAllDisplayedColumns()}getColDisplayName(a){return this.columnModel.getDisplayNameForColumn(a,"chart")}getRowGroupColumns(){return this.columnModel.getRowGroupColumns()}getGroupDisplayColumns(){return this.columnModel.getGroupDisplayColumns()}isPivotMode(){return this.columnModel.isPivotMode()}isPivotActive(){return this.columnModel.isPivotActive()}getChartColumns(){const a=this.columnModel.getAllDisplayedColumns(),e=new Set,t=new Set;return a.forEach(r=>{const s=r.getColDef(),i=s.chartDataType;if(i)switch(i){case"category":case"time":e.add(r);return;case"series":t.add(r);return;case"excluded":return;default:console.warn(`AG Grid: unexpected chartDataType value '${i}' supplied, instead use 'category', 'series' or 'excluded'`);break}if(s.colId==="ag-Grid-AutoColumn"){e.add(r);return}if(!r.isPrimary()){t.add(r);return}(this.isNumberCol(r)?t:e).add(r)}),{dimensionCols:e,valueCols:t}}isNumberCol(a){if(a.getColId()==="ag-Grid-AutoColumn")return!1;const e=this.rowRenderer.getRowNode({rowIndex:0,rowPinned:null});if(!e)return!1;let t=this.valueService.getValue(a,e);return t==null&&(t=this.extractLeafData(e,a)),t!=null&&typeof t.toNumber=="function"&&(t=t.toNumber()),typeof t=="number"}extractLeafData(a,e){if(!a.allLeafChildren)return null;for(let t=0;t<a.allLeafChildren.length;t++){const r=a.allLeafChildren[t],s=this.valueService.getValue(e,r);if(s!=null)return s}return null}};__decorateClass([(0,import_core2.Autowired)("columnModel")],ChartColumnService.prototype,"columnModel",2),__decorateClass([(0,import_core2.Autowired)("valueService")],ChartColumnService.prototype,"valueService",2),__decorateClass([(0,import_core2.Autowired)("rowRenderer")],ChartColumnService.prototype,"rowRenderer",2),ChartColumnService=__decorateClass([(0,import_core2.Bean)("chartColumnService")],ChartColumnService);var import_core3=require("@ag-grid-community/core"),_ComboChartModel=class W extends import_core3.BeanStub{constructor(e){var t;super(),this.suppressComboChartWarnings=!1,this.chartDataModel=e,this.seriesChartTypes=(t=e.params.seriesChartTypes)!=null?t:[]}init(){this.initComboCharts()}update(e){this.seriesChartTypes=e??this.seriesChartTypes,this.initComboCharts(),this.updateSeriesChartTypes()}initComboCharts(){const e=this.seriesChartTypes&&this.seriesChartTypes.length>0;(this.chartDataModel.chartType==="customCombo"||e)&&(this.chartDataModel.chartType="customCombo",this.savedCustomSeriesChartTypes=this.seriesChartTypes||[])}updateSeriesChartTypes(){if(this.chartDataModel.isComboChart()){if(this.seriesChartTypes=this.seriesChartTypes.map(e=>{const t=["groupedColumn","stackedColumn","stackedArea"].includes(e.chartType);return e.secondaryAxis=t?!1:e.secondaryAxis,e}),this.chartDataModel.chartType==="customCombo"){this.updateSeriesChartTypesForCustomCombo();return}this.updateChartSeriesTypesForBuiltInCombos()}}updateSeriesChartTypesForCustomCombo(){!(this.seriesChartTypes&&this.seriesChartTypes.length>0)&&!this.suppressComboChartWarnings&&console.warn("AG Grid: 'seriesChartTypes' are required when the 'customCombo' chart type is specified."),this.seriesChartTypes=this.seriesChartTypes.map(s=>(W.SUPPORTED_COMBO_CHART_TYPES.includes(s.chartType)||(console.warn(`AG Grid: invalid chartType '${s.chartType}' supplied in 'seriesChartTypes', converting to 'line' instead.`),s.chartType="line"),s));const t=s=>{(!this.savedCustomSeriesChartTypes||this.savedCustomSeriesChartTypes.length===0)&&(this.savedCustomSeriesChartTypes=this.seriesChartTypes);const i=this.savedCustomSeriesChartTypes.find(n=>n.colId===s.colId);return i||(s.selected&&!this.suppressComboChartWarnings&&console.warn(`AG Grid: no 'seriesChartType' found for colId = '${s.colId}', defaulting to 'line'.`),{colId:s.colId,chartType:"line",secondaryAxis:!1})},r=this.chartDataModel.valueColState.map(t);this.seriesChartTypes=r,this.savedCustomSeriesChartTypes=r,this.suppressComboChartWarnings=!0}updateChartSeriesTypesForBuiltInCombos(){const{chartType:e,valueColState:t}=this.chartDataModel;let r=e==="columnLineCombo"?"groupedColumn":"stackedArea",s=e==="columnLineCombo"?"line":"groupedColumn";const i=t.filter(o=>o.selected),n=Math.ceil(i.length/2);this.seriesChartTypes=i.map((o,l)=>{const c=l>=n?s:r;return{colId:o.colId,chartType:c,secondaryAxis:!1}})}};_ComboChartModel.SUPPORTED_COMBO_CHART_TYPES=["line","groupedColumn","stackedColumn","area","stackedArea"],__decorateClass([import_core3.PostConstruct],_ComboChartModel.prototype,"init",1);var ComboChartModel=_ComboChartModel,VALID_SERIES_TYPES=["area","bar","column","histogram","line","pie","donut","scatter","bubble","radial-column","radial-bar","radar-line","radar-area","nightingale","range-bar","range-area","box-plot","treemap","sunburst","heatmap","waterfall"];function isEnterpriseChartType(a){switch(a){case"rangeBar":case"rangeArea":case"waterfall":case"boxPlot":case"radarLine":case"radarArea":case"nightingale":case"radialColumn":case"radialBar":case"sunburst":case"treemap":case"heatmap":return!0;default:return!1}}var horizontalChartTypes=new Set(["bar","groupedBar","stackedBar","normalizedBar"]);function isHorizontal(a){return horizontalChartTypes.has(a)}var stackedChartTypes=new Set(["stackedColumn","normalizedColumn","stackedBar","normalizedBar"]);function isStacked(a){return stackedChartTypes.has(a)}function isCartesian(a){switch(a){case"area":case"areaColumnCombo":case"bar":case"boxPlot":case"bubble":case"column":case"columnLineCombo":case"customCombo":case"groupedBar":case"groupedColumn":case"heatmap":case"histogram":case"line":case"normalizedArea":case"normalizedBar":case"normalizedColumn":case"rangeArea":case"rangeBar":case"scatter":case"stackedArea":case"stackedBar":case"stackedColumn":case"waterfall":return!0;case"donut":case"doughnut":case"nightingale":case"pie":case"radarArea":case"radarLine":case"radialColumn":case"radialBar":case"sunburst":case"treemap":default:return!1}}function isPolar(a){switch(a){case"donut":case"doughnut":case"pie":case"radialColumn":case"radialBar":case"radarLine":case"radarArea":case"nightingale":return!0;default:return!1}}function isRadial(a){switch(a){case"radialColumn":case"radialBar":return!0;default:return!1}}function isHierarchical(a){switch(a){case"treemap":case"sunburst":return!0;default:return!1}}function hasGradientLegend(a){switch(a){case"treemap":case"sunburst":case"heatmap":return!0;default:return!1}}function getCanonicalChartType(a){switch(a){case"doughnut":return"donut";default:return a}}function getSeriesType(a){switch(a){case"bar":case"groupedBar":case"stackedBar":case"normalizedBar":return"bar";case"column":case"groupedColumn":case"stackedColumn":case"normalizedColumn":return"bar";case"line":return"line";case"area":case"stackedArea":case"normalizedArea":return"area";case"bubble":return"bubble";case"scatter":return"scatter";case"histogram":return"histogram";case"radialColumn":return"radial-column";case"radialBar":return"radial-bar";case"radarLine":return"radar-line";case"radarArea":return"radar-area";case"nightingale":return"nightingale";case"rangeBar":return"range-bar";case"rangeArea":return"range-area";case"boxPlot":return"box-plot";case"treemap":return"treemap";case"sunburst":return"sunburst";case"pie":return"pie";case"donut":case"doughnut":return"donut";case"heatmap":return"heatmap";case"waterfall":return"waterfall";default:return"cartesian"}}function isPieChartSeries(a){switch(a){case"pie":case"donut":return!0;default:return!1}}function canOnlyHaveSingleSeries(a){return a==="pie"||a==="waterfall"||a==="histogram"}function getMaxNumCategories(a){return isHierarchical(a)?void 0:1}function getMaxNumSeries(a){return isHierarchical(a)?2:canOnlyHaveSingleSeries(a)?1:void 0}function supportsInvertedCategorySeries(a){switch(a){case"column":case"groupedColumn":case"stackedColumn":case"normalizedColumn":case"bar":case"groupedBar":case"stackedBar":case"normalizedBar":case"line":case"donut":case"doughnut":case"area":case"stackedArea":case"normalizedArea":case"radarLine":case"radarArea":case"nightingale":case"radialColumn":case"radialBar":return!0;case"pie":case"scatter":case"bubble":case"sunburst":case"rangeBar":case"rangeArea":case"boxPlot":case"histogram":case"treemap":case"heatmap":case"waterfall":case"columnLineCombo":case"areaColumnCombo":case"customCombo":return!1}}var _ChartDataModel=class U extends import_core4.BeanStub{constructor(e){super(),this.unlinked=!1,this.chartData=[],this.valueColState=[],this.dimensionColState=[],this.columnNames={},this.crossFiltering=!1,this.grouping=!1,this.params=e,this.chartId=e.chartId,this.chartType=e.chartType,this.pivotChart=e.pivotChart,this.chartThemeName=e.chartThemeName,this.switchCategorySeries=!!e.switchCategorySeries,this.aggFunc=e.aggFunc,this.referenceCellRange=e.cellRange,this.suppliedCellRange=e.cellRange,this.suppressChartRanges=e.suppressChartRanges,this.unlinked=!!e.unlinkChart,this.crossFiltering=!!e.crossFiltering}init(){this.datasource=this.createManagedBean(new ChartDatasource),this.chartColumnService=this.createManagedBean(new ChartColumnService),this.comboChartModel=this.createManagedBean(new ComboChartModel(this)),this.updateCellRanges({setColsFromRange:!0}),this.updateData()}updateModel(e){const{cellRange:t,chartType:r,pivotChart:s,chartThemeName:i,switchCategorySeries:n,aggFunc:o,suppressChartRanges:l,unlinkChart:c,crossFiltering:h,seriesChartTypes:u}=e;t!==this.suppliedCellRange&&(this.dimensionCellRange=void 0,this.valueCellRange=void 0),this.chartType=r,this.pivotChart=s,this.chartThemeName=i,this.switchCategorySeries=!!n,this.aggFunc=o,this.referenceCellRange=t,this.suppliedCellRange=t,this.suppressChartRanges=l,this.unlinked=!!c,this.crossFiltering=!!h,this.updateSelectedDimensions(t?.columns),this.updateCellRanges(),(this.isComboChart()||u)&&this.comboChartModel.update(u),this.unlinked||this.updateData()}updateCellRanges(e){const{updatedColState:t,resetOrder:r,maintainColState:s,setColsFromRange:i}=e??{};this.valueCellRange&&(this.referenceCellRange=this.valueCellRange);const{dimensionCols:n,valueCols:o}=this.chartColumnService.getChartColumns(),l=this.getAllColumnsFromRanges();t&&this.updateColumnState(t,r),this.setDimensionCellRange(n,l,t),this.setValueCellRange(o,l,i),!t&&!s&&(this.resetColumnState(),this.syncDimensionCellRange()),this.comboChartModel.updateSeriesChartTypes()}updateData(){const{startRow:e,endRow:t}=this.getRowIndexes();this.pivotChart&&this.resetColumnState(),this.grouping=this.isGrouping();const r={aggFunc:this.aggFunc,dimensionCols:this.getSelectedDimensions(),grouping:this.grouping,pivoting:this.isPivotActive(),crossFiltering:this.crossFiltering,valueCols:this.getSelectedValueCols(),startRow:e,endRow:t,isScatter:import_core4._.includes(["scatter","bubble"],this.chartType)},{chartData:s,columnNames:i}=this.datasource.getData(r);this.chartData=s,this.columnNames=i}isGrouping(){const e=this.gridOptionsService.get("treeData"),t=e?null:this.chartColumnService.getRowGroupColumns(),r=e||t&&t.length>0,s=this.getSelectedDimensions().map(({colId:o})=>o),n=this.chartColumnService.getGroupDisplayColumns().map(o=>o.getColId()).some(o=>s.includes(o));return!!r&&n}getSelectedValueCols(){return this.valueColState.filter(e=>e.selected).map(e=>e.column)}getSelectedDimensions(){return this.dimensionColState.filter(e=>e.selected)}getColDisplayName(e){return this.chartColumnService.getColDisplayName(e)}isPivotMode(){return this.chartColumnService.isPivotMode()}getChartDataType(e){const t=this.chartColumnService.getColumn(e);return t?t.getColDef().chartDataType:void 0}isPivotActive(){return this.chartColumnService.isPivotActive()}createCellRange(e,...t){return{id:this.chartId,startRow:this.referenceCellRange.startRow,endRow:this.referenceCellRange.endRow,columns:t,startColumn:e===import_core4.CellRangeType.DIMENSION?t[0]:this.referenceCellRange.startColumn,type:e}}getAllColumnsFromRanges(){if(this.pivotChart)return import_core4._.convertToSet(this.chartColumnService.getAllDisplayedColumns());const e=this.dimensionCellRange||this.valueCellRange?[]:this.referenceCellRange.columns;return this.dimensionCellRange&&e.push(...this.dimensionCellRange.columns),this.valueCellRange&&e.push(...this.valueCellRange.columns),import_core4._.convertToSet(e)}getRowIndexes(){let e=0,t=0;const{rangeService:r,valueCellRange:s,dimensionCellRange:i}=this,n=s||i;if(r&&n){e=r.getRangeStartRow(n).rowIndex;const o=r.getRangeEndRow(n);t=o.rowPinned==="bottom"?-1:o.rowIndex}return{startRow:e,endRow:t}}resetColumnState(){const{dimensionCols:e,valueCols:t}=this.chartColumnService.getChartColumns(),r=this.getAllColumnsFromRanges(),s=this.valueColState.length<1;this.dimensionColState=[],this.valueColState=[];const i=isHierarchical(this.chartType);let n=!1,o=1;const l=this.suppliedCellRange.columns[0];e.forEach(u=>{const d=u.getColId()==="ag-Grid-AutoColumn";let p=!1;this.crossFiltering&&this.aggFunc?l.getColId()===u.getColId()&&(p=!0):p=d?!0:(!n||i)&&r.has(u),this.dimensionColState.push({column:u,colId:u.getColId(),displayName:this.getColDisplayName(u),selected:p,order:o++}),p&&(n=!0)});const c={colId:U.DEFAULT_CATEGORY,displayName:this.chartTranslationService.translate("defaultCategory"),selected:!n,order:0};this.dimensionColState.unshift(c);const h=this.referenceCellRange.columns.filter(u=>t.has(u));t.forEach(u=>{s&&import_core4._.includes(this.referenceCellRange.columns,u)&&(u=h.shift()),this.valueColState.push({column:u,colId:u.getColId(),displayName:this.getColDisplayName(u),selected:r.has(u),order:o++})})}updateColumnState(e,t){const r=h=>h.colId===e.colId,{dimensionColState:s,valueColState:i}=this,n=s.find(r),o=i.find(r);if(n)if(isHierarchical(this.chartType))n.selected=e.selected;else{const u=e.selected?n:s.filter(d=>d!==n).find(({selected:d})=>d);s.forEach(d=>d.selected=d===u)}else o&&(o.selected=e.selected);const l=[...s,...i],c=[];t||(l.forEach((h,u)=>{u===e.order&&c.push(e.colId),h.colId!==e.colId&&c.push(h.colId)}),l.forEach(h=>{const u=c.indexOf(h.colId);h.order=u>=0?c.indexOf(h.colId):l.length-1})),this.reorderColState()}reorderColState(){const e=(t,r)=>t.order-r.order;this.dimensionColState.sort(e),this.valueColState.sort(e)}setDimensionCellRange(e,t,r){this.dimensionCellRange=void 0;const s=isHierarchical(this.chartType);if(!r&&!this.dimensionColState.length){const l=new Array;e.forEach(c=>{l.length>0&&!s||!t.has(c)||l.push(c)}),l.length>0&&(this.dimensionCellRange=this.createCellRange(import_core4.CellRangeType.DIMENSION,...l));return}let i=r?[r]:[];if(this.crossFiltering&&this.aggFunc){const l=this.suppliedCellRange.columns[0];i=this.dimensionColState.filter(c=>c.colId===l.getColId())}else(s||i.length===0||i.some(({column:l})=>!l||!e.has(l)))&&(i=this.dimensionColState.filter(l=>l.selected));const n=i.length===1?i[0].colId===U.DEFAULT_CATEGORY:!1,o=i.map(({column:l})=>l).filter(l=>l!=null);o.length>0&&!n&&(this.dimensionCellRange=this.createCellRange(import_core4.CellRangeType.DIMENSION,...o))}setValueCellRange(e,t,r){this.valueCellRange=void 0;const s=[],i=getMaxNumSeries(this.chartType);let n=0;if(e.forEach(o=>{r?(i==null||n<i)&&t.has(o)&&(s.push(o),n++):this.valueColState.some(l=>l.selected&&l.colId===o.getColId())&&s.push(o)}),s.length>0){let o=[];this.valueColState.length>0?o=this.valueColState.map(l=>l.colId):t.forEach(l=>o.push(l.getColId())),s.sort((l,c)=>o.indexOf(l.getColId())-o.indexOf(c.getColId())),this.valueCellRange=this.createCellRange(import_core4.CellRangeType.VALUE,...s)}}resetCellRanges(e,t){if(!e&&!t)return;const{dimensionCols:r,valueCols:s}=this.chartColumnService.getChartColumns(),i=this.getAllColumnsFromRanges();e&&this.setDimensionCellRange(r,i),t&&this.setValueCellRange(s,i)}updateSelectedDimensions(e){const t=new Set(e.map(s=>s.getColId()));if(isHierarchical(this.chartType)){const s=this.dimensionColState.filter(n=>t.has(n.colId)),i=new Set(s.map(n=>n.colId));this.dimensionColState=this.dimensionColState.map(n=>__spreadProps(__spreadValues({},n),{selected:i.has(n.colId)}))}else{const i=(this.dimensionColState.find(n=>t.has(n.colId))||this.dimensionColState[0]).colId;this.dimensionColState=this.dimensionColState.map(n=>__spreadProps(__spreadValues({},n),{selected:n.colId===i}))}}syncDimensionCellRange(){const e=this.getSelectedDimensions();if(e.length===0)return;const t=e.map(({column:r})=>r).filter(r=>r!=null);t.length>0&&(this.dimensionCellRange=this.createCellRange(import_core4.CellRangeType.DIMENSION,...t))}isComboChart(e){return["columnLineCombo","areaColumnCombo","customCombo"].includes(e??this.chartType)}};_ChartDataModel.DEFAULT_CATEGORY="AG-GRID-DEFAULT-CATEGORY",__decorateClass([(0,import_core4.Autowired)("rangeService")],_ChartDataModel.prototype,"rangeService",2),__decorateClass([(0,import_core4.Autowired)("chartTranslationService")],_ChartDataModel.prototype,"chartTranslationService",2),__decorateClass([import_core4.PostConstruct],_ChartDataModel.prototype,"init",1);var ChartDataModel=_ChartDataModel,import_ag_charts_community2=require("ag-charts-community"),import_core5=require("@ag-grid-community/core"),import_ag_charts_community=require("ag-charts-community"),ALL_AXIS_TYPES=["number","category","grouped-category","log","time"];function getLegacyAxisType(a){switch(a){case"bar":case"stackedBar":case"normalizedBar":return["number","category"];case"groupedBar":return["number","grouped-category"];case"column":case"stackedColumn":case"normalizedColumn":case"line":case"area":case"stackedArea":case"normalizedArea":case"histogram":return["category","number"];case"groupedColumn":return["grouped-category","number"];case"scatter":case"bubble":return["number","number"];default:return}}function emptyTarget(a){return Array.isArray(a)?[]:{}}function cloneUnlessOtherwiseSpecified(a,e){return e.clone!==!1&&e.isMergeableObject(a)?deepMerge(emptyTarget(a),a,e):a}function defaultArrayMerge(a,e,t){return a.concat(e).map(function(r){return cloneUnlessOtherwiseSpecified(r,t)})}function getMergeFunction(a,e){if(!e.customMerge)return deepMerge;const t=e.customMerge(a);return typeof t=="function"?t:deepMerge}function getEnumerableOwnPropertySymbols(a){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(a).filter(function(e){return a.propertyIsEnumerable(e)}):[]}function getKeys(a){return Object.keys(a).concat(getEnumerableOwnPropertySymbols(a))}function propertyIsOnObject(a,e){try{return e in a}catch{return!1}}function propertyIsUnsafe(a,e){return propertyIsOnObject(a,e)&&!(Object.hasOwnProperty.call(a,e)&&Object.propertyIsEnumerable.call(a,e))}function mergeObject(a={},e={},t){const r={};return t.isMergeableObject(a)&&getKeys(a).forEach(function(s){r[s]=cloneUnlessOtherwiseSpecified(a[s],t)}),getKeys(e).forEach(function(s){propertyIsUnsafe(a,s)||(propertyIsOnObject(a,s)&&t.isMergeableObject(e[s])?r[s]=getMergeFunction(s,t)(a[s],e[s],t):r[s]=cloneUnlessOtherwiseSpecified(e[s],t))}),r}function defaultIsMergeableObject(a){return isNonNullObject(a)&&!isSpecial(a)}function isNonNullObject(a){return!!a&&typeof a=="object"}function isSpecial(a){const e=Object.prototype.toString.call(a);return e==="[object RegExp]"||e==="[object Date]"}function deepMerge(a,e,t){t=t||{},t.arrayMerge=t.arrayMerge||defaultArrayMerge,t.isMergeableObject=t.isMergeableObject||defaultIsMergeableObject,t.cloneUnlessOtherwiseSpecified=cloneUnlessOtherwiseSpecified;const r=Array.isArray(e),s=Array.isArray(a);return r===s?r?t.arrayMerge(a,e,t):mergeObject(a,e,t):cloneUnlessOtherwiseSpecified(e,t)}function get(a,e,t){if(a==null)return t;const r=e.split(".");let s=a;for(;r.length>1;)if(s=s[r.shift()],s==null)return t;const i=s[r[0]];return i??t}function set(a,e,t){if(a==null)return;const r=e.split(".");let s=a;r.forEach((i,n)=>{s[i]||(s[i]={}),n<r.length-1&&(s=s[i])}),s[r[r.length-1]]=t}function createAgChartTheme(a,e){var t;const{chartOptionsToRestore:r,chartPaletteToRestore:s,chartThemeToRestore:i}=a,n=getSelectedTheme(a),o=isStockTheme(n),l=o?{baseTheme:n}:(t=lookupCustomChartTheme(a,n))!=null?t:{},c=a.getGridOptionsChartThemeOverrides(),h=a.apiChartThemeOverrides,u=getSeriesType(a.chartType),d=isPieChartSeries(u)?u:"cartesian",p=a.crossFiltering?createCrossFilterThemeOverrides(e,a,d):void 0,g=__spreadValues({},r??{}),v=[o?inbuiltStockThemeOverrides(a,(()=>{const f=y=>y?Object.keys(y).some(S=>get(y[S],"title.enabled",!1)):!1;return f(c)||f(h)})()):void 0,p,c,h,g].filter(f=>!!f).reduce((f,y)=>({baseTheme:f,overrides:y}),l);if(s&&n===i){const f=import_ag_charts_community._Theme.getChartTheme(l).palette;isIdenticalPalette(s,f)||(v.palette=s)}return v}function applyThemeOverrides(a,e){return e.reduce((t,r)=>r?{baseTheme:t,overrides:r}:t,a)}function isIdenticalPalette(a,e){const t=(r,s)=>r.length!==s.length?!1:r.every((i,n)=>i===s[n]);return t(a.fills,e.fills)&&t(a.strokes,e.strokes)}function isStockTheme(a){return import_core5._.includes(Object.keys(import_ag_charts_community._Theme.themes),a)}function createCrossFilterThemeOverrides(a,e,t){const r={listeners:{legendItemClick:i=>{a.getChart().series.forEach(o=>{o.toggleSeriesItem(i.itemId,i.enabled),o.toggleSeriesItem(`${i.itemId}-filtered-out`,i.enabled)})}}},s={};return{[t]:{tooltip:{delay:500},legend:r,listeners:{click:i=>e.crossFilterCallback(i,!0)},series:s}}}var STATIC_INBUILT_STOCK_THEME_AXES_OVERRIDES=ALL_AXIS_TYPES.reduce((a,e)=>__spreadProps(__spreadValues({},a),{[e]:{title:{_enabledFromTheme:!0}}}),{});function inbuiltStockThemeOverrides(a,e){const t=a.getExtraPaddingDirections();return{common:{animation:{duration:500},axes:STATIC_INBUILT_STOCK_THEME_AXES_OVERRIDES,padding:{top:!e&&t.includes("top")?40:20,right:t.includes("right")?30:20,bottom:t.includes("bottom")?40:20,left:t.includes("left")?30:20}},pie:{series:{title:{_enabledFromTheme:!0},calloutLabel:{_enabledFromTheme:!0},sectorLabel:{enabled:!1,_enabledFromTheme:!0}}},donut:{series:{title:{_enabledFromTheme:!0},calloutLabel:{_enabledFromTheme:!0},sectorLabel:{enabled:!1,_enabledFromTheme:!0}}}}}function getSelectedTheme(a){let e=a.getChartThemeName();const t=a.getChartThemes();return import_core5._.includes(t,e)||(e=t[0]),e}function lookupCustomChartTheme(a,e){const{customChartThemes:t}=a,r=t&&t[e];return r||console.warn(`AG Grid: no stock theme exists with the name '${e}' and no custom chart theme with that name was supplied to 'customChartThemes'`),r}var validateIfDefined=a=>e=>e==null?!0:a(e),isString=a=>typeof a=="string",isBoolean=a=>typeof a=="boolean",isValidSeriesChartType=a=>typeof a=="object",createWarnMessage=(a,e)=>t=>`AG Grid - unable to update chart as invalid params supplied:  \`${a}: ${t}\`, expected ${e}.`,_UpdateParamsValidator=class k{static isValidChartType(e){return k.validChartTypes.includes(e)}static isLegacyChartType(e){return k.legacyChartTypes.includes(e)}static validateChartParams(e){switch(e.type){case"rangeChartUpdate":return k.validateUpdateRangeChartParams(e);case"pivotChartUpdate":return k.validateUpdatePivotChartParams(e);case"crossFilterChartUpdate":return k.validateUpdateCrossFilterChartParams(e);default:return console.warn(`AG Grid - Invalid value supplied for 'type': ${e.type}. It must be either 'rangeChartUpdate', 'pivotChartUpdate', or 'crossFilterChartUpdate'.`),!1}}static validateUpdateRangeChartParams(e){const t=[...k.commonValidations,...k.cellRangeValidations,{property:"seriesChartTypes",validationFn:r=>r===void 0||Array.isArray(r)&&r.every(isValidSeriesChartType),warnMessage:createWarnMessage("seriesChartTypes","Array of SeriesChartType")}];return k.validateProperties(e,t,["type","chartId","chartType","chartThemeName","chartThemeOverrides","unlinkChart","cellRange","suppressChartRanges","aggFunc","seriesChartTypes"],"UpdateRangeChartParams")}static validateUpdatePivotChartParams(e){const t=[...k.commonValidations];return k.validateProperties(e,t,["type","chartId","chartType","chartThemeName","chartThemeOverrides","unlinkChart"],"UpdatePivotChartParams")}static validateUpdateCrossFilterChartParams(e){const t=[...k.commonValidations,...k.cellRangeValidations];return k.validateProperties(e,t,["type","chartId","chartType","chartThemeName","chartThemeOverrides","unlinkChart","cellRange","suppressChartRanges","aggFunc"],"UpdateCrossFilterChartParams")}static validateProperties(e,t,r,s){let i;for(const n of t){const{property:o,validationFn:l,warnMessage:c}=n;if(o in e){const h=e[o],u=l(h);if(u===!0)continue;if(u===!1)return console.warn(c(h)),!1;i=i||__spreadValues({},e),i[o]=u}}for(const n in e)if(!r.includes(n))return console.warn(`AG Grid - Unexpected property supplied. ${s} does not contain: \`${n}\`.`),!1;return i||!0}};_UpdateParamsValidator.validChartTypes=["column","groupedColumn","stackedColumn","normalizedColumn","bar","groupedBar","stackedBar","normalizedBar","line","scatter","bubble","pie","donut","area","stackedArea","normalizedArea","histogram","radialColumn","radialBar","radarLine","radarArea","nightingale","rangeBar","rangeArea","boxPlot","treemap","sunburst","heatmap","waterfall","columnLineCombo","areaColumnCombo","customCombo"],_UpdateParamsValidator.legacyChartTypes=["doughnut"],_UpdateParamsValidator.validateChartType=validateIfDefined(a=>{if(_UpdateParamsValidator.isValidChartType(a))return!0;if(_UpdateParamsValidator.isLegacyChartType(a)){const e=getCanonicalChartType(a);return console.warn(`AG Grid - The chart type '${a}' has been deprecated. Please use '${e}' instead.`),e}return!1}),_UpdateParamsValidator.validateAgChartThemeOverrides=validateIfDefined(a=>typeof a=="object"),_UpdateParamsValidator.validateChartParamsCellRange=validateIfDefined(a=>typeof a=="object"),_UpdateParamsValidator.validateAggFunc=validateIfDefined(a=>typeof a=="string"||typeof a=="function"),_UpdateParamsValidator.commonValidations=[{property:"chartId",validationFn:isString,warnMessage:createWarnMessage("chartId","string")},{property:"chartType",validationFn:_UpdateParamsValidator.validateChartType,warnMessage:createWarnMessage("chartType",_UpdateParamsValidator.validChartTypes.join(", "))},{property:"chartThemeName",validationFn:isString,warnMessage:createWarnMessage("chartThemeName","string")},{property:"chartThemeOverrides",validationFn:_UpdateParamsValidator.validateAgChartThemeOverrides,warnMessage:createWarnMessage("chartThemeOverrides","AgChartThemeOverrides")},{property:"unlinkChart",validationFn:isBoolean,warnMessage:createWarnMessage("unlinkChart","boolean")}],_UpdateParamsValidator.cellRangeValidations=[{property:"cellRange",validationFn:_UpdateParamsValidator.validateChartParamsCellRange,warnMessage:createWarnMessage("cellRange","ChartParamsCellRange")},{property:"suppressChartRanges",validationFn:isBoolean,warnMessage:createWarnMessage("suppressChartRanges","boolean")},{property:"aggFunc",validationFn:_UpdateParamsValidator.validateAggFunc,warnMessage:createWarnMessage("aggFunc","string or IAggFunc")}];var UpdateParamsValidator=_UpdateParamsValidator,DEFAULT_THEMES=["ag-default","ag-material","ag-sheets","ag-polychroma","ag-vivid"],_ChartController=class G extends import_core6.BeanStub{constructor(e){super(),this.model=e,this.isEnterprise=()=>import_ag_charts_community2._ModuleSupport.enterpriseModule.isEnterprise}init(){this.setChartRange(),this.addManagedListener(this.eventService,import_core6.Events.EVENT_RANGE_SELECTION_CHANGED,e=>{e.id&&e.id===this.model.chartId&&this.updateForRangeChange()}),this.model.unlinked&&this.rangeService&&this.rangeService.setCellRanges([]),this.addManagedListener(this.eventService,import_core6.Events.EVENT_COLUMN_MOVED,this.updateForGridChange.bind(this)),this.addManagedListener(this.eventService,import_core6.Events.EVENT_COLUMN_PINNED,this.updateForGridChange.bind(this)),this.addManagedListener(this.eventService,import_core6.Events.EVENT_COLUMN_VISIBLE,this.updateForGridChange.bind(this)),this.addManagedListener(this.eventService,import_core6.Events.EVENT_COLUMN_ROW_GROUP_CHANGED,this.updateForGridChange.bind(this)),this.addManagedListener(this.eventService,import_core6.Events.EVENT_MODEL_UPDATED,this.updateForGridChange.bind(this)),this.addManagedListener(this.eventService,import_core6.Events.EVENT_CELL_VALUE_CHANGED,this.updateForDataChange.bind(this))}update(e){if(!this.validUpdateType(e))return!1;const t=UpdateParamsValidator.validateChartParams(e);if(!t)return!1;const r=t===!0?e:t;return this.applyValidatedChartParams(r),!0}applyValidatedChartParams(e){var t,r,s,i,n,o,l,c;const{chartId:h,chartType:u,chartThemeName:d,unlinkChart:p}=e,g={chartId:h,pivotChart:this.model.pivotChart,chartType:u??this.model.chartType,chartThemeName:d??this.model.chartThemeName,unlinkChart:p??this.model.unlinked,cellRange:this.model.suppliedCellRange,switchCategorySeries:this.model.switchCategorySeries,aggFunc:this.model.aggFunc,seriesChartTypes:void 0,suppressChartRanges:!1,crossFiltering:!1};let C=__spreadValues({},g);switch(e.type){case"rangeChartUpdate":C.cellRange=(t=this.createCellRange(e))!=null?t:this.model.suppliedCellRange,C.switchCategorySeries=(r=e.switchCategorySeries)!=null?r:this.model.switchCategorySeries,C.aggFunc=(s=e.aggFunc)!=null?s:this.model.aggFunc,C.seriesChartTypes=e.seriesChartTypes,C.suppressChartRanges=(i=e.suppressChartRanges)!=null?i:this.model.suppressChartRanges;break;case"crossFilterChartUpdate":C.cellRange=(n=this.createCellRange(e))!=null?n:this.model.suppliedCellRange,C.switchCategorySeries=!1,C.aggFunc=(o=e.aggFunc)!=null?o:this.model.aggFunc,C.crossFiltering=!0,C.suppressChartRanges=(l=e.suppressChartRanges)!=null?l:this.model.suppressChartRanges;break;case"pivotChartUpdate":C.switchCategorySeries=!1;break}this.model.updateModel(C),C.unlinkChart||C.suppressChartRanges?(c=this.rangeService)==null||c.setCellRanges([]):this.setChartRange()}updateForGridChange(e){if(this.model.unlinked)return;const{maintainColState:t,setColsFromRange:r}=e??{};this.model.updateCellRanges({maintainColState:t,setColsFromRange:r}),this.model.updateData(),this.setChartRange()}updateForDataChange(){this.model.unlinked||(this.model.updateData(),this.raiseChartModelUpdateEvent())}updateForRangeChange(){this.updateForGridChange({setColsFromRange:!0}),this.raiseChartRangeSelectionChangedEvent()}updateForPanelChange(e,t){this.model.updateCellRanges({updatedColState:e,resetOrder:t}),this.model.updateData(),this.setChartRange(),this.raiseChartRangeSelectionChangedEvent()}updateThemeOverrides(e){this.chartProxy.updateThemeOverrides(e)}getChartUpdateParams(e){const r=this.getSelectedValueColState().map(o=>({colId:o.colId,displayName:o.displayName})),s=this.getChartData(),i=this.getSelectedDimensions(),n={data:s,grouping:this.isGrouping(),categories:i.map(o=>({id:o.colId,name:o.displayName,chartDataType:this.model.getChartDataType(o.colId)})),fields:r,chartId:this.getChartId(),getCrossFilteringContext:()=>({lastSelectedChartId:"xxx"}),seriesChartTypes:this.getSeriesChartTypes(),updatedOverrides:e};return this.isCategorySeriesSwitched()?this.invertCategorySeriesParams(n):n}invertCategorySeriesParams(e){const[t]=e.categories,r=[{id:ChartDataModel.DEFAULT_CATEGORY,name:""}],s=e.data.map((n,o)=>{const l=`${t.id}:${o}`,c=n[t.id],h=c==null?"":String(c);return{colId:l,displayName:h}}),i=e.fields.map(n=>{const o={[ChartDataModel.DEFAULT_CATEGORY]:n.displayName};for(const[l,c]of e.data.entries()){const h=`${t.id}:${l}`,u=c[n.colId];o[h]=u}return o});return __spreadProps(__spreadValues({},e),{categories:r,fields:s,data:i})}getChartModel(){const e=this.model.pivotChart?"pivot":"range",t=this.isComboChart()?this.model.comboChartModel.seriesChartTypes:void 0;return{modelType:e,chartId:this.model.chartId,chartType:this.model.chartType,chartThemeName:this.getChartThemeName(),chartOptions:this.chartProxy.getChartThemeOverrides(),chartPalette:this.chartProxy.getChartPalette(),cellRange:this.getCellRangeParams(),switchCategorySeries:this.model.switchCategorySeries,suppressChartRanges:this.model.suppressChartRanges,aggFunc:this.model.aggFunc,unlinkChart:this.model.unlinked,seriesChartTypes:t}}getChartId(){return this.model.chartId}getChartData(){return this.model.chartData}getChartType(){return this.model.chartType}setChartType(e){this.updateMultiSeriesAndCategory(this.model.chartType,e),this.model.chartType=e,this.model.comboChartModel.updateSeriesChartTypes(),this.model.switchCategorySeries=!1,this.raiseChartModelUpdateEvent(),this.raiseChartOptionsChangedEvent()}isCategorySeriesSwitched(){return this.model.switchCategorySeries}switchCategorySeries(e){supportsInvertedCategorySeries(this.getChartType())&&(this.model.switchCategorySeries=e,this.raiseChartModelUpdateEvent())}getAggFunc(){return this.model.aggFunc}setAggFunc(e,t){this.model.aggFunc!==e&&(this.model.aggFunc=e,!t&&(this.model.updateData(),this.raiseChartModelUpdateEvent()))}updateMultiSeriesAndCategory(e,t){var r,s;const i=(h,u)=>{let d=0;for(const p of h)p.selected&&(d>=u?p.selected=!1:d++);d===0&&(h[0].selected=!0)},n=getMaxNumCategories(t),o=getMaxNumSeries(t),l=n!=null&&((r=getMaxNumCategories(e))!=null?r:100)>(n??100),c=o!=null&&((s=getMaxNumSeries(e))!=null?s:100)>(o??100);l&&i(this.model.dimensionColState,n),c&&i(this.model.valueColState,o),(l||c)&&(this.model.resetCellRanges(l,c),this.setChartRange(!0))}setChartThemeName(e,t){this.model.chartThemeName=e,t||(this.raiseChartModelUpdateEvent(),this.raiseChartOptionsChangedEvent())}getChartThemeName(){return this.model.chartThemeName}isPivotChart(){return this.model.pivotChart}isPivotMode(){return this.model.isPivotMode()}isGrouping(){return this.model.isGrouping()}isCrossFilterChart(){return this.model.crossFiltering}getThemeNames(){return this.gridOptionsService.get("chartThemes")||DEFAULT_THEMES}getThemes(){return this.getThemeNames().map(t=>{const s=isStockTheme(t)?t:this.chartProxy.lookupCustomChartTheme(t);return import_ag_charts_community2._Theme.getChartTheme(s)})}getPalettes(){return this.getThemes().map(t=>t.palette)}getThemeTemplateParameters(){return this.getThemes().map(t=>t.getTemplateParameters())}getValueColState(){return this.model.valueColState.map(this.displayNameMapper.bind(this))}getSelectedValueColState(){return this.getValueColState().filter(e=>e.selected)}getSelectedDimensions(){return this.model.getSelectedDimensions()}displayNameMapper(e){const t=this.model.columnNames[e.colId];return e.displayName=t?t.join(" - "):this.model.getColDisplayName(e.column),e}getColStateForMenu(){return{dimensionCols:this.model.dimensionColState,valueCols:this.getValueColState()}}setChartRange(e=!1){this.rangeService&&!this.model.suppressChartRanges&&!this.model.unlinked&&this.rangeService.setCellRanges(this.getCellRanges()),e||this.raiseChartModelUpdateEvent()}detachChartRange(){this.model.unlinked=!this.model.unlinked,this.model.unlinked?this.rangeService&&this.rangeService.setCellRanges([]):this.updateForGridChange(),this.dispatchEvent({type:G.EVENT_CHART_LINKED_CHANGED})}setChartProxy(e){this.chartProxy=e}getChartProxy(){return this.chartProxy}isActiveXYChart(){return import_core6._.includes(["scatter","bubble"],this.getChartType())}isChartLinked(){return!this.model.unlinked}customComboExists(){const e=this.model.comboChartModel.savedCustomSeriesChartTypes;return e&&e.length>0}getSeriesChartTypes(){return this.model.comboChartModel.seriesChartTypes}isComboChart(e){return this.model.isComboChart(e)}updateSeriesChartType(e,t,r){const s=this.model.comboChartModel.seriesChartTypes.find(i=>i.colId===e);if(s){const i=this.model.chartType!=="customCombo";i&&(this.model.chartType="customCombo");const n=s.chartType;t!=null&&(s.chartType=t),r!=null&&(s.secondaryAxis=r),this.model.comboChartModel.savedCustomSeriesChartTypes=this.model.comboChartModel.seriesChartTypes,this.model.comboChartModel.updateSeriesChartTypes(),this.updateForDataChange(),i&&this.dispatchEvent({type:G.EVENT_CHART_TYPE_CHANGED}),n!==t&&this.dispatchEvent({type:G.EVENT_CHART_SERIES_CHART_TYPE_CHANGED}),this.raiseChartOptionsChangedEvent()}}getActiveSeriesChartTypes(){const e=this.getSelectedValueColState().map(t=>t.colId);return this.getSeriesChartTypes().filter(t=>e.includes(t.colId))}getChartSeriesTypes(e){const t=e??this.getChartType(),r=["line","bar","area"];return this.isComboChart(t)?r:[getSeriesType(t)]}getCellRanges(){return[this.model.dimensionCellRange,this.model.valueCellRange].filter(e=>e)}createCellRange(e){var t;return e.cellRange&&((t=this.rangeService)==null?void 0:t.createCellRangeFromCellRangeParams(e.cellRange))}validUpdateType(e){var t;if(!e.type)return console.warn("AG Grid - Unable to update chart as the 'type' is missing. It must be either 'rangeChartUpdate', 'pivotChartUpdate', or 'crossFilterChartUpdate'."),!1;const r={"Range Chart":()=>!this.isPivotChart()&&!this.isCrossFilterChart(),"Pivot Chart":()=>this.isPivotChart(),"Cross Filter Chart":()=>this.isCrossFilterChart()},s=(t=Object.keys(r).find(n=>r[n]()))!=null?t:"Range Chart",i=e.type===`${s[0].toLowerCase()}${s.slice(1).replace(/ /g,"")}Update`;return i||console.warn(`AG Grid - Unable to update chart as a '${e.type}' update type is not permitted on a ${s}.`),i}getCellRangeParams(){const e=this.getCellRanges(),t=e[0],r=t&&t.startRow||null,s=t&&t.endRow||null;return{rowStartIndex:r&&r.rowIndex,rowStartPinned:r&&r.rowPinned,rowEndIndex:s&&s.rowIndex,rowEndPinned:s&&s.rowPinned,columns:e.reduce((i,n)=>i.concat(n.columns.map(o=>o.getId())),[])}}raiseChartModelUpdateEvent(){const e={type:G.EVENT_CHART_MODEL_UPDATE};this.dispatchEvent(e)}raiseChartUpdatedEvent(){const e={type:G.EVENT_CHART_UPDATED};this.dispatchEvent(e)}raiseChartApiUpdateEvent(){const e={type:G.EVENT_CHART_API_UPDATE};this.dispatchEvent(e)}raiseChartOptionsChangedEvent(){const{chartId:e,chartType:t}=this.getChartModel(),r={type:import_core6.Events.EVENT_CHART_OPTIONS_CHANGED,chartId:e,chartType:t,chartThemeName:this.getChartThemeName(),chartOptions:this.chartProxy.getChartThemeOverrides()};this.eventService.dispatchEvent(r)}raiseChartRangeSelectionChangedEvent(){const e={type:import_core6.Events.EVENT_CHART_RANGE_SELECTION_CHANGED,id:this.model.chartId,chartId:this.model.chartId,cellRange:this.getCellRangeParams()};this.eventService.dispatchEvent(e)}destroy(){super.destroy(),this.rangeService&&this.rangeService.setCellRanges([])}};_ChartController.EVENT_CHART_UPDATED="chartUpdated",_ChartController.EVENT_CHART_API_UPDATE="chartApiUpdate",_ChartController.EVENT_CHART_MODEL_UPDATE="chartModelUpdate",_ChartController.EVENT_CHART_TYPE_CHANGED="chartTypeChanged",_ChartController.EVENT_CHART_SERIES_CHART_TYPE_CHANGED="chartSeriesChartTypeChanged",_ChartController.EVENT_CHART_LINKED_CHANGED="chartLinkedChanged",__decorateClass([(0,import_core6.Autowired)("rangeService")],_ChartController.prototype,"rangeService",2),__decorateClass([import_core6.PostConstruct],_ChartController.prototype,"init",1);var ChartController=_ChartController,import_core9=require("@ag-grid-community/core"),import_core8=require("@ag-grid-community/core"),import_core7=require("@ag-grid-community/core"),_AgPillSelect=class Y extends import_core7.Component{constructor(e){super(Y.TEMPLATE),this.config=e??{};const{selectedValueList:t,valueFormatter:r,valueList:s}=this.config;this.selectedValues=t??[],this.valueList=s??[],this.valueFormatter=r??(i=>import_core7._.escapeString(i))}init(){const{ariaLabel:e,onValuesChange:t,dragSourceId:r}=this.config;this.dropZonePanel=this.createManagedBean(new PillSelectDropZonePanel({getValues:()=>this.selectedValues,setValues:i=>this.updateValues(i),isDraggable:()=>this.selectedValues.length>1},i=>this.valueFormatter(i),e,r)),this.getGui().appendChild(this.dropZonePanel.getGui()),this.initSelect(),t!=null&&(this.onValuesChange=t)}setValues(e,t){const{added:r,removed:s,updated:i}=this.getChanges(this.valueList,e);let n=!1;return(r.length||s.length||i.length)&&(n=!0),this.valueList=e,this.updateValues(t,n,!0),this}setValueFormatter(e){return this.valueFormatter=e,this}initSelect(){const e=this.createSelectOptions();if(!e.length)return!1;const{selectPlaceholder:t}=this.config;return this.eSelect=this.createBean(new import_core7.AgSelect({options:e,placeholder:t,onValueChange:r=>this.addValue(r),pickerIcon:"chartsMenuAdd"})),this.getGui().appendChild(this.eSelect.getGui()),!0}createSelectOptions(){let e=[];const{maxSelection:t}=this.config;return t&&this.selectedValues.length>=t||this.valueList.forEach(r=>{this.selectedValues.includes(r)||e.push({value:r,text:this.valueFormatter(r)})}),e}addValue(e){this.dropZonePanel.addItem(e)}updateValues(e,t,r){var s,i,n,o,l;const c=this.selectedValues;this.selectedValues=e;const h=this.getChanges(c,e),u=t||h.added.length||h.removed.length,d=this.gridOptionsService.getDocument().activeElement,p=(s=this.eSelect)==null?void 0:s.getGui().contains(d),g=(i=this.dropZonePanel)==null?void 0:i.getGui().contains(d);r||(n=this.onValuesChange)==null||n.call(this,h);const C=u?!this.refreshSelect():!1;this.dropZonePanel.refreshGui(),u&&p&&(C?this.dropZonePanel.focusList(!0):(o=this.eSelect)==null||o.getFocusableElement().focus()),g&&!e.length&&((l=this.eSelect)==null||l.getFocusableElement().focus())}getChanges(e,t){const r=t.filter(n=>!e.includes(n)),s=e.filter(n=>!t.includes(n)),i=t.filter((n,o)=>e[o]!==n);return{added:r,removed:s,updated:i,selected:t}}refreshSelect(){if(!this.eSelect)return this.initSelect();const e=this.createSelectOptions();return e.length?(this.eSelect.clearOptions().addOptions(e).setValue(void 0,!0),!0):(import_core7._.removeFromParent(this.eSelect.getGui()),this.eSelect=this.destroyBean(this.eSelect),!1)}destroy(){this.destroyBean(this.eSelect),super.destroy()}};_AgPillSelect.TEMPLATE='<div class="ag-pill-select" role="presentation"></div>',__decorateClass([import_core7.PostConstruct],_AgPillSelect.prototype,"init",1);var AgPillSelect=_AgPillSelect,PillSelectDragComp=class extends import_core7.PillDragComp{constructor(a,e,t,r,s,i){super(e,t,!1),this.value=a,this.valueFormatter=r,this.draggable=s,this.sourceId=i}getItem(){return this.value}getDisplayName(){return this.valueFormatter(this.value)}getAriaDisplayName(){return this.getDisplayName()}getTooltip(){}createGetDragItem(){return()=>({value:this.value})}getDragSourceType(){return import_core7.DragSourceType.ChartPanel}getDragSourceId(){return this.sourceId}isDraggable(){return this.draggable}},PillSelectDropZonePanel=class extends import_core7.PillDropZonePanel{constructor(a,e,t,r){super(!1),this.model=a,this.valueFormatter=e,this.ariaLabel=t,this.sourceId=r}postConstruct(){super.init()}isItemDroppable(a,e){return this.isSourceEventFromTarget(e)||this.sourceId!=null&&this.sourceId===e.dragSource.sourceId}updateItems(a){this.model.setValues(a)}getExistingItems(){return this.model.getValues()}getIconName(){return this.isPotentialDndItems()?import_core7.DragAndDropService.ICON_MOVE:import_core7.DragAndDropService.ICON_NOT_ALLOWED}getAriaLabel(){return this.ariaLabel}createPillComponent(a,e,t){return new PillSelectDragComp(a,e,t,this.valueFormatter,this.model.isDraggable(),this.sourceId)}getItems(a){return[a.value]}isInterestedIn(a){return a===import_core7.DragSourceType.ChartPanel}};__decorateClass([import_core7.PostConstruct],PillSelectDropZonePanel.prototype,"postConstruct",1);var DragDataPanel=class extends import_core8.Component{constructor(a,e,t,r,s){super(s),this.chartController=a,this.autoScrollService=e,this.allowMultipleSelection=t,this.maxSelection=r,this.columnComps=new Map}refreshColumnComps(a){return import_core8._.areEqual(import_core8._.keys(this.columnComps),a.map(({colId:e})=>e))?(a.forEach(e=>{this.columnComps.get(e.colId).setValue(e.selected,!0)}),!0):!1}createGroup(a,e,t,r){if(this.allowMultipleSelection){const s=a.filter(i=>i.selected);this.valuePillSelect=this.groupComp.createManagedBean(new AgPillSelect({valueList:a,selectedValueList:s,valueFormatter:e,selectPlaceholder:this.chartTranslationService.translate(t),dragSourceId:r,onValuesChange:i=>this.onValueChange(i),maxSelection:this.maxSelection})),this.groupComp.addItem(this.valuePillSelect)}else{const s=this.createValueSelectParams(a);s.onValueChange=i=>{a.forEach(n=>{n.selected=!1}),i.selected=!0,i.colId===ChartDataModel.DEFAULT_CATEGORY&&this.chartController.setAggFunc(void 0,!0),this.chartController.updateForPanelChange(i)},this.valueSelect=this.groupComp.createManagedBean(new import_core8.AgSelect(s)),this.groupComp.addItem(this.valueSelect)}}refreshValueSelect(a){if(!this.valueSelect)return;const{options:e,value:t}=this.createValueSelectParams(a);this.valueSelect.clearOptions().addOptions(e).setValue(t,!0)}createValueSelectParams(a){let e;return{options:a.map(r=>{const s=import_core8._.escapeString(r.displayName);return r.selected&&(e=r),{value:r,text:s}}),value:e}}onDragging(a){const e=this.checkHoveredItem(a);if(!e)return;this.lastDraggedColumn=a.dragItem.columns[0];const{comp:t,position:r}=e,{comp:s,position:i}=this.lastHoveredItem||{};if(t===s&&r===i)return;this.autoScrollService.check(a.event),this.clearHoveredItems(),this.lastHoveredItem={comp:t,position:r},t.getGui().classList.add("ag-list-item-hovered",`ag-item-highlight-${r}`)}checkHoveredItem(a){if(import_core8._.missing(a.vDirection))return null;const e=a.event;for(const t of this.columnComps.values()){const r=t.getGui();if(!r.querySelector(".ag-chart-data-column-drag-handle"))continue;const s=r.getBoundingClientRect();if(e.clientY>=s.top&&e.clientY<=s.bottom){const n=r.clientHeight,o=e.clientY>s.top+n/2?"bottom":"top";return{comp:t,position:o}}}return null}onDragLeave(){this.clearHoveredItems()}onDragStop(){if(this.lastHoveredItem){const{dimensionCols:a,valueCols:e}=this.chartController.getColStateForMenu(),t=[...a,...e].find(r=>r.column===this.lastDraggedColumn);if(t){let r=Array.from(this.columnComps.values()).indexOf(this.lastHoveredItem.comp);this.lastHoveredItem.position==="bottom"&&r++,t.order=r,this.chartController.updateForPanelChange(t)}}this.clearHoveredItems(),this.lastDraggedColumn=void 0,this.autoScrollService.ensureCleared()}clearHoveredItems(){this.columnComps.forEach(a=>{a.getGui().classList.remove("ag-list-item-hovered","ag-item-highlight-top","ag-item-highlight-bottom")}),this.lastHoveredItem=void 0}addDragHandle(a,e){const t=import_core8._.createIconNoSpan("columnDrag",this.gridOptionsService);t.classList.add("ag-drag-handle","ag-chart-data-column-drag-handle"),a.getGui().insertAdjacentElement("beforeend",t);const r={type:import_core8.DragSourceType.ChartPanel,eElement:t,dragItemName:e.displayName,getDragItem:()=>({columns:[e.column]}),onDragStopped:()=>this.onDragStop()};this.dragAndDropService.addDragSource(r,!0),this.addDestroyFunc(()=>this.dragAndDropService.removeDragSource(r))}addChangeListener(a,e){this.addManagedListener(a,import_core8.Events.EVENT_FIELD_VALUE_CHANGED,()=>{e.selected=a.getValue(),this.chartController.updateForPanelChange(e)})}isInterestedIn(a){return a===import_core8.DragSourceType.ChartPanel}onValueChange({added:a,updated:e,removed:t,selected:r}){let s,i;const n=()=>{r.forEach((o,l)=>{o.order=l}),i=!0};a.length?(s=a[0],s.selected=!0,n()):t.length?(s=t[0],s.selected=!1):e.length&&(n(),s=e[0]),s&&this.chartController.updateForPanelChange(s,i)}destroy(){this.valuePillSelect=void 0,this.valueSelect=void 0,super.destroy()}};__decorateClass([(0,import_core8.Autowired)("dragAndDropService")],DragDataPanel.prototype,"dragAndDropService",2),__decorateClass([(0,import_core8.Autowired)("chartTranslationService")],DragDataPanel.prototype,"chartTranslationService",2);var DEFAULT_AGG_FUNC="sum",_CategoriesDataPanel=class K extends DragDataPanel{constructor(e,t,r,s,i,n){super(e,t,s,void 0,K.TEMPLATE),this.title=r,this.dimensionCols=i,this.isOpen=n}init(){this.groupComp=this.createBean(new import_core9.AgGroupComponent({title:this.title,enabled:!0,suppressEnabledCheckbox:!0,suppressOpenCloseIcons:!1,cssIdentifier:"charts-data",expanded:this.isOpen})),this.chartMenuService.isLegacyFormat()?(this.createLegacyCategoriesGroup(this.dimensionCols),this.clearAggFuncControls()):(this.createCategoriesGroup(this.dimensionCols),this.createAggFuncControls(this.dimensionCols)),this.getGui().appendChild(this.groupComp.getGui())}refresh(e){var t;this.chartMenuService.isLegacyFormat()?this.refreshColumnComps(e)||this.recreate(e):((t=this.valuePillSelect)==null||t.setValues(e,e.filter(r=>r.selected)),this.refreshValueSelect(e),this.refreshAggFuncControls(e,this.chartController.getAggFunc()))}recreate(e){this.isOpen=this.groupComp.isExpanded(),import_core9._.clearElement(this.getGui()),this.destroyBean(this.groupComp),this.dimensionCols=e,this.init()}createCategoriesGroup(e){this.createGroup(e,t=>import_core9._.escapeString(t?.displayName),"categoryAdd","categorySelect")}createLegacyCategoriesGroup(e){const t=`chartDimension${this.groupComp.getCompId()}`,r=this.allowMultipleSelection;if(e.forEach(s=>{const i={label:import_core9._.escapeString(s.displayName),value:s.selected,inputName:t},n=this.groupComp.createManagedBean(r?(()=>{const o=new import_core9.AgCheckbox(i);return o.addCssClass("ag-data-select-checkbox"),o})():new import_core9.AgRadioButton(i));this.addChangeListener(n,s),this.groupComp.addItem(n),this.columnComps.set(s.colId,n),r&&this.addDragHandle(n,s)}),r){const s=this.groupComp.getGui(),i={getIconName:()=>import_core9.DragAndDropService.ICON_MOVE,getContainer:()=>s,onDragging:n=>this.onDragging(n),onDragLeave:()=>this.onDragLeave(),isInterestedIn:this.isInterestedIn.bind(this),targetContainsSource:!0};this.dragAndDropService.addDropTarget(i),this.addDestroyFunc(()=>this.dragAndDropService.removeDropTarget(i))}}createAggFuncControls(e){const t=this.chartController.getAggFunc();this.groupComp.addItem(this.aggFuncToggle=this.createBean(new import_core9.AgToggleButton({label:this.chartTranslationService.translate("aggregate"),labelAlignment:"left",labelWidth:"flex",inputWidth:"flex",value:t!=null,onValueChange:r=>{var s,i;const n=r?DEFAULT_AGG_FUNC:void 0;this.chartController.setAggFunc(n),(s=this.aggFuncSelect)==null||s.setValue(n,!0),(i=this.aggFuncSelect)==null||i.setDisplayed(n!=null)}}))),this.groupComp.addItem(this.aggFuncSelect=this.createBean(new import_core9.AgSelect({options:[{value:"sum",text:this.chartTranslationService.translate("sum")},{value:"first",text:this.chartTranslationService.translate("first")},{value:"last",text:this.chartTranslationService.translate("last")},{value:"min",text:this.chartTranslationService.translate("min")},{value:"max",text:this.chartTranslationService.translate("max")},{value:"count",text:this.chartTranslationService.translate("count")},{value:"avg",text:this.chartTranslationService.translate("avg")}],value:typeof t=="string"?t:void 0,onValueChange:r=>{this.chartController.setAggFunc(r)}}))),this.refreshAggFuncControls(e,t)}refreshAggFuncControls(e,t){var r,s,i,n;const l=e.filter(c=>c.selected).some(c=>c.colId!==ChartDataModel.DEFAULT_CATEGORY);(r=this.aggFuncToggle)==null||r.setValue(t!=null),(s=this.aggFuncSelect)==null||s.setValue(typeof t=="string"?t:void 0,!0),(i=this.aggFuncToggle)==null||i.setDisplayed(l),(n=this.aggFuncSelect)==null||n.setDisplayed(l&&t!=null)}clearAggFuncControls(){this.aggFuncToggle=this.aggFuncToggle&&this.destroyBean(this.aggFuncToggle),this.aggFuncSelect=this.aggFuncSelect&&this.destroyBean(this.aggFuncSelect)}destroy(){this.clearAggFuncControls(),this.groupComp=this.destroyBean(this.groupComp),super.destroy()}};_CategoriesDataPanel.TEMPLATE='<div id="categoriesGroup"></div>',__decorateClass([(0,import_core9.Autowired)("chartMenuService")],_CategoriesDataPanel.prototype,"chartMenuService",2),__decorateClass([import_core9.PostConstruct],_CategoriesDataPanel.prototype,"init",1);var CategoriesDataPanel=_CategoriesDataPanel,import_core10=require("@ag-grid-community/core"),_SeriesDataPanel=class q extends DragDataPanel{constructor(e,t,r,s,i,n,o,l){super(e,t,i,n,q.TEMPLATE),this.chartOptionsService=r,this.title=s,this.valueCols=o,this.isOpen=l}init(){if(this.groupComp=this.createBean(new import_core10.AgGroupComponent({title:this.title,enabled:!0,suppressEnabledCheckbox:!0,suppressOpenCloseIcons:!1,cssIdentifier:"charts-data",expanded:this.isOpen})),this.chartController.isActiveXYChart()){const e=this.groupComp.createManagedBean(new import_core10.AgToggleButton({label:this.chartTranslationService.translate("paired"),labelAlignment:"left",labelWidth:"flex",inputWidth:"flex",value:this.chartOptionsService.getPairedMode(),onValueChange:t=>{this.chartOptionsService.setPairedMode(!!t),this.chartController.updateForGridChange({maintainColState:!0})}}));this.groupComp.addItem(e)}this.chartMenuService.isLegacyFormat()?this.createLegacySeriesGroup(this.valueCols):this.createSeriesGroup(this.valueCols),this.getGui().appendChild(this.groupComp.getGui())}refresh(e){var t,r;if(this.chartMenuService.isLegacyFormat())if(this.refreshColumnComps(e)){if(this.chartController.isActiveXYChart()){const i=this.generateGetSeriesLabel(e);e.forEach(n=>{this.columnComps.get(n.colId).setLabel(i(n))})}}else this.recreate(e);else(t=this.valuePillSelect)==null||t.setValueFormatter(this.generateGetSeriesLabel(e)),(r=this.valuePillSelect)==null||r.setValues(e,e.filter(s=>s.selected)),this.refreshValueSelect(e)}recreate(e){this.isOpen=this.groupComp.isExpanded(),import_core10._.clearElement(this.getGui()),this.destroyBean(this.groupComp),this.valueCols=e,this.init()}createSeriesGroup(e){this.createGroup(e,this.generateGetSeriesLabel(e),"seriesAdd","seriesSelect")}createLegacySeriesGroup(e){const t=this.generateGetSeriesLabel(e);e.forEach(i=>{const n=t(i),o=this.groupComp.createManagedBean(new import_core10.AgCheckbox({label:n,value:i.selected}));o.addCssClass("ag-data-select-checkbox"),this.addChangeListener(o,i),this.groupComp.addItem(o),this.columnComps.set(i.colId,o),this.addDragHandle(o,i)});const r=this.groupComp.getGui(),s={getIconName:()=>import_core10.DragAndDropService.ICON_MOVE,getContainer:()=>r,onDragging:i=>this.onDragging(i),onDragLeave:()=>this.onDragLeave(),isInterestedIn:this.isInterestedIn.bind(this),targetContainsSource:!0};this.dragAndDropService.addDropTarget(s),this.addDestroyFunc(()=>this.dragAndDropService.removeDropTarget(s))}generateGetSeriesLabel(e){if(!this.chartController.isActiveXYChart())return n=>import_core10._.escapeString(n.displayName);const t=e.filter(n=>n.selected),r=this.chartController.getChartType()==="bubble",s=this.chartOptionsService.getPairedMode(),i=new Map;return i.set(0,"X"),i.set(1,"Y"),i.set(2,"size"),n=>{const o=import_core10._.escapeString(n.displayName);if(!n.selected)return o;const l=t.indexOf(n);if(l===-1)return o;let c;return s?c=i.get(l%(r?3:2)):l===0?c="X":c=r&&l%2===0?"size":"Y",`${o} (${c})`}}destroy(){this.groupComp=this.destroyBean(this.groupComp),super.destroy()}};_SeriesDataPanel.TEMPLATE='<div id="seriesGroup"></div>',__decorateClass([(0,import_core10.Autowired)("chartMenuService")],_SeriesDataPanel.prototype,"chartMenuService",2),__decorateClass([import_core10.PostConstruct],_SeriesDataPanel.prototype,"init",1);var SeriesDataPanel=_SeriesDataPanel,import_core11=require("@ag-grid-community/core"),_SeriesChartTypePanel=class $ extends import_core11.Component{constructor(e,t,r){super($.TEMPLATE),this.chartController=e,this.columns=t,this.isOpen=r,this.selectedColIds=[],this.chartTypeComps=new Map,this.secondaryAxisComps=new Map}init(){this.createSeriesChartTypeGroup(this.columns)}refresh(e){import_core11._.areEqual(this.getValidColIds(e),this.selectedColIds)?this.refreshComps():this.recreate(e)}recreate(e){this.isOpen=this.seriesChartTypeGroupComp.isExpanded(),import_core11._.clearElement(this.getGui()),this.destroyBean(this.seriesChartTypeGroupComp),this.columns=e,this.selectedColIds=[],this.clearComps(),this.init()}getValidColIds(e){const t=this.chartController.getSeriesChartTypes();return e.filter(r=>r.selected&&!!t.filter(s=>s.colId===r.colId)[0]).map(({colId:r})=>r)}createSeriesChartTypeGroup(e){this.seriesChartTypeGroupComp=this.createBean(new import_core11.AgGroupComponent({title:this.chartTranslationService.translate("seriesChartType"),enabled:!0,suppressEnabledCheckbox:!0,suppressOpenCloseIcons:!1,cssIdentifier:"charts-data",expanded:this.isOpen}));const t=this.chartController.getSeriesChartTypes();e.forEach(r=>{if(!r.selected)return;const s=t.filter(u=>u.colId===r.colId)[0];if(!s)return;this.selectedColIds.push(r.colId);const i=this.seriesChartTypeGroupComp.createManagedBean(new import_core11.AgGroupComponent({title:r.displayName,enabled:!0,suppressEnabledCheckbox:!0,suppressOpenCloseIcons:!0,cssIdentifier:"charts-format-sub-level"})),n=u=>["groupedColumn","stackedColumn","stackedArea"].includes(u),o=this.seriesChartTypeGroupComp.createManagedBean(new import_core11.AgCheckbox({label:this.chartTranslationService.translate("secondaryAxis"),labelWidth:"flex",disabled:n(s.chartType),value:!!s.secondaryAxis,onValueChange:u=>this.chartController.updateSeriesChartType(r.colId,void 0,u)}));i.addItem(o);const l=u=>this.chartTranslationService.translate(u),c=[{value:"line",text:l("line")},{value:"area",text:l("area")},{value:"stackedArea",text:l("stackedArea")},{value:"groupedColumn",text:l("groupedColumn")},{value:"stackedColumn",text:l("stackedColumn")}],h=i.createManagedBean(new import_core11.AgSelect({labelAlignment:"left",labelWidth:"flex",options:c,value:s.chartType,onValueChange:u=>this.chartController.updateSeriesChartType(r.colId,u)}));i.addItem(h),this.seriesChartTypeGroupComp.addItem(i),this.chartTypeComps.set(r.colId,h),this.secondaryAxisComps.set(r.colId,o)}),this.getGui().appendChild(this.seriesChartTypeGroupComp.getGui())}refreshComps(){const e=this.chartController.getSeriesChartTypes();this.selectedColIds.forEach(t=>{const r=e.find(n=>n.colId===t);if(!r)return;const s=this.chartTypeComps.get(t),i=this.secondaryAxisComps.get(t);s?.setValue(r.chartType),i?.setValue(!!r.secondaryAxis),i?.setDisabled(this.isSecondaryAxisDisabled(r.chartType))})}clearComps(){this.chartTypeComps.clear(),this.secondaryAxisComps.clear()}isSecondaryAxisDisabled(e){return["groupedColumn","stackedColumn","stackedArea"].includes(e)}destroy(){this.clearComps(),this.seriesChartTypeGroupComp=this.destroyBean(this.seriesChartTypeGroupComp),super.destroy()}};_SeriesChartTypePanel.TEMPLATE='<div id="seriesChartTypeGroup"></div>',__decorateClass([(0,import_core11.Autowired)("chartTranslationService")],_SeriesChartTypePanel.prototype,"chartTranslationService",2),__decorateClass([import_core11.PostConstruct],_SeriesChartTypePanel.prototype,"init",1);var SeriesChartTypePanel=_SeriesChartTypePanel,import_core12=require("@ag-grid-community/core"),_SwitchCategorySeriesDataPanel=class j extends import_core12.Component{constructor(e,t){super(),this.getValue=e,this.setValue=t}init(){this.switchCategorySeriesToggleButton=this.createManagedBean(new import_core12.AgToggleButton({label:this.chartTranslationService.translate("switchCategorySeries"),labelAlignment:"left",labelWidth:"flex",inputWidth:"flex",value:this.getValue(),onValueChange:t=>{this.setValue(t)}}));const e={title:void 0,suppressEnabledCheckbox:!0,suppressOpenCloseIcons:!0,cssIdentifier:"charts-data",expanded:!0,items:[this.switchCategorySeriesToggleButton]};this.setTemplate(j.TEMPLATE,{switchCategorySeriesGroup:e})}refresh(){var e;(e=this.switchCategorySeriesToggleButton)==null||e.setValue(this.getValue(),!0)}};_SwitchCategorySeriesDataPanel.TEMPLATE=`<div>
        <ag-group-component ref="switchCategorySeriesGroup"></ag-group-component>
    </div>`,__decorateClass([(0,import_core12.Autowired)("chartTranslationService")],_SwitchCategorySeriesDataPanel.prototype,"chartTranslationService",2),__decorateClass([import_core12.PostConstruct],_SwitchCategorySeriesDataPanel.prototype,"init",1);var SwitchCategorySeriesDataPanel=_SwitchCategorySeriesDataPanel,DefaultDataPanelDef={groups:[{type:"categories",isOpen:!0},{type:"series",isOpen:!0},{type:"seriesChartType",isOpen:!0}]},_ChartDataPanel=class X extends import_core13.Component{constructor(e,t){super(X.TEMPLATE),this.chartController=e,this.chartOptionsService=t,this.isSwitchCategorySeriesToggled=!1}init(){this.switchCategorySeriesPanel=this.addComponent(this.createManagedBean(new SwitchCategorySeriesDataPanel(()=>this.chartController.isCategorySeriesSwitched(),e=>this.chartController.switchCategorySeries(e)))),this.isSwitchCategorySeriesToggled=this.chartController.isCategorySeriesSwitched(),this.createAutoScrollService(),this.updatePanels(),this.addManagedListener(this.chartController,ChartController.EVENT_CHART_MODEL_UPDATE,this.updatePanels.bind(this)),this.addManagedListener(this.chartController,ChartController.EVENT_CHART_API_UPDATE,this.updatePanels.bind(this))}destroy(){this.clearPanelComponents(),super.destroy()}updatePanels(){var e,t,r,s,i;const n=this.chartType,o=this.isSwitchCategorySeriesToggled,{dimensionCols:l,valueCols:c}=this.chartController.getColStateForMenu();this.chartType=this.chartController.getChartType();const h=this.chartType!==n;this.isSwitchCategorySeriesToggled=this.chartController.isCategorySeriesSwitched();const u=this.isSwitchCategorySeriesToggled!==o;this.canRefresh(n,this.chartType)&&!u?((e=this.categoriesDataPanel)==null||e.refresh(l),(t=this.seriesDataPanel)==null||t.refresh(c),(r=this.seriesChartTypePanel)==null||r.refresh(c)):this.recreatePanels(l,c),h&&((s=this.switchCategorySeriesPanel)==null||s.setDisplayed(supportsInvertedCategorySeries(this.chartType)&&!this.chartMenuService.isLegacyFormat())),u&&((i=this.switchCategorySeriesPanel)==null||i.refresh())}canRefresh(e,t){if(e===void 0)return!1;if(e===t)return!0;const r=s=>["columnLineCombo","areaColumnCombo","customCombo"].includes(s);return!!(r(e)&&r(t))}recreatePanels(e,t){var r;this.clearPanelComponents();const{chartType:s}=this;if(!s)return;const i=this.chartController.isCategorySeriesSwitched(),n=(r=this.getDataPanelDef().groups)==null?void 0:r.map(({type:o,isOpen:l})=>o===(i?"series":"categories")?this.categoriesDataPanel=this.createBean(new CategoriesDataPanel(this.chartController,this.autoScrollService,this.getCategoryGroupTitle(i),this.getCategoryGroupMultipleSelect(s,i),e,l)):o===(i?"categories":"series")?this.seriesDataPanel=this.createBean(new SeriesDataPanel(this.chartController,this.autoScrollService,this.chartOptionsService,this.getSeriesGroupTitle(i),this.getSeriesGroupMultipleSelect(s,i),this.getSeriesGroupMaxSelection(s,i),t,l)):o==="seriesChartType"?this.chartController.isComboChart()?this.seriesChartTypePanel=this.createBean(new SeriesChartTypePanel(this.chartController,t,l)):null:(import_core13._.warnOnce(`Invalid charts data panel group name supplied: '${o}'`),null)).filter(o=>o!=null);n&&this.addPanelComponents(n)}addPanelComponents(e){var t;const r=document.createDocumentFragment();for(const i of e)this.registerComponent(i),r.appendChild(i.getGui());const s=(t=this.switchCategorySeriesPanel)==null?void 0:t.getGui();return this.getGui().insertBefore(r,s??null),e}clearPanelComponents(){const e=this.getGui();this.categoriesDataPanel&&e.removeChild(this.categoriesDataPanel.getGui()),this.seriesDataPanel&&e.removeChild(this.seriesDataPanel.getGui()),this.seriesChartTypePanel&&e.removeChild(this.seriesChartTypePanel.getGui()),this.categoriesDataPanel=this.destroyBean(this.categoriesDataPanel),this.seriesDataPanel=this.destroyBean(this.seriesDataPanel),this.seriesChartTypePanel=this.destroyBean(this.seriesChartTypePanel)}createAutoScrollService(){const e=this.getGui();this.autoScrollService=new import_core13.AutoScrollService({scrollContainer:e,scrollAxis:"y",getVerticalPosition:()=>e.scrollTop,setVerticalPosition:t=>e.scrollTop=t})}addComponent(e){return this.registerComponent(e),this.getGui().appendChild(e.getGui()),e}registerComponent(e){e.addCssClass("ag-chart-data-section")}getDataPanelDef(){var e,t;return(t=(e=this.gridOptionsService.get("chartToolPanelsDef"))==null?void 0:e.dataPanel)!=null?t:DefaultDataPanelDef}getCategoryGroupTitle(e){return e?this.chartTranslationService.translate("seriesLabels"):this.chartTranslationService.translate(this.chartController.isActiveXYChart()?"labels":"categories")}getCategoryGroupMultipleSelect(e,t){return t?!1:getMaxNumCategories(e)!==1}getSeriesGroupTitle(e){return e?this.chartTranslationService.translate("categoryValues"):this.chartTranslationService.translate(this.chartController.isActiveXYChart()?"xyValues":"series")}getSeriesGroupMultipleSelect(e,t){return this.getSeriesGroupMaxSelection(e,t)!==1}getSeriesGroupMaxSelection(e,t){if(!t)return getMaxNumSeries(e)}};_ChartDataPanel.TEMPLATE='<div class="ag-chart-data-wrapper ag-scrollable-container"></div>',__decorateClass([(0,import_core13.Autowired)("chartTranslationService")],_ChartDataPanel.prototype,"chartTranslationService",2),__decorateClass([(0,import_core13.Autowired)("chartMenuService")],_ChartDataPanel.prototype,"chartMenuService",2),__decorateClass([import_core13.PostConstruct],_ChartDataPanel.prototype,"init",1);var ChartDataPanel=_ChartDataPanel,import_core40=require("@ag-grid-community/core"),import_core15=require("@ag-grid-community/core"),import_core14=require("@ag-grid-community/core"),_FontPanel=class Z extends import_core14.Component{constructor(e){super(),this.activeComps=[],this.params=e,this.chartOptions=e.chartMenuUtils.getChartOptions()}init(){const e={cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0,title:this.params.name||this.chartTranslationService.translate("font"),enabled:this.params.enabled,suppressEnabledCheckbox:!!this.params.suppressEnabledCheckbox,onEnableChange:t=>{this.params.onEnableChange&&this.params.onEnableChange(t)}};this.setTemplate(Z.TEMPLATE,{fontGroup:e,familySelect:this.getFamilySelectParams(),weightStyleSelect:this.getWeightStyleSelectParams(),sizeSelect:this.getSizeSelectParams(),colorPicker:this.params.chartMenuUtils.getDefaultColorPickerParams(this.params.keyMapper("color"))})}addCompToPanel(e){this.fontGroup.addItem(e),this.activeComps.push(e)}setEnabled(e){this.fontGroup.setEnabled(e)}getFamilySelectParams(){const e=["Arial, sans-serif","Aria Black, sans-serif","Book Antiqua,  serif","Charcoal, sans-serif","Comic Sans MS, cursive","Courier, monospace","Courier New, monospace","Gadget, sans-serif","Geneva, sans-serif","Helvetica, sans-serif","Impact, sans-serif","Lucida Console, monospace","Lucida Grande, sans-serif","Lucida Sans Unicode,  sans-serif","Monaco, monospace","Palatino Linotype, serif","Palatino, serif","Times New Roman, serif","Times, serif","Verdana, sans-serif"],t=this.getInitialFontValue("fontFamily");let r=e[0];if(t){const n=e.map(o=>o.toLowerCase()).indexOf(t.toLowerCase());if(n>=0)r=e[n];else{const o=import_core14._.capitalise(t);e.push(o),r=o}}return{options:e.sort().map(i=>({value:i,text:i})),inputWidth:"flex",value:`${r}`,onValueChange:i=>this.setFont({fontFamily:i})}}getSizeSelectParams(){const e=[8,10,12,14,16,18,20,22,24,26,28,30,32,34,36],t=this.getInitialFontValue("fontSize");return import_core14._.includes(e,t)||e.push(t),{options:e.sort((s,i)=>s-i).map(s=>({value:`${s}`,text:`${s}`})),inputWidth:"flex",value:`${t}`,onValueChange:s=>this.setFont({fontSize:parseInt(s,10)}),label:this.chartTranslationService.translate("size")}}getWeightStyleSelectParams(){var e,t;const r=(e=this.getInitialFontValue("fontWeight"))!=null?e:"normal",s=(t=this.getInitialFontValue("fontStyle"))!=null?t:"normal",i=[{name:"normal",weight:"normal",style:"normal"},{name:"bold",weight:"bold",style:"normal"},{name:"italic",weight:"normal",style:"italic"},{name:"boldItalic",weight:"bold",style:"italic"}];let n=i.find(l=>l.weight===r&&l.style===s);return n||(n={name:"predefined",weight:r,style:s},i.unshift(n)),{options:i.map(l=>({value:l.name,text:this.chartTranslationService.translate(l.name)})),inputWidth:"flex",value:n.name,onValueChange:l=>{const c=i.find(h=>h.name===l);this.setFont({fontWeight:c.weight,fontStyle:c.style})}}}addItemToPanel(e){this.fontGroup.addItem(e),this.activeComps.push(e)}destroyActiveComps(){this.activeComps.forEach(e=>{import_core14._.removeFromParent(e.getGui()),this.destroyBean(e)})}destroy(){this.destroyActiveComps(),super.destroy()}setFont(e){const{keyMapper:t}=this.params;Object.entries(e).forEach(([r,s])=>{s&&this.chartOptions.setValue(t(r),s)})}getInitialFontValue(e){const{keyMapper:t}=this.params;return this.chartOptions.getValue(t(e))}};_FontPanel.TEMPLATE=`<div class="ag-font-panel">
            <ag-group-component ref="fontGroup">
                <ag-select ref="familySelect"></ag-select>
                <ag-select ref="weightStyleSelect"></ag-select>
                <div class="ag-charts-font-size-color">
                    <ag-select ref="sizeSelect"></ag-select>
                    <ag-color-picker ref="colorPicker"></ag-color-picker>
                </div>
            </ag-group-component>
        </div>`,__decorateClass([(0,import_core14.RefSelector)("fontGroup")],_FontPanel.prototype,"fontGroup",2),__decorateClass([(0,import_core14.Autowired)("chartTranslationService")],_FontPanel.prototype,"chartTranslationService",2),__decorateClass([import_core14.PostConstruct],_FontPanel.prototype,"init",1);var FontPanel=_FontPanel,_LegendPanel=class J extends import_core15.Component{constructor({chartMenuParamsFactory:e,isExpandedOnInit:t=!1}){super(),this.chartMenuUtils=e,this.isExpandedOnInit=t}init(){const e=this.chartMenuUtils.addEnableParams("legend.enabled",{cssIdentifier:"charts-format-top-level",direction:"vertical",title:this.chartTranslationService.translate("legend"),suppressEnabledCheckbox:!1,suppressToggleExpandOnEnableChange:!0,expanded:this.isExpandedOnInit,items:[this.createLabelPanel()]});this.setTemplate(J.TEMPLATE,{legendGroup:e,legendPositionSelect:this.chartMenuUtils.getDefaultLegendParams("legend.position"),legendPaddingSlider:this.getSliderParams("spacing","spacing",200),markerSizeSlider:this.getSliderParams("item.marker.size","markerSize",40),markerStrokeSlider:this.getSliderParams("item.marker.strokeWidth","markerStroke",10),markerPaddingSlider:this.getSliderParams("item.marker.padding","itemSpacing",20),itemPaddingXSlider:this.getSliderParams("item.paddingX","layoutHorizontalSpacing",50),itemPaddingYSlider:this.getSliderParams("item.paddingY","layoutVerticalSpacing",50)})}getSliderParams(e,t,r){return this.chartMenuUtils.getDefaultSliderParams(`legend.${e}`,t,r)}createLabelPanel(){const e={enabled:!0,suppressEnabledCheckbox:!0,chartMenuUtils:this.chartMenuUtils,keyMapper:t=>`legend.item.label.${t}`};return this.createManagedBean(new FontPanel(e))}};_LegendPanel.TEMPLATE=`<div>
            <ag-group-component ref="legendGroup">
                <ag-select ref="legendPositionSelect"></ag-select>
                <ag-slider ref="legendPaddingSlider"></ag-slider>
                <ag-slider ref="markerSizeSlider"></ag-slider>
                <ag-slider ref="markerStrokeSlider"></ag-slider>
                <ag-slider ref="markerPaddingSlider"></ag-slider>
                <ag-slider ref="itemPaddingXSlider"></ag-slider>
                <ag-slider ref="itemPaddingYSlider"></ag-slider>
            </ag-group-component>
        </div>`,__decorateClass([(0,import_core15.Autowired)("chartTranslationService")],_LegendPanel.prototype,"chartTranslationService",2),__decorateClass([import_core15.PostConstruct],_LegendPanel.prototype,"init",1);var LegendPanel=_LegendPanel,import_core20=require("@ag-grid-community/core"),import_core16=require("@ag-grid-community/core"),_AxisTicksPanel=class Q extends import_core16.Component{constructor(e){super(),this.chartMenuUtils=e}init(){const e=this.chartMenuUtils.addEnableParams("tick.enabled",{cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0,title:this.chartTranslationService.translate("ticks"),suppressEnabledCheckbox:!1}),t=this.chartMenuUtils.getDefaultColorPickerParams("tick.color"),r=this.chartMenuUtils.getDefaultSliderParams("tick.width","width",10),s=this.chartMenuUtils.getDefaultSliderParams("tick.size","length",30);this.setTemplate(Q.TEMPLATE,{axisTicksGroup:e,axisTicksColorPicker:t,axisTicksWidthSlider:r,axisTicksSizeSlider:s})}};_AxisTicksPanel.TEMPLATE=`<div>
            <ag-group-component ref="axisTicksGroup">
                <ag-color-picker ref="axisTicksColorPicker"></ag-color-picker>
                <ag-slider ref="axisTicksWidthSlider"></ag-slider>
                <ag-slider ref="axisTicksSizeSlider"></ag-slider>
            </ag-group-component>
        </div>`,__decorateClass([(0,import_core16.Autowired)("chartTranslationService")],_AxisTicksPanel.prototype,"chartTranslationService",2),__decorateClass([import_core16.PostConstruct],_AxisTicksPanel.prototype,"init",1);var AxisTicksPanel=_AxisTicksPanel,import_core17=require("@ag-grid-community/core"),_GridLinePanel=class ee extends import_core17.Component{constructor(e){super(),this.chartMenuUtils=e,this.chartOptions=e.getChartOptions()}init(){const e=this.chartMenuUtils.addEnableParams("gridLine.enabled",{cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0,title:this.chartTranslationService.translate("gridLines"),suppressEnabledCheckbox:!1}),t=this.getGridLineColorPickerParams("color"),r=this.getGridLineWidthSliderParams("thickness"),s=this.getGridLineDashSliderParams("lineDash");this.setTemplate(ee.TEMPLATE,{gridLineGroup:e,gridLineColorPicker:t,gridLineWidthSlider:r,gridLineLineDashSlider:s})}getGridLineColorPickerParams(e){return this.chartMenuUtils.getDefaultColorPickerParams("gridLine.style",e,{formatInputValue:t=>{var r;return(r=t?.[0])==null?void 0:r.stroke},parseInputValue:t=>{var r;const s=(r=this.chartOptions.getValue("gridLine.style"))!=null?r:[];return s.length===0?[{stroke:t,lineDash:[]}]:[__spreadProps(__spreadValues({},s[0]),{stroke:t})]}})}getGridLineWidthSliderParams(e){return this.chartMenuUtils.getDefaultSliderParams("gridLine.width",e,10)}getGridLineDashSliderParams(e){var t,r;const s=this.chartOptions.getValue("gridLine.style"),i=(r=(t=s?.[0])==null?void 0:t.lineDash)==null?void 0:r[0],n=this.chartMenuUtils.getDefaultSliderParamsWithoutValueParams(i??0,e,30);return n.onValueChange=o=>{const l=this.chartOptions.getValue("gridLine.style.0.stroke");this.chartOptions.setValue("gridLine.style",[{lineDash:[o],stroke:l}])},n}};_GridLinePanel.TEMPLATE=`<div>
            <ag-group-component ref="gridLineGroup">
                <ag-color-picker ref="gridLineColorPicker"></ag-color-picker>
                <ag-slider ref="gridLineWidthSlider"></ag-slider>
                <ag-slider ref="gridLineLineDashSlider"></ag-slider>
            </ag-group-component>
        </div>`,__decorateClass([(0,import_core17.Autowired)("chartTranslationService")],_GridLinePanel.prototype,"chartTranslationService",2),__decorateClass([import_core17.PostConstruct],_GridLinePanel.prototype,"init",1);var GridLinePanel=_GridLinePanel,import_core18=require("@ag-grid-community/core"),_AgAngleSelect=class te extends import_core18.AgAbstractLabel{constructor(e){super(e,te.TEMPLATE),this.radius=0,this.offsetX=0,this.offsetY=0}postConstruct(){super.postConstruct();const{value:e,onValueChange:t}=this.config;e!=null&&this.setValue(e,void 0,!0),t!=null&&this.onValueChange(t),this.dragListener={eElement:this.eParentCircle,dragStartPixels:0,onDragStart:r=>{this.parentCircleRect=this.eParentCircle.getBoundingClientRect()},onDragging:r=>this.calculateAngleDrag(r),onDragStop:()=>{}},this.dragService.addDragSource(this.dragListener),this.eAngleValue.setLabel("").setLabelWidth(5).setInputWidth(45).setMin(0).setMax(360).setValue(`${this.degrees}`).onValueChange(r=>{(r==null||r==="")&&(r="0"),r=this.eAngleValue.normalizeValue(r);let s=parseFloat(r);s>180&&(s=s-360),this.setValue(s)}),this.updateNumberInput(),import_core18._.exists(this.getValue())&&this.eAngleValue.setValue(this.normalizeNegativeValue(this.getValue()).toString()),this.addManagedListener(this,import_core18.Events.EVENT_FIELD_VALUE_CHANGED,()=>{const r=this.gridOptionsService.getDocument();this.eAngleValue.getInputElement().contains(r.activeElement)||this.updateNumberInput()})}updateNumberInput(){const e=this.normalizeNegativeValue(this.getValue());this.eAngleValue.setValue(e.toString())}positionChildCircle(e){const t=this.parentCircleRect||{width:24,height:24},r=this.eChildCircle,s=t.width/2,i=t.height/2;r.style.left=`${s+Math.cos(e)*8}px`,r.style.top=`${i+Math.sin(e)*8}px`}calculatePolar(){const e=this.offsetX,t=this.offsetY,r=Math.atan2(t,e);this.degrees=this.toDegrees(r),this.radius=Math.sqrt(e*e+t*t),this.positionChildCircle(r)}calculateCartesian(){const e=this.toRadians(this.getValue()),t=this.getRadius();this.setOffsetX(Math.cos(e)*t).setOffsetY(Math.sin(e)*t)}setOffsetX(e){return this.offsetX!==e&&(this.offsetX=e,this.calculatePolar()),this}setOffsetY(e){return this.offsetY!==e&&(this.offsetY=e,this.calculatePolar()),this}calculateAngleDrag(e){const t=this.parentCircleRect,r=t.width/2,s=t.height/2,i=e.clientX-t.left,n=e.clientY-t.top,o=i-r,l=n-s,c=Math.atan2(l,o);this.setValue(c,!0)}toDegrees(e){return e/Math.PI*180}toRadians(e){return e/180*Math.PI}normalizeNegativeValue(e){return e<0?360+e:e}normalizeAngle180(e){return e%=Math.PI*2,e<-Math.PI?e+=Math.PI*2:e>=Math.PI&&(e-=Math.PI*2),e}getRadius(){return this.radius}setRadius(e){return this.radius===e?this:(this.radius=e,this.calculateCartesian(),this)}onValueChange(e){return this.addManagedListener(this,import_core18.Events.EVENT_FIELD_VALUE_CHANGED,()=>{e(this.degrees)}),this}getValue(e){return e?this.toRadians(this.degrees):this.degrees}setValue(e,t,r){let s;return t?s=e:s=this.normalizeAngle180(this.toRadians(e)),e=this.toDegrees(s),this.degrees!==e&&(this.degrees=Math.floor(e),this.calculateCartesian(),this.positionChildCircle(s),r||this.dispatchEvent({type:import_core18.Events.EVENT_FIELD_VALUE_CHANGED})),this}setWidth(e){return import_core18._.setFixedWidth(this.getGui(),e),this}setDisabled(e){return super.setDisabled(e),this.eAngleValue.setDisabled(e),this}destroy(){this.dragService.removeDragSource(this.dragListener),super.destroy()}};_AgAngleSelect.TEMPLATE=`<div class="ag-angle-select">
            <div ref="eLabel"></div>
            <div class="ag-wrapper ag-angle-select-wrapper">
                <div ref="eAngleSelectField" class="ag-angle-select-field">
                    <div ref="eParentCircle" class="ag-angle-select-parent-circle">
                        <div ref="eChildCircle" class="ag-angle-select-child-circle"></div>
                    </div>
                </div>
                <ag-input-number-field ref="eAngleValue"></ag-input-number-field>
            </div>
        </div>`,__decorateClass([(0,import_core18.RefSelector)("eLabel")],_AgAngleSelect.prototype,"eLabel",2),__decorateClass([(0,import_core18.RefSelector)("eParentCircle")],_AgAngleSelect.prototype,"eParentCircle",2),__decorateClass([(0,import_core18.RefSelector)("eChildCircle")],_AgAngleSelect.prototype,"eChildCircle",2),__decorateClass([(0,import_core18.RefSelector)("eAngleValue")],_AgAngleSelect.prototype,"eAngleValue",2),__decorateClass([(0,import_core18.Autowired)("dragService")],_AgAngleSelect.prototype,"dragService",2);var AgAngleSelect=_AgAngleSelect,import_core19=require("@ag-grid-community/core"),ChartMenuParamsFactory=class extends import_core19.BeanStub{constructor(a){super(),this.chartOptionsProxy=a}getDefaultColorPickerParams(a,e,t){return this.addValueParams(a,{label:this.chartTranslationService.translate(e??"color"),labelWidth:"flex",inputWidth:"flex"},t)}getDefaultNumberInputParams(a,e,t){return this.addValueParams(a,{label:this.chartTranslationService.translate(e),labelWidth:"flex",inputWidth:"flex",precision:t?.precision,step:t?.step,min:t?.min,max:t?.max},{parseInputValue:r=>{const s=Number(r);return isNaN(s)?void 0:s},formatInputValue:r=>r==null?"":`${r}`})}getDefaultSliderParams(a,e,t,r){var s;let i=(s=this.chartOptionsProxy.getValue(a))!=null?s:0;r&&Array.isArray(i)&&(i=i[0]);const n=this.getDefaultSliderParamsWithoutValueParams(i,e,t);return n.onValueChange=o=>this.chartOptionsProxy.setValue(a,r?[o]:o),n}getDefaultSliderParamsWithoutValueParams(a,e,t){return{label:this.chartTranslationService.translate(e),minValue:0,maxValue:Math.max(a,t),textFieldWidth:45,value:`${a}`}}getDefaultCheckboxParams(a,e,t){const r=this.chartOptionsProxy.getValue(a),s={label:this.chartTranslationService.translate(e),value:r,readOnly:t?.readOnly,passive:t?.passive};return s.onValueChange=i=>{this.chartOptionsProxy.setValue(a,typeof i=="boolean"?i:void 0)},s}getDefaultSelectParams(a,e,t,r){const s=this.chartOptionsProxy.getValue(a),i={label:this.chartTranslationService.translate(e),value:s,options:t,pickerType:r?.pickerType,pickerAriaLabelKey:r?.pickerAriaLabelKey,pickerAriaLabelValue:r?.pickerAriaLabelValue};return i.onValueChange=n=>{this.chartOptionsProxy.setValue(a,n)},i}getDefaultLegendParams(a){return this.addValueParams(a,{label:this.chartTranslationService.translate("position"),labelWidth:"flex",inputWidth:"flex",options:["top","right","bottom","left"].map(e=>({value:e,text:this.chartTranslationService.translate(e)}))})}getDefaultFontPanelParams(a,e){const t=r=>`${a}.${r}`;return this.addEnableParams(t("enabled"),{name:this.chartTranslationService.translate(e),suppressEnabledCheckbox:!1,chartMenuUtils:this,keyMapper:t})}addValueParams(a,e,t){const r=this.chartOptionsProxy.getValue(a);return e.value=t?.formatInputValue?t.formatInputValue(r):r,e.onValueChange=s=>{const i=t?.parseInputValue?t.parseInputValue(s):s;this.chartOptionsProxy.setValue(a,i)},e}addEnableParams(a,e){var t;return e.enabled=(t=this.chartOptionsProxy.getValue(a))!=null?t:!1,e.onEnableChange=r=>this.chartOptionsProxy.setValue(a,r),e}getChartOptions(){return this.chartOptionsProxy}};__decorateClass([(0,import_core19.Autowired)("chartTranslationService")],ChartMenuParamsFactory.prototype,"chartTranslationService",2);var DEFAULT_TIME_AXIS_FORMAT="%d %B %Y",_CartesianAxisPanel=class re extends import_core20.Component{constructor(e,{chartController:t,chartOptionsService:r,isExpandedOnInit:s=!1}){super(),this.activePanels=[],this.axisLabelUpdateFuncs=[],this.axisType=e,this.chartController=t,this.chartAxisOptionsProxy=r.getCartesianAxisOptionsProxy(e),this.chartAxisThemeOverridesProxy=r.getCartesianAxisThemeOverridesProxy(e),this.chartAxisAppliedThemeOverridesProxy=r.getCartesianAxisAppliedThemeOverridesProxy(e),this.isExpandedOnInit=s}init(){const e=this.axisType,t={cssIdentifier:"charts-format-top-level",direction:"vertical",title:this.translate(e),expanded:this.isExpandedOnInit,suppressEnabledCheckbox:!0},r=this.createManagedBean(new ChartMenuParamsFactory(this.chartAxisOptionsProxy)),s=this.createManagedBean(new ChartMenuParamsFactory(this.chartAxisThemeOverridesProxy)),i=this.getAxisTypeSelectParams(r,this.chartAxisAppliedThemeOverridesProxy),n=this.getAxisPositionSelectParams(r),o=this.getAxisTimeFormatSelectParams(r),l=this.getAxisColorInputParams(s),c=this.getAxisLineWidthSliderParams(s);if(this.setTemplate(re.TEMPLATE,{axisGroup:t,axisTypeSelect:i??void 0,axisPositionSelect:n??void 0,axisTimeFormatSelect:o??void 0,axisColorInput:l,axisLineWidthSlider:c}),i||this.removeTemplateComponent(this.axisTypeSelect),n||this.removeTemplateComponent(this.axisPositionSelect),!o)this.removeTemplateComponent(this.axisTimeFormatSelect);else{const u=()=>{const d=this.chartAxisOptionsProxy.getValue("type")==="time";import_core20._.setDisplayed(this.axisTimeFormatSelect.getGui(),d)};u(),this.addManagedListener(this.eventService,import_core20.Events.EVENT_CHART_OPTIONS_CHANGED,d=>{u()})}this.initGridLines(s),this.initAxisTicks(s),this.initAxisLabels(s);const h=()=>this.axisLabelUpdateFuncs.forEach(u=>u());this.addManagedListener(this.chartController,ChartController.EVENT_CHART_UPDATED,h)}getAxisTypeSelectParams(e,t){const r=e.getChartOptions(),s=((n,o)=>{if(!isCartesian(n))return null;switch(o){case"xAxis":return[{value:"category",text:this.translate("category")},{value:"number",text:this.translate("number")},{value:"time",text:this.translate("time")}];case"yAxis":return null}})(this.chartController.getChartType(),this.axisType);if(!s)return null;const i=e.getDefaultSelectParams("type","axisType",s);return i.onValueChange=n=>{var o;const l=r.getValue("type");if(n===l)return;const c=t.getValue("*"),h=isTimeAxisType(l),u=isTimeAxisType(n),d=h!==u?u?DEFAULT_TIME_AXIS_FORMAT:void 0:null;if(d===null)r.setValue("type",n);else{const p=(o=r.getValue("label"))!=null?o:{};r.setValues([{expression:"type",value:n},{expression:"label",value:__spreadProps(__spreadValues({},p),{format:d})}]),this.axisTimeFormatSelect.setValue(d,!0)}t.setValue("*",c)},i}getAxisPositionSelectParams(e){const t=((r,s)=>{if(!isCartesian(r))return null;switch(s){case"xAxis":return[{value:"top",text:this.translate("top")},{value:"bottom",text:this.translate("bottom")}];case"yAxis":return[{value:"left",text:this.translate("left")},{value:"right",text:this.translate("right")}]}})(this.chartController.getChartType(),this.axisType);return t?e.getDefaultSelectParams("position","position",t):null}getAxisTimeFormatSelectParams(e){const t=((r,s)=>{if(!isCartesian(r))return null;switch(s){case"xAxis":return[{value:"%d/%m/%Y",text:this.translate("timeFormatSlashesDDMMYYYY")},{value:"%m/%d/%Y",text:this.translate("timeFormatSlashesMMDDYYYY")},{value:"%d/%m/%y",text:this.translate("timeFormatSlashesDDMMYY")},{value:"%m/%d/%y",text:this.translate("timeFormatSlashesMMDDYY")},{value:"%d.%e.%y",text:this.translate("timeFormatDotsDDMYY")},{value:"%e.%d.%y",text:this.translate("timeFormatDotsMDDYY")},{value:"%Y-%m-%d",text:this.translate("timeFormatDashesYYYYMMDD")},{value:"%d %B %Y",text:this.translate("timeFormatSpacesDDMMMMYYYY")},{value:"%H:%M:%S",text:this.translate("timeFormatHHMMSS")},{value:"%I:%M:%S %p",text:this.translate("timeFormatHHMMSSAmPm")}];case"yAxis":return null}})(this.chartController.getChartType(),this.axisType);return t?e.getDefaultSelectParams("label.format","timeFormat",t):null}getAxisColorInputParams(e){return e.getDefaultColorPickerParams("line.color")}getAxisLineWidthSliderParams(e){var t;const r=e.getChartOptions(),s=()=>r.getValue("line.enabled")?r.getValue("line.width"):null,i=o=>{r.setValues([{expression:"line.enabled",value:o!=null},{expression:"line.width",value:o??0}])},n=e.getDefaultSliderParamsWithoutValueParams((t=s())!=null?t:0,"thickness",10);return n.onValueChange=o=>{i(o===0?null:o)},n}initGridLines(e){const t=this.createBean(new GridLinePanel(e));this.axisGroup.addItem(t),this.activePanels.push(t)}initAxisTicks(e){if(!this.hasConfigurableAxisTicks())return;const t=this.createBean(new AxisTicksPanel(e));this.axisGroup.addItem(t),this.activePanels.push(t)}hasConfigurableAxisTicks(){switch(this.chartController.getChartType()){case"radarLine":case"radarArea":case"rangeBar":case"boxPlot":case"waterfall":return!1;default:return!0}}initAxisLabels(e){const t={name:this.translate("labels"),enabled:!0,suppressEnabledCheckbox:!0,chartMenuUtils:e,keyMapper:s=>`label.${s}`},r=this.createBean(new FontPanel(t));this.axisGroup.addItem(r),this.activePanels.push(r),this.addAdditionalLabelComps(r,e)}addAdditionalLabelComps(e,t){this.addLabelPadding(e,t);const r=this.createRotationWidget("labelRotation",t),s=this.initLabelRotation(r,t);e.addCompToPanel(s),e.addCompToPanel(r)}initLabelRotation(e,t){const r=t.getChartOptions(),s=()=>r.getValue("label.rotation"),i=()=>r.getValue("label.autoRotate"),n=h=>{h&&(this.prevRotation=s()),r.setValues([{expression:"label.autoRotate",value:h},{expression:"label.rotation",value:h?void 0:this.prevRotation}]),e.setDisabled(h)},l=typeof s()=="number"?!1:i(),c=this.createBean(new import_core20.AgCheckbox({label:this.translate("autoRotate"),value:l,onValueChange:n}));return e.setDisabled(l),c}createRotationWidget(e,t){var r;const s=t.getChartOptions(),i=()=>s.getValue("label.rotation"),n=h=>s.setValue("label.rotation",h),l=`${this.chartTranslationService.translate(e)} \xB0`,c=new AgAngleSelect({label:l,labelWidth:"flex",value:(r=i())!=null?r:0,onValueChange:n});return this.axisLabelUpdateFuncs.push(()=>{var h;c.setValue((h=i())!=null?h:0)}),this.createBean(c)}addLabelPadding(e,t){const r=this.createBean(new import_core20.AgSlider(t.getDefaultSliderParams("label.padding","padding",30)));e.addCompToPanel(r)}translate(e){return this.chartTranslationService.translate(e)}removeTemplateComponent(e){import_core20._.removeFromParent(e.getGui()),this.destroyBean(e)}destroyActivePanels(){this.activePanels.forEach(e=>{import_core20._.removeFromParent(e.getGui()),this.destroyBean(e)})}destroy(){this.destroyActivePanels(),super.destroy()}};_CartesianAxisPanel.TEMPLATE=`<div>
            <ag-group-component ref="axisGroup">
                <ag-select ref="axisTypeSelect"></ag-select>
                <ag-select ref="axisTimeFormatSelect"></ag-select>
                <ag-select ref="axisPositionSelect"></ag-select>
                <ag-color-picker ref="axisColorInput"></ag-color-picker>
                <ag-slider ref="axisLineWidthSlider"></ag-slider>
            </ag-group-component>
        </div>`,__decorateClass([(0,import_core20.RefSelector)("axisGroup")],_CartesianAxisPanel.prototype,"axisGroup",2),__decorateClass([(0,import_core20.RefSelector)("axisTypeSelect")],_CartesianAxisPanel.prototype,"axisTypeSelect",2),__decorateClass([(0,import_core20.RefSelector)("axisPositionSelect")],_CartesianAxisPanel.prototype,"axisPositionSelect",2),__decorateClass([(0,import_core20.RefSelector)("axisTimeFormatSelect")],_CartesianAxisPanel.prototype,"axisTimeFormatSelect",2),__decorateClass([(0,import_core20.Autowired)("chartTranslationService")],_CartesianAxisPanel.prototype,"chartTranslationService",2),__decorateClass([import_core20.PostConstruct],_CartesianAxisPanel.prototype,"init",1);var CartesianAxisPanel=_CartesianAxisPanel;function isTimeAxisType(a){switch(a){case"time":return!0;case"number":case"log":case"category":case"grouped-category":default:return!1}}var import_core21=require("@ag-grid-community/core"),_PolarAxisPanel=class ae extends import_core21.Component{constructor({chartController:e,chartAxisMenuParamsFactory:t,isExpandedOnInit:r=!1}){super(),this.chartController=e,this.chartMenuUtils=t,this.isExpandedOnInit=r}init(){const e={cssIdentifier:"charts-format-top-level",direction:"vertical",title:this.translate("polarAxis"),expanded:this.isExpandedOnInit,suppressEnabledCheckbox:!0},t=this.chartMenuUtils.getDefaultColorPickerParams("line.color"),r=this.chartMenuUtils.getDefaultSliderParams("line.width","thickness",10);this.setTemplate(ae.TEMPLATE,{axisGroup:e,axisColorInput:t,axisLineWidthSlider:r}),this.initAxis(),this.initAxisLabels(),this.initRadiusAxis()}initAxis(){const e=this.chartController.getChartType();if(["radarLine","radarArea"].includes(e)){const r=[{value:"circle",text:this.translate("circle")},{value:"polygon",text:this.translate("polygon")}];this.axisGroup.addItem(this.createSelect({labelKey:"shape",options:r,property:"shape"}))}e!=="pie"&&this.axisGroup.addItem(this.createSlider({labelKey:"innerRadius",defaultMaxValue:1,property:"innerRadiusRatio"}))}initAxisLabels(){const e={name:this.translate("labels"),enabled:!0,suppressEnabledCheckbox:!0,chartMenuUtils:this.chartMenuUtils,keyMapper:s=>`label.${s}`},t=this.createManagedBean(new FontPanel(e)),r=this.createOrientationWidget();t.addItemToPanel(r),this.axisGroup.addItem(t)}createOrientationWidget(){const e=[{value:"fixed",text:this.translate("fixed")},{value:"parallel",text:this.translate("parallel")},{value:"perpendicular",text:this.translate("perpendicular")}];return this.createSelect({labelKey:"orientation",options:e,property:"label.orientation"})}initRadiusAxis(){const e=this.chartController.getChartType();if(!isRadial(e))return;const t=[this.createSlider({labelKey:"groupPadding",defaultMaxValue:1,property:"paddingInner"}),this.createSlider({labelKey:"seriesPadding",defaultMaxValue:1,property:"groupPaddingInner"})],r=this.createManagedBean(new import_core21.AgGroupComponent({cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0,enabled:!0,suppressEnabledCheckbox:!0,title:this.translate("padding"),items:t})).hideEnabledCheckbox(!0).hideOpenCloseIcons(!0);this.axisGroup.addItem(r)}createSlider(e){const{labelKey:t,defaultMaxValue:r,step:s=.05,property:i}=e,n=this.chartMenuUtils.getDefaultSliderParams(i,t,r);return n.step=s,this.createManagedBean(new import_core21.AgSlider(n))}createSelect(e){const{labelKey:t,options:r,property:s}=e;return this.createManagedBean(new import_core21.AgSelect(this.chartMenuUtils.addValueParams(s,{label:this.chartTranslationService.translate(t),labelAlignment:"left",labelWidth:"flex",inputWidth:"flex",options:r})))}translate(e){return this.chartTranslationService.translate(e)}};_PolarAxisPanel.TEMPLATE=`<div>
            <ag-group-component ref="axisGroup">
                <ag-color-picker ref="axisColorInput"></ag-color-picker>
                <ag-slider ref="axisLineWidthSlider"></ag-slider>
            </ag-group-component>
        </div>`,__decorateClass([(0,import_core21.RefSelector)("axisGroup")],_PolarAxisPanel.prototype,"axisGroup",2),__decorateClass([(0,import_core21.Autowired)("chartTranslationService")],_PolarAxisPanel.prototype,"chartTranslationService",2),__decorateClass([import_core21.PostConstruct],_PolarAxisPanel.prototype,"init",1);var PolarAxisPanel=_PolarAxisPanel,import_core25=require("@ag-grid-community/core"),import_core22=require("@ag-grid-community/core"),_PaddingPanel=class se extends import_core22.Component{constructor(e,t){super(),this.chartMenuUtils=e,this.chartController=t}init(){const e={cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0,title:this.chartTranslationService.translate("padding"),suppressEnabledCheckbox:!0},t=r=>this.chartMenuUtils.getDefaultSliderParams("padding."+r,r,200);this.setTemplate(se.TEMPLATE,{chartPaddingGroup:e,paddingTopSlider:t("top"),paddingRightSlider:t("right"),paddingBottomSlider:t("bottom"),paddingLeftSlider:t("left")}),this.addManagedListener(this.eventService,import_core22.Events.EVENT_CHART_OPTIONS_CHANGED,r=>{this.updateTopPadding(r.chartOptions)})}updateTopPadding(e){const t=[...this.chartController.getChartSeriesTypes(),"common"].map(r=>{var s,i;return(i=(s=e[r])==null?void 0:s.padding)==null?void 0:i.top}).find(r=>r!=null);t!=null&&this.paddingTopSlider.setValue(t)}};_PaddingPanel.TEMPLATE=`<div>
            <ag-group-component ref="chartPaddingGroup">
                <ag-slider ref="paddingTopSlider"></ag-slider>
                <ag-slider ref="paddingRightSlider"></ag-slider>
                <ag-slider ref="paddingBottomSlider"></ag-slider>
                <ag-slider ref="paddingLeftSlider"></ag-slider>
            </ag-group-component>
        <div>`,__decorateClass([(0,import_core22.RefSelector)("paddingTopSlider")],_PaddingPanel.prototype,"paddingTopSlider",2),__decorateClass([(0,import_core22.Autowired)("chartTranslationService")],_PaddingPanel.prototype,"chartTranslationService",2),__decorateClass([import_core22.PostConstruct],_PaddingPanel.prototype,"init",1);var PaddingPanel=_PaddingPanel,import_core23=require("@ag-grid-community/core"),_BackgroundPanel=class ie extends import_core23.Component{constructor(e){super(),this.chartMenuUtils=e}init(){const e=this.chartMenuUtils.addEnableParams("background.visible",{cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0,title:this.chartTranslationService.translate("background"),suppressEnabledCheckbox:!1}),t=this.chartMenuUtils.getDefaultColorPickerParams("background.fill");this.setTemplate(ie.TEMPLATE,{chartBackgroundGroup:e,colorPicker:t})}};_BackgroundPanel.TEMPLATE=`<div>
            <ag-group-component ref="chartBackgroundGroup">
                <ag-color-picker ref="colorPicker"></ag-color-picker>
            </ag-group-component>
        <div>`,__decorateClass([(0,import_core23.Autowired)("chartTranslationService")],_BackgroundPanel.prototype,"chartTranslationService",2),__decorateClass([import_core23.PostConstruct],_BackgroundPanel.prototype,"init",1);var BackgroundPanel=_BackgroundPanel,import_core24=require("@ag-grid-community/core"),_TitlePanel=class ne extends import_core24.Component{constructor(e,t){super(ne.TEMPLATE),this.chartMenuUtils=e,this.chartController=t,this.activePanels=[],this.chartOptions=e.getChartOptions()}init(){this.initFontPanel(),this.titlePlaceholder=this.chartTranslationService.translate("titlePlaceholder")}hasTitle(){const e=this.chartOptions.getValue("title");return e&&e.enabled&&e.text&&e.text.length>0}initFontPanel(){const e=this.hasTitle(),t={name:this.chartTranslationService.translate("title"),enabled:e,suppressEnabledCheckbox:!1,chartMenuUtils:this.chartMenuUtils,keyMapper:s=>`title.${s}`,onEnableChange:s=>{if(this.chartMenuService.doesChartToolbarExist(this.chartController)){const o=this.chartOptions.getValue("padding.top");this.chartOptions.setValue("padding.top",s?o-20:o+20)}this.chartOptions.setValue("title.enabled",s);const i=this.chartOptions.getValue("title.text"),n=i==="Title"||i?.trim().length===0;s&&n&&this.chartOptions.setValue("title.text",this.titlePlaceholder)}},r=this.createBean(new FontPanel(t));r.addItemToPanel(this.createSpacingSlicer()),this.getGui().appendChild(r.getGui()),this.activePanels.push(r),this.addManagedListener(this.eventService,"chartTitleEdit",()=>{r.setEnabled(this.hasTitle())})}createSpacingSlicer(){const e=this.chartMenuUtils.getDefaultSliderParams("title.spacing","spacing",100);return e.value="10",this.createBean(new import_core24.AgSlider(e))}destroyActivePanels(){this.activePanels.forEach(e=>{import_core24._.removeFromParent(e.getGui()),this.destroyBean(e)})}destroy(){this.destroyActivePanels(),super.destroy()}};_TitlePanel.TEMPLATE="<div></div>",__decorateClass([(0,import_core24.Autowired)("chartTranslationService")],_TitlePanel.prototype,"chartTranslationService",2),__decorateClass([(0,import_core24.Autowired)("chartMenuService")],_TitlePanel.prototype,"chartMenuService",2),__decorateClass([import_core24.PostConstruct],_TitlePanel.prototype,"init",1);var TitlePanel=_TitlePanel,_ChartPanel=class oe extends import_core25.Component{constructor({chartController:e,chartMenuParamsFactory:t,isExpandedOnInit:r=!1}){super(),this.chartController=e,this.chartMenuUtils=t,this.isExpandedOnInit=r}init(){const e={cssIdentifier:"charts-format-top-level",direction:"vertical",title:this.chartTranslationService.translate("chart"),expanded:this.isExpandedOnInit,suppressEnabledCheckbox:!0,items:[this.createManagedBean(new TitlePanel(this.chartMenuUtils,this.chartController)),this.createManagedBean(new PaddingPanel(this.chartMenuUtils,this.chartController)),this.createManagedBean(new BackgroundPanel(this.chartMenuUtils))]};this.setTemplate(oe.TEMPLATE,{chartGroup:e})}};_ChartPanel.TEMPLATE=`<div>
            <ag-group-component ref="chartGroup"></ag-group-component>
        </div>`,__decorateClass([(0,import_core25.Autowired)("chartTranslationService")],_ChartPanel.prototype,"chartTranslationService",2),__decorateClass([import_core25.PostConstruct],_ChartPanel.prototype,"init",1);var ChartPanel=_ChartPanel,import_core37=require("@ag-grid-community/core"),import_core26=require("@ag-grid-community/core"),_ShadowPanel=class le extends import_core26.Component{constructor(e,t="shadow"){super(),this.chartMenuUtils=e,this.propertyKey=t}init(){const e=this.propertyKey,t=this.chartMenuUtils.addEnableParams(`${e}.enabled`,{cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0,title:this.chartTranslationService.translate("shadow"),suppressEnabledCheckbox:!1}),r=this.chartMenuUtils.getDefaultColorPickerParams(`${e}.color`);this.setTemplate(le.TEMPLATE,{shadowGroup:t,shadowColorPicker:r,shadowBlurSlider:this.getSliderParams("blur",0,20),shadowXOffsetSlider:this.getSliderParams("xOffset",-10,10),shadowYOffsetSlider:this.getSliderParams("yOffset",-10,10)})}getSliderParams(e,t,r){const s=`${this.propertyKey}.${e}`,i=this.chartMenuUtils.getDefaultSliderParams(s,e,r);return i.minValue=t,i}};_ShadowPanel.TEMPLATE=`<div>
            <ag-group-component ref="shadowGroup">
                <ag-color-picker ref="shadowColorPicker"></ag-color-picker>
                <ag-slider ref="shadowBlurSlider"></ag-slider>
                <ag-slider ref="shadowXOffsetSlider"></ag-slider>
                <ag-slider ref="shadowYOffsetSlider"></ag-slider>
            </ag-group-component>
        </div>`,__decorateClass([(0,import_core26.Autowired)("chartTranslationService")],_ShadowPanel.prototype,"chartTranslationService",2),__decorateClass([import_core26.PostConstruct],_ShadowPanel.prototype,"init",1);var ShadowPanel=_ShadowPanel,import_core27=require("@ag-grid-community/core"),_MarkersPanel=class ce extends import_core27.Component{constructor(e,t){super(),this.chartOptionsService=e,this.chartMenuUtils=t}init(){const e=this.chartOptionsService.getChartType(),t=import_core27._.includes(["scatter","bubble"],e),r=this.chartMenuUtils.addEnableParams("marker.enabled",{cssIdentifier:"charts-format-sub-level",direction:"vertical",title:this.chartTranslationService.translate("markers"),suppressEnabledCheckbox:t,suppressOpenCloseIcons:!0}),s=e==="bubble";let i,n;s?(i=this.getSliderParams("marker.maxSize","maxSize",60),n=this.getSliderParams("marker.size","minSize",60)):(i={},n=this.getSliderParams("marker.size","size",60)),this.setTemplate(ce.TEMPLATE,{seriesMarkersGroup:r,seriesMarkerShapeSelect:this.getMarkerShapeSelectParams(),seriesMarkerMinSizeSlider:i,seriesMarkerSizeSlider:n,seriesMarkerStrokeWidthSlider:this.getSliderParams("marker.strokeWidth","strokeWidth",10)}),s||this.seriesMarkerMinSizeSlider.setDisplayed(!1)}getMarkerShapeSelectParams(){const e=[{value:"square",text:"Square"},{value:"circle",text:"Circle"},{value:"cross",text:"Cross"},{value:"diamond",text:"Diamond"},{value:"plus",text:"Plus"},{value:"triangle",text:"Triangle"},{value:"heart",text:"Heart"}];return this.chartMenuUtils.addValueParams("marker.shape",{options:e,label:this.chartTranslationService.translate("shape")})}getSliderParams(e,t,r){return this.chartMenuUtils.getDefaultSliderParams(e,t,r)}};_MarkersPanel.TEMPLATE=`<div>
            <ag-group-component ref="seriesMarkersGroup">
                <ag-select ref="seriesMarkerShapeSelect"></ag-select>
                <ag-slider ref="seriesMarkerMinSizeSlider"></ag-slider>
                <ag-slider ref="seriesMarkerSizeSlider"></ag-slider>
                <ag-slider ref="seriesMarkerStrokeWidthSlider"></ag-slider>
            </ag-group-component>
        </div>`,__decorateClass([(0,import_core27.RefSelector)("seriesMarkerMinSizeSlider")],_MarkersPanel.prototype,"seriesMarkerMinSizeSlider",2),__decorateClass([(0,import_core27.Autowired)("chartTranslationService")],_MarkersPanel.prototype,"chartTranslationService",2),__decorateClass([import_core27.PostConstruct],_MarkersPanel.prototype,"init",1);var MarkersPanel=_MarkersPanel,import_core28=require("@ag-grid-community/core"),import_ag_charts_community3=require("ag-charts-community"),import_core29=require("@ag-grid-community/core"),_AgColorPanel=class F extends import_core28.Component{constructor(e){super(F.TEMPLATE),this.H=1,this.S=1,this.B=1,this.A=1,this.isSpectrumDragging=!1,this.isSpectrumHueDragging=!1,this.isSpectrumAlphaDragging=!1,this.colorChanged=!1,this.picker=e.picker}postConstruct(){this.initTabIndex(),this.initRecentColors(),this.addGuiEventListener("focus",()=>this.spectrumColor.focus()),this.addGuiEventListener("keydown",e=>{e.key===import_core29.KeyCode.ENTER&&!e.defaultPrevented&&this.destroy()}),this.addManagedListener(this.spectrumColor,"keydown",e=>this.moveDragger(e)),this.addManagedListener(this.spectrumAlphaSlider,"keydown",e=>this.moveAlphaSlider(e)),this.addManagedListener(this.spectrumHueSlider,"keydown",e=>this.moveHueSlider(e)),this.addManagedListener(this.spectrumVal,"mousedown",this.onSpectrumDraggerDown.bind(this)),this.addManagedListener(this.spectrumHue,"mousedown",this.onSpectrumHueDown.bind(this)),this.addManagedListener(this.spectrumAlpha,"mousedown",this.onSpectrumAlphaDown.bind(this)),this.addGuiEventListener("mousemove",e=>{this.onSpectrumDraggerMove(e),this.onSpectrumHueMove(e),this.onSpectrumAlphaMove(e)}),this.addManagedListener(document,"mouseup",this.onMouseUp.bind(this)),this.addManagedListener(this.recentColors,"click",this.onRecentColorClick.bind(this)),this.addManagedListener(this.recentColors,"keydown",e=>{(e.key===import_core29.KeyCode.ENTER||e.key===import_core29.KeyCode.SPACE)&&(e.preventDefault(),this.onRecentColorClick(e))})}initTabIndex(){const e=this.tabIndex=this.gridOptionsService.get("tabIndex").toString();this.spectrumColor.setAttribute("tabindex",e),this.spectrumHueSlider.setAttribute("tabindex",e),this.spectrumAlphaSlider.setAttribute("tabindex",e)}refreshSpectrumRect(){return this.spectrumValRect=this.spectrumVal.getBoundingClientRect()}refreshHueRect(){return this.spectrumHueRect=this.spectrumHue.getBoundingClientRect()}refreshAlphaRect(){return this.spectrumAlphaRect=this.spectrumAlpha.getBoundingClientRect()}onSpectrumDraggerDown(e){this.refreshSpectrumRect(),this.isSpectrumDragging=!0,this.moveDragger(e)}onSpectrumDraggerMove(e){this.isSpectrumDragging&&this.moveDragger(e)}onSpectrumHueDown(e){this.refreshHueRect(),this.isSpectrumHueDragging=!0,this.moveHueSlider(e)}onSpectrumHueMove(e){this.isSpectrumHueDragging&&this.moveHueSlider(e)}onSpectrumAlphaDown(e){this.refreshAlphaRect(),this.isSpectrumAlphaDragging=!0,this.moveAlphaSlider(e)}onSpectrumAlphaMove(e){this.isSpectrumAlphaDragging&&this.moveAlphaSlider(e)}onMouseUp(){this.isSpectrumDragging=!1,this.isSpectrumHueDragging=!1,this.isSpectrumAlphaDragging=!1}moveDragger(e){const t=this.spectrumValRect;if(!t)return;let r,s;if(e instanceof MouseEvent)r=e.clientX-t.left,s=e.clientY-t.top;else{const i=e.key===import_core29.KeyCode.LEFT,n=e.key===import_core29.KeyCode.RIGHT,o=e.key===import_core29.KeyCode.UP,l=e.key===import_core29.KeyCode.DOWN,c=o||l,h=i||n;if(!c&&!h)return;e.preventDefault();const{x:u,y:d}=this.getSpectrumValue();r=u+(h?i?-5:5:0),s=d+(c?o?-5:5:0)}r=Math.max(r,0),r=Math.min(r,t.width),s=Math.max(s,0),s=Math.min(s,t.height),this.setSpectrumValue(r/t.width,1-s/t.height)}moveHueSlider(e){const t=this.spectrumHueRect;if(!t)return;const r=this.moveSlider(this.spectrumHueSlider,e);r!=null&&(this.H=1-r/t.width,this.update())}moveAlphaSlider(e){const t=this.spectrumAlphaRect;if(!t)return;const r=this.moveSlider(this.spectrumAlphaSlider,e);r!=null&&(this.A=r/t.width,this.update())}moveSlider(e,t){var r;const s=e.getBoundingClientRect(),i=(r=e.parentElement)==null?void 0:r.getBoundingClientRect();if(!e||!i)return null;let n;if(t instanceof MouseEvent)n=t.clientX-i.left;else{const o=t.key===import_core29.KeyCode.LEFT,l=t.key===import_core29.KeyCode.RIGHT;if(!o&&!l)return null;t.preventDefault();const c=o?-5:5;n=parseFloat(e.style.left)-s.width/2+c}return n=Math.max(n,0),n=Math.min(n,i.width),e.style.left=n+s.width/2+"px",n}update(){const e=import_ag_charts_community3._Util.Color.fromHSB(this.H*360,this.S,this.B,this.A),t=import_ag_charts_community3._Util.Color.fromHSB(this.H*360,1,1),r=e.toRgbaString(),s=this.picker;import_ag_charts_community3._Util.Color.fromString(s.getValue()).toRgbaString()!==r&&(this.colorChanged=!0),s.setValue(r),this.spectrumColor.style.backgroundColor=t.toRgbaString(),this.spectrumDragger.style.backgroundColor=r}setSpectrumValue(e,t){const r=this.spectrumValRect||this.refreshSpectrumRect();if(r==null)return;const s=this.spectrumDragger,i=s.getBoundingClientRect();e=Math.max(0,e),e=Math.min(1,e),t=Math.max(0,t),t=Math.min(1,t),this.S=e,this.B=t,s.style.left=e*r.width-i.width/2+"px",s.style.top=(1-t)*r.height-i.height/2+"px",this.update()}getSpectrumValue(){const e=this.spectrumDragger,t=e.getBoundingClientRect(),r=parseFloat(e.style.left)+t.width/2,s=parseFloat(e.style.top)+t.height/2;return{x:r,y:s}}initRecentColors(){const t=F.recentColors.map((r,s)=>`<div class="ag-recent-color" id=${s} style="background-color: ${r}; width: 15px; height: 15px;" recent-color="${r}" tabIndex="${this.tabIndex}"></div>`);this.recentColors.innerHTML=t.join("")}setValue(e){const t=import_ag_charts_community3._Util.Color.fromString(e),[r,s,i]=t.toHSB();this.H=(isNaN(r)?0:r)/360,this.A=t.a;const n=this.spectrumHueRect||this.refreshHueRect(),o=this.spectrumAlphaRect||this.refreshAlphaRect();this.spectrumHueSlider.style.left=`${(this.H-1)*-n.width}px`,this.spectrumAlphaSlider.style.left=`${this.A*o.width}px`,this.setSpectrumValue(s,i)}onRecentColorClick(e){const t=e.target;if(!import_core28._.exists(t.id))return;const r=parseInt(t.id,10);this.setValue(F.recentColors[r]),this.destroy()}addRecentColor(){const t=import_ag_charts_community3._Util.Color.fromHSB(this.H*360,this.S,this.B,this.A).toRgbaString();let r=F.recentColors;!this.colorChanged||r[0]===t||(r=r.filter(s=>s!=t),r=[t].concat(r),r.length>F.maxRecentColors&&(r=r.slice(0,F.maxRecentColors)),F.recentColors=r)}destroy(){this.addRecentColor(),super.destroy()}};_AgColorPanel.maxRecentColors=8,_AgColorPanel.recentColors=[],_AgColorPanel.TEMPLATE=`<div class="ag-color-panel" tabindex="-1">
            <div ref="spectrumColor" class="ag-spectrum-color">
                <div class="ag-spectrum-sat ag-spectrum-fill">
                    <div ref="spectrumVal" class="ag-spectrum-val ag-spectrum-fill">
                        <div ref="spectrumDragger" class="ag-spectrum-dragger"></div>
                    </div>
                </div>
            </div>
            <div class="ag-spectrum-tools">
                <div ref="spectrumHue" class="ag-spectrum-hue ag-spectrum-tool">
                    <div class="ag-spectrum-hue-background"></div>
                    <div ref="spectrumHueSlider" class="ag-spectrum-slider"></div>
                </div>
                <div ref="spectrumAlpha" class="ag-spectrum-alpha ag-spectrum-tool">
                    <div class="ag-spectrum-alpha-background"></div>
                    <div ref="spectrumAlphaSlider" class="ag-spectrum-slider"></div>
                </div>
                <div ref="recentColors" class="ag-recent-colors"></div>
            </div>
        </div>`,__decorateClass([(0,import_core28.RefSelector)("spectrumColor")],_AgColorPanel.prototype,"spectrumColor",2),__decorateClass([(0,import_core28.RefSelector)("spectrumVal")],_AgColorPanel.prototype,"spectrumVal",2),__decorateClass([(0,import_core28.RefSelector)("spectrumDragger")],_AgColorPanel.prototype,"spectrumDragger",2),__decorateClass([(0,import_core28.RefSelector)("spectrumHue")],_AgColorPanel.prototype,"spectrumHue",2),__decorateClass([(0,import_core28.RefSelector)("spectrumHueSlider")],_AgColorPanel.prototype,"spectrumHueSlider",2),__decorateClass([(0,import_core28.RefSelector)("spectrumAlpha")],_AgColorPanel.prototype,"spectrumAlpha",2),__decorateClass([(0,import_core28.RefSelector)("spectrumAlphaSlider")],_AgColorPanel.prototype,"spectrumAlphaSlider",2),__decorateClass([(0,import_core28.RefSelector)("recentColors")],_AgColorPanel.prototype,"recentColors",2),__decorateClass([import_core28.PostConstruct],_AgColorPanel.prototype,"postConstruct",1);var AgColorPanel=_AgColorPanel,import_core30=require("@ag-grid-community/core"),AgColorPicker=class extends import_core30.AgPickerField{constructor(a){super(__spreadValues({pickerAriaLabelKey:"ariaLabelColorPicker",pickerAriaLabelValue:"Color Picker",pickerType:"ag-list",className:"ag-color-picker",pickerIcon:"colorPicker"},a))}postConstruct(){super.postConstruct(),this.value&&this.setValue(this.value)}createPickerComponent(){const a=this.getGui().getBoundingClientRect();return this.createBean(new import_core30.AgDialog({closable:!1,modal:!0,hideTitleBar:!0,minWidth:190,width:190,height:250,x:a.right-190,y:a.top-250}))}renderAndPositionPicker(){const a=this.pickerComponent,e=this.createBean(new AgColorPanel({picker:this}));return a.addCssClass("ag-color-dialog"),e.addDestroyFunc(()=>{a.isAlive()&&this.destroyBean(a)}),a.setParentComponent(this),a.setBodyComponent(e),e.setValue(this.getValue()),e.getGui().focus(),a.addDestroyFunc(()=>{this.isDestroyingPicker?this.isDestroyingPicker=!1:(this.beforeHidePicker(),this.isDestroyingPicker=!0,e.isAlive()&&this.destroyBean(e),this.isAlive()&&this.getFocusableElement().focus())}),()=>{var t;return(t=this.pickerComponent)==null?void 0:t.close()}}setValue(a){return this.value===a?this:(this.eDisplayField.style.backgroundColor=a,super.setValue(a))}getValue(){return this.value}},import_core31=require("@ag-grid-community/core"),_CalloutPanel=class he extends import_core31.Component{constructor(e){super(),this.chartMenuUtils=e}init(){const e={cssIdentifier:"charts-format-sub-level",direction:"vertical",title:this.chartTranslationService.translate("callout"),enabled:!0,suppressOpenCloseIcons:!0,suppressEnabledCheckbox:!0};this.setTemplate(he.TEMPLATE,{calloutGroup:e,calloutLengthSlider:this.chartMenuUtils.getDefaultSliderParams("calloutLine.length","length",40),calloutStrokeWidthSlider:this.chartMenuUtils.getDefaultSliderParams("calloutLine.strokeWidth","strokeWidth",10),labelOffsetSlider:this.chartMenuUtils.getDefaultSliderParams("calloutLabel.offset","offset",30)})}};_CalloutPanel.TEMPLATE=`<div>
            <ag-group-component ref="calloutGroup">
                <ag-slider ref="calloutLengthSlider"></ag-slider>
                <ag-slider ref="calloutStrokeWidthSlider"></ag-slider>
                <ag-slider ref="labelOffsetSlider"></ag-slider>
            </ag-group-component>
        </div>`,__decorateClass([(0,import_core31.Autowired)("chartTranslationService")],_CalloutPanel.prototype,"chartTranslationService",2),__decorateClass([import_core31.PostConstruct],_CalloutPanel.prototype,"init",1);var CalloutPanel=_CalloutPanel,import_core32=require("@ag-grid-community/core"),_CapsPanel=class ue extends import_core32.Component{constructor(e){super(),this.chartMenuUtils=e}init(){const e={cssIdentifier:"charts-format-sub-level",direction:"vertical",title:this.chartTranslationService.translate("cap"),enabled:!0,suppressOpenCloseIcons:!0,suppressEnabledCheckbox:!0},t=this.chartMenuUtils.getDefaultSliderParams("cap.lengthRatio","capLengthRatio",1);t.step=.05,this.setTemplate(ue.TEMPLATE,{capsGroup:e,capLengthRatioSlider:t})}};_CapsPanel.TEMPLATE=`<div>
            <ag-group-component ref="capsGroup">
                <ag-slider ref="capLengthRatioSlider"></ag-slider>
            </ag-group-component>
        </div>`,__decorateClass([(0,import_core32.Autowired)("chartTranslationService")],_CapsPanel.prototype,"chartTranslationService",2),__decorateClass([import_core32.PostConstruct],_CapsPanel.prototype,"init",1);var CapsPanel=_CapsPanel,import_core33=require("@ag-grid-community/core"),_ConnectorLinePanel=class de extends import_core33.Component{constructor(e){super(),this.chartMenuUtils=e}init(){const e={cssIdentifier:"charts-format-sub-level",direction:"vertical",title:this.chartTranslationService.translate("connectorLine"),enabled:!0,suppressOpenCloseIcons:!0,suppressEnabledCheckbox:!0};this.setTemplate(de.TEMPLATE,{lineGroup:e,lineColorPicker:this.chartMenuUtils.getDefaultColorPickerParams("line.stroke"),lineStrokeWidthSlider:this.getSliderParams("strokeWidth",10,"line.strokeWidth"),lineDashSlider:this.getSliderParams("lineDash",30,"line.lineDash",1,!0),lineOpacitySlider:this.getSliderParams("strokeOpacity",1,"line.strokeOpacity",.05)})}getSliderParams(e,t,r,s=1,i=!1){const n=this.chartMenuUtils.getDefaultSliderParams(r,e,t,i);return n.step=s,n}};_ConnectorLinePanel.TEMPLATE=`<div>
            <ag-group-component ref="lineGroup">
                <ag-color-picker ref="lineColorPicker"></ag-color-picker>
                <ag-slider ref="lineStrokeWidthSlider"></ag-slider>
                <ag-slider ref="lineOpacitySlider"></ag-slider>
                <ag-slider ref="lineDashSlider"></ag-slider>                
            </ag-group-component>
        </div>`,__decorateClass([(0,import_core33.Autowired)("chartTranslationService")],_ConnectorLinePanel.prototype,"chartTranslationService",2),__decorateClass([import_core33.PostConstruct],_ConnectorLinePanel.prototype,"init",1);var ConnectorLinePanel=_ConnectorLinePanel,import_core34=require("@ag-grid-community/core"),_WhiskersPanel=class pe extends import_core34.Component{constructor(e){super(),this.chartMenuUtils=e}init(){const e={cssIdentifier:"charts-format-sub-level",direction:"vertical",title:this.chartTranslationService.translate("whisker"),enabled:!0,suppressOpenCloseIcons:!0,suppressEnabledCheckbox:!0};this.setTemplate(pe.TEMPLATE,{whiskersGroup:e,whiskerColorPicker:this.chartMenuUtils.getDefaultColorPickerParams("whisker.stroke"),whiskerThicknessSlider:this.chartMenuUtils.getDefaultSliderParams("whisker.strokeWidth","strokeWidth",10),whiskerOpacitySlider:this.chartMenuUtils.getDefaultSliderParams("whisker.strokeOpacity","strokeOpacity",1),whiskerLineDashSlider:this.chartMenuUtils.getDefaultSliderParams("whisker.lineDash","lineDash",30,!0),whiskerLineDashOffsetSlider:this.chartMenuUtils.getDefaultSliderParams("whisker.lineDashOffset","lineDashOffset",30)})}};_WhiskersPanel.TEMPLATE=`<div>
            <ag-group-component ref="whiskersGroup">
                <ag-color-picker ref="whiskerColorPicker"></ag-color-picker>
                <ag-slider ref="whiskerThicknessSlider"></ag-slider>
                <ag-slider ref="whiskerOpacitySlider"></ag-slider>
                <ag-slider ref="whiskerLineDashSlider"></ag-slider>
                <ag-slider ref="whiskerLineDashOffsetSlider"></ag-slider>
            </ag-group-component>
        </div>`,__decorateClass([(0,import_core34.Autowired)("chartTranslationService")],_WhiskersPanel.prototype,"chartTranslationService",2),__decorateClass([import_core34.PostConstruct],_WhiskersPanel.prototype,"init",1);var WhiskersPanel=_WhiskersPanel,import_core35=require("@ag-grid-community/core"),_SeriesItemsPanel=class ge extends import_core35.Component{constructor(e){super(),this.chartMenuUtils=e,this.activePanels=[]}init(){const e={cssIdentifier:"charts-format-sub-level",direction:"vertical",title:this.chartTranslationService.translate("seriesItems"),enabled:!0,suppressOpenCloseIcons:!0,suppressEnabledCheckbox:!0};this.setTemplate(ge.TEMPLATE,{seriesItemsGroup:e,seriesItemSelect:this.getSeriesItemsParams()}),this.initSeriesControls()}getSeriesItemsParams(){const e=[{value:"positive",text:this.chartTranslationService.translate("seriesItemPositive")},{value:"negative",text:this.chartTranslationService.translate("seriesItemNegative")}],t=r=>{this.destroyActivePanels(),this.initSeriesControls(r)};return{label:this.chartTranslationService.translate("seriesItemType"),labelAlignment:"left",labelWidth:"flex",inputWidth:"flex",options:e,value:"positive",onValueChange:t}}initSeriesControls(e="positive"){this.initSlider("strokeWidth",10,`item.${e}.strokeWidth`),this.initSlider("lineDash",30,`item.${e}.lineDash`,1,!0),this.initSlider("strokeOpacity",1,`item.${e}.strokeOpacity`,.05,!1),this.initSlider("fillOpacity",1,`item.${e}.fillOpacity`,.05,!1),this.initItemLabels(e)}initSlider(e,t,r,s=1,i=!1){const n=this.chartMenuUtils.getDefaultSliderParams(r,e,t,i);n.step=s;const o=this.seriesItemsGroup.createManagedBean(new import_core35.AgSlider(n));this.seriesItemsGroup.addItem(o),this.activePanels.push(o)}initItemLabels(e){const t=this.chartMenuUtils.getDefaultFontPanelParams(`item.${e}.label`,"seriesItemLabels"),r=this.createBean(new FontPanel(t));this.seriesItemsGroup.addItem(r),this.activePanels.push(r)}destroyActivePanels(){this.activePanels.forEach(e=>{import_core35._.removeFromParent(e.getGui()),this.destroyBean(e)})}destroy(){this.destroyActivePanels(),super.destroy()}};_SeriesItemsPanel.TEMPLATE=`<div>
            <ag-group-component ref="seriesItemsGroup">
                <ag-select ref="seriesItemSelect"></ag-select>
            </ag-group-component>
        </div>`,__decorateClass([(0,import_core35.RefSelector)("seriesItemsGroup")],_SeriesItemsPanel.prototype,"seriesItemsGroup",2),__decorateClass([(0,import_core35.Autowired)("chartTranslationService")],_SeriesItemsPanel.prototype,"chartTranslationService",2),__decorateClass([import_core35.PostConstruct],_SeriesItemsPanel.prototype,"init",1);var SeriesItemsPanel=_SeriesItemsPanel,import_core36=require("@ag-grid-community/core"),_TileSpacingPanel=class me extends import_core36.Component{constructor(e){super(),this.chartMenuUtils=e}init(){const e={cssIdentifier:"charts-format-sub-level",direction:"vertical",enabled:!0,suppressOpenCloseIcons:!0,suppressEnabledCheckbox:!0};this.setTemplate(me.TEMPLATE,{groupSpacing:__spreadProps(__spreadValues({},e),{title:this.chartTranslationService.translate("group")}),tileSpacing:__spreadProps(__spreadValues({},e),{title:this.chartTranslationService.translate("tile")}),groupPaddingSlider:this.getSliderParams("padding","group.padding"),groupSpacingSlider:this.getSliderParams("spacing","group.gap"),tilePaddingSlider:this.getSliderParams("padding","tile.padding"),tileSpacingSlider:this.getSliderParams("spacing","tile.gap")})}getSliderParams(e,t){return this.chartMenuUtils.getDefaultSliderParams(t,e,10)}};_TileSpacingPanel.TEMPLATE=`<div>
            <ag-group-component ref="groupSpacing">
                <ag-slider ref="groupPaddingSlider"></ag-slider>
                <ag-slider ref="groupSpacingSlider"></ag-slider>
            </ag-group-component>
            <ag-group-component ref="tileSpacing">
                <ag-slider ref="tilePaddingSlider"></ag-slider>
                <ag-slider ref="tileSpacingSlider"></ag-slider>
            </ag-group-component>
        </div>`,__decorateClass([(0,import_core36.Autowired)("chartTranslationService")],_TileSpacingPanel.prototype,"chartTranslationService",2),__decorateClass([import_core36.PostConstruct],_TileSpacingPanel.prototype,"init",1);var TileSpacingPanel=_TileSpacingPanel,_SeriesPanel=class Ce extends import_core37.Component{constructor({chartController:e,chartOptionsService:t,seriesType:r,isExpandedOnInit:s=!1}){super(),this.activePanels=[],this.widgetFuncs={lineWidth:()=>this.initStrokeWidth("lineWidth"),strokeWidth:()=>this.initStrokeWidth("strokeWidth"),lineColor:()=>this.initLineColor(),lineDash:()=>this.initLineDash(),lineOpacity:()=>this.initLineOpacity(),fillOpacity:()=>this.initFillOpacity(),markers:()=>this.initMarkers(),labels:()=>this.initLabels(),shadow:()=>this.initShadow(),tooltips:()=>this.initTooltips(),bins:()=>this.initBins(),whiskers:()=>this.initWhiskers(),caps:()=>this.initCaps(),connectorLine:()=>this.initConnectorLine(),seriesItems:()=>this.initSeriesItemsPanel(),tileSpacing:()=>this.initTileSpacingPanel()},this.seriesWidgetMappings={column:["tooltips","strokeWidth","lineDash","lineOpacity","fillOpacity","labels","shadow"],bar:["tooltips","strokeWidth","lineDash","lineOpacity","fillOpacity","labels","shadow"],pie:["tooltips","strokeWidth","lineOpacity","fillOpacity","labels","shadow"],donut:["tooltips","strokeWidth","lineOpacity","fillOpacity","labels","shadow"],line:["tooltips","lineWidth","lineDash","lineOpacity","markers","labels"],scatter:["tooltips","markers","labels"],bubble:["tooltips","markers","labels"],area:["tooltips","lineWidth","lineDash","lineOpacity","fillOpacity","markers","labels","shadow"],histogram:["tooltips","bins","strokeWidth","lineDash","lineOpacity","fillOpacity","labels","shadow"],"radial-column":["tooltips","strokeWidth","lineDash","lineOpacity","fillOpacity","labels"],"radial-bar":["tooltips","strokeWidth","lineDash","lineOpacity","fillOpacity","labels"],"radar-line":["tooltips","strokeWidth","lineDash","lineOpacity","markers","labels"],"radar-area":["tooltips","strokeWidth","lineDash","lineOpacity","fillOpacity","markers","labels"],nightingale:["tooltips","strokeWidth","lineDash","lineOpacity","fillOpacity","labels"],"box-plot":["tooltips","strokeWidth","lineDash","lineOpacity","fillOpacity","whiskers","caps"],"range-bar":["tooltips","strokeWidth","lineDash","lineOpacity","fillOpacity","labels"],"range-area":["tooltips","lineWidth","lineDash","lineOpacity","fillOpacity","markers","labels","shadow"],treemap:["tooltips","tileSpacing"],sunburst:["tooltips"],heatmap:["tooltips","labels","lineColor","lineWidth","lineOpacity"],waterfall:["tooltips","connectorLine","seriesItems"]},this.chartController=e,this.chartOptionsService=t,this.seriesType=r||this.getChartSeriesType(),this.isExpandedOnInit=s}init(){const e={cssIdentifier:"charts-format-top-level",direction:"vertical",title:this.translate("series"),expanded:this.isExpandedOnInit,suppressEnabledCheckbox:!0};this.setTemplate(Ce.TEMPLATE,{seriesGroup:e}),this.chartMenuUtils=this.createManagedBean(new ChartMenuParamsFactory(this.chartOptionsService.getSeriesOptionsProxy(()=>this.seriesType))),this.chartOptions=this.chartMenuUtils.getChartOptions(),this.addManagedListener(this.chartController,ChartController.EVENT_CHART_SERIES_CHART_TYPE_CHANGED,this.refreshWidgets.bind(this)),this.refreshWidgets()}refreshWidgets(){this.destroyActivePanels(),this.chartController.getChartProxy().getChart().waitForUpdate().then(()=>{var t;this.isAlive()&&(this.chartController.isComboChart()&&(this.updateSeriesType(),this.initSeriesSelect()),((t=this.seriesWidgetMappings[this.seriesType])!=null?t:[]).forEach(s=>this.widgetFuncs[s]()))}).catch(t=>console.error("AG Grid - chart rendering failed",t))}initSeriesSelect(){const e=this.seriesGroup.createManagedBean(new import_core37.AgSelect({label:this.translate("seriesType"),labelAlignment:"left",labelWidth:"flex",inputWidth:"flex",options:this.getSeriesSelectOptions(),value:`${this.seriesType}`,onValueChange:t=>{this.seriesType=t,this.refreshWidgets()}}));this.seriesGroup.addItem(e),this.activePanels.push(e)}initTooltips(){const e=this.createBean(new import_core37.AgToggleButton(this.chartMenuUtils.addValueParams("tooltip.enabled",{label:this.translate("tooltips"),labelAlignment:"left",labelWidth:"flex",inputWidth:"flex"})));this.addWidget(e)}initLineColor(){const e=this.createBean(new AgColorPicker(this.chartMenuUtils.getDefaultColorPickerParams("stroke","strokeColor")));this.addWidget(e)}initStrokeWidth(e){const t=this.createBean(new import_core37.AgSlider(this.chartMenuUtils.getDefaultSliderParams("strokeWidth",e,10)));this.addWidget(t)}initLineDash(){const e=this.createBean(new import_core37.AgSlider(this.chartMenuUtils.getDefaultSliderParams("lineDash","lineDash",30,!0)));this.addWidget(e)}initLineOpacity(){const e=this.chartMenuUtils.getDefaultSliderParams("strokeOpacity","strokeOpacity",1);e.step=.05;const t=this.createBean(new import_core37.AgSlider(e));this.addWidget(t)}initFillOpacity(){const e=this.chartMenuUtils.getDefaultSliderParams("fillOpacity","fillOpacity",1);e.step=.05;const t=this.createBean(new import_core37.AgSlider(e));this.addWidget(t)}initLabels(){const e=isPieChartSeries(this.seriesType),t=e?"calloutLabel":"label",r=e?"calloutLabels":"labels",s=this.chartMenuUtils.getDefaultFontPanelParams(t,r),i=this.createBean(new FontPanel(s));if(e){const n=this.createBean(new CalloutPanel(this.chartMenuUtils));i.addCompToPanel(n),this.activePanels.push(n)}if(this.addWidget(i),e){const n=this.chartMenuUtils.getDefaultFontPanelParams("sectorLabel","sectorLabels"),o=this.createBean(new FontPanel(n)),l=this.getSectorLabelPositionRatio();o.addCompToPanel(l),this.addWidget(o)}if(this.seriesType==="range-bar"){const n=[{value:"inside",text:this.translate("inside")},{value:"outside",text:this.translate("outside")}],o=i.createManagedBean(new import_core37.AgSelect(this.chartMenuUtils.addValueParams("label.placement",{label:this.translate("labelPlacement"),labelAlignment:"left",labelWidth:"flex",inputWidth:"flex",options:n})));i.addCompToPanel(o),this.activePanels.push(o);const l=i.createManagedBean(new import_core37.AgSlider(this.chartMenuUtils.getDefaultSliderParams("label.padding","padding",200)));i.addCompToPanel(l),this.activePanels.push(l)}}getSectorLabelPositionRatio(){const e=this.chartMenuUtils.getDefaultSliderParams("sectorLabel.positionRatio","positionRatio",1);return e.step=.05,this.createBean(new import_core37.AgSlider(e))}initShadow(){const e=this.createBean(new ShadowPanel(this.chartMenuUtils));this.addWidget(e)}initMarkers(){const e=this.createBean(new MarkersPanel(this.chartOptionsService,this.chartMenuUtils));this.addWidget(e)}initBins(){var e;const t=this.chartMenuUtils.getDefaultSliderParams("binCount","histogramBinCount",20),r=((e=this.chartOptions.getValue("bins"))!=null?e:this.chartOptions.getValue("calculatedBins",!0)).length;t.value=`${r}`,t.maxValue=Math.max(r,20);const s=this.createBean(new import_core37.AgSlider(t));this.addWidget(s)}initWhiskers(){const e=this.createBean(new WhiskersPanel(this.chartMenuUtils));this.addWidget(e)}initCaps(){const e=this.createBean(new CapsPanel(this.chartMenuUtils));this.addWidget(e)}initConnectorLine(){const e=this.createBean(new ConnectorLinePanel(this.chartMenuUtils));this.addWidget(e)}initSeriesItemsPanel(){const e=this.createBean(new SeriesItemsPanel(this.chartMenuUtils));this.addWidget(e)}initTileSpacingPanel(){const e=this.createBean(new TileSpacingPanel(this.chartMenuUtils));this.addWidget(e)}addWidget(e){this.seriesGroup.addItem(e),this.activePanels.push(e)}getChartSeriesType(){if(this.chartController.getSeriesChartTypes().length===0)return"column";const e=this.chartController.getSeriesChartTypes()[0].chartType;return e==="columnLineCombo"?"column":e==="areaColumnCombo"?"area":getSeriesType(e)}getSeriesSelectOptions(){this.seriesSelectOptions||(this.seriesSelectOptions=new Map([["area",{value:"area",text:this.translate("area")}],["bar",{value:"bar",text:this.translate("bar")}],["column",{value:"column",text:this.translate("column")}],["line",{value:"line",text:this.translate("line")}],["scatter",{value:"scatter",text:this.translate("scatter")}],["histogram",{value:"histogram",text:this.translate("histogram")}],["radial-column",{value:"radial-column",text:this.translate("radialColumn")}],["radial-bar",{value:"radial-bar",text:this.translate("radialBar")}],["radar-line",{value:"radar-line",text:this.translate("radarLine")}],["radar-area",{value:"radar-area",text:this.translate("radarArea")}],["nightingale",{value:"nightingale",text:this.translate("nightingale")}],["range-bar",{value:"range-bar",text:this.translate("rangeBar")}],["range-area",{value:"range-area",text:this.translate("rangeArea")}],["treemap",{value:"treemap",text:this.translate("treemap")}],["sunburst",{value:"sunburst",text:this.translate("sunburst")}],["waterfall",{value:"waterfall",text:this.translate("waterfall")}],["box-plot",{value:"box-plot",text:this.translate("boxPlot")}],["pie",{value:"pie",text:this.translate("pie")}],["donut",{value:"donut",text:this.translate("donut")}]]));const e=new Set;return this.chartController.getActiveSeriesChartTypes().forEach(t=>{const r=getSeriesType(t.chartType);e.add(this.seriesSelectOptions.get(r))}),Array.from(e)}updateSeriesType(){const e=this.chartController.getActiveSeriesChartTypes().map(r=>getSeriesType(r.chartType));!e.includes(this.seriesType)&&e.length>0&&(this.seriesType=e[0])}translate(e){return this.chartTranslationService.translate(e)}destroyActivePanels(){this.activePanels.forEach(e=>{import_core37._.removeFromParent(e.getGui()),this.destroyBean(e)})}destroy(){this.destroyActivePanels(),super.destroy()}};_SeriesPanel.TEMPLATE=`<div>
            <ag-group-component ref="seriesGroup">
            </ag-group-component>
        </div>`,__decorateClass([(0,import_core37.RefSelector)("seriesGroup")],_SeriesPanel.prototype,"seriesGroup",2),__decorateClass([(0,import_core37.Autowired)("chartTranslationService")],_SeriesPanel.prototype,"chartTranslationService",2),__decorateClass([import_core37.PostConstruct],_SeriesPanel.prototype,"init",1);var SeriesPanel=_SeriesPanel,import_core38=require("@ag-grid-community/core"),_GradientLegendPanel=class ve extends import_core38.Component{constructor({chartMenuParamsFactory:e,isExpandedOnInit:t=!1}){super(),this.chartMenuUtils=e,this.isExpandedOnInit=t}init(){const e=this.chartMenuUtils.addEnableParams("gradientLegend.enabled",{cssIdentifier:"charts-format-top-level",direction:"vertical",title:this.chartTranslationService.translate("legend"),suppressEnabledCheckbox:!1,suppressToggleExpandOnEnableChange:!0,expanded:this.isExpandedOnInit,items:[this.createLabelPanel()]});this.setTemplate(ve.TEMPLATE,{legendGroup:e,legendPositionSelect:this.chartMenuUtils.getDefaultLegendParams("gradientLegend.position"),gradientReverseCheckbox:this.getGradientReverseCheckboxParams(),gradientThicknessSlider:this.chartMenuUtils.getDefaultSliderParams("gradientLegend.gradient.thickness","thickness",40),gradientPreferredLengthSlider:this.chartMenuUtils.getDefaultSliderParams("gradientLegend.gradient.preferredLength","preferredLength",300),legendSpacingSlider:this.chartMenuUtils.getDefaultSliderParams("gradientLegend.spacing","spacing",200)})}getGradientReverseCheckboxParams(){return this.chartMenuUtils.addValueParams("gradientLegend.reverseOrder",{label:this.chartTranslationService.translate("reverseDirection"),labelWidth:"flex"})}createLabelPanel(){const e={enabled:!0,suppressEnabledCheckbox:!0,chartMenuUtils:this.chartMenuUtils,keyMapper:t=>`gradientLegend.scale.label.${t}`};return this.createManagedBean(new FontPanel(e))}};_GradientLegendPanel.TEMPLATE=`<div>
            <ag-group-component ref="legendGroup">
                <ag-select ref="legendPositionSelect"></ag-select>
                <ag-checkbox ref="gradientReverseCheckbox"></ag-checkbox>
                <ag-slider ref="gradientThicknessSlider"></ag-slider>
                <ag-slider ref="gradientPreferredLengthSlider"></ag-slider>
                <ag-slider ref="legendSpacingSlider"></ag-slider>
            </ag-group-component>
        </div>`,__decorateClass([(0,import_core38.Autowired)("chartTranslationService")],_GradientLegendPanel.prototype,"chartTranslationService",2),__decorateClass([import_core38.PostConstruct],_GradientLegendPanel.prototype,"init",1);var GradientLegendPanel=_GradientLegendPanel,import_core39=require("@ag-grid-community/core"),ChartPanelFeature=class extends import_core39.BeanStub{constructor(a,e,t,r){super(),this.chartController=a,this.eGui=e,this.cssClass=t,this.createPanels=r,this.panels=[]}postConstruct(){this.addManagedListener(this.chartController,ChartController.EVENT_CHART_UPDATED,()=>this.refreshPanels(!0)),this.addManagedListener(this.chartController,ChartController.EVENT_CHART_API_UPDATE,()=>this.refreshPanels(!1))}addComponent(a){this.createBean(a),this.panels.push(a),a.addCssClass(this.cssClass),this.eGui.appendChild(a.getGui())}refreshPanels(a){const e=this.chartController.getChartType(),t=this.chartController.isGrouping(),r=getSeriesType(e);a&&e===this.chartType&&t===this.isGrouping||(this.destroyPanels(),this.createPanels(e,r),this.chartType=e,this.isGrouping=t)}destroyPanels(){this.panels.forEach(a=>{import_core39._.removeFromParent(a.getGui()),this.destroyBean(a)}),this.panels=[]}destroy(){this.destroyPanels(),super.destroy()}};__decorateClass([import_core39.PostConstruct],ChartPanelFeature.prototype,"postConstruct",1);var DefaultFormatPanelDef={groups:[{type:"chart"},{type:"legend"},{type:"series"},{type:"axis"}]},_FormatPanel=class fe extends import_core40.Component{constructor(e){super(fe.TEMPLATE),this.chartMenuContext=e,this.isGroupPanelShownInSeries=(t,r)=>{var s,i;return["chart","legend","series"].includes(t)?!0:(i=(s={bar:["axis","horizontalAxis","verticalAxis"],column:["axis","horizontalAxis","verticalAxis"],line:["axis","horizontalAxis","verticalAxis"],area:["axis","horizontalAxis","verticalAxis"],scatter:["axis","horizontalAxis","verticalAxis"],bubble:["axis","horizontalAxis","verticalAxis"],histogram:["axis","horizontalAxis","verticalAxis"],cartesian:["axis","horizontalAxis","verticalAxis"],"radial-column":["axis"],"radial-bar":["axis"],"radar-line":["axis"],"radar-area":["axis"],nightingale:["axis"],"range-bar":["axis","horizontalAxis","verticalAxis"],"range-area":["axis","horizontalAxis","verticalAxis"],treemap:[],sunburst:[],heatmap:["axis","horizontalAxis","verticalAxis"],waterfall:["axis","horizontalAxis","verticalAxis"],"box-plot":["axis","horizontalAxis","verticalAxis"]}[r])==null?void 0:s.includes(t))!=null?i:!1}}init(){this.chartPanelFeature=this.createManagedBean(new ChartPanelFeature(this.chartMenuContext.chartController,this.getGui(),"ag-chart-format-section",(e,t)=>this.createPanels(e,t))),this.chartPanelFeature.refreshPanels()}createPanels(e,t){var r;(r=this.getFormatPanelDef().groups)==null||r.forEach(s=>{const i=s.type;if(!this.isGroupPanelShownInSeries(i,t))return;const n=__spreadProps(__spreadValues({},this.chartMenuContext),{isExpandedOnInit:s.isOpen,seriesType:t});switch(i){case"chart":this.chartPanelFeature.addComponent(new ChartPanel(n));break;case"legend":const o=hasGradientLegend(e)?new GradientLegendPanel(n):new LegendPanel(n);this.chartPanelFeature.addComponent(o);break;case"axis":isPolar(e)?this.chartPanelFeature.addComponent(new PolarAxisPanel(n)):isCartesian(e)&&(this.chartPanelFeature.addComponent(new CartesianAxisPanel("xAxis",n)),this.chartPanelFeature.addComponent(new CartesianAxisPanel("yAxis",n)));break;case"horizontalAxis":this.chartPanelFeature.addComponent(new CartesianAxisPanel("xAxis",n));break;case"verticalAxis":this.chartPanelFeature.addComponent(new CartesianAxisPanel("yAxis",n));break;case"series":this.chartPanelFeature.addComponent(new SeriesPanel(n));break;case"navigator":import_core40._.warnOnce("'navigator' is now displayed in the charts advanced settings instead of the format panel, and this setting will be ignored.");default:import_core40._.warnOnce(`Invalid charts format panel group name supplied: '${s.type}'`)}})}getFormatPanelDef(){var e;const t=(e=this.gridOptionsService.get("chartToolPanelsDef"))==null?void 0:e.formatPanel;return t||DefaultFormatPanelDef}};_FormatPanel.TEMPLATE='<div class="ag-chart-format-wrapper"></div>',__decorateClass([import_core40.PostConstruct],_FormatPanel.prototype,"init",1);var FormatPanel=_FormatPanel,import_core45=require("@ag-grid-community/core"),import_core44=require("@ag-grid-community/core"),import_core42=require("@ag-grid-community/core"),import_core41=require("@ag-grid-community/core"),import_ag_charts_community4=require("ag-charts-community"),CANVAS_CLASS="ag-chart-mini-thumbnail-canvas",ERROR_MESSAGE="AG Grid - chart update failed",MiniChart=class extends import_core41.Component{constructor(a,e){super(),this.tooltipName=e,this.size=58,this.padding=5,this.root=new import_ag_charts_community4._Scene.Group;const t=new import_ag_charts_community4._Scene.Scene({width:this.size,height:this.size});t.canvas.element.classList.add(CANVAS_CLASS),t.setRoot(this.root),t.setContainer(a),this.scene=t}init(){this.scene.canvas.element.title=this.chartTranslationService.translate(this.tooltipName),this.scene.render().catch(a=>{console.error(`${ERROR_MESSAGE}`,a)})}};__decorateClass([(0,import_core41.Autowired)("chartTranslationService")],MiniChart.prototype,"chartTranslationService",2),__decorateClass([import_core41.PostConstruct],MiniChart.prototype,"init",1);var import_ag_charts_community5=require("ag-charts-community"),MiniChartWithAxes=class extends MiniChart{constructor(a,e){super(a,e),this.stroke="gray",this.axisOvershoot=3}addAxes(){const a=this.size,e=this.padding,t=new import_ag_charts_community5._Scene.Line;t.x1=e,t.y1=e,t.x2=e,t.y2=a-e+this.axisOvershoot,t.stroke=this.stroke;const r=new import_ag_charts_community5._Scene.Line;r.x1=e-this.axisOvershoot+1,r.y1=a-e,r.x2=a-e+1,r.y2=a-e,r.stroke=this.stroke;const s=this.root;s.append(t),s.append(r)}};__decorateClass([import_core42.PostConstruct],MiniChartWithAxes.prototype,"addAxes",1);var import_ag_charts_community6=require("ag-charts-community");function createColumnRects(a){const{stacked:e,size:t,padding:r,xScalePadding:s,xScaleDomain:i,yScaleDomain:n}=a,o=new import_ag_charts_community6._Scene.BandScale;o.domain=i,o.range=[r,t-r],o.paddingInner=s,o.paddingOuter=s;const l=new import_ag_charts_community6._Scene.LinearScale;l.domain=n,l.range=[t-r,r];const c=(h,u,d)=>h.map((p,g)=>{const C=d.convert(p),m=new import_ag_charts_community6._Scene.Rect;return m.x=u.convert(g),m.y=C,m.width=u.bandwidth,m.height=d.convert(0)-C,m.strokeWidth=0,m.crisp=!0,m});return e?a.data.map(h=>c(h,o,l)):c(a.data,o,l)}function createLinePaths(a,e,t,r){const s=new import_ag_charts_community6._Scene.LinearScale;s.domain=[0,4],s.range=[r,t-r];const i=new import_ag_charts_community6._Scene.LinearScale;i.domain=[0,10],i.range=[t-r,r];const n=e.map(l=>{const c=new import_ag_charts_community6._Scene.Path;return c.strokeWidth=3,c.lineCap="round",c.fill=void 0,l.forEach((h,u)=>{c.path[u>0?"lineTo":"moveTo"](s.convert(u),i.convert(h))}),c}),o=new import_ag_charts_community6._Scene.Group;return o.setClipRectInGroupCoordinateSpace(new import_ag_charts_community6._Scene.BBox(r,r,t-r*2,t-r*2)),o.append(n),a.append(o),n}function createPolarPaths(a,e,t,r,s,i=0){const n=new import_ag_charts_community6._Scene.LinearScale;n.domain=[0,7],n.range=[-Math.PI,Math.PI].map(d=>d+Math.PI/2);const o=new import_ag_charts_community6._Scene.LinearScale;o.domain=[0,10],o.range=[r,s];const l=[],c=e.map(d=>{const p=new import_ag_charts_community6._Scene.Path;return p.strokeWidth=1,p.strokeOpacity=.5,p.lineCap="round",p.fill=void 0,p.fillOpacity=.8,d.forEach((g,C)=>{const m=n.convert(C),v=r+s-o.convert(g),f=v*Math.cos(m),y=v*Math.sin(m);if(p.path[C>0?"lineTo":"moveTo"](f,y),i>0){const S=new import_ag_charts_community6._Scene.Circle;S.x=f,S.y=y,S.size=i,l.push(S)}}),p.path.closePath(),p}),h=new import_ag_charts_community6._Scene.Group,u=t/2;return h.translationX=u,h.translationY=u,h.append([...c,...l]),a.append(h),{paths:c,markers:l}}function accumulateData(a){let[e,t]=[1/0,-1/0];return{processedData:a.reduce((s,i,n)=>{var o;const l=n>0?s[n-1]:void 0;(o=s[n])!=null||(s[n]=[]);const c=s[n];return i.forEach((h,u)=>{l&&(h+=l[u]),c[u]=h,c[u]<e&&(e=c[u]),c[u]>t&&(t=c[u])}),s},[]),min:e,max:t}}var MiniColumn=class extends MiniChartWithAxes{constructor(a,e,t){super(a,"groupedColumnTooltip"),this.columnData=[2,3,4];const{root:r,columnData:s,size:i,padding:n}=this;this.columns=createColumnRects({stacked:!1,root:r,data:s,size:i,padding:n,xScaleDomain:[0,1,2],yScaleDomain:[0,4],xScalePadding:.3}),r.append(this.columns),this.updateColors(e,t)}updateColors(a,e){this.columns.forEach((t,r)=>{t.fill=a[r],t.stroke=e[r]})}};MiniColumn.chartType="groupedColumn";var _MiniStackedColumn=class ye extends MiniChartWithAxes{constructor(e,t,r,s,i,n=ye.data,o=[0,16],l="stackedColumnTooltip"){super(e,l);const{root:c,size:h,padding:u}=this;this.stackedColumns=createColumnRects({stacked:!0,root:c,data:n,size:h,padding:u,xScaleDomain:[0,1,2],yScaleDomain:o,xScalePadding:.3}),c.append([].concat.apply([],this.stackedColumns)),this.updateColors(t,r)}updateColors(e,t){this.stackedColumns.forEach((r,s)=>r.forEach(i=>{i.fill=e[s],i.stroke=t[s]}))}};_MiniStackedColumn.chartType="stackedColumn",_MiniStackedColumn.data=[[8,12,16],[6,9,12],[2,3,4]];var MiniStackedColumn=_MiniStackedColumn,_MiniNormalizedColumn=class Se extends MiniStackedColumn{constructor(e,t,r,s,i){super(e,t,r,s,i,Se.data,[0,10],"normalizedColumnTooltip")}};_MiniNormalizedColumn.chartType="normalizedColumn",_MiniNormalizedColumn.data=[[10,10,10],[6,7,8],[2,4,6]];var MiniNormalizedColumn=_MiniNormalizedColumn,import_ag_charts_community7=require("ag-charts-community"),MiniBar=class extends MiniChartWithAxes{constructor(a,e,t){super(a,"groupedBarTooltip");const r=this.padding,s=this.size,i=[2,3,4],n=new import_ag_charts_community7._Scene.BandScale;n.domain=[0,1,2],n.range=[r,s-r],n.paddingInner=.3,n.paddingOuter=.3;const o=new import_ag_charts_community7._Scene.LinearScale;o.domain=[0,4],o.range=[s-r,r];const l=o.convert(0),c=n.bandwidth;this.bars=i.map((h,u)=>{const d=new import_ag_charts_community7._Scene.Rect;return d.x=r,d.y=n.convert(u),d.width=l-o.convert(h),d.height=c,d.strokeWidth=0,d.crisp=!0,d}),this.updateColors(e,t),this.root.append(this.bars)}updateColors(a,e){this.bars.forEach((t,r)=>{t.fill=a[r],t.stroke=e[r]})}};MiniBar.chartType="groupedBar";var import_ag_charts_community8=require("ag-charts-community"),_MiniStackedBar=class Te extends MiniChartWithAxes{constructor(e,t,r,s,i,n=Te.data,o=[0,16],l="stackedBarTooltip"){super(e,l);const c=this.size,h=this.padding,u=new import_ag_charts_community8._Scene.BandScale;u.domain=[0,1,2],u.range=[h,c-h],u.paddingInner=.3,u.paddingOuter=.3;const d=new import_ag_charts_community8._Scene.LinearScale;d.domain=o,d.range=[c-h,h];const p=d.convert(0),g=u.bandwidth;this.bars=n.map(C=>C.map((m,v)=>{const f=new import_ag_charts_community8._Scene.Rect;return f.x=h,f.y=u.convert(v),f.width=p-d.convert(m),f.height=g,f.strokeWidth=0,f.crisp=!0,f})),this.updateColors(t,r),this.root.append([].concat.apply([],this.bars))}updateColors(e,t){this.bars.forEach((r,s)=>r.forEach(i=>{i.fill=e[s],i.stroke=t[s]}))}};_MiniStackedBar.chartType="stackedBar",_MiniStackedBar.data=[[8,12,16],[6,9,12],[2,3,4]];var MiniStackedBar=_MiniStackedBar,_MiniNormalizedBar=class be extends MiniStackedBar{constructor(e,t,r,s,i){super(e,t,r,s,i,be.data,[0,10],"normalizedBarTooltip")}};_MiniNormalizedBar.chartType="normalizedBar",_MiniNormalizedBar.data=[[10,10,10],[6,7,8],[2,4,6]];var MiniNormalizedBar=_MiniNormalizedBar,import_ag_charts_community9=require("ag-charts-community"),toRadians=import_ag_charts_community9._Scene.toRadians,MiniDonut=class extends MiniChart{constructor(a,e,t,r,s,i=.6,n="donutTooltip"){super(a,n);const o=(this.size-this.padding*2)/2,l=o+this.padding,c=[[toRadians(-90),toRadians(30)],[toRadians(30),toRadians(120)],[toRadians(120),toRadians(180)],[toRadians(180),toRadians(210)],[toRadians(210),toRadians(240)],[toRadians(240),toRadians(270)]];this.sectors=c.map(([h,u])=>{const d=new import_ag_charts_community9._Scene.Sector;return d.centerX=l,d.centerY=l,d.innerRadius=o*i,d.outerRadius=o,d.startAngle=h,d.endAngle=u,d.stroke=void 0,d.strokeWidth=0,d.inset=.75,d}),this.updateColors(e,t),this.root.append(this.sectors)}updateColors(a,e){this.sectors.forEach((t,r)=>{t.fill=a[r%a.length],t.stroke=e[r%e.length]})}};MiniDonut.chartType="donut";var MiniPie=class extends MiniDonut{constructor(a,e,t,r,s){super(a,e,t,r,s,0,"pieTooltip")}};MiniPie.chartType="pie";var MiniLine=class extends MiniChartWithAxes{constructor(a,e,t){super(a,"lineTooltip"),this.data=[[9,7,8,5,6],[5,6,3,4,1],[1,3,4,8,7]],this.lines=createLinePaths(this.root,this.data,this.size,this.padding),this.updateColors(e,t)}updateColors(a,e){this.lines.forEach((t,r)=>{t.stroke=a[r]})}};MiniLine.chartType="line";var import_ag_charts_community10=require("ag-charts-community"),MiniScatter=class extends MiniChartWithAxes{constructor(a,e,t){super(a,"scatterTooltip");const r=this.size,s=this.padding,i=[[[.3,3],[1.1,.9],[2,.4],[3.4,2.4]],[[0,.3],[1,2],[2.4,1.4],[3,0]]],n=new import_ag_charts_community10._Scene.LinearScale;n.domain=[-.5,4],n.range=[s*2,r-s];const o=new import_ag_charts_community10._Scene.LinearScale;o.domain=[-.5,3.5],o.range=[r-s,s];const l=[];i.forEach(h=>{h.forEach(([u,d])=>{const p=new import_ag_charts_community10._Scene.Arc;p.strokeWidth=0,p.centerX=n.convert(u),p.centerY=o.convert(d),p.radius=2.5,l.push(p)})}),this.points=l,this.updateColors(e,t);const c=new import_ag_charts_community10._Scene.Group;c.setClipRectInGroupCoordinateSpace(new import_ag_charts_community10._Scene.BBox(s,s,r-s*2,r-s*2)),c.append(this.points),this.root.append(c)}updateColors(a,e){this.points.forEach((t,r)=>{t.stroke=e[r%e.length],t.fill=a[r%a.length]})}};MiniScatter.chartType="scatter";var import_ag_charts_community11=require("ag-charts-community"),MiniBubble=class extends MiniChartWithAxes{constructor(a,e,t){super(a,"bubbleTooltip");const r=this.size,s=this.padding,i=[[[.1,.3,5],[.5,.4,7],[.2,.8,7]],[[.8,.7,5],[.7,.3,9]]],n=new import_ag_charts_community11._Scene.LinearScale;n.domain=[0,1],n.range=[s*2,r-s];const o=new import_ag_charts_community11._Scene.LinearScale;o.domain=[0,1],o.range=[r-s,s];const l=[];i.forEach(h=>{h.forEach(([u,d,p])=>{const g=new import_ag_charts_community11._Scene.Arc;g.strokeWidth=0,g.centerX=n.convert(u),g.centerY=o.convert(d),g.radius=p,g.fillOpacity=.7,l.push(g)})}),this.points=l,this.updateColors(e,t);const c=new import_ag_charts_community11._Scene.Group;c.setClipRectInGroupCoordinateSpace(new import_ag_charts_community11._Scene.BBox(s,s,r-s*2,r-s*2)),c.append(this.points),this.root.append(c)}updateColors(a,e){this.points.forEach((t,r)=>{t.stroke=e[r%e.length],t.fill=a[r%a.length]})}};MiniBubble.chartType="bubble";var import_ag_charts_community12=require("ag-charts-community"),_MiniArea=class Pe extends MiniChartWithAxes{constructor(e,t,r,s,i,n=Pe.data){super(e,"groupedAreaTooltip");const o=this.size,l=this.padding,c=new import_ag_charts_community12._Scene.BandScale;c.domain=[0,1,2],c.paddingInner=1,c.paddingOuter=0,c.range=[l+.5,o-l-.5];const h=new import_ag_charts_community12._Scene.LinearScale;h.domain=[0,6],h.range=[o-l+.5,l];const d=n.length*2-1,p=[],g=h.convert(0);n.forEach((C,m)=>{const v=c.convert(m);C.forEach((f,y)=>{const S=h.convert(f),x=p[y]||(p[y]=[]);x[m]={x:v,y:S},x[d-m]={x:v,y:g}})}),this.areas=p.reverse().map(C=>{const m=new import_ag_charts_community12._Scene.Path;m.strokeWidth=1,m.strokeOpacity=.75,m.fillOpacity=.7;const v=m.path;return v.clear(),C.forEach((f,y)=>v[y>0?"lineTo":"moveTo"](f.x,f.y)),v.closePath(),m}),this.updateColors(t,r),this.root.append(this.areas)}updateColors(e,t){this.areas.forEach((r,s)=>{r.fill=e[s],r.stroke=t[s]})}};_MiniArea.chartType="area",_MiniArea.data=[[1,3,5],[2,6,4],[5,3,1]];var MiniArea=_MiniArea,import_ag_charts_community13=require("ag-charts-community"),_MiniStackedArea=class xe extends MiniChartWithAxes{constructor(e,t,r,s,i,n=xe.data,o="stackedAreaTooltip"){super(e,o);const l=this.size,c=this.padding,h=new import_ag_charts_community13._Scene.BandScale;h.domain=[0,1,2],h.paddingInner=1,h.paddingOuter=0,h.range=[c+.5,l-c-.5];const u=new import_ag_charts_community13._Scene.LinearScale;u.domain=[0,16],u.range=[l-c+.5,c+.5];const p=n.length*2-1,g=[];n.forEach((C,m)=>{const v=h.convert(m);let f=0;C.forEach((y,S)=>{const x=u.convert(f+y),T=g[S]||(g[S]=[]);T[m]={x:v,y:x},T[p-m]={x:v,y:u.convert(f)},f+=y})}),this.areas=g.map(C=>{const m=new import_ag_charts_community13._Scene.Path;m.strokeWidth=0;const v=m.path;return v.clear(),C.forEach((f,y)=>v[y>0?"lineTo":"moveTo"](f.x,f.y)),v.closePath(),m}),this.updateColors(t,r),this.root.append(this.areas)}updateColors(e,t){this.areas.forEach((r,s)=>{r.fill=e[s],r.stroke=t[s]})}};_MiniStackedArea.chartType="stackedArea",_MiniStackedArea.data=[[2,3,2],[3,6,5],[6,2,2]];var MiniStackedArea=_MiniStackedArea,_MiniNormalizedArea=class Ae extends MiniStackedArea{constructor(e,t,r,s,i,n=Ae.data){super(e,t,r,s,i,n,"normalizedAreaTooltip")}};_MiniNormalizedArea.chartType="normalizedArea",_MiniNormalizedArea.data=MiniStackedArea.data.map(a=>{const e=a.reduce((t,r)=>t+r,0);return a.map(t=>t/e*16)});var MiniNormalizedArea=_MiniNormalizedArea,import_ag_charts_community14=require("ag-charts-community"),MiniHistogram=class extends MiniChartWithAxes{constructor(a,e,t){super(a,"histogramTooltip");const r=this.padding,s=this.size,i=[2,5,11,13,10,6,1],n=new import_ag_charts_community14._Scene.LinearScale;n.domain=[0,i.length],n.range=[r,s-r];const o=new import_ag_charts_community14._Scene.LinearScale;o.domain=[0,i.reduce((c,h)=>Math.max(c,h),0)],o.range=[s-r,r];const l=o.convert(0);this.bars=i.map((c,h)=>{const u=o.convert(c),d=n.convert(h),p=n.convert(h+1),g=new import_ag_charts_community14._Scene.Rect;return g.x=d,g.y=u,g.width=p-d,g.height=l-u,g.strokeWidth=1,g.strokeOpacity=.75,g.crisp=!0,g}),this.updateColors(e,t),this.root.append(this.bars)}updateColors([a],[e]){this.bars.forEach(t=>{t.fill=a,t.stroke=e})}};MiniHistogram.chartType="histogram";var import_ag_charts_community16=require("ag-charts-community"),import_core43=require("@ag-grid-community/core"),import_ag_charts_community15=require("ag-charts-community"),MiniChartWithPolarAxes=class extends MiniChart{constructor(a,e){super(a,e),this.stroke="gray",this.showRadiusAxisLine=!0,this.showAngleAxisLines=!0}addAxes(){const a=this.size,e=this.padding,t=e*2,r=(a-t)/2,s=this.showAngleAxisLines?[r,r*.8,r*.6,r*.4]:[],i=new import_ag_charts_community15._Scene.Line;i.x1=a/2,i.y1=e,i.x2=a/2,i.y2=a-e-r-s[s.length-1],i.stroke=this.stroke,i.strokeOpacity=.5,i.fill=void 0,i.visible=this.showRadiusAxisLine;const n=e+r;this.gridLines=s.map((l,c)=>{const h=new import_ag_charts_community15._Scene.Path;return h.path.arc(n,n,l,0,2*Math.PI),h.strokeWidth=1,h.stroke=this.stroke,h.strokeOpacity=c===0?.5:.2,h.fill=void 0,h});const o=this.root;o.append(i),this.gridLines.length>0&&o.append(this.gridLines)}};__decorateClass([import_core43.PostConstruct],MiniChartWithPolarAxes.prototype,"addAxes",1);var MiniRadialColumn=class extends MiniChartWithPolarAxes{constructor(a,e,t){super(a,"radialColumnTooltip"),this.data=[[6,8,10,2,6,5],[4,4,3,6,4,4],[5,4,2,9,8,9]],this.showRadiusAxisLine=!1;const{padding:r,size:s,data:i}=this,n=(s-r*2)/2,l=n*.4,c=new import_ag_charts_community16._Scene.BandScale;c.domain=i[0].map((C,m)=>m),c.range=[0,2*Math.PI],c.paddingInner=0,c.paddingOuter=0;const h=c.bandwidth*.7,{processedData:u,max:d}=accumulateData(i),p=new import_ag_charts_community16._Scene.LinearScale;p.domain=[0,d],p.range=[l,n];const g=this.size/2;this.series=u.map((C,m)=>{const f=m===0?void 0:u[m-1],y=new import_ag_charts_community16._Scene.Group({zIndex:1e6}),S=C.map((x,T)=>{const P=f?.[T],_=p.convert(x),w=p.convert(P??0),E=c.convert(T),D=E+h,A=import_ag_charts_community16._Scene.getRadialColumnWidth(E,D,n,.5,.5),b=new import_ag_charts_community16._Scene.RadialColumnShape;return b.scalingCenterX=g,b.scalingCenterY=g,b.columnWidth=A,b.innerRadius=w,b.outerRadius=_,b.startAngle=E,b.endAngle=D,b.isBeveled=!0,b.axisInnerRadius=l,b.axisOuterRadius=n,b.stroke=void 0,b.strokeWidth=0,b});return y.append(S),y.translationX=g,y.translationY=g,y}),this.root.append(this.series),this.updateColors(e,t)}updateColors(a,e){this.series.forEach((t,r)=>{var s;(s=t.children)==null||s.forEach(i=>{i.fill=a[r%a.length],i.stroke=e[r%e.length]})})}};MiniRadialColumn.chartType="radialColumn";var import_ag_charts_community17=require("ag-charts-community"),MiniRadialBar=class extends MiniChartWithPolarAxes{constructor(a,e,t){super(a,"radialBarTooltip"),this.data=[[6,8,10],[4,4,3],[5,4,2]],this.showRadiusAxisLine=!1;const r=(this.size-this.padding)/2,i=r*.4,n=r+i,o=new import_ag_charts_community17._Scene.BandScale;o.domain=this.data[0].map((C,m)=>m),o.range=[r,i],o.paddingInner=.5,o.paddingOuter=0;const l=o.bandwidth,{processedData:c,max:h}=accumulateData(this.data),u=new import_ag_charts_community17._Scene.LinearScale;u.domain=[0,Math.ceil(h*1.5)];const d=3/2*Math.PI,p=d+2*Math.PI;u.range=[d,p];const g=this.size/2;this.series=c.map((C,m)=>{const v=m<0?void 0:c[m-1],f=new import_ag_charts_community17._Scene.Group({zIndex:1e6}),y=C.map((S,x)=>{var T;const P=(T=v?.[x])!=null?T:0,_=n-o.convert(x),w=_+l,E=u.convert(P),D=u.convert(S),A=new import_ag_charts_community17._Scene.Sector;return A.centerX=g,A.centerY=g,A.innerRadius=_,A.outerRadius=w,A.startAngle=E,A.endAngle=D,A.stroke=void 0,A.strokeWidth=0,A});return f.append(y),f}),this.root.append(this.series),this.updateColors(e,t)}updateColors(a,e){this.series.forEach((t,r)=>{var s;(s=t.children)==null||s.forEach(i=>{i.fill=a[r%a.length],i.stroke=e[r%e.length]})})}};MiniRadialBar.chartType="radialBar";var MiniRadarLine=class extends MiniChartWithPolarAxes{constructor(a,e,t){super(a,"radarLineTooltip"),this.markerSize=4,this.data=[[8,7,8,7,8,8,7,8],[6,8,5,10,6,7,4,6],[0,3,3,5,4,4,2,0]],this.showRadiusAxisLine=!1;const r=(this.size-this.padding*2)/2,s=0,{paths:i,markers:n}=createPolarPaths(this.root,this.data,this.size,r,s,this.markerSize);this.lines=i,this.markers=n,this.updateColors(e,t)}updateColors(a,e){this.lines.forEach((t,r)=>{const s=this.data[r].length;t.stroke=a[r];const i=r*s,n=i+s;this.markers.slice(i,n).forEach(l=>{l.stroke=e[r],l.fill=a[r]})})}};MiniRadarLine.chartType="radarLine";var MiniRadarArea=class extends MiniChartWithPolarAxes{constructor(a,e,t){super(a,"radarAreaTooltip"),this.data=[[8,10,5,7,4,1,5,8],[1,1,2,7,7,8,10,1],[4,5,9,9,4,2,3,4]],this.showRadiusAxisLine=!1;const r=(this.size-this.padding*2)/2,s=r-this.size*.3;this.areas=createPolarPaths(this.root,this.data,this.size,r,s).paths,this.updateColors(e,t)}updateColors(a,e){this.areas.forEach((t,r)=>{t.fill=a[r],t.stroke=e[r]})}};MiniRadarArea.chartType="radarArea";var import_ag_charts_community18=require("ag-charts-community"),MiniNightingale=class extends MiniChartWithPolarAxes{constructor(a,e,t){super(a,"nightingaleTooltip"),this.data=[[6,10,9,8,7,8],[4,6,5,4,5,5],[3,5,4,3,4,7]],this.showRadiusAxisLine=!1;const r=(this.size-this.padding*2)/2,s=new import_ag_charts_community18._Scene.BandScale;s.domain=this.data[0].map((h,u)=>u),s.range=[-Math.PI,Math.PI],s.paddingInner=0,s.paddingOuter=0;const i=s.bandwidth*.7,{processedData:n,max:o}=accumulateData(this.data),l=new import_ag_charts_community18._Scene.LinearScale;l.domain=[0,o],l.range=[0,r];const c=this.size/2;this.series=n.map((h,u)=>{const d=u<0?void 0:n[u-1],p=new import_ag_charts_community18._Scene.Group({zIndex:1e6}),g=h.map((C,m)=>{const v=d?.[m],f=l.convert(C),y=l.convert(v??0),S=s.convert(m),x=S+i,T=new import_ag_charts_community18._Scene.Sector;return T.centerX=c,T.centerY=c,T.innerRadius=y,T.outerRadius=f,T.startAngle=S,T.endAngle=x,T.stroke=void 0,T.strokeWidth=0,T});return p.append(g),p}),this.root.append(this.series),this.updateColors(e,t)}updateColors(a,e){this.series.forEach((t,r)=>{var s;(s=t.children)==null||s.forEach(i=>{i.fill=a[r%a.length],i.stroke=e[r%e.length]})})}};MiniNightingale.chartType="nightingale";var import_ag_charts_community19=require("ag-charts-community"),MiniRangeBar=class extends MiniChartWithAxes{constructor(a,e,t){super(a,"rangeBarTooltip");const r=[3,3.5,3];this.bars=this.createRangeBar(this.root,r,this.size,this.padding,"vertical"),this.updateColors(e,t)}updateColors(a,e){this.bars.forEach((t,r)=>{t.fill=a[r],t.stroke=e[r]})}createRangeBar(a,e,t,r,s){const i=s==="horizontal",n=2*r,o=new import_ag_charts_community19._Scene.BandScale;o.domain=e.map((p,g)=>g),o.range=[r,t-r],o.paddingInner=.3,o.paddingOuter=.3;const l=.7,c=1.3,h=new import_ag_charts_community19._Scene.LinearScale;h.domain=[e.reduce((p,g)=>Math.min(p,g),1/0)*l,e.reduce((p,g)=>Math.max(p,g),0)*c],h.range=[n,t-n];const u=o.bandwidth,d=e.map((p,g)=>{const[C,m]=[p*l,p*c],v=o.convert(g),f=h.convert(C),y=h.convert(m)-f,S=new import_ag_charts_community19._Scene.Rect;return S.x=i?f:v,S.y=i?v:f,S.width=i?y:u,S.height=i?u:y,S.strokeWidth=0,S.crisp=!0,S});return a.append(d),d}};MiniRangeBar.chartType="rangeBar";var import_ag_charts_community20=require("ag-charts-community"),MiniRangeArea=class extends MiniChartWithAxes{constructor(a,e,t){super(a,"rangeAreaTooltip");const r=4,s=[zigzag({offset:.375*r,length:r,pattern:{low:3,high:5,period:r}}),zigzag({offset:.375*r,length:r,pattern:{low:2.25,high:4.25,period:r}}),zigzag({offset:.75*r,length:r,pattern:{low:2.5,high:4.5,period:r}})],i=1.75,n=s.map(c=>c.map(([h,u])=>({x:h,low:u-.5*i,high:u+.5*i}))),{lines:o,areas:l}=this.createRangeArea(this.root,n,this.size,this.padding);this.lines=o,this.areas=l,this.updateColors(e,t)}updateColors(a,e){a=swapArrayItems(a,1,2),e=swapArrayItems(e,1,2),this.lines.forEach(([t,r],s)=>{t.fill=void 0,t.stroke=e[s],r.fill=void 0,r.stroke=e[s]}),this.areas.forEach((t,r)=>{t.fill=a[r]})}createRangeArea(a,e,t,r){const s=e.reduce((g,C)=>C.reduce((m,{x:v})=>Math.min(m,v),g),1/0),i=e.reduce((g,C)=>C.reduce((m,{x:v})=>Math.max(m,v),g),-1/0),n=e.reduce((g,C)=>C.reduce((m,{low:v})=>Math.min(m,v),g),1/0),o=e.reduce((g,C)=>C.reduce((m,{high:v})=>Math.max(m,v),g),-1/0),l=new import_ag_charts_community20._Scene.LinearScale;l.domain=[s,i],l.range=[r,t-r];const c=2*r,h=new import_ag_charts_community20._Scene.LinearScale;h.domain=[n,o],h.range=[t-c,c];const u=[],d=[];return e.map(g=>{const C=new import_ag_charts_community20._Scene.Path,m=new import_ag_charts_community20._Scene.Path,v=new import_ag_charts_community20._Scene.Path;return u.push([C,m]),d.push(v),C.strokeWidth=0,m.strokeWidth=0,v.strokeWidth=0,v.fillOpacity=.8,C.path.clear(),m.path.clear(),v.path.clear(),g.map((f,y)=>{const{x:S,low:x,high:T}=f,P=l.convert(S),_=h.convert(x),w=h.convert(T),E=y>0?"lineTo":"moveTo";return C.path[E](P,w),m.path[E](P,_),v.path[E](P,w),[P,_]})}).forEach((g,C)=>{const m=g.length-1,v=d[C];for(let f=m;f>=0;f--){const[y,S]=g[f];v.path.lineTo(y,S)}}),a.append(d.concat(...u)),{lines:u,areas:d}}};MiniRangeArea.chartType="rangeArea";function zigzag(a){const{offset:e,length:t,pattern:r}=a,s=o(e,t,r),i=0,n=t;return(s.length===0||s[0][0]!==i)&&s.unshift(l(i,e,r)),s[s.length-1][0]!==n&&s.push(l(n,e,r)),s;function o(h,u,d){const{period:p}=d,g=h/p,m=[0,.5].map(f=>f-g).map(getRemainderAbs).sort((f,y)=>f-y);return Array.from({length:Math.floor(m.length*(p/u))},(f,y)=>m[y%m.length]+Math.floor(y/m.length)).map(f=>f*p).map(f=>l(f,h,d))}function l(h,u,d){return[h,c(u+h,d)]}function c(h,u){const{low:d,high:p,period:g}=u,C=getRemainderAbs(h/g),m=C>.5?1-2*(C-.5):2*C;return d+(p-d)*m}}function getRemainderAbs(a){const e=a%1;return e<0?e+1:e}function swapArrayItems(a,e,t){const r=[...a],s=r[e];return r[e]=r[t],r[t]=s,r}var import_ag_charts_community21=require("ag-charts-community"),MiniBoxPlot=class extends MiniChartWithAxes{constructor(a,e,t,r,s){super(a,"boxPlotTooltip");const i=this.padding,n=this.size,o=[11,11.5,10.5],l=1.2,c=1.1,h=.9,u=.8,d=new import_ag_charts_community21._Scene.LinearScale;d.domain=[o.reduce((m,v)=>Math.min(m,v),1/0)*u,o.reduce((m,v)=>Math.max(m,v),0)*l],d.range=[n-1.5*i,i];const p=new import_ag_charts_community21._Scene.BandScale;p.domain=o.map((m,v)=>v),p.range=[i,n-i],p.paddingInner=.4,p.paddingOuter=.2;const g=Math.round(p.bandwidth),C=Math.round(p.bandwidth/2);this.boxPlotGroups=o.map((m,v)=>{let[f,y,S,x]=[m*u,m*h,m*c,m*l];const T=Math.round(d.convert(S)),P=Math.round(p.convert(v)),_=Math.round(P+g),w=Math.round(d.convert(y)),E=Math.round(d.convert(f)),D=Math.round(d.convert(m)),A=Math.round(d.convert(x)),b=P+C,M=new import_ag_charts_community21._Scene.Group,O=new import_ag_charts_community21._Scene.Rect,V=new import_ag_charts_community21._Scene.Line,N=new import_ag_charts_community21._Scene.Line,L=new import_ag_charts_community21._Scene.Line,I=new import_ag_charts_community21._Scene.Line,R=new import_ag_charts_community21._Scene.Line;return O.x=P,O.y=T,O.width=g,O.height=w-T,O.strokeWidth=1,O.strokeOpacity=.75,O.crisp=!0,this.setLineProperties(V,P,_,D,D),this.setLineProperties(N,b,b,A,T),this.setLineProperties(L,b,b,E,w),this.setLineProperties(I,P,_,A,A),this.setLineProperties(R,P,_,E,E),M.append([O,V,N,L,I,R]),M}),this.updateColors(e,t,r,s),this.root.append(this.boxPlotGroups)}updateColors(a,e,t,r){var s;const i=t?.properties.get(import_ag_charts_community21._Theme.DEFAULT_BACKGROUND_COLOUR),n=(s=Array.isArray(i)?i[0]:i)!=null?s:"white";this.boxPlotGroups.forEach((o,l)=>{var c;(c=o.children)==null||c.forEach(h=>{const u=a[l%a.length];h.fill=r?u:import_ag_charts_community21._Util.Color.interpolate(u,n)(.7),h.stroke=e[l%e.length]})})}setLineProperties(a,e,t,r,s){a.x1=e,a.x2=t,a.y1=r,a.y2=s,a.strokeOpacity=.75}};MiniBoxPlot.chartType="boxPlot";var import_ag_charts_community22=require("ag-charts-community"),MiniTreemap=class extends MiniChart{constructor(a,e,t,r,s){super(a,"treemapTooltip");const{size:i,padding:n}=this,o=[[1,1],[3,2,1]],c=o.length%2===0?.3:.2,h=[n,i-n],u=o.length,d=u*(u+1)/2,p=c/(u-1),g=h[1]-h[0],C=g-c;let m=h[0];this.rects=o.reduce((f,y,S)=>{f??(f=[]);const x=(u-S)/d,T=C*x,P=y.length,_=y.reduce((b,M)=>b+=M,0),w=c/(P-1||1),E=P>1?g-c:g;let D=h[0];const A=y.map(b=>{const M=new import_ag_charts_community22._Scene.Rect,O=E*b/_;return M.x=m,M.y=D,M.width=T,M.height=O,M.strokeWidth=.75,M.crisp=!0,D+=O+w,M});return m+=T+p,f.push(...A),f},[]),this.updateColors(e,t,r,s);const v=new import_ag_charts_community22._Scene.Group;v.setClipRectInGroupCoordinateSpace(new import_ag_charts_community22._Scene.BBox(n,n,i-n,i-n)),v.append(this.rects),this.root.append(v)}updateColors(a,e,t,r){var s;const{properties:i}=t??{},n=i?.get(import_ag_charts_community22._Theme.DEFAULT_BACKGROUND_COLOUR),o=(s=Array.isArray(n)?n[0]:n)!=null?s:"white";this.rects.forEach((l,c)=>{l.fill=a[c%e.length],l.stroke=r?e[c%e.length]:o})}};MiniTreemap.chartType="treemap";var import_ag_charts_community23=require("ag-charts-community"),MiniSunburst=class extends MiniChartWithPolarAxes{constructor(a,e,t){super(a,"sunburstTooltip"),this.data=[[[],[]],[[],[]],[[],[]]],this.angleOffset=-Math.PI/2,this.innerRadiusRatio=0,this.showRadiusAxisLine=!1,this.showAngleAxisLines=!1;const{data:r,size:s,padding:i,angleOffset:n,innerRadiusRatio:o}=this,l=(s-i*2)/2,c=[n+0,n+2*Math.PI],h=Math.abs(c[1]-c[0]),u=[l*o,l],d=Math.abs(u[1]-u[0]);let p=0;const g=(y,S)=>{y.forEach(x=>{const T=S+1;p=Math.max(p,T),g(x,T)})};g(r,0);const C=d/p,m=this.size/2,v=c[0];this.series=[];const f=(y,S,x,T,P)=>{if(!Array.isArray(y))return;const w=S+1;let E=x;y.forEach((D,A,b)=>{let M=P;M||(M=new import_ag_charts_community23._Scene.Group,this.series.push(M));const O=u[0]+S*C,V=u[0]+w*C,N=1/b.length,L=E,I=L+T*N,R=new import_ag_charts_community23._Scene.Sector;R.centerX=m,R.centerY=m,R.innerRadius=O,R.outerRadius=V,R.startAngle=L,R.endAngle=I,R.stroke=void 0,R.strokeWidth=0,R.inset=.75,E=I,M.append(R),f(D,w,L,Math.abs(I-L),M)})};f(r,0,v,h),this.root.append(this.series),this.updateColors(e,t)}updateColors(a,e){this.series.forEach((t,r)=>{var s;(s=t.children)==null||s.forEach(i=>{i.fill=a[r%a.length],i.stroke=e[r%e.length]})})}};MiniSunburst.chartType="sunburst";var import_ag_charts_community24=require("ag-charts-community"),MiniHeatmap=class extends MiniChart{constructor(a,e,t,r,s){var i,n;super(a,"heatmapTooltip");const{size:o,padding:l}=this,c=3,h=Array.from({length:c},(v,f)=>Array.from({length:c},(y,S)=>S)),u=h.map((v,f)=>f),d=new import_ag_charts_community24._Scene.BandScale;d.domain=u,d.range=[l,o-l],d.paddingInner=.01,d.paddingOuter=.1;const p=new import_ag_charts_community24._Scene.BandScale;p.domain=u,p.range=[l,o-l],p.paddingInner=.01,p.paddingOuter=.1;const g=(i=d.bandwidth)!=null?i:0,C=(n=p.bandwidth)!=null?n:0;this.rects=h.reduce((v,f,y)=>{v??(v=[]);const S=f.map((x,T)=>{const P=new import_ag_charts_community24._Scene.Rect;return P.x=d.convert(y),P.y=p.convert(T),P.width=g,P.height=C,P.strokeWidth=0,P.crisp=!0,P});return v.push(...S),v},[]),this.updateColors(e,t,r,s);const m=new import_ag_charts_community24._Scene.Group;m.setClipRectInGroupCoordinateSpace(new import_ag_charts_community24._Scene.BBox(l,l,o-l,o-l)),m.append(this.rects),this.root.append(m)}updateColors(a,e,t,r){var s;const{properties:i}=t??{},n=i?.get(import_ag_charts_community24._Theme.DEFAULT_DIVERGING_SERIES_COLOUR_RANGE),o=i?.get(import_ag_charts_community24._Theme.DEFAULT_BACKGROUND_COLOUR),l=(s=Array.isArray(o)?o[0]:o)!=null?s:"white",c=r?[a[0],a[1]]:n,h=r?e[0]:l;this.rects.forEach((u,d)=>{u.fill=import_ag_charts_community24._Util.Color.interpolate(c[0],c[1])(d*.2),u.stroke=h})}};MiniHeatmap.chartType="heatmap";var import_ag_charts_community25=require("ag-charts-community"),MiniWaterfall=class extends MiniChartWithAxes{constructor(a,e,t,r,s){super(a,"waterfallTooltip"),this.data=[4,3,-3,6,-3],this.bars=this.createWaterfall(this.root,this.data,this.size,this.padding,"vertical").bars,this.updateColors(e,t,r,s)}updateColors(a,e,t,r){var s,i;const{data:n}=this,{properties:o}=t??{},l={fill:a[0],stroke:e[0]},c={fill:a[1],stroke:e[1]},h=r?l:(s=o?.get(import_ag_charts_community25._Theme.DEFAULT_WATERFALL_SERIES_POSITIVE_COLOURS))!=null?s:l,u=r?c:(i=o?.get(import_ag_charts_community25._Theme.DEFAULT_WATERFALL_SERIES_NEGATIVE_COLOURS))!=null?i:c;this.bars.forEach((d,p)=>{const g=n[p]>=0;d.fill=g?h.fill:u.fill,d.stroke=g?h.stroke:u.stroke})}createWaterfall(a,e,t,r,s){const i=2*r,{processedData:n,min:o,max:l}=accumulateData(e.map(f=>[f])),c=n.reduce((f,y)=>f.concat(y),[]),h=new import_ag_charts_community25._Scene.LinearScale;h.domain=[Math.min(o,0),l],h.range=[t-i,i];const u=new import_ag_charts_community25._Scene.BandScale;u.domain=e.map((f,y)=>y),u.range=[r,t-r],u.paddingInner=.2,u.paddingOuter=.3;const d=u.bandwidth,p=new import_ag_charts_community25._Scene.Path;p.stroke="#575757",p.strokeWidth=0;const g=Math.floor(p.strokeWidth)%2/2,C=p.path;C.clear();const m=s==="horizontal",v=c.map((f,y)=>{const S=y>0?c[y-1]:0,T=e[y]>0,P=Math.round(h.convert(f)),_=Math.round(h.convert(S)),w=(T?P:_)-g,E=(T?_:P)+g,D=Math.abs(E-w),A=u.convert(y),b=new import_ag_charts_community25._Scene.Rect;b.x=m?w:A,b.y=m?A:w,b.width=m?D:d,b.height=m?d:D,b.strokeWidth=0,b.crisp=!0;const M=P+g,O=_+g;if(y>0){const L=m?O:b.x,I=m?b.y:O;C.lineTo(L,I)}const V=m?M:b.x,N=m?b.y:M;return C.moveTo(V,N),b});return a.append([p,...v]),{bars:v}}};MiniWaterfall.chartType="waterfall";var MiniColumnLineCombo=class extends MiniChartWithAxes{constructor(a,e,t){super(a,"columnLineComboTooltip"),this.columnData=[3,4],this.lineData=[[5,4,6,5,4]];const{root:r,columnData:s,lineData:i,size:n,padding:o}=this;this.columns=createColumnRects({stacked:!1,root:r,data:s,size:n,padding:o,xScaleDomain:[0,1],yScaleDomain:[0,4],xScalePadding:.5}),r.append(this.columns),this.lines=createLinePaths(r,i,n,o),this.updateColors(e,t)}updateColors(a,e){this.columns.forEach((t,r)=>{t.fill=a[r],t.stroke=e[r]}),this.lines.forEach((t,r)=>{t.stroke=a[r+2]})}};MiniColumnLineCombo.chartType="columnLineCombo";var import_ag_charts_community26=require("ag-charts-community"),MiniAreaColumnCombo=class extends MiniChartWithAxes{constructor(a,e,t){super(a,"areaColumnComboTooltip"),this.columnData=[3,4.5],this.areaData=[[5,4,6,5,4]];const{root:r,columnData:s,areaData:i,size:n,padding:o}=this;this.columns=createColumnRects({stacked:!1,root:r,data:s,size:n,padding:o,xScaleDomain:[0,1],yScaleDomain:[0,6],xScalePadding:.5});const l=new import_ag_charts_community26._Scene.BandScale;l.range=[o,n-o],l.domain=[0,1,2,3,4],l.paddingInner=1,l.paddingOuter=0;const c=new import_ag_charts_community26._Scene.LinearScale;c.range=[n-o,o],c.domain=[0,6];const h=[],u=c.convert(0),d=l.convert(0);i.forEach((p,g)=>{const C=h[g]||(h[g]=[]);p.forEach((v,f)=>{const y=v,S=f,x=l.convert(S),T=c.convert(y);C[f]={x,y:T}});const m=l.convert(p.length-1);h[g].push({x:m,y:u},{x:d,y:u})}),this.areas=h.map(p=>{const g=new import_ag_charts_community26._Scene.Path;g.strokeWidth=0,g.fillOpacity=.8;const C=g.path;return p.forEach((m,v)=>C[v>0?"lineTo":"moveTo"](m.x,m.y)),g}),r.append(this.areas),r.append([].concat.apply([],this.columns)),this.updateColors(e,t)}updateColors(a,e){this.areas.forEach((t,r)=>{t.fill=a[r],t.stroke=e[r]}),this.columns.forEach((t,r)=>{t.fill=a[r+1],t.stroke=e[r+1]})}};MiniAreaColumnCombo.chartType="areaColumnCombo";var import_ag_charts_community27=require("ag-charts-community"),MiniCustomCombo=class extends MiniChart{constructor(a,e,t){super(a,"customComboTooltip"),this.columnData=[3,4],this.lineData=[[5,4,6,5,4]];const{root:r,columnData:s,lineData:i,size:n,padding:o}=this;this.columns=createColumnRects({stacked:!1,root:r,data:s,size:n,padding:o,xScaleDomain:[0,1],yScaleDomain:[0,4],xScalePadding:.5}),r.append(this.columns),this.lines=createLinePaths(r,i,n,o);const l="grey",c=3,h=new import_ag_charts_community27._Scene.Line;h.x1=o,h.y1=o,h.x2=o,h.y2=n-o+c,h.stroke=l;const u=new import_ag_charts_community27._Scene.Line;u.x1=o-c+1,u.y1=n-o,u.x2=n-o+1,u.y2=n-o,u.stroke=l;const d=new import_ag_charts_community27._Scene.Path;this.buildPenIconPath(d),d.fill="whitesmoke",d.stroke="darkslategrey",d.strokeWidth=1,r.append([u,h,d]),this.updateColors(e,t)}updateColors(a,e){this.columns.forEach((t,r)=>{t.fill=a[r],t.stroke=e[r]}),this.lines.forEach((t,r)=>{t.stroke=a[r+2]})}buildPenIconPath(a){const{path:e}=a;e.moveTo(25.76,43.46),e.lineTo(31.27,48.53),e.moveTo(49.86,22),e.lineTo(49.86,22),e.cubicCurveTo(49.01994659053345,21.317514933510974,47.89593834348529,21.09645997825817,46.86,21.41),e.lineTo(46.86,21.41),e.cubicCurveTo(45.55460035985361,21.77260167850787,44.38777081121966,22.517979360321792,43.51,23.55),e.lineTo(25.51,43.8),e.lineTo(25.43,43.89),e.lineTo(23.01,51.89),e.lineTo(22.83,52.46),e.lineTo(31.02,48.86),e.lineTo(49.02,28.52),e.lineTo(49.02,28.52),e.cubicCurveTo(49.940716461596224,27.521914221246085,50.54302631059587,26.2720342455763,50.75,24.93),e.lineTo(50.75,24.93),e.cubicCurveTo(50.95363374988308,23.866379846512814,50.62080640232334,22.77066734274871,49.86,22),e.closePath(),e.moveTo(41.76,25.5),e.lineTo(47.34,30.5),e.moveTo(40.74,26.65),e.lineTo(46.25,31.71)}};MiniCustomCombo.chartType="customCombo";var miniChartMapping={columnGroup:{column:{range:!0,pivot:!0,enterprise:!1,icon:MiniColumn},stackedColumn:{range:!0,pivot:!0,enterprise:!1,icon:MiniStackedColumn},normalizedColumn:{range:!0,pivot:!0,enterprise:!1,icon:MiniNormalizedColumn}},barGroup:{bar:{range:!0,pivot:!0,enterprise:!1,icon:MiniBar},stackedBar:{range:!0,pivot:!0,enterprise:!1,icon:MiniStackedBar},normalizedBar:{range:!0,pivot:!0,enterprise:!1,icon:MiniNormalizedBar}},pieGroup:{pie:{range:!0,pivot:!0,enterprise:!1,icon:MiniPie},donut:{range:!0,pivot:!0,enterprise:!1,icon:MiniDonut},doughnut:{range:!0,pivot:!0,enterprise:!1,icon:MiniDonut}},lineGroup:{line:{range:!0,pivot:!0,enterprise:!1,icon:MiniLine}},scatterGroup:{scatter:{range:!0,pivot:!0,enterprise:!1,icon:MiniScatter},bubble:{range:!0,pivot:!0,enterprise:!1,icon:MiniBubble}},areaGroup:{area:{range:!0,pivot:!0,enterprise:!1,icon:MiniArea},stackedArea:{range:!0,pivot:!0,enterprise:!1,icon:MiniStackedArea},normalizedArea:{range:!0,pivot:!0,enterprise:!1,icon:MiniNormalizedArea}},polarGroup:{radarLine:{range:!0,pivot:!1,enterprise:!0,icon:MiniRadarLine},radarArea:{range:!0,pivot:!1,enterprise:!0,icon:MiniRadarArea},nightingale:{range:!0,pivot:!1,enterprise:!0,icon:MiniNightingale},radialColumn:{range:!0,pivot:!1,enterprise:!0,icon:MiniRadialColumn},radialBar:{range:!0,pivot:!1,enterprise:!0,icon:MiniRadialBar}},statisticalGroup:{boxPlot:{range:!0,pivot:!1,enterprise:!0,icon:MiniBoxPlot},histogram:{range:!0,pivot:!1,enterprise:!1,icon:MiniHistogram},rangeBar:{range:!0,pivot:!1,enterprise:!0,icon:MiniRangeBar},rangeArea:{range:!0,pivot:!1,enterprise:!0,icon:MiniRangeArea}},hierarchicalGroup:{treemap:{range:!0,pivot:!0,enterprise:!0,icon:MiniTreemap},sunburst:{range:!0,pivot:!0,enterprise:!0,icon:MiniSunburst}},specializedGroup:{heatmap:{range:!0,pivot:!1,enterprise:!0,icon:MiniHeatmap},waterfall:{range:!0,pivot:!1,enterprise:!0,icon:MiniWaterfall}},combinationGroup:{columnLineCombo:{range:!0,pivot:!0,enterprise:!1,icon:MiniColumnLineCombo},areaColumnCombo:{range:!0,pivot:!0,enterprise:!1,icon:MiniAreaColumnCombo},customCombo:{range:!0,pivot:!0,enterprise:!1,icon:MiniCustomCombo}}},DEFAULT_CHART_GROUPS={columnGroup:["column","stackedColumn","normalizedColumn"],barGroup:["bar","stackedBar","normalizedBar"],pieGroup:["pie","donut"],lineGroup:["line"],scatterGroup:["scatter","bubble"],areaGroup:["area","stackedArea","normalizedArea"],polarGroup:["radarLine","radarArea","nightingale","radialColumn","radialBar"],statisticalGroup:["boxPlot","histogram","rangeBar","rangeArea"],hierarchicalGroup:["treemap","sunburst"],specializedGroup:["heatmap","waterfall"],combinationGroup:["columnLineCombo","areaColumnCombo","customCombo"]},_MiniChartsContainer=class Me extends import_core44.Component{constructor(e,t,r,s,i,n=DEFAULT_CHART_GROUPS){super(Me.TEMPLATE),this.wrappers={},this.chartController=e,this.fills=t,this.strokes=r,this.themeTemplateParameters=s,this.isCustomTheme=i,this.chartGroups=__spreadValues({},n)}init(){const e=this.getGui(),t=this.chartController.isEnterprise(),r=this.chartController.isPivotChart(),s=!r,i=Object.keys(this.chartGroups).map(n=>{var o;const l=n in miniChartMapping?miniChartMapping[n]:void 0;if(!l)return import_core44._.warnOnce(`invalid chartGroupsDef config '${n}'`),null;const h=((o=this.chartGroups[n])!=null?o:[]).map(u=>{const d=u in l?l[u]:void 0;return d?!t&&d.enterprise?null:s&&d.range||r&&d.pivot?d:null:(import_core44._.warnOnce(`invalid chartGroupsDef config '${n}.${u}'`),null)}).filter(u=>u!=null);return h.length===0?null:{label:this.chartTranslationService.translate(n),items:h}}).filter(n=>n!=null);for(const{label:n,items:o}of i){const l=this.createBean(new import_core44.AgGroupComponent({title:n,suppressEnabledCheckbox:!0,enabled:!0,suppressOpenCloseIcons:!0,cssIdentifier:"charts-settings",direction:"horizontal"}));for(const c of o){const h=c.icon,u=document.createElement("div");u.classList.add("ag-chart-mini-thumbnail");const d=h.chartType;this.addManagedListener(u,"click",()=>{this.chartController.setChartType(d),this.updateSelectedMiniChart()}),this.wrappers[d]=u,this.createBean(new h(u,this.fills,this.strokes,this.themeTemplateParameters,this.isCustomTheme)),l.addItem(u)}e.appendChild(l.getGui())}!this.chartController.customComboExists()&&this.chartGroups.combinationGroup&&(this.chartGroups.combinationGroup=this.chartGroups.combinationGroup.filter(n=>n!=="customCombo")),this.updateSelectedMiniChart()}updateSelectedMiniChart(){const e=this.chartController.getChartType();for(const t in this.wrappers){const r=this.wrappers[t],s=t===e;r.classList.toggle("ag-selected",s)}}};_MiniChartsContainer.TEMPLATE='<div class="ag-chart-settings-mini-wrapper"></div>',__decorateClass([(0,import_core44.Autowired)("chartTranslationService")],_MiniChartsContainer.prototype,"chartTranslationService",2),__decorateClass([import_core44.PostConstruct],_MiniChartsContainer.prototype,"init",1);var MiniChartsContainer=_MiniChartsContainer,_ChartSettingsPanel=class Ee extends import_core45.Component{constructor(e){super(Ee.TEMPLATE),this.chartController=e,this.miniChartsContainers=[],this.cardItems=[],this.activePaletteIndex=0,this.palettes=[],this.themes=[]}postConstruct(){this.resetPalettes(),this.ePrevBtn.insertAdjacentElement("afterbegin",import_core45._.createIconNoSpan("previous",this.gridOptionsService)),this.eNextBtn.insertAdjacentElement("afterbegin",import_core45._.createIconNoSpan("next",this.gridOptionsService)),this.addManagedListener(this.ePrevBtn,"click",()=>this.setActivePalette(this.getPrev(),"left")),this.addManagedListener(this.eNextBtn,"click",()=>this.setActivePalette(this.getNext(),"right")),this.addManagedListener(this.chartController,ChartController.EVENT_CHART_TYPE_CHANGED,()=>this.resetPalettes(!0)),this.addManagedListener(this.chartController,ChartController.EVENT_CHART_API_UPDATE,()=>this.resetPalettes(!0)),this.scrollSelectedIntoView()}scrollSelectedIntoView(){setTimeout(()=>{const e=s=>!s.getGui().classList.contains("ag-hidden"),r=this.miniChartsContainers.find(e).getGui().querySelector(".ag-selected");if(r){const s=r.offsetParent;s&&this.eMiniChartsContainer.scrollTo(0,s.offsetTop)}},250)}resetPalettes(e){var t,r;const s=this.chartController.getPalettes(),i=this.chartController.getThemeTemplateParameters(),n=(r=(t=this.gridOptionsService.get("chartToolPanelsDef"))==null?void 0:t.settingsPanel)==null?void 0:r.chartGroupsDef;if(import_core45._.shallowCompare(s,this.palettes)&&!e||this.isAnimating)return;this.palettes=s,this.themes=this.chartController.getThemeNames(),this.activePaletteIndex=this.themes.findIndex(l=>l===this.chartController.getChartThemeName()),this.cardItems=[],import_core45._.clearElement(this.eCardSelector),this.destroyMiniCharts();const{themes:o}=this;this.palettes.forEach((l,c)=>{const h=this.activePaletteIndex===c,{fills:u,strokes:d}=l,p=o[c],g=!isStockTheme(p),C=this.createBean(new MiniChartsContainer(this.chartController,u,d,i[c],g,n));this.miniChartsContainers.push(C),this.eMiniChartsContainer.appendChild(C.getGui()),this.addCardLink(c),h?C.updateSelectedMiniChart():C.setDisplayed(!1)}),import_core45._.setDisplayed(this.eNavBar,this.palettes.length>1),import_core45._.radioCssClass(this.cardItems[this.activePaletteIndex],"ag-selected","ag-not-selected")}addCardLink(e){const t=document.createElement("div");t.classList.add("ag-chart-settings-card-item"),this.addManagedListener(t,"click",()=>{this.setActivePalette(e,e<this.activePaletteIndex?"left":"right")}),this.eCardSelector.appendChild(t),this.cardItems.push(t)}getPrev(){let e=this.activePaletteIndex-1;return e<0&&(e=this.palettes.length-1),e}getNext(){let e=this.activePaletteIndex+1;return e>=this.palettes.length&&(e=0),e}setActivePalette(e,t){if(this.isAnimating||this.activePaletteIndex===e)return;import_core45._.radioCssClass(this.cardItems[e],"ag-selected","ag-not-selected");const r=this.miniChartsContainers[this.activePaletteIndex],s=r.getGui(),i=this.miniChartsContainers[e],n=i.getGui();r.updateSelectedMiniChart(),i.updateSelectedMiniChart();const o=t==="left"?-1:1,l=n.style.left=`${import_core45._.getAbsoluteWidth(this.getGui())*o}px`;this.activePaletteIndex=e,this.isAnimating=!0;const c="ag-animating";i.setDisplayed(!0),r.addCssClass(c),i.addCssClass(c),this.chartController.setChartThemeName(this.themes[e]),window.setTimeout(()=>{s.style.left=`${-parseFloat(l)}px`,n.style.left="0px"},0),window.setTimeout(()=>{this.isAnimating=!1,r.removeCssClass(c),i.removeCssClass(c),r.setDisplayed(!1)},300)}destroyMiniCharts(){import_core45._.clearElement(this.eMiniChartsContainer),this.miniChartsContainers=this.destroyBeans(this.miniChartsContainers)}destroy(){this.destroyMiniCharts(),super.destroy()}};_ChartSettingsPanel.TEMPLATE=`<div class="ag-chart-settings-wrapper">
            <div ref="eMiniChartsContainer" class="ag-chart-settings-mini-charts-container ag-scrollable-container"></div>
            <div ref="eNavBar" class="ag-chart-settings-nav-bar">
                <div ref="ePrevBtn" class="ag-chart-settings-prev">
                    <button type="button" class="ag-button ag-chart-settings-prev-button"></button>
                </div>
                <div ref="eCardSelector" class="ag-chart-settings-card-selector"></div>
                <div ref="eNextBtn" class="ag-chart-settings-next">
                    <button type="button" class="ag-button ag-chart-settings-next-button"></button>
                </div>
            </div>
        </div>`,__decorateClass([(0,import_core45.RefSelector)("eMiniChartsContainer")],_ChartSettingsPanel.prototype,"eMiniChartsContainer",2),__decorateClass([(0,import_core45.RefSelector)("eNavBar")],_ChartSettingsPanel.prototype,"eNavBar",2),__decorateClass([(0,import_core45.RefSelector)("eCardSelector")],_ChartSettingsPanel.prototype,"eCardSelector",2),__decorateClass([(0,import_core45.RefSelector)("ePrevBtn")],_ChartSettingsPanel.prototype,"ePrevBtn",2),__decorateClass([(0,import_core45.RefSelector)("eNextBtn")],_ChartSettingsPanel.prototype,"eNextBtn",2),__decorateClass([import_core45.PostConstruct],_ChartSettingsPanel.prototype,"postConstruct",1);var ChartSettingsPanel=_ChartSettingsPanel,_TabbedChartMenu=class B extends import_core46.Component{constructor(e,t){super(),this.panels=e,this.chartMenuContext=t,this.tabs=[]}init(){this.panels.forEach(e=>{const t=e.replace("chart","").toLowerCase(),r=this.createPanel(t),s=this.createTab(e,t,r);this.tabs.push(s),this.addDestroyFunc(()=>this.destroyBean(r))}),this.tabbedLayout=new import_core46.TabbedLayout({items:this.tabs,cssClass:"ag-chart-tabbed-menu",keepScrollPosition:!0,suppressFocusBodyOnOpen:!0,suppressTrapFocus:!0,enableCloseButton:!this.chartMenuService.isLegacyFormat(),closeButtonAriaLabel:this.chartTranslationService.translate("ariaChartMenuClose"),onCloseClicked:()=>{var e;(e=this.eventSource)==null||e.focus({preventScroll:!0}),this.dispatchEvent({type:B.EVENT_CLOSED})}}),this.getContext().createBean(this.tabbedLayout)}createTab(e,t,r){const s=document.createElement("div");s.classList.add("ag-chart-tab",`ag-chart-${t}`),this.getContext().createBean(r),s.appendChild(r.getGui());const i=document.createElement("div"),n=this.chartTranslationService.translate(t);return i.innerText=n,{title:i,titleLabel:n,bodyPromise:import_core46.AgPromise.resolve(s),getScrollableContainer:()=>s.querySelector(".ag-scrollable-container")||s,name:e}}showTab(e){const t=this.tabs[e];this.tabbedLayout.showItem(t)}getGui(){return this.tabbedLayout&&this.tabbedLayout.getGui()}showMenu(e,t){var r;this.eventSource=e,t||(r=this.tabbedLayout)==null||r.focusHeader(!0)}destroy(){this.parentComponent&&this.parentComponent.isAlive()&&this.destroyBean(this.parentComponent),super.destroy()}createPanel(e){const{chartController:t,chartOptionsService:r}=this.chartMenuContext;switch(e){case B.TAB_DATA:return new ChartDataPanel(t,r);case B.TAB_FORMAT:return new FormatPanel(this.chartMenuContext);default:return new ChartSettingsPanel(t)}}};_TabbedChartMenu.EVENT_CLOSED="closed",_TabbedChartMenu.TAB_DATA="data",_TabbedChartMenu.TAB_FORMAT="format",__decorateClass([(0,import_core46.Autowired)("chartTranslationService")],_TabbedChartMenu.prototype,"chartTranslationService",2),__decorateClass([(0,import_core46.Autowired)("chartMenuService")],_TabbedChartMenu.prototype,"chartMenuService",2),__decorateClass([import_core46.PostConstruct],_TabbedChartMenu.prototype,"init",1);var TabbedChartMenu=_TabbedChartMenu,import_core47=require("@ag-grid-community/core"),ChartToolbar=class extends import_core47.Component{constructor(){super('<div class="ag-chart-menu" ref="eMenu"></div>'),this.buttonListenersDestroyFuncs=[]}updateParams(a){const{buttons:e}=a;this.createButtons(e)}createButtons(a){this.buttonListenersDestroyFuncs.forEach(t=>t?.()),this.buttonListenersDestroyFuncs=[];const e=this.eMenu;import_core47._.clearElement(e),a.forEach(t=>{const{buttonName:r,iconName:s,callback:i}=t,n=this.createButton(s),o=this.chartTranslationService.translate(r+"ToolbarTooltip");o&&n instanceof HTMLElement&&(n.title=o),this.buttonListenersDestroyFuncs.push(this.addManagedListener(n,"click",l=>i(l.target))),e.appendChild(n)})}createButton(a){let e=import_core47._.createIconNoSpan(a,this.gridOptionsService,void 0,!0);return e.classList.add("ag-chart-menu-icon"),this.chartMenuService.isLegacyFormat()||(e=this.wrapButton(e)),e}wrapButton(a){const e=this.gridOptionsService.getDocument().createElement("button");return e.appendChild(a),e.classList.add("ag-chart-menu-toolbar-button"),e}destroy(){this.buttonListenersDestroyFuncs=[],super.destroy()}};__decorateClass([(0,import_core47.Autowired)("chartTranslationService")],ChartToolbar.prototype,"chartTranslationService",2),__decorateClass([(0,import_core47.Autowired)("chartMenuService")],ChartToolbar.prototype,"chartMenuService",2),__decorateClass([(0,import_core47.RefSelector)("eMenu")],ChartToolbar.prototype,"eMenu",2);var _ChartMenu=class _e extends import_core48.Component{constructor(e,t,r){super(_e.TEMPLATE),this.eChartContainer=e,this.eMenuPanelContainer=t,this.chartMenuContext=r,this.buttons={chartSettings:{iconName:"menu",callback:()=>this.showMenu({panel:this.defaultPanel})},chartData:{iconName:"menu",callback:()=>this.showMenu({panel:"chartData"})},chartFormat:{iconName:"menu",callback:()=>this.showMenu({panel:"chartFormat"})},chartLink:{iconName:"linked",callback:()=>this.chartMenuService.toggleLinked(this.chartMenuContext)},chartUnlink:{iconName:"unlinked",callback:()=>this.chartMenuService.toggleLinked(this.chartMenuContext)},chartDownload:{iconName:"save",callback:()=>this.chartMenuService.downloadChart(this.chartMenuContext)},chartMenu:{iconName:"menuAlt",callback:s=>this.showMenuList(s)}},this.panels=[],this.menuVisible=!1,this.chartController=r.chartController}postConstruct(){this.legacyFormat=this.chartMenuService.isLegacyFormat(),this.chartToolbar=this.createManagedBean(new ChartToolbar),this.getGui().appendChild(this.chartToolbar.getGui()),this.legacyFormat&&(import_core48._.warnOnce("As of v31.2, the legacy format charts menu is deprecated. Set `legacyChartsMenu = false` to use the new format menu."),this.createLegacyToggleButton()),this.refreshToolbarAndPanels(),this.addManagedListener(this.eventService,import_core48.Events.EVENT_CHART_CREATED,e=>{var t;e.chartId===this.chartController.getChartId()&&((t=this.gridOptionsService.get("chartToolPanelsDef"))!=null&&t.defaultToolPanel)&&this.showMenu({panel:this.defaultPanel,animate:!1,suppressFocus:!0})}),this.addManagedListener(this.chartController,ChartController.EVENT_CHART_LINKED_CHANGED,this.refreshToolbarAndPanels.bind(this)),this.refreshMenuClasses(),this.legacyFormat&&!this.gridOptionsService.get("suppressChartToolPanelsButton")&&this.panels.length>0&&(this.getGui().classList.add("ag-chart-tool-panel-button-enable"),this.eHideButton&&this.addManagedListener(this.eHideButton,"click",this.toggleMenu.bind(this))),this.legacyFormat||this.getGui().classList.add("ag-chart-menu-wrapper"),this.addManagedListener(this.chartController,ChartController.EVENT_CHART_API_UPDATE,this.refreshToolbarAndPanels.bind(this))}isVisible(){return this.menuVisible}getExtraPaddingDirections(){const e=["chartMenu","chartLink","chartUnlink","chartDownload"],t=["chartSettings","chartData","chartFormat"],r=[];return e.some(s=>this.chartToolbarOptions.includes(s))&&r.push("top"),t.some(s=>this.chartToolbarOptions.includes(s))&&r.push(this.gridOptionsService.get("enableRtl")?"left":"right"),r}createLegacyToggleButton(){const e=this.gridOptionsService.getDocument();this.eHideButton=e.createElement("button"),this.eHideButton.classList.add("ag-button","ag-chart-menu-close"),this.eHideButtonIcon=e.createElement("span"),this.eHideButtonIcon.classList.add("ag-icon","ag-icon-contracted"),this.eHideButton.appendChild(this.eHideButtonIcon),this.getGui().appendChild(this.eHideButton)}refreshToolbarAndPanels(){this.initToolbarOptionsAndPanels(),this.updateToolbar()}initToolbarOptionsAndPanels(){const{panels:e,defaultPanel:t,chartToolbarOptions:r}=this.chartMenuService.getToolbarOptionsAndPanels(this.chartController);this.panels=e,this.defaultPanel=t,this.chartToolbarOptions=r}updateToolbar(){const e=this.chartToolbarOptions.map(t=>{const{iconName:r,callback:s}=this.buttons[t];return{buttonName:t,iconName:r,callback:s}});this.chartToolbar.updateParams({buttons:e})}createMenuPanel(e){const t=this.environment.chartMenuPanelWidth(),r=this.menuPanel=this.createBean(new import_core48.AgPanel({minWidth:t,width:t,height:"100%",closable:!0,hideTitleBar:!0,cssIdentifier:"chart-menu"}));return r.setParentComponent(this),this.eMenuPanelContainer.appendChild(r.getGui()),this.tabbedMenu=this.createBean(new TabbedChartMenu(this.panels,this.chartMenuContext)),this.addManagedListener(this.tabbedMenu,TabbedChartMenu.EVENT_CLOSED,()=>{this.hideMenu(!1)}),this.addManagedListener(r,import_core48.Component.EVENT_DESTROYED,()=>this.destroyBean(this.tabbedMenu)),new import_core48.AgPromise(s=>{window.setTimeout(()=>{r.setBodyComponent(this.tabbedMenu),this.tabbedMenu.showTab(e),s(r),this.legacyFormat&&this.addManagedListener(this.eChartContainer,"click",i=>{this.getGui().contains(i.target)||this.menuVisible&&this.hideMenu()})},100)})}showContainer(e,t){this.menuPanel&&(this.menuVisible=!0,this.showParent(this.menuPanel.getWidth()),this.refreshMenuClasses(),this.tabbedMenu.showMenu(e,t))}toggleMenu(){this.menuVisible?this.hideMenu(this.legacyFormat):this.showMenu({animate:this.legacyFormat})}showMenu(e){const{panel:t,animate:r=!0,eventSource:s,suppressFocus:i}=e;if(r||this.eMenuPanelContainer.classList.add("ag-no-transition"),this.menuPanel&&!t)this.showContainer(s,i);else{const n=t||this.defaultPanel;let o=this.panels.indexOf(n);o<0&&(console.warn(`AG Grid: '${t}' is not a valid Chart Tool Panel name`),o=this.panels.indexOf(this.defaultPanel)),this.menuPanel?(this.tabbedMenu.showTab(o),this.showContainer(s,i)):this.createMenuPanel(o).then(()=>this.showContainer(s,i))}r||setTimeout(()=>{this.isAlive()&&this.eMenuPanelContainer.classList.remove("ag-no-transition")},500)}hideMenu(e=!0){e||this.eMenuPanelContainer.classList.add("ag-no-transition"),this.hideParent(),window.setTimeout(()=>{this.menuVisible=!1,this.refreshMenuClasses(),e||this.eMenuPanelContainer.classList.remove("ag-no-transition")},500)}refreshMenuClasses(){this.eChartContainer.classList.toggle("ag-chart-menu-visible",this.menuVisible),this.eChartContainer.classList.toggle("ag-chart-menu-hidden",!this.menuVisible),this.legacyFormat&&!this.gridOptionsService.get("suppressChartToolPanelsButton")&&(this.eHideButtonIcon.classList.toggle("ag-icon-contracted",this.menuVisible),this.eHideButtonIcon.classList.toggle("ag-icon-expanded",!this.menuVisible))}showParent(e){this.eMenuPanelContainer.style.minWidth=`${e}px`}hideParent(){this.eMenuPanelContainer.style.minWidth="0"}showMenuList(e){this.chartMenuListFactory.showMenuList({eventSource:e,showMenu:()=>this.showMenu({animate:!1,eventSource:e}),chartMenuContext:this.chartMenuContext})}destroy(){super.destroy(),this.menuPanel&&this.menuPanel.isAlive()&&this.destroyBean(this.menuPanel),this.tabbedMenu&&this.tabbedMenu.isAlive()&&this.destroyBean(this.tabbedMenu)}};_ChartMenu.TEMPLATE="<div></div>",__decorateClass([(0,import_core48.Autowired)("chartMenuService")],_ChartMenu.prototype,"chartMenuService",2),__decorateClass([(0,import_core48.Autowired)("chartMenuListFactory")],_ChartMenu.prototype,"chartMenuListFactory",2),__decorateClass([import_core48.PostConstruct],_ChartMenu.prototype,"postConstruct",1);var ChartMenu=_ChartMenu,import_core49=require("@ag-grid-community/core"),_TitleEdit=class we extends import_core49.Component{constructor(e){super(we.TEMPLATE),this.chartMenu=e,this.destroyableChartListeners=[],this.editing=!1}init(){this.addManagedListener(this.getGui(),"keydown",e=>{this.editing&&e.key==="Enter"&&!e.shiftKey&&(this.handleEndEditing(),e.preventDefault())}),this.addManagedListener(this.getGui(),"input",()=>{this.editing&&this.updateHeight()}),this.addManagedListener(this.getGui(),"blur",()=>this.endEditing())}refreshTitle(e){this.chartController=e.chartController,this.chartOptionsService=e.chartOptionsService,this.chartMenuUtils=e.chartMenuParamsFactory.getChartOptions();for(const l of this.destroyableChartListeners)l();this.destroyableChartListeners=[];const r=this.chartController.getChartProxy().getChart(),s=r.scene.canvas.element,i=this.addManagedListener(s,"dblclick",l=>{const{title:c}=r;if(c&&c.node.containsPoint(l.offsetX,l.offsetY)){const h=c.node.computeBBox(),u=c.node.inverseTransformPoint(h.x,h.y);this.startEditing(__spreadValues(__spreadValues({},h),u),s.width)}});let n=!1;const o=this.addManagedListener(s,"mousemove",l=>{const{title:c}=r,h=!!(c&&c.enabled&&c.node.containsPoint(l.offsetX,l.offsetY));n!==h&&(s.style.cursor=h?"pointer":""),n=h});this.destroyableChartListeners=[i,o]}startEditing(e,t){if(this.chartMenuService.isLegacyFormat()&&this.chartMenu&&this.chartMenu.isVisible()||this.editing)return;this.editing=!0;const s=Math.max(Math.min(e.width+20,t),300),i=this.getGui();i.classList.add("currently-editing");const n=i.style;n.fontFamily=this.chartMenuUtils.getValue("title.fontFamily"),n.fontWeight=this.chartMenuUtils.getValue("title.fontWeight"),n.fontStyle=this.chartMenuUtils.getValue("title.fontStyle"),n.fontSize=this.chartMenuUtils.getValue("title.fontSize")+"px",n.color=this.chartMenuUtils.getValue("title.color");const o=this.chartMenuUtils.getValue("title.text"),l=o===this.chartTranslationService.translate("titlePlaceholder");i.value=l?"":o;const c=o.split(/\r?\n/g).length;n.left=Math.round(e.x+e.width/2-s/2-1)+"px",n.top=Math.round(e.y+e.height/2-c*this.getLineHeight()/2-2)+"px",n.width=Math.round(s)+"px",n.lineHeight=this.getLineHeight()+"px",this.updateHeight(),i.focus()}updateHeight(){const e=this.getGui(),t=this.chartMenuUtils.getValue("title.text").split(/\r?\n/g).length,r=e.value.split(/\r?\n/g).length;e.style.height=Math.round(Math.max(t,r)*this.getLineHeight())+4+"px"}getLineHeight(){const e=this.chartMenuUtils.getValue("title.lineHeight");return e?parseInt(e):Math.round(parseInt(this.chartMenuUtils.getValue("title.fontSize"))*1.2)}handleEndEditing(){const e=this.chartMenuUtils.getValue("title.color");this.chartMenuUtils.setValue("title.color","rgba(0, 0, 0, 0)"),this.chartOptionsService.awaitChartOptionUpdate(()=>this.endEditing()),this.chartOptionsService.awaitChartOptionUpdate(()=>{this.chartMenuUtils.setValue("title.color",e)})}endEditing(){if(!this.editing)return;this.editing=!1;const e=this.getGui().value;e&&e.trim()!==""?(this.chartMenuUtils.setValue("title.text",e),this.chartMenuUtils.setValue("title.enabled",!0)):(this.chartMenuUtils.setValue("title.text",""),this.chartMenuUtils.setValue("title.enabled",!1)),this.getGui().classList.remove("currently-editing"),this.chartOptionsService.awaitChartOptionUpdate(()=>{this.eventService.dispatchEvent({type:"chartTitleEdit"})})}};_TitleEdit.TEMPLATE=`<textarea
             class="ag-chart-title-edit"
             style="padding:0; border:none; border-radius: 0; min-height: 0; text-align: center; resize: none;" />
        `,__decorateClass([(0,import_core49.Autowired)("chartTranslationService")],_TitleEdit.prototype,"chartTranslationService",2),__decorateClass([(0,import_core49.Autowired)("chartMenuService")],_TitleEdit.prototype,"chartMenuService",2),__decorateClass([import_core49.PostConstruct],_TitleEdit.prototype,"init",1);var TitleEdit=_TitleEdit,import_core50=require("@ag-grid-community/core"),import_ag_charts_community28=require("ag-charts-community");function deproxy(a){return a.chart!=null?a.chart:a}var ChartProxy=class{constructor(a){this.chartProxyParams=a,this.clearThemeOverrides=!1,this.chart=a.chartInstance,this.chartType=a.chartType,this.crossFiltering=a.crossFiltering,this.crossFilterCallback=a.crossFilterCallback,this.standaloneChartType=getSeriesType(this.chartType),this.chart==null?this.chart=import_ag_charts_community28.AgCharts.create(this.getCommonChartOptions()):this.clearThemeOverrides=!0}updateThemeOverrides(a){import_ag_charts_community28.AgCharts.updateDelta(this.getChartRef(),{theme:{overrides:a}})}getChart(){return deproxy(this.chart)}getChartRef(){return this.chart}downloadChart(a,e,t){const{chart:r}=this,s=deproxy(r),i=e||(s.title?s.title.text:"chart"),{width:n,height:o}=a||{};import_ag_charts_community28.AgCharts.download(r,{width:n,height:o,fileName:i,fileFormat:t})}getChartImageDataURL(a){return this.getChart().scene.getDataURL(a)}getChartOptions(){return this.chart.getOptions()}getChartThemeOverrides(){var a;return(a=this.getChartOptions().theme.overrides)!=null?a:{}}getChartPalette(){return import_ag_charts_community28._Theme.getChartTheme(this.getChartOptions().theme).palette}setPaired(a){const e=getSeriesType(this.chartProxyParams.chartType);import_ag_charts_community28.AgCharts.updateDelta(this.chart,{theme:{overrides:{[e]:{paired:a}}}})}isPaired(){const a=getSeriesType(this.chartProxyParams.chartType);return get(this.getChartThemeOverrides(),`${a}.paired`,!0)}lookupCustomChartTheme(a){return lookupCustomChartTheme(this.chartProxyParams,a)}transformData(a,e,t){return t?a.map((r,s)=>{const i=r[e],n=i&&i.toString?i.toString():"",o=__spreadValues({},r);return o[e]={id:s,value:i,toString:()=>n},o}):a}getCommonChartOptions(a){var e,t;const r=this.clearThemeOverrides?{}:(t=(e=this.chart)==null?void 0:e.getOptions())!=null?t:{},s=this.chart!=null?this.getActiveFormattingPanelOverrides():void 0;this.clearThemeOverrides=!1;const i=createAgChartTheme(this.chartProxyParams,this),n=this.getChartThemeDefaults(),o=applyThemeOverrides(i,[n,a??s]);return __spreadProps(__spreadValues({},r),{theme:o,container:this.chartProxyParams.parentElement,mode:"integrated"})}getChartThemeDefaults(){}getActiveFormattingPanelOverrides(){var a,e;if(this.clearThemeOverrides)return{};const t=(a=this.chart)==null?void 0:a.getOptions().theme;return(e=t?.overrides)!=null?e:{}}destroy({keepChartInstance:a=!1}={}){if(a)return this.chart.resetAnimations(),this.chart;this.destroyChart()}destroyChart(){this.chart&&(this.chart.destroy(),this.chart=void 0)}},import_ag_charts_community29=require("ag-charts-community"),CartesianChartProxy=class Oe extends ChartProxy{constructor(e){super(e),this.crossFilteringAllPoints=new Set,this.crossFilteringSelectedPoints=[]}update(e){const t=this.getAxes(e),r=__spreadProps(__spreadValues({},this.getCommonChartOptions(e.updatedOverrides)),{data:this.getData(e,t),axes:t,series:this.getSeries(e)});import_ag_charts_community29.AgCharts.update(this.getChartRef(),r)}getData(e,t){const r=["area","line"].includes(this.standaloneChartType),s=t.some(i=>i?.type==="category");return this.crossFiltering&&r?this.getCrossFilterData(e):this.getDataTransformedData(e,s)}getDataTransformedData(e,t){const[r]=e.categories;return this.transformData(e.data,r.id,t)}getXAxisType(e){return e.grouping?"grouped-category":Oe.isTimeAxis(e)?"time":"category"}static isTimeAxis(e){const[t]=e.categories;if(t&&t.chartDataType)return t.chartDataType==="time";const r=e.data[0];return(r&&r[t.id])instanceof Date}crossFilteringReset(){this.crossFilteringSelectedPoints=[],this.crossFilteringAllPoints.clear()}crossFilteringPointSelected(e){return this.crossFilteringSelectedPoints.length==0||this.crossFilteringSelectedPoints.includes(e)}crossFilteringDeselectedPoints(){return this.crossFilteringSelectedPoints.length>0&&this.crossFilteringAllPoints.size!==this.crossFilteringSelectedPoints.length}extractLineAreaCrossFilterSeries(e,t){const[r]=t.categories,s=i=>this.standaloneChartType==="area"?t.getCrossFilteringContext().lastSelectedChartId===t.chartId?i+"-total":i:i+"-total";return e.map(i=>(i.yKey=s(i.yKey),i.listeners={nodeClick:n=>{const o=n.datum[i.xKey],l=n.event.metaKey||n.event.ctrlKey;this.crossFilteringAddSelectedPoint(l,o),this.crossFilterCallback(n)}},i.marker={formatter:n=>{const o=n.datum[r.id];return{fill:n.highlighted?"yellow":n.fill,size:n.highlighted?14:this.crossFilteringPointSelected(o)?8:0}}},this.standaloneChartType==="area"&&(i.fillOpacity=this.crossFilteringDeselectedPoints()?.3:1),this.standaloneChartType==="line"&&(i.strokeOpacity=this.crossFilteringDeselectedPoints()?.3:1),i))}getCrossFilterData(e){this.crossFilteringAllPoints.clear();const[t]=e.categories,r=e.fields[0].colId,s=`${r}-filtered-out`,i=e.getCrossFilteringContext().lastSelectedChartId;return e.data.map(n=>{const o=n[t.id];this.crossFilteringAllPoints.add(o);const l=this.crossFilteringPointSelected(o);return this.standaloneChartType==="area"&&i===e.chartId&&(n[`${r}-total`]=l?n[r]:n[r]+n[s]),this.standaloneChartType==="line"&&(n[`${r}-total`]=l?n[r]:n[r]+n[s]),n})}crossFilteringAddSelectedPoint(e,t){e?this.crossFilteringSelectedPoints.push(t):this.crossFilteringSelectedPoints=[t]}},import_ag_charts_community30=require("ag-charts-community");function hexToRGBA(a,e){const t=parseInt(a.slice(1,3),16),r=parseInt(a.slice(3,5),16),s=parseInt(a.slice(5,7),16);return e?`rgba(${t}, ${r}, ${s}, ${e})`:`rgba(${t}, ${r}, ${s})`}function changeOpacity(a,e){return a.map(t=>{const r=import_ag_charts_community30._Util.Color.fromString(t);return new import_ag_charts_community30._Util.Color(r.r,r.g,r.b,e).toHexString()})}var BarChartProxy=class extends CartesianChartProxy{constructor(a){super(a)}getAxes(a){const e=[{type:this.getXAxisType(a),position:isHorizontal(this.chartType)?"left":"bottom"},{type:"number",position:isHorizontal(this.chartType)?"bottom":"left"}];if(this.isNormalised()){const t=e[1];t.label=__spreadProps(__spreadValues({},t.label),{formatter:r=>Math.round(r.value)+"%"})}return e}getSeries(a){const[e]=a.categories,t=a.fields.map(r=>({type:this.standaloneChartType,direction:isHorizontal(this.chartType)?"horizontal":"vertical",stacked:this.crossFiltering||isStacked(this.chartType),normalizedTo:this.isNormalised()?100:void 0,xKey:e.id,xName:e.name,yKey:r.colId,yName:r.displayName}));return this.crossFiltering?this.extractCrossFilterSeries(t):t}extractCrossFilterSeries(a){const e=this.getChartPalette(),t=(i,n)=>__spreadProps(__spreadValues({},i),{highlightStyle:{item:{fill:void 0}},fill:e?.fills[n],stroke:e?.strokes[n],listeners:{nodeClick:this.crossFilterCallback}}),r=i=>{const n=i.yKey+"-filtered-out";return __spreadProps(__spreadValues({},deepMerge({},i)),{yKey:n,fill:hexToRGBA(i.fill,"0.3"),stroke:hexToRGBA(i.stroke,"0.3"),showInLegend:!1})},s=[];for(let i=0;i<a.length;i++){const n=t(a[i],i);s.push(n),s.push(r(n))}return s}isNormalised(){const a=["normalizedColumn","normalizedBar"];return!this.crossFiltering&&import_core50._.includes(a,this.chartType)}},AreaChartProxy=class extends CartesianChartProxy{constructor(a){super(a)}getAxes(a){const e=[{type:this.getXAxisType(a),position:"bottom"},{type:"number",position:"left"}];if(this.isNormalised()){const t=e[1];t.label=__spreadProps(__spreadValues({},t.label),{formatter:r=>Math.round(r.value)+"%"})}return e}getSeries(a){const[e]=a.categories,t=a.fields.map(r=>({type:this.standaloneChartType,xKey:e.id,xName:e.name,yKey:r.colId,yName:r.displayName,normalizedTo:this.chartType==="normalizedArea"?100:void 0,stacked:["normalizedArea","stackedArea"].includes(this.chartType)}));return this.crossFiltering?this.extractLineAreaCrossFilterSeries(t,a):t}isNormalised(){return!this.crossFiltering&&this.chartType==="normalizedArea"}},LineChartProxy=class extends CartesianChartProxy{constructor(a){super(a)}getAxes(a){return[{type:this.getXAxisType(a),position:"bottom"},{type:"number",position:"left"}]}getSeries(a){const[e]=a.categories,t=a.fields.map(r=>({type:this.standaloneChartType,xKey:e.id,xName:e.name,yKey:r.colId,yName:r.displayName}));return this.crossFiltering?this.extractLineAreaCrossFilterSeries(t,a):t}},import_ag_charts_community31=require("ag-charts-community"),PolarChartProxy=class extends ChartProxy{constructor(a){super(a)}getAxes(a){const e=this.standaloneChartType==="radial-bar";return[{type:e?"angle-number":"angle-category"},{type:e?"radius-category":"radius-number"}]}getSeries(a){const{fields:e}=a,[t]=a.categories,r=this.standaloneChartType==="radial-bar";return e.map(s=>{var i,n;return{type:this.standaloneChartType,angleKey:r?s.colId:t.id,angleName:r?(i=s.displayName)!=null?i:void 0:t.name,radiusKey:r?t.id:s.colId,radiusName:r?t.name:(n=s.displayName)!=null?n:void 0}})}update(a){const e=this.getAxes(a),t=__spreadProps(__spreadValues({},this.getCommonChartOptions(a.updatedOverrides)),{data:this.getData(a,e),axes:e,series:this.getSeries(a)});import_ag_charts_community31.AgCharts.update(this.getChartRef(),t)}getData(a,e){const t=e.some(r=>r.type==="angle-category"||r.type==="radius-category");return this.getDataTransformedData(a,t)}getDataTransformedData(a,e){const[t]=a.categories;return this.transformData(a.data,t.id,e)}crossFilteringReset(){}},import_ag_charts_community32=require("ag-charts-community"),PieChartProxy=class De extends ChartProxy{constructor(e){super(e)}update(e){const{data:t}=e,[r]=e.categories,s=__spreadProps(__spreadValues({},this.getCommonChartOptions(e.updatedOverrides)),{data:this.crossFiltering?this.getCrossFilterData(e):this.transformData(t,r.id),series:this.getSeries(e)});import_ag_charts_community32.AgCharts.update(this.getChartRef(),s)}getSeries(e){const[t]=e.categories,r=e.fields.length,s={currentOffset:0,offsetAmount:r>1?20:40},i=this.getFields(e).map(n=>{var o;const l={type:this.standaloneChartType,angleKey:n.colId,angleName:n.displayName,sectorLabelKey:n.colId,calloutLabelName:t.name,calloutLabelKey:t.id};if(this.chartType==="donut"||this.chartType==="doughnut"){const{outerRadiusOffset:c,innerRadiusOffset:h}=De.calculateOffsets(s),u=n.displayName?{title:{text:n.displayName,showInLegend:r>1}}:void 0;return __spreadProps(__spreadValues(__spreadProps(__spreadValues({},l),{type:"donut",outerRadiusOffset:c,innerRadiusOffset:h}),u),{calloutLine:{colors:(o=this.getChartPalette())==null?void 0:o.strokes}})}return l});return this.crossFiltering?this.extractCrossFilterSeries(i):i}getCrossFilterData(e){const t=e.fields[0].colId,r=`${t}-filtered-out`;return e.data.map(s=>{const i=s[t]+s[r];return s[`${t}-total`]=i,s[r]=1,s[t]=s[t]/i,s})}extractCrossFilterSeries(e){const t=this.getChartPalette(),r=l=>__spreadProps(__spreadValues({},l),{legendItemKey:l.calloutLabelKey,calloutLabel:{enabled:!1},highlightStyle:{item:{fill:void 0}},radiusKey:l.angleKey,angleKey:l.angleKey+"-total",radiusMin:0,radiusMax:1,listeners:{nodeClick:this.crossFilterCallback}}),s=(l,c)=>{var h,u;return __spreadProps(__spreadValues({},deepMerge({},o)),{radiusKey:c+"-filtered-out",fills:changeOpacity((h=l.fills)!=null?h:t.fills,.3),strokes:changeOpacity((u=l.strokes)!=null?u:t.strokes,.3),showInLegend:!1})},i=e[0],n=i.angleKey,o=r(i);return[s(i,n),o]}static calculateOffsets(e){const t=e.currentOffset;e.currentOffset-=e.offsetAmount;const r=e.currentOffset;return e.currentOffset-=e.offsetAmount,{outerRadiusOffset:t,innerRadiusOffset:r}}getFields(e){return this.chartType==="pie"?e.fields.slice(0,1):e.fields}crossFilteringReset(){}},ScatterChartProxy=class extends CartesianChartProxy{constructor(a){super(a)}getAxes(a){return[{type:"number",position:"bottom"},{type:"number",position:"left"}]}getSeries(a){const[e]=a.categories,t=this.isPaired(),r=this.getSeriesDefinitions(a.fields,t),s=e.id===ChartDataModel.DEFAULT_CATEGORY?void 0:e,i=r.map(n=>{var o,l,c,h,u;return n?.sizeField?{type:"bubble",xKey:n.xField.colId,xName:(o=n.xField.displayName)!=null?o:void 0,yKey:n.yField.colId,yName:(l=n.yField.displayName)!=null?l:void 0,title:`${n.yField.displayName} vs ${n.xField.displayName}`,sizeKey:n.sizeField.colId,sizeName:(c=n.sizeField.displayName)!=null?c:"",labelKey:s?s.id:n.yField.colId,labelName:s?s.name:void 0}:{type:"scatter",xKey:n.xField.colId,xName:(h=n.xField.displayName)!=null?h:void 0,yKey:n.yField.colId,yName:(u=n.yField.displayName)!=null?u:void 0,title:`${n.yField.displayName} vs ${n.xField.displayName}`,labelKey:s?s.id:n.yField.colId,labelName:s?s.name:void 0}});return this.crossFiltering?this.extractCrossFilterSeries(i,a):i}extractCrossFilterSeries(a,e){const{data:t}=e,r=this.getChartPalette(),s=c=>`${c}-filtered-out`,i=(c,h)=>{var u;const d=[1/0,-1/0];if(h!=null)for(const p of c){const g=(u=p[h])!=null?u:p[s(h)];g<d[0]&&(d[0]=g),g>d[1]&&(d[1]=g)}if(d[0]<=d[1])return d},n=(c,h)=>{const u=r?.fills[h],d=r?.strokes[h];let p;if(c.type==="bubble"){const{sizeKey:C}=c;p=i(t,C)}const g=__spreadProps(__spreadValues({},c.marker),{fill:u,stroke:d,domain:p});return __spreadProps(__spreadValues({},c),{marker:g,highlightStyle:{item:{fill:"yellow"}},listeners:__spreadProps(__spreadValues({},c.listeners),{nodeClick:this.crossFilterCallback})})},o=c=>{let{yKey:h,xKey:u}=c,d={};return c.type==="bubble"&&(d={sizeKey:s(c.sizeKey)}),__spreadProps(__spreadValues(__spreadValues({},c),d),{yKey:s(h),xKey:s(u),marker:__spreadProps(__spreadValues({},c.marker),{fillOpacity:.3,strokeOpacity:.3}),showInLegend:!1,listeners:__spreadProps(__spreadValues({},c.listeners),{nodeClick:p=>{const g=p.datum[s(u)],C=__spreadProps(__spreadValues({},p),{xKey:u,datum:__spreadProps(__spreadValues({},p.datum),{[u]:g})});this.crossFilterCallback(C)}})})},l=a.map(n);return[...l,...l.map(o)]}getSeriesDefinitions(a,e){if(a.length<2)return[];const t=this.chartType==="bubble";if(e)return t?a.map((s,i)=>i%3===0?{xField:s,yField:a[i+1],sizeField:a[i+2]}:null).filter(s=>s&&s.yField&&s.sizeField):a.map((s,i)=>i%2===0?{xField:s,yField:a[i+1]}:null).filter(s=>s&&s.yField);const r=a[0];return t?a.map((s,i)=>i%2===1?{xField:r,yField:s,sizeField:a[i+1]}:null).filter(s=>s&&s.sizeField):a.filter((s,i)=>i>0).map(s=>({xField:r,yField:s}))}},StatisticalChartProxy=class extends CartesianChartProxy{constructor(a){super(a)}getAxes(a){return[{type:this.getXAxisType(a),position:isHorizontal(this.chartType)?"left":"bottom"},{type:"number",position:isHorizontal(this.chartType)?"bottom":"left"}]}computeSeriesStatistics(a,e){const{data:t,fields:r}=a,[s]=a.categories,i=s.id||ChartDataModel.DEFAULT_CATEGORY,n=this.groupDataByCategory(i,t);return Array.from(n).map(([o,l])=>{const c={[s.id]:o};return r.forEach((h,u)=>{const d=l.map(p=>p[h.colId]).filter(p=>typeof p=="number"&&!isNaN(p));Object.entries(e(d)).forEach(([p,g])=>{const C=`${p}:${u}`;c[C]=d.length>0?g:null})}),c})}groupDataByCategory(a,e){const t=r=>{if(a===ChartDataModel.DEFAULT_CATEGORY)return 1;const s=r[a];return s==null?"":s instanceof Date?s.getTime():s};return e.reduce((r,s)=>{let i=t(s);const n=r.get(i);return n?n.push(s):r.set(i,[s]),r},new Map)}},RangeChartProxy=class extends StatisticalChartProxy{constructor(a){super(a)}getSeries(a){const[e]=a.categories;return a.fields.map((t,r)=>{var s;return{type:this.standaloneChartType,xKey:e.id,xName:e.name,yName:(s=t.displayName)!=null?s:void 0,yLowName:"Min",yHighName:"Max",yLowKey:`min:${r}`,yHighKey:`max:${r}`}})}getData(a){return this.computeSeriesStatistics(a,e=>({min:Math.min(...e),max:Math.max(...e)}))}},HistogramChartProxy=class extends CartesianChartProxy{constructor(a){super(a)}getSeries(a){const e=a.fields[0];return[{type:this.standaloneChartType,xKey:e.colId,xName:e.displayName,yName:this.chartProxyParams.translate("histogramFrequency"),areaPlot:!1}]}getAxes(a){return[{type:"number",position:"bottom"},{type:"number",position:"left"}]}},BoxPlotChartProxy=class extends StatisticalChartProxy{constructor(a){super(a)}getSeries(a){const[e]=a.categories;return a.fields.map((t,r)=>{var s;return{type:this.standaloneChartType,direction:isHorizontal(this.chartType)?"horizontal":"vertical",xKey:e.id,xName:e.name,yName:(s=t.displayName)!=null?s:void 0,minName:"Min",q1Name:"Q1",medianName:"Median",q3Name:"Q3",maxName:"Max",minKey:`min:${r}`,q1Key:`q1:${r}`,medianKey:`median:${r}`,q3Key:`q3:${r}`,maxKey:`max:${r}`}})}getData(a){return this.computeSeriesStatistics(a,e=>{const t=e.sort((r,s)=>r-s);return{min:t[0],q1:this.quantile(t,.25),median:this.quantile(t,.5),q3:this.quantile(t,.75),max:t[t.length-1]}})}quantile(a,e){const t=(a.length-1)*e,r=Math.floor(t),s=t-r;return a[r+1]!==void 0?a[r]+s*(a[r+1]-a[r]):a[r]}},import_ag_charts_community33=require("ag-charts-community"),CATEGORY_LABEL_KEY="AG-GRID-DEFAULT-LABEL-KEY";function createCategoryHierarchy(a,e){const t=buildNestedHierarchy(a,r,s);return formatCategoryHierarchy(t);function r(n){return e.length}function s(n,o){const l=e[o],c=n[l];return i(c)}function i(n){return n==null?null:String(n)}}function createAutoGroupHierarchy(a,e){const t=buildNestedHierarchy(a,r,s);return formatCategoryHierarchy(t);function r(i){var n,o;return(o=(n=e(i))==null?void 0:n.length)!=null?o:0}function s(i,n){const o=e(i);if(!o)return null;const l=o.length-1-n;return o[l]}}function formatCategoryHierarchy(a){const{depth:e,leaves:t,children:r}=a;if(e===0)return t.map(i=>__spreadValues({[CATEGORY_LABEL_KEY]:null},i));const s=new Array;for(const[i,n]of r.entries())n.depth===0?s.push(...n.leaves.map(o=>__spreadValues({[CATEGORY_LABEL_KEY]:i},o))):s.push({[CATEGORY_LABEL_KEY]:i,children:formatCategoryHierarchy(n)});return s}function buildNestedHierarchy(a,e,t){const r={depth:0,leaves:[],children:new Map};return a.reduce((i,n)=>{const o=e(n);return s(n,o,t,0,i)},r);function s(i,n,o,l,c){if(l===n)return c.leaves.push(i),c;{const h=o(i,l),u=c.children.get(h),d=s(i,n,o,l+1,u||{depth:0,leaves:[],children:new Map});return c.children.set(h,d),c.depth=Math.max(1+d.depth,c.depth),c}}}var import_core51=require("@ag-grid-community/core"),HierarchicalChartProxy=class extends ChartProxy{constructor(a){super(a),this.chartProxyParams=a}update(a){const e=__spreadProps(__spreadValues({},this.getCommonChartOptions(a.updatedOverrides)),{series:this.getSeries(a,CATEGORY_LABEL_KEY),data:this.getData(a)});import_ag_charts_community33.AgCharts.update(this.getChartRef(),e)}getData(a){const{categories:e,data:t,grouping:r}=a;if(r)return createAutoGroupHierarchy(t,getRowAutoGroupLabels);{const s=e.map(({id:i})=>i);return createCategoryHierarchy(t,s)}}};function getRowAutoGroupLabels(a){var e,t;return(t=(e=a[import_core51.GROUP_AUTO_COLUMN_ID])==null?void 0:e.labels)!=null?t:null}var TreemapChartProxy=class extends HierarchicalChartProxy{constructor(a){super(a)}getSeries(a,e){var t,r;const{fields:s}=a,[i,n]=s;return[{type:this.standaloneChartType,labelKey:e,sizeKey:i?.colId,sizeName:(t=i?.displayName)!=null?t:void 0,colorKey:n?.colId,colorName:(r=n?.displayName)!=null?r:void 0}]}getChartThemeDefaults(){return{treemap:{gradientLegend:{gradient:{preferredLength:200}}}}}transformData(a,e,t){return a}crossFilteringReset(){}},SunburstChartProxy=class extends HierarchicalChartProxy{constructor(a){super(a)}getSeries(a,e){var t,r;const{fields:s}=a,[i,n]=s;return[{type:this.standaloneChartType,labelKey:e,sizeKey:i?.colId,sizeName:(t=i?.displayName)!=null?t:void 0,colorKey:n?.colId,colorName:(r=n?.displayName)!=null?r:void 0}]}getChartThemeDefaults(){return{sunburst:{gradientLegend:{gradient:{preferredLength:200}}}}}transformData(a,e,t){return a}crossFilteringReset(){}},import_ag_charts_community34=require("ag-charts-community");function flatMap(a,e){return a.reduce((t,r,s,i)=>t.concat(e(r,s,i)),new Array)}var HEATMAP_CATEGORY_KEY="AG-GRID-DEFAULT-HEATMAP-CATEGORY-KEY",HEATMAP_SERIES_KEY="AG-GRID-DEFAULT-HEATMAP-SERIES-KEY",HEATMAP_VALUE_KEY="AG-GRID-DEFAULT-HEATMAP-VALUE-KEY",HeatmapChartProxy=class extends ChartProxy{constructor(a){super(a)}update(a){const e=HEATMAP_SERIES_KEY,t=HEATMAP_VALUE_KEY,r=HEATMAP_CATEGORY_KEY,s=__spreadProps(__spreadValues({},this.getCommonChartOptions(a.updatedOverrides)),{series:this.getSeries(a,e,t,r),data:this.getData(a,e,t,r)});import_ag_charts_community34.AgCharts.update(this.getChartRef(),s)}getSeries(a,e,t,r){const[s]=a.categories;return[{type:this.standaloneChartType,yKey:r,xKey:e,colorKey:t,yName:s.name,xName:void 0,colorName:void 0}]}getData(a,e,t,r){const[s]=a.categories;return flatMap(a.data,(i,n)=>{const o=i[s.id],l=o==null?"":String(o),c={id:n,value:o,toString:()=>l};return a.fields.map(({colId:h,displayName:u})=>__spreadProps(__spreadValues({},i),{[e]:u,[t]:i[h],[r]:c}))})}getChartThemeDefaults(){return{heatmap:{gradientLegend:{gradient:{preferredLength:200}},series:{tooltip:{renderer:renderHeatmapTooltip}}}}}transformData(a,e,t){return a}crossFilteringReset(){}};function renderHeatmapTooltip(a){const{xKey:e,yKey:t,colorKey:r,yName:s,datum:i}=a;return{title:"",content:[{label:s,value:i[t]},{label:i[e],value:r&&i[r]}].map(({label:l,value:c})=>`<b>${sanitizeHtml(String(l))}:</b> ${sanitizeHtml(String(c))}`).join("<br>")}}function sanitizeHtml(a){const e={"&":"&amp;","<":"&lt;",">":"&gt;"},t=`[${Object.keys(e).join("")}]`,r=new RegExp(t,"g");return a.replace(r,s=>e[s])}var WaterfallChartProxy=class extends CartesianChartProxy{constructor(a){super(a)}getAxes(a){return[{type:this.getXAxisType(a),position:isHorizontal(this.chartType)?"left":"bottom"},{type:"number",position:isHorizontal(this.chartType)?"bottom":"left"}]}getSeries(a){var e;const[t]=a.categories,[r]=a.fields;return[{type:this.standaloneChartType,direction:isHorizontal(this.chartType)?"horizontal":"vertical",xKey:t.id,xName:t.name,yKey:r.colId,yName:(e=r.displayName)!=null?e:void 0}]}},import_core52=require("@ag-grid-community/core"),import_ag_charts_community35=require("ag-charts-community"),CARTESIAN_AXIS_TYPES=["number","category","time","grouped-category"],POLAR_AXIS_TYPES=["angle-category","angle-number","radius-category","radius-number"],VALID_AXIS_TYPES=[...CARTESIAN_AXIS_TYPES,...POLAR_AXIS_TYPES],ChartOptionsService=class ke extends import_core52.BeanStub{constructor(e){super(),this.chartController=e}getChartThemeOverridesProxy(){return{getValue:e=>this.getChartOption(e),setValue:(e,t)=>this.setChartThemeOverrides([{expression:e,value:t}]),setValues:e=>this.setChartThemeOverrides(e)}}getAxisThemeOverridesProxy(){return{getValue:e=>this.getAxisProperty(e),setValue:(e,t)=>this.setAxisThemeOverrides([{expression:e,value:t}]),setValues:e=>this.setAxisThemeOverrides(e)}}getCartesianAxisOptionsProxy(e){return{getValue:t=>this.getCartesianAxisProperty(e,t),setValue:(t,r)=>this.setCartesianAxisOptions(e,[{expression:t,value:r}]),setValues:t=>this.setCartesianAxisOptions(e,t)}}getCartesianAxisThemeOverridesProxy(e){return{getValue:t=>this.getCartesianAxisProperty(e,t),setValue:(t,r)=>this.setCartesianAxisThemeOverrides(e,[{expression:t,value:r}]),setValues:t=>this.setCartesianAxisThemeOverrides(e,t)}}getCartesianAxisAppliedThemeOverridesProxy(e){return{getValue:t=>this.getCartesianAxisThemeOverride(e,t==="*"?null:t),setValue:(t,r)=>this.setCartesianAxisThemeOverrides(e,[{expression:t==="*"?null:t,value:r}]),setValues:t=>this.setCartesianAxisThemeOverrides(e,t)}}getSeriesOptionsProxy(e){return{getValue:(t,r)=>this.getSeriesOption(e(),t,r),setValue:(t,r)=>this.setSeriesOptions(e(),[{expression:t,value:r}]),setValues:t=>this.setSeriesOptions(e(),t)}}getPersistedChartThemeOverrides(e,t,r,s){const i=this.getRetainedChartThemeOverrideKeys(r,s),n=this.getRetainedChartAxisThemeOverrideKeys(null,r,s),o=this.createChartOptions();for(const l of i){const c=this.retrieveChartOptionsThemeOverride(e,r,l);c!==void 0&&this.assignChartOptionsThemeOverride(o,s,l,c)}if(t)for(const{expression:l,targetAxisTypes:c}of n)for(const h of t.map(u=>u.type)){const u=this.retrieveChartOptionsThemeOverride(e,r,["axes",h,l].join("."));if(u!==void 0)for(const d of c)this.assignChartOptionsThemeOverride(o,s,["axes",d,l].join("."),u)}return o.theme.overrides}getRetainedChartThemeOverrideKeys(e,t){const r=["animation"],s=["zoom","navigator"],i=((n,o)=>{const l=new Array;return isCartesian(n)&&isCartesian(o)&&l.push(...s),l})(e,t);return[...r,...i]}getRetainedChartAxisThemeOverrideKeys(e,t,r){return isCartesian(t)&&isCartesian(r)?this.getRetainedCartesianAxisThemeOverrideKeys(e).map(i=>({expression:i,targetAxisTypes:CARTESIAN_AXIS_TYPES})):[]}getRetainedCartesianAxisThemeOverrideKeys(e){const t=e==="xAxis"?["",".top",".bottom"]:e==="yAxis"?["",".left",".right"]:["",".left",".right",".top",".bottom"],r=["crosshair"],s=new Array;for(const i of r)for(const n of t)s.push(`${n}${i}`);return s}getChartOption(e){return get(this.getChart(),e,void 0)}setChartThemeOverrides(e){const t=this.getChartType(),r=this.createChartOptions();for(const{expression:s,value:i}of e)this.assignChartOptionsThemeOverride(r,t,s,i);this.applyChartOptions(r)}applyChartOptions(e,t){if(Object.keys(e).length===0)return;this.updateChart(e),!t?.silent&&this.raiseChartOptionsChangedEvent()}awaitChartOptionUpdate(e){this.chartController.getChartProxy().getChart().waitForUpdate().then(()=>e()).catch(r=>console.error("AG Grid - chart update failed",r))}getAxisProperty(e){var t;return get((t=this.getChart().axes)==null?void 0:t[0],e,void 0)}setAxisThemeOverrides(e){var t;const r=this.getChart(),s=this.getChartType();let i=this.createChartOptions();for(const{expression:n,value:o}of e){const l=(t=r.axes)==null?void 0:t.filter(c=>{const h=n.split(".");let u=c;for(const d of h){if(!(d in u))return!1;u=u[d]}return!0});if(l)for(const c of l)this.isValidAxisType(c)&&this.assignChartAxisThemeOverride(i,s,c.type,null,n,o)}this.applyChartOptions(i)}getCartesianAxisProperty(e,t){const r=this.getChartAxes(),s=this.getCartesianAxis(r,e);return get(s,t,void 0)}getCartesianAxisThemeOverride(e,t){const r=this.getChartAxes(),s=this.getCartesianAxis(r,e);if(!s||!this.isValidAxisType(s))return;const i=this.getChartType(),n=this.getChart().getOptions();return this.retrieveChartAxisThemeOverride(n,i,s.type,e==="yAxis"?["left","right"]:["bottom","top"],t)}setCartesianAxisThemeOverrides(e,t){const r=this.getChartAxes(),s=this.getCartesianAxis(r,e);if(!s||!this.isValidAxisType(s))return;const i=this.getChartType();let n=this.createChartOptions();for(const{expression:o,value:l}of t)this.assignChartAxisThemeOverride(n,i,s.type,e==="yAxis"?["left","right"]:["bottom","top"],o,l);this.applyChartOptions(n)}setCartesianAxisOptions(e,t){const r=this.getChart().getOptions(),s="axes"in r?r.axes:void 0;if(!r||!s)return;const i=this.getChartAxes(),n=this.getCartesianAxis(i,e);if(!n)return;let o=this.createChartOptions();o.axes=s;const l=t.find(({expression:h})=>h==="type");if(l){const h=l.value,u=this.getRetainedCartesianAxisThemeOverrideKeys(e);for(const d of u){const p=this.getChartType(),g=this.retrieveChartOptionsThemeOverride(r,p,["axes",n.type,d].join("."));g!==void 0&&this.assignChartOptionsThemeOverride(o,p,["axes",h,d].join("."),g)}}const c=i.indexOf(n);for(const{expression:h,value:u}of t)this.assignChartOption(o,`axes.${c}.${h}`,u);this.applyChartOptions(o)}getCartesianAxis(e,t){if(!(e.length<2))switch(t){case"xAxis":return e[0].direction==="x"?e[0]:e[1];case"yAxis":return e[1].direction==="y"?e[1]:e[0]}}getSeriesOption(e,t,r){const s=this.getChart().series.find(i=>ke.isMatchingSeries(e,i));return get(r?s:s?.properties.toJson(),t,void 0)}setSeriesOptions(e,t){let r=this.createChartOptions();for(const{expression:s,value:i}of t)this.assignChartOptionsSeriesThemeOverride(r,e,`series.${s}`,i);this.applyChartOptions(r)}getPairedMode(){return this.chartController.getChartProxy().isPaired()}setPairedMode(e){this.chartController.getChartProxy().setPaired(e)}getChartAxes(){var e;return(e=this.getChart().axes)!=null?e:[]}retrieveChartAxisThemeOverride(e,t,r,s,i){if(s)for(const n of s){const o=this.retrieveChartOptionsThemeOverride(e,t,["axes",r,n,...i?[i]:[]].join("."));if(o!==void 0)return o}else return this.retrieveChartOptionsThemeOverride(e,t,["axes",r,...i?[i]:[]].join("."))}assignChartAxisThemeOverride(e,t,r,s,i,n){if(s)for(const o of s)this.assignChartOptionsThemeOverride(e,t,["axes",r,o,...i?[i]:[]].join("."),n);else this.assignChartOptionsThemeOverride(e,t,["axes",r,...i?[i]:[]].join("."),n)}isValidAxisType(e){return VALID_AXIS_TYPES.includes(e.type)}getChartType(){return this.chartController.getChartType()}getChart(){return this.chartController.getChartProxy().getChart()}updateChart(e){const t=this.chartController.getChartProxy().getChartRef();t.skipAnimations(),import_ag_charts_community35.AgCharts.updateDelta(t,e)}createChartOptions(){return{theme:{overrides:{}}}}retrieveChartOptionsThemeOverride(e,t,r){const s=this.getChartThemeOverridesSeriesTypeKeys(t);for(const i of s){const n=this.retrieveChartOptionsSeriesThemeOverride(e,i,r);if(n!==void 0)return n}}assignChartOptionsThemeOverride(e,t,r,s){const i=this.getChartThemeOverridesSeriesTypeKeys(t);for(const n of i)this.assignChartOptionsSeriesThemeOverride(e,n,r,s)}retrieveChartOptionsSeriesThemeOverride(e,t,r){return this.retrieveChartOption(e,["theme","overrides",t,...r?[r]:[]].join("."))}assignChartOptionsSeriesThemeOverride(e,t,r,s){this.assignChartOption(e,["theme","overrides",t,...r?[r]:[]].join("."),s)}getChartThemeOverridesSeriesTypeKeys(e){const t=this.chartController.getChartSeriesTypes(e);return this.chartController.isComboChart()&&t.push("common"),t}retrieveChartOption(e,t){return get(e,t,void 0)}assignChartOption(e,t,r){set(e,t,r)}raiseChartOptionsChangedEvent(){const e=this.chartController.getChartModel(),t={type:import_core52.Events.EVENT_CHART_OPTIONS_CHANGED,chartId:e.chartId,chartType:e.chartType,chartThemeName:this.chartController.getChartThemeName(),chartOptions:e.chartOptions};this.eventService.dispatchEvent(t)}static isMatchingSeries(e,t){return VALID_SERIES_TYPES.includes(e)&&t.type===e}destroy(){super.destroy()}},ComboChartProxy=class extends CartesianChartProxy{constructor(a){super(a)}getAxes(a){const e=a?a.fields:[],t=new Map(e.map(n=>[n.colId,n])),{primaryYKeys:r,secondaryYKeys:s}=this.getYKeys(e,a.seriesChartTypes),i=[{type:this.getXAxisType(a),position:"bottom"}];return r.length>0&&i.push({type:"number",keys:r,position:"left"}),s.length>0&&s.forEach(n=>{const o=t.get(n);if(!(o&&o.colId===n))return;const c={type:"number",keys:[n],position:"right"};i.push(c)}),i}getSeries(a){const{fields:e,seriesChartTypes:t}=a,[r]=a.categories;return e.map(s=>{const i=t.find(n=>n.colId===s.colId);if(i){const n=i.chartType,l=["groupedColumn","groupedBar"].includes(n)?{grouped:!0}:{};return __spreadValues({type:getSeriesType(n),xKey:r.id,yKey:s.colId,yName:s.displayName,stacked:["stackedArea","stackedColumn"].includes(n)},l)}})}getYKeys(a,e){const t=[],r=[];return a.forEach(s=>{const i=s.colId,n=e.find(o=>o.colId===i);n&&(n.secondaryAxis?r.push(i):t.push(i))}),{primaryYKeys:t,secondaryYKeys:r}}},import_core53=require("@ag-grid-community/core"),CHART_TOOL_PANEL_ALLOW_LIST=["chartSettings","chartData","chartFormat"],CHART_TOOLBAR_ALLOW_LIST=["chartUnlink","chartLink","chartDownload"],CHART_TOOL_PANEL_MENU_OPTIONS={settings:"chartSettings",data:"chartData",format:"chartFormat"},ChartMenuService=class extends import_core53.BeanStub{isLegacyFormat(){var a;return(a=this.gridOptionsService.get("legacyChartsMenu"))!=null?a:!this.chartService.isEnterprise()}downloadChart(a,e,t,r){a.chartController.getChartProxy().downloadChart(e,t,r)}toggleLinked(a){a.chartController.detachChartRange()}openAdvancedSettings(a,e){this.advancedSettingsMenuFactory.showMenu(a,e)}hideAdvancedSettings(){this.advancedSettingsMenuFactory.hideMenu()}getToolbarOptionsAndPanels(a){var e,t,r;const s=this.isLegacyFormat(),i=!!this.gridOptionsService.get("chartToolPanelsDef")||!s;let n,o,l;if(i){const c=s?[a.isChartLinked()?"chartLink":"chartUnlink","chartDownload"]:["chartMenu"],h=this.gridOptionsService.getCallback("getChartToolbarItems");l=h?h({defaultItems:c}).filter(g=>{if(!(s?CHART_TOOLBAR_ALLOW_LIST:[...CHART_TOOLBAR_ALLOW_LIST,"chartMenu"]).includes(g)){let C;return CHART_TOOL_PANEL_ALLOW_LIST.includes(g)?C=`'${g}' is a Chart Tool Panel option and will be ignored since 'chartToolPanelsDef' is used. Please use 'chartToolPanelsDef.panels' grid option instead`:g==="chartMenu"?C="'chartMenu' is only allowed as a Chart Toolbar Option when 'legacyChartsMenu' is set to false":C=`'${g}' is not a valid Chart Toolbar Option`,import_core53._.warnOnce(C),!1}return!0}):c;const d=(t=(e=this.gridOptionsService.get("chartToolPanelsDef"))==null?void 0:e.panels)==null?void 0:t.map(g=>{const C=CHART_TOOL_PANEL_MENU_OPTIONS[g];return C||import_core53._.warnOnce(`Invalid panel in chartToolPanelsDef.panels: '${g}'`),C}).filter(g=>!!g);n=d||Object.values(CHART_TOOL_PANEL_MENU_OPTIONS),a.isPivotChart()&&(n=n.filter(g=>g!=="chartData"));const p=(r=this.gridOptionsService.get("chartToolPanelsDef"))==null?void 0:r.defaultToolPanel;o=p&&CHART_TOOL_PANEL_MENU_OPTIONS[p]||n[0],s&&(l=n.length>0?[n[0],...l]:l)}else{let c=["chartSettings","chartData","chartFormat",a.isChartLinked()?"chartLink":"chartUnlink","chartDownload"];const h=this.gridOptionsService.getCallback("getChartToolbarItems");if(h){const d=this.gridOptionsService.get("suppressChartToolPanelsButton");c=h({defaultItems:d?c:CHART_TOOLBAR_ALLOW_LIST}).filter(g=>{if(!CHART_TOOL_PANEL_ALLOW_LIST.includes(g)&&!CHART_TOOLBAR_ALLOW_LIST.includes(g))return import_core53._.warnOnce(`'${g}' is not a valid Chart Toolbar Option`),!1;if(!d&&CHART_TOOL_PANEL_ALLOW_LIST.includes(g)){const C=`'${g}' is a Chart Tool Panel option and will be ignored. Please use 'chartToolPanelsDef.panels' grid option instead`;return import_core53._.warnOnce(C),!1}return!0}),d||(c=c.concat(CHART_TOOL_PANEL_ALLOW_LIST))}a.isPivotChart()&&(c=c.filter(d=>d!=="chartData"));const u=["chartUnlink","chartLink","chartDownload"];n=c.filter(d=>u.indexOf(d)===-1),o=n[0],l=c.filter(d=>u.indexOf(d)!==-1||n.length&&d===n[0])}return{panels:n,defaultPanel:o,chartToolbarOptions:l}}doesChartToolbarExist(a){const{chartToolbarOptions:e}=this.getToolbarOptionsAndPanels(a);return["chartMenu",...CHART_TOOLBAR_ALLOW_LIST].some(t=>e.includes(t))}doChartToolPanelsExist(a){const{panels:e}=this.getToolbarOptionsAndPanels(a);return e.length>0}};__decorateClass([(0,import_core53.Autowired)("chartService")],ChartMenuService.prototype,"chartService",2),__decorateClass([(0,import_core53.Autowired)("advancedSettingsMenuFactory")],ChartMenuService.prototype,"advancedSettingsMenuFactory",2),ChartMenuService=__decorateClass([(0,import_core53.Bean)("chartMenuService")],ChartMenuService);var _GridChartComp=class z extends import_core54.Component{constructor(e){super(z.TEMPLATE),this.params=e}init(){const e={chartId:this.params.chartId,pivotChart:this.params.pivotChart,chartType:getCanonicalChartType(this.params.chartType),chartThemeName:this.getThemeName(),switchCategorySeries:this.params.switchCategorySeries,aggFunc:this.params.aggFunc,cellRange:this.params.cellRange,suppressChartRanges:this.params.suppressChartRanges,unlinkChart:this.params.unlinkChart,crossFiltering:this.params.crossFiltering,seriesChartTypes:this.params.seriesChartTypes},t=this.gridOptionsService.get("enableRtl");this.addCssClass(t?"ag-rtl":"ag-ltr");const r=this.createBean(new ChartDataModel(e));this.chartController=this.createManagedBean(new ChartController(r)),this.chartOptionsService=this.createManagedBean(new ChartOptionsService(this.chartController)),this.validateCustomThemes(),this.createChart(),this.params.insideDialog&&this.addDialog(),this.addMenu(),this.addTitleEditComp(),this.addManagedListener(this.getGui(),"focusin",this.setActiveChartCellRange.bind(this)),this.addManagedListener(this.chartController,ChartController.EVENT_CHART_MODEL_UPDATE,this.update.bind(this)),this.addManagedPropertyListeners(["chartThemeOverrides","chartThemes"],this.reactivePropertyUpdate.bind(this)),this.update(),this.raiseChartCreatedEvent()}createChart(){let e;this.chartProxy&&(e=this.chartProxy.destroy({keepChartInstance:!0}));const t=(n,o)=>{const l=this.params.crossFilteringContext;l.lastSelectedChartId=o?"":this.chartController.getChartId(),o&&this.params.crossFilteringResetCallback(),this.crossFilterService.filter(n,o)},r=this.chartController.getChartType(),s={chartType:r,chartInstance:e,getChartThemeName:this.getChartThemeName.bind(this),getChartThemes:this.getChartThemes.bind(this),customChartThemes:this.gridOptionsService.get("customChartThemes"),getGridOptionsChartThemeOverrides:()=>this.getGridOptionsChartThemeOverrides(),getExtraPaddingDirections:()=>{var n,o;return(o=(n=this.chartMenu)==null?void 0:n.getExtraPaddingDirections())!=null?o:[]},apiChartThemeOverrides:this.params.chartThemeOverrides,crossFiltering:this.params.crossFiltering,crossFilterCallback:t,parentElement:this.eChart,grouping:this.chartController.isGrouping(),chartThemeToRestore:this.params.chartThemeName,chartOptionsToRestore:this.params.chartOptionsToRestore,chartPaletteToRestore:this.params.chartPaletteToRestore,seriesChartTypes:this.chartController.getSeriesChartTypes(),translate:n=>this.chartTranslationService.translate(n)};if(this.params.chartOptionsToRestore=void 0,this.chartType=r,this.chartProxy=z.createChartProxy(s),!this.chartProxy){console.warn("AG Grid: invalid chart type supplied: ",s.chartType);return}const i=this.eChart.querySelector("canvas");i&&i.classList.add("ag-charts-canvas"),this.chartController.setChartProxy(this.chartProxy),this.createMenuContext(),this.titleEdit&&this.titleEdit.refreshTitle(this.chartMenuContext)}createMenuContext(){if(this.chartMenuContext)return;const e=this.createManagedBean(new ChartMenuParamsFactory(this.chartOptionsService.getChartThemeOverridesProxy())),t=this.createManagedBean(new ChartMenuParamsFactory(this.chartOptionsService.getAxisThemeOverridesProxy()));this.chartMenuContext={chartController:this.chartController,chartOptionsService:this.chartOptionsService,chartMenuParamsFactory:e,chartAxisMenuParamsFactory:t}}getChartThemeName(){return this.chartController.getChartThemeName()}getChartThemes(){return this.chartController.getThemeNames()}getGridOptionsChartThemeOverrides(){return this.gridOptionsService.get("chartThemeOverrides")}static createChartProxy(e){switch(e.chartType){case"column":case"bar":case"groupedColumn":case"stackedColumn":case"normalizedColumn":case"groupedBar":case"stackedBar":case"normalizedBar":return new BarChartProxy(e);case"pie":case"donut":case"doughnut":return new PieChartProxy(e);case"area":case"stackedArea":case"normalizedArea":return new AreaChartProxy(e);case"line":return new LineChartProxy(e);case"scatter":case"bubble":return new ScatterChartProxy(e);case"histogram":return new HistogramChartProxy(e);case"radarLine":case"radarArea":case"nightingale":case"radialColumn":case"radialBar":return new PolarChartProxy(e);case"rangeBar":return new RangeChartProxy(e);case"rangeArea":return new RangeChartProxy(e);case"boxPlot":return new BoxPlotChartProxy(e);case"treemap":return new TreemapChartProxy(e);case"sunburst":return new SunburstChartProxy(e);case"heatmap":return new HeatmapChartProxy(e);case"waterfall":return new WaterfallChartProxy(e);case"columnLineCombo":case"areaColumnCombo":case"customCombo":return new ComboChartProxy(e);default:throw`AG Grid: Unable to create chart as an invalid chartType = '${e.chartType}' was supplied.`}}addDialog(){const e=this.chartTranslationService.translate(this.params.pivotChart?"pivotChartTitle":"rangeChartTitle"),{width:t,height:r}=this.getBestDialogSize();this.chartDialog=new import_core54.AgDialog({resizable:!0,movable:!0,maximizable:!0,title:e,width:t,height:r,component:this,centered:!0,closable:!0}),this.getContext().createBean(this.chartDialog),this.chartDialog.addEventListener(import_core54.AgDialog.EVENT_DESTROYED,()=>{this.destroy(),this.chartMenuService.hideAdvancedSettings()})}getBestDialogSize(){const e=this.popupService.getPopupParent(),t=import_core54._.getAbsoluteWidth(e)*.75,r=import_core54._.getAbsoluteHeight(e)*.75,s=.553,i=this.chartProxy.getChart();let n=this.params.insideDialog?850:i.width,o=this.params.insideDialog?470:i.height;return(n>t||o>r)&&(n=Math.min(n,t),o=Math.round(n*s),o>r&&(o=r,n=Math.min(n,Math.round(o/s)))),{width:n,height:o}}addMenu(){this.params.crossFiltering||(this.chartMenu=this.createBean(new ChartMenu(this.eChartContainer,this.eMenuContainer,this.chartMenuContext)),this.eChartContainer.appendChild(this.chartMenu.getGui()))}addTitleEditComp(){this.titleEdit=this.createBean(new TitleEdit(this.chartMenu)),this.eTitleEditContainer.appendChild(this.titleEdit.getGui()),this.chartProxy&&this.titleEdit.refreshTitle(this.chartMenuContext)}update(e){if(e?.chartId&&!this.chartController.update(e))return;const t=this.chartTypeChanged(e),r=t||this.chartEmpty?(i=>{const n=this.chartType,o=i,l=this.chartProxy.getChart(),c=l?.getOptions(),h=l?.axes;return this.chartOptionsService.getPersistedChartThemeOverrides(c,h,n,o??n)})(t):void 0;t&&this.createChart();const s=r&&e?.chartThemeOverrides?deepMerge(r,e.chartThemeOverrides):r||e?.chartThemeOverrides;this.updateChart(s),e?.chartId&&this.chartProxy.getChart().waitForUpdate().then(()=>{this.chartController.raiseChartApiUpdateEvent()})}updateChart(e){const{chartProxy:t}=this,s=this.chartController.getSelectedValueColState().map(l=>({colId:l.colId,displayName:l.displayName})),i=this.chartController.getChartData(),n=this.handleEmptyChart(i,s);if(this.chartEmpty=n,n){e&&this.chartController.updateThemeOverrides(e);return}let o=this.chartController.getChartUpdateParams(e);t.update(o),this.chartProxy.getChart().waitForUpdate().then(()=>{this.chartController.raiseChartUpdatedEvent()}),this.titleEdit.refreshTitle(this.chartMenuContext)}chartTypeChanged(e){const[t,r]=[this.chartController.getChartType(),e?.chartType],s=r?getCanonicalChartType(r):void 0;return this.chartType!==t?s??t:s&&t!==s?s:null}getChartModel(){return this.chartController.getChartModel()}getChartImageDataURL(e){return this.chartProxy.getChartImageDataURL(e)}handleEmptyChart(e,t){const r=this.chartController.isPivotChart()&&!this.chartController.isPivotMode(),s=this.chartController.getChartType();let i=1;this.chartController.isActiveXYChart()?i=s==="bubble"?3:2:isHierarchical(s)&&(i=0);const n=t.length<i||e.length===0;if(this.eChart){const o=r||n;import_core54._.setDisplayed(this.eChart,!o),import_core54._.setDisplayed(this.eEmpty,o)}return r?(this.eEmpty.innerText=this.chartTranslationService.translate("pivotChartRequiresPivotMode"),!0):n?(this.eEmpty.innerText=this.chartTranslationService.translate("noDataToChart"),!0):!1}downloadChart(e,t,r){this.chartProxy.downloadChart(e,t,r)}openChartToolPanel(e){const t=e&&CHART_TOOL_PANEL_MENU_OPTIONS[e];this.chartMenu.showMenu({panel:t})}closeChartToolPanel(){this.chartMenu.hideMenu()}getChartId(){return this.chartController.getChartId()}getUnderlyingChart(){return this.chartProxy.getChartRef()}crossFilteringReset(){this.chartProxy.crossFilteringReset()}setActiveChartCellRange(e){this.getGui().contains(e.relatedTarget)||(this.chartController.setChartRange(!0),this.focusService.clearFocusedCell())}getThemeName(){const e=this.gridOptionsService.get("chartThemes")||DEFAULT_THEMES;if(e.length===0)throw new Error("Cannot create chart: no chart themes available.");const{chartThemeName:t}=this.params;return import_core54._.includes(e,t)?t:e[0]}getAllKeysInObjects(e){const t={};return e.filter(r=>r!=null).forEach(r=>{Object.keys(r).forEach(s=>t[s]=null)}),Object.keys(t)}validateCustomThemes(){const e=this.getChartThemes(),t=this.gridOptionsService.get("customChartThemes");t&&this.getAllKeysInObjects([t]).forEach(r=>{import_core54._.includes(e,r)||console.warn("AG Grid: a custom chart theme with the name '"+r+"' has been supplied but not added to the 'chartThemes' list")})}reactivePropertyUpdate(){this.chartController.setChartThemeName(this.getThemeName(),!0);const e=this.getChartId(),t=this.chartController.isCrossFilterChart()?"crossFilter":this.getChartModel().modelType,r=this.gridOptionsService.get("chartThemeOverrides")||{};this.update({type:`${t}ChartUpdate`,chartId:e,chartThemeOverrides:r})}raiseChartCreatedEvent(){const e={type:import_core54.Events.EVENT_CHART_CREATED,chartId:this.chartController.getChartId()};this.chartProxy.getChart().waitForUpdate().then(()=>{this.eventService.dispatchEvent(e)})}raiseChartDestroyedEvent(){const e={type:import_core54.Events.EVENT_CHART_DESTROYED,chartId:this.chartController.getChartId()};this.eventService.dispatchEvent(e)}destroy(){var e;super.destroy(),this.chartProxy&&this.chartProxy.destroy(),this.destroyBean(this.chartMenu),this.destroyBean(this.titleEdit),this.chartDialog&&this.chartDialog.isAlive()&&this.destroyBean(this.chartDialog),(e=this.onDestroyColorSchemeChangeListener)==null||e.call(this);const t=this.getGui();import_core54._.clearElement(t),import_core54._.removeFromParent(t),this.raiseChartDestroyedEvent()}};_GridChartComp.TEMPLATE=`<div class="ag-chart" tabindex="-1">
            <div ref="eChartContainer" tabindex="-1" class="ag-chart-components-wrapper">
                <div ref="eChart" class="ag-chart-canvas-wrapper"></div>
                <div ref="eEmpty" class="ag-chart-empty-text ag-unselectable"></div>
            </div>
            <div ref="eTitleEditContainer"></div>
            <div ref="eMenuContainer" class="ag-chart-docked-container" style="min-width: 0px;"></div>
        </div>`,__decorateClass([(0,import_core54.RefSelector)("eChart")],_GridChartComp.prototype,"eChart",2),__decorateClass([(0,import_core54.RefSelector)("eChartContainer")],_GridChartComp.prototype,"eChartContainer",2),__decorateClass([(0,import_core54.RefSelector)("eMenuContainer")],_GridChartComp.prototype,"eMenuContainer",2),__decorateClass([(0,import_core54.RefSelector)("eEmpty")],_GridChartComp.prototype,"eEmpty",2),__decorateClass([(0,import_core54.RefSelector)("eTitleEditContainer")],_GridChartComp.prototype,"eTitleEditContainer",2),__decorateClass([(0,import_core54.Autowired)("chartCrossFilterService")],_GridChartComp.prototype,"crossFilterService",2),__decorateClass([(0,import_core54.Autowired)("chartTranslationService")],_GridChartComp.prototype,"chartTranslationService",2),__decorateClass([(0,import_core54.Autowired)("chartMenuService")],_GridChartComp.prototype,"chartMenuService",2),__decorateClass([(0,import_core54.Autowired)("focusService")],_GridChartComp.prototype,"focusService",2),__decorateClass([(0,import_core54.Autowired)("popupService")],_GridChartComp.prototype,"popupService",2),__decorateClass([import_core54.PostConstruct],_GridChartComp.prototype,"init",1);var GridChartComp=_GridChartComp,VERSION="31.2.0",DEBUG=!1;function upgradeChartModel(a){const e=a.version;return a.version==null&&(a.version=heuristicVersionDetection(a)),a=migrateIfBefore("23.0.0",a,migrateV23),a=migrateIfBefore("24.0.0",a,migrateV24),a=migrateIfBefore("25.1.0",a,migrateV25_1),a=migrateIfBefore("26.0.0",a,migrateV26),a=migrateIfBefore("26.1.0",a,migrateV26_1),a=migrateIfBefore("26.2.0",a,migrateV26_2),a=migrateIfBefore("28.0.0",a,migrateV28),a=migrateIfBefore("28.2.0",a,migrateV28_2),a=migrateIfBefore("29.0.0",a,migrateV29),a=migrateIfBefore("29.1.0",a,migrateV29_1),a=migrateIfBefore("29.2.0",a,migrateV29_2),a=migrateIfBefore("30.0.0",a,migrateV30),a=migrateIfBefore("31.0.0",a,migrateV31),a=cleanup(a),a=migrateIfBefore(VERSION,a,t=>t),DEBUG&&e!==a.version&&console.log("AG Grid: ChartModel migration complete",{model:a}),a}function migrateV23(a){return a=jsonRename("chartOptions.legend.item.marker.type","shape",a),a=jsonRename("chartOptions.seriesDefaults.marker.type","shape",a),a=jsonRename("chartOptions.legend.padding","spacing",a),a}function migrateV24(a){var e;a=jsonDelete("chartOptions.seriesDefaults.marker.minSize",a);const t=a,{chartType:r,chartPalette:s,chartOptions:i}=t,n=i,{xAxis:o,yAxis:l}=n,c=__objRest(n,["xAxis","yAxis"]),h=__objRest(t,["chartType","chartPalette","chartOptions"]),u=getLegacyAxisType(r),d=u?.map((g,C)=>__spreadValues({type:g},C===0?o:l));return __spreadValues({chartType:r,chartThemeName:(e={borneo:"ag-default",material:"ag-material",bright:"ag-vivid"}[s])!=null?e:"ag-default",chartOptions:__spreadProps(__spreadValues({},c),{axes:d,xAxis:o,yAxis:l})},h)}function migrateV25_1(a){return a=jsonRename("chartOptions.seriesDefaults.label.minRequiredAngle","minAngle",a),a}function migrateV26(a){return a=jsonMutate("chartOptions.seriesDefaults.highlightStyle",a,t=>{var r=t,{dimOpacity:s}=r,i=__objRest(r,["dimOpacity"]);return __spreadValues(__spreadValues({},i),s!=null?{series:{dimOpacity:s}}:{})}),a=jsonDelete("chart",a),a=jsonDelete("chartOptions.seriesDefaults.tooltipClass",a),a=jsonDelete("chartOptions.seriesDefaults.tooltipTracking",a),a=jsonDeleteDefault("chartOptions.axes[].label.rotation",0,a),a=jsonDeleteDefault("chartOptions.axes[].label.rotation",335,a),a}function migrateV26_1(a){const e=t=>{var r=t,{item:s,series:i}=r,n=__objRest(r,["item","series"]);return __spreadValues({item:__spreadValues(__spreadValues({},n),s)},i?{series:i}:{})};return a=jsonMutate("chartOptions.seriesDefaults.highlightStyle",a,e),a=jsonMutate("chartOptions.series[].highlightStyle",a,e),a}function migrateV26_2(a){a=jsonMove("chartOptions.seriesDefaults.fill.opacity","chartOptions.seriesDefaults.fillOpacity",a),a=jsonMove("chartOptions.seriesDefaults.stroke.opacity","chartOptions.seriesDefaults.strokeOpacity",a),a=jsonMove("chartOptions.seriesDefaults.stroke.width","chartOptions.seriesDefaults.strokeWidth",a),a=jsonDelete("chartOptions.seriesDefaults.fill",a),a=jsonDelete("chartOptions.seriesDefaults.stroke",a),a=jsonDelete("chartOptions.seriesDefaults.callout.colors",a),a=jsonDelete("chartOptions.xAxis",a),a=jsonDelete("chartOptions.yAxis",a);const e=a,{chartType:t,chartOptions:r}=e,s=r,{axes:i,series:n,seriesDefaults:o}=s,l=__objRest(s,["axes","series","seriesDefaults"]),c=__objRest(e,["chartType","chartOptions"]),h=getCanonicalChartType(t),u=getSeriesType(h),d=[u],p={};if(!isPieChartSeries(u)){const C={top:{},bottom:{},left:{},right:{}},m=i.map(v=>{var f=v,{type:y}=f,S=__objRest(f,["type"]);return{[y]:__spreadValues(__spreadValues({},C),S)}}).reduce(merge,{});ALL_AXIS_TYPES.filter(v=>m[v]==null).forEach(v=>{m[v]=__spreadValues({},C)}),p.axes=m}const g=d.map(C=>({[C]:__spreadValues(__spreadProps(__spreadValues({},p),{series:o}),l)})).reduce(merge,{});return a=__spreadProps(__spreadValues({},c),{chartType:h,chartOptions:g}),a}function migrateV28(a){return a=jsonDelete("chartOptions.*.title.padding",a),a=jsonDelete("chartOptions.*.subtitle.padding",a),a=jsonDelete("chartOptions.*.axes.*.title.padding",a),a=jsonBackfill("chartOptions.*.axes.*.title.enabled",!1,a),a}function migrateV28_2(a){return a=jsonRename("chartOptions.pie.series.callout","calloutLine",a),a=jsonRename("chartOptions.pie.series.label","calloutLabel",a),a=jsonRename("chartOptions.pie.series.labelKey","sectorLabelKey",a),a=jsonRename("chartOptions.pie.series.labelName","sectorLabelName",a),a=jsonRename("chartOptions.donut.series.callout","calloutLine",a),a=jsonRename("chartOptions.donut.series.label","calloutLabel",a),a=jsonRename("chartOptions.donut.series.labelKey","sectorLabelKey",a),a=jsonRename("chartOptions.donut.series.labelName","sectorLabelName",a),a}function migrateV29(a){return a=jsonMoveIfMissing("chartOptions.scatter.series.fill","chartOptions.scatter.series.marker.fill",a),a=jsonMoveIfMissing("chartOptions.scatter.series.fillOpacity","chartOptions.scatter.series.marker.fillOpacity",a),a=jsonMoveIfMissing("chartOptions.scatter.series.stroke","chartOptions.scatter.series.marker.stroke",a),a=jsonMoveIfMissing("chartOptions.scatter.series.strokeOpacity","chartOptions.scatter.series.marker.strokeOpacity",a),a=jsonMoveIfMissing("chartOptions.scatter.series.strokeWidth","chartOptions.scatter.series.marker.strokeWidth",a),a=jsonMove("chartOptions.scatter.series.paired","chartOptions.scatter.paired",a),a}function migrateV29_1(a){return a=jsonDelete("chartOptions.axes[].tick.count",a),a}function migrateV29_2(a){return a=jsonMutate("chartOptions.*.tooltip",a,t=>{var r=t,{tracking:s}=r,i=__objRest(r,["tracking"]),n,o,l,c;const h=__spreadValues({},i);return s===!1?((n=h.position)!=null||(h.position={type:"pointer"}),(o=h.range)!=null||(h.range="nearest")):s===!0&&((l=h.position)!=null||(h.position={type:"node"}),(c=h.range)!=null||(h.range="nearest")),h}),a}function migrateV30(a){return a=jsonRename("chartOptions.pie.series.labelKey","sectorLabelKey",a),a=jsonRename("chartOptions.pie.series.labelName","sectorLabelName",a),a=migrateV29_1(a),a=migrateV29_2(a),a=jsonDelete("chartOptions.*.series.flipXY",a),a=jsonAdd("chartOptions.common.legend.enabled",!0,a),a=jsonBackfill("chartOptions.common.legend.position","right",a),a}function migrateV31(a){const e={"ag-pastel":"ag-sheets","ag-solar":"ag-polychroma"},t=jsonRename("chartOptions.column","bar",a),r=e[t.chartThemeName]||t.chartThemeName;return __spreadProps(__spreadValues({},t),{chartThemeName:r})}function cleanup(a){return a=jsonDelete("chartOptions.*.width",a),a=jsonDelete("chartOptions.*.height",a),a=jsonBackfill("chartOptions.*.axes.category.label.autoRotate",!0,a),a}function heuristicVersionDetection(a){var e,t;const r=a;if(a.version!=null)return a.version;const s=(u,...d)=>Object.keys(u||{}).some(p=>d.includes(p)),i=r.chartOptions,n=s(i,"seriesDefaults")?i?.seriesDefaults:i?.[Object.keys(i)[0]],o={"27.0.0":s(r,"seriesChartTypes"),"26.2.0":!s(i,"seriesDefaults"),"26.1.0":s(n?.highlightStyle,"item"),"26.0.0":s(n?.highlightStyle,"series"),"25.1.0":s(n?.label,"minAngle"),"25.0.0":s(r,"modelType","aggFunc","unlinkChart","suppressChartRanges")||s(n,"lineDash","lineDashOffset"),"24.0.0":s(r,"chartThemeName","chart")||s(i,"series"),"23.2.0":s(i,"navigator"),"23.0.0":s((t=(e=i?.legend)==null?void 0:e.item)==null?void 0:t.marker,"shape"),"22.1.0":s(r,"chartPalette","chartType")},l="27.1.0",c=Object.entries(o).filter(([u,d])=>d);DEBUG&&console.log("AG Grid: ChartModel migration",{heuristicVersionCandidates:c});const[h=l]=c[0];return DEBUG&&console.log("AG Grid: ChartModel migration",{heuristicVersion:h}),h}function migrateIfBefore(a,e,t){if(versionNumber(a)>versionNumber(e.version)){DEBUG&&console.log("AG Grid: ChartModel migration",{migratingTo:a});const r=t(e);return r.version=a,DEBUG&&console.log("AG Grid: ChartModel migration",{migratedTo:a,result:r}),r}return e}function versionParts(a){const e=typeof a=="string"?a.split(".").map(t=>Number(t)):[];if(e.length!==3||e.some(t=>isNaN(t)))throw new Error("AG Grid - Illegal version string: "+a);return{major:e[0],minor:e[1],patch:e[2]}}function versionNumber(a){const{major:e,minor:t,patch:r}=versionParts(a);return e*1e4+t*100+r}function jsonDeleteDefault(a,e,t){return jsonMutateProperty(a,!0,t,(r,s)=>{r[s]===e&&delete r[s]})}function jsonBackfill(a,e,t){return jsonMutateProperty(a,!1,t,(r,s)=>{r[s]==null&&(r[s]=e)})}function jsonAdd(a,e,t){var r;typeof a=="string"&&(a=a.split("."));const s=a[0];return a.length>1&&(t[s]=jsonAdd(a.slice(1),e,(r=t[s])!=null?r:{})),Object.keys(t).includes(s)||(t[s]=e),t}function jsonMove(a,e,t){let r,s=!1;return t=jsonMutateProperty(a,!0,t,(i,n)=>{s=!0,r=i[n],delete i[n]}),s?jsonMutateProperty(e,!1,t,(i,n)=>{i[n]=r}):t}function jsonMoveIfMissing(a,e,t){let r,s=!1;return t=jsonMutateProperty(a,!0,t,(i,n)=>{s=!0,r=i[n],delete i[n]}),s?jsonMutateProperty(e,!1,t,(i,n)=>{i[n]===void 0&&(i[n]=r)}):t}function jsonRename(a,e,t){return jsonMutateProperty(a,!0,t,(r,s)=>{r[e]=r[s],delete r[s]})}function jsonDelete(a,e){return jsonMutateProperty(a,!0,e,(t,r)=>delete t[r])}function jsonMutateProperty(a,e,t,r){const s=a instanceof Array?a:a.split("."),i=s.slice(0,s.length-1),n=s[s.length-1];return jsonMutate(i,t,o=>{const l=Object.keys(o).includes(n);if(e&&!l)return o;const c=__spreadValues({},o);return r(c,n),c})}function jsonMutate(a,e,t){const r=a instanceof Array?a:a.split(".");if(e=__spreadValues({},e),r.length===0)return t(e);if(r[0].startsWith("{")){const s=r[0].substring(1,r[0].lastIndexOf("}")).split(",");for(const i of s)e[i]!=null&&(e[i]=jsonMutate(r.slice(1),e[i],t))}else if(r[0].endsWith("[]")){const s=r[0].substring(0,a[0].indexOf("["));e[s]instanceof Array&&(e[s]=e[s].map(i=>jsonMutate(r.slice(1),i,t)))}else if(r[0]==="*")for(const s in e)e[s]=jsonMutate(r.slice(1),e[s],t);else e[r[0]]!=null&&(e[r[0]]=jsonMutate(r.slice(1),e[r[0]],t));return e}var merge=(a,e)=>__spreadValues(__spreadValues({},a),e),ChartService=class extends import_core55.BeanStub{constructor(){super(...arguments),this.activeCharts=new Set,this.activeChartComps=new Set,this.crossFilteringContext={lastSelectedChartId:""},this.isEnterprise=()=>import_ag_charts_community36._ModuleSupport.enterpriseModule.isEnterprise}updateChart(a){const e=a.chartType;if(e&&isEnterpriseChartType(e)&&!this.isEnterprise()){import_core55.ModuleRegistry.__warnEnterpriseChartDisabled(e);return}if(this.activeChartComps.size===0){console.warn("AG Grid - No active charts to update.");return}const t=[...this.activeChartComps].find(r=>r.getChartId()===a.chartId);if(!t){console.warn(`AG Grid - Unable to update chart. No active chart found with ID: ${a.chartId}.`);return}t.update(a)}getChartModels(){const a=[],e=t=>__spreadProps(__spreadValues({},t),{version:VERSION});return this.activeChartComps.forEach(t=>a.push(e(t.getChartModel()))),a}getChartRef(a){let e;return this.activeCharts.forEach(t=>{t.chartId===a&&(e=t)}),e}getChartComp(a){let e;return this.activeChartComps.forEach(t=>{t.getChartId()===a&&(e=t)}),e}getChartImageDataURL(a){let e;return this.activeChartComps.forEach(t=>{t.getChartId()===a.chartId&&(e=t.getChartImageDataURL(a.fileFormat))}),e}downloadChart(a){const e=Array.from(this.activeChartComps).find(t=>t.getChartId()===a.chartId);e?.downloadChart(a.dimensions,a.fileName,a.fileFormat)}openChartToolPanel(a){const e=Array.from(this.activeChartComps).find(t=>t.getChartId()===a.chartId);e?.openChartToolPanel(a.panel)}closeChartToolPanel(a){const e=Array.from(this.activeChartComps).find(t=>t.getChartId()===a);e?.closeChartToolPanel()}createChartFromCurrentRange(a="groupedColumn"){const e=this.getSelectedRange();return this.createChart(e,a)}restoreChart(a,e){if(!a){console.warn("AG Grid - unable to restore chart as no chart model is provided");return}a.version!==VERSION&&(a=upgradeChartModel(a));const t={cellRange:a.cellRange,chartType:a.chartType,chartThemeName:a.chartThemeName,chartContainer:e,suppressChartRanges:a.suppressChartRanges,switchCategorySeries:a.switchCategorySeries,aggFunc:a.aggFunc,unlinkChart:a.unlinkChart,seriesChartTypes:a.seriesChartTypes},r=i=>this.rangeService?this.rangeService.createCellRangeFromCellRangeParams(i):void 0;if(a.modelType==="pivot"){this.gridOptionsService.updateGridOptions({options:{pivotMode:!0},source:"pivotChart"});const n={rowStartIndex:null,rowStartPinned:void 0,rowEndIndex:null,rowEndPinned:void 0,columns:this.columnModel.getAllDisplayedColumns().map(l=>l.getColId())},o=r(n);if(!o){console.warn("AG Grid - unable to create chart as there are no columns in the grid.");return}return this.createChart(o,t.chartType,t.chartThemeName,!0,!0,t.chartContainer,!1,void 0,void 0,t.unlinkChart,!1,a.chartOptions)}const s=r(t.cellRange);if(!s){console.warn("AG Grid - unable to create chart as no range is selected");return}return this.createChart(s,t.chartType,t.chartThemeName,!1,t.suppressChartRanges,t.chartContainer,t.switchCategorySeries,t.aggFunc,void 0,t.unlinkChart,!1,a.chartOptions,a.chartPalette,t.seriesChartTypes)}createRangeChart(a){var e;const t=(e=this.rangeService)==null?void 0:e.createCellRangeFromCellRangeParams(a.cellRange);if(!t){console.warn("AG Grid - unable to create chart as no range is selected");return}return this.createChart(t,a.chartType,a.chartThemeName,!1,a.suppressChartRanges,a.chartContainer,a.switchCategorySeries,a.aggFunc,a.chartThemeOverrides,a.unlinkChart,void 0,void 0,void 0,a.seriesChartTypes)}createPivotChart(a){this.gridOptionsService.updateGridOptions({options:{pivotMode:!0},source:"pivotChart"});const e={rowStartIndex:null,rowStartPinned:void 0,rowEndIndex:null,rowEndPinned:void 0,columns:this.columnModel.getAllDisplayedColumns().map(r=>r.getColId())},t=this.rangeService?this.rangeService.createCellRangeFromCellRangeParams(e):void 0;if(!t){console.warn("AG Grid - unable to create chart as there are no columns in the grid.");return}return this.createChart(t,a.chartType,a.chartThemeName,!0,!0,a.chartContainer,!1,void 0,a.chartThemeOverrides,a.unlinkChart)}createCrossFilterChart(a){var e;const t=(e=this.rangeService)==null?void 0:e.createCellRangeFromCellRangeParams(a.cellRange);if(!t){console.warn("AG Grid - unable to create chart as no range is selected");return}const r=!0,i=typeof a.suppressChartRanges<"u"&&a.suppressChartRanges!==null?a.suppressChartRanges:!0;return this.createChart(t,a.chartType,a.chartThemeName,!1,i,a.chartContainer,!1,a.aggFunc,a.chartThemeOverrides,a.unlinkChart,r)}createChart(a,e,t,r=!1,s=!1,i,n=!1,o,l,c=!1,h=!1,u,d,p){if(isEnterpriseChartType(e)&&!this.isEnterprise()){import_core55.ModuleRegistry.__warnEnterpriseChartDisabled(e);return}const g=this.gridOptionsService.getCallback("createChartContainer"),C={chartId:this.generateId(),pivotChart:r,cellRange:a,chartType:getCanonicalChartType(e),chartThemeName:t,insideDialog:!(i||g),suppressChartRanges:s,switchCategorySeries:n,aggFunc:o,chartThemeOverrides:l,unlinkChart:c,crossFiltering:h,crossFilteringContext:this.crossFilteringContext,chartOptionsToRestore:u,chartPaletteToRestore:d,seriesChartTypes:p,crossFilteringResetCallback:()=>this.activeChartComps.forEach(f=>f.crossFilteringReset())},m=new GridChartComp(C);this.context.createBean(m);const v=this.createChartRef(m);if(i){i.appendChild(m.getGui());const f=this.environment.getTheme();f.el&&!f.el.contains(i)&&i.classList.add(f.theme)}else g?g(v):m.addEventListener(GridChartComp.EVENT_DESTROYED,()=>{this.activeChartComps.delete(m),this.activeCharts.delete(v)});return v}createChartRef(a){const e={destroyChart:()=>{this.activeCharts.has(e)&&(this.context.destroyBean(a),this.activeChartComps.delete(a),this.activeCharts.delete(e))},chartElement:a.getGui(),chart:a.getUnderlyingChart(),chartId:a.getChartModel().chartId};return this.activeCharts.add(e),this.activeChartComps.add(a),e}getSelectedRange(){const a=this.rangeService.getCellRanges();return a.length>0?a[0]:{}}generateId(){return`id-${Math.random().toString(36).substring(2,18)}`}destroyAllActiveCharts(){this.activeCharts.forEach(a=>a.destroyChart())}};ChartService.CHARTS_VERSION=import_ag_charts_community36.VERSION,__decorateClass([(0,import_core55.Optional)("rangeService")],ChartService.prototype,"rangeService",2),__decorateClass([(0,import_core55.Autowired)("columnModel")],ChartService.prototype,"columnModel",2),__decorateClass([import_core55.PreDestroy],ChartService.prototype,"destroyAllActiveCharts",1),ChartService=__decorateClass([(0,import_core55.Bean)("chartService")],ChartService);var import_core56=require("@ag-grid-community/core"),ChartTranslationService=class extends import_core56.BeanStub{translate(a){const e=this.localeService.getLocaleTextFunc(),t=ChartTranslationService.DEFAULT_TRANSLATIONS[a];return e(a,t)}};ChartTranslationService.DEFAULT_TRANSLATIONS={pivotChartTitle:"Pivot Chart",rangeChartTitle:"Range Chart",settings:"Chart",data:"Data",format:"Format",categories:"Categories",defaultCategory:"(None)",series:"Series",switchCategorySeries:"Switch Category / Series",categoryValues:"Category Values",seriesLabels:"Series Labels",aggregate:"Aggregate",xyValues:"X Y Values",paired:"Paired Mode",axis:"Axis",xAxis:"Horizontal Axis",yAxis:"Vertical Axis",polarAxis:"Polar Axis",radiusAxis:"Radius Axis",navigator:"Navigator",zoom:"Zoom",animation:"Animation",crosshair:"Crosshair",color:"Color",thickness:"Thickness",preferredLength:"Preferred Length",xType:"X Type",axisType:"Axis Type",automatic:"Automatic",category:"Category",number:"Number",time:"Time",timeFormat:"Time Format",autoRotate:"Auto Rotate",labelRotation:"Rotation",circle:"Circle",orientation:"Orientation",polygon:"Polygon",fixed:"Fixed",parallel:"Parallel",perpendicular:"Perpendicular",radiusAxisPosition:"Position",ticks:"Ticks",gridLines:"Grid Lines",width:"Width",height:"Height",length:"Length",padding:"Padding",spacing:"Spacing",chart:"Chart",title:"Title",titlePlaceholder:"Chart title - double click to edit",background:"Background",font:"Font",top:"Top",right:"Right",bottom:"Bottom",left:"Left",labels:"Labels",calloutLabels:"Callout Labels",sectorLabels:"Sector Labels",positionRatio:"Position Ratio",size:"Size",shape:"Shape",minSize:"Minimum Size",maxSize:"Maximum Size",legend:"Legend",position:"Position",markerSize:"Marker Size",markerStroke:"Marker Stroke",markerPadding:"Marker Padding",itemSpacing:"Item Spacing",itemPaddingX:"Item Padding X",itemPaddingY:"Item Padding Y",layoutHorizontalSpacing:"Horizontal Spacing",layoutVerticalSpacing:"Vertical Spacing",strokeWidth:"Stroke Width",offset:"Offset",offsets:"Offsets",tooltips:"Tooltips",callout:"Callout",markers:"Markers",shadow:"Shadow",blur:"Blur",xOffset:"X Offset",yOffset:"Y Offset",lineWidth:"Line Width",lineDash:"Line Dash",lineDashOffset:"Dash Offset",scrollingZoom:"Scrolling",scrollingStep:"Scrolling Step",selectingZoom:"Selecting",durationMillis:"Duration (ms)",crosshairLabel:"Label",crosshairSnap:"Snap to Node",normal:"Normal",bold:"Bold",italic:"Italic",boldItalic:"Bold Italic",predefined:"Predefined",fillOpacity:"Fill Opacity",strokeColor:"Line Color",strokeOpacity:"Line Opacity",miniChart:"Mini-Chart",histogramBinCount:"Bin count",connectorLine:"Connector Line",seriesItems:"Series Items",seriesItemType:"Item Type",seriesItemPositive:"Positive",seriesItemNegative:"Negative",seriesItemLabels:"Item Labels",columnGroup:"Column",barGroup:"Bar",pieGroup:"Pie",lineGroup:"Line",scatterGroup:"X Y (Scatter)",areaGroup:"Area",polarGroup:"Polar",statisticalGroup:"Statistical",hierarchicalGroup:"Hierarchical",specializedGroup:"Specialized",combinationGroup:"Combination",groupedColumnTooltip:"Grouped",stackedColumnTooltip:"Stacked",normalizedColumnTooltip:"100% Stacked",groupedBarTooltip:"Grouped",stackedBarTooltip:"Stacked",normalizedBarTooltip:"100% Stacked",pieTooltip:"Pie",donutTooltip:"Donut",lineTooltip:"Line",groupedAreaTooltip:"Area",stackedAreaTooltip:"Stacked",normalizedAreaTooltip:"100% Stacked",scatterTooltip:"Scatter",bubbleTooltip:"Bubble",histogramTooltip:"Histogram",radialColumnTooltip:"Radial Column",radialBarTooltip:"Radial Bar",radarLineTooltip:"Radar Line",radarAreaTooltip:"Radar Area",nightingaleTooltip:"Nightingale",rangeBarTooltip:"Range Bar",rangeAreaTooltip:"Range Area",boxPlotTooltip:"Box Plot",treemapTooltip:"Treemap",sunburstTooltip:"Sunburst",heatmapTooltip:"Heatmap",waterfallTooltip:"Waterfall",columnLineComboTooltip:"Column & Line",areaColumnComboTooltip:"Area & Column",customComboTooltip:"Custom Combination",innerRadius:"Inner Radius",startAngle:"Start Angle",endAngle:"End Angle",reverseDirection:"Reverse Direction",groupPadding:"Group Padding",seriesPadding:"Series Padding",group:"Group",tile:"Tile",whisker:"Whisker",cap:"Cap",capLengthRatio:"Length Ratio",labelPlacement:"Placement",inside:"Inside",outside:"Outside",noDataToChart:"No data available to be charted.",pivotChartRequiresPivotMode:"Pivot Chart requires Pivot Mode enabled.",chartSettingsToolbarTooltip:"Menu",chartLinkToolbarTooltip:"Linked to Grid",chartUnlinkToolbarTooltip:"Unlinked from Grid",chartDownloadToolbarTooltip:"Download Chart",chartMenuToolbarTooltip:"Menu",chartEdit:"Edit Chart",chartAdvancedSettings:"Advanced Settings",chartLink:"Link to Grid",chartUnlink:"Unlink from Grid",chartDownload:"Download Chart",histogramFrequency:"Frequency",seriesChartType:"Series Chart Type",seriesType:"Series Type",secondaryAxis:"Secondary Axis",seriesAdd:"Add a series",categoryAdd:"Add a category",area:"Area",bar:"Bar",column:"Column",line:"Line",scatter:"Scatter",histogram:"Histogram",radialColumn:"Radial Column",radialBar:"Radial Bar",radarLine:"Radar Line",radarArea:"Radar Area",nightingale:"Nightingale",rangeBar:"Range Bar",rangeArea:"Range Area",treemap:"Treemap",sunburst:"Sunburst",waterfall:"Waterfall",boxPlot:"Box Plot",pie:"Pie",donut:"Donut",stackedArea:"StackedArea",groupedColumn:"Grouped Column",stackedColumn:"Stacked Column",advancedSettings:"Advanced Settings",ariaChartMenuClose:"Close Chart Edit Menu",timeFormatSlashesDDMMYYYY:"DD/MM/YYYY",timeFormatSlashesMMDDYYYY:"MM/DD/YYYY",timeFormatSlashesDDMMYY:"DD/MM/YY",timeFormatSlashesMMDDYY:"MM/DD/YY",timeFormatDotsDDMYY:"DD.M.YY",timeFormatDotsMDDYY:"M.DD.YY",timeFormatDashesYYYYMMDD:"YYYY-MM-DD",timeFormatSpacesDDMMMMYYYY:"DD MMMM YYYY",timeFormatHHMMSS:"HH:MM:SS",timeFormatHHMMSSAmPm:"HH:MM:SS AM/PM",sum:"Sum",first:"First",last:"Last",min:"Min",max:"Max",count:"Count",avg:"Average"},ChartTranslationService=__decorateClass([(0,import_core56.Bean)("chartTranslationService")],ChartTranslationService);var import_core57=require("@ag-grid-community/core"),ChartCrossFilterService=class extends import_core57.BeanStub{filter(a,e=!1){const t=this.gridApi.getFilterModel();if(e){this.resetFilters(t);return}let r=ChartCrossFilterService.extractFilterColId(a);this.isValidColumnFilter(r)?this.updateFilters(t,a,r):console.warn("AG Grid: cross filtering requires a 'agSetColumnFilter' or 'agMultiColumnFilter' to be defined on the column with id: '"+r+"'")}resetFilters(a){Object.keys(a).length>0&&(this.gridApi.setFilterModel(null),this.gridApi.onFilterChanged())}updateFilters(a,e,t){let r=ChartCrossFilterService.extractFilterColId(e),s=e.datum[r];if(s===void 0)return;let i=s.toString();if(e.event.metaKey||e.event.ctrlKey){const n=this.getCurrentGridValuesForCategory(t),o=import_core57._.includes(n,i);let l;o?l=n.filter(c=>c!==i):(l=n,l.push(i)),a[t]=this.getUpdatedFilterModel(t,l)}else{const n=[i];a={[t]:this.getUpdatedFilterModel(t,n)}}this.gridApi.setFilterModel(a)}getUpdatedFilterModel(a,e){return this.getColumnFilterType(a)==="agMultiColumnFilter"?{filterType:"multi",filterModels:[null,{filterType:"set",values:e}]}:{filterType:"set",values:e}}getCurrentGridValuesForCategory(a){let e=[];const t=this.getColumnById(a);return this.gridApi.forEachNodeAfterFilter(r=>{if(t&&!r.group){const s=this.valueService.getValue(t,r)+"";e.includes(s)||e.push(s)}}),e}static extractFilterColId(a){return a.xKey||a.calloutLabelKey}isValidColumnFilter(a){a.indexOf("-filtered-out")&&(a=a.replace("-filtered-out",""));let e=this.getColumnFilterType(a);return typeof e=="boolean"?e:import_core57._.includes(["agSetColumnFilter","agMultiColumnFilter"],e)}getColumnFilterType(a){let e=this.getColumnById(a);if(e)return e.getColDef().filter}getColumnById(a){return this.columnModel.getGridColumn(a)}};__decorateClass([(0,import_core57.Autowired)("gridApi")],ChartCrossFilterService.prototype,"gridApi",2),__decorateClass([(0,import_core57.Autowired)("columnModel")],ChartCrossFilterService.prototype,"columnModel",2),__decorateClass([(0,import_core57.Autowired)("valueService")],ChartCrossFilterService.prototype,"valueService",2),ChartCrossFilterService=__decorateClass([(0,import_core57.Bean)("chartCrossFilterService")],ChartCrossFilterService);var VERSION_CHECKING_FIRST_GRID_MAJOR_VERSION=28,VERSION_CHECKING_FIRST_CHARTS_MAJOR_VERSION=6;function isValidVersion(a){return a&&a.match(/\d+\.\d+\.\d+/)}function isValidMajorVersion({gridMajorVersion:a,chartsMajorVersion:e}){const t=parseInt(a,10),r=parseInt(e,10),s=t-VERSION_CHECKING_FIRST_GRID_MAJOR_VERSION,i=r-VERSION_CHECKING_FIRST_CHARTS_MAJOR_VERSION,n=s>=0;return s===i&&n}function gridChartVersion(a){if(!a||!isValidVersion(a))return;const[e,t]=a.split(".")||[],r=`${e}.${t}.x`,i=parseInt(e,10)-VERSION_CHECKING_FIRST_GRID_MAJOR_VERSION+VERSION_CHECKING_FIRST_CHARTS_MAJOR_VERSION;if(i<0)return;const o=`${i}.${t}.x`;return{gridMajorMinor:r,chartsMajorMinor:o}}function validGridChartsVersionErrorMessage({type:a,gridVersion:e,chartsVersion:t}){const r="AG Grid: AG Grid version is incompatible. Please see https://www.ag-grid.com/javascript-data-grid/modules/ for more information.";if(!e)return r;const s=gridChartVersion(e);if(!s)return r;const{gridMajorMinor:i,chartsMajorMinor:n}=s;return a==="incompatible"?`AG Grid version ${e} and AG Charts version ${t} is not supported. AG Grid version ${i} should be used with AG Chart ${n}. Please see https://www.ag-grid.com/javascript-data-grid/modules/ for more information.`:a==="invalidCharts"?`AG Grid version ${i} should be used with AG Chart ${n}. Please see https://www.ag-grid.com/javascript-data-grid/modules/ for more information.`:r}function validGridChartsVersion({gridVersion:a,chartsVersion:e}){if(!isValidVersion(e))return{isValid:!1,message:validGridChartsVersionErrorMessage({type:"invalidCharts",gridVersion:a,chartsVersion:e})};if(!isValidVersion(a))return{isValid:!1,message:validGridChartsVersionErrorMessage({type:"invalidGrid",gridVersion:a,chartsVersion:e})};const[t,r]=a.split(".")||[],[s,i]=e.split(".")||[],n=isValidMajorVersion({gridMajorVersion:t,chartsMajorVersion:s});return n&&r===i?{isValid:!0}:!n||r!==i?{isValid:!1,message:validGridChartsVersionErrorMessage({type:"incompatible",gridVersion:a,chartsVersion:e})}:{isValid:!1,message:validGridChartsVersionErrorMessage({type:"invalid",gridVersion:a,chartsVersion:e})}}var import_core58=require("@ag-grid-community/core"),ChartMenuListFactory=class extends import_core58.BeanStub{showMenuList(a){const{eventSource:e,showMenu:t,chartMenuContext:r}=a,s=this.chartMenuService.doChartToolPanelsExist(r.chartController),i=this.mapWithStockItems(this.getMenuItems(r.chartController,s),r,t,e,s);if(!i.length)return;const n=this.createBean(new ChartMenuList(i));this.activeChartMenuList=n;let o=-1,l="left";this.gridOptionsService.get("enableRtl")&&(o=1,l="right");const c=n.getGui();this.popupService.addPopup({modal:!0,eChild:c,closeOnEsc:!0,closedCallback:()=>{this.destroyBean(n),this.activeChartMenuList=void 0;const h=this.gridOptionsService.getDocument();h.activeElement===h.body&&e.focus({preventScroll:!0})},afterGuiAttached:h=>n.afterGuiAttached(h),positionCallback:()=>{this.popupService.positionPopupByComponent({type:"chartMenu",eventSource:e,ePopup:c,alignSide:l,nudgeX:4*o,nudgeY:4,position:"under",keepWithinBounds:!0})},ariaLabel:"Chart Menu"})}getMenuItems(a,e){const t=[...e?["chartEdit"]:[],...a.isEnterprise()?["chartAdvancedSettings"]:[],a.isChartLinked()?"chartUnlink":"chartLink","chartDownload"],r=this.gridOptionsService.get("chartMenuItems");return r?Array.isArray(r)?r:r(this.gridOptionsService.addGridCommonParams({defaultItems:t})):t}mapWithStockItems(a,e,t,r,s){if(!a)return[];const i=[];return a.forEach(n=>{let o;if(typeof n=="string"?o=this.getStockMenuItem(n,e,t,r,s):o=__spreadValues({},n),!o)return;const{subMenu:l}=o;Array.isArray(l)&&(o.subMenu=this.mapWithStockItems(l,e,t,r,s)),i.push(o)}),i}getStockMenuItem(a,e,t,r,s){switch(a){case"chartEdit":return s?this.createMenuItem(this.chartTranslationService.translate("chartEdit"),"chartsMenuEdit",t):null;case"chartAdvancedSettings":return this.createMenuItem(this.chartTranslationService.translate("chartAdvancedSettings"),"chartsMenuAdvancedSettings",()=>this.chartMenuService.openAdvancedSettings(e,r));case"chartUnlink":return e.chartController.isChartLinked()?this.createMenuItem(this.chartTranslationService.translate("chartUnlink"),"unlinked",()=>this.chartMenuService.toggleLinked(e)):null;case"chartLink":return e.chartController.isChartLinked()?null:this.createMenuItem(this.chartTranslationService.translate("chartLink"),"linked",()=>this.chartMenuService.toggleLinked(e));case"chartDownload":return this.createMenuItem(this.chartTranslationService.translate("chartDownload"),"save",()=>this.chartMenuService.downloadChart(e))}return null}createMenuItem(a,e,t){return{name:a,icon:import_core58._.createIconNoSpan(e,this.gridOptionsService,null),action:t}}destroy(){this.destroyBean(this.activeChartMenuList),super.destroy()}};__decorateClass([(0,import_core58.Autowired)("popupService")],ChartMenuListFactory.prototype,"popupService",2),__decorateClass([(0,import_core58.Autowired)("chartMenuService")],ChartMenuListFactory.prototype,"chartMenuService",2),__decorateClass([(0,import_core58.Autowired)("chartTranslationService")],ChartMenuListFactory.prototype,"chartTranslationService",2),ChartMenuListFactory=__decorateClass([(0,import_core58.Bean)("chartMenuListFactory")],ChartMenuListFactory);var ChartMenuList=class extends import_core58.Component{constructor(a){super(`
            <div ref="eChartsMenu" role="presentation" class="ag-menu ag-chart-menu-popup"></div>
        `),this.menuItems=a}init(){this.mainMenuList=this.createManagedBean(new import_core58.AgMenuList(0)),this.mainMenuList.addMenuItems(this.menuItems),this.mainMenuList.addEventListener(import_core58.AgMenuItemComponent.EVENT_CLOSE_MENU,this.onHidePopup.bind(this)),this.eChartsMenu.appendChild(this.mainMenuList.getGui())}onHidePopup(){var a;(a=this.hidePopupFunc)==null||a.call(this)}afterGuiAttached({hidePopup:a}){a&&(this.hidePopupFunc=a,this.addDestroyFunc(a)),this.focusService.focusInto(this.mainMenuList.getGui())}};__decorateClass([(0,import_core58.Autowired)("focusService")],ChartMenuList.prototype,"focusService",2),__decorateClass([(0,import_core58.RefSelector)("eChartsMenu")],ChartMenuList.prototype,"eChartsMenu",2),__decorateClass([import_core58.PostConstruct],ChartMenuList.prototype,"init",1);var import_core64=require("@ag-grid-community/core"),import_core63=require("@ag-grid-community/core"),import_core59=require("@ag-grid-community/core"),_AnimationPanel=class Re extends import_core59.Component{constructor(e){super(),this.chartMenuParamsFactory=e}init(){const e=this.chartMenuParamsFactory.addEnableParams("animation.enabled",{cssIdentifier:"charts-advanced-settings-top-level",direction:"vertical",suppressOpenCloseIcons:!0,title:this.chartTranslationService.translate("animation"),suppressEnabledCheckbox:!0,useToggle:!0}),t=this.chartMenuParamsFactory.getDefaultNumberInputParams("animation.duration","durationMillis",{min:0});this.setTemplate(Re.TEMPLATE,{animationGroup:e,animationHeightInput:t})}};_AnimationPanel.TEMPLATE=`<div>
            <ag-group-component ref="animationGroup">
                <ag-input-number-field ref="animationHeightInput"></ag-input>
            </ag-group-component>
        </div>`,__decorateClass([(0,import_core59.Autowired)("chartTranslationService")],_AnimationPanel.prototype,"chartTranslationService",2),__decorateClass([import_core59.PostConstruct],_AnimationPanel.prototype,"init",1);var AnimationPanel=_AnimationPanel,import_core60=require("@ag-grid-community/core"),_CrosshairPanel=class Le extends import_core60.Component{constructor(e){super(),this.chartMenuParamsFactory=e}init(){const e=this.chartMenuParamsFactory.addEnableParams("crosshair.enabled",{cssIdentifier:"charts-advanced-settings-top-level",direction:"vertical",suppressOpenCloseIcons:!0,title:this.chartTranslationService.translate("crosshair"),suppressEnabledCheckbox:!0,useToggle:!0}),t=this.chartMenuParamsFactory.getDefaultCheckboxParams("crosshair.label.enabled","crosshairLabel"),r=this.chartMenuParamsFactory.getDefaultCheckboxParams("crosshair.snap","crosshairSnap"),s=this.chartMenuParamsFactory.getDefaultColorPickerParams("crosshair.stroke","color");this.setTemplate(Le.TEMPLATE,{crosshairGroup:e,crosshairLabelCheckbox:t,crosshairSnapCheckbox:r,crosshairStrokeColorPicker:s})}};_CrosshairPanel.TEMPLATE=`<div>
            <ag-group-component ref="crosshairGroup">
                <ag-checkbox ref="crosshairLabelCheckbox"></ag-checkbox>
                <ag-checkbox ref="crosshairSnapCheckbox"></ag-checkbox>
                <ag-color-picker ref="crosshairStrokeColorPicker"></ag-color-picker>
            </ag-group-component>
        </div>`,__decorateClass([(0,import_core60.Autowired)("chartTranslationService")],_CrosshairPanel.prototype,"chartTranslationService",2),__decorateClass([import_core60.PostConstruct],_CrosshairPanel.prototype,"init",1);var CrosshairPanel=_CrosshairPanel,import_core61=require("@ag-grid-community/core"),_NavigatorPanel=class Ie extends import_core61.Component{constructor(e){super(),this.chartMenuParamsFactory=e}init(){const e=this.chartMenuParamsFactory.addEnableParams("navigator.enabled",{cssIdentifier:"charts-advanced-settings-top-level",direction:"vertical",suppressOpenCloseIcons:!0,title:this.chartTranslationService.translate("navigator"),suppressEnabledCheckbox:!0,useToggle:!0}),t=this.chartMenuParamsFactory.getDefaultSliderParams("navigator.height","height",60);t.minValue=10;const r=this.chartMenuParamsFactory.getDefaultCheckboxParams("navigator.miniChart.enabled","miniChart");this.setTemplate(Ie.TEMPLATE,{navigatorGroup:e,navigatorHeightSlider:t,navigatorMiniChartCheckbox:r})}};_NavigatorPanel.TEMPLATE=`<div>
            <ag-group-component ref="navigatorGroup">
                <ag-slider ref="navigatorHeightSlider"></ag-slider>
                <ag-checkbox ref="navigatorMiniChartCheckbox"></ag-checkbox>
            </ag-group-component>
        </div>`,__decorateClass([(0,import_core61.Autowired)("chartTranslationService")],_NavigatorPanel.prototype,"chartTranslationService",2),__decorateClass([import_core61.PostConstruct],_NavigatorPanel.prototype,"init",1);var NavigatorPanel=_NavigatorPanel,import_core62=require("@ag-grid-community/core"),_ZoomPanel=class Fe extends import_core62.Component{constructor(e){super(),this.chartMenuParamsFactory=e}init(){const e=this.chartMenuParamsFactory.addEnableParams("zoom.enabled",{cssIdentifier:"charts-advanced-settings-top-level",direction:"vertical",suppressOpenCloseIcons:!0,title:this.chartTranslationService.translate("zoom"),suppressEnabledCheckbox:!0,useToggle:!0}),t=this.chartMenuParamsFactory.getDefaultCheckboxParams("zoom.enableScrolling","scrollingZoom"),r=this.chartMenuParamsFactory.getDefaultSliderParams("zoom.scrollingStep","scrollingStep",1);r.step=.01,r.minValue=r.step;const s=this.chartMenuParamsFactory.getDefaultCheckboxParams("zoom.enableSelecting","selectingZoom");t.onValueChange=(i=>n=>{i&&(i(n),this.zoomScrollingStepInput.setDisabled(!n))})(t.onValueChange),this.setTemplate(Fe.TEMPLATE,{zoomGroup:e,zoomScrollingCheckbox:t,zoomScrollingStepInput:r,zoomSelectingCheckbox:s}),this.zoomScrollingStepInput.setDisabled(!t.value)}};_ZoomPanel.TEMPLATE=`<div>
            <ag-group-component ref="zoomGroup">
                <ag-checkbox ref="zoomSelectingCheckbox"></ag-checkbox>
                <ag-checkbox ref="zoomScrollingCheckbox"></ag-checkbox>
                <ag-slider ref="zoomScrollingStepInput"></ag-slider>
            </ag-group-component>
        </div>`,__decorateClass([(0,import_core62.Autowired)("chartTranslationService")],_ZoomPanel.prototype,"chartTranslationService",2),__decorateClass([(0,import_core62.RefSelector)("zoomScrollingStepInput")],_ZoomPanel.prototype,"zoomScrollingStepInput",2),__decorateClass([import_core62.PostConstruct],_ZoomPanel.prototype,"init",1);var ZoomPanel=_ZoomPanel,INTERACTIVITY_GROUPS=["navigator","zoom","animation","crosshair"],DEFAULT_PER_SERIES_SUPPORTED_GROUP_PANELS=["navigator","zoom","crosshair"],SUPPORTED_GROUP_PANELS={cartesian:DEFAULT_PER_SERIES_SUPPORTED_GROUP_PANELS,column:DEFAULT_PER_SERIES_SUPPORTED_GROUP_PANELS,bar:DEFAULT_PER_SERIES_SUPPORTED_GROUP_PANELS,line:DEFAULT_PER_SERIES_SUPPORTED_GROUP_PANELS,area:DEFAULT_PER_SERIES_SUPPORTED_GROUP_PANELS,scatter:DEFAULT_PER_SERIES_SUPPORTED_GROUP_PANELS,histogram:DEFAULT_PER_SERIES_SUPPORTED_GROUP_PANELS,bubble:DEFAULT_PER_SERIES_SUPPORTED_GROUP_PANELS,"range-bar":DEFAULT_PER_SERIES_SUPPORTED_GROUP_PANELS,"range-area":DEFAULT_PER_SERIES_SUPPORTED_GROUP_PANELS,"box-plot":DEFAULT_PER_SERIES_SUPPORTED_GROUP_PANELS,waterfall:DEFAULT_PER_SERIES_SUPPORTED_GROUP_PANELS},_AdvancedSettingsPanel=class Ge extends import_core63.Component{constructor(e){super(Ge.TEMPLATE),this.chartMenuContext=e}postConstruct(){this.chartPanelFeature=this.createManagedBean(new ChartPanelFeature(this.chartMenuContext.chartController,this.getGui(),"ag-chart-advanced-settings-section",(e,t)=>this.createPanels(e,t))),this.chartPanelFeature.refreshPanels()}createPanels(e,t){INTERACTIVITY_GROUPS.forEach(r=>{if(!this.isGroupPanelShownForSeries(r,t))return;const s=this.createPanel(r);s&&this.chartPanelFeature.addComponent(s)})}isGroupPanelShownForSeries(e,t){var r,s;return e==="animation"?!0:(s=(r=SUPPORTED_GROUP_PANELS[t])==null?void 0:r.includes(e))!=null?s:!1}createPanel(e){const{chartMenuParamsFactory:t,chartAxisMenuParamsFactory:r}=this.chartMenuContext;switch(e){case"navigator":return new NavigatorPanel(t);case"zoom":return new ZoomPanel(t);case"animation":return new AnimationPanel(t);case"crosshair":return new CrosshairPanel(r)}return import_core63._.warnOnce(`Invalid charts advanced settings group name supplied: '${e}'`),null}};_AdvancedSettingsPanel.TEMPLATE='<div class="ag-chart-advanced-settings-wrapper"></div>',__decorateClass([import_core63.PostConstruct],_AdvancedSettingsPanel.prototype,"postConstruct",1);var AdvancedSettingsPanel=_AdvancedSettingsPanel,AdvancedSettingsMenuFactory=class extends import_core64.BeanStub{showMenu(a,e){this.hideMenu();const t=this.createBean(new AdvancedSettingsMenu(a));this.activeDialog=this.createBean(new import_core64.AgDialog({title:this.chartTranslationService.translate("advancedSettings"),component:t,width:300,height:400,resizable:!0,movable:!0,centered:!0,closable:!0,afterGuiAttached:()=>{var r;(r=this.focusService.findFocusableElements(t.getGui())[0])==null||r.focus()},closedCallback:()=>{this.activeMenu=this.destroyBean(this.activeMenu),this.activeDialog=void 0,e?.focus({preventScroll:!0})}})),this.activeMenu=t}hideMenu(){this.activeDialog&&this.destroyBean(this.activeDialog)}destroy(){this.activeMenu=this.destroyBean(this.activeMenu),this.activeDialog=this.destroyBean(this.activeDialog),super.destroy()}};__decorateClass([(0,import_core64.Autowired)("focusService")],AdvancedSettingsMenuFactory.prototype,"focusService",2),__decorateClass([(0,import_core64.Autowired)("chartTranslationService")],AdvancedSettingsMenuFactory.prototype,"chartTranslationService",2),AdvancedSettingsMenuFactory=__decorateClass([(0,import_core64.Bean)("advancedSettingsMenuFactory")],AdvancedSettingsMenuFactory);var _AdvancedSettingsMenu=class Ve extends import_core64.TabGuardComp{constructor(e){super(Ve.TEMPLATE),this.chartMenuContext=e}postConstruct(){this.advancedSettingsPanel=this.createManagedBean(new AdvancedSettingsPanel(this.chartMenuContext)),this.getGui().appendChild(this.advancedSettingsPanel.getGui()),this.initialiseTabGuard({onTabKeyDown:this.onTabKeyDown.bind(this),focusTrapActive:!0})}onTabKeyDown(e){if(e.defaultPrevented)return;e.preventDefault();const t=e.shiftKey,r=this.advancedSettingsPanel.getGui(),s=this.focusService.findNextFocusableElement(r,!1,t);if(s)s.focus();else{const i=this.focusService.findFocusableElements(r);i.length&&i[t?i.length-1:0].focus()}}};_AdvancedSettingsMenu.TEMPLATE='<div class="ag-chart-advanced-settings"></div>',__decorateClass([(0,import_core64.Autowired)("focusService")],_AdvancedSettingsMenu.prototype,"focusService",2),__decorateClass([import_core64.PostConstruct],_AdvancedSettingsMenu.prototype,"postConstruct",1);var AdvancedSettingsMenu=_AdvancedSettingsMenu,GridChartsModule={version:VERSION,validate:()=>validGridChartsVersion({gridVersion:VERSION,chartsVersion:ChartService.CHARTS_VERSION}),moduleName:import_core65.ModuleNames.GridChartsModule,beans:[ChartService,ChartTranslationService,ChartCrossFilterService,ChartMenuListFactory,ChartMenuService,AdvancedSettingsMenuFactory],agStackComponents:[{componentName:"AgColorPicker",componentClass:AgColorPicker},{componentName:"AgAngleSelect",componentClass:AgAngleSelect},{componentName:"AgPillSelect",componentClass:AgPillSelect}],dependantModules:[import_range_selection.RangeSelectionModule,import_core66.EnterpriseCoreModule]},__FORCE_MODULE_DETECTION_AG_GRID_CORE_EXT=0,import_ag_charts_community37=require("ag-charts-community");__reExport(main_exports,require("ag-charts-community"),module.exports);var agCharts={time:import_ag_charts_community37.time,AgChart:import_ag_charts_community37.AgChart};
