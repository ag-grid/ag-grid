var Kr=Object.defineProperty,Gi=Object.defineProperties,Vi=Object.getOwnPropertyDescriptor,Ni=Object.getOwnPropertyDescriptors,gt=Object.getOwnPropertySymbols,$r=Object.prototype.hasOwnProperty,jr=Object.prototype.propertyIsEnumerable,Xr=(a,e,t)=>e in a?Kr(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,T=(a,e)=>{for(var t in e||(e={}))$r.call(e,t)&&Xr(a,t,e[t]);if(gt)for(var t of gt(e))jr.call(e,t)&&Xr(a,t,e[t]);return a},A=(a,e)=>Gi(a,Ni(e)),ne=(a,e)=>{var t={};for(var r in a)$r.call(a,r)&&e.indexOf(r)<0&&(t[r]=a[r]);if(a!=null&&gt)for(var r of gt(a))e.indexOf(r)<0&&jr.call(a,r)&&(t[r]=a[r]);return t},p=(a,e,t,r)=>{for(var s=r>1?void 0:r?Vi(e,t):e,i=a.length-1,n;i>=0;i--)(n=a[i])&&(s=(r?n(e,t,s):n(s))||s);return r&&s&&Kr(e,t,s),s};import{ModuleNames as Bi}from"@ag-grid-community/core";import{EnterpriseCoreModule as Ui}from"@ag-grid-enterprise/core";import{RangeSelectionModule as zi}from"@ag-grid-enterprise/range-selection";import{Autowired as Hi,Bean as Wi,BeanStub as Yi,ModuleRegistry as qr,Optional as Ki,PreDestroy as $i}from"@ag-grid-community/core";import{VERSION as ji,_ModuleSupport as Xi}from"ag-charts-community";import{_ as oe,AgDialog as Zr,Autowired as Re,Component as qi,Events as Jr,PostConstruct as Zi,RefSelector as Ie}from"@ag-grid-community/core";import{_ as Ji,AgPanel as Qi,AgPromise as en,Autowired as Qr,Component as ea,Events as tn,PostConstruct as rn}from"@ag-grid-community/core";import{AgPromise as an,Autowired as ta,Component as sn,PostConstruct as nn,TabbedLayout as on}from"@ag-grid-community/core";import{_ as ln,AutoScrollService as cn,Autowired as ra,Component as hn,PostConstruct as dn}from"@ag-grid-community/core";import{_ as un,Autowired as pn,BeanStub as gn,Events as q,PostConstruct as mn}from"@ag-grid-community/core";import{_ as mt,Autowired as aa,BeanStub as Cn,CellRangeType as _e,PostConstruct as fn}from"@ag-grid-community/core";import{_ as ir,Autowired as Fe,BeanStub as vn,ModuleNames as sa,ModuleRegistry as ia,Optional as yn}from"@ag-grid-community/core";var ye=class Us extends vn{getData(e){if(e.crossFiltering){if(e.grouping)return console.warn("AG Grid: crossing filtering with row grouping is not supported."),{chartData:[],columnNames:{}};if(!this.gridOptionsService.isRowModelType("clientSide"))return console.warn("AG Grid: crossing filtering is only supported in the client side row model."),{chartData:[],columnNames:{}}}this.gridOptionsService.isRowModelType("serverSide")&&e.pivoting&&this.updatePivotKeysForSSRM();const r=this.extractRowsFromGridRowModel(e);return r.chartData=this.aggregateRowsByDimension(e,r.chartData),r}extractRowsFromGridRowModel(e){let t=[];const r={},s={},i={};let n={},o=[],l;if(e.crossFiltering)n=this.getFilteredRowNodes(),o=this.getAllRowNodes(),l=o.length;else{const c=this.gridRowModel.getRowCount()-1;l=(e.endRow>=0?Math.min(e.endRow,c):c)-e.startRow+1}for(let c=0;c<l;c++){const h={},d=e.crossFiltering?o[c]:this.gridRowModel.getRow(c+e.startRow);e.dimensionCols.forEach(u=>{const g=u.colId,m=this.columnModel.getGridColumn(g);if(m){const f=this.valueService.getValue(m,d);if(e.grouping){const C=f&&f.toString?String(f.toString()):"",v=Us.getGroupLabels(d,C);h[g]={labels:v,toString:function(){return this.labels.filter(S=>!!S).reverse().join(" - ")}},d.group&&(s[v.toString()]=c);const y=v.slice(1,v.length).toString();y&&(i[y]=s[y])}else h[g]=f}else h[J.DEFAULT_CATEGORY]=c+1}),e.valueCols.forEach(u=>{let g=[];const m=u.getColDef().pivotKeys;m&&(g=m.slice());const f=u.getColDef().headerName;f&&g.push(f),g.length>0&&(r[u.getId()]=g);const C=u.getColId();if(e.crossFiltering){const v=C+"-filtered-out",y=this.valueService.getValue(u,d),S=y!=null&&typeof y.toNumber=="function"?y.toNumber():y;n[d.id]?(h[C]=S,h[v]=e.aggFunc||e.isScatter?void 0:0):(h[C]=e.aggFunc||e.isScatter?void 0:0,h[v]=S)}else{let v=this.valueService.getValue(u,d);v&&v.hasOwnProperty("toString")&&(v=parseFloat(v.toString())),h[C]=v!=null&&typeof v.toNumber=="function"?v.toNumber():v}}),d.footer&&(h.footer=!0),t.push(h)}if(e.grouping){const c=ir.values(i),h=(d,u)=>!d.footer&&!ir.includes(c,u);t=t.filter(h)}return{chartData:t,columnNames:r}}aggregateRowsByDimension(e,t){const r=e.dimensionCols;if(!e.aggFunc||r.length===0)return t;const s=ir.last(r),i=s&&s.colId,n={},o=[];return t.forEach(l=>{let c=n;r.forEach(h=>{const d=h.colId,u=l[d];if(d===i){let g=c[u];g||(g={__children:[]},r.forEach(m=>{const f=m.colId;g[f]=l[f]}),c[u]=g,o.push(g)),g.__children.push(l)}else c[u]||(c[u]={}),c=c[u]})}),ia.__assertRegistered(sa.RowGroupingModule,"Charting Aggregation",this.context.getGridId())&&o.forEach(l=>e.valueCols.forEach(c=>{if(e.crossFiltering)e.valueCols.forEach(h=>{const d=h.getColId(),u=l.__children.filter(v=>typeof v[d]<"u").map(v=>v[d]);let g=this.aggregationStage.aggregateValues(u,e.aggFunc);l[h.getId()]=g&&typeof g.value<"u"?g.value:g;const m=`${d}-filtered-out`,f=l.__children.filter(v=>typeof v[m]<"u").map(v=>v[m]);let C=this.aggregationStage.aggregateValues(f,e.aggFunc);l[m]=C&&typeof C.value<"u"?C.value:C});else{const h=l.__children.map(u=>u[c.getId()]);let d=0;ia.__assertRegistered(sa.RowGroupingModule,"Charting Aggregation",this.context.getGridId())&&(d=this.aggregationStage.aggregateValues(h,e.aggFunc)),l[c.getId()]=d&&typeof d.value<"u"?d.value:d}})),o}updatePivotKeysForSSRM(){const e=this.columnModel.getSecondaryColumns();if(!e)return;const t=this.extractPivotKeySeparator(e);e.forEach(r=>{if(t==="")r.getColDef().pivotKeys=[];else{const s=r.getColId().split(t);r.getColDef().pivotKeys=s.slice(0,s.length-1)}})}extractPivotKeySeparator(e){if(e.length===0)return"";const t=(s,i)=>{const n=s.getGroupId();return s.getParent()?t(s.getParent(),n):i.split(n)[1][0]},r=e[0];return r.getParent()==null?"":t(r.getParent(),r.getColId())}static getGroupLabels(e,t){const r=[t];for(;e&&e.level!==0;)e=e.parent,e&&r.push(e.key);return r}getFilteredRowNodes(){const e={};return this.gridRowModel.forEachNodeAfterFilterAndSort(t=>{e[t.id]=t}),e}getAllRowNodes(){let e=[];return this.gridRowModel.forEachNode(t=>{e.push(t)}),this.sortRowNodes(e)}sortRowNodes(e){const t=this.sortController.getSortOptions();return!t||t.length==0?e:this.rowNodeSorter.doFullSort(e,t)}};p([Fe("rowModel")],ye.prototype,"gridRowModel",2),p([Fe("valueService")],ye.prototype,"valueService",2),p([Fe("columnModel")],ye.prototype,"columnModel",2),p([Fe("rowNodeSorter")],ye.prototype,"rowNodeSorter",2),p([Fe("sortController")],ye.prototype,"sortController",2),p([yn("aggregationStage")],ye.prototype,"aggregationStage",2);var Sn=ye;import{Autowired as nr,Bean as Tn,BeanStub as Pn}from"@ag-grid-community/core";var Oe=class extends Pn{getColumn(a){return this.columnModel.getPrimaryColumn(a)}getAllDisplayedColumns(){return this.columnModel.getAllDisplayedColumns()}getColDisplayName(a){return this.columnModel.getDisplayNameForColumn(a,"chart")}getRowGroupColumns(){return this.columnModel.getRowGroupColumns()}getGroupDisplayColumns(){return this.columnModel.getGroupDisplayColumns()}isPivotMode(){return this.columnModel.isPivotMode()}isPivotActive(){return this.columnModel.isPivotActive()}getChartColumns(){const a=this.columnModel.getAllDisplayedColumns(),e=new Set,t=new Set;return a.forEach(r=>{const s=r.getColDef(),i=s.chartDataType;if(i)switch(i){case"category":case"time":e.add(r);return;case"series":t.add(r);return;case"excluded":return;default:console.warn(`AG Grid: unexpected chartDataType value '${i}' supplied, instead use 'category', 'series' or 'excluded'`);break}if(s.colId==="ag-Grid-AutoColumn"){e.add(r);return}if(!r.isPrimary()){t.add(r);return}(this.isNumberCol(r)?t:e).add(r)}),{dimensionCols:e,valueCols:t}}isNumberCol(a){if(a.getColId()==="ag-Grid-AutoColumn")return!1;const e=this.rowRenderer.getRowNode({rowIndex:0,rowPinned:null});if(!e)return!1;let t=this.valueService.getValue(a,e);return t==null&&(t=this.extractLeafData(e,a)),t!=null&&typeof t.toNumber=="function"&&(t=t.toNumber()),typeof t=="number"}extractLeafData(a,e){if(!a.allLeafChildren)return null;for(let t=0;t<a.allLeafChildren.length;t++){const r=a.allLeafChildren[t],s=this.valueService.getValue(e,r);if(s!=null)return s}return null}};p([nr("columnModel")],Oe.prototype,"columnModel",2),p([nr("valueService")],Oe.prototype,"valueService",2),p([nr("rowRenderer")],Oe.prototype,"rowRenderer",2),Oe=p([Tn("chartColumnService")],Oe);import{BeanStub as bn,PostConstruct as An}from"@ag-grid-community/core";var or=class zs extends bn{constructor(e){var t;super(),this.suppressComboChartWarnings=!1,this.chartDataModel=e,this.seriesChartTypes=(t=e.params.seriesChartTypes)!=null?t:[]}init(){this.initComboCharts()}update(e){this.seriesChartTypes=e??this.seriesChartTypes,this.initComboCharts(),this.updateSeriesChartTypes()}initComboCharts(){const e=this.seriesChartTypes&&this.seriesChartTypes.length>0;(this.chartDataModel.chartType==="customCombo"||e)&&(this.chartDataModel.chartType="customCombo",this.savedCustomSeriesChartTypes=this.seriesChartTypes||[])}updateSeriesChartTypes(){if(this.chartDataModel.isComboChart()){if(this.seriesChartTypes=this.seriesChartTypes.map(e=>{const t=["groupedColumn","stackedColumn","stackedArea"].includes(e.chartType);return e.secondaryAxis=t?!1:e.secondaryAxis,e}),this.chartDataModel.chartType==="customCombo"){this.updateSeriesChartTypesForCustomCombo();return}this.updateChartSeriesTypesForBuiltInCombos()}}updateSeriesChartTypesForCustomCombo(){!(this.seriesChartTypes&&this.seriesChartTypes.length>0)&&!this.suppressComboChartWarnings&&console.warn("AG Grid: 'seriesChartTypes' are required when the 'customCombo' chart type is specified."),this.seriesChartTypes=this.seriesChartTypes.map(s=>(zs.SUPPORTED_COMBO_CHART_TYPES.includes(s.chartType)||(console.warn(`AG Grid: invalid chartType '${s.chartType}' supplied in 'seriesChartTypes', converting to 'line' instead.`),s.chartType="line"),s));const t=s=>{(!this.savedCustomSeriesChartTypes||this.savedCustomSeriesChartTypes.length===0)&&(this.savedCustomSeriesChartTypes=this.seriesChartTypes);const i=this.savedCustomSeriesChartTypes.find(n=>n.colId===s.colId);return i||(s.selected&&!this.suppressComboChartWarnings&&console.warn(`AG Grid: no 'seriesChartType' found for colId = '${s.colId}', defaulting to 'line'.`),{colId:s.colId,chartType:"line",secondaryAxis:!1})},r=this.chartDataModel.valueColState.map(t);this.seriesChartTypes=r,this.savedCustomSeriesChartTypes=r,this.suppressComboChartWarnings=!0}updateChartSeriesTypesForBuiltInCombos(){const{chartType:e,valueColState:t}=this.chartDataModel;let r=e==="columnLineCombo"?"groupedColumn":"stackedArea",s=e==="columnLineCombo"?"line":"groupedColumn";const i=t.filter(o=>o.selected),n=Math.ceil(i.length/2);this.seriesChartTypes=i.map((o,l)=>{const c=l>=n?s:r;return{colId:o.colId,chartType:c,secondaryAxis:!1}})}};or.SUPPORTED_COMBO_CHART_TYPES=["line","groupedColumn","stackedColumn","area","stackedArea"],p([An],or.prototype,"init",1);var xn=or,Mn=["area","bar","column","histogram","line","pie","donut","scatter","bubble","radial-column","radial-bar","radar-line","radar-area","nightingale","range-bar","range-area","box-plot","treemap","sunburst","heatmap","waterfall"];function na(a){switch(a){case"rangeBar":case"rangeArea":case"waterfall":case"boxPlot":case"radarLine":case"radarArea":case"nightingale":case"radialColumn":case"radialBar":case"sunburst":case"treemap":case"heatmap":return!0;default:return!1}}var En=new Set(["bar","groupedBar","stackedBar","normalizedBar"]);function Z(a){return En.has(a)}var wn=new Set(["stackedColumn","normalizedColumn","stackedBar","normalizedBar"]);function On(a){return wn.has(a)}function le(a){switch(a){case"area":case"areaColumnCombo":case"bar":case"boxPlot":case"bubble":case"column":case"columnLineCombo":case"customCombo":case"groupedBar":case"groupedColumn":case"heatmap":case"histogram":case"line":case"normalizedArea":case"normalizedBar":case"normalizedColumn":case"rangeArea":case"rangeBar":case"scatter":case"stackedArea":case"stackedBar":case"stackedColumn":case"waterfall":return!0;case"donut":case"doughnut":case"nightingale":case"pie":case"radarArea":case"radarLine":case"radialColumn":case"radialBar":case"sunburst":case"treemap":default:return!1}}function Dn(a){switch(a){case"donut":case"doughnut":case"pie":case"radialColumn":case"radialBar":case"radarLine":case"radarArea":case"nightingale":return!0;default:return!1}}function kn(a){switch(a){case"radialColumn":case"radialBar":return!0;default:return!1}}function Se(a){switch(a){case"treemap":case"sunburst":return!0;default:return!1}}function Ln(a){switch(a){case"treemap":case"sunburst":case"heatmap":return!0;default:return!1}}function Ge(a){switch(a){case"doughnut":return"donut";default:return a}}function j(a){switch(a){case"bar":case"groupedBar":case"stackedBar":case"normalizedBar":return"bar";case"column":case"groupedColumn":case"stackedColumn":case"normalizedColumn":return"bar";case"line":return"line";case"area":case"stackedArea":case"normalizedArea":return"area";case"bubble":return"bubble";case"scatter":return"scatter";case"histogram":return"histogram";case"radialColumn":return"radial-column";case"radialBar":return"radial-bar";case"radarLine":return"radar-line";case"radarArea":return"radar-area";case"nightingale":return"nightingale";case"rangeBar":return"range-bar";case"rangeArea":return"range-area";case"boxPlot":return"box-plot";case"treemap":return"treemap";case"sunburst":return"sunburst";case"pie":return"pie";case"donut":case"doughnut":return"donut";case"heatmap":return"heatmap";case"waterfall":return"waterfall";default:return"cartesian"}}function lr(a){switch(a){case"pie":case"donut":return!0;default:return!1}}function Rn(a){return a==="pie"||a==="waterfall"||a==="histogram"}function cr(a){return Se(a)?void 0:1}function Ct(a){return Se(a)?2:Rn(a)?1:void 0}function oa(a){switch(a){case"column":case"groupedColumn":case"stackedColumn":case"normalizedColumn":case"bar":case"groupedBar":case"stackedBar":case"normalizedBar":case"line":case"donut":case"doughnut":case"area":case"stackedArea":case"normalizedArea":case"radarLine":case"radarArea":case"nightingale":case"radialColumn":case"radialBar":return!0;case"pie":case"scatter":case"bubble":case"sunburst":case"rangeBar":case"rangeArea":case"boxPlot":case"histogram":case"treemap":case"heatmap":case"waterfall":case"columnLineCombo":case"areaColumnCombo":case"customCombo":return!1}}var Ve=class Wr extends Cn{constructor(e){super(),this.unlinked=!1,this.chartData=[],this.valueColState=[],this.dimensionColState=[],this.columnNames={},this.crossFiltering=!1,this.grouping=!1,this.params=e,this.chartId=e.chartId,this.chartType=e.chartType,this.pivotChart=e.pivotChart,this.chartThemeName=e.chartThemeName,this.switchCategorySeries=!!e.switchCategorySeries,this.aggFunc=e.aggFunc,this.referenceCellRange=e.cellRange,this.suppliedCellRange=e.cellRange,this.suppressChartRanges=e.suppressChartRanges,this.unlinked=!!e.unlinkChart,this.crossFiltering=!!e.crossFiltering}init(){this.datasource=this.createManagedBean(new Sn),this.chartColumnService=this.createManagedBean(new Oe),this.comboChartModel=this.createManagedBean(new xn(this)),this.updateCellRanges({setColsFromRange:!0}),this.updateData()}updateModel(e){const{cellRange:t,chartType:r,pivotChart:s,chartThemeName:i,switchCategorySeries:n,aggFunc:o,suppressChartRanges:l,unlinkChart:c,crossFiltering:h,seriesChartTypes:d}=e;t!==this.suppliedCellRange&&(this.dimensionCellRange=void 0,this.valueCellRange=void 0),this.chartType=r,this.pivotChart=s,this.chartThemeName=i,this.switchCategorySeries=!!n,this.aggFunc=o,this.referenceCellRange=t,this.suppliedCellRange=t,this.suppressChartRanges=l,this.unlinked=!!c,this.crossFiltering=!!h,this.updateSelectedDimensions(t?.columns),this.updateCellRanges(),(this.isComboChart()||d)&&this.comboChartModel.update(d),this.unlinked||this.updateData()}updateCellRanges(e){const{updatedColState:t,resetOrder:r,maintainColState:s,setColsFromRange:i}=e??{};this.valueCellRange&&(this.referenceCellRange=this.valueCellRange);const{dimensionCols:n,valueCols:o}=this.chartColumnService.getChartColumns(),l=this.getAllColumnsFromRanges();t&&this.updateColumnState(t,r),this.setDimensionCellRange(n,l,t),this.setValueCellRange(o,l,i),!t&&!s&&(this.resetColumnState(),this.syncDimensionCellRange()),this.comboChartModel.updateSeriesChartTypes()}updateData(){const{startRow:e,endRow:t}=this.getRowIndexes();this.pivotChart&&this.resetColumnState(),this.grouping=this.isGrouping();const r={aggFunc:this.aggFunc,dimensionCols:this.getSelectedDimensions(),grouping:this.grouping,pivoting:this.isPivotActive(),crossFiltering:this.crossFiltering,valueCols:this.getSelectedValueCols(),startRow:e,endRow:t,isScatter:mt.includes(["scatter","bubble"],this.chartType)},{chartData:s,columnNames:i}=this.datasource.getData(r);this.chartData=s,this.columnNames=i}isGrouping(){const e=this.gridOptionsService.get("treeData"),t=e?null:this.chartColumnService.getRowGroupColumns(),r=e||t&&t.length>0,s=this.getSelectedDimensions().map(({colId:o})=>o),n=this.chartColumnService.getGroupDisplayColumns().map(o=>o.getColId()).some(o=>s.includes(o));return!!r&&n}getSelectedValueCols(){return this.valueColState.filter(e=>e.selected).map(e=>e.column)}getSelectedDimensions(){return this.dimensionColState.filter(e=>e.selected)}getColDisplayName(e){return this.chartColumnService.getColDisplayName(e)}isPivotMode(){return this.chartColumnService.isPivotMode()}getChartDataType(e){const t=this.chartColumnService.getColumn(e);return t?t.getColDef().chartDataType:void 0}isPivotActive(){return this.chartColumnService.isPivotActive()}createCellRange(e,...t){return{id:this.chartId,startRow:this.referenceCellRange.startRow,endRow:this.referenceCellRange.endRow,columns:t,startColumn:e===_e.DIMENSION?t[0]:this.referenceCellRange.startColumn,type:e}}getAllColumnsFromRanges(){if(this.pivotChart)return mt.convertToSet(this.chartColumnService.getAllDisplayedColumns());const e=this.dimensionCellRange||this.valueCellRange?[]:this.referenceCellRange.columns;return this.dimensionCellRange&&e.push(...this.dimensionCellRange.columns),this.valueCellRange&&e.push(...this.valueCellRange.columns),mt.convertToSet(e)}getRowIndexes(){let e=0,t=0;const{rangeService:r,valueCellRange:s,dimensionCellRange:i}=this,n=s||i;if(r&&n){e=r.getRangeStartRow(n).rowIndex;const o=r.getRangeEndRow(n);t=o.rowPinned==="bottom"?-1:o.rowIndex}return{startRow:e,endRow:t}}resetColumnState(){const{dimensionCols:e,valueCols:t}=this.chartColumnService.getChartColumns(),r=this.getAllColumnsFromRanges(),s=this.valueColState.length<1;this.dimensionColState=[],this.valueColState=[];const i=Se(this.chartType);let n=!1,o=1;const l=this.suppliedCellRange.columns[0];e.forEach(d=>{const u=d.getColId()==="ag-Grid-AutoColumn";let g=!1;this.crossFiltering&&this.aggFunc?l.getColId()===d.getColId()&&(g=!0):g=u?!0:(!n||i)&&r.has(d),this.dimensionColState.push({column:d,colId:d.getColId(),displayName:this.getColDisplayName(d),selected:g,order:o++}),g&&(n=!0)});const c={colId:Wr.DEFAULT_CATEGORY,displayName:this.chartTranslationService.translate("defaultCategory"),selected:!n,order:0};this.dimensionColState.unshift(c);const h=this.referenceCellRange.columns.filter(d=>t.has(d));t.forEach(d=>{s&&mt.includes(this.referenceCellRange.columns,d)&&(d=h.shift()),this.valueColState.push({column:d,colId:d.getColId(),displayName:this.getColDisplayName(d),selected:r.has(d),order:o++})})}updateColumnState(e,t){const r=h=>h.colId===e.colId,{dimensionColState:s,valueColState:i}=this,n=s.find(r),o=i.find(r);if(n)if(Se(this.chartType))n.selected=e.selected;else{const d=e.selected?n:s.filter(u=>u!==n).find(({selected:u})=>u);s.forEach(u=>u.selected=u===d)}else o&&(o.selected=e.selected);const l=[...s,...i],c=[];t||(l.forEach((h,d)=>{d===e.order&&c.push(e.colId),h.colId!==e.colId&&c.push(h.colId)}),l.forEach(h=>{const d=c.indexOf(h.colId);h.order=d>=0?c.indexOf(h.colId):l.length-1})),this.reorderColState()}reorderColState(){const e=(t,r)=>t.order-r.order;this.dimensionColState.sort(e),this.valueColState.sort(e)}setDimensionCellRange(e,t,r){this.dimensionCellRange=void 0;const s=Se(this.chartType);if(!r&&!this.dimensionColState.length){const l=new Array;e.forEach(c=>{l.length>0&&!s||!t.has(c)||l.push(c)}),l.length>0&&(this.dimensionCellRange=this.createCellRange(_e.DIMENSION,...l));return}let i=r?[r]:[];if(this.crossFiltering&&this.aggFunc){const l=this.suppliedCellRange.columns[0];i=this.dimensionColState.filter(c=>c.colId===l.getColId())}else(s||i.length===0||i.some(({column:l})=>!l||!e.has(l)))&&(i=this.dimensionColState.filter(l=>l.selected));const n=i.length===1?i[0].colId===Wr.DEFAULT_CATEGORY:!1,o=i.map(({column:l})=>l).filter(l=>l!=null);o.length>0&&!n&&(this.dimensionCellRange=this.createCellRange(_e.DIMENSION,...o))}setValueCellRange(e,t,r){this.valueCellRange=void 0;const s=[],i=Ct(this.chartType);let n=0;if(e.forEach(o=>{r?(i==null||n<i)&&t.has(o)&&(s.push(o),n++):this.valueColState.some(l=>l.selected&&l.colId===o.getColId())&&s.push(o)}),s.length>0){let o=[];this.valueColState.length>0?o=this.valueColState.map(l=>l.colId):t.forEach(l=>o.push(l.getColId())),s.sort((l,c)=>o.indexOf(l.getColId())-o.indexOf(c.getColId())),this.valueCellRange=this.createCellRange(_e.VALUE,...s)}}resetCellRanges(e,t){if(!e&&!t)return;const{dimensionCols:r,valueCols:s}=this.chartColumnService.getChartColumns(),i=this.getAllColumnsFromRanges();e&&this.setDimensionCellRange(r,i),t&&this.setValueCellRange(s,i)}updateSelectedDimensions(e){const t=new Set(e.map(s=>s.getColId()));if(Se(this.chartType)){const s=this.dimensionColState.filter(n=>t.has(n.colId)),i=new Set(s.map(n=>n.colId));this.dimensionColState=this.dimensionColState.map(n=>A(T({},n),{selected:i.has(n.colId)}))}else{const i=(this.dimensionColState.find(n=>t.has(n.colId))||this.dimensionColState[0]).colId;this.dimensionColState=this.dimensionColState.map(n=>A(T({},n),{selected:n.colId===i}))}}syncDimensionCellRange(){const e=this.getSelectedDimensions();if(e.length===0)return;const t=e.map(({column:r})=>r).filter(r=>r!=null);t.length>0&&(this.dimensionCellRange=this.createCellRange(_e.DIMENSION,...t))}isComboChart(e){return["columnLineCombo","areaColumnCombo","customCombo"].includes(e??this.chartType)}};Ve.DEFAULT_CATEGORY="AG-GRID-DEFAULT-CATEGORY",p([aa("rangeService")],Ve.prototype,"rangeService",2),p([aa("chartTranslationService")],Ve.prototype,"chartTranslationService",2),p([fn],Ve.prototype,"init",1);var J=Ve;import{_Theme as In,_ModuleSupport as _n}from"ag-charts-community";import{_ as la}from"@ag-grid-community/core";import{_Theme as ca}from"ag-charts-community";var ha=["number","category","grouped-category","log","time"];function Fn(a){switch(a){case"bar":case"stackedBar":case"normalizedBar":return["number","category"];case"groupedBar":return["number","grouped-category"];case"column":case"stackedColumn":case"normalizedColumn":case"line":case"area":case"stackedArea":case"normalizedArea":case"histogram":return["category","number"];case"groupedColumn":return["grouped-category","number"];case"scatter":case"bubble":return["number","number"];default:return}}function Gn(a){return Array.isArray(a)?[]:{}}function Ne(a,e){return e.clone!==!1&&e.isMergeableObject(a)?De(Gn(a),a,e):a}function Vn(a,e,t){return a.concat(e).map(function(r){return Ne(r,t)})}function Nn(a,e){if(!e.customMerge)return De;const t=e.customMerge(a);return typeof t=="function"?t:De}function Bn(a){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(a).filter(function(e){return a.propertyIsEnumerable(e)}):[]}function da(a){return Object.keys(a).concat(Bn(a))}function ua(a,e){try{return e in a}catch{return!1}}function Un(a,e){return ua(a,e)&&!(Object.hasOwnProperty.call(a,e)&&Object.propertyIsEnumerable.call(a,e))}function zn(a={},e={},t){const r={};return t.isMergeableObject(a)&&da(a).forEach(function(s){r[s]=Ne(a[s],t)}),da(e).forEach(function(s){Un(a,s)||(ua(a,s)&&t.isMergeableObject(e[s])?r[s]=Nn(s,t)(a[s],e[s],t):r[s]=Ne(e[s],t))}),r}function Hn(a){return Wn(a)&&!Yn(a)}function Wn(a){return!!a&&typeof a=="object"}function Yn(a){const e=Object.prototype.toString.call(a);return e==="[object RegExp]"||e==="[object Date]"}function De(a,e,t){t=t||{},t.arrayMerge=t.arrayMerge||Vn,t.isMergeableObject=t.isMergeableObject||Hn,t.cloneUnlessOtherwiseSpecified=Ne;const r=Array.isArray(e),s=Array.isArray(a);return r===s?r?t.arrayMerge(a,e,t):zn(a,e,t):Ne(e,t)}function Te(a,e,t){if(a==null)return t;const r=e.split(".");let s=a;for(;r.length>1;)if(s=s[r.shift()],s==null)return t;const i=s[r[0]];return i??t}function Kn(a,e,t){if(a==null)return;const r=e.split(".");let s=a;r.forEach((i,n)=>{s[i]||(s[i]={}),n<r.length-1&&(s=s[i])}),s[r[r.length-1]]=t}function $n(a,e){var t;const{chartOptionsToRestore:r,chartPaletteToRestore:s,chartThemeToRestore:i}=a,n=Qn(a),o=hr(n),l=o?{baseTheme:n}:(t=pa(a,n))!=null?t:{},c=a.getGridOptionsChartThemeOverrides(),h=a.apiChartThemeOverrides,d=j(a.chartType),u=lr(d)?d:"cartesian",g=a.crossFiltering?qn(e,a,u):void 0,m=T({},r??{}),v=[o?Jn(a,(()=>{const y=S=>S?Object.keys(S).some(P=>Te(S[P],"title.enabled",!1)):!1;return y(c)||y(h)})()):void 0,g,c,h,m].filter(y=>!!y).reduce((y,S)=>({baseTheme:y,overrides:S}),l);if(s&&n===i){const y=ca.getChartTheme(l).palette;Xn(s,y)||(v.palette=s)}return v}function jn(a,e){return e.reduce((t,r)=>r?{baseTheme:t,overrides:r}:t,a)}function Xn(a,e){const t=(r,s)=>r.length!==s.length?!1:r.every((i,n)=>i===s[n]);return t(a.fills,e.fills)&&t(a.strokes,e.strokes)}function hr(a){return la.includes(Object.keys(ca.themes),a)}function qn(a,e,t){const r={listeners:{legendItemClick:i=>{a.getChart().series.forEach(o=>{o.toggleSeriesItem(i.itemId,i.enabled),o.toggleSeriesItem(`${i.itemId}-filtered-out`,i.enabled)})}}},s={};return{[t]:{tooltip:{delay:500},legend:r,listeners:{click:i=>e.crossFilterCallback(i,!0)},series:s}}}var Zn=ha.reduce((a,e)=>A(T({},a),{[e]:{title:{_enabledFromTheme:!0}}}),{});function Jn(a,e){const t=a.getExtraPaddingDirections();return{common:{animation:{duration:500},axes:Zn,padding:{top:!e&&t.includes("top")?40:20,right:t.includes("right")?30:20,bottom:t.includes("bottom")?40:20,left:t.includes("left")?30:20}},pie:{series:{title:{_enabledFromTheme:!0},calloutLabel:{_enabledFromTheme:!0},sectorLabel:{enabled:!1,_enabledFromTheme:!0}}},donut:{series:{title:{_enabledFromTheme:!0},calloutLabel:{_enabledFromTheme:!0},sectorLabel:{enabled:!1,_enabledFromTheme:!0}}}}}function Qn(a){let e=a.getChartThemeName();const t=a.getChartThemes();return la.includes(t,e)||(e=t[0]),e}function pa(a,e){const{customChartThemes:t}=a,r=t&&t[e];return r||console.warn(`AG Grid: no stock theme exists with the name '${e}' and no custom chart theme with that name was supplied to 'customChartThemes'`),r}var ft=a=>e=>e==null?!0:a(e),ga=a=>typeof a=="string",ma=a=>typeof a=="boolean",eo=a=>typeof a=="object",Q=(a,e)=>t=>`AG Grid - unable to update chart as invalid params supplied:  \`${a}: ${t}\`, expected ${e}.`,_=class B{static isValidChartType(e){return B.validChartTypes.includes(e)}static isLegacyChartType(e){return B.legacyChartTypes.includes(e)}static validateChartParams(e){switch(e.type){case"rangeChartUpdate":return B.validateUpdateRangeChartParams(e);case"pivotChartUpdate":return B.validateUpdatePivotChartParams(e);case"crossFilterChartUpdate":return B.validateUpdateCrossFilterChartParams(e);default:return console.warn(`AG Grid - Invalid value supplied for 'type': ${e.type}. It must be either 'rangeChartUpdate', 'pivotChartUpdate', or 'crossFilterChartUpdate'.`),!1}}static validateUpdateRangeChartParams(e){const t=[...B.commonValidations,...B.cellRangeValidations,{property:"seriesChartTypes",validationFn:r=>r===void 0||Array.isArray(r)&&r.every(eo),warnMessage:Q("seriesChartTypes","Array of SeriesChartType")}];return B.validateProperties(e,t,["type","chartId","chartType","chartThemeName","chartThemeOverrides","unlinkChart","cellRange","suppressChartRanges","aggFunc","seriesChartTypes"],"UpdateRangeChartParams")}static validateUpdatePivotChartParams(e){const t=[...B.commonValidations];return B.validateProperties(e,t,["type","chartId","chartType","chartThemeName","chartThemeOverrides","unlinkChart"],"UpdatePivotChartParams")}static validateUpdateCrossFilterChartParams(e){const t=[...B.commonValidations,...B.cellRangeValidations];return B.validateProperties(e,t,["type","chartId","chartType","chartThemeName","chartThemeOverrides","unlinkChart","cellRange","suppressChartRanges","aggFunc"],"UpdateCrossFilterChartParams")}static validateProperties(e,t,r,s){let i;for(const n of t){const{property:o,validationFn:l,warnMessage:c}=n;if(o in e){const h=e[o],d=l(h);if(d===!0)continue;if(d===!1)return console.warn(c(h)),!1;i=i||T({},e),i[o]=d}}for(const n in e)if(!r.includes(n))return console.warn(`AG Grid - Unexpected property supplied. ${s} does not contain: \`${n}\`.`),!1;return i||!0}};_.validChartTypes=["column","groupedColumn","stackedColumn","normalizedColumn","bar","groupedBar","stackedBar","normalizedBar","line","scatter","bubble","pie","donut","area","stackedArea","normalizedArea","histogram","radialColumn","radialBar","radarLine","radarArea","nightingale","rangeBar","rangeArea","boxPlot","treemap","sunburst","heatmap","waterfall","columnLineCombo","areaColumnCombo","customCombo"],_.legacyChartTypes=["doughnut"],_.validateChartType=ft(a=>{if(_.isValidChartType(a))return!0;if(_.isLegacyChartType(a)){const e=Ge(a);return console.warn(`AG Grid - The chart type '${a}' has been deprecated. Please use '${e}' instead.`),e}return!1}),_.validateAgChartThemeOverrides=ft(a=>typeof a=="object"),_.validateChartParamsCellRange=ft(a=>typeof a=="object"),_.validateAggFunc=ft(a=>typeof a=="string"||typeof a=="function"),_.commonValidations=[{property:"chartId",validationFn:ga,warnMessage:Q("chartId","string")},{property:"chartType",validationFn:_.validateChartType,warnMessage:Q("chartType",_.validChartTypes.join(", "))},{property:"chartThemeName",validationFn:ga,warnMessage:Q("chartThemeName","string")},{property:"chartThemeOverrides",validationFn:_.validateAgChartThemeOverrides,warnMessage:Q("chartThemeOverrides","AgChartThemeOverrides")},{property:"unlinkChart",validationFn:ma,warnMessage:Q("unlinkChart","boolean")}],_.cellRangeValidations=[{property:"cellRange",validationFn:_.validateChartParamsCellRange,warnMessage:Q("cellRange","ChartParamsCellRange")},{property:"suppressChartRanges",validationFn:ma,warnMessage:Q("suppressChartRanges","boolean")},{property:"aggFunc",validationFn:_.validateAggFunc,warnMessage:Q("aggFunc","string or IAggFunc")}];var to=_,Ca=["ag-default","ag-material","ag-sheets","ag-polychroma","ag-vivid"],ee=class Me extends gn{constructor(e){super(),this.model=e,this.isEnterprise=()=>_n.enterpriseModule.isEnterprise}init(){this.setChartRange(),this.addManagedListener(this.eventService,q.EVENT_RANGE_SELECTION_CHANGED,e=>{e.id&&e.id===this.model.chartId&&this.updateForRangeChange()}),this.model.unlinked&&this.rangeService&&this.rangeService.setCellRanges([]),this.addManagedListener(this.eventService,q.EVENT_COLUMN_MOVED,this.updateForGridChange.bind(this)),this.addManagedListener(this.eventService,q.EVENT_COLUMN_PINNED,this.updateForGridChange.bind(this)),this.addManagedListener(this.eventService,q.EVENT_COLUMN_VISIBLE,this.updateForGridChange.bind(this)),this.addManagedListener(this.eventService,q.EVENT_COLUMN_ROW_GROUP_CHANGED,this.updateForGridChange.bind(this)),this.addManagedListener(this.eventService,q.EVENT_MODEL_UPDATED,this.updateForGridChange.bind(this)),this.addManagedListener(this.eventService,q.EVENT_CELL_VALUE_CHANGED,this.updateForDataChange.bind(this))}update(e){if(!this.validUpdateType(e))return!1;const t=to.validateChartParams(e);if(!t)return!1;const r=t===!0?e:t;return this.applyValidatedChartParams(r),!0}applyValidatedChartParams(e){var t,r,s,i,n,o,l,c;const{chartId:h,chartType:d,chartThemeName:u,unlinkChart:g}=e,m={chartId:h,pivotChart:this.model.pivotChart,chartType:d??this.model.chartType,chartThemeName:u??this.model.chartThemeName,unlinkChart:g??this.model.unlinked,cellRange:this.model.suppliedCellRange,switchCategorySeries:this.model.switchCategorySeries,aggFunc:this.model.aggFunc,seriesChartTypes:void 0,suppressChartRanges:!1,crossFiltering:!1};let f=T({},m);switch(e.type){case"rangeChartUpdate":f.cellRange=(t=this.createCellRange(e))!=null?t:this.model.suppliedCellRange,f.switchCategorySeries=(r=e.switchCategorySeries)!=null?r:this.model.switchCategorySeries,f.aggFunc=(s=e.aggFunc)!=null?s:this.model.aggFunc,f.seriesChartTypes=e.seriesChartTypes,f.suppressChartRanges=(i=e.suppressChartRanges)!=null?i:this.model.suppressChartRanges;break;case"crossFilterChartUpdate":f.cellRange=(n=this.createCellRange(e))!=null?n:this.model.suppliedCellRange,f.switchCategorySeries=!1,f.aggFunc=(o=e.aggFunc)!=null?o:this.model.aggFunc,f.crossFiltering=!0,f.suppressChartRanges=(l=e.suppressChartRanges)!=null?l:this.model.suppressChartRanges;break;case"pivotChartUpdate":f.switchCategorySeries=!1;break}this.model.updateModel(f),f.unlinkChart||f.suppressChartRanges?(c=this.rangeService)==null||c.setCellRanges([]):this.setChartRange()}updateForGridChange(e){if(this.model.unlinked)return;const{maintainColState:t,setColsFromRange:r}=e??{};this.model.updateCellRanges({maintainColState:t,setColsFromRange:r}),this.model.updateData(),this.setChartRange()}updateForDataChange(){this.model.unlinked||(this.model.updateData(),this.raiseChartModelUpdateEvent())}updateForRangeChange(){this.updateForGridChange({setColsFromRange:!0}),this.raiseChartRangeSelectionChangedEvent()}updateForPanelChange(e,t){this.model.updateCellRanges({updatedColState:e,resetOrder:t}),this.model.updateData(),this.setChartRange(),this.raiseChartRangeSelectionChangedEvent()}updateThemeOverrides(e){this.chartProxy.updateThemeOverrides(e)}getChartUpdateParams(e){const r=this.getSelectedValueColState().map(o=>({colId:o.colId,displayName:o.displayName})),s=this.getChartData(),i=this.getSelectedDimensions(),n={data:s,grouping:this.isGrouping(),categories:i.map(o=>({id:o.colId,name:o.displayName,chartDataType:this.model.getChartDataType(o.colId)})),fields:r,chartId:this.getChartId(),getCrossFilteringContext:()=>({lastSelectedChartId:"xxx"}),seriesChartTypes:this.getSeriesChartTypes(),updatedOverrides:e};return this.isCategorySeriesSwitched()?this.invertCategorySeriesParams(n):n}invertCategorySeriesParams(e){const[t]=e.categories,r=[{id:J.DEFAULT_CATEGORY,name:""}],s=e.data.map((n,o)=>{const l=`${t.id}:${o}`,c=n[t.id],h=c==null?"":String(c);return{colId:l,displayName:h}}),i=e.fields.map(n=>{const o={[J.DEFAULT_CATEGORY]:n.displayName};for(const[l,c]of e.data.entries()){const h=`${t.id}:${l}`,d=c[n.colId];o[h]=d}return o});return A(T({},e),{categories:r,fields:s,data:i})}getChartModel(){const e=this.model.pivotChart?"pivot":"range",t=this.isComboChart()?this.model.comboChartModel.seriesChartTypes:void 0;return{modelType:e,chartId:this.model.chartId,chartType:this.model.chartType,chartThemeName:this.getChartThemeName(),chartOptions:this.chartProxy.getChartThemeOverrides(),chartPalette:this.chartProxy.getChartPalette(),cellRange:this.getCellRangeParams(),switchCategorySeries:this.model.switchCategorySeries,suppressChartRanges:this.model.suppressChartRanges,aggFunc:this.model.aggFunc,unlinkChart:this.model.unlinked,seriesChartTypes:t}}getChartId(){return this.model.chartId}getChartData(){return this.model.chartData}getChartType(){return this.model.chartType}setChartType(e){this.updateMultiSeriesAndCategory(this.model.chartType,e),this.model.chartType=e,this.model.comboChartModel.updateSeriesChartTypes(),this.model.switchCategorySeries=!1,this.raiseChartModelUpdateEvent(),this.raiseChartOptionsChangedEvent()}isCategorySeriesSwitched(){return this.model.switchCategorySeries}switchCategorySeries(e){oa(this.getChartType())&&(this.model.switchCategorySeries=e,this.raiseChartModelUpdateEvent())}getAggFunc(){return this.model.aggFunc}setAggFunc(e,t){this.model.aggFunc!==e&&(this.model.aggFunc=e,!t&&(this.model.updateData(),this.raiseChartModelUpdateEvent()))}updateMultiSeriesAndCategory(e,t){var r,s;const i=(h,d)=>{let u=0;for(const g of h)g.selected&&(u>=d?g.selected=!1:u++);u===0&&(h[0].selected=!0)},n=cr(t),o=Ct(t),l=n!=null&&((r=cr(e))!=null?r:100)>(n??100),c=o!=null&&((s=Ct(e))!=null?s:100)>(o??100);l&&i(this.model.dimensionColState,n),c&&i(this.model.valueColState,o),(l||c)&&(this.model.resetCellRanges(l,c),this.setChartRange(!0))}setChartThemeName(e,t){this.model.chartThemeName=e,t||(this.raiseChartModelUpdateEvent(),this.raiseChartOptionsChangedEvent())}getChartThemeName(){return this.model.chartThemeName}isPivotChart(){return this.model.pivotChart}isPivotMode(){return this.model.isPivotMode()}isGrouping(){return this.model.isGrouping()}isCrossFilterChart(){return this.model.crossFiltering}getThemeNames(){return this.gridOptionsService.get("chartThemes")||Ca}getThemes(){return this.getThemeNames().map(t=>{const s=hr(t)?t:this.chartProxy.lookupCustomChartTheme(t);return In.getChartTheme(s)})}getPalettes(){return this.getThemes().map(t=>t.palette)}getThemeTemplateParameters(){return this.getThemes().map(t=>t.getTemplateParameters())}getValueColState(){return this.model.valueColState.map(this.displayNameMapper.bind(this))}getSelectedValueColState(){return this.getValueColState().filter(e=>e.selected)}getSelectedDimensions(){return this.model.getSelectedDimensions()}displayNameMapper(e){const t=this.model.columnNames[e.colId];return e.displayName=t?t.join(" - "):this.model.getColDisplayName(e.column),e}getColStateForMenu(){return{dimensionCols:this.model.dimensionColState,valueCols:this.getValueColState()}}setChartRange(e=!1){this.rangeService&&!this.model.suppressChartRanges&&!this.model.unlinked&&this.rangeService.setCellRanges(this.getCellRanges()),e||this.raiseChartModelUpdateEvent()}detachChartRange(){this.model.unlinked=!this.model.unlinked,this.model.unlinked?this.rangeService&&this.rangeService.setCellRanges([]):this.updateForGridChange(),this.dispatchEvent({type:Me.EVENT_CHART_LINKED_CHANGED})}setChartProxy(e){this.chartProxy=e}getChartProxy(){return this.chartProxy}isActiveXYChart(){return un.includes(["scatter","bubble"],this.getChartType())}isChartLinked(){return!this.model.unlinked}customComboExists(){const e=this.model.comboChartModel.savedCustomSeriesChartTypes;return e&&e.length>0}getSeriesChartTypes(){return this.model.comboChartModel.seriesChartTypes}isComboChart(e){return this.model.isComboChart(e)}updateSeriesChartType(e,t,r){const s=this.model.comboChartModel.seriesChartTypes.find(i=>i.colId===e);if(s){const i=this.model.chartType!=="customCombo";i&&(this.model.chartType="customCombo");const n=s.chartType;t!=null&&(s.chartType=t),r!=null&&(s.secondaryAxis=r),this.model.comboChartModel.savedCustomSeriesChartTypes=this.model.comboChartModel.seriesChartTypes,this.model.comboChartModel.updateSeriesChartTypes(),this.updateForDataChange(),i&&this.dispatchEvent({type:Me.EVENT_CHART_TYPE_CHANGED}),n!==t&&this.dispatchEvent({type:Me.EVENT_CHART_SERIES_CHART_TYPE_CHANGED}),this.raiseChartOptionsChangedEvent()}}getActiveSeriesChartTypes(){const e=this.getSelectedValueColState().map(t=>t.colId);return this.getSeriesChartTypes().filter(t=>e.includes(t.colId))}getChartSeriesTypes(e){const t=e??this.getChartType(),r=["line","bar","area"];return this.isComboChart(t)?r:[j(t)]}getCellRanges(){return[this.model.dimensionCellRange,this.model.valueCellRange].filter(e=>e)}createCellRange(e){var t;return e.cellRange&&((t=this.rangeService)==null?void 0:t.createCellRangeFromCellRangeParams(e.cellRange))}validUpdateType(e){var t;if(!e.type)return console.warn("AG Grid - Unable to update chart as the 'type' is missing. It must be either 'rangeChartUpdate', 'pivotChartUpdate', or 'crossFilterChartUpdate'."),!1;const r={"Range Chart":()=>!this.isPivotChart()&&!this.isCrossFilterChart(),"Pivot Chart":()=>this.isPivotChart(),"Cross Filter Chart":()=>this.isCrossFilterChart()},s=(t=Object.keys(r).find(n=>r[n]()))!=null?t:"Range Chart",i=e.type===`${s[0].toLowerCase()}${s.slice(1).replace(/ /g,"")}Update`;return i||console.warn(`AG Grid - Unable to update chart as a '${e.type}' update type is not permitted on a ${s}.`),i}getCellRangeParams(){const e=this.getCellRanges(),t=e[0],r=t&&t.startRow||null,s=t&&t.endRow||null;return{rowStartIndex:r&&r.rowIndex,rowStartPinned:r&&r.rowPinned,rowEndIndex:s&&s.rowIndex,rowEndPinned:s&&s.rowPinned,columns:e.reduce((i,n)=>i.concat(n.columns.map(o=>o.getId())),[])}}raiseChartModelUpdateEvent(){const e={type:Me.EVENT_CHART_MODEL_UPDATE};this.dispatchEvent(e)}raiseChartUpdatedEvent(){const e={type:Me.EVENT_CHART_UPDATED};this.dispatchEvent(e)}raiseChartApiUpdateEvent(){const e={type:Me.EVENT_CHART_API_UPDATE};this.dispatchEvent(e)}raiseChartOptionsChangedEvent(){const{chartId:e,chartType:t}=this.getChartModel(),r={type:q.EVENT_CHART_OPTIONS_CHANGED,chartId:e,chartType:t,chartThemeName:this.getChartThemeName(),chartOptions:this.chartProxy.getChartThemeOverrides()};this.eventService.dispatchEvent(r)}raiseChartRangeSelectionChangedEvent(){const e={type:q.EVENT_CHART_RANGE_SELECTION_CHANGED,id:this.model.chartId,chartId:this.model.chartId,cellRange:this.getCellRangeParams()};this.eventService.dispatchEvent(e)}destroy(){super.destroy(),this.rangeService&&this.rangeService.setCellRanges([])}};ee.EVENT_CHART_UPDATED="chartUpdated",ee.EVENT_CHART_API_UPDATE="chartApiUpdate",ee.EVENT_CHART_MODEL_UPDATE="chartModelUpdate",ee.EVENT_CHART_TYPE_CHANGED="chartTypeChanged",ee.EVENT_CHART_SERIES_CHART_TYPE_CHANGED="chartSeriesChartTypeChanged",ee.EVENT_CHART_LINKED_CHANGED="chartLinkedChanged",p([pn("rangeService")],ee.prototype,"rangeService",2),p([mn],ee.prototype,"init",1);var Y=ee;import{AgCheckbox as ro,AgGroupComponent as ao,AgRadioButton as so,AgSelect as io,AgToggleButton as no,Autowired as oo,DragAndDropService as lo,PostConstruct as co,_ as dr}from"@ag-grid-community/core";import{AgSelect as ho,Autowired as fa,Component as uo,DragSourceType as va,Events as po,_ as Be}from"@ag-grid-community/core";import{AgSelect as go,Component as mo,DragAndDropService as ya,DragSourceType as Sa,PillDragComp as Co,PillDropZonePanel as fo,PostConstruct as Ta,_ as Pa}from"@ag-grid-community/core";var ur=class Hs extends mo{constructor(e){super(Hs.TEMPLATE),this.config=e??{};const{selectedValueList:t,valueFormatter:r,valueList:s}=this.config;this.selectedValues=t??[],this.valueList=s??[],this.valueFormatter=r??(i=>Pa.escapeString(i))}init(){const{ariaLabel:e,onValuesChange:t,dragSourceId:r}=this.config;this.dropZonePanel=this.createManagedBean(new Aa({getValues:()=>this.selectedValues,setValues:i=>this.updateValues(i),isDraggable:()=>this.selectedValues.length>1},i=>this.valueFormatter(i),e,r)),this.getGui().appendChild(this.dropZonePanel.getGui()),this.initSelect(),t!=null&&(this.onValuesChange=t)}setValues(e,t){const{added:r,removed:s,updated:i}=this.getChanges(this.valueList,e);let n=!1;return(r.length||s.length||i.length)&&(n=!0),this.valueList=e,this.updateValues(t,n,!0),this}setValueFormatter(e){return this.valueFormatter=e,this}initSelect(){const e=this.createSelectOptions();if(!e.length)return!1;const{selectPlaceholder:t}=this.config;return this.eSelect=this.createBean(new go({options:e,placeholder:t,onValueChange:r=>this.addValue(r),pickerIcon:"chartsMenuAdd"})),this.getGui().appendChild(this.eSelect.getGui()),!0}createSelectOptions(){let e=[];const{maxSelection:t}=this.config;return t&&this.selectedValues.length>=t||this.valueList.forEach(r=>{this.selectedValues.includes(r)||e.push({value:r,text:this.valueFormatter(r)})}),e}addValue(e){this.dropZonePanel.addItem(e)}updateValues(e,t,r){var s,i,n,o,l;const c=this.selectedValues;this.selectedValues=e;const h=this.getChanges(c,e),d=t||h.added.length||h.removed.length,u=this.gridOptionsService.getDocument().activeElement,g=(s=this.eSelect)==null?void 0:s.getGui().contains(u),m=(i=this.dropZonePanel)==null?void 0:i.getGui().contains(u);r||(n=this.onValuesChange)==null||n.call(this,h);const f=d?!this.refreshSelect():!1;this.dropZonePanel.refreshGui(),d&&g&&(f?this.dropZonePanel.focusList(!0):(o=this.eSelect)==null||o.getFocusableElement().focus()),m&&!e.length&&((l=this.eSelect)==null||l.getFocusableElement().focus())}getChanges(e,t){const r=t.filter(n=>!e.includes(n)),s=e.filter(n=>!t.includes(n)),i=t.filter((n,o)=>e[o]!==n);return{added:r,removed:s,updated:i,selected:t}}refreshSelect(){if(!this.eSelect)return this.initSelect();const e=this.createSelectOptions();return e.length?(this.eSelect.clearOptions().addOptions(e).setValue(void 0,!0),!0):(Pa.removeFromParent(this.eSelect.getGui()),this.eSelect=this.destroyBean(this.eSelect),!1)}destroy(){this.destroyBean(this.eSelect),super.destroy()}};ur.TEMPLATE='<div class="ag-pill-select" role="presentation"></div>',p([Ta],ur.prototype,"init",1);var ba=ur,vo=class extends Co{constructor(a,e,t,r,s,i){super(e,t,!1),this.value=a,this.valueFormatter=r,this.draggable=s,this.sourceId=i}getItem(){return this.value}getDisplayName(){return this.valueFormatter(this.value)}getAriaDisplayName(){return this.getDisplayName()}getTooltip(){}createGetDragItem(){return()=>({value:this.value})}getDragSourceType(){return Sa.ChartPanel}getDragSourceId(){return this.sourceId}isDraggable(){return this.draggable}},Aa=class extends fo{constructor(a,e,t,r){super(!1),this.model=a,this.valueFormatter=e,this.ariaLabel=t,this.sourceId=r}postConstruct(){super.init()}isItemDroppable(a,e){return this.isSourceEventFromTarget(e)||this.sourceId!=null&&this.sourceId===e.dragSource.sourceId}updateItems(a){this.model.setValues(a)}getExistingItems(){return this.model.getValues()}getIconName(){return this.isPotentialDndItems()?ya.ICON_MOVE:ya.ICON_NOT_ALLOWED}getAriaLabel(){return this.ariaLabel}createPillComponent(a,e,t){return new vo(a,e,t,this.valueFormatter,this.model.isDraggable(),this.sourceId)}getItems(a){return[a.value]}isInterestedIn(a){return a===Sa.ChartPanel}};p([Ta],Aa.prototype,"postConstruct",1);var vt=class extends uo{constructor(a,e,t,r,s){super(s),this.chartController=a,this.autoScrollService=e,this.allowMultipleSelection=t,this.maxSelection=r,this.columnComps=new Map}refreshColumnComps(a){return Be.areEqual(Be.keys(this.columnComps),a.map(({colId:e})=>e))?(a.forEach(e=>{this.columnComps.get(e.colId).setValue(e.selected,!0)}),!0):!1}createGroup(a,e,t,r){if(this.allowMultipleSelection){const s=a.filter(i=>i.selected);this.valuePillSelect=this.groupComp.createManagedBean(new ba({valueList:a,selectedValueList:s,valueFormatter:e,selectPlaceholder:this.chartTranslationService.translate(t),dragSourceId:r,onValuesChange:i=>this.onValueChange(i),maxSelection:this.maxSelection})),this.groupComp.addItem(this.valuePillSelect)}else{const s=this.createValueSelectParams(a);s.onValueChange=i=>{a.forEach(n=>{n.selected=!1}),i.selected=!0,i.colId===J.DEFAULT_CATEGORY&&this.chartController.setAggFunc(void 0,!0),this.chartController.updateForPanelChange(i)},this.valueSelect=this.groupComp.createManagedBean(new ho(s)),this.groupComp.addItem(this.valueSelect)}}refreshValueSelect(a){if(!this.valueSelect)return;const{options:e,value:t}=this.createValueSelectParams(a);this.valueSelect.clearOptions().addOptions(e).setValue(t,!0)}createValueSelectParams(a){let e;return{options:a.map(r=>{const s=Be.escapeString(r.displayName);return r.selected&&(e=r),{value:r,text:s}}),value:e}}onDragging(a){const e=this.checkHoveredItem(a);if(!e)return;this.lastDraggedColumn=a.dragItem.columns[0];const{comp:t,position:r}=e,{comp:s,position:i}=this.lastHoveredItem||{};if(t===s&&r===i)return;this.autoScrollService.check(a.event),this.clearHoveredItems(),this.lastHoveredItem={comp:t,position:r},t.getGui().classList.add("ag-list-item-hovered",`ag-item-highlight-${r}`)}checkHoveredItem(a){if(Be.missing(a.vDirection))return null;const e=a.event;for(const t of this.columnComps.values()){const r=t.getGui();if(!r.querySelector(".ag-chart-data-column-drag-handle"))continue;const s=r.getBoundingClientRect();if(e.clientY>=s.top&&e.clientY<=s.bottom){const n=r.clientHeight,o=e.clientY>s.top+n/2?"bottom":"top";return{comp:t,position:o}}}return null}onDragLeave(){this.clearHoveredItems()}onDragStop(){if(this.lastHoveredItem){const{dimensionCols:a,valueCols:e}=this.chartController.getColStateForMenu(),t=[...a,...e].find(r=>r.column===this.lastDraggedColumn);if(t){let r=Array.from(this.columnComps.values()).indexOf(this.lastHoveredItem.comp);this.lastHoveredItem.position==="bottom"&&r++,t.order=r,this.chartController.updateForPanelChange(t)}}this.clearHoveredItems(),this.lastDraggedColumn=void 0,this.autoScrollService.ensureCleared()}clearHoveredItems(){this.columnComps.forEach(a=>{a.getGui().classList.remove("ag-list-item-hovered","ag-item-highlight-top","ag-item-highlight-bottom")}),this.lastHoveredItem=void 0}addDragHandle(a,e){const t=Be.createIconNoSpan("columnDrag",this.gridOptionsService);t.classList.add("ag-drag-handle","ag-chart-data-column-drag-handle"),a.getGui().insertAdjacentElement("beforeend",t);const r={type:va.ChartPanel,eElement:t,dragItemName:e.displayName,getDragItem:()=>({columns:[e.column]}),onDragStopped:()=>this.onDragStop()};this.dragAndDropService.addDragSource(r,!0),this.addDestroyFunc(()=>this.dragAndDropService.removeDragSource(r))}addChangeListener(a,e){this.addManagedListener(a,po.EVENT_FIELD_VALUE_CHANGED,()=>{e.selected=a.getValue(),this.chartController.updateForPanelChange(e)})}isInterestedIn(a){return a===va.ChartPanel}onValueChange({added:a,updated:e,removed:t,selected:r}){let s,i;const n=()=>{r.forEach((o,l)=>{o.order=l}),i=!0};a.length?(s=a[0],s.selected=!0,n()):t.length?(s=t[0],s.selected=!1):e.length&&(n(),s=e[0]),s&&this.chartController.updateForPanelChange(s,i)}destroy(){this.valuePillSelect=void 0,this.valueSelect=void 0,super.destroy()}};p([fa("dragAndDropService")],vt.prototype,"dragAndDropService",2),p([fa("chartTranslationService")],vt.prototype,"chartTranslationService",2);var yo="sum",yt=class Ws extends vt{constructor(e,t,r,s,i,n){super(e,t,s,void 0,Ws.TEMPLATE),this.title=r,this.dimensionCols=i,this.isOpen=n}init(){this.groupComp=this.createBean(new ao({title:this.title,enabled:!0,suppressEnabledCheckbox:!0,suppressOpenCloseIcons:!1,cssIdentifier:"charts-data",expanded:this.isOpen})),this.chartMenuService.isLegacyFormat()?(this.createLegacyCategoriesGroup(this.dimensionCols),this.clearAggFuncControls()):(this.createCategoriesGroup(this.dimensionCols),this.createAggFuncControls(this.dimensionCols)),this.getGui().appendChild(this.groupComp.getGui())}refresh(e){var t;this.chartMenuService.isLegacyFormat()?this.refreshColumnComps(e)||this.recreate(e):((t=this.valuePillSelect)==null||t.setValues(e,e.filter(r=>r.selected)),this.refreshValueSelect(e),this.refreshAggFuncControls(e,this.chartController.getAggFunc()))}recreate(e){this.isOpen=this.groupComp.isExpanded(),dr.clearElement(this.getGui()),this.destroyBean(this.groupComp),this.dimensionCols=e,this.init()}createCategoriesGroup(e){this.createGroup(e,t=>dr.escapeString(t?.displayName),"categoryAdd","categorySelect")}createLegacyCategoriesGroup(e){const t=`chartDimension${this.groupComp.getCompId()}`,r=this.allowMultipleSelection;if(e.forEach(s=>{const i={label:dr.escapeString(s.displayName),value:s.selected,inputName:t},n=this.groupComp.createManagedBean(r?(()=>{const o=new ro(i);return o.addCssClass("ag-data-select-checkbox"),o})():new so(i));this.addChangeListener(n,s),this.groupComp.addItem(n),this.columnComps.set(s.colId,n),r&&this.addDragHandle(n,s)}),r){const s=this.groupComp.getGui(),i={getIconName:()=>lo.ICON_MOVE,getContainer:()=>s,onDragging:n=>this.onDragging(n),onDragLeave:()=>this.onDragLeave(),isInterestedIn:this.isInterestedIn.bind(this),targetContainsSource:!0};this.dragAndDropService.addDropTarget(i),this.addDestroyFunc(()=>this.dragAndDropService.removeDropTarget(i))}}createAggFuncControls(e){const t=this.chartController.getAggFunc();this.groupComp.addItem(this.aggFuncToggle=this.createBean(new no({label:this.chartTranslationService.translate("aggregate"),labelAlignment:"left",labelWidth:"flex",inputWidth:"flex",value:t!=null,onValueChange:r=>{var s,i;const n=r?yo:void 0;this.chartController.setAggFunc(n),(s=this.aggFuncSelect)==null||s.setValue(n,!0),(i=this.aggFuncSelect)==null||i.setDisplayed(n!=null)}}))),this.groupComp.addItem(this.aggFuncSelect=this.createBean(new io({options:[{value:"sum",text:this.chartTranslationService.translate("sum")},{value:"first",text:this.chartTranslationService.translate("first")},{value:"last",text:this.chartTranslationService.translate("last")},{value:"min",text:this.chartTranslationService.translate("min")},{value:"max",text:this.chartTranslationService.translate("max")},{value:"count",text:this.chartTranslationService.translate("count")},{value:"avg",text:this.chartTranslationService.translate("avg")}],value:typeof t=="string"?t:void 0,onValueChange:r=>{this.chartController.setAggFunc(r)}}))),this.refreshAggFuncControls(e,t)}refreshAggFuncControls(e,t){var r,s,i,n;const l=e.filter(c=>c.selected).some(c=>c.colId!==J.DEFAULT_CATEGORY);(r=this.aggFuncToggle)==null||r.setValue(t!=null),(s=this.aggFuncSelect)==null||s.setValue(typeof t=="string"?t:void 0,!0),(i=this.aggFuncToggle)==null||i.setDisplayed(l),(n=this.aggFuncSelect)==null||n.setDisplayed(l&&t!=null)}clearAggFuncControls(){this.aggFuncToggle=this.aggFuncToggle&&this.destroyBean(this.aggFuncToggle),this.aggFuncSelect=this.aggFuncSelect&&this.destroyBean(this.aggFuncSelect)}destroy(){this.clearAggFuncControls(),this.groupComp=this.destroyBean(this.groupComp),super.destroy()}};yt.TEMPLATE='<div id="categoriesGroup"></div>',p([oo("chartMenuService")],yt.prototype,"chartMenuService",2),p([co],yt.prototype,"init",1);var So=yt;import{AgCheckbox as To,AgGroupComponent as Po,AgToggleButton as bo,Autowired as Ao,DragAndDropService as xo,PostConstruct as Mo,_ as pr}from"@ag-grid-community/core";var St=class Ys extends vt{constructor(e,t,r,s,i,n,o,l){super(e,t,i,n,Ys.TEMPLATE),this.chartOptionsService=r,this.title=s,this.valueCols=o,this.isOpen=l}init(){if(this.groupComp=this.createBean(new Po({title:this.title,enabled:!0,suppressEnabledCheckbox:!0,suppressOpenCloseIcons:!1,cssIdentifier:"charts-data",expanded:this.isOpen})),this.chartController.isActiveXYChart()){const e=this.groupComp.createManagedBean(new bo({label:this.chartTranslationService.translate("paired"),labelAlignment:"left",labelWidth:"flex",inputWidth:"flex",value:this.chartOptionsService.getPairedMode(),onValueChange:t=>{this.chartOptionsService.setPairedMode(!!t),this.chartController.updateForGridChange({maintainColState:!0})}}));this.groupComp.addItem(e)}this.chartMenuService.isLegacyFormat()?this.createLegacySeriesGroup(this.valueCols):this.createSeriesGroup(this.valueCols),this.getGui().appendChild(this.groupComp.getGui())}refresh(e){var t,r;if(this.chartMenuService.isLegacyFormat())if(this.refreshColumnComps(e)){if(this.chartController.isActiveXYChart()){const i=this.generateGetSeriesLabel(e);e.forEach(n=>{this.columnComps.get(n.colId).setLabel(i(n))})}}else this.recreate(e);else(t=this.valuePillSelect)==null||t.setValueFormatter(this.generateGetSeriesLabel(e)),(r=this.valuePillSelect)==null||r.setValues(e,e.filter(s=>s.selected)),this.refreshValueSelect(e)}recreate(e){this.isOpen=this.groupComp.isExpanded(),pr.clearElement(this.getGui()),this.destroyBean(this.groupComp),this.valueCols=e,this.init()}createSeriesGroup(e){this.createGroup(e,this.generateGetSeriesLabel(e),"seriesAdd","seriesSelect")}createLegacySeriesGroup(e){const t=this.generateGetSeriesLabel(e);e.forEach(i=>{const n=t(i),o=this.groupComp.createManagedBean(new To({label:n,value:i.selected}));o.addCssClass("ag-data-select-checkbox"),this.addChangeListener(o,i),this.groupComp.addItem(o),this.columnComps.set(i.colId,o),this.addDragHandle(o,i)});const r=this.groupComp.getGui(),s={getIconName:()=>xo.ICON_MOVE,getContainer:()=>r,onDragging:i=>this.onDragging(i),onDragLeave:()=>this.onDragLeave(),isInterestedIn:this.isInterestedIn.bind(this),targetContainsSource:!0};this.dragAndDropService.addDropTarget(s),this.addDestroyFunc(()=>this.dragAndDropService.removeDropTarget(s))}generateGetSeriesLabel(e){if(!this.chartController.isActiveXYChart())return n=>pr.escapeString(n.displayName);const t=e.filter(n=>n.selected),r=this.chartController.getChartType()==="bubble",s=this.chartOptionsService.getPairedMode(),i=new Map;return i.set(0,"X"),i.set(1,"Y"),i.set(2,"size"),n=>{const o=pr.escapeString(n.displayName);if(!n.selected)return o;const l=t.indexOf(n);if(l===-1)return o;let c;return s?c=i.get(l%(r?3:2)):l===0?c="X":c=r&&l%2===0?"size":"Y",`${o} (${c})`}}destroy(){this.groupComp=this.destroyBean(this.groupComp),super.destroy()}};St.TEMPLATE='<div id="seriesGroup"></div>',p([Ao("chartMenuService")],St.prototype,"chartMenuService",2),p([Mo],St.prototype,"init",1);var Eo=St;import{AgCheckbox as wo,AgGroupComponent as xa,AgSelect as Oo,Autowired as Do,Component as ko,PostConstruct as Lo,_ as Ma}from"@ag-grid-community/core";var Tt=class Ks extends ko{constructor(e,t,r){super(Ks.TEMPLATE),this.chartController=e,this.columns=t,this.isOpen=r,this.selectedColIds=[],this.chartTypeComps=new Map,this.secondaryAxisComps=new Map}init(){this.createSeriesChartTypeGroup(this.columns)}refresh(e){Ma.areEqual(this.getValidColIds(e),this.selectedColIds)?this.refreshComps():this.recreate(e)}recreate(e){this.isOpen=this.seriesChartTypeGroupComp.isExpanded(),Ma.clearElement(this.getGui()),this.destroyBean(this.seriesChartTypeGroupComp),this.columns=e,this.selectedColIds=[],this.clearComps(),this.init()}getValidColIds(e){const t=this.chartController.getSeriesChartTypes();return e.filter(r=>r.selected&&!!t.filter(s=>s.colId===r.colId)[0]).map(({colId:r})=>r)}createSeriesChartTypeGroup(e){this.seriesChartTypeGroupComp=this.createBean(new xa({title:this.chartTranslationService.translate("seriesChartType"),enabled:!0,suppressEnabledCheckbox:!0,suppressOpenCloseIcons:!1,cssIdentifier:"charts-data",expanded:this.isOpen}));const t=this.chartController.getSeriesChartTypes();e.forEach(r=>{if(!r.selected)return;const s=t.filter(d=>d.colId===r.colId)[0];if(!s)return;this.selectedColIds.push(r.colId);const i=this.seriesChartTypeGroupComp.createManagedBean(new xa({title:r.displayName,enabled:!0,suppressEnabledCheckbox:!0,suppressOpenCloseIcons:!0,cssIdentifier:"charts-format-sub-level"})),n=d=>["groupedColumn","stackedColumn","stackedArea"].includes(d),o=this.seriesChartTypeGroupComp.createManagedBean(new wo({label:this.chartTranslationService.translate("secondaryAxis"),labelWidth:"flex",disabled:n(s.chartType),value:!!s.secondaryAxis,onValueChange:d=>this.chartController.updateSeriesChartType(r.colId,void 0,d)}));i.addItem(o);const l=d=>this.chartTranslationService.translate(d),c=[{value:"line",text:l("line")},{value:"area",text:l("area")},{value:"stackedArea",text:l("stackedArea")},{value:"groupedColumn",text:l("groupedColumn")},{value:"stackedColumn",text:l("stackedColumn")}],h=i.createManagedBean(new Oo({labelAlignment:"left",labelWidth:"flex",options:c,value:s.chartType,onValueChange:d=>this.chartController.updateSeriesChartType(r.colId,d)}));i.addItem(h),this.seriesChartTypeGroupComp.addItem(i),this.chartTypeComps.set(r.colId,h),this.secondaryAxisComps.set(r.colId,o)}),this.getGui().appendChild(this.seriesChartTypeGroupComp.getGui())}refreshComps(){const e=this.chartController.getSeriesChartTypes();this.selectedColIds.forEach(t=>{const r=e.find(n=>n.colId===t);if(!r)return;const s=this.chartTypeComps.get(t),i=this.secondaryAxisComps.get(t);s?.setValue(r.chartType),i?.setValue(!!r.secondaryAxis),i?.setDisabled(this.isSecondaryAxisDisabled(r.chartType))})}clearComps(){this.chartTypeComps.clear(),this.secondaryAxisComps.clear()}isSecondaryAxisDisabled(e){return["groupedColumn","stackedColumn","stackedArea"].includes(e)}destroy(){this.clearComps(),this.seriesChartTypeGroupComp=this.destroyBean(this.seriesChartTypeGroupComp),super.destroy()}};Tt.TEMPLATE='<div id="seriesChartTypeGroup"></div>',p([Do("chartTranslationService")],Tt.prototype,"chartTranslationService",2),p([Lo],Tt.prototype,"init",1);var Ro=Tt;import{AgToggleButton as Io,Autowired as _o,Component as Fo,PostConstruct as Go}from"@ag-grid-community/core";var Pt=class $s extends Fo{constructor(e,t){super(),this.getValue=e,this.setValue=t}init(){this.switchCategorySeriesToggleButton=this.createManagedBean(new Io({label:this.chartTranslationService.translate("switchCategorySeries"),labelAlignment:"left",labelWidth:"flex",inputWidth:"flex",value:this.getValue(),onValueChange:t=>{this.setValue(t)}}));const e={title:void 0,suppressEnabledCheckbox:!0,suppressOpenCloseIcons:!0,cssIdentifier:"charts-data",expanded:!0,items:[this.switchCategorySeriesToggleButton]};this.setTemplate($s.TEMPLATE,{switchCategorySeriesGroup:e})}refresh(){var e;(e=this.switchCategorySeriesToggleButton)==null||e.setValue(this.getValue(),!0)}};Pt.TEMPLATE=`<div>
        <ag-group-component ref="switchCategorySeriesGroup"></ag-group-component>
    </div>`,p([_o("chartTranslationService")],Pt.prototype,"chartTranslationService",2),p([Go],Pt.prototype,"init",1);var Vo=Pt,No={groups:[{type:"categories",isOpen:!0},{type:"series",isOpen:!0},{type:"seriesChartType",isOpen:!0}]},Ue=class js extends hn{constructor(e,t){super(js.TEMPLATE),this.chartController=e,this.chartOptionsService=t,this.isSwitchCategorySeriesToggled=!1}init(){this.switchCategorySeriesPanel=this.addComponent(this.createManagedBean(new Vo(()=>this.chartController.isCategorySeriesSwitched(),e=>this.chartController.switchCategorySeries(e)))),this.isSwitchCategorySeriesToggled=this.chartController.isCategorySeriesSwitched(),this.createAutoScrollService(),this.updatePanels(),this.addManagedListener(this.chartController,Y.EVENT_CHART_MODEL_UPDATE,this.updatePanels.bind(this)),this.addManagedListener(this.chartController,Y.EVENT_CHART_API_UPDATE,this.updatePanels.bind(this))}destroy(){this.clearPanelComponents(),super.destroy()}updatePanels(){var e,t,r,s,i;const n=this.chartType,o=this.isSwitchCategorySeriesToggled,{dimensionCols:l,valueCols:c}=this.chartController.getColStateForMenu();this.chartType=this.chartController.getChartType();const h=this.chartType!==n;this.isSwitchCategorySeriesToggled=this.chartController.isCategorySeriesSwitched();const d=this.isSwitchCategorySeriesToggled!==o;this.canRefresh(n,this.chartType)&&!d?((e=this.categoriesDataPanel)==null||e.refresh(l),(t=this.seriesDataPanel)==null||t.refresh(c),(r=this.seriesChartTypePanel)==null||r.refresh(c)):this.recreatePanels(l,c),h&&((s=this.switchCategorySeriesPanel)==null||s.setDisplayed(oa(this.chartType)&&!this.chartMenuService.isLegacyFormat())),d&&((i=this.switchCategorySeriesPanel)==null||i.refresh())}canRefresh(e,t){if(e===void 0)return!1;if(e===t)return!0;const r=s=>["columnLineCombo","areaColumnCombo","customCombo"].includes(s);return!!(r(e)&&r(t))}recreatePanels(e,t){var r;this.clearPanelComponents();const{chartType:s}=this;if(!s)return;const i=this.chartController.isCategorySeriesSwitched(),n=(r=this.getDataPanelDef().groups)==null?void 0:r.map(({type:o,isOpen:l})=>o===(i?"series":"categories")?this.categoriesDataPanel=this.createBean(new So(this.chartController,this.autoScrollService,this.getCategoryGroupTitle(i),this.getCategoryGroupMultipleSelect(s,i),e,l)):o===(i?"categories":"series")?this.seriesDataPanel=this.createBean(new Eo(this.chartController,this.autoScrollService,this.chartOptionsService,this.getSeriesGroupTitle(i),this.getSeriesGroupMultipleSelect(s,i),this.getSeriesGroupMaxSelection(s,i),t,l)):o==="seriesChartType"?this.chartController.isComboChart()?this.seriesChartTypePanel=this.createBean(new Ro(this.chartController,t,l)):null:(ln.warnOnce(`Invalid charts data panel group name supplied: '${o}'`),null)).filter(o=>o!=null);n&&this.addPanelComponents(n)}addPanelComponents(e){var t;const r=document.createDocumentFragment();for(const i of e)this.registerComponent(i),r.appendChild(i.getGui());const s=(t=this.switchCategorySeriesPanel)==null?void 0:t.getGui();return this.getGui().insertBefore(r,s??null),e}clearPanelComponents(){const e=this.getGui();this.categoriesDataPanel&&e.removeChild(this.categoriesDataPanel.getGui()),this.seriesDataPanel&&e.removeChild(this.seriesDataPanel.getGui()),this.seriesChartTypePanel&&e.removeChild(this.seriesChartTypePanel.getGui()),this.categoriesDataPanel=this.destroyBean(this.categoriesDataPanel),this.seriesDataPanel=this.destroyBean(this.seriesDataPanel),this.seriesChartTypePanel=this.destroyBean(this.seriesChartTypePanel)}createAutoScrollService(){const e=this.getGui();this.autoScrollService=new cn({scrollContainer:e,scrollAxis:"y",getVerticalPosition:()=>e.scrollTop,setVerticalPosition:t=>e.scrollTop=t})}addComponent(e){return this.registerComponent(e),this.getGui().appendChild(e.getGui()),e}registerComponent(e){e.addCssClass("ag-chart-data-section")}getDataPanelDef(){var e,t;return(t=(e=this.gridOptionsService.get("chartToolPanelsDef"))==null?void 0:e.dataPanel)!=null?t:No}getCategoryGroupTitle(e){return e?this.chartTranslationService.translate("seriesLabels"):this.chartTranslationService.translate(this.chartController.isActiveXYChart()?"labels":"categories")}getCategoryGroupMultipleSelect(e,t){return t?!1:cr(e)!==1}getSeriesGroupTitle(e){return e?this.chartTranslationService.translate("categoryValues"):this.chartTranslationService.translate(this.chartController.isActiveXYChart()?"xyValues":"series")}getSeriesGroupMultipleSelect(e,t){return this.getSeriesGroupMaxSelection(e,t)!==1}getSeriesGroupMaxSelection(e,t){if(!t)return Ct(e)}};Ue.TEMPLATE='<div class="ag-chart-data-wrapper ag-scrollable-container"></div>',p([ra("chartTranslationService")],Ue.prototype,"chartTranslationService",2),p([ra("chartMenuService")],Ue.prototype,"chartMenuService",2),p([dn],Ue.prototype,"init",1);var Bo=Ue;import{_ as Ea,Component as Uo,PostConstruct as zo}from"@ag-grid-community/core";import{Autowired as Ho,Component as Wo,PostConstruct as Yo}from"@ag-grid-community/core";import{_ as gr,Autowired as Ko,Component as $o,PostConstruct as jo,RefSelector as Xo}from"@ag-grid-community/core";var ze=class Xs extends $o{constructor(e){super(),this.activeComps=[],this.params=e,this.chartOptions=e.chartMenuUtils.getChartOptions()}init(){const e={cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0,title:this.params.name||this.chartTranslationService.translate("font"),enabled:this.params.enabled,suppressEnabledCheckbox:!!this.params.suppressEnabledCheckbox,onEnableChange:t=>{this.params.onEnableChange&&this.params.onEnableChange(t)}};this.setTemplate(Xs.TEMPLATE,{fontGroup:e,familySelect:this.getFamilySelectParams(),weightStyleSelect:this.getWeightStyleSelectParams(),sizeSelect:this.getSizeSelectParams(),colorPicker:this.params.chartMenuUtils.getDefaultColorPickerParams(this.params.keyMapper("color"))})}addCompToPanel(e){this.fontGroup.addItem(e),this.activeComps.push(e)}setEnabled(e){this.fontGroup.setEnabled(e)}getFamilySelectParams(){const e=["Arial, sans-serif","Aria Black, sans-serif","Book Antiqua,  serif","Charcoal, sans-serif","Comic Sans MS, cursive","Courier, monospace","Courier New, monospace","Gadget, sans-serif","Geneva, sans-serif","Helvetica, sans-serif","Impact, sans-serif","Lucida Console, monospace","Lucida Grande, sans-serif","Lucida Sans Unicode,  sans-serif","Monaco, monospace","Palatino Linotype, serif","Palatino, serif","Times New Roman, serif","Times, serif","Verdana, sans-serif"],t=this.getInitialFontValue("fontFamily");let r=e[0];if(t){const n=e.map(o=>o.toLowerCase()).indexOf(t.toLowerCase());if(n>=0)r=e[n];else{const o=gr.capitalise(t);e.push(o),r=o}}return{options:e.sort().map(i=>({value:i,text:i})),inputWidth:"flex",value:`${r}`,onValueChange:i=>this.setFont({fontFamily:i})}}getSizeSelectParams(){const e=[8,10,12,14,16,18,20,22,24,26,28,30,32,34,36],t=this.getInitialFontValue("fontSize");return gr.includes(e,t)||e.push(t),{options:e.sort((s,i)=>s-i).map(s=>({value:`${s}`,text:`${s}`})),inputWidth:"flex",value:`${t}`,onValueChange:s=>this.setFont({fontSize:parseInt(s,10)}),label:this.chartTranslationService.translate("size")}}getWeightStyleSelectParams(){var e,t;const r=(e=this.getInitialFontValue("fontWeight"))!=null?e:"normal",s=(t=this.getInitialFontValue("fontStyle"))!=null?t:"normal",i=[{name:"normal",weight:"normal",style:"normal"},{name:"bold",weight:"bold",style:"normal"},{name:"italic",weight:"normal",style:"italic"},{name:"boldItalic",weight:"bold",style:"italic"}];let n=i.find(l=>l.weight===r&&l.style===s);return n||(n={name:"predefined",weight:r,style:s},i.unshift(n)),{options:i.map(l=>({value:l.name,text:this.chartTranslationService.translate(l.name)})),inputWidth:"flex",value:n.name,onValueChange:l=>{const c=i.find(h=>h.name===l);this.setFont({fontWeight:c.weight,fontStyle:c.style})}}}addItemToPanel(e){this.fontGroup.addItem(e),this.activeComps.push(e)}destroyActiveComps(){this.activeComps.forEach(e=>{gr.removeFromParent(e.getGui()),this.destroyBean(e)})}destroy(){this.destroyActiveComps(),super.destroy()}setFont(e){const{keyMapper:t}=this.params;Object.entries(e).forEach(([r,s])=>{s&&this.chartOptions.setValue(t(r),s)})}getInitialFontValue(e){const{keyMapper:t}=this.params;return this.chartOptions.getValue(t(e))}};ze.TEMPLATE=`<div class="ag-font-panel">
            <ag-group-component ref="fontGroup">
                <ag-select ref="familySelect"></ag-select>
                <ag-select ref="weightStyleSelect"></ag-select>
                <div class="ag-charts-font-size-color">
                    <ag-select ref="sizeSelect"></ag-select>
                    <ag-color-picker ref="colorPicker"></ag-color-picker>
                </div>
            </ag-group-component>
        </div>`,p([Xo("fontGroup")],ze.prototype,"fontGroup",2),p([Ko("chartTranslationService")],ze.prototype,"chartTranslationService",2),p([jo],ze.prototype,"init",1);var ce=ze,bt=class qs extends Wo{constructor({chartMenuParamsFactory:e,isExpandedOnInit:t=!1}){super(),this.chartMenuUtils=e,this.isExpandedOnInit=t}init(){const e=this.chartMenuUtils.addEnableParams("legend.enabled",{cssIdentifier:"charts-format-top-level",direction:"vertical",title:this.chartTranslationService.translate("legend"),suppressEnabledCheckbox:!1,suppressToggleExpandOnEnableChange:!0,expanded:this.isExpandedOnInit,items:[this.createLabelPanel()]});this.setTemplate(qs.TEMPLATE,{legendGroup:e,legendPositionSelect:this.chartMenuUtils.getDefaultLegendParams("legend.position"),legendPaddingSlider:this.getSliderParams("spacing","spacing",200),markerSizeSlider:this.getSliderParams("item.marker.size","markerSize",40),markerStrokeSlider:this.getSliderParams("item.marker.strokeWidth","markerStroke",10),markerPaddingSlider:this.getSliderParams("item.marker.padding","itemSpacing",20),itemPaddingXSlider:this.getSliderParams("item.paddingX","layoutHorizontalSpacing",50),itemPaddingYSlider:this.getSliderParams("item.paddingY","layoutVerticalSpacing",50)})}getSliderParams(e,t,r){return this.chartMenuUtils.getDefaultSliderParams(`legend.${e}`,t,r)}createLabelPanel(){const e={enabled:!0,suppressEnabledCheckbox:!0,chartMenuUtils:this.chartMenuUtils,keyMapper:t=>`legend.item.label.${t}`};return this.createManagedBean(new ce(e))}};bt.TEMPLATE=`<div>
            <ag-group-component ref="legendGroup">
                <ag-select ref="legendPositionSelect"></ag-select>
                <ag-slider ref="legendPaddingSlider"></ag-slider>
                <ag-slider ref="markerSizeSlider"></ag-slider>
                <ag-slider ref="markerStrokeSlider"></ag-slider>
                <ag-slider ref="markerPaddingSlider"></ag-slider>
                <ag-slider ref="itemPaddingXSlider"></ag-slider>
                <ag-slider ref="itemPaddingYSlider"></ag-slider>
            </ag-group-component>
        </div>`,p([Ho("chartTranslationService")],bt.prototype,"chartTranslationService",2),p([Yo],bt.prototype,"init",1);var qo=bt;import{_ as mr,AgCheckbox as Zo,AgSlider as Jo,Autowired as Qo,Component as el,Events as tl,PostConstruct as rl,RefSelector as At}from"@ag-grid-community/core";import{Autowired as al,Component as sl,PostConstruct as il}from"@ag-grid-community/core";var xt=class Zs extends sl{constructor(e){super(),this.chartMenuUtils=e}init(){const e=this.chartMenuUtils.addEnableParams("tick.enabled",{cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0,title:this.chartTranslationService.translate("ticks"),suppressEnabledCheckbox:!1}),t=this.chartMenuUtils.getDefaultColorPickerParams("tick.color"),r=this.chartMenuUtils.getDefaultSliderParams("tick.width","width",10),s=this.chartMenuUtils.getDefaultSliderParams("tick.size","length",30);this.setTemplate(Zs.TEMPLATE,{axisTicksGroup:e,axisTicksColorPicker:t,axisTicksWidthSlider:r,axisTicksSizeSlider:s})}};xt.TEMPLATE=`<div>
            <ag-group-component ref="axisTicksGroup">
                <ag-color-picker ref="axisTicksColorPicker"></ag-color-picker>
                <ag-slider ref="axisTicksWidthSlider"></ag-slider>
                <ag-slider ref="axisTicksSizeSlider"></ag-slider>
            </ag-group-component>
        </div>`,p([al("chartTranslationService")],xt.prototype,"chartTranslationService",2),p([il],xt.prototype,"init",1);var nl=xt;import{Autowired as ol,Component as ll,PostConstruct as cl}from"@ag-grid-community/core";var Mt=class Js extends ll{constructor(e){super(),this.chartMenuUtils=e,this.chartOptions=e.getChartOptions()}init(){const e=this.chartMenuUtils.addEnableParams("gridLine.enabled",{cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0,title:this.chartTranslationService.translate("gridLines"),suppressEnabledCheckbox:!1}),t=this.getGridLineColorPickerParams("color"),r=this.getGridLineWidthSliderParams("thickness"),s=this.getGridLineDashSliderParams("lineDash");this.setTemplate(Js.TEMPLATE,{gridLineGroup:e,gridLineColorPicker:t,gridLineWidthSlider:r,gridLineLineDashSlider:s})}getGridLineColorPickerParams(e){return this.chartMenuUtils.getDefaultColorPickerParams("gridLine.style",e,{formatInputValue:t=>{var r;return(r=t?.[0])==null?void 0:r.stroke},parseInputValue:t=>{var r;const s=(r=this.chartOptions.getValue("gridLine.style"))!=null?r:[];return s.length===0?[{stroke:t,lineDash:[]}]:[A(T({},s[0]),{stroke:t})]}})}getGridLineWidthSliderParams(e){return this.chartMenuUtils.getDefaultSliderParams("gridLine.width",e,10)}getGridLineDashSliderParams(e){var t,r;const s=this.chartOptions.getValue("gridLine.style"),i=(r=(t=s?.[0])==null?void 0:t.lineDash)==null?void 0:r[0],n=this.chartMenuUtils.getDefaultSliderParamsWithoutValueParams(i??0,e,30);return n.onValueChange=o=>{const l=this.chartOptions.getValue("gridLine.style.0.stroke");this.chartOptions.setValue("gridLine.style",[{lineDash:[o],stroke:l}])},n}};Mt.TEMPLATE=`<div>
            <ag-group-component ref="gridLineGroup">
                <ag-color-picker ref="gridLineColorPicker"></ag-color-picker>
                <ag-slider ref="gridLineWidthSlider"></ag-slider>
                <ag-slider ref="gridLineLineDashSlider"></ag-slider>
            </ag-group-component>
        </div>`,p([ol("chartTranslationService")],Mt.prototype,"chartTranslationService",2),p([cl],Mt.prototype,"init",1);var hl=Mt;import{Autowired as dl,Events as Cr,AgAbstractLabel as ul,RefSelector as Et,_ as wa}from"@ag-grid-community/core";var Pe=class Qs extends ul{constructor(e){super(e,Qs.TEMPLATE),this.radius=0,this.offsetX=0,this.offsetY=0}postConstruct(){super.postConstruct();const{value:e,onValueChange:t}=this.config;e!=null&&this.setValue(e,void 0,!0),t!=null&&this.onValueChange(t),this.dragListener={eElement:this.eParentCircle,dragStartPixels:0,onDragStart:r=>{this.parentCircleRect=this.eParentCircle.getBoundingClientRect()},onDragging:r=>this.calculateAngleDrag(r),onDragStop:()=>{}},this.dragService.addDragSource(this.dragListener),this.eAngleValue.setLabel("").setLabelWidth(5).setInputWidth(45).setMin(0).setMax(360).setValue(`${this.degrees}`).onValueChange(r=>{(r==null||r==="")&&(r="0"),r=this.eAngleValue.normalizeValue(r);let s=parseFloat(r);s>180&&(s=s-360),this.setValue(s)}),this.updateNumberInput(),wa.exists(this.getValue())&&this.eAngleValue.setValue(this.normalizeNegativeValue(this.getValue()).toString()),this.addManagedListener(this,Cr.EVENT_FIELD_VALUE_CHANGED,()=>{const r=this.gridOptionsService.getDocument();this.eAngleValue.getInputElement().contains(r.activeElement)||this.updateNumberInput()})}updateNumberInput(){const e=this.normalizeNegativeValue(this.getValue());this.eAngleValue.setValue(e.toString())}positionChildCircle(e){const t=this.parentCircleRect||{width:24,height:24},r=this.eChildCircle,s=t.width/2,i=t.height/2;r.style.left=`${s+Math.cos(e)*8}px`,r.style.top=`${i+Math.sin(e)*8}px`}calculatePolar(){const e=this.offsetX,t=this.offsetY,r=Math.atan2(t,e);this.degrees=this.toDegrees(r),this.radius=Math.sqrt(e*e+t*t),this.positionChildCircle(r)}calculateCartesian(){const e=this.toRadians(this.getValue()),t=this.getRadius();this.setOffsetX(Math.cos(e)*t).setOffsetY(Math.sin(e)*t)}setOffsetX(e){return this.offsetX!==e&&(this.offsetX=e,this.calculatePolar()),this}setOffsetY(e){return this.offsetY!==e&&(this.offsetY=e,this.calculatePolar()),this}calculateAngleDrag(e){const t=this.parentCircleRect,r=t.width/2,s=t.height/2,i=e.clientX-t.left,n=e.clientY-t.top,o=i-r,l=n-s,c=Math.atan2(l,o);this.setValue(c,!0)}toDegrees(e){return e/Math.PI*180}toRadians(e){return e/180*Math.PI}normalizeNegativeValue(e){return e<0?360+e:e}normalizeAngle180(e){return e%=Math.PI*2,e<-Math.PI?e+=Math.PI*2:e>=Math.PI&&(e-=Math.PI*2),e}getRadius(){return this.radius}setRadius(e){return this.radius===e?this:(this.radius=e,this.calculateCartesian(),this)}onValueChange(e){return this.addManagedListener(this,Cr.EVENT_FIELD_VALUE_CHANGED,()=>{e(this.degrees)}),this}getValue(e){return e?this.toRadians(this.degrees):this.degrees}setValue(e,t,r){let s;return t?s=e:s=this.normalizeAngle180(this.toRadians(e)),e=this.toDegrees(s),this.degrees!==e&&(this.degrees=Math.floor(e),this.calculateCartesian(),this.positionChildCircle(s),r||this.dispatchEvent({type:Cr.EVENT_FIELD_VALUE_CHANGED})),this}setWidth(e){return wa.setFixedWidth(this.getGui(),e),this}setDisabled(e){return super.setDisabled(e),this.eAngleValue.setDisabled(e),this}destroy(){this.dragService.removeDragSource(this.dragListener),super.destroy()}};Pe.TEMPLATE=`<div class="ag-angle-select">
            <div ref="eLabel"></div>
            <div class="ag-wrapper ag-angle-select-wrapper">
                <div ref="eAngleSelectField" class="ag-angle-select-field">
                    <div ref="eParentCircle" class="ag-angle-select-parent-circle">
                        <div ref="eChildCircle" class="ag-angle-select-child-circle"></div>
                    </div>
                </div>
                <ag-input-number-field ref="eAngleValue"></ag-input-number-field>
            </div>
        </div>`,p([Et("eLabel")],Pe.prototype,"eLabel",2),p([Et("eParentCircle")],Pe.prototype,"eParentCircle",2),p([Et("eChildCircle")],Pe.prototype,"eChildCircle",2),p([Et("eAngleValue")],Pe.prototype,"eAngleValue",2),p([dl("dragService")],Pe.prototype,"dragService",2);var Oa=Pe;import{Autowired as pl,BeanStub as gl}from"@ag-grid-community/core";var ke=class extends gl{constructor(a){super(),this.chartOptionsProxy=a}getDefaultColorPickerParams(a,e,t){return this.addValueParams(a,{label:this.chartTranslationService.translate(e??"color"),labelWidth:"flex",inputWidth:"flex"},t)}getDefaultNumberInputParams(a,e,t){return this.addValueParams(a,{label:this.chartTranslationService.translate(e),labelWidth:"flex",inputWidth:"flex",precision:t?.precision,step:t?.step,min:t?.min,max:t?.max},{parseInputValue:r=>{const s=Number(r);return isNaN(s)?void 0:s},formatInputValue:r=>r==null?"":`${r}`})}getDefaultSliderParams(a,e,t,r){var s;let i=(s=this.chartOptionsProxy.getValue(a))!=null?s:0;r&&Array.isArray(i)&&(i=i[0]);const n=this.getDefaultSliderParamsWithoutValueParams(i,e,t);return n.onValueChange=o=>this.chartOptionsProxy.setValue(a,r?[o]:o),n}getDefaultSliderParamsWithoutValueParams(a,e,t){return{label:this.chartTranslationService.translate(e),minValue:0,maxValue:Math.max(a,t),textFieldWidth:45,value:`${a}`}}getDefaultCheckboxParams(a,e,t){const r=this.chartOptionsProxy.getValue(a),s={label:this.chartTranslationService.translate(e),value:r,readOnly:t?.readOnly,passive:t?.passive};return s.onValueChange=i=>{this.chartOptionsProxy.setValue(a,typeof i=="boolean"?i:void 0)},s}getDefaultSelectParams(a,e,t,r){const s=this.chartOptionsProxy.getValue(a),i={label:this.chartTranslationService.translate(e),value:s,options:t,pickerType:r?.pickerType,pickerAriaLabelKey:r?.pickerAriaLabelKey,pickerAriaLabelValue:r?.pickerAriaLabelValue};return i.onValueChange=n=>{this.chartOptionsProxy.setValue(a,n)},i}getDefaultLegendParams(a){return this.addValueParams(a,{label:this.chartTranslationService.translate("position"),labelWidth:"flex",inputWidth:"flex",options:["top","right","bottom","left"].map(e=>({value:e,text:this.chartTranslationService.translate(e)}))})}getDefaultFontPanelParams(a,e){const t=r=>`${a}.${r}`;return this.addEnableParams(t("enabled"),{name:this.chartTranslationService.translate(e),suppressEnabledCheckbox:!1,chartMenuUtils:this,keyMapper:t})}addValueParams(a,e,t){const r=this.chartOptionsProxy.getValue(a);return e.value=t?.formatInputValue?t.formatInputValue(r):r,e.onValueChange=s=>{const i=t?.parseInputValue?t.parseInputValue(s):s;this.chartOptionsProxy.setValue(a,i)},e}addEnableParams(a,e){var t;return e.enabled=(t=this.chartOptionsProxy.getValue(a))!=null?t:!1,e.onEnableChange=r=>this.chartOptionsProxy.setValue(a,r),e}getChartOptions(){return this.chartOptionsProxy}};p([pl("chartTranslationService")],ke.prototype,"chartTranslationService",2);var ml="%d %B %Y",he=class ei extends el{constructor(e,{chartController:t,chartOptionsService:r,isExpandedOnInit:s=!1}){super(),this.activePanels=[],this.axisLabelUpdateFuncs=[],this.axisType=e,this.chartController=t,this.chartAxisOptionsProxy=r.getCartesianAxisOptionsProxy(e),this.chartAxisThemeOverridesProxy=r.getCartesianAxisThemeOverridesProxy(e),this.chartAxisAppliedThemeOverridesProxy=r.getCartesianAxisAppliedThemeOverridesProxy(e),this.isExpandedOnInit=s}init(){const e=this.axisType,t={cssIdentifier:"charts-format-top-level",direction:"vertical",title:this.translate(e),expanded:this.isExpandedOnInit,suppressEnabledCheckbox:!0},r=this.createManagedBean(new ke(this.chartAxisOptionsProxy)),s=this.createManagedBean(new ke(this.chartAxisThemeOverridesProxy)),i=this.getAxisTypeSelectParams(r,this.chartAxisAppliedThemeOverridesProxy),n=this.getAxisPositionSelectParams(r),o=this.getAxisTimeFormatSelectParams(r),l=this.getAxisColorInputParams(s),c=this.getAxisLineWidthSliderParams(s);if(this.setTemplate(ei.TEMPLATE,{axisGroup:t,axisTypeSelect:i??void 0,axisPositionSelect:n??void 0,axisTimeFormatSelect:o??void 0,axisColorInput:l,axisLineWidthSlider:c}),i||this.removeTemplateComponent(this.axisTypeSelect),n||this.removeTemplateComponent(this.axisPositionSelect),!o)this.removeTemplateComponent(this.axisTimeFormatSelect);else{const d=()=>{const u=this.chartAxisOptionsProxy.getValue("type")==="time";mr.setDisplayed(this.axisTimeFormatSelect.getGui(),u)};d(),this.addManagedListener(this.eventService,tl.EVENT_CHART_OPTIONS_CHANGED,u=>{d()})}this.initGridLines(s),this.initAxisTicks(s),this.initAxisLabels(s);const h=()=>this.axisLabelUpdateFuncs.forEach(d=>d());this.addManagedListener(this.chartController,Y.EVENT_CHART_UPDATED,h)}getAxisTypeSelectParams(e,t){const r=e.getChartOptions(),s=((n,o)=>{if(!le(n))return null;switch(o){case"xAxis":return[{value:"category",text:this.translate("category")},{value:"number",text:this.translate("number")},{value:"time",text:this.translate("time")}];case"yAxis":return null}})(this.chartController.getChartType(),this.axisType);if(!s)return null;const i=e.getDefaultSelectParams("type","axisType",s);return i.onValueChange=n=>{var o;const l=r.getValue("type");if(n===l)return;const c=t.getValue("*"),h=Da(l),d=Da(n),u=h!==d?d?ml:void 0:null;if(u===null)r.setValue("type",n);else{const g=(o=r.getValue("label"))!=null?o:{};r.setValues([{expression:"type",value:n},{expression:"label",value:A(T({},g),{format:u})}]),this.axisTimeFormatSelect.setValue(u,!0)}t.setValue("*",c)},i}getAxisPositionSelectParams(e){const t=((r,s)=>{if(!le(r))return null;switch(s){case"xAxis":return[{value:"top",text:this.translate("top")},{value:"bottom",text:this.translate("bottom")}];case"yAxis":return[{value:"left",text:this.translate("left")},{value:"right",text:this.translate("right")}]}})(this.chartController.getChartType(),this.axisType);return t?e.getDefaultSelectParams("position","position",t):null}getAxisTimeFormatSelectParams(e){const t=((r,s)=>{if(!le(r))return null;switch(s){case"xAxis":return[{value:"%d/%m/%Y",text:this.translate("timeFormatSlashesDDMMYYYY")},{value:"%m/%d/%Y",text:this.translate("timeFormatSlashesMMDDYYYY")},{value:"%d/%m/%y",text:this.translate("timeFormatSlashesDDMMYY")},{value:"%m/%d/%y",text:this.translate("timeFormatSlashesMMDDYY")},{value:"%d.%e.%y",text:this.translate("timeFormatDotsDDMYY")},{value:"%e.%d.%y",text:this.translate("timeFormatDotsMDDYY")},{value:"%Y-%m-%d",text:this.translate("timeFormatDashesYYYYMMDD")},{value:"%d %B %Y",text:this.translate("timeFormatSpacesDDMMMMYYYY")},{value:"%H:%M:%S",text:this.translate("timeFormatHHMMSS")},{value:"%I:%M:%S %p",text:this.translate("timeFormatHHMMSSAmPm")}];case"yAxis":return null}})(this.chartController.getChartType(),this.axisType);return t?e.getDefaultSelectParams("label.format","timeFormat",t):null}getAxisColorInputParams(e){return e.getDefaultColorPickerParams("line.color")}getAxisLineWidthSliderParams(e){var t;const r=e.getChartOptions(),s=()=>r.getValue("line.enabled")?r.getValue("line.width"):null,i=o=>{r.setValues([{expression:"line.enabled",value:o!=null},{expression:"line.width",value:o??0}])},n=e.getDefaultSliderParamsWithoutValueParams((t=s())!=null?t:0,"thickness",10);return n.onValueChange=o=>{i(o===0?null:o)},n}initGridLines(e){const t=this.createBean(new hl(e));this.axisGroup.addItem(t),this.activePanels.push(t)}initAxisTicks(e){if(!this.hasConfigurableAxisTicks())return;const t=this.createBean(new nl(e));this.axisGroup.addItem(t),this.activePanels.push(t)}hasConfigurableAxisTicks(){switch(this.chartController.getChartType()){case"radarLine":case"radarArea":case"rangeBar":case"boxPlot":case"waterfall":return!1;default:return!0}}initAxisLabels(e){const t={name:this.translate("labels"),enabled:!0,suppressEnabledCheckbox:!0,chartMenuUtils:e,keyMapper:s=>`label.${s}`},r=this.createBean(new ce(t));this.axisGroup.addItem(r),this.activePanels.push(r),this.addAdditionalLabelComps(r,e)}addAdditionalLabelComps(e,t){this.addLabelPadding(e,t);const r=this.createRotationWidget("labelRotation",t),s=this.initLabelRotation(r,t);e.addCompToPanel(s),e.addCompToPanel(r)}initLabelRotation(e,t){const r=t.getChartOptions(),s=()=>r.getValue("label.rotation"),i=()=>r.getValue("label.autoRotate"),n=h=>{h&&(this.prevRotation=s()),r.setValues([{expression:"label.autoRotate",value:h},{expression:"label.rotation",value:h?void 0:this.prevRotation}]),e.setDisabled(h)},l=typeof s()=="number"?!1:i(),c=this.createBean(new Zo({label:this.translate("autoRotate"),value:l,onValueChange:n}));return e.setDisabled(l),c}createRotationWidget(e,t){var r;const s=t.getChartOptions(),i=()=>s.getValue("label.rotation"),n=h=>s.setValue("label.rotation",h),l=`${this.chartTranslationService.translate(e)} \xB0`,c=new Oa({label:l,labelWidth:"flex",value:(r=i())!=null?r:0,onValueChange:n});return this.axisLabelUpdateFuncs.push(()=>{var h;c.setValue((h=i())!=null?h:0)}),this.createBean(c)}addLabelPadding(e,t){const r=this.createBean(new Jo(t.getDefaultSliderParams("label.padding","padding",30)));e.addCompToPanel(r)}translate(e){return this.chartTranslationService.translate(e)}removeTemplateComponent(e){mr.removeFromParent(e.getGui()),this.destroyBean(e)}destroyActivePanels(){this.activePanels.forEach(e=>{mr.removeFromParent(e.getGui()),this.destroyBean(e)})}destroy(){this.destroyActivePanels(),super.destroy()}};he.TEMPLATE=`<div>
            <ag-group-component ref="axisGroup">
                <ag-select ref="axisTypeSelect"></ag-select>
                <ag-select ref="axisTimeFormatSelect"></ag-select>
                <ag-select ref="axisPositionSelect"></ag-select>
                <ag-color-picker ref="axisColorInput"></ag-color-picker>
                <ag-slider ref="axisLineWidthSlider"></ag-slider>
            </ag-group-component>
        </div>`,p([At("axisGroup")],he.prototype,"axisGroup",2),p([At("axisTypeSelect")],he.prototype,"axisTypeSelect",2),p([At("axisPositionSelect")],he.prototype,"axisPositionSelect",2),p([At("axisTimeFormatSelect")],he.prototype,"axisTimeFormatSelect",2),p([Qo("chartTranslationService")],he.prototype,"chartTranslationService",2),p([rl],he.prototype,"init",1);var wt=he;function Da(a){switch(a){case"time":return!0;case"number":case"log":case"category":case"grouped-category":default:return!1}}import{AgGroupComponent as Cl,AgSelect as fl,AgSlider as vl,Autowired as yl,Component as Sl,PostConstruct as Tl,RefSelector as Pl}from"@ag-grid-community/core";var He=class ti extends Sl{constructor({chartController:e,chartAxisMenuParamsFactory:t,isExpandedOnInit:r=!1}){super(),this.chartController=e,this.chartMenuUtils=t,this.isExpandedOnInit=r}init(){const e={cssIdentifier:"charts-format-top-level",direction:"vertical",title:this.translate("polarAxis"),expanded:this.isExpandedOnInit,suppressEnabledCheckbox:!0},t=this.chartMenuUtils.getDefaultColorPickerParams("line.color"),r=this.chartMenuUtils.getDefaultSliderParams("line.width","thickness",10);this.setTemplate(ti.TEMPLATE,{axisGroup:e,axisColorInput:t,axisLineWidthSlider:r}),this.initAxis(),this.initAxisLabels(),this.initRadiusAxis()}initAxis(){const e=this.chartController.getChartType();if(["radarLine","radarArea"].includes(e)){const r=[{value:"circle",text:this.translate("circle")},{value:"polygon",text:this.translate("polygon")}];this.axisGroup.addItem(this.createSelect({labelKey:"shape",options:r,property:"shape"}))}e!=="pie"&&this.axisGroup.addItem(this.createSlider({labelKey:"innerRadius",defaultMaxValue:1,property:"innerRadiusRatio"}))}initAxisLabels(){const e={name:this.translate("labels"),enabled:!0,suppressEnabledCheckbox:!0,chartMenuUtils:this.chartMenuUtils,keyMapper:s=>`label.${s}`},t=this.createManagedBean(new ce(e)),r=this.createOrientationWidget();t.addItemToPanel(r),this.axisGroup.addItem(t)}createOrientationWidget(){const e=[{value:"fixed",text:this.translate("fixed")},{value:"parallel",text:this.translate("parallel")},{value:"perpendicular",text:this.translate("perpendicular")}];return this.createSelect({labelKey:"orientation",options:e,property:"label.orientation"})}initRadiusAxis(){const e=this.chartController.getChartType();if(!kn(e))return;const t=[this.createSlider({labelKey:"groupPadding",defaultMaxValue:1,property:"paddingInner"}),this.createSlider({labelKey:"seriesPadding",defaultMaxValue:1,property:"groupPaddingInner"})],r=this.createManagedBean(new Cl({cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0,enabled:!0,suppressEnabledCheckbox:!0,title:this.translate("padding"),items:t})).hideEnabledCheckbox(!0).hideOpenCloseIcons(!0);this.axisGroup.addItem(r)}createSlider(e){const{labelKey:t,defaultMaxValue:r,step:s=.05,property:i}=e,n=this.chartMenuUtils.getDefaultSliderParams(i,t,r);return n.step=s,this.createManagedBean(new vl(n))}createSelect(e){const{labelKey:t,options:r,property:s}=e;return this.createManagedBean(new fl(this.chartMenuUtils.addValueParams(s,{label:this.chartTranslationService.translate(t),labelAlignment:"left",labelWidth:"flex",inputWidth:"flex",options:r})))}translate(e){return this.chartTranslationService.translate(e)}};He.TEMPLATE=`<div>
            <ag-group-component ref="axisGroup">
                <ag-color-picker ref="axisColorInput"></ag-color-picker>
                <ag-slider ref="axisLineWidthSlider"></ag-slider>
            </ag-group-component>
        </div>`,p([Pl("axisGroup")],He.prototype,"axisGroup",2),p([yl("chartTranslationService")],He.prototype,"chartTranslationService",2),p([Tl],He.prototype,"init",1);var bl=He;import{Autowired as Al,Component as xl,PostConstruct as Ml}from"@ag-grid-community/core";import{Autowired as El,Component as wl,Events as Ol,PostConstruct as Dl,RefSelector as kl}from"@ag-grid-community/core";var We=class ri extends wl{constructor(e,t){super(),this.chartMenuUtils=e,this.chartController=t}init(){const e={cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0,title:this.chartTranslationService.translate("padding"),suppressEnabledCheckbox:!0},t=r=>this.chartMenuUtils.getDefaultSliderParams("padding."+r,r,200);this.setTemplate(ri.TEMPLATE,{chartPaddingGroup:e,paddingTopSlider:t("top"),paddingRightSlider:t("right"),paddingBottomSlider:t("bottom"),paddingLeftSlider:t("left")}),this.addManagedListener(this.eventService,Ol.EVENT_CHART_OPTIONS_CHANGED,r=>{this.updateTopPadding(r.chartOptions)})}updateTopPadding(e){const t=[...this.chartController.getChartSeriesTypes(),"common"].map(r=>{var s,i;return(i=(s=e[r])==null?void 0:s.padding)==null?void 0:i.top}).find(r=>r!=null);t!=null&&this.paddingTopSlider.setValue(t)}};We.TEMPLATE=`<div>
            <ag-group-component ref="chartPaddingGroup">
                <ag-slider ref="paddingTopSlider"></ag-slider>
                <ag-slider ref="paddingRightSlider"></ag-slider>
                <ag-slider ref="paddingBottomSlider"></ag-slider>
                <ag-slider ref="paddingLeftSlider"></ag-slider>
            </ag-group-component>
        <div>`,p([kl("paddingTopSlider")],We.prototype,"paddingTopSlider",2),p([El("chartTranslationService")],We.prototype,"chartTranslationService",2),p([Dl],We.prototype,"init",1);var Ll=We;import{Autowired as Rl,Component as Il,PostConstruct as _l}from"@ag-grid-community/core";var Ot=class ai extends Il{constructor(e){super(),this.chartMenuUtils=e}init(){const e=this.chartMenuUtils.addEnableParams("background.visible",{cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0,title:this.chartTranslationService.translate("background"),suppressEnabledCheckbox:!1}),t=this.chartMenuUtils.getDefaultColorPickerParams("background.fill");this.setTemplate(ai.TEMPLATE,{chartBackgroundGroup:e,colorPicker:t})}};Ot.TEMPLATE=`<div>
            <ag-group-component ref="chartBackgroundGroup">
                <ag-color-picker ref="colorPicker"></ag-color-picker>
            </ag-group-component>
        <div>`,p([Rl("chartTranslationService")],Ot.prototype,"chartTranslationService",2),p([_l],Ot.prototype,"init",1);var Fl=Ot;import{_ as Gl,AgSlider as Vl,Autowired as ka,Component as Nl,PostConstruct as Bl}from"@ag-grid-community/core";var Ye=class si extends Nl{constructor(e,t){super(si.TEMPLATE),this.chartMenuUtils=e,this.chartController=t,this.activePanels=[],this.chartOptions=e.getChartOptions()}init(){this.initFontPanel(),this.titlePlaceholder=this.chartTranslationService.translate("titlePlaceholder")}hasTitle(){const e=this.chartOptions.getValue("title");return e&&e.enabled&&e.text&&e.text.length>0}initFontPanel(){const e=this.hasTitle(),t={name:this.chartTranslationService.translate("title"),enabled:e,suppressEnabledCheckbox:!1,chartMenuUtils:this.chartMenuUtils,keyMapper:s=>`title.${s}`,onEnableChange:s=>{if(this.chartMenuService.doesChartToolbarExist(this.chartController)){const o=this.chartOptions.getValue("padding.top");this.chartOptions.setValue("padding.top",s?o-20:o+20)}this.chartOptions.setValue("title.enabled",s);const i=this.chartOptions.getValue("title.text"),n=i==="Title"||i?.trim().length===0;s&&n&&this.chartOptions.setValue("title.text",this.titlePlaceholder)}},r=this.createBean(new ce(t));r.addItemToPanel(this.createSpacingSlicer()),this.getGui().appendChild(r.getGui()),this.activePanels.push(r),this.addManagedListener(this.eventService,"chartTitleEdit",()=>{r.setEnabled(this.hasTitle())})}createSpacingSlicer(){const e=this.chartMenuUtils.getDefaultSliderParams("title.spacing","spacing",100);return e.value="10",this.createBean(new Vl(e))}destroyActivePanels(){this.activePanels.forEach(e=>{Gl.removeFromParent(e.getGui()),this.destroyBean(e)})}destroy(){this.destroyActivePanels(),super.destroy()}};Ye.TEMPLATE="<div></div>",p([ka("chartTranslationService")],Ye.prototype,"chartTranslationService",2),p([ka("chartMenuService")],Ye.prototype,"chartMenuService",2),p([Bl],Ye.prototype,"init",1);var Ul=Ye,Dt=class ii extends xl{constructor({chartController:e,chartMenuParamsFactory:t,isExpandedOnInit:r=!1}){super(),this.chartController=e,this.chartMenuUtils=t,this.isExpandedOnInit=r}init(){const e={cssIdentifier:"charts-format-top-level",direction:"vertical",title:this.chartTranslationService.translate("chart"),expanded:this.isExpandedOnInit,suppressEnabledCheckbox:!0,items:[this.createManagedBean(new Ul(this.chartMenuUtils,this.chartController)),this.createManagedBean(new Ll(this.chartMenuUtils,this.chartController)),this.createManagedBean(new Fl(this.chartMenuUtils))]};this.setTemplate(ii.TEMPLATE,{chartGroup:e})}};Dt.TEMPLATE=`<div>
            <ag-group-component ref="chartGroup"></ag-group-component>
        </div>`,p([Al("chartTranslationService")],Dt.prototype,"chartTranslationService",2),p([Ml],Dt.prototype,"init",1);var zl=Dt;import{_ as Hl,AgSelect as La,AgSlider as be,AgToggleButton as Wl,Autowired as Yl,Component as Kl,PostConstruct as $l,RefSelector as jl}from"@ag-grid-community/core";import{Autowired as Xl,Component as ql,PostConstruct as Zl}from"@ag-grid-community/core";var kt=class ni extends ql{constructor(e,t="shadow"){super(),this.chartMenuUtils=e,this.propertyKey=t}init(){const e=this.propertyKey,t=this.chartMenuUtils.addEnableParams(`${e}.enabled`,{cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0,title:this.chartTranslationService.translate("shadow"),suppressEnabledCheckbox:!1}),r=this.chartMenuUtils.getDefaultColorPickerParams(`${e}.color`);this.setTemplate(ni.TEMPLATE,{shadowGroup:t,shadowColorPicker:r,shadowBlurSlider:this.getSliderParams("blur",0,20),shadowXOffsetSlider:this.getSliderParams("xOffset",-10,10),shadowYOffsetSlider:this.getSliderParams("yOffset",-10,10)})}getSliderParams(e,t,r){const s=`${this.propertyKey}.${e}`,i=this.chartMenuUtils.getDefaultSliderParams(s,e,r);return i.minValue=t,i}};kt.TEMPLATE=`<div>
            <ag-group-component ref="shadowGroup">
                <ag-color-picker ref="shadowColorPicker"></ag-color-picker>
                <ag-slider ref="shadowBlurSlider"></ag-slider>
                <ag-slider ref="shadowXOffsetSlider"></ag-slider>
                <ag-slider ref="shadowYOffsetSlider"></ag-slider>
            </ag-group-component>
        </div>`,p([Xl("chartTranslationService")],kt.prototype,"chartTranslationService",2),p([Zl],kt.prototype,"init",1);var Jl=kt;import{_ as Ql,Autowired as ec,Component as tc,PostConstruct as rc,RefSelector as ac}from"@ag-grid-community/core";var Ke=class oi extends tc{constructor(e,t){super(),this.chartOptionsService=e,this.chartMenuUtils=t}init(){const e=this.chartOptionsService.getChartType(),t=Ql.includes(["scatter","bubble"],e),r=this.chartMenuUtils.addEnableParams("marker.enabled",{cssIdentifier:"charts-format-sub-level",direction:"vertical",title:this.chartTranslationService.translate("markers"),suppressEnabledCheckbox:t,suppressOpenCloseIcons:!0}),s=e==="bubble";let i,n;s?(i=this.getSliderParams("marker.maxSize","maxSize",60),n=this.getSliderParams("marker.size","minSize",60)):(i={},n=this.getSliderParams("marker.size","size",60)),this.setTemplate(oi.TEMPLATE,{seriesMarkersGroup:r,seriesMarkerShapeSelect:this.getMarkerShapeSelectParams(),seriesMarkerMinSizeSlider:i,seriesMarkerSizeSlider:n,seriesMarkerStrokeWidthSlider:this.getSliderParams("marker.strokeWidth","strokeWidth",10)}),s||this.seriesMarkerMinSizeSlider.setDisplayed(!1)}getMarkerShapeSelectParams(){const e=[{value:"square",text:"Square"},{value:"circle",text:"Circle"},{value:"cross",text:"Cross"},{value:"diamond",text:"Diamond"},{value:"plus",text:"Plus"},{value:"triangle",text:"Triangle"},{value:"heart",text:"Heart"}];return this.chartMenuUtils.addValueParams("marker.shape",{options:e,label:this.chartTranslationService.translate("shape")})}getSliderParams(e,t,r){return this.chartMenuUtils.getDefaultSliderParams(e,t,r)}};Ke.TEMPLATE=`<div>
            <ag-group-component ref="seriesMarkersGroup">
                <ag-select ref="seriesMarkerShapeSelect"></ag-select>
                <ag-slider ref="seriesMarkerMinSizeSlider"></ag-slider>
                <ag-slider ref="seriesMarkerSizeSlider"></ag-slider>
                <ag-slider ref="seriesMarkerStrokeWidthSlider"></ag-slider>
            </ag-group-component>
        </div>`,p([ac("seriesMarkerMinSizeSlider")],Ke.prototype,"seriesMarkerMinSizeSlider",2),p([ec("chartTranslationService")],Ke.prototype,"chartTranslationService",2),p([rc],Ke.prototype,"init",1);var sc=Ke;import{Component as ic,PostConstruct as nc,RefSelector as de,_ as oc}from"@ag-grid-community/core";import{_Util as $e}from"ag-charts-community";import{KeyCode as te}from"@ag-grid-community/core";var z=class ve extends ic{constructor(e){super(ve.TEMPLATE),this.H=1,this.S=1,this.B=1,this.A=1,this.isSpectrumDragging=!1,this.isSpectrumHueDragging=!1,this.isSpectrumAlphaDragging=!1,this.colorChanged=!1,this.picker=e.picker}postConstruct(){this.initTabIndex(),this.initRecentColors(),this.addGuiEventListener("focus",()=>this.spectrumColor.focus()),this.addGuiEventListener("keydown",e=>{e.key===te.ENTER&&!e.defaultPrevented&&this.destroy()}),this.addManagedListener(this.spectrumColor,"keydown",e=>this.moveDragger(e)),this.addManagedListener(this.spectrumAlphaSlider,"keydown",e=>this.moveAlphaSlider(e)),this.addManagedListener(this.spectrumHueSlider,"keydown",e=>this.moveHueSlider(e)),this.addManagedListener(this.spectrumVal,"mousedown",this.onSpectrumDraggerDown.bind(this)),this.addManagedListener(this.spectrumHue,"mousedown",this.onSpectrumHueDown.bind(this)),this.addManagedListener(this.spectrumAlpha,"mousedown",this.onSpectrumAlphaDown.bind(this)),this.addGuiEventListener("mousemove",e=>{this.onSpectrumDraggerMove(e),this.onSpectrumHueMove(e),this.onSpectrumAlphaMove(e)}),this.addManagedListener(document,"mouseup",this.onMouseUp.bind(this)),this.addManagedListener(this.recentColors,"click",this.onRecentColorClick.bind(this)),this.addManagedListener(this.recentColors,"keydown",e=>{(e.key===te.ENTER||e.key===te.SPACE)&&(e.preventDefault(),this.onRecentColorClick(e))})}initTabIndex(){const e=this.tabIndex=this.gridOptionsService.get("tabIndex").toString();this.spectrumColor.setAttribute("tabindex",e),this.spectrumHueSlider.setAttribute("tabindex",e),this.spectrumAlphaSlider.setAttribute("tabindex",e)}refreshSpectrumRect(){return this.spectrumValRect=this.spectrumVal.getBoundingClientRect()}refreshHueRect(){return this.spectrumHueRect=this.spectrumHue.getBoundingClientRect()}refreshAlphaRect(){return this.spectrumAlphaRect=this.spectrumAlpha.getBoundingClientRect()}onSpectrumDraggerDown(e){this.refreshSpectrumRect(),this.isSpectrumDragging=!0,this.moveDragger(e)}onSpectrumDraggerMove(e){this.isSpectrumDragging&&this.moveDragger(e)}onSpectrumHueDown(e){this.refreshHueRect(),this.isSpectrumHueDragging=!0,this.moveHueSlider(e)}onSpectrumHueMove(e){this.isSpectrumHueDragging&&this.moveHueSlider(e)}onSpectrumAlphaDown(e){this.refreshAlphaRect(),this.isSpectrumAlphaDragging=!0,this.moveAlphaSlider(e)}onSpectrumAlphaMove(e){this.isSpectrumAlphaDragging&&this.moveAlphaSlider(e)}onMouseUp(){this.isSpectrumDragging=!1,this.isSpectrumHueDragging=!1,this.isSpectrumAlphaDragging=!1}moveDragger(e){const t=this.spectrumValRect;if(!t)return;let r,s;if(e instanceof MouseEvent)r=e.clientX-t.left,s=e.clientY-t.top;else{const i=e.key===te.LEFT,n=e.key===te.RIGHT,o=e.key===te.UP,l=e.key===te.DOWN,c=o||l,h=i||n;if(!c&&!h)return;e.preventDefault();const{x:d,y:u}=this.getSpectrumValue();r=d+(h?i?-5:5:0),s=u+(c?o?-5:5:0)}r=Math.max(r,0),r=Math.min(r,t.width),s=Math.max(s,0),s=Math.min(s,t.height),this.setSpectrumValue(r/t.width,1-s/t.height)}moveHueSlider(e){const t=this.spectrumHueRect;if(!t)return;const r=this.moveSlider(this.spectrumHueSlider,e);r!=null&&(this.H=1-r/t.width,this.update())}moveAlphaSlider(e){const t=this.spectrumAlphaRect;if(!t)return;const r=this.moveSlider(this.spectrumAlphaSlider,e);r!=null&&(this.A=r/t.width,this.update())}moveSlider(e,t){var r;const s=e.getBoundingClientRect(),i=(r=e.parentElement)==null?void 0:r.getBoundingClientRect();if(!e||!i)return null;let n;if(t instanceof MouseEvent)n=t.clientX-i.left;else{const o=t.key===te.LEFT,l=t.key===te.RIGHT;if(!o&&!l)return null;t.preventDefault();const c=o?-5:5;n=parseFloat(e.style.left)-s.width/2+c}return n=Math.max(n,0),n=Math.min(n,i.width),e.style.left=n+s.width/2+"px",n}update(){const e=$e.Color.fromHSB(this.H*360,this.S,this.B,this.A),t=$e.Color.fromHSB(this.H*360,1,1),r=e.toRgbaString(),s=this.picker;$e.Color.fromString(s.getValue()).toRgbaString()!==r&&(this.colorChanged=!0),s.setValue(r),this.spectrumColor.style.backgroundColor=t.toRgbaString(),this.spectrumDragger.style.backgroundColor=r}setSpectrumValue(e,t){const r=this.spectrumValRect||this.refreshSpectrumRect();if(r==null)return;const s=this.spectrumDragger,i=s.getBoundingClientRect();e=Math.max(0,e),e=Math.min(1,e),t=Math.max(0,t),t=Math.min(1,t),this.S=e,this.B=t,s.style.left=e*r.width-i.width/2+"px",s.style.top=(1-t)*r.height-i.height/2+"px",this.update()}getSpectrumValue(){const e=this.spectrumDragger,t=e.getBoundingClientRect(),r=parseFloat(e.style.left)+t.width/2,s=parseFloat(e.style.top)+t.height/2;return{x:r,y:s}}initRecentColors(){const t=ve.recentColors.map((r,s)=>`<div class="ag-recent-color" id=${s} style="background-color: ${r}; width: 15px; height: 15px;" recent-color="${r}" tabIndex="${this.tabIndex}"></div>`);this.recentColors.innerHTML=t.join("")}setValue(e){const t=$e.Color.fromString(e),[r,s,i]=t.toHSB();this.H=(isNaN(r)?0:r)/360,this.A=t.a;const n=this.spectrumHueRect||this.refreshHueRect(),o=this.spectrumAlphaRect||this.refreshAlphaRect();this.spectrumHueSlider.style.left=`${(this.H-1)*-n.width}px`,this.spectrumAlphaSlider.style.left=`${this.A*o.width}px`,this.setSpectrumValue(s,i)}onRecentColorClick(e){const t=e.target;if(!oc.exists(t.id))return;const r=parseInt(t.id,10);this.setValue(ve.recentColors[r]),this.destroy()}addRecentColor(){const t=$e.Color.fromHSB(this.H*360,this.S,this.B,this.A).toRgbaString();let r=ve.recentColors;!this.colorChanged||r[0]===t||(r=r.filter(s=>s!=t),r=[t].concat(r),r.length>ve.maxRecentColors&&(r=r.slice(0,ve.maxRecentColors)),ve.recentColors=r)}destroy(){this.addRecentColor(),super.destroy()}};z.maxRecentColors=8,z.recentColors=[],z.TEMPLATE=`<div class="ag-color-panel" tabindex="-1">
            <div ref="spectrumColor" class="ag-spectrum-color">
                <div class="ag-spectrum-sat ag-spectrum-fill">
                    <div ref="spectrumVal" class="ag-spectrum-val ag-spectrum-fill">
                        <div ref="spectrumDragger" class="ag-spectrum-dragger"></div>
                    </div>
                </div>
            </div>
            <div class="ag-spectrum-tools">
                <div ref="spectrumHue" class="ag-spectrum-hue ag-spectrum-tool">
                    <div class="ag-spectrum-hue-background"></div>
                    <div ref="spectrumHueSlider" class="ag-spectrum-slider"></div>
                </div>
                <div ref="spectrumAlpha" class="ag-spectrum-alpha ag-spectrum-tool">
                    <div class="ag-spectrum-alpha-background"></div>
                    <div ref="spectrumAlphaSlider" class="ag-spectrum-slider"></div>
                </div>
                <div ref="recentColors" class="ag-recent-colors"></div>
            </div>
        </div>`,p([de("spectrumColor")],z.prototype,"spectrumColor",2),p([de("spectrumVal")],z.prototype,"spectrumVal",2),p([de("spectrumDragger")],z.prototype,"spectrumDragger",2),p([de("spectrumHue")],z.prototype,"spectrumHue",2),p([de("spectrumHueSlider")],z.prototype,"spectrumHueSlider",2),p([de("spectrumAlpha")],z.prototype,"spectrumAlpha",2),p([de("spectrumAlphaSlider")],z.prototype,"spectrumAlphaSlider",2),p([de("recentColors")],z.prototype,"recentColors",2),p([nc],z.prototype,"postConstruct",1);var lc=z;import{AgPickerField as cc,AgDialog as hc}from"@ag-grid-community/core";var Ra=class extends cc{constructor(a){super(T({pickerAriaLabelKey:"ariaLabelColorPicker",pickerAriaLabelValue:"Color Picker",pickerType:"ag-list",className:"ag-color-picker",pickerIcon:"colorPicker"},a))}postConstruct(){super.postConstruct(),this.value&&this.setValue(this.value)}createPickerComponent(){const a=this.getGui().getBoundingClientRect();return this.createBean(new hc({closable:!1,modal:!0,hideTitleBar:!0,minWidth:190,width:190,height:250,x:a.right-190,y:a.top-250}))}renderAndPositionPicker(){const a=this.pickerComponent,e=this.createBean(new lc({picker:this}));return a.addCssClass("ag-color-dialog"),e.addDestroyFunc(()=>{a.isAlive()&&this.destroyBean(a)}),a.setParentComponent(this),a.setBodyComponent(e),e.setValue(this.getValue()),e.getGui().focus(),a.addDestroyFunc(()=>{this.isDestroyingPicker?this.isDestroyingPicker=!1:(this.beforeHidePicker(),this.isDestroyingPicker=!0,e.isAlive()&&this.destroyBean(e),this.isAlive()&&this.getFocusableElement().focus())}),()=>{var t;return(t=this.pickerComponent)==null?void 0:t.close()}}setValue(a){return this.value===a?this:(this.eDisplayField.style.backgroundColor=a,super.setValue(a))}getValue(){return this.value}};import{Autowired as dc,Component as uc,PostConstruct as pc}from"@ag-grid-community/core";var Lt=class li extends uc{constructor(e){super(),this.chartMenuUtils=e}init(){const e={cssIdentifier:"charts-format-sub-level",direction:"vertical",title:this.chartTranslationService.translate("callout"),enabled:!0,suppressOpenCloseIcons:!0,suppressEnabledCheckbox:!0};this.setTemplate(li.TEMPLATE,{calloutGroup:e,calloutLengthSlider:this.chartMenuUtils.getDefaultSliderParams("calloutLine.length","length",40),calloutStrokeWidthSlider:this.chartMenuUtils.getDefaultSliderParams("calloutLine.strokeWidth","strokeWidth",10),labelOffsetSlider:this.chartMenuUtils.getDefaultSliderParams("calloutLabel.offset","offset",30)})}};Lt.TEMPLATE=`<div>
            <ag-group-component ref="calloutGroup">
                <ag-slider ref="calloutLengthSlider"></ag-slider>
                <ag-slider ref="calloutStrokeWidthSlider"></ag-slider>
                <ag-slider ref="labelOffsetSlider"></ag-slider>
            </ag-group-component>
        </div>`,p([dc("chartTranslationService")],Lt.prototype,"chartTranslationService",2),p([pc],Lt.prototype,"init",1);var gc=Lt;import{Autowired as mc,Component as Cc,PostConstruct as fc}from"@ag-grid-community/core";var Rt=class ci extends Cc{constructor(e){super(),this.chartMenuUtils=e}init(){const e={cssIdentifier:"charts-format-sub-level",direction:"vertical",title:this.chartTranslationService.translate("cap"),enabled:!0,suppressOpenCloseIcons:!0,suppressEnabledCheckbox:!0},t=this.chartMenuUtils.getDefaultSliderParams("cap.lengthRatio","capLengthRatio",1);t.step=.05,this.setTemplate(ci.TEMPLATE,{capsGroup:e,capLengthRatioSlider:t})}};Rt.TEMPLATE=`<div>
            <ag-group-component ref="capsGroup">
                <ag-slider ref="capLengthRatioSlider"></ag-slider>
            </ag-group-component>
        </div>`,p([mc("chartTranslationService")],Rt.prototype,"chartTranslationService",2),p([fc],Rt.prototype,"init",1);var vc=Rt;import{Autowired as yc,Component as Sc,PostConstruct as Tc}from"@ag-grid-community/core";var It=class hi extends Sc{constructor(e){super(),this.chartMenuUtils=e}init(){const e={cssIdentifier:"charts-format-sub-level",direction:"vertical",title:this.chartTranslationService.translate("connectorLine"),enabled:!0,suppressOpenCloseIcons:!0,suppressEnabledCheckbox:!0};this.setTemplate(hi.TEMPLATE,{lineGroup:e,lineColorPicker:this.chartMenuUtils.getDefaultColorPickerParams("line.stroke"),lineStrokeWidthSlider:this.getSliderParams("strokeWidth",10,"line.strokeWidth"),lineDashSlider:this.getSliderParams("lineDash",30,"line.lineDash",1,!0),lineOpacitySlider:this.getSliderParams("strokeOpacity",1,"line.strokeOpacity",.05)})}getSliderParams(e,t,r,s=1,i=!1){const n=this.chartMenuUtils.getDefaultSliderParams(r,e,t,i);return n.step=s,n}};It.TEMPLATE=`<div>
            <ag-group-component ref="lineGroup">
                <ag-color-picker ref="lineColorPicker"></ag-color-picker>
                <ag-slider ref="lineStrokeWidthSlider"></ag-slider>
                <ag-slider ref="lineOpacitySlider"></ag-slider>
                <ag-slider ref="lineDashSlider"></ag-slider>                
            </ag-group-component>
        </div>`,p([yc("chartTranslationService")],It.prototype,"chartTranslationService",2),p([Tc],It.prototype,"init",1);var Pc=It;import{Autowired as bc,Component as Ac,PostConstruct as xc}from"@ag-grid-community/core";var _t=class di extends Ac{constructor(e){super(),this.chartMenuUtils=e}init(){const e={cssIdentifier:"charts-format-sub-level",direction:"vertical",title:this.chartTranslationService.translate("whisker"),enabled:!0,suppressOpenCloseIcons:!0,suppressEnabledCheckbox:!0};this.setTemplate(di.TEMPLATE,{whiskersGroup:e,whiskerColorPicker:this.chartMenuUtils.getDefaultColorPickerParams("whisker.stroke"),whiskerThicknessSlider:this.chartMenuUtils.getDefaultSliderParams("whisker.strokeWidth","strokeWidth",10),whiskerOpacitySlider:this.chartMenuUtils.getDefaultSliderParams("whisker.strokeOpacity","strokeOpacity",1),whiskerLineDashSlider:this.chartMenuUtils.getDefaultSliderParams("whisker.lineDash","lineDash",30,!0),whiskerLineDashOffsetSlider:this.chartMenuUtils.getDefaultSliderParams("whisker.lineDashOffset","lineDashOffset",30)})}};_t.TEMPLATE=`<div>
            <ag-group-component ref="whiskersGroup">
                <ag-color-picker ref="whiskerColorPicker"></ag-color-picker>
                <ag-slider ref="whiskerThicknessSlider"></ag-slider>
                <ag-slider ref="whiskerOpacitySlider"></ag-slider>
                <ag-slider ref="whiskerLineDashSlider"></ag-slider>
                <ag-slider ref="whiskerLineDashOffsetSlider"></ag-slider>
            </ag-group-component>
        </div>`,p([bc("chartTranslationService")],_t.prototype,"chartTranslationService",2),p([xc],_t.prototype,"init",1);var Mc=_t;import{_ as Ec,AgSlider as wc,Autowired as Oc,Component as Dc,PostConstruct as kc,RefSelector as Lc}from"@ag-grid-community/core";var je=class ui extends Dc{constructor(e){super(),this.chartMenuUtils=e,this.activePanels=[]}init(){const e={cssIdentifier:"charts-format-sub-level",direction:"vertical",title:this.chartTranslationService.translate("seriesItems"),enabled:!0,suppressOpenCloseIcons:!0,suppressEnabledCheckbox:!0};this.setTemplate(ui.TEMPLATE,{seriesItemsGroup:e,seriesItemSelect:this.getSeriesItemsParams()}),this.initSeriesControls()}getSeriesItemsParams(){const e=[{value:"positive",text:this.chartTranslationService.translate("seriesItemPositive")},{value:"negative",text:this.chartTranslationService.translate("seriesItemNegative")}],t=r=>{this.destroyActivePanels(),this.initSeriesControls(r)};return{label:this.chartTranslationService.translate("seriesItemType"),labelAlignment:"left",labelWidth:"flex",inputWidth:"flex",options:e,value:"positive",onValueChange:t}}initSeriesControls(e="positive"){this.initSlider("strokeWidth",10,`item.${e}.strokeWidth`),this.initSlider("lineDash",30,`item.${e}.lineDash`,1,!0),this.initSlider("strokeOpacity",1,`item.${e}.strokeOpacity`,.05,!1),this.initSlider("fillOpacity",1,`item.${e}.fillOpacity`,.05,!1),this.initItemLabels(e)}initSlider(e,t,r,s=1,i=!1){const n=this.chartMenuUtils.getDefaultSliderParams(r,e,t,i);n.step=s;const o=this.seriesItemsGroup.createManagedBean(new wc(n));this.seriesItemsGroup.addItem(o),this.activePanels.push(o)}initItemLabels(e){const t=this.chartMenuUtils.getDefaultFontPanelParams(`item.${e}.label`,"seriesItemLabels"),r=this.createBean(new ce(t));this.seriesItemsGroup.addItem(r),this.activePanels.push(r)}destroyActivePanels(){this.activePanels.forEach(e=>{Ec.removeFromParent(e.getGui()),this.destroyBean(e)})}destroy(){this.destroyActivePanels(),super.destroy()}};je.TEMPLATE=`<div>
            <ag-group-component ref="seriesItemsGroup">
                <ag-select ref="seriesItemSelect"></ag-select>
            </ag-group-component>
        </div>`,p([Lc("seriesItemsGroup")],je.prototype,"seriesItemsGroup",2),p([Oc("chartTranslationService")],je.prototype,"chartTranslationService",2),p([kc],je.prototype,"init",1);var Rc=je;import{Autowired as Ic,Component as _c,PostConstruct as Fc}from"@ag-grid-community/core";var Ft=class pi extends _c{constructor(e){super(),this.chartMenuUtils=e}init(){const e={cssIdentifier:"charts-format-sub-level",direction:"vertical",enabled:!0,suppressOpenCloseIcons:!0,suppressEnabledCheckbox:!0};this.setTemplate(pi.TEMPLATE,{groupSpacing:A(T({},e),{title:this.chartTranslationService.translate("group")}),tileSpacing:A(T({},e),{title:this.chartTranslationService.translate("tile")}),groupPaddingSlider:this.getSliderParams("padding","group.padding"),groupSpacingSlider:this.getSliderParams("spacing","group.gap"),tilePaddingSlider:this.getSliderParams("padding","tile.padding"),tileSpacingSlider:this.getSliderParams("spacing","tile.gap")})}getSliderParams(e,t){return this.chartMenuUtils.getDefaultSliderParams(t,e,10)}};Ft.TEMPLATE=`<div>
            <ag-group-component ref="groupSpacing">
                <ag-slider ref="groupPaddingSlider"></ag-slider>
                <ag-slider ref="groupSpacingSlider"></ag-slider>
            </ag-group-component>
            <ag-group-component ref="tileSpacing">
                <ag-slider ref="tilePaddingSlider"></ag-slider>
                <ag-slider ref="tileSpacingSlider"></ag-slider>
            </ag-group-component>
        </div>`,p([Ic("chartTranslationService")],Ft.prototype,"chartTranslationService",2),p([Fc],Ft.prototype,"init",1);var Gc=Ft,Xe=class gi extends Kl{constructor({chartController:e,chartOptionsService:t,seriesType:r,isExpandedOnInit:s=!1}){super(),this.activePanels=[],this.widgetFuncs={lineWidth:()=>this.initStrokeWidth("lineWidth"),strokeWidth:()=>this.initStrokeWidth("strokeWidth"),lineColor:()=>this.initLineColor(),lineDash:()=>this.initLineDash(),lineOpacity:()=>this.initLineOpacity(),fillOpacity:()=>this.initFillOpacity(),markers:()=>this.initMarkers(),labels:()=>this.initLabels(),shadow:()=>this.initShadow(),tooltips:()=>this.initTooltips(),bins:()=>this.initBins(),whiskers:()=>this.initWhiskers(),caps:()=>this.initCaps(),connectorLine:()=>this.initConnectorLine(),seriesItems:()=>this.initSeriesItemsPanel(),tileSpacing:()=>this.initTileSpacingPanel()},this.seriesWidgetMappings={column:["tooltips","strokeWidth","lineDash","lineOpacity","fillOpacity","labels","shadow"],bar:["tooltips","strokeWidth","lineDash","lineOpacity","fillOpacity","labels","shadow"],pie:["tooltips","strokeWidth","lineOpacity","fillOpacity","labels","shadow"],donut:["tooltips","strokeWidth","lineOpacity","fillOpacity","labels","shadow"],line:["tooltips","lineWidth","lineDash","lineOpacity","markers","labels"],scatter:["tooltips","markers","labels"],bubble:["tooltips","markers","labels"],area:["tooltips","lineWidth","lineDash","lineOpacity","fillOpacity","markers","labels","shadow"],histogram:["tooltips","bins","strokeWidth","lineDash","lineOpacity","fillOpacity","labels","shadow"],"radial-column":["tooltips","strokeWidth","lineDash","lineOpacity","fillOpacity","labels"],"radial-bar":["tooltips","strokeWidth","lineDash","lineOpacity","fillOpacity","labels"],"radar-line":["tooltips","strokeWidth","lineDash","lineOpacity","markers","labels"],"radar-area":["tooltips","strokeWidth","lineDash","lineOpacity","fillOpacity","markers","labels"],nightingale:["tooltips","strokeWidth","lineDash","lineOpacity","fillOpacity","labels"],"box-plot":["tooltips","strokeWidth","lineDash","lineOpacity","fillOpacity","whiskers","caps"],"range-bar":["tooltips","strokeWidth","lineDash","lineOpacity","fillOpacity","labels"],"range-area":["tooltips","lineWidth","lineDash","lineOpacity","fillOpacity","markers","labels","shadow"],treemap:["tooltips","tileSpacing"],sunburst:["tooltips"],heatmap:["tooltips","labels","lineColor","lineWidth","lineOpacity"],waterfall:["tooltips","connectorLine","seriesItems"]},this.chartController=e,this.chartOptionsService=t,this.seriesType=r||this.getChartSeriesType(),this.isExpandedOnInit=s}init(){const e={cssIdentifier:"charts-format-top-level",direction:"vertical",title:this.translate("series"),expanded:this.isExpandedOnInit,suppressEnabledCheckbox:!0};this.setTemplate(gi.TEMPLATE,{seriesGroup:e}),this.chartMenuUtils=this.createManagedBean(new ke(this.chartOptionsService.getSeriesOptionsProxy(()=>this.seriesType))),this.chartOptions=this.chartMenuUtils.getChartOptions(),this.addManagedListener(this.chartController,Y.EVENT_CHART_SERIES_CHART_TYPE_CHANGED,this.refreshWidgets.bind(this)),this.refreshWidgets()}refreshWidgets(){this.destroyActivePanels(),this.chartController.getChartProxy().getChart().waitForUpdate().then(()=>{var t;this.isAlive()&&(this.chartController.isComboChart()&&(this.updateSeriesType(),this.initSeriesSelect()),((t=this.seriesWidgetMappings[this.seriesType])!=null?t:[]).forEach(s=>this.widgetFuncs[s]()))}).catch(t=>console.error("AG Grid - chart rendering failed",t))}initSeriesSelect(){const e=this.seriesGroup.createManagedBean(new La({label:this.translate("seriesType"),labelAlignment:"left",labelWidth:"flex",inputWidth:"flex",options:this.getSeriesSelectOptions(),value:`${this.seriesType}`,onValueChange:t=>{this.seriesType=t,this.refreshWidgets()}}));this.seriesGroup.addItem(e),this.activePanels.push(e)}initTooltips(){const e=this.createBean(new Wl(this.chartMenuUtils.addValueParams("tooltip.enabled",{label:this.translate("tooltips"),labelAlignment:"left",labelWidth:"flex",inputWidth:"flex"})));this.addWidget(e)}initLineColor(){const e=this.createBean(new Ra(this.chartMenuUtils.getDefaultColorPickerParams("stroke","strokeColor")));this.addWidget(e)}initStrokeWidth(e){const t=this.createBean(new be(this.chartMenuUtils.getDefaultSliderParams("strokeWidth",e,10)));this.addWidget(t)}initLineDash(){const e=this.createBean(new be(this.chartMenuUtils.getDefaultSliderParams("lineDash","lineDash",30,!0)));this.addWidget(e)}initLineOpacity(){const e=this.chartMenuUtils.getDefaultSliderParams("strokeOpacity","strokeOpacity",1);e.step=.05;const t=this.createBean(new be(e));this.addWidget(t)}initFillOpacity(){const e=this.chartMenuUtils.getDefaultSliderParams("fillOpacity","fillOpacity",1);e.step=.05;const t=this.createBean(new be(e));this.addWidget(t)}initLabels(){const e=lr(this.seriesType),t=e?"calloutLabel":"label",r=e?"calloutLabels":"labels",s=this.chartMenuUtils.getDefaultFontPanelParams(t,r),i=this.createBean(new ce(s));if(e){const n=this.createBean(new gc(this.chartMenuUtils));i.addCompToPanel(n),this.activePanels.push(n)}if(this.addWidget(i),e){const n=this.chartMenuUtils.getDefaultFontPanelParams("sectorLabel","sectorLabels"),o=this.createBean(new ce(n)),l=this.getSectorLabelPositionRatio();o.addCompToPanel(l),this.addWidget(o)}if(this.seriesType==="range-bar"){const n=[{value:"inside",text:this.translate("inside")},{value:"outside",text:this.translate("outside")}],o=i.createManagedBean(new La(this.chartMenuUtils.addValueParams("label.placement",{label:this.translate("labelPlacement"),labelAlignment:"left",labelWidth:"flex",inputWidth:"flex",options:n})));i.addCompToPanel(o),this.activePanels.push(o);const l=i.createManagedBean(new be(this.chartMenuUtils.getDefaultSliderParams("label.padding","padding",200)));i.addCompToPanel(l),this.activePanels.push(l)}}getSectorLabelPositionRatio(){const e=this.chartMenuUtils.getDefaultSliderParams("sectorLabel.positionRatio","positionRatio",1);return e.step=.05,this.createBean(new be(e))}initShadow(){const e=this.createBean(new Jl(this.chartMenuUtils));this.addWidget(e)}initMarkers(){const e=this.createBean(new sc(this.chartOptionsService,this.chartMenuUtils));this.addWidget(e)}initBins(){var e;const t=this.chartMenuUtils.getDefaultSliderParams("binCount","histogramBinCount",20),r=((e=this.chartOptions.getValue("bins"))!=null?e:this.chartOptions.getValue("calculatedBins",!0)).length;t.value=`${r}`,t.maxValue=Math.max(r,20);const s=this.createBean(new be(t));this.addWidget(s)}initWhiskers(){const e=this.createBean(new Mc(this.chartMenuUtils));this.addWidget(e)}initCaps(){const e=this.createBean(new vc(this.chartMenuUtils));this.addWidget(e)}initConnectorLine(){const e=this.createBean(new Pc(this.chartMenuUtils));this.addWidget(e)}initSeriesItemsPanel(){const e=this.createBean(new Rc(this.chartMenuUtils));this.addWidget(e)}initTileSpacingPanel(){const e=this.createBean(new Gc(this.chartMenuUtils));this.addWidget(e)}addWidget(e){this.seriesGroup.addItem(e),this.activePanels.push(e)}getChartSeriesType(){if(this.chartController.getSeriesChartTypes().length===0)return"column";const e=this.chartController.getSeriesChartTypes()[0].chartType;return e==="columnLineCombo"?"column":e==="areaColumnCombo"?"area":j(e)}getSeriesSelectOptions(){this.seriesSelectOptions||(this.seriesSelectOptions=new Map([["area",{value:"area",text:this.translate("area")}],["bar",{value:"bar",text:this.translate("bar")}],["column",{value:"column",text:this.translate("column")}],["line",{value:"line",text:this.translate("line")}],["scatter",{value:"scatter",text:this.translate("scatter")}],["histogram",{value:"histogram",text:this.translate("histogram")}],["radial-column",{value:"radial-column",text:this.translate("radialColumn")}],["radial-bar",{value:"radial-bar",text:this.translate("radialBar")}],["radar-line",{value:"radar-line",text:this.translate("radarLine")}],["radar-area",{value:"radar-area",text:this.translate("radarArea")}],["nightingale",{value:"nightingale",text:this.translate("nightingale")}],["range-bar",{value:"range-bar",text:this.translate("rangeBar")}],["range-area",{value:"range-area",text:this.translate("rangeArea")}],["treemap",{value:"treemap",text:this.translate("treemap")}],["sunburst",{value:"sunburst",text:this.translate("sunburst")}],["waterfall",{value:"waterfall",text:this.translate("waterfall")}],["box-plot",{value:"box-plot",text:this.translate("boxPlot")}],["pie",{value:"pie",text:this.translate("pie")}],["donut",{value:"donut",text:this.translate("donut")}]]));const e=new Set;return this.chartController.getActiveSeriesChartTypes().forEach(t=>{const r=j(t.chartType);e.add(this.seriesSelectOptions.get(r))}),Array.from(e)}updateSeriesType(){const e=this.chartController.getActiveSeriesChartTypes().map(r=>j(r.chartType));!e.includes(this.seriesType)&&e.length>0&&(this.seriesType=e[0])}translate(e){return this.chartTranslationService.translate(e)}destroyActivePanels(){this.activePanels.forEach(e=>{Hl.removeFromParent(e.getGui()),this.destroyBean(e)})}destroy(){this.destroyActivePanels(),super.destroy()}};Xe.TEMPLATE=`<div>
            <ag-group-component ref="seriesGroup">
            </ag-group-component>
        </div>`,p([jl("seriesGroup")],Xe.prototype,"seriesGroup",2),p([Yl("chartTranslationService")],Xe.prototype,"chartTranslationService",2),p([$l],Xe.prototype,"init",1);var Vc=Xe;import{Autowired as Nc,Component as Bc,PostConstruct as Uc}from"@ag-grid-community/core";var Gt=class mi extends Bc{constructor({chartMenuParamsFactory:e,isExpandedOnInit:t=!1}){super(),this.chartMenuUtils=e,this.isExpandedOnInit=t}init(){const e=this.chartMenuUtils.addEnableParams("gradientLegend.enabled",{cssIdentifier:"charts-format-top-level",direction:"vertical",title:this.chartTranslationService.translate("legend"),suppressEnabledCheckbox:!1,suppressToggleExpandOnEnableChange:!0,expanded:this.isExpandedOnInit,items:[this.createLabelPanel()]});this.setTemplate(mi.TEMPLATE,{legendGroup:e,legendPositionSelect:this.chartMenuUtils.getDefaultLegendParams("gradientLegend.position"),gradientReverseCheckbox:this.getGradientReverseCheckboxParams(),gradientThicknessSlider:this.chartMenuUtils.getDefaultSliderParams("gradientLegend.gradient.thickness","thickness",40),gradientPreferredLengthSlider:this.chartMenuUtils.getDefaultSliderParams("gradientLegend.gradient.preferredLength","preferredLength",300),legendSpacingSlider:this.chartMenuUtils.getDefaultSliderParams("gradientLegend.spacing","spacing",200)})}getGradientReverseCheckboxParams(){return this.chartMenuUtils.addValueParams("gradientLegend.reverseOrder",{label:this.chartTranslationService.translate("reverseDirection"),labelWidth:"flex"})}createLabelPanel(){const e={enabled:!0,suppressEnabledCheckbox:!0,chartMenuUtils:this.chartMenuUtils,keyMapper:t=>`gradientLegend.scale.label.${t}`};return this.createManagedBean(new ce(e))}};Gt.TEMPLATE=`<div>
            <ag-group-component ref="legendGroup">
                <ag-select ref="legendPositionSelect"></ag-select>
                <ag-checkbox ref="gradientReverseCheckbox"></ag-checkbox>
                <ag-slider ref="gradientThicknessSlider"></ag-slider>
                <ag-slider ref="gradientPreferredLengthSlider"></ag-slider>
                <ag-slider ref="legendSpacingSlider"></ag-slider>
            </ag-group-component>
        </div>`,p([Nc("chartTranslationService")],Gt.prototype,"chartTranslationService",2),p([Uc],Gt.prototype,"init",1);var zc=Gt;import{BeanStub as Hc,PostConstruct as Wc,_ as Yc}from"@ag-grid-community/core";var fr=class extends Hc{constructor(a,e,t,r){super(),this.chartController=a,this.eGui=e,this.cssClass=t,this.createPanels=r,this.panels=[]}postConstruct(){this.addManagedListener(this.chartController,Y.EVENT_CHART_UPDATED,()=>this.refreshPanels(!0)),this.addManagedListener(this.chartController,Y.EVENT_CHART_API_UPDATE,()=>this.refreshPanels(!1))}addComponent(a){this.createBean(a),this.panels.push(a),a.addCssClass(this.cssClass),this.eGui.appendChild(a.getGui())}refreshPanels(a){const e=this.chartController.getChartType(),t=this.chartController.isGrouping(),r=j(e);a&&e===this.chartType&&t===this.isGrouping||(this.destroyPanels(),this.createPanels(e,r),this.chartType=e,this.isGrouping=t)}destroyPanels(){this.panels.forEach(a=>{Yc.removeFromParent(a.getGui()),this.destroyBean(a)}),this.panels=[]}destroy(){this.destroyPanels(),super.destroy()}};p([Wc],fr.prototype,"postConstruct",1);var Kc={groups:[{type:"chart"},{type:"legend"},{type:"series"},{type:"axis"}]},vr=class Ci extends Uo{constructor(e){super(Ci.TEMPLATE),this.chartMenuContext=e,this.isGroupPanelShownInSeries=(t,r)=>{var s,i;return["chart","legend","series"].includes(t)?!0:(i=(s={bar:["axis","horizontalAxis","verticalAxis"],column:["axis","horizontalAxis","verticalAxis"],line:["axis","horizontalAxis","verticalAxis"],area:["axis","horizontalAxis","verticalAxis"],scatter:["axis","horizontalAxis","verticalAxis"],bubble:["axis","horizontalAxis","verticalAxis"],histogram:["axis","horizontalAxis","verticalAxis"],cartesian:["axis","horizontalAxis","verticalAxis"],"radial-column":["axis"],"radial-bar":["axis"],"radar-line":["axis"],"radar-area":["axis"],nightingale:["axis"],"range-bar":["axis","horizontalAxis","verticalAxis"],"range-area":["axis","horizontalAxis","verticalAxis"],treemap:[],sunburst:[],heatmap:["axis","horizontalAxis","verticalAxis"],waterfall:["axis","horizontalAxis","verticalAxis"],"box-plot":["axis","horizontalAxis","verticalAxis"]}[r])==null?void 0:s.includes(t))!=null?i:!1}}init(){this.chartPanelFeature=this.createManagedBean(new fr(this.chartMenuContext.chartController,this.getGui(),"ag-chart-format-section",(e,t)=>this.createPanels(e,t))),this.chartPanelFeature.refreshPanels()}createPanels(e,t){var r;(r=this.getFormatPanelDef().groups)==null||r.forEach(s=>{const i=s.type;if(!this.isGroupPanelShownInSeries(i,t))return;const n=A(T({},this.chartMenuContext),{isExpandedOnInit:s.isOpen,seriesType:t});switch(i){case"chart":this.chartPanelFeature.addComponent(new zl(n));break;case"legend":const o=Ln(e)?new zc(n):new qo(n);this.chartPanelFeature.addComponent(o);break;case"axis":Dn(e)?this.chartPanelFeature.addComponent(new bl(n)):le(e)&&(this.chartPanelFeature.addComponent(new wt("xAxis",n)),this.chartPanelFeature.addComponent(new wt("yAxis",n)));break;case"horizontalAxis":this.chartPanelFeature.addComponent(new wt("xAxis",n));break;case"verticalAxis":this.chartPanelFeature.addComponent(new wt("yAxis",n));break;case"series":this.chartPanelFeature.addComponent(new Vc(n));break;case"navigator":Ea.warnOnce("'navigator' is now displayed in the charts advanced settings instead of the format panel, and this setting will be ignored.");default:Ea.warnOnce(`Invalid charts format panel group name supplied: '${s.type}'`)}})}getFormatPanelDef(){var e;const t=(e=this.gridOptionsService.get("chartToolPanelsDef"))==null?void 0:e.formatPanel;return t||Kc}};vr.TEMPLATE='<div class="ag-chart-format-wrapper"></div>',p([zo],vr.prototype,"init",1);var $c=vr;import{_ as re,Component as jc,PostConstruct as Xc,RefSelector as qe}from"@ag-grid-community/core";import{_ as Ia,AgGroupComponent as qc,Autowired as Zc,Component as Jc,PostConstruct as Qc}from"@ag-grid-community/core";import{PostConstruct as eh}from"@ag-grid-community/core";import{Autowired as th,Component as rh,PostConstruct as ah}from"@ag-grid-community/core";import{_Scene as _a}from"ag-charts-community";var sh="ag-chart-mini-thumbnail-canvas",ih="AG Grid - chart update failed",ue=class extends rh{constructor(a,e){super(),this.tooltipName=e,this.size=58,this.padding=5,this.root=new _a.Group;const t=new _a.Scene({width:this.size,height:this.size});t.canvas.element.classList.add(sh),t.setRoot(this.root),t.setContainer(a),this.scene=t}init(){this.scene.canvas.element.title=this.chartTranslationService.translate(this.tooltipName),this.scene.render().catch(a=>{console.error(`${ih}`,a)})}};p([th("chartTranslationService")],ue.prototype,"chartTranslationService",2),p([ah],ue.prototype,"init",1);import{_Scene as Fa}from"ag-charts-community";var R=class extends ue{constructor(a,e){super(a,e),this.stroke="gray",this.axisOvershoot=3}addAxes(){const a=this.size,e=this.padding,t=new Fa.Line;t.x1=e,t.y1=e,t.x2=e,t.y2=a-e+this.axisOvershoot,t.stroke=this.stroke;const r=new Fa.Line;r.x1=e-this.axisOvershoot+1,r.y1=a-e,r.x2=a-e+1,r.y2=a-e,r.stroke=this.stroke;const s=this.root;s.append(t),s.append(r)}};p([eh],R.prototype,"addAxes",1);import{_Scene as H}from"ag-charts-community";function Ze(a){const{stacked:e,size:t,padding:r,xScalePadding:s,xScaleDomain:i,yScaleDomain:n}=a,o=new H.BandScale;o.domain=i,o.range=[r,t-r],o.paddingInner=s,o.paddingOuter=s;const l=new H.LinearScale;l.domain=n,l.range=[t-r,r];const c=(h,d,u)=>h.map((g,m)=>{const f=u.convert(g),C=new H.Rect;return C.x=d.convert(m),C.y=f,C.width=d.bandwidth,C.height=u.convert(0)-f,C.strokeWidth=0,C.crisp=!0,C});return e?a.data.map(h=>c(h,o,l)):c(a.data,o,l)}function yr(a,e,t,r){const s=new H.LinearScale;s.domain=[0,4],s.range=[r,t-r];const i=new H.LinearScale;i.domain=[0,10],i.range=[t-r,r];const n=e.map(l=>{const c=new H.Path;return c.strokeWidth=3,c.lineCap="round",c.fill=void 0,l.forEach((h,d)=>{c.path[d>0?"lineTo":"moveTo"](s.convert(d),i.convert(h))}),c}),o=new H.Group;return o.setClipRectInGroupCoordinateSpace(new H.BBox(r,r,t-r*2,t-r*2)),o.append(n),a.append(o),n}function Ga(a,e,t,r,s,i=0){const n=new H.LinearScale;n.domain=[0,7],n.range=[-Math.PI,Math.PI].map(u=>u+Math.PI/2);const o=new H.LinearScale;o.domain=[0,10],o.range=[r,s];const l=[],c=e.map(u=>{const g=new H.Path;return g.strokeWidth=1,g.strokeOpacity=.5,g.lineCap="round",g.fill=void 0,g.fillOpacity=.8,u.forEach((m,f)=>{const C=n.convert(f),v=r+s-o.convert(m),y=v*Math.cos(C),S=v*Math.sin(C);if(g.path[f>0?"lineTo":"moveTo"](y,S),i>0){const P=new H.Circle;P.x=y,P.y=S,P.size=i,l.push(P)}}),g.path.closePath(),g}),h=new H.Group,d=t/2;return h.translationX=d,h.translationY=d,h.append([...c,...l]),a.append(h),{paths:c,markers:l}}function Vt(a){let[e,t]=[1/0,-1/0];return{processedData:a.reduce((s,i,n)=>{var o;const l=n>0?s[n-1]:void 0;(o=s[n])!=null||(s[n]=[]);const c=s[n];return i.forEach((h,d)=>{l&&(h+=l[d]),c[d]=h,c[d]<e&&(e=c[d]),c[d]>t&&(t=c[d])}),s},[]),min:e,max:t}}var Va=class extends R{constructor(a,e,t){super(a,"groupedColumnTooltip"),this.columnData=[2,3,4];const{root:r,columnData:s,size:i,padding:n}=this;this.columns=Ze({stacked:!1,root:r,data:s,size:i,padding:n,xScaleDomain:[0,1,2],yScaleDomain:[0,4],xScalePadding:.3}),r.append(this.columns),this.updateColors(e,t)}updateColors(a,e){this.columns.forEach((t,r)=>{t.fill=a[r],t.stroke=e[r]})}};Va.chartType="groupedColumn";var Sr=class fi extends R{constructor(e,t,r,s,i,n=fi.data,o=[0,16],l="stackedColumnTooltip"){super(e,l);const{root:c,size:h,padding:d}=this;this.stackedColumns=Ze({stacked:!0,root:c,data:n,size:h,padding:d,xScaleDomain:[0,1,2],yScaleDomain:o,xScalePadding:.3}),c.append([].concat.apply([],this.stackedColumns)),this.updateColors(t,r)}updateColors(e,t){this.stackedColumns.forEach((r,s)=>r.forEach(i=>{i.fill=e[s],i.stroke=t[s]}))}};Sr.chartType="stackedColumn",Sr.data=[[8,12,16],[6,9,12],[2,3,4]];var Na=Sr,Tr=class vi extends Na{constructor(e,t,r,s,i){super(e,t,r,s,i,vi.data,[0,10],"normalizedColumnTooltip")}};Tr.chartType="normalizedColumn",Tr.data=[[10,10,10],[6,7,8],[2,4,6]];var nh=Tr;import{_Scene as Pr}from"ag-charts-community";var Ba=class extends R{constructor(a,e,t){super(a,"groupedBarTooltip");const r=this.padding,s=this.size,i=[2,3,4],n=new Pr.BandScale;n.domain=[0,1,2],n.range=[r,s-r],n.paddingInner=.3,n.paddingOuter=.3;const o=new Pr.LinearScale;o.domain=[0,4],o.range=[s-r,r];const l=o.convert(0),c=n.bandwidth;this.bars=i.map((h,d)=>{const u=new Pr.Rect;return u.x=r,u.y=n.convert(d),u.width=l-o.convert(h),u.height=c,u.strokeWidth=0,u.crisp=!0,u}),this.updateColors(e,t),this.root.append(this.bars)}updateColors(a,e){this.bars.forEach((t,r)=>{t.fill=a[r],t.stroke=e[r]})}};Ba.chartType="groupedBar";import{_Scene as br}from"ag-charts-community";var Ar=class yi extends R{constructor(e,t,r,s,i,n=yi.data,o=[0,16],l="stackedBarTooltip"){super(e,l);const c=this.size,h=this.padding,d=new br.BandScale;d.domain=[0,1,2],d.range=[h,c-h],d.paddingInner=.3,d.paddingOuter=.3;const u=new br.LinearScale;u.domain=o,u.range=[c-h,h];const g=u.convert(0),m=d.bandwidth;this.bars=n.map(f=>f.map((C,v)=>{const y=new br.Rect;return y.x=h,y.y=d.convert(v),y.width=g-u.convert(C),y.height=m,y.strokeWidth=0,y.crisp=!0,y})),this.updateColors(t,r),this.root.append([].concat.apply([],this.bars))}updateColors(e,t){this.bars.forEach((r,s)=>r.forEach(i=>{i.fill=e[s],i.stroke=t[s]}))}};Ar.chartType="stackedBar",Ar.data=[[8,12,16],[6,9,12],[2,3,4]];var Ua=Ar,xr=class Si extends Ua{constructor(e,t,r,s,i){super(e,t,r,s,i,Si.data,[0,10],"normalizedBarTooltip")}};xr.chartType="normalizedBar",xr.data=[[10,10,10],[6,7,8],[2,4,6]];var oh=xr;import{_Scene as za}from"ag-charts-community";var K=za.toRadians,Nt=class extends ue{constructor(a,e,t,r,s,i=.6,n="donutTooltip"){super(a,n);const o=(this.size-this.padding*2)/2,l=o+this.padding,c=[[K(-90),K(30)],[K(30),K(120)],[K(120),K(180)],[K(180),K(210)],[K(210),K(240)],[K(240),K(270)]];this.sectors=c.map(([h,d])=>{const u=new za.Sector;return u.centerX=l,u.centerY=l,u.innerRadius=o*i,u.outerRadius=o,u.startAngle=h,u.endAngle=d,u.stroke=void 0,u.strokeWidth=0,u.inset=.75,u}),this.updateColors(e,t),this.root.append(this.sectors)}updateColors(a,e){this.sectors.forEach((t,r)=>{t.fill=a[r%a.length],t.stroke=e[r%e.length]})}};Nt.chartType="donut";var Ha=class extends Nt{constructor(a,e,t,r,s){super(a,e,t,r,s,0,"pieTooltip")}};Ha.chartType="pie";var Wa=class extends R{constructor(a,e,t){super(a,"lineTooltip"),this.data=[[9,7,8,5,6],[5,6,3,4,1],[1,3,4,8,7]],this.lines=yr(this.root,this.data,this.size,this.padding),this.updateColors(e,t)}updateColors(a,e){this.lines.forEach((t,r)=>{t.stroke=a[r]})}};Wa.chartType="line";import{_Scene as Je}from"ag-charts-community";var Ya=class extends R{constructor(a,e,t){super(a,"scatterTooltip");const r=this.size,s=this.padding,i=[[[.3,3],[1.1,.9],[2,.4],[3.4,2.4]],[[0,.3],[1,2],[2.4,1.4],[3,0]]],n=new Je.LinearScale;n.domain=[-.5,4],n.range=[s*2,r-s];const o=new Je.LinearScale;o.domain=[-.5,3.5],o.range=[r-s,s];const l=[];i.forEach(h=>{h.forEach(([d,u])=>{const g=new Je.Arc;g.strokeWidth=0,g.centerX=n.convert(d),g.centerY=o.convert(u),g.radius=2.5,l.push(g)})}),this.points=l,this.updateColors(e,t);const c=new Je.Group;c.setClipRectInGroupCoordinateSpace(new Je.BBox(s,s,r-s*2,r-s*2)),c.append(this.points),this.root.append(c)}updateColors(a,e){this.points.forEach((t,r)=>{t.stroke=e[r%e.length],t.fill=a[r%a.length]})}};Ya.chartType="scatter";import{_Scene as Qe}from"ag-charts-community";var Ka=class extends R{constructor(a,e,t){super(a,"bubbleTooltip");const r=this.size,s=this.padding,i=[[[.1,.3,5],[.5,.4,7],[.2,.8,7]],[[.8,.7,5],[.7,.3,9]]],n=new Qe.LinearScale;n.domain=[0,1],n.range=[s*2,r-s];const o=new Qe.LinearScale;o.domain=[0,1],o.range=[r-s,s];const l=[];i.forEach(h=>{h.forEach(([d,u,g])=>{const m=new Qe.Arc;m.strokeWidth=0,m.centerX=n.convert(d),m.centerY=o.convert(u),m.radius=g,m.fillOpacity=.7,l.push(m)})}),this.points=l,this.updateColors(e,t);const c=new Qe.Group;c.setClipRectInGroupCoordinateSpace(new Qe.BBox(s,s,r-s*2,r-s*2)),c.append(this.points),this.root.append(c)}updateColors(a,e){this.points.forEach((t,r)=>{t.stroke=e[r%e.length],t.fill=a[r%a.length]})}};Ka.chartType="bubble";import{_Scene as Mr}from"ag-charts-community";var Er=class Ti extends R{constructor(e,t,r,s,i,n=Ti.data){super(e,"groupedAreaTooltip");const o=this.size,l=this.padding,c=new Mr.BandScale;c.domain=[0,1,2],c.paddingInner=1,c.paddingOuter=0,c.range=[l+.5,o-l-.5];const h=new Mr.LinearScale;h.domain=[0,6],h.range=[o-l+.5,l];const u=n.length*2-1,g=[],m=h.convert(0);n.forEach((f,C)=>{const v=c.convert(C);f.forEach((y,S)=>{const P=h.convert(y),E=g[S]||(g[S]=[]);E[C]={x:v,y:P},E[u-C]={x:v,y:m}})}),this.areas=g.reverse().map(f=>{const C=new Mr.Path;C.strokeWidth=1,C.strokeOpacity=.75,C.fillOpacity=.7;const v=C.path;return v.clear(),f.forEach((y,S)=>v[S>0?"lineTo":"moveTo"](y.x,y.y)),v.closePath(),C}),this.updateColors(t,r),this.root.append(this.areas)}updateColors(e,t){this.areas.forEach((r,s)=>{r.fill=e[s],r.stroke=t[s]})}};Er.chartType="area",Er.data=[[1,3,5],[2,6,4],[5,3,1]];var lh=Er;import{_Scene as wr}from"ag-charts-community";var Or=class Pi extends R{constructor(e,t,r,s,i,n=Pi.data,o="stackedAreaTooltip"){super(e,o);const l=this.size,c=this.padding,h=new wr.BandScale;h.domain=[0,1,2],h.paddingInner=1,h.paddingOuter=0,h.range=[c+.5,l-c-.5];const d=new wr.LinearScale;d.domain=[0,16],d.range=[l-c+.5,c+.5];const g=n.length*2-1,m=[];n.forEach((f,C)=>{const v=h.convert(C);let y=0;f.forEach((S,P)=>{const E=d.convert(y+S),b=m[P]||(m[P]=[]);b[C]={x:v,y:E},b[g-C]={x:v,y:d.convert(y)},y+=S})}),this.areas=m.map(f=>{const C=new wr.Path;C.strokeWidth=0;const v=C.path;return v.clear(),f.forEach((y,S)=>v[S>0?"lineTo":"moveTo"](y.x,y.y)),v.closePath(),C}),this.updateColors(t,r),this.root.append(this.areas)}updateColors(e,t){this.areas.forEach((r,s)=>{r.fill=e[s],r.stroke=t[s]})}};Or.chartType="stackedArea",Or.data=[[2,3,2],[3,6,5],[6,2,2]];var Dr=Or,kr=class bi extends Dr{constructor(e,t,r,s,i,n=bi.data){super(e,t,r,s,i,n,"normalizedAreaTooltip")}};kr.chartType="normalizedArea",kr.data=Dr.data.map(a=>{const e=a.reduce((t,r)=>t+r,0);return a.map(t=>t/e*16)});var ch=kr;import{_Scene as Lr}from"ag-charts-community";var $a=class extends R{constructor(a,e,t){super(a,"histogramTooltip");const r=this.padding,s=this.size,i=[2,5,11,13,10,6,1],n=new Lr.LinearScale;n.domain=[0,i.length],n.range=[r,s-r];const o=new Lr.LinearScale;o.domain=[0,i.reduce((c,h)=>Math.max(c,h),0)],o.range=[s-r,r];const l=o.convert(0);this.bars=i.map((c,h)=>{const d=o.convert(c),u=n.convert(h),g=n.convert(h+1),m=new Lr.Rect;return m.x=u,m.y=d,m.width=g-u,m.height=l-d,m.strokeWidth=1,m.strokeOpacity=.75,m.crisp=!0,m}),this.updateColors(e,t),this.root.append(this.bars)}updateColors([a],[e]){this.bars.forEach(t=>{t.fill=a,t.stroke=e})}};$a.chartType="histogram";import{_Scene as et}from"ag-charts-community";import{PostConstruct as hh}from"@ag-grid-community/core";import{_Scene as ja}from"ag-charts-community";var Ae=class extends ue{constructor(a,e){super(a,e),this.stroke="gray",this.showRadiusAxisLine=!0,this.showAngleAxisLines=!0}addAxes(){const a=this.size,e=this.padding,t=e*2,r=(a-t)/2,s=this.showAngleAxisLines?[r,r*.8,r*.6,r*.4]:[],i=new ja.Line;i.x1=a/2,i.y1=e,i.x2=a/2,i.y2=a-e-r-s[s.length-1],i.stroke=this.stroke,i.strokeOpacity=.5,i.fill=void 0,i.visible=this.showRadiusAxisLine;const n=e+r;this.gridLines=s.map((l,c)=>{const h=new ja.Path;return h.path.arc(n,n,l,0,2*Math.PI),h.strokeWidth=1,h.stroke=this.stroke,h.strokeOpacity=c===0?.5:.2,h.fill=void 0,h});const o=this.root;o.append(i),this.gridLines.length>0&&o.append(this.gridLines)}};p([hh],Ae.prototype,"addAxes",1);var Xa=class extends Ae{constructor(a,e,t){super(a,"radialColumnTooltip"),this.data=[[6,8,10,2,6,5],[4,4,3,6,4,4],[5,4,2,9,8,9]],this.showRadiusAxisLine=!1;const{padding:r,size:s,data:i}=this,n=(s-r*2)/2,l=n*.4,c=new et.BandScale;c.domain=i[0].map((f,C)=>C),c.range=[0,2*Math.PI],c.paddingInner=0,c.paddingOuter=0;const h=c.bandwidth*.7,{processedData:d,max:u}=Vt(i),g=new et.LinearScale;g.domain=[0,u],g.range=[l,n];const m=this.size/2;this.series=d.map((f,C)=>{const y=C===0?void 0:d[C-1],S=new et.Group({zIndex:1e6}),P=f.map((E,b)=>{const M=y?.[b],k=g.convert(E),L=g.convert(M??0),D=c.convert(b),G=D+h,w=et.getRadialColumnWidth(D,G,n,.5,.5),x=new et.RadialColumnShape;return x.scalingCenterX=m,x.scalingCenterY=m,x.columnWidth=w,x.innerRadius=L,x.outerRadius=k,x.startAngle=D,x.endAngle=G,x.isBeveled=!0,x.axisInnerRadius=l,x.axisOuterRadius=n,x.stroke=void 0,x.strokeWidth=0,x});return S.append(P),S.translationX=m,S.translationY=m,S}),this.root.append(this.series),this.updateColors(e,t)}updateColors(a,e){this.series.forEach((t,r)=>{var s;(s=t.children)==null||s.forEach(i=>{i.fill=a[r%a.length],i.stroke=e[r%e.length]})})}};Xa.chartType="radialColumn";import{_Scene as Bt}from"ag-charts-community";var qa=class extends Ae{constructor(a,e,t){super(a,"radialBarTooltip"),this.data=[[6,8,10],[4,4,3],[5,4,2]],this.showRadiusAxisLine=!1;const r=(this.size-this.padding)/2,i=r*.4,n=r+i,o=new Bt.BandScale;o.domain=this.data[0].map((f,C)=>C),o.range=[r,i],o.paddingInner=.5,o.paddingOuter=0;const l=o.bandwidth,{processedData:c,max:h}=Vt(this.data),d=new Bt.LinearScale;d.domain=[0,Math.ceil(h*1.5)];const u=3/2*Math.PI,g=u+2*Math.PI;d.range=[u,g];const m=this.size/2;this.series=c.map((f,C)=>{const v=C<0?void 0:c[C-1],y=new Bt.Group({zIndex:1e6}),S=f.map((P,E)=>{var b;const M=(b=v?.[E])!=null?b:0,k=n-o.convert(E),L=k+l,D=d.convert(M),G=d.convert(P),w=new Bt.Sector;return w.centerX=m,w.centerY=m,w.innerRadius=k,w.outerRadius=L,w.startAngle=D,w.endAngle=G,w.stroke=void 0,w.strokeWidth=0,w});return y.append(S),y}),this.root.append(this.series),this.updateColors(e,t)}updateColors(a,e){this.series.forEach((t,r)=>{var s;(s=t.children)==null||s.forEach(i=>{i.fill=a[r%a.length],i.stroke=e[r%e.length]})})}};qa.chartType="radialBar";var Za=class extends Ae{constructor(a,e,t){super(a,"radarLineTooltip"),this.markerSize=4,this.data=[[8,7,8,7,8,8,7,8],[6,8,5,10,6,7,4,6],[0,3,3,5,4,4,2,0]],this.showRadiusAxisLine=!1;const r=(this.size-this.padding*2)/2,s=0,{paths:i,markers:n}=Ga(this.root,this.data,this.size,r,s,this.markerSize);this.lines=i,this.markers=n,this.updateColors(e,t)}updateColors(a,e){this.lines.forEach((t,r)=>{const s=this.data[r].length;t.stroke=a[r];const i=r*s,n=i+s;this.markers.slice(i,n).forEach(l=>{l.stroke=e[r],l.fill=a[r]})})}};Za.chartType="radarLine";var Ja=class extends Ae{constructor(a,e,t){super(a,"radarAreaTooltip"),this.data=[[8,10,5,7,4,1,5,8],[1,1,2,7,7,8,10,1],[4,5,9,9,4,2,3,4]],this.showRadiusAxisLine=!1;const r=(this.size-this.padding*2)/2,s=r-this.size*.3;this.areas=Ga(this.root,this.data,this.size,r,s).paths,this.updateColors(e,t)}updateColors(a,e){this.areas.forEach((t,r)=>{t.fill=a[r],t.stroke=e[r]})}};Ja.chartType="radarArea";import{_Scene as Ut}from"ag-charts-community";var Qa=class extends Ae{constructor(a,e,t){super(a,"nightingaleTooltip"),this.data=[[6,10,9,8,7,8],[4,6,5,4,5,5],[3,5,4,3,4,7]],this.showRadiusAxisLine=!1;const r=(this.size-this.padding*2)/2,s=new Ut.BandScale;s.domain=this.data[0].map((h,d)=>d),s.range=[-Math.PI,Math.PI],s.paddingInner=0,s.paddingOuter=0;const i=s.bandwidth*.7,{processedData:n,max:o}=Vt(this.data),l=new Ut.LinearScale;l.domain=[0,o],l.range=[0,r];const c=this.size/2;this.series=n.map((h,d)=>{const u=d<0?void 0:n[d-1],g=new Ut.Group({zIndex:1e6}),m=h.map((f,C)=>{const v=u?.[C],y=l.convert(f),S=l.convert(v??0),P=s.convert(C),E=P+i,b=new Ut.Sector;return b.centerX=c,b.centerY=c,b.innerRadius=S,b.outerRadius=y,b.startAngle=P,b.endAngle=E,b.stroke=void 0,b.strokeWidth=0,b});return g.append(m),g}),this.root.append(this.series),this.updateColors(e,t)}updateColors(a,e){this.series.forEach((t,r)=>{var s;(s=t.children)==null||s.forEach(i=>{i.fill=a[r%a.length],i.stroke=e[r%e.length]})})}};Qa.chartType="nightingale";import{_Scene as Rr}from"ag-charts-community";var es=class extends R{constructor(a,e,t){super(a,"rangeBarTooltip");const r=[3,3.5,3];this.bars=this.createRangeBar(this.root,r,this.size,this.padding,"vertical"),this.updateColors(e,t)}updateColors(a,e){this.bars.forEach((t,r)=>{t.fill=a[r],t.stroke=e[r]})}createRangeBar(a,e,t,r,s){const i=s==="horizontal",n=2*r,o=new Rr.BandScale;o.domain=e.map((g,m)=>m),o.range=[r,t-r],o.paddingInner=.3,o.paddingOuter=.3;const l=.7,c=1.3,h=new Rr.LinearScale;h.domain=[e.reduce((g,m)=>Math.min(g,m),1/0)*l,e.reduce((g,m)=>Math.max(g,m),0)*c],h.range=[n,t-n];const d=o.bandwidth,u=e.map((g,m)=>{const[f,C]=[g*l,g*c],v=o.convert(m),y=h.convert(f),S=h.convert(C)-y,P=new Rr.Rect;return P.x=i?y:v,P.y=i?v:y,P.width=i?S:d,P.height=i?d:S,P.strokeWidth=0,P.crisp=!0,P});return a.append(u),u}};es.chartType="rangeBar";import{_Scene as tt}from"ag-charts-community";var ts=class extends R{constructor(a,e,t){super(a,"rangeAreaTooltip");const r=4,s=[Ir({offset:.375*r,length:r,pattern:{low:3,high:5,period:r}}),Ir({offset:.375*r,length:r,pattern:{low:2.25,high:4.25,period:r}}),Ir({offset:.75*r,length:r,pattern:{low:2.5,high:4.5,period:r}})],i=1.75,n=s.map(c=>c.map(([h,d])=>({x:h,low:d-.5*i,high:d+.5*i}))),{lines:o,areas:l}=this.createRangeArea(this.root,n,this.size,this.padding);this.lines=o,this.areas=l,this.updateColors(e,t)}updateColors(a,e){a=as(a,1,2),e=as(e,1,2),this.lines.forEach(([t,r],s)=>{t.fill=void 0,t.stroke=e[s],r.fill=void 0,r.stroke=e[s]}),this.areas.forEach((t,r)=>{t.fill=a[r]})}createRangeArea(a,e,t,r){const s=e.reduce((m,f)=>f.reduce((C,{x:v})=>Math.min(C,v),m),1/0),i=e.reduce((m,f)=>f.reduce((C,{x:v})=>Math.max(C,v),m),-1/0),n=e.reduce((m,f)=>f.reduce((C,{low:v})=>Math.min(C,v),m),1/0),o=e.reduce((m,f)=>f.reduce((C,{high:v})=>Math.max(C,v),m),-1/0),l=new tt.LinearScale;l.domain=[s,i],l.range=[r,t-r];const c=2*r,h=new tt.LinearScale;h.domain=[n,o],h.range=[t-c,c];const d=[],u=[];return e.map(m=>{const f=new tt.Path,C=new tt.Path,v=new tt.Path;return d.push([f,C]),u.push(v),f.strokeWidth=0,C.strokeWidth=0,v.strokeWidth=0,v.fillOpacity=.8,f.path.clear(),C.path.clear(),v.path.clear(),m.map((y,S)=>{const{x:P,low:E,high:b}=y,M=l.convert(P),k=h.convert(E),L=h.convert(b),D=S>0?"lineTo":"moveTo";return f.path[D](M,L),C.path[D](M,k),v.path[D](M,L),[M,k]})}).forEach((m,f)=>{const C=m.length-1,v=u[f];for(let y=C;y>=0;y--){const[S,P]=m[y];v.path.lineTo(S,P)}}),a.append(u.concat(...d)),{lines:d,areas:u}}};ts.chartType="rangeArea";function Ir(a){const{offset:e,length:t,pattern:r}=a,s=o(e,t,r),i=0,n=t;return(s.length===0||s[0][0]!==i)&&s.unshift(l(i,e,r)),s[s.length-1][0]!==n&&s.push(l(n,e,r)),s;function o(h,d,u){const{period:g}=u,m=h/g,C=[0,.5].map(y=>y-m).map(rs).sort((y,S)=>y-S);return Array.from({length:Math.floor(C.length*(g/d))},(y,S)=>C[S%C.length]+Math.floor(S/C.length)).map(y=>y*g).map(y=>l(y,h,u))}function l(h,d,u){return[h,c(d+h,u)]}function c(h,d){const{low:u,high:g,period:m}=d,f=rs(h/m),C=f>.5?1-2*(f-.5):2*f;return u+(g-u)*C}}function rs(a){const e=a%1;return e<0?e+1:e}function as(a,e,t){const r=[...a],s=r[e];return r[e]=r[t],r[t]=s,r}import{_Scene as ae,_Theme as dh,_Util as uh}from"ag-charts-community";var ss=class extends R{constructor(a,e,t,r,s){super(a,"boxPlotTooltip");const i=this.padding,n=this.size,o=[11,11.5,10.5],l=1.2,c=1.1,h=.9,d=.8,u=new ae.LinearScale;u.domain=[o.reduce((C,v)=>Math.min(C,v),1/0)*d,o.reduce((C,v)=>Math.max(C,v),0)*l],u.range=[n-1.5*i,i];const g=new ae.BandScale;g.domain=o.map((C,v)=>v),g.range=[i,n-i],g.paddingInner=.4,g.paddingOuter=.2;const m=Math.round(g.bandwidth),f=Math.round(g.bandwidth/2);this.boxPlotGroups=o.map((C,v)=>{let[y,S,P,E]=[C*d,C*h,C*c,C*l];const b=Math.round(u.convert(P)),M=Math.round(g.convert(v)),k=Math.round(M+m),L=Math.round(u.convert(S)),D=Math.round(u.convert(y)),G=Math.round(u.convert(C)),w=Math.round(u.convert(E)),x=M+f,O=new ae.Group,I=new ae.Rect,Ee=new ae.Line,we=new ae.Line,X=new ae.Line,ie=new ae.Line,U=new ae.Line;return I.x=M,I.y=b,I.width=m,I.height=L-b,I.strokeWidth=1,I.strokeOpacity=.75,I.crisp=!0,this.setLineProperties(Ee,M,k,G,G),this.setLineProperties(we,x,x,w,b),this.setLineProperties(X,x,x,D,L),this.setLineProperties(ie,M,k,w,w),this.setLineProperties(U,M,k,D,D),O.append([I,Ee,we,X,ie,U]),O}),this.updateColors(e,t,r,s),this.root.append(this.boxPlotGroups)}updateColors(a,e,t,r){var s;const i=t?.properties.get(dh.DEFAULT_BACKGROUND_COLOUR),n=(s=Array.isArray(i)?i[0]:i)!=null?s:"white";this.boxPlotGroups.forEach((o,l)=>{var c;(c=o.children)==null||c.forEach(h=>{const d=a[l%a.length];h.fill=r?d:uh.Color.interpolate(d,n)(.7),h.stroke=e[l%e.length]})})}setLineProperties(a,e,t,r,s){a.x1=e,a.x2=t,a.y1=r,a.y2=s,a.strokeOpacity=.75}};ss.chartType="boxPlot";import{_Scene as _r,_Theme as ph}from"ag-charts-community";var is=class extends ue{constructor(a,e,t,r,s){super(a,"treemapTooltip");const{size:i,padding:n}=this,o=[[1,1],[3,2,1]],c=o.length%2===0?.3:.2,h=[n,i-n],d=o.length,u=d*(d+1)/2,g=c/(d-1),m=h[1]-h[0],f=m-c;let C=h[0];this.rects=o.reduce((y,S,P)=>{y??(y=[]);const E=(d-P)/u,b=f*E,M=S.length,k=S.reduce((x,O)=>x+=O,0),L=c/(M-1||1),D=M>1?m-c:m;let G=h[0];const w=S.map(x=>{const O=new _r.Rect,I=D*x/k;return O.x=C,O.y=G,O.width=b,O.height=I,O.strokeWidth=.75,O.crisp=!0,G+=I+L,O});return C+=b+g,y.push(...w),y},[]),this.updateColors(e,t,r,s);const v=new _r.Group;v.setClipRectInGroupCoordinateSpace(new _r.BBox(n,n,i-n,i-n)),v.append(this.rects),this.root.append(v)}updateColors(a,e,t,r){var s;const{properties:i}=t??{},n=i?.get(ph.DEFAULT_BACKGROUND_COLOUR),o=(s=Array.isArray(n)?n[0]:n)!=null?s:"white";this.rects.forEach((l,c)=>{l.fill=a[c%e.length],l.stroke=r?e[c%e.length]:o})}};is.chartType="treemap";import{_Scene as ns}from"ag-charts-community";var os=class extends Ae{constructor(a,e,t){super(a,"sunburstTooltip"),this.data=[[[],[]],[[],[]],[[],[]]],this.angleOffset=-Math.PI/2,this.innerRadiusRatio=0,this.showRadiusAxisLine=!1,this.showAngleAxisLines=!1;const{data:r,size:s,padding:i,angleOffset:n,innerRadiusRatio:o}=this,l=(s-i*2)/2,c=[n+0,n+2*Math.PI],h=Math.abs(c[1]-c[0]),d=[l*o,l],u=Math.abs(d[1]-d[0]);let g=0;const m=(S,P)=>{S.forEach(E=>{const b=P+1;g=Math.max(g,b),m(E,b)})};m(r,0);const f=u/g,C=this.size/2,v=c[0];this.series=[];const y=(S,P,E,b,M)=>{if(!Array.isArray(S))return;const L=P+1;let D=E;S.forEach((G,w,x)=>{let O=M;O||(O=new ns.Group,this.series.push(O));const I=d[0]+P*f,Ee=d[0]+L*f,we=1/x.length,X=D,ie=X+b*we,U=new ns.Sector;U.centerX=C,U.centerY=C,U.innerRadius=I,U.outerRadius=Ee,U.startAngle=X,U.endAngle=ie,U.stroke=void 0,U.strokeWidth=0,U.inset=.75,D=ie,O.append(U),y(G,L,X,Math.abs(ie-X),O)})};y(r,0,v,h),this.root.append(this.series),this.updateColors(e,t)}updateColors(a,e){this.series.forEach((t,r)=>{var s;(s=t.children)==null||s.forEach(i=>{i.fill=a[r%a.length],i.stroke=e[r%e.length]})})}};os.chartType="sunburst";import{_Scene as rt,_Theme as ls,_Util as gh}from"ag-charts-community";var cs=class extends ue{constructor(a,e,t,r,s){var i,n;super(a,"heatmapTooltip");const{size:o,padding:l}=this,c=3,h=Array.from({length:c},(v,y)=>Array.from({length:c},(S,P)=>P)),d=h.map((v,y)=>y),u=new rt.BandScale;u.domain=d,u.range=[l,o-l],u.paddingInner=.01,u.paddingOuter=.1;const g=new rt.BandScale;g.domain=d,g.range=[l,o-l],g.paddingInner=.01,g.paddingOuter=.1;const m=(i=u.bandwidth)!=null?i:0,f=(n=g.bandwidth)!=null?n:0;this.rects=h.reduce((v,y,S)=>{v??(v=[]);const P=y.map((E,b)=>{const M=new rt.Rect;return M.x=u.convert(S),M.y=g.convert(b),M.width=m,M.height=f,M.strokeWidth=0,M.crisp=!0,M});return v.push(...P),v},[]),this.updateColors(e,t,r,s);const C=new rt.Group;C.setClipRectInGroupCoordinateSpace(new rt.BBox(l,l,o-l,o-l)),C.append(this.rects),this.root.append(C)}updateColors(a,e,t,r){var s;const{properties:i}=t??{},n=i?.get(ls.DEFAULT_DIVERGING_SERIES_COLOUR_RANGE),o=i?.get(ls.DEFAULT_BACKGROUND_COLOUR),l=(s=Array.isArray(o)?o[0]:o)!=null?s:"white",c=r?[a[0],a[1]]:n,h=r?e[0]:l;this.rects.forEach((d,u)=>{d.fill=gh.Color.interpolate(c[0],c[1])(u*.2),d.stroke=h})}};cs.chartType="heatmap";import{_Scene as zt,_Theme as hs}from"ag-charts-community";var ds=class extends R{constructor(a,e,t,r,s){super(a,"waterfallTooltip"),this.data=[4,3,-3,6,-3],this.bars=this.createWaterfall(this.root,this.data,this.size,this.padding,"vertical").bars,this.updateColors(e,t,r,s)}updateColors(a,e,t,r){var s,i;const{data:n}=this,{properties:o}=t??{},l={fill:a[0],stroke:e[0]},c={fill:a[1],stroke:e[1]},h=r?l:(s=o?.get(hs.DEFAULT_WATERFALL_SERIES_POSITIVE_COLOURS))!=null?s:l,d=r?c:(i=o?.get(hs.DEFAULT_WATERFALL_SERIES_NEGATIVE_COLOURS))!=null?i:c;this.bars.forEach((u,g)=>{const m=n[g]>=0;u.fill=m?h.fill:d.fill,u.stroke=m?h.stroke:d.stroke})}createWaterfall(a,e,t,r,s){const i=2*r,{processedData:n,min:o,max:l}=Vt(e.map(y=>[y])),c=n.reduce((y,S)=>y.concat(S),[]),h=new zt.LinearScale;h.domain=[Math.min(o,0),l],h.range=[t-i,i];const d=new zt.BandScale;d.domain=e.map((y,S)=>S),d.range=[r,t-r],d.paddingInner=.2,d.paddingOuter=.3;const u=d.bandwidth,g=new zt.Path;g.stroke="#575757",g.strokeWidth=0;const m=Math.floor(g.strokeWidth)%2/2,f=g.path;f.clear();const C=s==="horizontal",v=c.map((y,S)=>{const P=S>0?c[S-1]:0,b=e[S]>0,M=Math.round(h.convert(y)),k=Math.round(h.convert(P)),L=(b?M:k)-m,D=(b?k:M)+m,G=Math.abs(D-L),w=d.convert(S),x=new zt.Rect;x.x=C?L:w,x.y=C?w:L,x.width=C?G:u,x.height=C?u:G,x.strokeWidth=0,x.crisp=!0;const O=M+m,I=k+m;if(S>0){const X=C?I:x.x,ie=C?x.y:I;f.lineTo(X,ie)}const Ee=C?O:x.x,we=C?x.y:O;return f.moveTo(Ee,we),x});return a.append([g,...v]),{bars:v}}};ds.chartType="waterfall";var us=class extends R{constructor(a,e,t){super(a,"columnLineComboTooltip"),this.columnData=[3,4],this.lineData=[[5,4,6,5,4]];const{root:r,columnData:s,lineData:i,size:n,padding:o}=this;this.columns=Ze({stacked:!1,root:r,data:s,size:n,padding:o,xScaleDomain:[0,1],yScaleDomain:[0,4],xScalePadding:.5}),r.append(this.columns),this.lines=yr(r,i,n,o),this.updateColors(e,t)}updateColors(a,e){this.columns.forEach((t,r)=>{t.fill=a[r],t.stroke=e[r]}),this.lines.forEach((t,r)=>{t.stroke=a[r+2]})}};us.chartType="columnLineCombo";import{_Scene as Fr}from"ag-charts-community";var ps=class extends R{constructor(a,e,t){super(a,"areaColumnComboTooltip"),this.columnData=[3,4.5],this.areaData=[[5,4,6,5,4]];const{root:r,columnData:s,areaData:i,size:n,padding:o}=this;this.columns=Ze({stacked:!1,root:r,data:s,size:n,padding:o,xScaleDomain:[0,1],yScaleDomain:[0,6],xScalePadding:.5});const l=new Fr.BandScale;l.range=[o,n-o],l.domain=[0,1,2,3,4],l.paddingInner=1,l.paddingOuter=0;const c=new Fr.LinearScale;c.range=[n-o,o],c.domain=[0,6];const h=[],d=c.convert(0),u=l.convert(0);i.forEach((g,m)=>{const f=h[m]||(h[m]=[]);g.forEach((v,y)=>{const S=v,P=y,E=l.convert(P),b=c.convert(S);f[y]={x:E,y:b}});const C=l.convert(g.length-1);h[m].push({x:C,y:d},{x:u,y:d})}),this.areas=h.map(g=>{const m=new Fr.Path;m.strokeWidth=0,m.fillOpacity=.8;const f=m.path;return g.forEach((C,v)=>f[v>0?"lineTo":"moveTo"](C.x,C.y)),m}),r.append(this.areas),r.append([].concat.apply([],this.columns)),this.updateColors(e,t)}updateColors(a,e){this.areas.forEach((t,r)=>{t.fill=a[r],t.stroke=e[r]}),this.columns.forEach((t,r)=>{t.fill=a[r+1],t.stroke=e[r+1]})}};ps.chartType="areaColumnCombo";import{_Scene as Gr}from"ag-charts-community";var gs=class extends ue{constructor(a,e,t){super(a,"customComboTooltip"),this.columnData=[3,4],this.lineData=[[5,4,6,5,4]];const{root:r,columnData:s,lineData:i,size:n,padding:o}=this;this.columns=Ze({stacked:!1,root:r,data:s,size:n,padding:o,xScaleDomain:[0,1],yScaleDomain:[0,4],xScalePadding:.5}),r.append(this.columns),this.lines=yr(r,i,n,o);const l="grey",c=3,h=new Gr.Line;h.x1=o,h.y1=o,h.x2=o,h.y2=n-o+c,h.stroke=l;const d=new Gr.Line;d.x1=o-c+1,d.y1=n-o,d.x2=n-o+1,d.y2=n-o,d.stroke=l;const u=new Gr.Path;this.buildPenIconPath(u),u.fill="whitesmoke",u.stroke="darkslategrey",u.strokeWidth=1,r.append([d,h,u]),this.updateColors(e,t)}updateColors(a,e){this.columns.forEach((t,r)=>{t.fill=a[r],t.stroke=e[r]}),this.lines.forEach((t,r)=>{t.stroke=a[r+2]})}buildPenIconPath(a){const{path:e}=a;e.moveTo(25.76,43.46),e.lineTo(31.27,48.53),e.moveTo(49.86,22),e.lineTo(49.86,22),e.cubicCurveTo(49.01994659053345,21.317514933510974,47.89593834348529,21.09645997825817,46.86,21.41),e.lineTo(46.86,21.41),e.cubicCurveTo(45.55460035985361,21.77260167850787,44.38777081121966,22.517979360321792,43.51,23.55),e.lineTo(25.51,43.8),e.lineTo(25.43,43.89),e.lineTo(23.01,51.89),e.lineTo(22.83,52.46),e.lineTo(31.02,48.86),e.lineTo(49.02,28.52),e.lineTo(49.02,28.52),e.cubicCurveTo(49.940716461596224,27.521914221246085,50.54302631059587,26.2720342455763,50.75,24.93),e.lineTo(50.75,24.93),e.cubicCurveTo(50.95363374988308,23.866379846512814,50.62080640232334,22.77066734274871,49.86,22),e.closePath(),e.moveTo(41.76,25.5),e.lineTo(47.34,30.5),e.moveTo(40.74,26.65),e.lineTo(46.25,31.71)}};gs.chartType="customCombo";var ms={columnGroup:{column:{range:!0,pivot:!0,enterprise:!1,icon:Va},stackedColumn:{range:!0,pivot:!0,enterprise:!1,icon:Na},normalizedColumn:{range:!0,pivot:!0,enterprise:!1,icon:nh}},barGroup:{bar:{range:!0,pivot:!0,enterprise:!1,icon:Ba},stackedBar:{range:!0,pivot:!0,enterprise:!1,icon:Ua},normalizedBar:{range:!0,pivot:!0,enterprise:!1,icon:oh}},pieGroup:{pie:{range:!0,pivot:!0,enterprise:!1,icon:Ha},donut:{range:!0,pivot:!0,enterprise:!1,icon:Nt},doughnut:{range:!0,pivot:!0,enterprise:!1,icon:Nt}},lineGroup:{line:{range:!0,pivot:!0,enterprise:!1,icon:Wa}},scatterGroup:{scatter:{range:!0,pivot:!0,enterprise:!1,icon:Ya},bubble:{range:!0,pivot:!0,enterprise:!1,icon:Ka}},areaGroup:{area:{range:!0,pivot:!0,enterprise:!1,icon:lh},stackedArea:{range:!0,pivot:!0,enterprise:!1,icon:Dr},normalizedArea:{range:!0,pivot:!0,enterprise:!1,icon:ch}},polarGroup:{radarLine:{range:!0,pivot:!1,enterprise:!0,icon:Za},radarArea:{range:!0,pivot:!1,enterprise:!0,icon:Ja},nightingale:{range:!0,pivot:!1,enterprise:!0,icon:Qa},radialColumn:{range:!0,pivot:!1,enterprise:!0,icon:Xa},radialBar:{range:!0,pivot:!1,enterprise:!0,icon:qa}},statisticalGroup:{boxPlot:{range:!0,pivot:!1,enterprise:!0,icon:ss},histogram:{range:!0,pivot:!1,enterprise:!1,icon:$a},rangeBar:{range:!0,pivot:!1,enterprise:!0,icon:es},rangeArea:{range:!0,pivot:!1,enterprise:!0,icon:ts}},hierarchicalGroup:{treemap:{range:!0,pivot:!0,enterprise:!0,icon:is},sunburst:{range:!0,pivot:!0,enterprise:!0,icon:os}},specializedGroup:{heatmap:{range:!0,pivot:!1,enterprise:!0,icon:cs},waterfall:{range:!0,pivot:!1,enterprise:!0,icon:ds}},combinationGroup:{columnLineCombo:{range:!0,pivot:!0,enterprise:!1,icon:us},areaColumnCombo:{range:!0,pivot:!0,enterprise:!1,icon:ps},customCombo:{range:!0,pivot:!0,enterprise:!1,icon:gs}}},mh={columnGroup:["column","stackedColumn","normalizedColumn"],barGroup:["bar","stackedBar","normalizedBar"],pieGroup:["pie","donut"],lineGroup:["line"],scatterGroup:["scatter","bubble"],areaGroup:["area","stackedArea","normalizedArea"],polarGroup:["radarLine","radarArea","nightingale","radialColumn","radialBar"],statisticalGroup:["boxPlot","histogram","rangeBar","rangeArea"],hierarchicalGroup:["treemap","sunburst"],specializedGroup:["heatmap","waterfall"],combinationGroup:["columnLineCombo","areaColumnCombo","customCombo"]},Ht=class Ai extends Jc{constructor(e,t,r,s,i,n=mh){super(Ai.TEMPLATE),this.wrappers={},this.chartController=e,this.fills=t,this.strokes=r,this.themeTemplateParameters=s,this.isCustomTheme=i,this.chartGroups=T({},n)}init(){const e=this.getGui(),t=this.chartController.isEnterprise(),r=this.chartController.isPivotChart(),s=!r,i=Object.keys(this.chartGroups).map(n=>{var o;const l=n in ms?ms[n]:void 0;if(!l)return Ia.warnOnce(`invalid chartGroupsDef config '${n}'`),null;const h=((o=this.chartGroups[n])!=null?o:[]).map(d=>{const u=d in l?l[d]:void 0;return u?!t&&u.enterprise?null:s&&u.range||r&&u.pivot?u:null:(Ia.warnOnce(`invalid chartGroupsDef config '${n}.${d}'`),null)}).filter(d=>d!=null);return h.length===0?null:{label:this.chartTranslationService.translate(n),items:h}}).filter(n=>n!=null);for(const{label:n,items:o}of i){const l=this.createBean(new qc({title:n,suppressEnabledCheckbox:!0,enabled:!0,suppressOpenCloseIcons:!0,cssIdentifier:"charts-settings",direction:"horizontal"}));for(const c of o){const h=c.icon,d=document.createElement("div");d.classList.add("ag-chart-mini-thumbnail");const u=h.chartType;this.addManagedListener(d,"click",()=>{this.chartController.setChartType(u),this.updateSelectedMiniChart()}),this.wrappers[u]=d,this.createBean(new h(d,this.fills,this.strokes,this.themeTemplateParameters,this.isCustomTheme)),l.addItem(d)}e.appendChild(l.getGui())}!this.chartController.customComboExists()&&this.chartGroups.combinationGroup&&(this.chartGroups.combinationGroup=this.chartGroups.combinationGroup.filter(n=>n!=="customCombo")),this.updateSelectedMiniChart()}updateSelectedMiniChart(){const e=this.chartController.getChartType();for(const t in this.wrappers){const r=this.wrappers[t],s=t===e;r.classList.toggle("ag-selected",s)}}};Ht.TEMPLATE='<div class="ag-chart-settings-mini-wrapper"></div>',p([Zc("chartTranslationService")],Ht.prototype,"chartTranslationService",2),p([Qc],Ht.prototype,"init",1);var Ch=Ht,pe=class xi extends jc{constructor(e){super(xi.TEMPLATE),this.chartController=e,this.miniChartsContainers=[],this.cardItems=[],this.activePaletteIndex=0,this.palettes=[],this.themes=[]}postConstruct(){this.resetPalettes(),this.ePrevBtn.insertAdjacentElement("afterbegin",re.createIconNoSpan("previous",this.gridOptionsService)),this.eNextBtn.insertAdjacentElement("afterbegin",re.createIconNoSpan("next",this.gridOptionsService)),this.addManagedListener(this.ePrevBtn,"click",()=>this.setActivePalette(this.getPrev(),"left")),this.addManagedListener(this.eNextBtn,"click",()=>this.setActivePalette(this.getNext(),"right")),this.addManagedListener(this.chartController,Y.EVENT_CHART_TYPE_CHANGED,()=>this.resetPalettes(!0)),this.addManagedListener(this.chartController,Y.EVENT_CHART_API_UPDATE,()=>this.resetPalettes(!0)),this.scrollSelectedIntoView()}scrollSelectedIntoView(){setTimeout(()=>{const e=s=>!s.getGui().classList.contains("ag-hidden"),r=this.miniChartsContainers.find(e).getGui().querySelector(".ag-selected");if(r){const s=r.offsetParent;s&&this.eMiniChartsContainer.scrollTo(0,s.offsetTop)}},250)}resetPalettes(e){var t,r;const s=this.chartController.getPalettes(),i=this.chartController.getThemeTemplateParameters(),n=(r=(t=this.gridOptionsService.get("chartToolPanelsDef"))==null?void 0:t.settingsPanel)==null?void 0:r.chartGroupsDef;if(re.shallowCompare(s,this.palettes)&&!e||this.isAnimating)return;this.palettes=s,this.themes=this.chartController.getThemeNames(),this.activePaletteIndex=this.themes.findIndex(l=>l===this.chartController.getChartThemeName()),this.cardItems=[],re.clearElement(this.eCardSelector),this.destroyMiniCharts();const{themes:o}=this;this.palettes.forEach((l,c)=>{const h=this.activePaletteIndex===c,{fills:d,strokes:u}=l,g=o[c],m=!hr(g),f=this.createBean(new Ch(this.chartController,d,u,i[c],m,n));this.miniChartsContainers.push(f),this.eMiniChartsContainer.appendChild(f.getGui()),this.addCardLink(c),h?f.updateSelectedMiniChart():f.setDisplayed(!1)}),re.setDisplayed(this.eNavBar,this.palettes.length>1),re.radioCssClass(this.cardItems[this.activePaletteIndex],"ag-selected","ag-not-selected")}addCardLink(e){const t=document.createElement("div");t.classList.add("ag-chart-settings-card-item"),this.addManagedListener(t,"click",()=>{this.setActivePalette(e,e<this.activePaletteIndex?"left":"right")}),this.eCardSelector.appendChild(t),this.cardItems.push(t)}getPrev(){let e=this.activePaletteIndex-1;return e<0&&(e=this.palettes.length-1),e}getNext(){let e=this.activePaletteIndex+1;return e>=this.palettes.length&&(e=0),e}setActivePalette(e,t){if(this.isAnimating||this.activePaletteIndex===e)return;re.radioCssClass(this.cardItems[e],"ag-selected","ag-not-selected");const r=this.miniChartsContainers[this.activePaletteIndex],s=r.getGui(),i=this.miniChartsContainers[e],n=i.getGui();r.updateSelectedMiniChart(),i.updateSelectedMiniChart();const o=t==="left"?-1:1,l=n.style.left=`${re.getAbsoluteWidth(this.getGui())*o}px`;this.activePaletteIndex=e,this.isAnimating=!0;const c="ag-animating";i.setDisplayed(!0),r.addCssClass(c),i.addCssClass(c),this.chartController.setChartThemeName(this.themes[e]),window.setTimeout(()=>{s.style.left=`${-parseFloat(l)}px`,n.style.left="0px"},0),window.setTimeout(()=>{this.isAnimating=!1,r.removeCssClass(c),i.removeCssClass(c),r.setDisplayed(!1)},300)}destroyMiniCharts(){re.clearElement(this.eMiniChartsContainer),this.miniChartsContainers=this.destroyBeans(this.miniChartsContainers)}destroy(){this.destroyMiniCharts(),super.destroy()}};pe.TEMPLATE=`<div class="ag-chart-settings-wrapper">
            <div ref="eMiniChartsContainer" class="ag-chart-settings-mini-charts-container ag-scrollable-container"></div>
            <div ref="eNavBar" class="ag-chart-settings-nav-bar">
                <div ref="ePrevBtn" class="ag-chart-settings-prev">
                    <button type="button" class="ag-button ag-chart-settings-prev-button"></button>
                </div>
                <div ref="eCardSelector" class="ag-chart-settings-card-selector"></div>
                <div ref="eNextBtn" class="ag-chart-settings-next">
                    <button type="button" class="ag-button ag-chart-settings-next-button"></button>
                </div>
            </div>
        </div>`,p([qe("eMiniChartsContainer")],pe.prototype,"eMiniChartsContainer",2),p([qe("eNavBar")],pe.prototype,"eNavBar",2),p([qe("eCardSelector")],pe.prototype,"eCardSelector",2),p([qe("ePrevBtn")],pe.prototype,"ePrevBtn",2),p([qe("eNextBtn")],pe.prototype,"eNextBtn",2),p([Xc],pe.prototype,"postConstruct",1);var fh=pe,xe=class sr extends sn{constructor(e,t){super(),this.panels=e,this.chartMenuContext=t,this.tabs=[]}init(){this.panels.forEach(e=>{const t=e.replace("chart","").toLowerCase(),r=this.createPanel(t),s=this.createTab(e,t,r);this.tabs.push(s),this.addDestroyFunc(()=>this.destroyBean(r))}),this.tabbedLayout=new on({items:this.tabs,cssClass:"ag-chart-tabbed-menu",keepScrollPosition:!0,suppressFocusBodyOnOpen:!0,suppressTrapFocus:!0,enableCloseButton:!this.chartMenuService.isLegacyFormat(),closeButtonAriaLabel:this.chartTranslationService.translate("ariaChartMenuClose"),onCloseClicked:()=>{var e;(e=this.eventSource)==null||e.focus({preventScroll:!0}),this.dispatchEvent({type:sr.EVENT_CLOSED})}}),this.getContext().createBean(this.tabbedLayout)}createTab(e,t,r){const s=document.createElement("div");s.classList.add("ag-chart-tab",`ag-chart-${t}`),this.getContext().createBean(r),s.appendChild(r.getGui());const i=document.createElement("div"),n=this.chartTranslationService.translate(t);return i.innerText=n,{title:i,titleLabel:n,bodyPromise:an.resolve(s),getScrollableContainer:()=>s.querySelector(".ag-scrollable-container")||s,name:e}}showTab(e){const t=this.tabs[e];this.tabbedLayout.showItem(t)}getGui(){return this.tabbedLayout&&this.tabbedLayout.getGui()}showMenu(e,t){var r;this.eventSource=e,t||(r=this.tabbedLayout)==null||r.focusHeader(!0)}destroy(){this.parentComponent&&this.parentComponent.isAlive()&&this.destroyBean(this.parentComponent),super.destroy()}createPanel(e){const{chartController:t,chartOptionsService:r}=this.chartMenuContext;switch(e){case sr.TAB_DATA:return new Bo(t,r);case sr.TAB_FORMAT:return new $c(this.chartMenuContext);default:return new fh(t)}}};xe.EVENT_CLOSED="closed",xe.TAB_DATA="data",xe.TAB_FORMAT="format",p([ta("chartTranslationService")],xe.prototype,"chartTranslationService",2),p([ta("chartMenuService")],xe.prototype,"chartMenuService",2),p([nn],xe.prototype,"init",1);var Cs=xe;import{Autowired as fs,Component as vh,RefSelector as yh,_ as vs}from"@ag-grid-community/core";var Wt=class extends vh{constructor(){super('<div class="ag-chart-menu" ref="eMenu"></div>'),this.buttonListenersDestroyFuncs=[]}updateParams(a){const{buttons:e}=a;this.createButtons(e)}createButtons(a){this.buttonListenersDestroyFuncs.forEach(t=>t?.()),this.buttonListenersDestroyFuncs=[];const e=this.eMenu;vs.clearElement(e),a.forEach(t=>{const{buttonName:r,iconName:s,callback:i}=t,n=this.createButton(s),o=this.chartTranslationService.translate(r+"ToolbarTooltip");o&&n instanceof HTMLElement&&(n.title=o),this.buttonListenersDestroyFuncs.push(this.addManagedListener(n,"click",l=>i(l.target))),e.appendChild(n)})}createButton(a){let e=vs.createIconNoSpan(a,this.gridOptionsService,void 0,!0);return e.classList.add("ag-chart-menu-icon"),this.chartMenuService.isLegacyFormat()||(e=this.wrapButton(e)),e}wrapButton(a){const e=this.gridOptionsService.getDocument().createElement("button");return e.appendChild(a),e.classList.add("ag-chart-menu-toolbar-button"),e}destroy(){this.buttonListenersDestroyFuncs=[],super.destroy()}};p([fs("chartTranslationService")],Wt.prototype,"chartTranslationService",2),p([fs("chartMenuService")],Wt.prototype,"chartMenuService",2),p([yh("eMenu")],Wt.prototype,"eMenu",2);var at=class Mi extends ea{constructor(e,t,r){super(Mi.TEMPLATE),this.eChartContainer=e,this.eMenuPanelContainer=t,this.chartMenuContext=r,this.buttons={chartSettings:{iconName:"menu",callback:()=>this.showMenu({panel:this.defaultPanel})},chartData:{iconName:"menu",callback:()=>this.showMenu({panel:"chartData"})},chartFormat:{iconName:"menu",callback:()=>this.showMenu({panel:"chartFormat"})},chartLink:{iconName:"linked",callback:()=>this.chartMenuService.toggleLinked(this.chartMenuContext)},chartUnlink:{iconName:"unlinked",callback:()=>this.chartMenuService.toggleLinked(this.chartMenuContext)},chartDownload:{iconName:"save",callback:()=>this.chartMenuService.downloadChart(this.chartMenuContext)},chartMenu:{iconName:"menuAlt",callback:s=>this.showMenuList(s)}},this.panels=[],this.menuVisible=!1,this.chartController=r.chartController}postConstruct(){this.legacyFormat=this.chartMenuService.isLegacyFormat(),this.chartToolbar=this.createManagedBean(new Wt),this.getGui().appendChild(this.chartToolbar.getGui()),this.legacyFormat&&(Ji.warnOnce("As of v31.2, the legacy format charts menu is deprecated. Set `legacyChartsMenu = false` to use the new format menu."),this.createLegacyToggleButton()),this.refreshToolbarAndPanels(),this.addManagedListener(this.eventService,tn.EVENT_CHART_CREATED,e=>{var t;e.chartId===this.chartController.getChartId()&&((t=this.gridOptionsService.get("chartToolPanelsDef"))!=null&&t.defaultToolPanel)&&this.showMenu({panel:this.defaultPanel,animate:!1,suppressFocus:!0})}),this.addManagedListener(this.chartController,Y.EVENT_CHART_LINKED_CHANGED,this.refreshToolbarAndPanels.bind(this)),this.refreshMenuClasses(),this.legacyFormat&&!this.gridOptionsService.get("suppressChartToolPanelsButton")&&this.panels.length>0&&(this.getGui().classList.add("ag-chart-tool-panel-button-enable"),this.eHideButton&&this.addManagedListener(this.eHideButton,"click",this.toggleMenu.bind(this))),this.legacyFormat||this.getGui().classList.add("ag-chart-menu-wrapper"),this.addManagedListener(this.chartController,Y.EVENT_CHART_API_UPDATE,this.refreshToolbarAndPanels.bind(this))}isVisible(){return this.menuVisible}getExtraPaddingDirections(){const e=["chartMenu","chartLink","chartUnlink","chartDownload"],t=["chartSettings","chartData","chartFormat"],r=[];return e.some(s=>this.chartToolbarOptions.includes(s))&&r.push("top"),t.some(s=>this.chartToolbarOptions.includes(s))&&r.push(this.gridOptionsService.get("enableRtl")?"left":"right"),r}createLegacyToggleButton(){const e=this.gridOptionsService.getDocument();this.eHideButton=e.createElement("button"),this.eHideButton.classList.add("ag-button","ag-chart-menu-close"),this.eHideButtonIcon=e.createElement("span"),this.eHideButtonIcon.classList.add("ag-icon","ag-icon-contracted"),this.eHideButton.appendChild(this.eHideButtonIcon),this.getGui().appendChild(this.eHideButton)}refreshToolbarAndPanels(){this.initToolbarOptionsAndPanels(),this.updateToolbar()}initToolbarOptionsAndPanels(){const{panels:e,defaultPanel:t,chartToolbarOptions:r}=this.chartMenuService.getToolbarOptionsAndPanels(this.chartController);this.panels=e,this.defaultPanel=t,this.chartToolbarOptions=r}updateToolbar(){const e=this.chartToolbarOptions.map(t=>{const{iconName:r,callback:s}=this.buttons[t];return{buttonName:t,iconName:r,callback:s}});this.chartToolbar.updateParams({buttons:e})}createMenuPanel(e){const t=this.environment.chartMenuPanelWidth(),r=this.menuPanel=this.createBean(new Qi({minWidth:t,width:t,height:"100%",closable:!0,hideTitleBar:!0,cssIdentifier:"chart-menu"}));return r.setParentComponent(this),this.eMenuPanelContainer.appendChild(r.getGui()),this.tabbedMenu=this.createBean(new Cs(this.panels,this.chartMenuContext)),this.addManagedListener(this.tabbedMenu,Cs.EVENT_CLOSED,()=>{this.hideMenu(!1)}),this.addManagedListener(r,ea.EVENT_DESTROYED,()=>this.destroyBean(this.tabbedMenu)),new en(s=>{window.setTimeout(()=>{r.setBodyComponent(this.tabbedMenu),this.tabbedMenu.showTab(e),s(r),this.legacyFormat&&this.addManagedListener(this.eChartContainer,"click",i=>{this.getGui().contains(i.target)||this.menuVisible&&this.hideMenu()})},100)})}showContainer(e,t){this.menuPanel&&(this.menuVisible=!0,this.showParent(this.menuPanel.getWidth()),this.refreshMenuClasses(),this.tabbedMenu.showMenu(e,t))}toggleMenu(){this.menuVisible?this.hideMenu(this.legacyFormat):this.showMenu({animate:this.legacyFormat})}showMenu(e){const{panel:t,animate:r=!0,eventSource:s,suppressFocus:i}=e;if(r||this.eMenuPanelContainer.classList.add("ag-no-transition"),this.menuPanel&&!t)this.showContainer(s,i);else{const n=t||this.defaultPanel;let o=this.panels.indexOf(n);o<0&&(console.warn(`AG Grid: '${t}' is not a valid Chart Tool Panel name`),o=this.panels.indexOf(this.defaultPanel)),this.menuPanel?(this.tabbedMenu.showTab(o),this.showContainer(s,i)):this.createMenuPanel(o).then(()=>this.showContainer(s,i))}r||setTimeout(()=>{this.isAlive()&&this.eMenuPanelContainer.classList.remove("ag-no-transition")},500)}hideMenu(e=!0){e||this.eMenuPanelContainer.classList.add("ag-no-transition"),this.hideParent(),window.setTimeout(()=>{this.menuVisible=!1,this.refreshMenuClasses(),e||this.eMenuPanelContainer.classList.remove("ag-no-transition")},500)}refreshMenuClasses(){this.eChartContainer.classList.toggle("ag-chart-menu-visible",this.menuVisible),this.eChartContainer.classList.toggle("ag-chart-menu-hidden",!this.menuVisible),this.legacyFormat&&!this.gridOptionsService.get("suppressChartToolPanelsButton")&&(this.eHideButtonIcon.classList.toggle("ag-icon-contracted",this.menuVisible),this.eHideButtonIcon.classList.toggle("ag-icon-expanded",!this.menuVisible))}showParent(e){this.eMenuPanelContainer.style.minWidth=`${e}px`}hideParent(){this.eMenuPanelContainer.style.minWidth="0"}showMenuList(e){this.chartMenuListFactory.showMenuList({eventSource:e,showMenu:()=>this.showMenu({animate:!1,eventSource:e}),chartMenuContext:this.chartMenuContext})}destroy(){super.destroy(),this.menuPanel&&this.menuPanel.isAlive()&&this.destroyBean(this.menuPanel),this.tabbedMenu&&this.tabbedMenu.isAlive()&&this.destroyBean(this.tabbedMenu)}};at.TEMPLATE="<div></div>",p([Qr("chartMenuService")],at.prototype,"chartMenuService",2),p([Qr("chartMenuListFactory")],at.prototype,"chartMenuListFactory",2),p([rn],at.prototype,"postConstruct",1);var Sh=at;import{Autowired as ys,Component as Th,PostConstruct as Ph}from"@ag-grid-community/core";var st=class Ei extends Th{constructor(e){super(Ei.TEMPLATE),this.chartMenu=e,this.destroyableChartListeners=[],this.editing=!1}init(){this.addManagedListener(this.getGui(),"keydown",e=>{this.editing&&e.key==="Enter"&&!e.shiftKey&&(this.handleEndEditing(),e.preventDefault())}),this.addManagedListener(this.getGui(),"input",()=>{this.editing&&this.updateHeight()}),this.addManagedListener(this.getGui(),"blur",()=>this.endEditing())}refreshTitle(e){this.chartController=e.chartController,this.chartOptionsService=e.chartOptionsService,this.chartMenuUtils=e.chartMenuParamsFactory.getChartOptions();for(const l of this.destroyableChartListeners)l();this.destroyableChartListeners=[];const r=this.chartController.getChartProxy().getChart(),s=r.scene.canvas.element,i=this.addManagedListener(s,"dblclick",l=>{const{title:c}=r;if(c&&c.node.containsPoint(l.offsetX,l.offsetY)){const h=c.node.computeBBox(),d=c.node.inverseTransformPoint(h.x,h.y);this.startEditing(T(T({},h),d),s.width)}});let n=!1;const o=this.addManagedListener(s,"mousemove",l=>{const{title:c}=r,h=!!(c&&c.enabled&&c.node.containsPoint(l.offsetX,l.offsetY));n!==h&&(s.style.cursor=h?"pointer":""),n=h});this.destroyableChartListeners=[i,o]}startEditing(e,t){if(this.chartMenuService.isLegacyFormat()&&this.chartMenu&&this.chartMenu.isVisible()||this.editing)return;this.editing=!0;const s=Math.max(Math.min(e.width+20,t),300),i=this.getGui();i.classList.add("currently-editing");const n=i.style;n.fontFamily=this.chartMenuUtils.getValue("title.fontFamily"),n.fontWeight=this.chartMenuUtils.getValue("title.fontWeight"),n.fontStyle=this.chartMenuUtils.getValue("title.fontStyle"),n.fontSize=this.chartMenuUtils.getValue("title.fontSize")+"px",n.color=this.chartMenuUtils.getValue("title.color");const o=this.chartMenuUtils.getValue("title.text"),l=o===this.chartTranslationService.translate("titlePlaceholder");i.value=l?"":o;const c=o.split(/\r?\n/g).length;n.left=Math.round(e.x+e.width/2-s/2-1)+"px",n.top=Math.round(e.y+e.height/2-c*this.getLineHeight()/2-2)+"px",n.width=Math.round(s)+"px",n.lineHeight=this.getLineHeight()+"px",this.updateHeight(),i.focus()}updateHeight(){const e=this.getGui(),t=this.chartMenuUtils.getValue("title.text").split(/\r?\n/g).length,r=e.value.split(/\r?\n/g).length;e.style.height=Math.round(Math.max(t,r)*this.getLineHeight())+4+"px"}getLineHeight(){const e=this.chartMenuUtils.getValue("title.lineHeight");return e?parseInt(e):Math.round(parseInt(this.chartMenuUtils.getValue("title.fontSize"))*1.2)}handleEndEditing(){const e=this.chartMenuUtils.getValue("title.color");this.chartMenuUtils.setValue("title.color","rgba(0, 0, 0, 0)"),this.chartOptionsService.awaitChartOptionUpdate(()=>this.endEditing()),this.chartOptionsService.awaitChartOptionUpdate(()=>{this.chartMenuUtils.setValue("title.color",e)})}endEditing(){if(!this.editing)return;this.editing=!1;const e=this.getGui().value;e&&e.trim()!==""?(this.chartMenuUtils.setValue("title.text",e),this.chartMenuUtils.setValue("title.enabled",!0)):(this.chartMenuUtils.setValue("title.text",""),this.chartMenuUtils.setValue("title.enabled",!1)),this.getGui().classList.remove("currently-editing"),this.chartOptionsService.awaitChartOptionUpdate(()=>{this.eventService.dispatchEvent({type:"chartTitleEdit"})})}};st.TEMPLATE=`<textarea
             class="ag-chart-title-edit"
             style="padding:0; border:none; border-radius: 0; min-height: 0; text-align: center; resize: none;" />
        `,p([ys("chartTranslationService")],st.prototype,"chartTranslationService",2),p([ys("chartMenuService")],st.prototype,"chartMenuService",2),p([Ph],st.prototype,"init",1);var bh=st;import{_ as Ah}from"@ag-grid-community/core";import{_Theme as xh,AgCharts as Yt}from"ag-charts-community";function Ss(a){return a.chart!=null?a.chart:a}var it=class{constructor(a){this.chartProxyParams=a,this.clearThemeOverrides=!1,this.chart=a.chartInstance,this.chartType=a.chartType,this.crossFiltering=a.crossFiltering,this.crossFilterCallback=a.crossFilterCallback,this.standaloneChartType=j(this.chartType),this.chart==null?this.chart=Yt.create(this.getCommonChartOptions()):this.clearThemeOverrides=!0}updateThemeOverrides(a){Yt.updateDelta(this.getChartRef(),{theme:{overrides:a}})}getChart(){return Ss(this.chart)}getChartRef(){return this.chart}downloadChart(a,e,t){const{chart:r}=this,s=Ss(r),i=e||(s.title?s.title.text:"chart"),{width:n,height:o}=a||{};Yt.download(r,{width:n,height:o,fileName:i,fileFormat:t})}getChartImageDataURL(a){return this.getChart().scene.getDataURL(a)}getChartOptions(){return this.chart.getOptions()}getChartThemeOverrides(){var a;return(a=this.getChartOptions().theme.overrides)!=null?a:{}}getChartPalette(){return xh.getChartTheme(this.getChartOptions().theme).palette}setPaired(a){const e=j(this.chartProxyParams.chartType);Yt.updateDelta(this.chart,{theme:{overrides:{[e]:{paired:a}}}})}isPaired(){const a=j(this.chartProxyParams.chartType);return Te(this.getChartThemeOverrides(),`${a}.paired`,!0)}lookupCustomChartTheme(a){return pa(this.chartProxyParams,a)}transformData(a,e,t){return t?a.map((r,s)=>{const i=r[e],n=i&&i.toString?i.toString():"",o=T({},r);return o[e]={id:s,value:i,toString:()=>n},o}):a}getCommonChartOptions(a){var e,t;const r=this.clearThemeOverrides?{}:(t=(e=this.chart)==null?void 0:e.getOptions())!=null?t:{},s=this.chart!=null?this.getActiveFormattingPanelOverrides():void 0;this.clearThemeOverrides=!1;const i=$n(this.chartProxyParams,this),n=this.getChartThemeDefaults(),o=jn(i,[n,a??s]);return A(T({},r),{theme:o,container:this.chartProxyParams.parentElement,mode:"integrated"})}getChartThemeDefaults(){}getActiveFormattingPanelOverrides(){var a,e;if(this.clearThemeOverrides)return{};const t=(a=this.chart)==null?void 0:a.getOptions().theme;return(e=t?.overrides)!=null?e:{}}destroy({keepChartInstance:a=!1}={}){if(a)return this.chart.resetAnimations(),this.chart;this.destroyChart()}destroyChart(){this.chart&&(this.chart.destroy(),this.chart=void 0)}};import{AgCharts as Mh}from"ag-charts-community";var ge=class wi extends it{constructor(e){super(e),this.crossFilteringAllPoints=new Set,this.crossFilteringSelectedPoints=[]}update(e){const t=this.getAxes(e),r=A(T({},this.getCommonChartOptions(e.updatedOverrides)),{data:this.getData(e,t),axes:t,series:this.getSeries(e)});Mh.update(this.getChartRef(),r)}getData(e,t){const r=["area","line"].includes(this.standaloneChartType),s=t.some(i=>i?.type==="category");return this.crossFiltering&&r?this.getCrossFilterData(e):this.getDataTransformedData(e,s)}getDataTransformedData(e,t){const[r]=e.categories;return this.transformData(e.data,r.id,t)}getXAxisType(e){return e.grouping?"grouped-category":wi.isTimeAxis(e)?"time":"category"}static isTimeAxis(e){const[t]=e.categories;if(t&&t.chartDataType)return t.chartDataType==="time";const r=e.data[0];return(r&&r[t.id])instanceof Date}crossFilteringReset(){this.crossFilteringSelectedPoints=[],this.crossFilteringAllPoints.clear()}crossFilteringPointSelected(e){return this.crossFilteringSelectedPoints.length==0||this.crossFilteringSelectedPoints.includes(e)}crossFilteringDeselectedPoints(){return this.crossFilteringSelectedPoints.length>0&&this.crossFilteringAllPoints.size!==this.crossFilteringSelectedPoints.length}extractLineAreaCrossFilterSeries(e,t){const[r]=t.categories,s=i=>this.standaloneChartType==="area"?t.getCrossFilteringContext().lastSelectedChartId===t.chartId?i+"-total":i:i+"-total";return e.map(i=>(i.yKey=s(i.yKey),i.listeners={nodeClick:n=>{const o=n.datum[i.xKey],l=n.event.metaKey||n.event.ctrlKey;this.crossFilteringAddSelectedPoint(l,o),this.crossFilterCallback(n)}},i.marker={formatter:n=>{const o=n.datum[r.id];return{fill:n.highlighted?"yellow":n.fill,size:n.highlighted?14:this.crossFilteringPointSelected(o)?8:0}}},this.standaloneChartType==="area"&&(i.fillOpacity=this.crossFilteringDeselectedPoints()?.3:1),this.standaloneChartType==="line"&&(i.strokeOpacity=this.crossFilteringDeselectedPoints()?.3:1),i))}getCrossFilterData(e){this.crossFilteringAllPoints.clear();const[t]=e.categories,r=e.fields[0].colId,s=`${r}-filtered-out`,i=e.getCrossFilteringContext().lastSelectedChartId;return e.data.map(n=>{const o=n[t.id];this.crossFilteringAllPoints.add(o);const l=this.crossFilteringPointSelected(o);return this.standaloneChartType==="area"&&i===e.chartId&&(n[`${r}-total`]=l?n[r]:n[r]+n[s]),this.standaloneChartType==="line"&&(n[`${r}-total`]=l?n[r]:n[r]+n[s]),n})}crossFilteringAddSelectedPoint(e,t){e?this.crossFilteringSelectedPoints.push(t):this.crossFilteringSelectedPoints=[t]}};import{_Util as Ts}from"ag-charts-community";function Ps(a,e){const t=parseInt(a.slice(1,3),16),r=parseInt(a.slice(3,5),16),s=parseInt(a.slice(5,7),16);return e?`rgba(${t}, ${r}, ${s}, ${e})`:`rgba(${t}, ${r}, ${s})`}function bs(a,e){return a.map(t=>{const r=Ts.Color.fromString(t);return new Ts.Color(r.r,r.g,r.b,e).toHexString()})}var Eh=class extends ge{constructor(a){super(a)}getAxes(a){const e=[{type:this.getXAxisType(a),position:Z(this.chartType)?"left":"bottom"},{type:"number",position:Z(this.chartType)?"bottom":"left"}];if(this.isNormalised()){const t=e[1];t.label=A(T({},t.label),{formatter:r=>Math.round(r.value)+"%"})}return e}getSeries(a){const[e]=a.categories,t=a.fields.map(r=>({type:this.standaloneChartType,direction:Z(this.chartType)?"horizontal":"vertical",stacked:this.crossFiltering||On(this.chartType),normalizedTo:this.isNormalised()?100:void 0,xKey:e.id,xName:e.name,yKey:r.colId,yName:r.displayName}));return this.crossFiltering?this.extractCrossFilterSeries(t):t}extractCrossFilterSeries(a){const e=this.getChartPalette(),t=(i,n)=>A(T({},i),{highlightStyle:{item:{fill:void 0}},fill:e?.fills[n],stroke:e?.strokes[n],listeners:{nodeClick:this.crossFilterCallback}}),r=i=>{const n=i.yKey+"-filtered-out";return A(T({},De({},i)),{yKey:n,fill:Ps(i.fill,"0.3"),stroke:Ps(i.stroke,"0.3"),showInLegend:!1})},s=[];for(let i=0;i<a.length;i++){const n=t(a[i],i);s.push(n),s.push(r(n))}return s}isNormalised(){const a=["normalizedColumn","normalizedBar"];return!this.crossFiltering&&Ah.includes(a,this.chartType)}},wh=class extends ge{constructor(a){super(a)}getAxes(a){const e=[{type:this.getXAxisType(a),position:"bottom"},{type:"number",position:"left"}];if(this.isNormalised()){const t=e[1];t.label=A(T({},t.label),{formatter:r=>Math.round(r.value)+"%"})}return e}getSeries(a){const[e]=a.categories,t=a.fields.map(r=>({type:this.standaloneChartType,xKey:e.id,xName:e.name,yKey:r.colId,yName:r.displayName,normalizedTo:this.chartType==="normalizedArea"?100:void 0,stacked:["normalizedArea","stackedArea"].includes(this.chartType)}));return this.crossFiltering?this.extractLineAreaCrossFilterSeries(t,a):t}isNormalised(){return!this.crossFiltering&&this.chartType==="normalizedArea"}},Oh=class extends ge{constructor(a){super(a)}getAxes(a){return[{type:this.getXAxisType(a),position:"bottom"},{type:"number",position:"left"}]}getSeries(a){const[e]=a.categories,t=a.fields.map(r=>({type:this.standaloneChartType,xKey:e.id,xName:e.name,yKey:r.colId,yName:r.displayName}));return this.crossFiltering?this.extractLineAreaCrossFilterSeries(t,a):t}};import{AgCharts as Dh}from"ag-charts-community";var kh=class extends it{constructor(a){super(a)}getAxes(a){const e=this.standaloneChartType==="radial-bar";return[{type:e?"angle-number":"angle-category"},{type:e?"radius-category":"radius-number"}]}getSeries(a){const{fields:e}=a,[t]=a.categories,r=this.standaloneChartType==="radial-bar";return e.map(s=>{var i,n;return{type:this.standaloneChartType,angleKey:r?s.colId:t.id,angleName:r?(i=s.displayName)!=null?i:void 0:t.name,radiusKey:r?t.id:s.colId,radiusName:r?t.name:(n=s.displayName)!=null?n:void 0}})}update(a){const e=this.getAxes(a),t=A(T({},this.getCommonChartOptions(a.updatedOverrides)),{data:this.getData(a,e),axes:e,series:this.getSeries(a)});Dh.update(this.getChartRef(),t)}getData(a,e){const t=e.some(r=>r.type==="angle-category"||r.type==="radius-category");return this.getDataTransformedData(a,t)}getDataTransformedData(a,e){const[t]=a.categories;return this.transformData(a.data,t.id,e)}crossFilteringReset(){}};import{AgCharts as Lh}from"ag-charts-community";var Rh=class Oi extends it{constructor(e){super(e)}update(e){const{data:t}=e,[r]=e.categories,s=A(T({},this.getCommonChartOptions(e.updatedOverrides)),{data:this.crossFiltering?this.getCrossFilterData(e):this.transformData(t,r.id),series:this.getSeries(e)});Lh.update(this.getChartRef(),s)}getSeries(e){const[t]=e.categories,r=e.fields.length,s={currentOffset:0,offsetAmount:r>1?20:40},i=this.getFields(e).map(n=>{var o;const l={type:this.standaloneChartType,angleKey:n.colId,angleName:n.displayName,sectorLabelKey:n.colId,calloutLabelName:t.name,calloutLabelKey:t.id};if(this.chartType==="donut"||this.chartType==="doughnut"){const{outerRadiusOffset:c,innerRadiusOffset:h}=Oi.calculateOffsets(s),d=n.displayName?{title:{text:n.displayName,showInLegend:r>1}}:void 0;return A(T(A(T({},l),{type:"donut",outerRadiusOffset:c,innerRadiusOffset:h}),d),{calloutLine:{colors:(o=this.getChartPalette())==null?void 0:o.strokes}})}return l});return this.crossFiltering?this.extractCrossFilterSeries(i):i}getCrossFilterData(e){const t=e.fields[0].colId,r=`${t}-filtered-out`;return e.data.map(s=>{const i=s[t]+s[r];return s[`${t}-total`]=i,s[r]=1,s[t]=s[t]/i,s})}extractCrossFilterSeries(e){const t=this.getChartPalette(),r=l=>A(T({},l),{legendItemKey:l.calloutLabelKey,calloutLabel:{enabled:!1},highlightStyle:{item:{fill:void 0}},radiusKey:l.angleKey,angleKey:l.angleKey+"-total",radiusMin:0,radiusMax:1,listeners:{nodeClick:this.crossFilterCallback}}),s=(l,c)=>{var h,d;return A(T({},De({},o)),{radiusKey:c+"-filtered-out",fills:bs((h=l.fills)!=null?h:t.fills,.3),strokes:bs((d=l.strokes)!=null?d:t.strokes,.3),showInLegend:!1})},i=e[0],n=i.angleKey,o=r(i);return[s(i,n),o]}static calculateOffsets(e){const t=e.currentOffset;e.currentOffset-=e.offsetAmount;const r=e.currentOffset;return e.currentOffset-=e.offsetAmount,{outerRadiusOffset:t,innerRadiusOffset:r}}getFields(e){return this.chartType==="pie"?e.fields.slice(0,1):e.fields}crossFilteringReset(){}},Ih=class extends ge{constructor(a){super(a)}getAxes(a){return[{type:"number",position:"bottom"},{type:"number",position:"left"}]}getSeries(a){const[e]=a.categories,t=this.isPaired(),r=this.getSeriesDefinitions(a.fields,t),s=e.id===J.DEFAULT_CATEGORY?void 0:e,i=r.map(n=>{var o,l,c,h,d;return n?.sizeField?{type:"bubble",xKey:n.xField.colId,xName:(o=n.xField.displayName)!=null?o:void 0,yKey:n.yField.colId,yName:(l=n.yField.displayName)!=null?l:void 0,title:`${n.yField.displayName} vs ${n.xField.displayName}`,sizeKey:n.sizeField.colId,sizeName:(c=n.sizeField.displayName)!=null?c:"",labelKey:s?s.id:n.yField.colId,labelName:s?s.name:void 0}:{type:"scatter",xKey:n.xField.colId,xName:(h=n.xField.displayName)!=null?h:void 0,yKey:n.yField.colId,yName:(d=n.yField.displayName)!=null?d:void 0,title:`${n.yField.displayName} vs ${n.xField.displayName}`,labelKey:s?s.id:n.yField.colId,labelName:s?s.name:void 0}});return this.crossFiltering?this.extractCrossFilterSeries(i,a):i}extractCrossFilterSeries(a,e){const{data:t}=e,r=this.getChartPalette(),s=c=>`${c}-filtered-out`,i=(c,h)=>{var d;const u=[1/0,-1/0];if(h!=null)for(const g of c){const m=(d=g[h])!=null?d:g[s(h)];m<u[0]&&(u[0]=m),m>u[1]&&(u[1]=m)}if(u[0]<=u[1])return u},n=(c,h)=>{const d=r?.fills[h],u=r?.strokes[h];let g;if(c.type==="bubble"){const{sizeKey:f}=c;g=i(t,f)}const m=A(T({},c.marker),{fill:d,stroke:u,domain:g});return A(T({},c),{marker:m,highlightStyle:{item:{fill:"yellow"}},listeners:A(T({},c.listeners),{nodeClick:this.crossFilterCallback})})},o=c=>{let{yKey:h,xKey:d}=c,u={};return c.type==="bubble"&&(u={sizeKey:s(c.sizeKey)}),A(T(T({},c),u),{yKey:s(h),xKey:s(d),marker:A(T({},c.marker),{fillOpacity:.3,strokeOpacity:.3}),showInLegend:!1,listeners:A(T({},c.listeners),{nodeClick:g=>{const m=g.datum[s(d)],f=A(T({},g),{xKey:d,datum:A(T({},g.datum),{[d]:m})});this.crossFilterCallback(f)}})})},l=a.map(n);return[...l,...l.map(o)]}getSeriesDefinitions(a,e){if(a.length<2)return[];const t=this.chartType==="bubble";if(e)return t?a.map((s,i)=>i%3===0?{xField:s,yField:a[i+1],sizeField:a[i+2]}:null).filter(s=>s&&s.yField&&s.sizeField):a.map((s,i)=>i%2===0?{xField:s,yField:a[i+1]}:null).filter(s=>s&&s.yField);const r=a[0];return t?a.map((s,i)=>i%2===1?{xField:r,yField:s,sizeField:a[i+1]}:null).filter(s=>s&&s.sizeField):a.filter((s,i)=>i>0).map(s=>({xField:r,yField:s}))}},As=class extends ge{constructor(a){super(a)}getAxes(a){return[{type:this.getXAxisType(a),position:Z(this.chartType)?"left":"bottom"},{type:"number",position:Z(this.chartType)?"bottom":"left"}]}computeSeriesStatistics(a,e){const{data:t,fields:r}=a,[s]=a.categories,i=s.id||J.DEFAULT_CATEGORY,n=this.groupDataByCategory(i,t);return Array.from(n).map(([o,l])=>{const c={[s.id]:o};return r.forEach((h,d)=>{const u=l.map(g=>g[h.colId]).filter(g=>typeof g=="number"&&!isNaN(g));Object.entries(e(u)).forEach(([g,m])=>{const f=`${g}:${d}`;c[f]=u.length>0?m:null})}),c})}groupDataByCategory(a,e){const t=r=>{if(a===J.DEFAULT_CATEGORY)return 1;const s=r[a];return s==null?"":s instanceof Date?s.getTime():s};return e.reduce((r,s)=>{let i=t(s);const n=r.get(i);return n?n.push(s):r.set(i,[s]),r},new Map)}},xs=class extends As{constructor(a){super(a)}getSeries(a){const[e]=a.categories;return a.fields.map((t,r)=>{var s;return{type:this.standaloneChartType,xKey:e.id,xName:e.name,yName:(s=t.displayName)!=null?s:void 0,yLowName:"Min",yHighName:"Max",yLowKey:`min:${r}`,yHighKey:`max:${r}`}})}getData(a){return this.computeSeriesStatistics(a,e=>({min:Math.min(...e),max:Math.max(...e)}))}},_h=class extends ge{constructor(a){super(a)}getSeries(a){const e=a.fields[0];return[{type:this.standaloneChartType,xKey:e.colId,xName:e.displayName,yName:this.chartProxyParams.translate("histogramFrequency"),areaPlot:!1}]}getAxes(a){return[{type:"number",position:"bottom"},{type:"number",position:"left"}]}},Fh=class extends As{constructor(a){super(a)}getSeries(a){const[e]=a.categories;return a.fields.map((t,r)=>{var s;return{type:this.standaloneChartType,direction:Z(this.chartType)?"horizontal":"vertical",xKey:e.id,xName:e.name,yName:(s=t.displayName)!=null?s:void 0,minName:"Min",q1Name:"Q1",medianName:"Median",q3Name:"Q3",maxName:"Max",minKey:`min:${r}`,q1Key:`q1:${r}`,medianKey:`median:${r}`,q3Key:`q3:${r}`,maxKey:`max:${r}`}})}getData(a){return this.computeSeriesStatistics(a,e=>{const t=e.sort((r,s)=>r-s);return{min:t[0],q1:this.quantile(t,.25),median:this.quantile(t,.5),q3:this.quantile(t,.75),max:t[t.length-1]}})}quantile(a,e){const t=(a.length-1)*e,r=Math.floor(t),s=t-r;return a[r+1]!==void 0?a[r]+s*(a[r+1]-a[r]):a[r]}};import{AgCharts as Gh}from"ag-charts-community";var Kt="AG-GRID-DEFAULT-LABEL-KEY";function Vh(a,e){const t=Ms(a,r,s);return Vr(t);function r(n){return e.length}function s(n,o){const l=e[o],c=n[l];return i(c)}function i(n){return n==null?null:String(n)}}function Nh(a,e){const t=Ms(a,r,s);return Vr(t);function r(i){var n,o;return(o=(n=e(i))==null?void 0:n.length)!=null?o:0}function s(i,n){const o=e(i);if(!o)return null;const l=o.length-1-n;return o[l]}}function Vr(a){const{depth:e,leaves:t,children:r}=a;if(e===0)return t.map(i=>T({[Kt]:null},i));const s=new Array;for(const[i,n]of r.entries())n.depth===0?s.push(...n.leaves.map(o=>T({[Kt]:i},o))):s.push({[Kt]:i,children:Vr(n)});return s}function Ms(a,e,t){const r={depth:0,leaves:[],children:new Map};return a.reduce((i,n)=>{const o=e(n);return s(n,o,t,0,i)},r);function s(i,n,o,l,c){if(l===n)return c.leaves.push(i),c;{const h=o(i,l),d=c.children.get(h),u=s(i,n,o,l+1,d||{depth:0,leaves:[],children:new Map});return c.children.set(h,u),c.depth=Math.max(1+u.depth,c.depth),c}}}import{GROUP_AUTO_COLUMN_ID as Bh}from"@ag-grid-community/core";var Es=class extends it{constructor(a){super(a),this.chartProxyParams=a}update(a){const e=A(T({},this.getCommonChartOptions(a.updatedOverrides)),{series:this.getSeries(a,Kt),data:this.getData(a)});Gh.update(this.getChartRef(),e)}getData(a){const{categories:e,data:t,grouping:r}=a;if(r)return Nh(t,Uh);{const s=e.map(({id:i})=>i);return Vh(t,s)}}};function Uh(a){var e,t;return(t=(e=a[Bh])==null?void 0:e.labels)!=null?t:null}var zh=class extends Es{constructor(a){super(a)}getSeries(a,e){var t,r;const{fields:s}=a,[i,n]=s;return[{type:this.standaloneChartType,labelKey:e,sizeKey:i?.colId,sizeName:(t=i?.displayName)!=null?t:void 0,colorKey:n?.colId,colorName:(r=n?.displayName)!=null?r:void 0}]}getChartThemeDefaults(){return{treemap:{gradientLegend:{gradient:{preferredLength:200}}}}}transformData(a,e,t){return a}crossFilteringReset(){}},Hh=class extends Es{constructor(a){super(a)}getSeries(a,e){var t,r;const{fields:s}=a,[i,n]=s;return[{type:this.standaloneChartType,labelKey:e,sizeKey:i?.colId,sizeName:(t=i?.displayName)!=null?t:void 0,colorKey:n?.colId,colorName:(r=n?.displayName)!=null?r:void 0}]}getChartThemeDefaults(){return{sunburst:{gradientLegend:{gradient:{preferredLength:200}}}}}transformData(a,e,t){return a}crossFilteringReset(){}};import{AgCharts as Wh}from"ag-charts-community";function Yh(a,e){return a.reduce((t,r,s,i)=>t.concat(e(r,s,i)),new Array)}var Kh="AG-GRID-DEFAULT-HEATMAP-CATEGORY-KEY",$h="AG-GRID-DEFAULT-HEATMAP-SERIES-KEY",jh="AG-GRID-DEFAULT-HEATMAP-VALUE-KEY",Xh=class extends it{constructor(a){super(a)}update(a){const e=$h,t=jh,r=Kh,s=A(T({},this.getCommonChartOptions(a.updatedOverrides)),{series:this.getSeries(a,e,t,r),data:this.getData(a,e,t,r)});Wh.update(this.getChartRef(),s)}getSeries(a,e,t,r){const[s]=a.categories;return[{type:this.standaloneChartType,yKey:r,xKey:e,colorKey:t,yName:s.name,xName:void 0,colorName:void 0}]}getData(a,e,t,r){const[s]=a.categories;return Yh(a.data,(i,n)=>{const o=i[s.id],l=o==null?"":String(o),c={id:n,value:o,toString:()=>l};return a.fields.map(({colId:h,displayName:d})=>A(T({},i),{[e]:d,[t]:i[h],[r]:c}))})}getChartThemeDefaults(){return{heatmap:{gradientLegend:{gradient:{preferredLength:200}},series:{tooltip:{renderer:qh}}}}}transformData(a,e,t){return a}crossFilteringReset(){}};function qh(a){const{xKey:e,yKey:t,colorKey:r,yName:s,datum:i}=a;return{title:"",content:[{label:s,value:i[t]},{label:i[e],value:r&&i[r]}].map(({label:l,value:c})=>`<b>${ws(String(l))}:</b> ${ws(String(c))}`).join("<br>")}}function ws(a){const e={"&":"&amp;","<":"&lt;",">":"&gt;"},t=`[${Object.keys(e).join("")}]`,r=new RegExp(t,"g");return a.replace(r,s=>e[s])}var Zh=class extends ge{constructor(a){super(a)}getAxes(a){return[{type:this.getXAxisType(a),position:Z(this.chartType)?"left":"bottom"},{type:"number",position:Z(this.chartType)?"bottom":"left"}]}getSeries(a){var e;const[t]=a.categories,[r]=a.fields;return[{type:this.standaloneChartType,direction:Z(this.chartType)?"horizontal":"vertical",xKey:t.id,xName:t.name,yKey:r.colId,yName:(e=r.displayName)!=null?e:void 0}]}};import{BeanStub as Jh,Events as Qh}from"@ag-grid-community/core";import{AgCharts as ed}from"ag-charts-community";var Os=["number","category","time","grouped-category"],td=["angle-category","angle-number","radius-category","radius-number"],rd=[...Os,...td],ad=class Di extends Jh{constructor(e){super(),this.chartController=e}getChartThemeOverridesProxy(){return{getValue:e=>this.getChartOption(e),setValue:(e,t)=>this.setChartThemeOverrides([{expression:e,value:t}]),setValues:e=>this.setChartThemeOverrides(e)}}getAxisThemeOverridesProxy(){return{getValue:e=>this.getAxisProperty(e),setValue:(e,t)=>this.setAxisThemeOverrides([{expression:e,value:t}]),setValues:e=>this.setAxisThemeOverrides(e)}}getCartesianAxisOptionsProxy(e){return{getValue:t=>this.getCartesianAxisProperty(e,t),setValue:(t,r)=>this.setCartesianAxisOptions(e,[{expression:t,value:r}]),setValues:t=>this.setCartesianAxisOptions(e,t)}}getCartesianAxisThemeOverridesProxy(e){return{getValue:t=>this.getCartesianAxisProperty(e,t),setValue:(t,r)=>this.setCartesianAxisThemeOverrides(e,[{expression:t,value:r}]),setValues:t=>this.setCartesianAxisThemeOverrides(e,t)}}getCartesianAxisAppliedThemeOverridesProxy(e){return{getValue:t=>this.getCartesianAxisThemeOverride(e,t==="*"?null:t),setValue:(t,r)=>this.setCartesianAxisThemeOverrides(e,[{expression:t==="*"?null:t,value:r}]),setValues:t=>this.setCartesianAxisThemeOverrides(e,t)}}getSeriesOptionsProxy(e){return{getValue:(t,r)=>this.getSeriesOption(e(),t,r),setValue:(t,r)=>this.setSeriesOptions(e(),[{expression:t,value:r}]),setValues:t=>this.setSeriesOptions(e(),t)}}getPersistedChartThemeOverrides(e,t,r,s){const i=this.getRetainedChartThemeOverrideKeys(r,s),n=this.getRetainedChartAxisThemeOverrideKeys(null,r,s),o=this.createChartOptions();for(const l of i){const c=this.retrieveChartOptionsThemeOverride(e,r,l);c!==void 0&&this.assignChartOptionsThemeOverride(o,s,l,c)}if(t)for(const{expression:l,targetAxisTypes:c}of n)for(const h of t.map(d=>d.type)){const d=this.retrieveChartOptionsThemeOverride(e,r,["axes",h,l].join("."));if(d!==void 0)for(const u of c)this.assignChartOptionsThemeOverride(o,s,["axes",u,l].join("."),d)}return o.theme.overrides}getRetainedChartThemeOverrideKeys(e,t){const r=["animation"],s=["zoom","navigator"],i=((n,o)=>{const l=new Array;return le(n)&&le(o)&&l.push(...s),l})(e,t);return[...r,...i]}getRetainedChartAxisThemeOverrideKeys(e,t,r){return le(t)&&le(r)?this.getRetainedCartesianAxisThemeOverrideKeys(e).map(i=>({expression:i,targetAxisTypes:Os})):[]}getRetainedCartesianAxisThemeOverrideKeys(e){const t=e==="xAxis"?["",".top",".bottom"]:e==="yAxis"?["",".left",".right"]:["",".left",".right",".top",".bottom"],r=["crosshair"],s=new Array;for(const i of r)for(const n of t)s.push(`${n}${i}`);return s}getChartOption(e){return Te(this.getChart(),e,void 0)}setChartThemeOverrides(e){const t=this.getChartType(),r=this.createChartOptions();for(const{expression:s,value:i}of e)this.assignChartOptionsThemeOverride(r,t,s,i);this.applyChartOptions(r)}applyChartOptions(e,t){if(Object.keys(e).length===0)return;this.updateChart(e),!t?.silent&&this.raiseChartOptionsChangedEvent()}awaitChartOptionUpdate(e){this.chartController.getChartProxy().getChart().waitForUpdate().then(()=>e()).catch(r=>console.error("AG Grid - chart update failed",r))}getAxisProperty(e){var t;return Te((t=this.getChart().axes)==null?void 0:t[0],e,void 0)}setAxisThemeOverrides(e){var t;const r=this.getChart(),s=this.getChartType();let i=this.createChartOptions();for(const{expression:n,value:o}of e){const l=(t=r.axes)==null?void 0:t.filter(c=>{const h=n.split(".");let d=c;for(const u of h){if(!(u in d))return!1;d=d[u]}return!0});if(l)for(const c of l)this.isValidAxisType(c)&&this.assignChartAxisThemeOverride(i,s,c.type,null,n,o)}this.applyChartOptions(i)}getCartesianAxisProperty(e,t){const r=this.getChartAxes(),s=this.getCartesianAxis(r,e);return Te(s,t,void 0)}getCartesianAxisThemeOverride(e,t){const r=this.getChartAxes(),s=this.getCartesianAxis(r,e);if(!s||!this.isValidAxisType(s))return;const i=this.getChartType(),n=this.getChart().getOptions();return this.retrieveChartAxisThemeOverride(n,i,s.type,e==="yAxis"?["left","right"]:["bottom","top"],t)}setCartesianAxisThemeOverrides(e,t){const r=this.getChartAxes(),s=this.getCartesianAxis(r,e);if(!s||!this.isValidAxisType(s))return;const i=this.getChartType();let n=this.createChartOptions();for(const{expression:o,value:l}of t)this.assignChartAxisThemeOverride(n,i,s.type,e==="yAxis"?["left","right"]:["bottom","top"],o,l);this.applyChartOptions(n)}setCartesianAxisOptions(e,t){const r=this.getChart().getOptions(),s="axes"in r?r.axes:void 0;if(!r||!s)return;const i=this.getChartAxes(),n=this.getCartesianAxis(i,e);if(!n)return;let o=this.createChartOptions();o.axes=s;const l=t.find(({expression:h})=>h==="type");if(l){const h=l.value,d=this.getRetainedCartesianAxisThemeOverrideKeys(e);for(const u of d){const g=this.getChartType(),m=this.retrieveChartOptionsThemeOverride(r,g,["axes",n.type,u].join("."));m!==void 0&&this.assignChartOptionsThemeOverride(o,g,["axes",h,u].join("."),m)}}const c=i.indexOf(n);for(const{expression:h,value:d}of t)this.assignChartOption(o,`axes.${c}.${h}`,d);this.applyChartOptions(o)}getCartesianAxis(e,t){if(!(e.length<2))switch(t){case"xAxis":return e[0].direction==="x"?e[0]:e[1];case"yAxis":return e[1].direction==="y"?e[1]:e[0]}}getSeriesOption(e,t,r){const s=this.getChart().series.find(i=>Di.isMatchingSeries(e,i));return Te(r?s:s?.properties.toJson(),t,void 0)}setSeriesOptions(e,t){let r=this.createChartOptions();for(const{expression:s,value:i}of t)this.assignChartOptionsSeriesThemeOverride(r,e,`series.${s}`,i);this.applyChartOptions(r)}getPairedMode(){return this.chartController.getChartProxy().isPaired()}setPairedMode(e){this.chartController.getChartProxy().setPaired(e)}getChartAxes(){var e;return(e=this.getChart().axes)!=null?e:[]}retrieveChartAxisThemeOverride(e,t,r,s,i){if(s)for(const n of s){const o=this.retrieveChartOptionsThemeOverride(e,t,["axes",r,n,...i?[i]:[]].join("."));if(o!==void 0)return o}else return this.retrieveChartOptionsThemeOverride(e,t,["axes",r,...i?[i]:[]].join("."))}assignChartAxisThemeOverride(e,t,r,s,i,n){if(s)for(const o of s)this.assignChartOptionsThemeOverride(e,t,["axes",r,o,...i?[i]:[]].join("."),n);else this.assignChartOptionsThemeOverride(e,t,["axes",r,...i?[i]:[]].join("."),n)}isValidAxisType(e){return rd.includes(e.type)}getChartType(){return this.chartController.getChartType()}getChart(){return this.chartController.getChartProxy().getChart()}updateChart(e){const t=this.chartController.getChartProxy().getChartRef();t.skipAnimations(),ed.updateDelta(t,e)}createChartOptions(){return{theme:{overrides:{}}}}retrieveChartOptionsThemeOverride(e,t,r){const s=this.getChartThemeOverridesSeriesTypeKeys(t);for(const i of s){const n=this.retrieveChartOptionsSeriesThemeOverride(e,i,r);if(n!==void 0)return n}}assignChartOptionsThemeOverride(e,t,r,s){const i=this.getChartThemeOverridesSeriesTypeKeys(t);for(const n of i)this.assignChartOptionsSeriesThemeOverride(e,n,r,s)}retrieveChartOptionsSeriesThemeOverride(e,t,r){return this.retrieveChartOption(e,["theme","overrides",t,...r?[r]:[]].join("."))}assignChartOptionsSeriesThemeOverride(e,t,r,s){this.assignChartOption(e,["theme","overrides",t,...r?[r]:[]].join("."),s)}getChartThemeOverridesSeriesTypeKeys(e){const t=this.chartController.getChartSeriesTypes(e);return this.chartController.isComboChart()&&t.push("common"),t}retrieveChartOption(e,t){return Te(e,t,void 0)}assignChartOption(e,t,r){Kn(e,t,r)}raiseChartOptionsChangedEvent(){const e=this.chartController.getChartModel(),t={type:Qh.EVENT_CHART_OPTIONS_CHANGED,chartId:e.chartId,chartType:e.chartType,chartThemeName:this.chartController.getChartThemeName(),chartOptions:e.chartOptions};this.eventService.dispatchEvent(t)}static isMatchingSeries(e,t){return Mn.includes(e)&&t.type===e}destroy(){super.destroy()}},sd=class extends ge{constructor(a){super(a)}getAxes(a){const e=a?a.fields:[],t=new Map(e.map(n=>[n.colId,n])),{primaryYKeys:r,secondaryYKeys:s}=this.getYKeys(e,a.seriesChartTypes),i=[{type:this.getXAxisType(a),position:"bottom"}];return r.length>0&&i.push({type:"number",keys:r,position:"left"}),s.length>0&&s.forEach(n=>{const o=t.get(n);if(!(o&&o.colId===n))return;const c={type:"number",keys:[n],position:"right"};i.push(c)}),i}getSeries(a){const{fields:e,seriesChartTypes:t}=a,[r]=a.categories;return e.map(s=>{const i=t.find(n=>n.colId===s.colId);if(i){const n=i.chartType,l=["groupedColumn","groupedBar"].includes(n)?{grouped:!0}:{};return T({type:j(n),xKey:r.id,yKey:s.colId,yName:s.displayName,stacked:["stackedArea","stackedColumn"].includes(n)},l)}})}getYKeys(a,e){const t=[],r=[];return a.forEach(s=>{const i=s.colId,n=e.find(o=>o.colId===i);n&&(n.secondaryAxis?r.push(i):t.push(i))}),{primaryYKeys:t,secondaryYKeys:r}}};import{Autowired as Ds,Bean as id,BeanStub as nd,_ as $t}from"@ag-grid-community/core";var jt=["chartSettings","chartData","chartFormat"],nt=["chartUnlink","chartLink","chartDownload"],Xt={settings:"chartSettings",data:"chartData",format:"chartFormat"},ot=class extends nd{isLegacyFormat(){var a;return(a=this.gridOptionsService.get("legacyChartsMenu"))!=null?a:!this.chartService.isEnterprise()}downloadChart(a,e,t,r){a.chartController.getChartProxy().downloadChart(e,t,r)}toggleLinked(a){a.chartController.detachChartRange()}openAdvancedSettings(a,e){this.advancedSettingsMenuFactory.showMenu(a,e)}hideAdvancedSettings(){this.advancedSettingsMenuFactory.hideMenu()}getToolbarOptionsAndPanels(a){var e,t,r;const s=this.isLegacyFormat(),i=!!this.gridOptionsService.get("chartToolPanelsDef")||!s;let n,o,l;if(i){const c=s?[a.isChartLinked()?"chartLink":"chartUnlink","chartDownload"]:["chartMenu"],h=this.gridOptionsService.getCallback("getChartToolbarItems");l=h?h({defaultItems:c}).filter(m=>{if(!(s?nt:[...nt,"chartMenu"]).includes(m)){let f;return jt.includes(m)?f=`'${m}' is a Chart Tool Panel option and will be ignored since 'chartToolPanelsDef' is used. Please use 'chartToolPanelsDef.panels' grid option instead`:m==="chartMenu"?f="'chartMenu' is only allowed as a Chart Toolbar Option when 'legacyChartsMenu' is set to false":f=`'${m}' is not a valid Chart Toolbar Option`,$t.warnOnce(f),!1}return!0}):c;const u=(t=(e=this.gridOptionsService.get("chartToolPanelsDef"))==null?void 0:e.panels)==null?void 0:t.map(m=>{const f=Xt[m];return f||$t.warnOnce(`Invalid panel in chartToolPanelsDef.panels: '${m}'`),f}).filter(m=>!!m);n=u||Object.values(Xt),a.isPivotChart()&&(n=n.filter(m=>m!=="chartData"));const g=(r=this.gridOptionsService.get("chartToolPanelsDef"))==null?void 0:r.defaultToolPanel;o=g&&Xt[g]||n[0],s&&(l=n.length>0?[n[0],...l]:l)}else{let c=["chartSettings","chartData","chartFormat",a.isChartLinked()?"chartLink":"chartUnlink","chartDownload"];const h=this.gridOptionsService.getCallback("getChartToolbarItems");if(h){const u=this.gridOptionsService.get("suppressChartToolPanelsButton");c=h({defaultItems:u?c:nt}).filter(m=>{if(!jt.includes(m)&&!nt.includes(m))return $t.warnOnce(`'${m}' is not a valid Chart Toolbar Option`),!1;if(!u&&jt.includes(m)){const f=`'${m}' is a Chart Tool Panel option and will be ignored. Please use 'chartToolPanelsDef.panels' grid option instead`;return $t.warnOnce(f),!1}return!0}),u||(c=c.concat(jt))}a.isPivotChart()&&(c=c.filter(u=>u!=="chartData"));const d=["chartUnlink","chartLink","chartDownload"];n=c.filter(u=>d.indexOf(u)===-1),o=n[0],l=c.filter(u=>d.indexOf(u)!==-1||n.length&&u===n[0])}return{panels:n,defaultPanel:o,chartToolbarOptions:l}}doesChartToolbarExist(a){const{chartToolbarOptions:e}=this.getToolbarOptionsAndPanels(a);return["chartMenu",...nt].some(t=>e.includes(t))}doChartToolPanelsExist(a){const{panels:e}=this.getToolbarOptionsAndPanels(a);return e.length>0}};p([Ds("chartService")],ot.prototype,"chartService",2),p([Ds("advancedSettingsMenuFactory")],ot.prototype,"advancedSettingsMenuFactory",2),ot=p([id("chartMenuService")],ot);var W=class Yr extends qi{constructor(e){super(Yr.TEMPLATE),this.params=e}init(){const e={chartId:this.params.chartId,pivotChart:this.params.pivotChart,chartType:Ge(this.params.chartType),chartThemeName:this.getThemeName(),switchCategorySeries:this.params.switchCategorySeries,aggFunc:this.params.aggFunc,cellRange:this.params.cellRange,suppressChartRanges:this.params.suppressChartRanges,unlinkChart:this.params.unlinkChart,crossFiltering:this.params.crossFiltering,seriesChartTypes:this.params.seriesChartTypes},t=this.gridOptionsService.get("enableRtl");this.addCssClass(t?"ag-rtl":"ag-ltr");const r=this.createBean(new J(e));this.chartController=this.createManagedBean(new Y(r)),this.chartOptionsService=this.createManagedBean(new ad(this.chartController)),this.validateCustomThemes(),this.createChart(),this.params.insideDialog&&this.addDialog(),this.addMenu(),this.addTitleEditComp(),this.addManagedListener(this.getGui(),"focusin",this.setActiveChartCellRange.bind(this)),this.addManagedListener(this.chartController,Y.EVENT_CHART_MODEL_UPDATE,this.update.bind(this)),this.addManagedPropertyListeners(["chartThemeOverrides","chartThemes"],this.reactivePropertyUpdate.bind(this)),this.update(),this.raiseChartCreatedEvent()}createChart(){let e;this.chartProxy&&(e=this.chartProxy.destroy({keepChartInstance:!0}));const t=(n,o)=>{const l=this.params.crossFilteringContext;l.lastSelectedChartId=o?"":this.chartController.getChartId(),o&&this.params.crossFilteringResetCallback(),this.crossFilterService.filter(n,o)},r=this.chartController.getChartType(),s={chartType:r,chartInstance:e,getChartThemeName:this.getChartThemeName.bind(this),getChartThemes:this.getChartThemes.bind(this),customChartThemes:this.gridOptionsService.get("customChartThemes"),getGridOptionsChartThemeOverrides:()=>this.getGridOptionsChartThemeOverrides(),getExtraPaddingDirections:()=>{var n,o;return(o=(n=this.chartMenu)==null?void 0:n.getExtraPaddingDirections())!=null?o:[]},apiChartThemeOverrides:this.params.chartThemeOverrides,crossFiltering:this.params.crossFiltering,crossFilterCallback:t,parentElement:this.eChart,grouping:this.chartController.isGrouping(),chartThemeToRestore:this.params.chartThemeName,chartOptionsToRestore:this.params.chartOptionsToRestore,chartPaletteToRestore:this.params.chartPaletteToRestore,seriesChartTypes:this.chartController.getSeriesChartTypes(),translate:n=>this.chartTranslationService.translate(n)};if(this.params.chartOptionsToRestore=void 0,this.chartType=r,this.chartProxy=Yr.createChartProxy(s),!this.chartProxy){console.warn("AG Grid: invalid chart type supplied: ",s.chartType);return}const i=this.eChart.querySelector("canvas");i&&i.classList.add("ag-charts-canvas"),this.chartController.setChartProxy(this.chartProxy),this.createMenuContext(),this.titleEdit&&this.titleEdit.refreshTitle(this.chartMenuContext)}createMenuContext(){if(this.chartMenuContext)return;const e=this.createManagedBean(new ke(this.chartOptionsService.getChartThemeOverridesProxy())),t=this.createManagedBean(new ke(this.chartOptionsService.getAxisThemeOverridesProxy()));this.chartMenuContext={chartController:this.chartController,chartOptionsService:this.chartOptionsService,chartMenuParamsFactory:e,chartAxisMenuParamsFactory:t}}getChartThemeName(){return this.chartController.getChartThemeName()}getChartThemes(){return this.chartController.getThemeNames()}getGridOptionsChartThemeOverrides(){return this.gridOptionsService.get("chartThemeOverrides")}static createChartProxy(e){switch(e.chartType){case"column":case"bar":case"groupedColumn":case"stackedColumn":case"normalizedColumn":case"groupedBar":case"stackedBar":case"normalizedBar":return new Eh(e);case"pie":case"donut":case"doughnut":return new Rh(e);case"area":case"stackedArea":case"normalizedArea":return new wh(e);case"line":return new Oh(e);case"scatter":case"bubble":return new Ih(e);case"histogram":return new _h(e);case"radarLine":case"radarArea":case"nightingale":case"radialColumn":case"radialBar":return new kh(e);case"rangeBar":return new xs(e);case"rangeArea":return new xs(e);case"boxPlot":return new Fh(e);case"treemap":return new zh(e);case"sunburst":return new Hh(e);case"heatmap":return new Xh(e);case"waterfall":return new Zh(e);case"columnLineCombo":case"areaColumnCombo":case"customCombo":return new sd(e);default:throw`AG Grid: Unable to create chart as an invalid chartType = '${e.chartType}' was supplied.`}}addDialog(){const e=this.chartTranslationService.translate(this.params.pivotChart?"pivotChartTitle":"rangeChartTitle"),{width:t,height:r}=this.getBestDialogSize();this.chartDialog=new Zr({resizable:!0,movable:!0,maximizable:!0,title:e,width:t,height:r,component:this,centered:!0,closable:!0}),this.getContext().createBean(this.chartDialog),this.chartDialog.addEventListener(Zr.EVENT_DESTROYED,()=>{this.destroy(),this.chartMenuService.hideAdvancedSettings()})}getBestDialogSize(){const e=this.popupService.getPopupParent(),t=oe.getAbsoluteWidth(e)*.75,r=oe.getAbsoluteHeight(e)*.75,s=.553,i=this.chartProxy.getChart();let n=this.params.insideDialog?850:i.width,o=this.params.insideDialog?470:i.height;return(n>t||o>r)&&(n=Math.min(n,t),o=Math.round(n*s),o>r&&(o=r,n=Math.min(n,Math.round(o/s)))),{width:n,height:o}}addMenu(){this.params.crossFiltering||(this.chartMenu=this.createBean(new Sh(this.eChartContainer,this.eMenuContainer,this.chartMenuContext)),this.eChartContainer.appendChild(this.chartMenu.getGui()))}addTitleEditComp(){this.titleEdit=this.createBean(new bh(this.chartMenu)),this.eTitleEditContainer.appendChild(this.titleEdit.getGui()),this.chartProxy&&this.titleEdit.refreshTitle(this.chartMenuContext)}update(e){if(e?.chartId&&!this.chartController.update(e))return;const t=this.chartTypeChanged(e),r=t||this.chartEmpty?(i=>{const n=this.chartType,o=i,l=this.chartProxy.getChart(),c=l?.getOptions(),h=l?.axes;return this.chartOptionsService.getPersistedChartThemeOverrides(c,h,n,o??n)})(t):void 0;t&&this.createChart();const s=r&&e?.chartThemeOverrides?De(r,e.chartThemeOverrides):r||e?.chartThemeOverrides;this.updateChart(s),e?.chartId&&this.chartProxy.getChart().waitForUpdate().then(()=>{this.chartController.raiseChartApiUpdateEvent()})}updateChart(e){const{chartProxy:t}=this,s=this.chartController.getSelectedValueColState().map(l=>({colId:l.colId,displayName:l.displayName})),i=this.chartController.getChartData(),n=this.handleEmptyChart(i,s);if(this.chartEmpty=n,n){e&&this.chartController.updateThemeOverrides(e);return}let o=this.chartController.getChartUpdateParams(e);t.update(o),this.chartProxy.getChart().waitForUpdate().then(()=>{this.chartController.raiseChartUpdatedEvent()}),this.titleEdit.refreshTitle(this.chartMenuContext)}chartTypeChanged(e){const[t,r]=[this.chartController.getChartType(),e?.chartType],s=r?Ge(r):void 0;return this.chartType!==t?s??t:s&&t!==s?s:null}getChartModel(){return this.chartController.getChartModel()}getChartImageDataURL(e){return this.chartProxy.getChartImageDataURL(e)}handleEmptyChart(e,t){const r=this.chartController.isPivotChart()&&!this.chartController.isPivotMode(),s=this.chartController.getChartType();let i=1;this.chartController.isActiveXYChart()?i=s==="bubble"?3:2:Se(s)&&(i=0);const n=t.length<i||e.length===0;if(this.eChart){const o=r||n;oe.setDisplayed(this.eChart,!o),oe.setDisplayed(this.eEmpty,o)}return r?(this.eEmpty.innerText=this.chartTranslationService.translate("pivotChartRequiresPivotMode"),!0):n?(this.eEmpty.innerText=this.chartTranslationService.translate("noDataToChart"),!0):!1}downloadChart(e,t,r){this.chartProxy.downloadChart(e,t,r)}openChartToolPanel(e){const t=e&&Xt[e];this.chartMenu.showMenu({panel:t})}closeChartToolPanel(){this.chartMenu.hideMenu()}getChartId(){return this.chartController.getChartId()}getUnderlyingChart(){return this.chartProxy.getChartRef()}crossFilteringReset(){this.chartProxy.crossFilteringReset()}setActiveChartCellRange(e){this.getGui().contains(e.relatedTarget)||(this.chartController.setChartRange(!0),this.focusService.clearFocusedCell())}getThemeName(){const e=this.gridOptionsService.get("chartThemes")||Ca;if(e.length===0)throw new Error("Cannot create chart: no chart themes available.");const{chartThemeName:t}=this.params;return oe.includes(e,t)?t:e[0]}getAllKeysInObjects(e){const t={};return e.filter(r=>r!=null).forEach(r=>{Object.keys(r).forEach(s=>t[s]=null)}),Object.keys(t)}validateCustomThemes(){const e=this.getChartThemes(),t=this.gridOptionsService.get("customChartThemes");t&&this.getAllKeysInObjects([t]).forEach(r=>{oe.includes(e,r)||console.warn("AG Grid: a custom chart theme with the name '"+r+"' has been supplied but not added to the 'chartThemes' list")})}reactivePropertyUpdate(){this.chartController.setChartThemeName(this.getThemeName(),!0);const e=this.getChartId(),t=this.chartController.isCrossFilterChart()?"crossFilter":this.getChartModel().modelType,r=this.gridOptionsService.get("chartThemeOverrides")||{};this.update({type:`${t}ChartUpdate`,chartId:e,chartThemeOverrides:r})}raiseChartCreatedEvent(){const e={type:Jr.EVENT_CHART_CREATED,chartId:this.chartController.getChartId()};this.chartProxy.getChart().waitForUpdate().then(()=>{this.eventService.dispatchEvent(e)})}raiseChartDestroyedEvent(){const e={type:Jr.EVENT_CHART_DESTROYED,chartId:this.chartController.getChartId()};this.eventService.dispatchEvent(e)}destroy(){var e;super.destroy(),this.chartProxy&&this.chartProxy.destroy(),this.destroyBean(this.chartMenu),this.destroyBean(this.titleEdit),this.chartDialog&&this.chartDialog.isAlive()&&this.destroyBean(this.chartDialog),(e=this.onDestroyColorSchemeChangeListener)==null||e.call(this);const t=this.getGui();oe.clearElement(t),oe.removeFromParent(t),this.raiseChartDestroyedEvent()}};W.TEMPLATE=`<div class="ag-chart" tabindex="-1">
            <div ref="eChartContainer" tabindex="-1" class="ag-chart-components-wrapper">
                <div ref="eChart" class="ag-chart-canvas-wrapper"></div>
                <div ref="eEmpty" class="ag-chart-empty-text ag-unselectable"></div>
            </div>
            <div ref="eTitleEditContainer"></div>
            <div ref="eMenuContainer" class="ag-chart-docked-container" style="min-width: 0px;"></div>
        </div>`,p([Ie("eChart")],W.prototype,"eChart",2),p([Ie("eChartContainer")],W.prototype,"eChartContainer",2),p([Ie("eMenuContainer")],W.prototype,"eMenuContainer",2),p([Ie("eEmpty")],W.prototype,"eEmpty",2),p([Ie("eTitleEditContainer")],W.prototype,"eTitleEditContainer",2),p([Re("chartCrossFilterService")],W.prototype,"crossFilterService",2),p([Re("chartTranslationService")],W.prototype,"chartTranslationService",2),p([Re("chartMenuService")],W.prototype,"chartMenuService",2),p([Re("focusService")],W.prototype,"focusService",2),p([Re("popupService")],W.prototype,"popupService",2),p([Zi],W.prototype,"init",1);var ks=W,lt="31.2.0",ct=!1;function od(a){const e=a.version;return a.version==null&&(a.version=Sd(a)),a=N("23.0.0",a,ld),a=N("24.0.0",a,cd),a=N("25.1.0",a,hd),a=N("26.0.0",a,dd),a=N("26.1.0",a,ud),a=N("26.2.0",a,pd),a=N("28.0.0",a,gd),a=N("28.2.0",a,md),a=N("29.0.0",a,Cd),a=N("29.1.0",a,Ls),a=N("29.2.0",a,Rs),a=N("30.0.0",a,fd),a=N("31.0.0",a,vd),a=yd(a),a=N(lt,a,t=>t),ct&&e!==a.version&&console.log("AG Grid: ChartModel migration complete",{model:a}),a}function ld(a){return a=V("chartOptions.legend.item.marker.type","shape",a),a=V("chartOptions.seriesDefaults.marker.type","shape",a),a=V("chartOptions.legend.padding","spacing",a),a}function cd(a){var e;a=F("chartOptions.seriesDefaults.marker.minSize",a);const t=a,{chartType:r,chartPalette:s,chartOptions:i}=t,n=i,{xAxis:o,yAxis:l}=n,c=ne(n,["xAxis","yAxis"]),h=ne(t,["chartType","chartPalette","chartOptions"]),d=Fn(r),u=d?.map((m,f)=>T({type:m},f===0?o:l));return T({chartType:r,chartThemeName:(e={borneo:"ag-default",material:"ag-material",bright:"ag-vivid"}[s])!=null?e:"ag-default",chartOptions:A(T({},c),{axes:u,xAxis:o,yAxis:l})},h)}function hd(a){return a=V("chartOptions.seriesDefaults.label.minRequiredAngle","minAngle",a),a}function dd(a){return a=se("chartOptions.seriesDefaults.highlightStyle",a,t=>{var r=t,{dimOpacity:s}=r,i=ne(r,["dimOpacity"]);return T(T({},i),s!=null?{series:{dimOpacity:s}}:{})}),a=F("chart",a),a=F("chartOptions.seriesDefaults.tooltipClass",a),a=F("chartOptions.seriesDefaults.tooltipTracking",a),a=_s("chartOptions.axes[].label.rotation",0,a),a=_s("chartOptions.axes[].label.rotation",335,a),a}function ud(a){const e=t=>{var r=t,{item:s,series:i}=r,n=ne(r,["item","series"]);return T({item:T(T({},n),s)},i?{series:i}:{})};return a=se("chartOptions.seriesDefaults.highlightStyle",a,e),a=se("chartOptions.series[].highlightStyle",a,e),a}function pd(a){a=qt("chartOptions.seriesDefaults.fill.opacity","chartOptions.seriesDefaults.fillOpacity",a),a=qt("chartOptions.seriesDefaults.stroke.opacity","chartOptions.seriesDefaults.strokeOpacity",a),a=qt("chartOptions.seriesDefaults.stroke.width","chartOptions.seriesDefaults.strokeWidth",a),a=F("chartOptions.seriesDefaults.fill",a),a=F("chartOptions.seriesDefaults.stroke",a),a=F("chartOptions.seriesDefaults.callout.colors",a),a=F("chartOptions.xAxis",a),a=F("chartOptions.yAxis",a);const e=a,{chartType:t,chartOptions:r}=e,s=r,{axes:i,series:n,seriesDefaults:o}=s,l=ne(s,["axes","series","seriesDefaults"]),c=ne(e,["chartType","chartOptions"]),h=Ge(t),d=j(h),u=[d],g={};if(!lr(d)){const f={top:{},bottom:{},left:{},right:{}},C=i.map(v=>{var y=v,{type:S}=y,P=ne(y,["type"]);return{[S]:T(T({},f),P)}}).reduce(Gs,{});ha.filter(v=>C[v]==null).forEach(v=>{C[v]=T({},f)}),g.axes=C}const m=u.map(f=>({[f]:T(A(T({},g),{series:o}),l)})).reduce(Gs,{});return a=A(T({},c),{chartType:h,chartOptions:m}),a}function gd(a){return a=F("chartOptions.*.title.padding",a),a=F("chartOptions.*.subtitle.padding",a),a=F("chartOptions.*.axes.*.title.padding",a),a=Nr("chartOptions.*.axes.*.title.enabled",!1,a),a}function md(a){return a=V("chartOptions.pie.series.callout","calloutLine",a),a=V("chartOptions.pie.series.label","calloutLabel",a),a=V("chartOptions.pie.series.labelKey","sectorLabelKey",a),a=V("chartOptions.pie.series.labelName","sectorLabelName",a),a=V("chartOptions.donut.series.callout","calloutLine",a),a=V("chartOptions.donut.series.label","calloutLabel",a),a=V("chartOptions.donut.series.labelKey","sectorLabelKey",a),a=V("chartOptions.donut.series.labelName","sectorLabelName",a),a}function Cd(a){return a=ht("chartOptions.scatter.series.fill","chartOptions.scatter.series.marker.fill",a),a=ht("chartOptions.scatter.series.fillOpacity","chartOptions.scatter.series.marker.fillOpacity",a),a=ht("chartOptions.scatter.series.stroke","chartOptions.scatter.series.marker.stroke",a),a=ht("chartOptions.scatter.series.strokeOpacity","chartOptions.scatter.series.marker.strokeOpacity",a),a=ht("chartOptions.scatter.series.strokeWidth","chartOptions.scatter.series.marker.strokeWidth",a),a=qt("chartOptions.scatter.series.paired","chartOptions.scatter.paired",a),a}function Ls(a){return a=F("chartOptions.axes[].tick.count",a),a}function Rs(a){return a=se("chartOptions.*.tooltip",a,t=>{var r=t,{tracking:s}=r,i=ne(r,["tracking"]),n,o,l,c;const h=T({},i);return s===!1?((n=h.position)!=null||(h.position={type:"pointer"}),(o=h.range)!=null||(h.range="nearest")):s===!0&&((l=h.position)!=null||(h.position={type:"node"}),(c=h.range)!=null||(h.range="nearest")),h}),a}function fd(a){return a=V("chartOptions.pie.series.labelKey","sectorLabelKey",a),a=V("chartOptions.pie.series.labelName","sectorLabelName",a),a=Ls(a),a=Rs(a),a=F("chartOptions.*.series.flipXY",a),a=Fs("chartOptions.common.legend.enabled",!0,a),a=Nr("chartOptions.common.legend.position","right",a),a}function vd(a){const e={"ag-pastel":"ag-sheets","ag-solar":"ag-polychroma"},t=V("chartOptions.column","bar",a),r=e[t.chartThemeName]||t.chartThemeName;return A(T({},t),{chartThemeName:r})}function yd(a){return a=F("chartOptions.*.width",a),a=F("chartOptions.*.height",a),a=Nr("chartOptions.*.axes.category.label.autoRotate",!0,a),a}function Sd(a){var e,t;const r=a;if(a.version!=null)return a.version;const s=(d,...u)=>Object.keys(d||{}).some(g=>u.includes(g)),i=r.chartOptions,n=s(i,"seriesDefaults")?i?.seriesDefaults:i?.[Object.keys(i)[0]],o={"27.0.0":s(r,"seriesChartTypes"),"26.2.0":!s(i,"seriesDefaults"),"26.1.0":s(n?.highlightStyle,"item"),"26.0.0":s(n?.highlightStyle,"series"),"25.1.0":s(n?.label,"minAngle"),"25.0.0":s(r,"modelType","aggFunc","unlinkChart","suppressChartRanges")||s(n,"lineDash","lineDashOffset"),"24.0.0":s(r,"chartThemeName","chart")||s(i,"series"),"23.2.0":s(i,"navigator"),"23.0.0":s((t=(e=i?.legend)==null?void 0:e.item)==null?void 0:t.marker,"shape"),"22.1.0":s(r,"chartPalette","chartType")},l="27.1.0",c=Object.entries(o).filter(([d,u])=>u);ct&&console.log("AG Grid: ChartModel migration",{heuristicVersionCandidates:c});const[h=l]=c[0];return ct&&console.log("AG Grid: ChartModel migration",{heuristicVersion:h}),h}function N(a,e,t){if(Is(a)>Is(e.version)){ct&&console.log("AG Grid: ChartModel migration",{migratingTo:a});const r=t(e);return r.version=a,ct&&console.log("AG Grid: ChartModel migration",{migratedTo:a,result:r}),r}return e}function Td(a){const e=typeof a=="string"?a.split(".").map(t=>Number(t)):[];if(e.length!==3||e.some(t=>isNaN(t)))throw new Error("AG Grid - Illegal version string: "+a);return{major:e[0],minor:e[1],patch:e[2]}}function Is(a){const{major:e,minor:t,patch:r}=Td(a);return e*1e4+t*100+r}function _s(a,e,t){return me(a,!0,t,(r,s)=>{r[s]===e&&delete r[s]})}function Nr(a,e,t){return me(a,!1,t,(r,s)=>{r[s]==null&&(r[s]=e)})}function Fs(a,e,t){var r;typeof a=="string"&&(a=a.split("."));const s=a[0];return a.length>1&&(t[s]=Fs(a.slice(1),e,(r=t[s])!=null?r:{})),Object.keys(t).includes(s)||(t[s]=e),t}function qt(a,e,t){let r,s=!1;return t=me(a,!0,t,(i,n)=>{s=!0,r=i[n],delete i[n]}),s?me(e,!1,t,(i,n)=>{i[n]=r}):t}function ht(a,e,t){let r,s=!1;return t=me(a,!0,t,(i,n)=>{s=!0,r=i[n],delete i[n]}),s?me(e,!1,t,(i,n)=>{i[n]===void 0&&(i[n]=r)}):t}function V(a,e,t){return me(a,!0,t,(r,s)=>{r[e]=r[s],delete r[s]})}function F(a,e){return me(a,!0,e,(t,r)=>delete t[r])}function me(a,e,t,r){const s=a instanceof Array?a:a.split("."),i=s.slice(0,s.length-1),n=s[s.length-1];return se(i,t,o=>{const l=Object.keys(o).includes(n);if(e&&!l)return o;const c=T({},o);return r(c,n),c})}function se(a,e,t){const r=a instanceof Array?a:a.split(".");if(e=T({},e),r.length===0)return t(e);if(r[0].startsWith("{")){const s=r[0].substring(1,r[0].lastIndexOf("}")).split(",");for(const i of s)e[i]!=null&&(e[i]=se(r.slice(1),e[i],t))}else if(r[0].endsWith("[]")){const s=r[0].substring(0,a[0].indexOf("["));e[s]instanceof Array&&(e[s]=e[s].map(i=>se(r.slice(1),i,t)))}else if(r[0]==="*")for(const s in e)e[s]=se(r.slice(1),e[s],t);else e[r[0]]!=null&&(e[r[0]]=se(r.slice(1),e[r[0]],t));return e}var Gs=(a,e)=>T(T({},a),e),Ce=class extends Yi{constructor(){super(...arguments),this.activeCharts=new Set,this.activeChartComps=new Set,this.crossFilteringContext={lastSelectedChartId:""},this.isEnterprise=()=>Xi.enterpriseModule.isEnterprise}updateChart(a){const e=a.chartType;if(e&&na(e)&&!this.isEnterprise()){qr.__warnEnterpriseChartDisabled(e);return}if(this.activeChartComps.size===0){console.warn("AG Grid - No active charts to update.");return}const t=[...this.activeChartComps].find(r=>r.getChartId()===a.chartId);if(!t){console.warn(`AG Grid - Unable to update chart. No active chart found with ID: ${a.chartId}.`);return}t.update(a)}getChartModels(){const a=[],e=t=>A(T({},t),{version:lt});return this.activeChartComps.forEach(t=>a.push(e(t.getChartModel()))),a}getChartRef(a){let e;return this.activeCharts.forEach(t=>{t.chartId===a&&(e=t)}),e}getChartComp(a){let e;return this.activeChartComps.forEach(t=>{t.getChartId()===a&&(e=t)}),e}getChartImageDataURL(a){let e;return this.activeChartComps.forEach(t=>{t.getChartId()===a.chartId&&(e=t.getChartImageDataURL(a.fileFormat))}),e}downloadChart(a){const e=Array.from(this.activeChartComps).find(t=>t.getChartId()===a.chartId);e?.downloadChart(a.dimensions,a.fileName,a.fileFormat)}openChartToolPanel(a){const e=Array.from(this.activeChartComps).find(t=>t.getChartId()===a.chartId);e?.openChartToolPanel(a.panel)}closeChartToolPanel(a){const e=Array.from(this.activeChartComps).find(t=>t.getChartId()===a);e?.closeChartToolPanel()}createChartFromCurrentRange(a="groupedColumn"){const e=this.getSelectedRange();return this.createChart(e,a)}restoreChart(a,e){if(!a){console.warn("AG Grid - unable to restore chart as no chart model is provided");return}a.version!==lt&&(a=od(a));const t={cellRange:a.cellRange,chartType:a.chartType,chartThemeName:a.chartThemeName,chartContainer:e,suppressChartRanges:a.suppressChartRanges,switchCategorySeries:a.switchCategorySeries,aggFunc:a.aggFunc,unlinkChart:a.unlinkChart,seriesChartTypes:a.seriesChartTypes},r=i=>this.rangeService?this.rangeService.createCellRangeFromCellRangeParams(i):void 0;if(a.modelType==="pivot"){this.gridOptionsService.updateGridOptions({options:{pivotMode:!0},source:"pivotChart"});const n={rowStartIndex:null,rowStartPinned:void 0,rowEndIndex:null,rowEndPinned:void 0,columns:this.columnModel.getAllDisplayedColumns().map(l=>l.getColId())},o=r(n);if(!o){console.warn("AG Grid - unable to create chart as there are no columns in the grid.");return}return this.createChart(o,t.chartType,t.chartThemeName,!0,!0,t.chartContainer,!1,void 0,void 0,t.unlinkChart,!1,a.chartOptions)}const s=r(t.cellRange);if(!s){console.warn("AG Grid - unable to create chart as no range is selected");return}return this.createChart(s,t.chartType,t.chartThemeName,!1,t.suppressChartRanges,t.chartContainer,t.switchCategorySeries,t.aggFunc,void 0,t.unlinkChart,!1,a.chartOptions,a.chartPalette,t.seriesChartTypes)}createRangeChart(a){var e;const t=(e=this.rangeService)==null?void 0:e.createCellRangeFromCellRangeParams(a.cellRange);if(!t){console.warn("AG Grid - unable to create chart as no range is selected");return}return this.createChart(t,a.chartType,a.chartThemeName,!1,a.suppressChartRanges,a.chartContainer,a.switchCategorySeries,a.aggFunc,a.chartThemeOverrides,a.unlinkChart,void 0,void 0,void 0,a.seriesChartTypes)}createPivotChart(a){this.gridOptionsService.updateGridOptions({options:{pivotMode:!0},source:"pivotChart"});const e={rowStartIndex:null,rowStartPinned:void 0,rowEndIndex:null,rowEndPinned:void 0,columns:this.columnModel.getAllDisplayedColumns().map(r=>r.getColId())},t=this.rangeService?this.rangeService.createCellRangeFromCellRangeParams(e):void 0;if(!t){console.warn("AG Grid - unable to create chart as there are no columns in the grid.");return}return this.createChart(t,a.chartType,a.chartThemeName,!0,!0,a.chartContainer,!1,void 0,a.chartThemeOverrides,a.unlinkChart)}createCrossFilterChart(a){var e;const t=(e=this.rangeService)==null?void 0:e.createCellRangeFromCellRangeParams(a.cellRange);if(!t){console.warn("AG Grid - unable to create chart as no range is selected");return}const r=!0,i=typeof a.suppressChartRanges<"u"&&a.suppressChartRanges!==null?a.suppressChartRanges:!0;return this.createChart(t,a.chartType,a.chartThemeName,!1,i,a.chartContainer,!1,a.aggFunc,a.chartThemeOverrides,a.unlinkChart,r)}createChart(a,e,t,r=!1,s=!1,i,n=!1,o,l,c=!1,h=!1,d,u,g){if(na(e)&&!this.isEnterprise()){qr.__warnEnterpriseChartDisabled(e);return}const m=this.gridOptionsService.getCallback("createChartContainer"),f={chartId:this.generateId(),pivotChart:r,cellRange:a,chartType:Ge(e),chartThemeName:t,insideDialog:!(i||m),suppressChartRanges:s,switchCategorySeries:n,aggFunc:o,chartThemeOverrides:l,unlinkChart:c,crossFiltering:h,crossFilteringContext:this.crossFilteringContext,chartOptionsToRestore:d,chartPaletteToRestore:u,seriesChartTypes:g,crossFilteringResetCallback:()=>this.activeChartComps.forEach(y=>y.crossFilteringReset())},C=new ks(f);this.context.createBean(C);const v=this.createChartRef(C);if(i){i.appendChild(C.getGui());const y=this.environment.getTheme();y.el&&!y.el.contains(i)&&i.classList.add(y.theme)}else m?m(v):C.addEventListener(ks.EVENT_DESTROYED,()=>{this.activeChartComps.delete(C),this.activeCharts.delete(v)});return v}createChartRef(a){const e={destroyChart:()=>{this.activeCharts.has(e)&&(this.context.destroyBean(a),this.activeChartComps.delete(a),this.activeCharts.delete(e))},chartElement:a.getGui(),chart:a.getUnderlyingChart(),chartId:a.getChartModel().chartId};return this.activeCharts.add(e),this.activeChartComps.add(a),e}getSelectedRange(){const a=this.rangeService.getCellRanges();return a.length>0?a[0]:{}}generateId(){return`id-${Math.random().toString(36).substring(2,18)}`}destroyAllActiveCharts(){this.activeCharts.forEach(a=>a.destroyChart())}};Ce.CHARTS_VERSION=ji,p([Ki("rangeService")],Ce.prototype,"rangeService",2),p([Hi("columnModel")],Ce.prototype,"columnModel",2),p([$i],Ce.prototype,"destroyAllActiveCharts",1),Ce=p([Wi("chartService")],Ce);import{Bean as Pd,BeanStub as bd}from"@ag-grid-community/core";var dt=class extends bd{translate(a){const e=this.localeService.getLocaleTextFunc(),t=dt.DEFAULT_TRANSLATIONS[a];return e(a,t)}};dt.DEFAULT_TRANSLATIONS={pivotChartTitle:"Pivot Chart",rangeChartTitle:"Range Chart",settings:"Chart",data:"Data",format:"Format",categories:"Categories",defaultCategory:"(None)",series:"Series",switchCategorySeries:"Switch Category / Series",categoryValues:"Category Values",seriesLabels:"Series Labels",aggregate:"Aggregate",xyValues:"X Y Values",paired:"Paired Mode",axis:"Axis",xAxis:"Horizontal Axis",yAxis:"Vertical Axis",polarAxis:"Polar Axis",radiusAxis:"Radius Axis",navigator:"Navigator",zoom:"Zoom",animation:"Animation",crosshair:"Crosshair",color:"Color",thickness:"Thickness",preferredLength:"Preferred Length",xType:"X Type",axisType:"Axis Type",automatic:"Automatic",category:"Category",number:"Number",time:"Time",timeFormat:"Time Format",autoRotate:"Auto Rotate",labelRotation:"Rotation",circle:"Circle",orientation:"Orientation",polygon:"Polygon",fixed:"Fixed",parallel:"Parallel",perpendicular:"Perpendicular",radiusAxisPosition:"Position",ticks:"Ticks",gridLines:"Grid Lines",width:"Width",height:"Height",length:"Length",padding:"Padding",spacing:"Spacing",chart:"Chart",title:"Title",titlePlaceholder:"Chart title - double click to edit",background:"Background",font:"Font",top:"Top",right:"Right",bottom:"Bottom",left:"Left",labels:"Labels",calloutLabels:"Callout Labels",sectorLabels:"Sector Labels",positionRatio:"Position Ratio",size:"Size",shape:"Shape",minSize:"Minimum Size",maxSize:"Maximum Size",legend:"Legend",position:"Position",markerSize:"Marker Size",markerStroke:"Marker Stroke",markerPadding:"Marker Padding",itemSpacing:"Item Spacing",itemPaddingX:"Item Padding X",itemPaddingY:"Item Padding Y",layoutHorizontalSpacing:"Horizontal Spacing",layoutVerticalSpacing:"Vertical Spacing",strokeWidth:"Stroke Width",offset:"Offset",offsets:"Offsets",tooltips:"Tooltips",callout:"Callout",markers:"Markers",shadow:"Shadow",blur:"Blur",xOffset:"X Offset",yOffset:"Y Offset",lineWidth:"Line Width",lineDash:"Line Dash",lineDashOffset:"Dash Offset",scrollingZoom:"Scrolling",scrollingStep:"Scrolling Step",selectingZoom:"Selecting",durationMillis:"Duration (ms)",crosshairLabel:"Label",crosshairSnap:"Snap to Node",normal:"Normal",bold:"Bold",italic:"Italic",boldItalic:"Bold Italic",predefined:"Predefined",fillOpacity:"Fill Opacity",strokeColor:"Line Color",strokeOpacity:"Line Opacity",miniChart:"Mini-Chart",histogramBinCount:"Bin count",connectorLine:"Connector Line",seriesItems:"Series Items",seriesItemType:"Item Type",seriesItemPositive:"Positive",seriesItemNegative:"Negative",seriesItemLabels:"Item Labels",columnGroup:"Column",barGroup:"Bar",pieGroup:"Pie",lineGroup:"Line",scatterGroup:"X Y (Scatter)",areaGroup:"Area",polarGroup:"Polar",statisticalGroup:"Statistical",hierarchicalGroup:"Hierarchical",specializedGroup:"Specialized",combinationGroup:"Combination",groupedColumnTooltip:"Grouped",stackedColumnTooltip:"Stacked",normalizedColumnTooltip:"100% Stacked",groupedBarTooltip:"Grouped",stackedBarTooltip:"Stacked",normalizedBarTooltip:"100% Stacked",pieTooltip:"Pie",donutTooltip:"Donut",lineTooltip:"Line",groupedAreaTooltip:"Area",stackedAreaTooltip:"Stacked",normalizedAreaTooltip:"100% Stacked",scatterTooltip:"Scatter",bubbleTooltip:"Bubble",histogramTooltip:"Histogram",radialColumnTooltip:"Radial Column",radialBarTooltip:"Radial Bar",radarLineTooltip:"Radar Line",radarAreaTooltip:"Radar Area",nightingaleTooltip:"Nightingale",rangeBarTooltip:"Range Bar",rangeAreaTooltip:"Range Area",boxPlotTooltip:"Box Plot",treemapTooltip:"Treemap",sunburstTooltip:"Sunburst",heatmapTooltip:"Heatmap",waterfallTooltip:"Waterfall",columnLineComboTooltip:"Column & Line",areaColumnComboTooltip:"Area & Column",customComboTooltip:"Custom Combination",innerRadius:"Inner Radius",startAngle:"Start Angle",endAngle:"End Angle",reverseDirection:"Reverse Direction",groupPadding:"Group Padding",seriesPadding:"Series Padding",group:"Group",tile:"Tile",whisker:"Whisker",cap:"Cap",capLengthRatio:"Length Ratio",labelPlacement:"Placement",inside:"Inside",outside:"Outside",noDataToChart:"No data available to be charted.",pivotChartRequiresPivotMode:"Pivot Chart requires Pivot Mode enabled.",chartSettingsToolbarTooltip:"Menu",chartLinkToolbarTooltip:"Linked to Grid",chartUnlinkToolbarTooltip:"Unlinked from Grid",chartDownloadToolbarTooltip:"Download Chart",chartMenuToolbarTooltip:"Menu",chartEdit:"Edit Chart",chartAdvancedSettings:"Advanced Settings",chartLink:"Link to Grid",chartUnlink:"Unlink from Grid",chartDownload:"Download Chart",histogramFrequency:"Frequency",seriesChartType:"Series Chart Type",seriesType:"Series Type",secondaryAxis:"Secondary Axis",seriesAdd:"Add a series",categoryAdd:"Add a category",area:"Area",bar:"Bar",column:"Column",line:"Line",scatter:"Scatter",histogram:"Histogram",radialColumn:"Radial Column",radialBar:"Radial Bar",radarLine:"Radar Line",radarArea:"Radar Area",nightingale:"Nightingale",rangeBar:"Range Bar",rangeArea:"Range Area",treemap:"Treemap",sunburst:"Sunburst",waterfall:"Waterfall",boxPlot:"Box Plot",pie:"Pie",donut:"Donut",stackedArea:"StackedArea",groupedColumn:"Grouped Column",stackedColumn:"Stacked Column",advancedSettings:"Advanced Settings",ariaChartMenuClose:"Close Chart Edit Menu",timeFormatSlashesDDMMYYYY:"DD/MM/YYYY",timeFormatSlashesMMDDYYYY:"MM/DD/YYYY",timeFormatSlashesDDMMYY:"DD/MM/YY",timeFormatSlashesMMDDYY:"MM/DD/YY",timeFormatDotsDDMYY:"DD.M.YY",timeFormatDotsMDDYY:"M.DD.YY",timeFormatDashesYYYYMMDD:"YYYY-MM-DD",timeFormatSpacesDDMMMMYYYY:"DD MMMM YYYY",timeFormatHHMMSS:"HH:MM:SS",timeFormatHHMMSSAmPm:"HH:MM:SS AM/PM",sum:"Sum",first:"First",last:"Last",min:"Min",max:"Max",count:"Count",avg:"Average"},dt=p([Pd("chartTranslationService")],dt);import{_ as Vs,Autowired as Br,Bean as Ad,BeanStub as xd}from"@ag-grid-community/core";var fe=class extends xd{filter(a,e=!1){const t=this.gridApi.getFilterModel();if(e){this.resetFilters(t);return}let r=fe.extractFilterColId(a);this.isValidColumnFilter(r)?this.updateFilters(t,a,r):console.warn("AG Grid: cross filtering requires a 'agSetColumnFilter' or 'agMultiColumnFilter' to be defined on the column with id: '"+r+"'")}resetFilters(a){Object.keys(a).length>0&&(this.gridApi.setFilterModel(null),this.gridApi.onFilterChanged())}updateFilters(a,e,t){let r=fe.extractFilterColId(e),s=e.datum[r];if(s===void 0)return;let i=s.toString();if(e.event.metaKey||e.event.ctrlKey){const n=this.getCurrentGridValuesForCategory(t),o=Vs.includes(n,i);let l;o?l=n.filter(c=>c!==i):(l=n,l.push(i)),a[t]=this.getUpdatedFilterModel(t,l)}else{const n=[i];a={[t]:this.getUpdatedFilterModel(t,n)}}this.gridApi.setFilterModel(a)}getUpdatedFilterModel(a,e){return this.getColumnFilterType(a)==="agMultiColumnFilter"?{filterType:"multi",filterModels:[null,{filterType:"set",values:e}]}:{filterType:"set",values:e}}getCurrentGridValuesForCategory(a){let e=[];const t=this.getColumnById(a);return this.gridApi.forEachNodeAfterFilter(r=>{if(t&&!r.group){const s=this.valueService.getValue(t,r)+"";e.includes(s)||e.push(s)}}),e}static extractFilterColId(a){return a.xKey||a.calloutLabelKey}isValidColumnFilter(a){a.indexOf("-filtered-out")&&(a=a.replace("-filtered-out",""));let e=this.getColumnFilterType(a);return typeof e=="boolean"?e:Vs.includes(["agSetColumnFilter","agMultiColumnFilter"],e)}getColumnFilterType(a){let e=this.getColumnById(a);if(e)return e.getColDef().filter}getColumnById(a){return this.columnModel.getGridColumn(a)}};p([Br("gridApi")],fe.prototype,"gridApi",2),p([Br("columnModel")],fe.prototype,"columnModel",2),p([Br("valueService")],fe.prototype,"valueService",2),fe=p([Ad("chartCrossFilterService")],fe);var Ns=28,Bs=6;function Ur(a){return a&&a.match(/\d+\.\d+\.\d+/)}function Md({gridMajorVersion:a,chartsMajorVersion:e}){const t=parseInt(a,10),r=parseInt(e,10),s=t-Ns,i=r-Bs,n=s>=0;return s===i&&n}function Ed(a){if(!a||!Ur(a))return;const[e,t]=a.split(".")||[],r=`${e}.${t}.x`,i=parseInt(e,10)-Ns+Bs;if(i<0)return;const o=`${i}.${t}.x`;return{gridMajorMinor:r,chartsMajorMinor:o}}function Zt({type:a,gridVersion:e,chartsVersion:t}){const r="AG Grid: AG Grid version is incompatible. Please see https://www.ag-grid.com/javascript-data-grid/modules/ for more information.";if(!e)return r;const s=Ed(e);if(!s)return r;const{gridMajorMinor:i,chartsMajorMinor:n}=s;return a==="incompatible"?`AG Grid version ${e} and AG Charts version ${t} is not supported. AG Grid version ${i} should be used with AG Chart ${n}. Please see https://www.ag-grid.com/javascript-data-grid/modules/ for more information.`:a==="invalidCharts"?`AG Grid version ${i} should be used with AG Chart ${n}. Please see https://www.ag-grid.com/javascript-data-grid/modules/ for more information.`:r}function wd({gridVersion:a,chartsVersion:e}){if(!Ur(e))return{isValid:!1,message:Zt({type:"invalidCharts",gridVersion:a,chartsVersion:e})};if(!Ur(a))return{isValid:!1,message:Zt({type:"invalidGrid",gridVersion:a,chartsVersion:e})};const[t,r]=a.split(".")||[],[s,i]=e.split(".")||[],n=Md({gridMajorVersion:t,chartsMajorVersion:s});return n&&r===i?{isValid:!0}:!n||r!==i?{isValid:!1,message:Zt({type:"incompatible",gridVersion:a,chartsVersion:e})}:{isValid:!1,message:Zt({type:"invalid",gridVersion:a,chartsVersion:e})}}import{AgMenuItemComponent as Od,AgMenuList as Dd,Autowired as Jt,Bean as kd,BeanStub as Ld,Component as Rd,PostConstruct as Id,RefSelector as _d,_ as Fd}from"@ag-grid-community/core";var Le=class extends Ld{showMenuList(a){const{eventSource:e,showMenu:t,chartMenuContext:r}=a,s=this.chartMenuService.doChartToolPanelsExist(r.chartController),i=this.mapWithStockItems(this.getMenuItems(r.chartController,s),r,t,e,s);if(!i.length)return;const n=this.createBean(new Qt(i));this.activeChartMenuList=n;let o=-1,l="left";this.gridOptionsService.get("enableRtl")&&(o=1,l="right");const c=n.getGui();this.popupService.addPopup({modal:!0,eChild:c,closeOnEsc:!0,closedCallback:()=>{this.destroyBean(n),this.activeChartMenuList=void 0;const h=this.gridOptionsService.getDocument();h.activeElement===h.body&&e.focus({preventScroll:!0})},afterGuiAttached:h=>n.afterGuiAttached(h),positionCallback:()=>{this.popupService.positionPopupByComponent({type:"chartMenu",eventSource:e,ePopup:c,alignSide:l,nudgeX:4*o,nudgeY:4,position:"under",keepWithinBounds:!0})},ariaLabel:"Chart Menu"})}getMenuItems(a,e){const t=[...e?["chartEdit"]:[],...a.isEnterprise()?["chartAdvancedSettings"]:[],a.isChartLinked()?"chartUnlink":"chartLink","chartDownload"],r=this.gridOptionsService.get("chartMenuItems");return r?Array.isArray(r)?r:r(this.gridOptionsService.addGridCommonParams({defaultItems:t})):t}mapWithStockItems(a,e,t,r,s){if(!a)return[];const i=[];return a.forEach(n=>{let o;if(typeof n=="string"?o=this.getStockMenuItem(n,e,t,r,s):o=T({},n),!o)return;const{subMenu:l}=o;Array.isArray(l)&&(o.subMenu=this.mapWithStockItems(l,e,t,r,s)),i.push(o)}),i}getStockMenuItem(a,e,t,r,s){switch(a){case"chartEdit":return s?this.createMenuItem(this.chartTranslationService.translate("chartEdit"),"chartsMenuEdit",t):null;case"chartAdvancedSettings":return this.createMenuItem(this.chartTranslationService.translate("chartAdvancedSettings"),"chartsMenuAdvancedSettings",()=>this.chartMenuService.openAdvancedSettings(e,r));case"chartUnlink":return e.chartController.isChartLinked()?this.createMenuItem(this.chartTranslationService.translate("chartUnlink"),"unlinked",()=>this.chartMenuService.toggleLinked(e)):null;case"chartLink":return e.chartController.isChartLinked()?null:this.createMenuItem(this.chartTranslationService.translate("chartLink"),"linked",()=>this.chartMenuService.toggleLinked(e));case"chartDownload":return this.createMenuItem(this.chartTranslationService.translate("chartDownload"),"save",()=>this.chartMenuService.downloadChart(e))}return null}createMenuItem(a,e,t){return{name:a,icon:Fd.createIconNoSpan(e,this.gridOptionsService,null),action:t}}destroy(){this.destroyBean(this.activeChartMenuList),super.destroy()}};p([Jt("popupService")],Le.prototype,"popupService",2),p([Jt("chartMenuService")],Le.prototype,"chartMenuService",2),p([Jt("chartTranslationService")],Le.prototype,"chartTranslationService",2),Le=p([kd("chartMenuListFactory")],Le);var Qt=class extends Rd{constructor(a){super(`
            <div ref="eChartsMenu" role="presentation" class="ag-menu ag-chart-menu-popup"></div>
        `),this.menuItems=a}init(){this.mainMenuList=this.createManagedBean(new Dd(0)),this.mainMenuList.addMenuItems(this.menuItems),this.mainMenuList.addEventListener(Od.EVENT_CLOSE_MENU,this.onHidePopup.bind(this)),this.eChartsMenu.appendChild(this.mainMenuList.getGui())}onHidePopup(){var a;(a=this.hidePopupFunc)==null||a.call(this)}afterGuiAttached({hidePopup:a}){a&&(this.hidePopupFunc=a,this.addDestroyFunc(a)),this.focusService.focusInto(this.mainMenuList.getGui())}};p([Jt("focusService")],Qt.prototype,"focusService",2),p([_d("eChartsMenu")],Qt.prototype,"eChartsMenu",2),p([Id],Qt.prototype,"init",1);import{AgDialog as Gd,Autowired as zr,Bean as Vd,BeanStub as Nd,PostConstruct as Bd,TabGuardComp as Ud}from"@ag-grid-community/core";import{Component as zd,PostConstruct as Hd,_ as Wd}from"@ag-grid-community/core";import{Autowired as Yd,Component as Kd,PostConstruct as $d}from"@ag-grid-community/core";var er=class ki extends Kd{constructor(e){super(),this.chartMenuParamsFactory=e}init(){const e=this.chartMenuParamsFactory.addEnableParams("animation.enabled",{cssIdentifier:"charts-advanced-settings-top-level",direction:"vertical",suppressOpenCloseIcons:!0,title:this.chartTranslationService.translate("animation"),suppressEnabledCheckbox:!0,useToggle:!0}),t=this.chartMenuParamsFactory.getDefaultNumberInputParams("animation.duration","durationMillis",{min:0});this.setTemplate(ki.TEMPLATE,{animationGroup:e,animationHeightInput:t})}};er.TEMPLATE=`<div>
            <ag-group-component ref="animationGroup">
                <ag-input-number-field ref="animationHeightInput"></ag-input>
            </ag-group-component>
        </div>`,p([Yd("chartTranslationService")],er.prototype,"chartTranslationService",2),p([$d],er.prototype,"init",1);var jd=er;import{Autowired as Xd,Component as qd,PostConstruct as Zd}from"@ag-grid-community/core";var tr=class Li extends qd{constructor(e){super(),this.chartMenuParamsFactory=e}init(){const e=this.chartMenuParamsFactory.addEnableParams("crosshair.enabled",{cssIdentifier:"charts-advanced-settings-top-level",direction:"vertical",suppressOpenCloseIcons:!0,title:this.chartTranslationService.translate("crosshair"),suppressEnabledCheckbox:!0,useToggle:!0}),t=this.chartMenuParamsFactory.getDefaultCheckboxParams("crosshair.label.enabled","crosshairLabel"),r=this.chartMenuParamsFactory.getDefaultCheckboxParams("crosshair.snap","crosshairSnap"),s=this.chartMenuParamsFactory.getDefaultColorPickerParams("crosshair.stroke","color");this.setTemplate(Li.TEMPLATE,{crosshairGroup:e,crosshairLabelCheckbox:t,crosshairSnapCheckbox:r,crosshairStrokeColorPicker:s})}};tr.TEMPLATE=`<div>
            <ag-group-component ref="crosshairGroup">
                <ag-checkbox ref="crosshairLabelCheckbox"></ag-checkbox>
                <ag-checkbox ref="crosshairSnapCheckbox"></ag-checkbox>
                <ag-color-picker ref="crosshairStrokeColorPicker"></ag-color-picker>
            </ag-group-component>
        </div>`,p([Xd("chartTranslationService")],tr.prototype,"chartTranslationService",2),p([Zd],tr.prototype,"init",1);var Jd=tr;import{Autowired as Qd,Component as eu,PostConstruct as tu}from"@ag-grid-community/core";var rr=class Ri extends eu{constructor(e){super(),this.chartMenuParamsFactory=e}init(){const e=this.chartMenuParamsFactory.addEnableParams("navigator.enabled",{cssIdentifier:"charts-advanced-settings-top-level",direction:"vertical",suppressOpenCloseIcons:!0,title:this.chartTranslationService.translate("navigator"),suppressEnabledCheckbox:!0,useToggle:!0}),t=this.chartMenuParamsFactory.getDefaultSliderParams("navigator.height","height",60);t.minValue=10;const r=this.chartMenuParamsFactory.getDefaultCheckboxParams("navigator.miniChart.enabled","miniChart");this.setTemplate(Ri.TEMPLATE,{navigatorGroup:e,navigatorHeightSlider:t,navigatorMiniChartCheckbox:r})}};rr.TEMPLATE=`<div>
            <ag-group-component ref="navigatorGroup">
                <ag-slider ref="navigatorHeightSlider"></ag-slider>
                <ag-checkbox ref="navigatorMiniChartCheckbox"></ag-checkbox>
            </ag-group-component>
        </div>`,p([Qd("chartTranslationService")],rr.prototype,"chartTranslationService",2),p([tu],rr.prototype,"init",1);var ru=rr;import{Autowired as au,Component as su,PostConstruct as iu,RefSelector as nu}from"@ag-grid-community/core";var ut=class Ii extends su{constructor(e){super(),this.chartMenuParamsFactory=e}init(){const e=this.chartMenuParamsFactory.addEnableParams("zoom.enabled",{cssIdentifier:"charts-advanced-settings-top-level",direction:"vertical",suppressOpenCloseIcons:!0,title:this.chartTranslationService.translate("zoom"),suppressEnabledCheckbox:!0,useToggle:!0}),t=this.chartMenuParamsFactory.getDefaultCheckboxParams("zoom.enableScrolling","scrollingZoom"),r=this.chartMenuParamsFactory.getDefaultSliderParams("zoom.scrollingStep","scrollingStep",1);r.step=.01,r.minValue=r.step;const s=this.chartMenuParamsFactory.getDefaultCheckboxParams("zoom.enableSelecting","selectingZoom");t.onValueChange=(i=>n=>{i&&(i(n),this.zoomScrollingStepInput.setDisabled(!n))})(t.onValueChange),this.setTemplate(Ii.TEMPLATE,{zoomGroup:e,zoomScrollingCheckbox:t,zoomScrollingStepInput:r,zoomSelectingCheckbox:s}),this.zoomScrollingStepInput.setDisabled(!t.value)}};ut.TEMPLATE=`<div>
            <ag-group-component ref="zoomGroup">
                <ag-checkbox ref="zoomSelectingCheckbox"></ag-checkbox>
                <ag-checkbox ref="zoomScrollingCheckbox"></ag-checkbox>
                <ag-slider ref="zoomScrollingStepInput"></ag-slider>
            </ag-group-component>
        </div>`,p([au("chartTranslationService")],ut.prototype,"chartTranslationService",2),p([nu("zoomScrollingStepInput")],ut.prototype,"zoomScrollingStepInput",2),p([iu],ut.prototype,"init",1);var ou=ut,lu=["navigator","zoom","animation","crosshair"],$=["navigator","zoom","crosshair"],cu={cartesian:$,column:$,bar:$,line:$,area:$,scatter:$,histogram:$,bubble:$,"range-bar":$,"range-area":$,"box-plot":$,waterfall:$},Hr=class _i extends zd{constructor(e){super(_i.TEMPLATE),this.chartMenuContext=e}postConstruct(){this.chartPanelFeature=this.createManagedBean(new fr(this.chartMenuContext.chartController,this.getGui(),"ag-chart-advanced-settings-section",(e,t)=>this.createPanels(e,t))),this.chartPanelFeature.refreshPanels()}createPanels(e,t){lu.forEach(r=>{if(!this.isGroupPanelShownForSeries(r,t))return;const s=this.createPanel(r);s&&this.chartPanelFeature.addComponent(s)})}isGroupPanelShownForSeries(e,t){var r,s;return e==="animation"?!0:(s=(r=cu[t])==null?void 0:r.includes(e))!=null?s:!1}createPanel(e){const{chartMenuParamsFactory:t,chartAxisMenuParamsFactory:r}=this.chartMenuContext;switch(e){case"navigator":return new ru(t);case"zoom":return new ou(t);case"animation":return new jd(t);case"crosshair":return new Jd(r)}return Wd.warnOnce(`Invalid charts advanced settings group name supplied: '${e}'`),null}};Hr.TEMPLATE='<div class="ag-chart-advanced-settings-wrapper"></div>',p([Hd],Hr.prototype,"postConstruct",1);var hu=Hr,pt=class extends Nd{showMenu(a,e){this.hideMenu();const t=this.createBean(new du(a));this.activeDialog=this.createBean(new Gd({title:this.chartTranslationService.translate("advancedSettings"),component:t,width:300,height:400,resizable:!0,movable:!0,centered:!0,closable:!0,afterGuiAttached:()=>{var r;(r=this.focusService.findFocusableElements(t.getGui())[0])==null||r.focus()},closedCallback:()=>{this.activeMenu=this.destroyBean(this.activeMenu),this.activeDialog=void 0,e?.focus({preventScroll:!0})}})),this.activeMenu=t}hideMenu(){this.activeDialog&&this.destroyBean(this.activeDialog)}destroy(){this.activeMenu=this.destroyBean(this.activeMenu),this.activeDialog=this.destroyBean(this.activeDialog),super.destroy()}};p([zr("focusService")],pt.prototype,"focusService",2),p([zr("chartTranslationService")],pt.prototype,"chartTranslationService",2),pt=p([Vd("advancedSettingsMenuFactory")],pt);var ar=class Fi extends Ud{constructor(e){super(Fi.TEMPLATE),this.chartMenuContext=e}postConstruct(){this.advancedSettingsPanel=this.createManagedBean(new hu(this.chartMenuContext)),this.getGui().appendChild(this.advancedSettingsPanel.getGui()),this.initialiseTabGuard({onTabKeyDown:this.onTabKeyDown.bind(this),focusTrapActive:!0})}onTabKeyDown(e){if(e.defaultPrevented)return;e.preventDefault();const t=e.shiftKey,r=this.advancedSettingsPanel.getGui(),s=this.focusService.findNextFocusableElement(r,!1,t);if(s)s.focus();else{const i=this.focusService.findFocusableElements(r);i.length&&i[t?i.length-1:0].focus()}}};ar.TEMPLATE='<div class="ag-chart-advanced-settings"></div>',p([zr("focusService")],ar.prototype,"focusService",2),p([Bd],ar.prototype,"postConstruct",1);var du=ar,uu={version:lt,validate:()=>wd({gridVersion:lt,chartsVersion:Ce.CHARTS_VERSION}),moduleName:Bi.GridChartsModule,beans:[Ce,dt,fe,Le,ot,pt],agStackComponents:[{componentName:"AgColorPicker",componentClass:Ra},{componentName:"AgAngleSelect",componentClass:Oa},{componentName:"AgPillSelect",componentClass:ba}],dependantModules:[zi,Ui]},pu=0;import{time as gu,AgChart as mu}from"ag-charts-community";export*from"ag-charts-community";var Cu={time:gu,AgChart:mu};export{uu as GridChartsModule,pu as __FORCE_MODULE_DETECTION_AG_GRID_CORE_EXT,Cu as agCharts};
