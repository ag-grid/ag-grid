var __defProp=Object.defineProperty,__getOwnPropDesc=Object.getOwnPropertyDescriptor,__getOwnPropNames=Object.getOwnPropertyNames,__hasOwnProp=Object.prototype.hasOwnProperty,__export=(e,t)=>{for(var r in t)__defProp(e,r,{get:t[r],enumerable:!0})},__copyProps=(e,t,r,a)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of __getOwnPropNames(t))!__hasOwnProp.call(e,i)&&i!==r&&__defProp(e,i,{get:()=>t[i],enumerable:!(a=__getOwnPropDesc(t,i))||a.enumerable});return e},__toCommonJS=e=>__copyProps(__defProp({},"__esModule",{value:!0}),e),main_exports={};__export(main_exports,{RichSelectModule:()=>RichSelectModule}),module.exports=__toCommonJS(main_exports);var import_core3=require("@ag-grid-community/core"),import_core4=require("@ag-grid-enterprise/core"),import_core=require("@ag-grid-community/core"),import_core2=require("@ag-grid-enterprise/core"),RichSelectCellEditor=class extends import_core.PopupComponent{constructor(){super('<div class="ag-cell-edit-wrapper"></div>')}init(e){this.params=e;const{cellStartedEdit:t,values:r}=e;(0,import_core._missing)(r)&&(0,import_core._warnOnce)("agRichSelectCellEditor requires cellEditorParams.values to be set");const{params:a,valuesPromise:i}=this.buildRichSelectParams();this.richSelect=this.createManagedBean(new import_core2.AgRichSelect(a)),this.richSelect.addCssClass("ag-cell-editor"),this.appendChild(this.richSelect),i&&i.then(l=>{this.richSelect.setValueList({valueList:l,refresh:!0});const c=this.getSearchStringCallback(l);c&&this.richSelect.setSearchStringCreator(c)}),this.addManagedListeners(this.richSelect,{fieldPickerValueSelected:this.onEditorPickerValueSelected.bind(this)}),this.focusAfterAttached=t}onEditorPickerValueSelected(e){setTimeout(()=>this.params.stopEditing(!e.fromEnterKey))}buildRichSelectParams(){const{cellRenderer:e,cellHeight:t,value:r,values:a,formatValue:i,searchDebounceDelay:l,valueListGap:c,valueListMaxHeight:d,valueListMaxWidth:m,allowTyping:n,filterList:g,searchType:S,highlightMatch:f,valuePlaceholder:v,eventKey:h,multiSelect:u,suppressDeselectAll:y,suppressMultiSelectPillRenderer:P}=this.params,o={value:r,cellRenderer:e,cellRowHeight:t,searchDebounceDelay:l,valueFormatter:i,pickerAriaLabelKey:"ariaLabelRichSelectField",pickerAriaLabelValue:"Rich Select Field",pickerType:"virtual-list",pickerGap:c,allowTyping:n,filterList:g,searchType:S,highlightMatch:f,maxPickerHeight:d,maxPickerWidth:m,placeholder:v,initialInputValue:h?.length===1?h:void 0,multiSelect:u,suppressDeselectAll:y,suppressMultiSelectPillRenderer:P};let s,p;return typeof a=="function"?s=a(this.params):s=a??[],Array.isArray(s)?(o.valueList=s,o.searchStringCreator=this.getSearchStringCallback(s)):p=s,u&&n&&(this.params.allowTyping=o.allowTyping=!1,(0,import_core._warnOnce)("agRichSelectCellEditor cannot have `multiSelect` and `allowTyping` set to `true`. AllowTyping has been turned off.")),{params:o,valuesPromise:p}}getSearchStringCallback(e){const{colDef:t}=this.params;if(!(typeof e[0]!="object"||!t.keyCreator))return r=>r.map(a=>{const i=this.gos.addGridCommonParams({value:a,colDef:this.params.colDef,column:this.params.column,node:this.params.node,data:this.params.data});return t.keyCreator(i)})}afterGuiAttached(){const{focusAfterAttached:e,params:t}=this;setTimeout(()=>{if(!this.isAlive())return;if(e){const a=this.richSelect.getFocusableElement();a.focus();const{allowTyping:i,eventKey:l}=this.params;i&&(!l||l.length!==1)&&a.select()}this.richSelect.showPicker();const{eventKey:r}=t;r&&r?.length===1&&this.richSelect.searchTextFromString(r)})}focusIn(){this.richSelect.getFocusableElement().focus()}getValue(){return this.richSelect.getValue()}isPopup(){return!1}},VERSION="32.0.2",RichSelectModule={version:VERSION,moduleName:import_core3.ModuleNames.RichSelectModule,beans:[],userComponents:[{name:"agRichSelect",classImp:RichSelectCellEditor},{name:"agRichSelectCellEditor",classImp:RichSelectCellEditor}],dependantModules:[import_core4.EnterpriseCoreModule,import_core3._EditCoreModule]};
