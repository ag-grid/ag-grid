{
  "version": 3,
  "sources": ["<stdin>"],
  "sourcesContent": ["// enterprise-modules/rich-select/src/richSelectModule.ts\nimport { ModuleNames, _EditCoreModule } from \"@ag-grid-community/core\";\nimport { EnterpriseCoreModule } from \"@ag-grid-enterprise/core\";\n\n// enterprise-modules/rich-select/src/richSelect/richSelectCellEditor.ts\nimport { PopupComponent, _missing, _warnOnce } from \"@ag-grid-community/core\";\nimport { AgRichSelect } from \"@ag-grid-enterprise/core\";\nvar RichSelectCellEditor = class extends PopupComponent {\n  constructor() {\n    super(\n      /* html */\n      `<div class=\"ag-cell-edit-wrapper\"></div>`\n    );\n  }\n  init(params) {\n    this.params = params;\n    const { cellStartedEdit, values } = params;\n    if (_missing(values)) {\n      _warnOnce(\"agRichSelectCellEditor requires cellEditorParams.values to be set\");\n    }\n    const { params: richSelectParams, valuesPromise } = this.buildRichSelectParams();\n    this.richSelect = this.createManagedBean(new AgRichSelect(richSelectParams));\n    this.richSelect.addCssClass(\"ag-cell-editor\");\n    this.appendChild(this.richSelect);\n    if (valuesPromise) {\n      valuesPromise.then((values2) => {\n        this.richSelect.setValueList({ valueList: values2, refresh: true });\n        const searchStringCallback = this.getSearchStringCallback(values2);\n        if (searchStringCallback) {\n          this.richSelect.setSearchStringCreator(searchStringCallback);\n        }\n      });\n    }\n    this.addManagedListeners(this.richSelect, {\n      fieldPickerValueSelected: this.onEditorPickerValueSelected.bind(this)\n    });\n    this.focusAfterAttached = cellStartedEdit;\n  }\n  onEditorPickerValueSelected(e) {\n    this.params.stopEditing(!e.fromEnterKey);\n  }\n  buildRichSelectParams() {\n    const {\n      cellRenderer,\n      cellHeight,\n      value,\n      values,\n      formatValue,\n      searchDebounceDelay,\n      valueListGap,\n      valueListMaxHeight,\n      valueListMaxWidth,\n      allowTyping,\n      filterList,\n      searchType,\n      highlightMatch,\n      valuePlaceholder,\n      eventKey,\n      multiSelect,\n      suppressDeselectAll,\n      suppressMultiSelectPillRenderer\n    } = this.params;\n    const ret = {\n      value,\n      cellRenderer,\n      cellRowHeight: cellHeight,\n      searchDebounceDelay,\n      valueFormatter: formatValue,\n      pickerAriaLabelKey: \"ariaLabelRichSelectField\",\n      pickerAriaLabelValue: \"Rich Select Field\",\n      pickerType: \"virtual-list\",\n      pickerGap: valueListGap,\n      allowTyping,\n      filterList,\n      searchType,\n      highlightMatch,\n      maxPickerHeight: valueListMaxHeight,\n      maxPickerWidth: valueListMaxWidth,\n      placeholder: valuePlaceholder,\n      initialInputValue: eventKey?.length === 1 ? eventKey : void 0,\n      multiSelect,\n      suppressDeselectAll,\n      suppressMultiSelectPillRenderer\n    };\n    let valuesResult;\n    let valuesPromise;\n    if (typeof values === \"function\") {\n      valuesResult = values(this.params);\n    } else {\n      valuesResult = values ?? [];\n    }\n    if (Array.isArray(valuesResult)) {\n      ret.valueList = valuesResult;\n      ret.searchStringCreator = this.getSearchStringCallback(valuesResult);\n    } else {\n      valuesPromise = valuesResult;\n    }\n    if (multiSelect && allowTyping) {\n      this.params.allowTyping = ret.allowTyping = false;\n      _warnOnce(\n        \"agRichSelectCellEditor cannot have `multiSelect` and `allowTyping` set to `true`. AllowTyping has been turned off.\"\n      );\n    }\n    return { params: ret, valuesPromise };\n  }\n  getSearchStringCallback(values) {\n    const { colDef } = this.params;\n    if (typeof values[0] !== \"object\" || !colDef.keyCreator) {\n      return;\n    }\n    return (values2) => values2.map((value) => {\n      const keyParams = this.gos.addGridCommonParams({\n        value,\n        colDef: this.params.colDef,\n        column: this.params.column,\n        node: this.params.node,\n        data: this.params.data\n      });\n      return colDef.keyCreator(keyParams);\n    });\n  }\n  // we need to have the gui attached before we can draw the virtual rows, as the\n  // virtual row logic needs info about the gui state\n  afterGuiAttached() {\n    const { focusAfterAttached, params } = this;\n    setTimeout(() => {\n      if (!this.isAlive()) {\n        return;\n      }\n      if (focusAfterAttached) {\n        const focusableEl = this.richSelect.getFocusableElement();\n        focusableEl.focus();\n        const { allowTyping, eventKey: eventKey2 } = this.params;\n        if (allowTyping && (!eventKey2 || eventKey2.length !== 1)) {\n          focusableEl.select();\n        }\n      }\n      this.richSelect.showPicker();\n      const { eventKey } = params;\n      if (eventKey) {\n        if (eventKey?.length === 1) {\n          this.richSelect.searchTextFromString(eventKey);\n        }\n      }\n    });\n  }\n  focusIn() {\n    this.richSelect.getFocusableElement().focus();\n  }\n  getValue() {\n    return this.richSelect.getValue();\n  }\n  isPopup() {\n    return false;\n  }\n};\n\n// enterprise-modules/rich-select/src/version.ts\nvar VERSION = \"32.0.0\";\n\n// enterprise-modules/rich-select/src/richSelectModule.ts\nvar RichSelectModule = {\n  version: VERSION,\n  moduleName: ModuleNames.RichSelectModule,\n  beans: [],\n  userComponents: [\n    { name: \"agRichSelect\", classImp: RichSelectCellEditor },\n    { name: \"agRichSelectCellEditor\", classImp: RichSelectCellEditor }\n  ],\n  dependantModules: [EnterpriseCoreModule, _EditCoreModule]\n};\nexport {\n  RichSelectModule\n};\n"],
  "mappings": "AACA,OAAS,eAAAA,EAAa,mBAAAC,MAAuB,0BAC7C,OAAS,wBAAAC,MAA4B,2BAGrC,OAAS,kBAAAC,EAAgB,YAAAC,EAAU,aAAAC,MAAiB,0BACpD,OAAS,gBAAAC,MAAoB,2BAC7B,IAAIC,EAAuB,cAAcJ,CAAe,CACtD,aAAc,CACZ,MAEE,0CACF,CACF,CACA,KAAKK,EAAQ,CACX,KAAK,OAASA,EACd,KAAM,CAAE,gBAAAC,EAAiB,OAAAC,CAAO,EAAIF,EAChCJ,EAASM,CAAM,GACjBL,EAAU,mEAAmE,EAE/E,KAAM,CAAE,OAAQM,EAAkB,cAAAC,CAAc,EAAI,KAAK,sBAAsB,EAC/E,KAAK,WAAa,KAAK,kBAAkB,IAAIN,EAAaK,CAAgB,CAAC,EAC3E,KAAK,WAAW,YAAY,gBAAgB,EAC5C,KAAK,YAAY,KAAK,UAAU,EAC5BC,GACFA,EAAc,KAAMC,GAAY,CAC9B,KAAK,WAAW,aAAa,CAAE,UAAWA,EAAS,QAAS,EAAK,CAAC,EAClE,MAAMC,EAAuB,KAAK,wBAAwBD,CAAO,EAC7DC,GACF,KAAK,WAAW,uBAAuBA,CAAoB,CAE/D,CAAC,EAEH,KAAK,oBAAoB,KAAK,WAAY,CACxC,yBAA0B,KAAK,4BAA4B,KAAK,IAAI,CACtE,CAAC,EACD,KAAK,mBAAqBL,CAC5B,CACA,4BAA4B,EAAG,CAC7B,KAAK,OAAO,YAAY,CAAC,EAAE,YAAY,CACzC,CACA,uBAAwB,CACtB,KAAM,CACJ,aAAAM,EACA,WAAAC,EACA,MAAAC,EACA,OAAAP,EACA,YAAAQ,EACA,oBAAAC,EACA,aAAAC,EACA,mBAAAC,EACA,kBAAAC,EACA,YAAAC,EACA,WAAAC,EACA,WAAAC,EACA,eAAAC,EACA,iBAAAC,EACA,SAAAC,EACA,YAAAC,EACA,oBAAAC,EACA,gCAAAC,CACF,EAAI,KAAK,OACHC,EAAM,CACV,MAAAf,EACA,aAAAF,EACA,cAAeC,EACf,oBAAAG,EACA,eAAgBD,EAChB,mBAAoB,2BACpB,qBAAsB,oBACtB,WAAY,eACZ,UAAWE,EACX,YAAAG,EACA,WAAAC,EACA,WAAAC,EACA,eAAAC,EACA,gBAAiBL,EACjB,eAAgBC,EAChB,YAAaK,EACb,kBAAmBC,GAAU,SAAW,EAAIA,EAAW,OACvD,YAAAC,EACA,oBAAAC,EACA,gCAAAC,CACF,EACA,IAAIE,EACArB,EACJ,OAAI,OAAOF,GAAW,WACpBuB,EAAevB,EAAO,KAAK,MAAM,EAEjCuB,EAAevB,GAAU,CAAC,EAExB,MAAM,QAAQuB,CAAY,GAC5BD,EAAI,UAAYC,EAChBD,EAAI,oBAAsB,KAAK,wBAAwBC,CAAY,GAEnErB,EAAgBqB,EAEdJ,GAAeN,IACjB,KAAK,OAAO,YAAcS,EAAI,YAAc,GAC5C3B,EACE,oHACF,GAEK,CAAE,OAAQ2B,EAAK,cAAApB,CAAc,CACtC,CACA,wBAAwBF,EAAQ,CAC9B,KAAM,CAAE,OAAAwB,CAAO,EAAI,KAAK,OACxB,GAAI,SAAOxB,EAAO,CAAC,GAAM,UAAY,CAACwB,EAAO,YAG7C,OAAQrB,GAAYA,EAAQ,IAAKI,GAAU,CACzC,MAAMkB,EAAY,KAAK,IAAI,oBAAoB,CAC7C,MAAAlB,EACA,OAAQ,KAAK,OAAO,OACpB,OAAQ,KAAK,OAAO,OACpB,KAAM,KAAK,OAAO,KAClB,KAAM,KAAK,OAAO,IACpB,CAAC,EACD,OAAOiB,EAAO,WAAWC,CAAS,CACpC,CAAC,CACH,CAGA,kBAAmB,CACjB,KAAM,CAAE,mBAAAC,EAAoB,OAAA5B,CAAO,EAAI,KACvC,WAAW,IAAM,CACf,GAAI,CAAC,KAAK,QAAQ,EAChB,OAEF,GAAI4B,EAAoB,CACtB,MAAMC,EAAc,KAAK,WAAW,oBAAoB,EACxDA,EAAY,MAAM,EAClB,KAAM,CAAE,YAAAd,EAAa,SAAUe,CAAU,EAAI,KAAK,OAC9Cf,IAAgB,CAACe,GAAaA,EAAU,SAAW,IACrDD,EAAY,OAAO,CAEvB,CACA,KAAK,WAAW,WAAW,EAC3B,KAAM,CAAE,SAAAT,CAAS,EAAIpB,EACjBoB,GACEA,GAAU,SAAW,GACvB,KAAK,WAAW,qBAAqBA,CAAQ,CAGnD,CAAC,CACH,CACA,SAAU,CACR,KAAK,WAAW,oBAAoB,EAAE,MAAM,CAC9C,CACA,UAAW,CACT,OAAO,KAAK,WAAW,SAAS,CAClC,CACA,SAAU,CACR,MAAO,EACT,CACF,EAGIW,EAAU,SAGVC,EAAmB,CACrB,QAASD,EACT,WAAYvC,EAAY,iBACxB,MAAO,CAAC,EACR,eAAgB,CACd,CAAE,KAAM,eAAgB,SAAUO,CAAqB,EACvD,CAAE,KAAM,yBAA0B,SAAUA,CAAqB,CACnE,EACA,iBAAkB,CAACL,EAAsBD,CAAe,CAC1D,EACA,OACEuC,KAAA",
  "names": ["ModuleNames", "_EditCoreModule", "EnterpriseCoreModule", "PopupComponent", "_missing", "_warnOnce", "AgRichSelect", "RichSelectCellEditor", "params", "cellStartedEdit", "values", "richSelectParams", "valuesPromise", "values2", "searchStringCallback", "cellRenderer", "cellHeight", "value", "formatValue", "searchDebounceDelay", "valueListGap", "valueListMaxHeight", "valueListMaxWidth", "allowTyping", "filterList", "searchType", "highlightMatch", "valuePlaceholder", "eventKey", "multiSelect", "suppressDeselectAll", "suppressMultiSelectPillRenderer", "ret", "valuesResult", "colDef", "keyParams", "focusAfterAttached", "focusableEl", "eventKey2", "VERSION", "RichSelectModule"]
}
