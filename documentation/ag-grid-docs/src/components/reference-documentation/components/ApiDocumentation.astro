---
import { ApiDocumentationWithQuery } from '../components/ApiDocumentationWithQuery';
import { getFrameworkFromPath } from '@features/docs/utils/urlPaths';
import { getPropertiesFromSource } from '../utils/getPropertiesFromSource';

const { names, config, source, sources: sourcesProp, section } = Astro.props;

const framework = getFrameworkFromPath(Astro.url.pathname);

const { sources, propertiesFromFiles, propertyConfigs, codeConfigs } = await getPropertiesFromSource({
    source,
    sources: sourcesProp,
});
---

<ApiDocumentationWithQuery
    client:load
    framework={framework}
    sources={sources}
    section={section}
    names={names}
    config={config}
    propertiesFromFiles={propertiesFromFiles}
    propertyConfigs={propertyConfigs}
    codeConfigs={codeConfigs}
/>
