{"version":3,"file":"event_binder.js","sourceRoot":"","sources":["../../../../../modules/@angular/compiler/src/view_compiler/event_binder.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {CompileDirectiveMetadata} from '../compile_metadata';\nimport {EventHandlerVars, convertActionBinding} from '../compiler_util/expression_converter';\nimport {isPresent} from '../facade/lang';\nimport {identifierToken} from '../identifiers';\nimport * as o from '../output/output_ast';\nimport {BoundEventAst, DirectiveAst} from '../template_parser/template_ast';\n\nimport {CompileElement} from './compile_element';\nimport {CompileMethod} from './compile_method';\nimport {ViewProperties} from './constants';\n\nexport class CompileEventListener {\n  private _method: CompileMethod;\n  private _hasComponentHostListener: boolean = false;\n  private _methodName: string;\n  private _eventParam: o.FnParam;\n  private _actionResultExprs: o.Expression[] = [];\n\n  static getOrCreate(\n      compileElement: CompileElement, eventTarget: string, eventName: string, eventPhase: string,\n      targetEventListeners: CompileEventListener[]): CompileEventListener {\n    var listener = targetEventListeners.find(\n        listener => listener.eventTarget == eventTarget && listener.eventName == eventName &&\n            listener.eventPhase == eventPhase);\n    if (!listener) {\n      listener = new CompileEventListener(\n          compileElement, eventTarget, eventName, eventPhase, targetEventListeners.length);\n      targetEventListeners.push(listener);\n    }\n    return listener;\n  }\n\n  get methodName() { return this._methodName; }\n  get isAnimation() { return !!this.eventPhase; }\n\n  constructor(\n      public compileElement: CompileElement, public eventTarget: string, public eventName: string,\n      public eventPhase: string, listenerIndex: number) {\n    this._method = new CompileMethod(compileElement.view);\n    this._methodName =\n        `_handle_${sanitizeEventName(eventName)}_${compileElement.nodeIndex}_${listenerIndex}`;\n    this._eventParam = new o.FnParam(\n        EventHandlerVars.event.name,\n        o.importType(this.compileElement.view.genConfig.renderTypes.renderEvent));\n  }\n\n  addAction(\n      hostEvent: BoundEventAst, directive: CompileDirectiveMetadata,\n      directiveInstance: o.Expression) {\n    if (isPresent(directive) && directive.isComponent) {\n      this._hasComponentHostListener = true;\n    }\n    this._method.resetDebugInfo(this.compileElement.nodeIndex, hostEvent);\n    var context = directiveInstance || this.compileElement.view.componentContext;\n    const view = this.compileElement.view;\n    const evalResult = convertActionBinding(\n        view, directive ? null : view, context, hostEvent.handler,\n        `${this.compileElement.nodeIndex}_${this._actionResultExprs.length}`);\n    if (evalResult.preventDefault) {\n      this._actionResultExprs.push(evalResult.preventDefault);\n    }\n    this._method.addStmts(evalResult.stmts);\n  }\n\n  finishMethod() {\n    var markPathToRootStart = this._hasComponentHostListener ?\n        this.compileElement.appElement.prop('componentView') :\n        o.THIS_EXPR;\n    var resultExpr: o.Expression = o.literal(true);\n    this._actionResultExprs.forEach((expr) => { resultExpr = resultExpr.and(expr); });\n    var stmts =\n        (<o.Statement[]>[markPathToRootStart.callMethod('markPathToRootAsCheckOnce', []).toStmt()])\n            .concat(this._method.finish())\n            .concat([new o.ReturnStatement(resultExpr)]);\n    // private is fine here as no child view will reference the event handler...\n    this.compileElement.view.methods.push(new o.ClassMethod(\n        this._methodName, [this._eventParam], stmts, o.BOOL_TYPE, [o.StmtModifier.Private]));\n  }\n\n  listenToRenderer() {\n    var listenExpr: o.Expression;\n    var eventListener = o.THIS_EXPR.callMethod(\n        'eventHandler',\n        [o.THIS_EXPR.prop(this._methodName).callMethod(o.BuiltinMethod.Bind, [o.THIS_EXPR])]);\n    if (isPresent(this.eventTarget)) {\n      listenExpr = ViewProperties.renderer.callMethod(\n          'listenGlobal', [o.literal(this.eventTarget), o.literal(this.eventName), eventListener]);\n    } else {\n      listenExpr = ViewProperties.renderer.callMethod(\n          'listen', [this.compileElement.renderNode, o.literal(this.eventName), eventListener]);\n    }\n    var disposable = o.variable(`disposable_${this.compileElement.view.disposables.length}`);\n    this.compileElement.view.disposables.push(disposable);\n    // private is fine here as no child view will reference the event handler...\n    this.compileElement.view.createMethod.addStmt(\n        disposable.set(listenExpr).toDeclStmt(o.FUNCTION_TYPE, [o.StmtModifier.Private]));\n  }\n\n  listenToAnimation(animationTransitionVar: o.ReadVarExpr): o.Statement {\n    const callbackMethod = this.eventPhase == 'start' ? 'onStart' : 'onDone';\n    return animationTransitionVar\n        .callMethod(\n            callbackMethod,\n            [o.THIS_EXPR.prop(this.methodName).callMethod(o.BuiltinMethod.Bind, [o.THIS_EXPR])])\n        .toStmt();\n  }\n\n  listenToDirective(directiveInstance: o.Expression, observablePropName: string) {\n    var subscription = o.variable(`subscription_${this.compileElement.view.subscriptions.length}`);\n    this.compileElement.view.subscriptions.push(subscription);\n    var eventListener = o.THIS_EXPR.callMethod(\n        'eventHandler',\n        [o.THIS_EXPR.prop(this._methodName).callMethod(o.BuiltinMethod.Bind, [o.THIS_EXPR])]);\n    this.compileElement.view.createMethod.addStmt(\n        subscription\n            .set(directiveInstance.prop(observablePropName)\n                     .callMethod(o.BuiltinMethod.SubscribeObservable, [eventListener]))\n            .toDeclStmt(null, [o.StmtModifier.Final]));\n  }\n}\n\nexport function collectEventListeners(\n    hostEvents: BoundEventAst[], dirs: DirectiveAst[],\n    compileElement: CompileElement): CompileEventListener[] {\n  const eventListeners: CompileEventListener[] = [];\n\n  hostEvents.forEach((hostEvent) => {\n    var listener = CompileEventListener.getOrCreate(\n        compileElement, hostEvent.target, hostEvent.name, hostEvent.phase, eventListeners);\n    listener.addAction(hostEvent, null, null);\n  });\n\n  dirs.forEach((directiveAst) => {\n    var directiveInstance =\n        compileElement.instances.get(identifierToken(directiveAst.directive.type).reference);\n    directiveAst.hostEvents.forEach((hostEvent) => {\n      var listener = CompileEventListener.getOrCreate(\n          compileElement, hostEvent.target, hostEvent.name, hostEvent.phase, eventListeners);\n      listener.addAction(hostEvent, directiveAst.directive, directiveInstance);\n    });\n  });\n\n  eventListeners.forEach((listener) => listener.finishMethod());\n  return eventListeners;\n}\n\nexport function bindDirectiveOutputs(\n    directiveAst: DirectiveAst, directiveInstance: o.Expression,\n    eventListeners: CompileEventListener[]) {\n  Object.keys(directiveAst.directive.outputs).forEach(observablePropName => {\n    const eventName = directiveAst.directive.outputs[observablePropName];\n\n    eventListeners.filter(listener => listener.eventName == eventName).forEach((listener) => {\n      listener.listenToDirective(directiveInstance, observablePropName);\n    });\n  });\n}\n\nexport function bindRenderOutputs(eventListeners: CompileEventListener[]) {\n  eventListeners.forEach(listener => {\n    // the animation listeners are handled within property_binder.ts to\n    // allow them to be placed next to the animation factory statements\n    if (!listener.isAnimation) {\n      listener.listenToRenderer();\n    }\n  });\n}\n\nfunction convertStmtIntoExpression(stmt: o.Statement): o.Expression {\n  if (stmt instanceof o.ExpressionStatement) {\n    return stmt.expr;\n  } else if (stmt instanceof o.ReturnStatement) {\n    return stmt.value;\n  }\n  return null;\n}\n\nfunction sanitizeEventName(name: string): string {\n  return name.replace(/[^a-zA-Z_]/g, '_');\n}\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}