/**
          * @ag-grid-enterprise/all-modules - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue * @version v30.2.0
          * @link https://www.ag-grid.com/
          * @license Commercial
          */
/**
          * @ag-grid-enterprise/all-modules - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue * @version v30.2.0
          * @link https://www.ag-grid.com/
          * @license Commercial
          */
import{PreConstruct as t,Bean as e,BeanStub as r,Autowired as n,RefSelector as o,PostConstruct as i,Component as a,ModuleNames as s,Events as l,_ as u,KeyCode as c,AgRichSelect as p,VirtualListDragFeature as d,DragSourceType as h,AgInputDateField as f,AgInputNumberField as v,AgInputTextField as y,TooltipFeature as g,DragAndDropService as m,TabGuardComp as b,VirtualList as C,AgDialog as S,FocusService as w,AgAutocomplete as x,ChangedPath as O,Optional as E,CsvExportModule as T,EventService as P,Column as D,ProvidedColumnGroup as A,AgMenuList as M,AgMenuItemComponent as _,CssClassApplier as R,TouchListener as k,PreDestroy as F,NumberSequence as I,RowNode as L,ManagedFocusFeature as N,PositionableFeature as G,AgSelect as j,AgPromise as V,ModuleRegistry as B,ExcelFactoryMode as U,XmlFactory as H,RowType as z,BaseGridSerializingSession as W,Downloader as K,BaseCreator as X,ZipContainer as Y,GridSerializer as q,CsvCreator as Z,AgGroupComponent as J,AutoScrollService as $,AgRadioButton as Q,AgToggleButton as tt,AgCheckbox as et,AgAbstractLabel as rt,AgSlider as nt,DEFAULT_CHART_GROUPS as ot,TabbedLayout as it,CHART_TOOLBAR_ALLOW_LIST as at,CHART_TOOL_PANEL_ALLOW_LIST as st,CHART_TOOL_PANEL_MENU_OPTIONS as lt,AgPanel as ut,CellRangeType as ct,CellCtrl as pt,SelectionHandleType as dt,AgPickerField as ht,Grid as ft,ProvidedFilter as vt,PopupComponent as yt,RowNodeBlock as gt,ServerSideTransactionResultStatus as mt,RowNodeBlockLoader as bt,GROUP_AUTO_COLUMN_ID as Ct,TextFilter as St,AllCommunityModules as wt}from"ag-grid-community";export*from"ag-grid-community";var xt=function(){function t(){this.ieCompatibility=!1}return t.prototype.init=function(){this.ieCompatibility="5d41402abc4b2a76b9719d911017c592"!=this.md5("hello")},t.prototype.md5cycle=function(t,e){var r=t[0],n=t[1],o=t[2],i=t[3];r=this.ff(r,n,o,i,e[0],7,-680876936),i=this.ff(i,r,n,o,e[1],12,-389564586),o=this.ff(o,i,r,n,e[2],17,606105819),n=this.ff(n,o,i,r,e[3],22,-1044525330),r=this.ff(r,n,o,i,e[4],7,-176418897),i=this.ff(i,r,n,o,e[5],12,1200080426),o=this.ff(o,i,r,n,e[6],17,-1473231341),n=this.ff(n,o,i,r,e[7],22,-45705983),r=this.ff(r,n,o,i,e[8],7,1770035416),i=this.ff(i,r,n,o,e[9],12,-1958414417),o=this.ff(o,i,r,n,e[10],17,-42063),n=this.ff(n,o,i,r,e[11],22,-1990404162),r=this.ff(r,n,o,i,e[12],7,1804603682),i=this.ff(i,r,n,o,e[13],12,-40341101),o=this.ff(o,i,r,n,e[14],17,-1502002290),n=this.ff(n,o,i,r,e[15],22,1236535329),r=this.gg(r,n,o,i,e[1],5,-165796510),i=this.gg(i,r,n,o,e[6],9,-1069501632),o=this.gg(o,i,r,n,e[11],14,643717713),n=this.gg(n,o,i,r,e[0],20,-373897302),r=this.gg(r,n,o,i,e[5],5,-701558691),i=this.gg(i,r,n,o,e[10],9,38016083),o=this.gg(o,i,r,n,e[15],14,-660478335),n=this.gg(n,o,i,r,e[4],20,-405537848),r=this.gg(r,n,o,i,e[9],5,568446438),i=this.gg(i,r,n,o,e[14],9,-1019803690),o=this.gg(o,i,r,n,e[3],14,-187363961),n=this.gg(n,o,i,r,e[8],20,1163531501),r=this.gg(r,n,o,i,e[13],5,-1444681467),i=this.gg(i,r,n,o,e[2],9,-51403784),o=this.gg(o,i,r,n,e[7],14,1735328473),n=this.gg(n,o,i,r,e[12],20,-1926607734),r=this.hh(r,n,o,i,e[5],4,-378558),i=this.hh(i,r,n,o,e[8],11,-2022574463),o=this.hh(o,i,r,n,e[11],16,1839030562),n=this.hh(n,o,i,r,e[14],23,-35309556),r=this.hh(r,n,o,i,e[1],4,-1530992060),i=this.hh(i,r,n,o,e[4],11,1272893353),o=this.hh(o,i,r,n,e[7],16,-155497632),n=this.hh(n,o,i,r,e[10],23,-1094730640),r=this.hh(r,n,o,i,e[13],4,681279174),i=this.hh(i,r,n,o,e[0],11,-358537222),o=this.hh(o,i,r,n,e[3],16,-722521979),n=this.hh(n,o,i,r,e[6],23,76029189),r=this.hh(r,n,o,i,e[9],4,-640364487),i=this.hh(i,r,n,o,e[12],11,-421815835),o=this.hh(o,i,r,n,e[15],16,530742520),n=this.hh(n,o,i,r,e[2],23,-995338651),r=this.ii(r,n,o,i,e[0],6,-198630844),i=this.ii(i,r,n,o,e[7],10,1126891415),o=this.ii(o,i,r,n,e[14],15,-1416354905),n=this.ii(n,o,i,r,e[5],21,-57434055),r=this.ii(r,n,o,i,e[12],6,1700485571),i=this.ii(i,r,n,o,e[3],10,-1894986606),o=this.ii(o,i,r,n,e[10],15,-1051523),n=this.ii(n,o,i,r,e[1],21,-2054922799),r=this.ii(r,n,o,i,e[8],6,1873313359),i=this.ii(i,r,n,o,e[15],10,-30611744),o=this.ii(o,i,r,n,e[6],15,-1560198380),n=this.ii(n,o,i,r,e[13],21,1309151649),r=this.ii(r,n,o,i,e[4],6,-145523070),i=this.ii(i,r,n,o,e[11],10,-1120210379),o=this.ii(o,i,r,n,e[2],15,718787259),n=this.ii(n,o,i,r,e[9],21,-343485551),t[0]=this.add32(r,t[0]),t[1]=this.add32(n,t[1]),t[2]=this.add32(o,t[2]),t[3]=this.add32(i,t[3])},t.prototype.cmn=function(t,e,r,n,o,i){return e=this.add32(this.add32(e,t),this.add32(n,i)),this.add32(e<<o|e>>>32-o,r)},t.prototype.ff=function(t,e,r,n,o,i,a){return this.cmn(e&r|~e&n,t,e,o,i,a)},t.prototype.gg=function(t,e,r,n,o,i,a){return this.cmn(e&n|r&~n,t,e,o,i,a)},t.prototype.hh=function(t,e,r,n,o,i,a){return this.cmn(e^r^n,t,e,o,i,a)},t.prototype.ii=function(t,e,r,n,o,i,a){return this.cmn(r^(e|~n),t,e,o,i,a)},t.prototype.md51=function(t){var e,r=t.length,n=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)this.md5cycle(n,this.md5blk(t.substring(e-64,e)));t=t.substring(e-64);var o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)o[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(o[e>>2]|=128<<(e%4<<3),e>55)for(this.md5cycle(n,o),e=0;e<16;e++)o[e]=0;return o[14]=8*r,this.md5cycle(n,o),n},t.prototype.md5blk=function(t){for(var e=[],r=0;r<64;r+=4)e[r>>2]=t.charCodeAt(r)+(t.charCodeAt(r+1)<<8)+(t.charCodeAt(r+2)<<16)+(t.charCodeAt(r+3)<<24);return e},t.prototype.rhex=function(t){for(var e="0123456789abcdef".split(""),r="",n=0;n<4;n++)r+=e[t>>8*n+4&15]+e[t>>8*n&15];return r},t.prototype.hex=function(t){for(var e=0;e<t.length;e++)t[e]=this.rhex(t[e]);return t.join("")},t.prototype.md5=function(t){return this.hex(this.md51(t))},t.prototype.add32=function(t,e){return this.ieCompatibility?this.add32Compat(t,e):this.add32Std(t,e)},t.prototype.add32Std=function(t,e){return t+e&4294967295},t.prototype.add32Compat=function(t,e){var r=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(r>>16)<<16|65535&r},t}(),Ot=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a};function Et(t){return null==t||0===t.length}var Tt,Pt=function(){function t(t){this.watermarkMessage=void 0,this.document=t,this.md5=new xt,this.md5.init()}return t.prototype.validateLicense=function(){if(Et(t.licenseKey))this.isWebsiteUrl()&&!this.isForceWatermark()||this.outputMissingLicenseKey();else if(t.licenseKey.length>32)if(-1!==t.licenseKey.indexOf("For_Trialing_ag-Grid_Only"))this.outputInvalidLicenseKey();else{var e=t.extractLicenseComponents(t.licenseKey),r=e.md5,n=e.license,o=e.version,i=e.isTrial;r===this.md5.md5(n)?(void 0===s&&(s=!1),null!=(a=o)&&(""!==a||s)&&o?this.validateLicenseKeyForVersion(o,!!i,n):this.validateLegacyKey(n)):this.outputInvalidLicenseKey()}else this.outputInvalidLicenseKey();var a,s},t.extractExpiry=function(e){var r=e.substring(e.lastIndexOf("_")+1,e.length);return new Date(parseInt(t.decode(r),10))},t.extractLicenseComponents=function(e){var r=e.replace(/[\u200B-\u200D\uFEFF]/g,""),n=(r=r.replace(/\r?\n|\r/g,"")).length-32,o=r.substring(n),i=r.substring(0,n),a=Ot(t.extractBracketedInformation(r),2);return{md5:o,license:i,version:a[0],isTrial:a[1]}},t.prototype.getLicenseDetails=function(e){var r=t.extractLicenseComponents(e),n=r.md5,o=r.license,i=r.version,a=r.isTrial,s=n===this.md5.md5(o)&&-1===e.indexOf("For_Trialing_ag-Grid_Only"),l=null,u=null;s&&(u=t.extractExpiry(o),s=!isNaN(u.getTime()),a&&(l=u<new Date));return{licenseKey:e,valid:s,expiry:s?t.formatDate(u):null,version:i||"legacy",isTrial:a,trialExpired:l}},t.prototype.isDisplayWatermark=function(){return this.isForceWatermark()||!this.isLocalhost()&&!this.isWebsiteUrl()&&!Et(this.watermarkMessage)},t.prototype.getWatermarkMessage=function(){return this.watermarkMessage||""},t.prototype.getHostname=function(){var t=(this.document.defaultView||window).location.hostname;return void 0===t?"":t},t.prototype.isForceWatermark=function(){var t=(this.document.defaultView||window).location.pathname;return!!t&&-1!==t.indexOf("forceWatermark")},t.prototype.isWebsiteUrl=function(){return null!==this.getHostname().match(/^((?:\w+\.)?ag-grid\.com)$/)},t.prototype.isLocalhost=function(){return null!==this.getHostname().match(/^(?:127\.0\.0\.1|localhost)$/)},t.formatDate=function(t){var e=t.getDate(),r=t.getMonth(),n=t.getFullYear();return e+" "+["January","February","March","April","May","June","July","August","September","October","November","December"][r]+" "+n},t.getGridReleaseDate=function(){return new Date(parseInt(t.decode(t.RELEASE_INFORMATION),10))},t.decode=function(e){for(var r,n,o,i,a,s,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",u="",c=0,p=e.replace(/[^A-Za-z0-9+/=]/g,"");c<p.length;)r=l.indexOf(p.charAt(c++))<<2|(i=l.indexOf(p.charAt(c++)))>>4,n=(15&i)<<4|(a=l.indexOf(p.charAt(c++)))>>2,o=(3&a)<<6|(s=l.indexOf(p.charAt(c++))),u+=String.fromCharCode(r),64!=a&&(u+=String.fromCharCode(n)),64!=s&&(u+=String.fromCharCode(o));return u=t.utf8_decode(u)},t.utf8_decode=function(t){t=t.replace(/rn/g,"n");for(var e="",r=0;r<t.length;r++){var n=t.charCodeAt(r);n<128?e+=String.fromCharCode(n):n>127&&n<2048?(e+=String.fromCharCode(n>>6|192),e+=String.fromCharCode(63&n|128)):(e+=String.fromCharCode(n>>12|224),e+=String.fromCharCode(n>>6&63|128),e+=String.fromCharCode(63&n|128))}return e},t.setLicenseKey=function(t){this.licenseKey=t},t.extractBracketedInformation=function(t){var e=t.split("[").filter((function(t){return t.indexOf("]")>-1})).map((function(t){return t.split("]")[0]}));if(!e||0===e.length)return[null,null];var r=1===e.filter((function(t){return"TRIAL"===t})).length;return[e.filter((function(t){return 0===t.indexOf("v")})).map((function(t){return t.replace(/^v/,"")}))[0],r]},t.prototype.validateLicenseKeyForVersion=function(t,e,r){"2"===t&&(e?this.validateForTrial(r):this.validateLegacyKey(r))},t.prototype.validateLegacyKey=function(e){var r=t.getGridReleaseDate(),n=t.extractExpiry(e),o=!1,i=!1;if(isNaN(n.getTime())||(o=!0,i=r<n),o){if(!i){var a=t.formatDate(n),s=t.formatDate(r);this.outputIncompatibleVersion(a,s)}}else this.outputInvalidLicenseKey()},t.prototype.validateForTrial=function(e){var r=t.extractExpiry(e),n=new Date,o=!1,i=!1;if(isNaN(r.getTime())||(o=!0,i=r>n),o){if(!i){var a=t.formatDate(r);this.outputExpiredTrialKey(a)}}else this.outputInvalidLicenseKey()},t.prototype.outputInvalidLicenseKey=function(){console.error("*****************************************************************************************************************"),console.error("***************************************** AG Grid Enterprise License ********************************************"),console.error("********************************************* Invalid License ***************************************************"),console.error("* Your license for AG Grid Enterprise is not valid - please contact info@ag-grid.com to obtain a valid license. *"),console.error("*****************************************************************************************************************"),console.error("*****************************************************************************************************************"),this.watermarkMessage="Invalid License"},t.prototype.outputExpiredTrialKey=function(t){console.error("****************************************************************************************************************"),console.error("***************************************** AG Grid Enterprise License *******************************************"),console.error("*****************************************   Trial Period Expired.    *******************************************"),console.error("* Your license for AG Grid Enterprise expired on "+t+".                                                *"),console.error("* Please email info@ag-grid.com to purchase a license.                                                         *"),console.error("****************************************************************************************************************"),console.error("****************************************************************************************************************"),this.watermarkMessage="Trial Period Expired"},t.prototype.outputMissingLicenseKey=function(){console.error("****************************************************************************************************************"),console.error("***************************************** AG Grid Enterprise License *******************************************"),console.error("****************************************** License Key Not Found ***********************************************"),console.error("* All AG Grid Enterprise features are unlocked.                                                                *"),console.error("* This is an evaluation only version, it is not licensed for development projects intended for production.     *"),console.error("* If you want to hide the watermark, please email info@ag-grid.com for a trial license.                        *"),console.error("****************************************************************************************************************"),console.error("****************************************************************************************************************"),this.watermarkMessage="For Trial Use Only"},t.prototype.outputIncompatibleVersion=function(t,e){console.error("****************************************************************************************************************************"),console.error("****************************************************************************************************************************"),console.error("*                                             AG Grid Enterprise License                                                   *"),console.error("*                           License not compatible with installed version of AG Grid Enterprise.                           *"),console.error("*                                                                                                                          *"),console.error("* Your AG Grid License entitles you to all versions of AG Grid that we release within the time covered by your license     *"),console.error("* - typically we provide one year licenses which entitles you to all releases / updates of AG Grid within that year.       *"),console.error("* Your license has an end (expiry) date which stops the license key working with versions of AG Grid released after the    *"),console.error("* license end date. The license key that you have expires on "+t+", however the version of AG Grid you    *"),console.error("* are trying to use was released on "+e+".                                                               *"),console.error("*                                                                                                                          *"),console.error("* Please contact info@ag-grid.com to renew your subscription to new versions and get a new license key to work with this   *"),console.error("* version of AG Grid.                                                                                                      *"),console.error("****************************************************************************************************************************"),console.error("****************************************************************************************************************************"),this.watermarkMessage="License Expired"},t.RELEASE_INFORMATION="MTY5NTU0ODUwMjk2NQ==",t}(),Dt=(Tt=function(t,e){return(Tt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}Tt(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),At=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},Mt=function(r){function n(){return null!==r&&r.apply(this,arguments)||this}return Dt(n,r),n.prototype.validateLicense=function(){this.licenseManager=new Pt(this.gridOptionsService.getDocument()),this.licenseManager.validateLicense()},n.getLicenseDetails=function(t){return new Pt(null).getLicenseDetails(t)},n.prototype.isDisplayWatermark=function(){return this.licenseManager.isDisplayWatermark()},n.prototype.getWatermarkMessage=function(){return this.licenseManager.getWatermarkMessage()},n.setLicenseKey=function(t){Pt.setLicenseKey(t)},At([t],n.prototype,"validateLicense",null),n=At([e("licenseManager")],n)}(r),_t=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Rt=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},kt=function(t){function e(){return t.call(this,'<div class="ag-watermark">\n                <div ref="eLicenseTextRef" class="ag-watermark-text"></div>\n            </div>')||this}return _t(e,t),e.prototype.postConstruct=function(){var t=this,e=this.shouldDisplayWatermark();this.setDisplayed(e),e&&(this.eLicenseTextRef.innerText=this.licenseManager.getWatermarkMessage(),window.setTimeout((function(){return t.addCssClass("ag-opacity-zero")}),0),window.setTimeout((function(){return t.setDisplayed(!1)}),5e3))},e.prototype.shouldDisplayWatermark=function(){return this.licenseManager.isDisplayWatermark()},Rt([n("licenseManager")],e.prototype,"licenseManager",void 0),Rt([o("eLicenseTextRef")],e.prototype,"eLicenseTextRef",void 0),Rt([i],e.prototype,"postConstruct",null),e}(a),Ft={version:"30.2.0",moduleName:s.EnterpriseCoreModule,beans:[Mt],agStackComponents:[{componentName:"AgWatermark",componentClass:kt}]},It=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Lt=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},Nt=function(t){function e(e){var r=t.call(this,'\n            <div class="ag-advanced-filter-header" role="row">\n            </div>')||this;return r.enabled=e,r}return It(e,t),e.prototype.postConstruct=function(){var t=this;this.setupAdvancedFilter(this.enabled),this.addDestroyFunc((function(){return t.destroyBean(t.eAdvancedFilter)})),this.addManagedListener(this.eventService,l.EVENT_GRID_COLUMNS_CHANGED,(function(){return t.onGridColumnsChanged()})),this.addGuiEventListener("keydown",(function(e){return t.onKeyDown(e)})),this.addGuiEventListener("focusout",(function(e){t.getFocusableElement().contains(e.relatedTarget)||t.focusService.clearAdvancedFilterColumn()}))},e.prototype.getFocusableElement=function(){var t,e;return null!==(e=null===(t=this.eAdvancedFilter)||void 0===t?void 0:t.getGui())&&void 0!==e?e:this.getGui()},e.prototype.setEnabled=function(t){t!==this.enabled&&this.setupAdvancedFilter(t)},e.prototype.refresh=function(){var t;null===(t=this.eAdvancedFilter)||void 0===t||t.refresh()},e.prototype.getHeight=function(){return this.height},e.prototype.setInputDisabled=function(t){var e;null===(e=this.eAdvancedFilter)||void 0===e||e.setInputDisabled(t)},e.prototype.setupAdvancedFilter=function(t){var e=this.getGui();if(t){this.eAdvancedFilter=this.createBean(new Ee);var r=this.eAdvancedFilter.getGui();this.eAdvancedFilter.addCssClass("ag-advanced-filter-header-cell"),this.height=this.columnModel.getFloatingFiltersHeight();var n=this.height+"px";e.style.height=n,e.style.minHeight=n,this.setAriaRowIndex(),u.setAriaRole(r,"gridcell"),u.setAriaColIndex(r,1),this.setAriaColumnCount(r),e.appendChild(r)}else u.clearElement(e),this.destroyBean(this.eAdvancedFilter),this.height=0;u.setDisplayed(e,t),this.enabled=t},e.prototype.setAriaColumnCount=function(t){var e,r;u.setAriaColSpan(t,null!==(r=null===(e=this.columnModel.getAllGridColumns())||void 0===e?void 0:e.length)&&void 0!==r?r:0)},e.prototype.setAriaRowIndex=function(){u.setAriaRowIndex(this.getGui(),this.headerNavigationService.getHeaderRowCount())},e.prototype.onGridColumnsChanged=function(){this.eAdvancedFilter&&(this.setAriaColumnCount(this.eAdvancedFilter.getGui()),this.setAriaRowIndex())},e.prototype.onKeyDown=function(t){switch(t.key){case c.ENTER:this.hasFocus()&&this.focusService.focusInto(this.getFocusableElement())&&t.preventDefault();break;case c.ESCAPE:this.hasFocus()||this.getFocusableElement().focus();break;case c.UP:this.navigateUpDown(!0,t);break;case c.DOWN:this.navigateUpDown(!1,t);break;case c.TAB:if(this.hasFocus())this.navigateLeftRight(t);else{var e=this.focusService.findNextFocusableElement(this.getFocusableElement(),null,t.shiftKey);e?(t.preventDefault(),e.focus()):this.navigateLeftRight(t)}}},e.prototype.navigateUpDown=function(t,e){this.hasFocus()&&this.focusService.focusNextFromAdvancedFilter(t)&&e.preventDefault()},e.prototype.navigateLeftRight=function(t){(t.shiftKey?this.focusService.focusLastHeader():this.focusService.focusNextFromAdvancedFilter(!1,!0))&&t.preventDefault()},e.prototype.hasFocus=function(){return this.gridOptionsService.getDocument().activeElement===this.getFocusableElement()},Lt([n("columnModel")],e.prototype,"columnModel",void 0),Lt([n("focusService")],e.prototype,"focusService",void 0),Lt([n("headerNavigationService")],e.prototype,"headerNavigationService",void 0),Lt([i],e.prototype,"postConstruct",null),e}(a),Gt=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),jt=function(){return(jt=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},Vt=function(t){function e(e){var r=t.call(this,jt(jt({},e),{template:'\n                <div class="ag-picker-field" role="presentation">\n                    <div ref="eLabel"></div>\n                    <div ref="eWrapper" class="ag-wrapper ag-picker-collapsed">\n                        <div ref="eDisplayField" class="ag-picker-field-display"></div>\n                        <ag-input-text-field ref="eInput" class="ag-rich-select-field-input"></ag-input-text-field>\n                        <div ref="eIcon" class="ag-picker-field-icon" aria-hidden="true"></div>\n                    </div>\n                </div>'}))||this;return r.params=e,r}return Gt(e,t),e.prototype.showPicker=function(){var e=this;setTimeout((function(){return t.prototype.showPicker.call(e)}))},e.prototype.hidePicker=function(){var e=this;setTimeout((function(){return t.prototype.hidePicker.call(e)}))},e.prototype.postConstruct=function(){t.prototype.postConstruct.call(this);var e=this.params,r=e.wrapperClassName,n=e.ariaLabel;u.setDisplayed(this.eDisplayField,!1),r&&this.eWrapper.classList.add(r),u.setAriaLabelledBy(this.eWrapper,""),u.setAriaLabel(this.eWrapper,n)},e.prototype.onEnterKeyDown=function(e){u.stopPropagationForAgGrid(e),this.isPickerDisplayed?t.prototype.onEnterKeyDown.call(this,e):(e.preventDefault(),this.showPicker())},e}(p),Bt=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ut=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},Ht=function(t){function e(e,r){var n=t.call(this)||this;return n.comp=e,n.virtualList=r,n}return Bt(e,t),e.prototype.postConstruct=function(){var t=this;this.createManagedBean(new d(this.comp,this.virtualList,{dragSourceType:h.AdvancedFilterBuilder,listItemDragStartEvent:e.EVENT_DRAG_STARTED,listItemDragEndEvent:e.EVENT_DRAG_ENDED,eventSource:this,getCurrentDragValue:function(e){return t.getCurrentDragValue(e)},isMoveBlocked:function(){return!1},getNumRows:function(t){return t.getNumItems()},moveItem:function(e,r){return t.moveItem(e,r)}}))},e.prototype.getCurrentDragValue=function(t){return t.item},e.prototype.moveItem=function(t,e){this.comp.moveItem(t,e)},e.EVENT_DRAG_STARTED="advancedFilterBuilderDragStarted",e.EVENT_DRAG_ENDED="advancedFilterBuilderDragEnded",Ut([i],e.prototype,"postConstruct",null),e}(r),zt=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Wt=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},Kt=function(t){function e(e,r,n){var o=t.call(this)||this;return o.eGui=e,o.focusWrapper=r,o.eFocusableComp=n,o}return zt(e,t),e.prototype.postConstruct=function(){var t=this;this.addManagedListener(this.eGui,"keydown",(function(e){switch(e.key){case c.TAB:e.defaultPrevented||u.stopPropagationForAgGrid(e);break;case c.UP:case c.DOWN:u.stopPropagationForAgGrid(e);break;case c.ESCAPE:if(u.isStopPropagationForAgGrid(e))return;var r=t.gridOptionsService.getDocument();t.eGui.contains(r.activeElement)&&(e.preventDefault(),u.stopPropagationForAgGrid(e),t.focusWrapper.focus())}})),this.addManagedListener(this.focusWrapper,"keydown",(function(e){switch(e.key){case c.ENTER:if(u.isStopPropagationForAgGrid(e))return;t.gridOptionsService.getDocument().activeElement===t.focusWrapper&&(e.preventDefault(),u.stopPropagationForAgGrid(e),t.eFocusableComp.getFocusableElement().focus())}})),this.addManagedListener(this.focusWrapper,"focusin",(function(){t.focusWrapper.classList.add("ag-advanced-filter-builder-virtual-list-item-highlight")})),this.addManagedListener(this.focusWrapper,"focusout",(function(e){t.focusWrapper.contains(e.relatedTarget)||t.focusWrapper.classList.remove("ag-advanced-filter-builder-virtual-list-item-highlight")}))},Wt([i],e.prototype,"postConstruct",null),e}(r);function Xt(t,e){return{pickerAriaLabelKey:"ariaLabelAdvancedFilterBuilderAddField",pickerAriaLabelValue:"Advanced Filter Builder Add Field",pickerType:"ag-list",valueList:[{key:"condition",displayValue:t("advancedFilterBuilderAddCondition")},{key:"join",displayValue:t("advancedFilterBuilderAddJoin")}],valueFormatter:function(t){var e;return null==t?null:null!==(e=t.displayValue)&&void 0!==e?e:t.key},pickerIcon:"advancedFilterBuilderAdd",maxPickerWidth:(null!=e?e:120)+"px",wrapperClassName:"ag-advanced-filter-builder-item-button",ariaLabel:t("advancedFilterBuilderAddButtonTooltip")}}var Yt=function(){function t(){}return t.EVENT_ADDED="advancedFilterBuilderAdded",t.EVENT_MOVED="advancedFilterBuilderMoved",t.EVENT_REMOVED="advancedFilterBuilderRemoved",t.EVENT_VALUE_CHANGED="advancedFilterBuilderValueChanged",t.EVENT_VALID_CHANGED="advancedFilterBuilderValidChanged",t}(),qt=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Zt=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},Jt=function(t){function e(){var e=t.call(this,'\n            <div class="ag-advanced-filter-builder-item-condition" role="presentation"></div>\n        ')||this;return e.validationMessage=null,e}return qt(e,t),e.prototype.init=function(t){var e=this,r=t.item,n=t.createPill;this.item=r,this.createPill=n,this.filterModel=r.filterModel,this.setupColumnCondition(this.filterModel),this.validate(),this.addDestroyFunc((function(){return e.destroyBeans([e.eColumnPill,e.eOperatorPill,e.eOperandPill])}))},e.prototype.getDragName=function(){return this.filterModel.colId?this.advancedFilterExpressionService.parseColumnFilterModel(this.filterModel):this.getDefaultColumnDisplayValue()},e.prototype.getAriaLabel=function(){return this.advancedFilterExpressionService.translate("ariaAdvancedFilterBuilderFilterItem")+" "+this.getDragName()},e.prototype.getValidationMessage=function(){return this.validationMessage},e.prototype.getFocusableElement=function(){return this.eColumnPill.getFocusableElement()},e.prototype.setupColumnCondition=function(t){var e,r,n=this,o=this.advancedFilterExpressionService.getColumnDetails(t.colId);this.baseCellDataType=null!==(e=null==o?void 0:o.baseCellDataType)&&void 0!==e?e:"text",this.column=null==o?void 0:o.column,this.numOperands=this.getNumOperands(this.getOperatorKey()),this.eColumnPill=this.createPill({key:this.getColumnKey(),displayValue:null!==(r=this.getColumnDisplayValue())&&void 0!==r?r:this.getDefaultColumnDisplayValue(),cssClass:"ag-advanced-filter-builder-column-pill",isSelect:!0,getEditorParams:function(){return{values:n.advancedFilterExpressionService.getColumnAutocompleteEntries()}},update:function(t){return n.setColumnKey(t)},pickerAriaLabelKey:"ariaLabelAdvancedFilterBuilderColumnSelectField",pickerAriaLabelValue:"Advanced Filter Builder Column Select Field",ariaLabel:this.advancedFilterExpressionService.translate("ariaAdvancedFilterBuilderColumn")}),this.getGui().appendChild(this.eColumnPill.getGui()),u.exists(this.getColumnKey())&&(this.createOperatorPill(),this.hasOperand()&&this.createOperandPill())},e.prototype.createOperatorPill=function(){var t,e=this;this.eOperatorPill=this.createPill({key:this.getOperatorKey(),displayValue:null!==(t=this.getOperatorDisplayValue())&&void 0!==t?t:this.getDefaultOptionSelectValue(),cssClass:"ag-advanced-filter-builder-option-pill",isSelect:!0,getEditorParams:function(){return{values:e.getOperatorAutocompleteEntries()}},update:function(t){return e.setOperatorKey(t)},pickerAriaLabelKey:"ariaLabelAdvancedFilterBuilderOptionSelectField",pickerAriaLabelValue:"Advanced Filter Builder Option Select Field",ariaLabel:this.advancedFilterExpressionService.translate("ariaAdvancedFilterBuilderOption")}),this.eColumnPill.getGui().insertAdjacentElement("afterend",this.eOperatorPill.getGui())},e.prototype.createOperandPill=function(){var t,e=this,r=null!==(t=this.getOperandDisplayValue())&&void 0!==t?t:"";this.eOperandPill=this.createPill({key:r,displayValue:r,baseCellDataType:this.baseCellDataType,cssClass:"ag-advanced-filter-builder-value-pill",isSelect:!1,update:function(t){return e.setOperand(t)},ariaLabel:this.advancedFilterExpressionService.translate("ariaAdvancedFilterBuilderValue")}),this.getGui().appendChild(this.eOperandPill.getGui())},e.prototype.getColumnKey=function(){return this.filterModel.colId},e.prototype.getColumnDisplayValue=function(){return this.advancedFilterExpressionService.getColumnDisplayValue(this.filterModel)},e.prototype.getOperatorKey=function(){return this.filterModel.type},e.prototype.getOperatorDisplayValue=function(){return this.advancedFilterExpressionService.getOperatorDisplayValue(this.filterModel)},e.prototype.getOperandDisplayValue=function(){return this.advancedFilterExpressionService.getOperandDisplayValue(this.filterModel,!0)},e.prototype.hasOperand=function(){return this.numOperands>0},e.prototype.getOperatorAutocompleteEntries=function(){return this.column?this.advancedFilterExpressionService.getOperatorAutocompleteEntries(this.column,this.baseCellDataType):[]},e.prototype.setColumnKey=function(t){var e;this.eOperatorPill||this.createOperatorPill();var r=this.advancedFilterExpressionService.getColumnDetails(t);this.column=null==r?void 0:r.column;var n=null!==(e=null==r?void 0:r.baseCellDataType)&&void 0!==e?e:"text";this.baseCellDataType!==n&&(this.baseCellDataType=n,this.setOperatorKey(void 0),this.eOperatorPill&&(u.removeFromParent(this.eOperatorPill.getGui()),this.destroyBean(this.eOperatorPill),this.createOperatorPill()),this.validate()),this.filterModel.colId=t,this.filterModel.filterType=this.baseCellDataType},e.prototype.setOperatorKey=function(t){var e=this.getNumOperands(t);e!==this.numOperands&&(this.numOperands=e,0===e?this.destroyOperandPill():(this.createOperandPill(),"number"!==this.baseCellDataType&&this.setOperand(""))),this.filterModel.type=t,this.validate()},e.prototype.setOperand=function(t){var e,r=t;this.column&&(r=null!==(e=this.advancedFilterExpressionService.getOperandModelValue(t,this.baseCellDataType,this.column))&&void 0!==e?e:""),this.filterModel.filter=r,this.validate()},e.prototype.getNumOperands=function(t){var e,r;return null!==(r=null===(e=this.advancedFilterExpressionService.getExpressionOperator(this.baseCellDataType,t))||void 0===e?void 0:e.numOperands)&&void 0!==r?r:0},e.prototype.destroyOperandPill=function(){delete this.filterModel.filter,this.getGui().removeChild(this.eOperandPill.getGui()),this.destroyBean(this.eOperandPill),this.eOperandPill=void 0},e.prototype.validate=function(){var t=null;u.exists(this.getColumnKey())?u.exists(this.getOperatorKey())?this.numOperands>0&&!u.exists(this.getOperandDisplayValue())&&(t=this.advancedFilterExpressionService.translate("advancedFilterBuilderValidationEnterValue")):t=this.advancedFilterExpressionService.translate("advancedFilterBuilderValidationSelectOption"):t=this.advancedFilterExpressionService.translate("advancedFilterBuilderValidationSelectColumn"),this.item.valid=!t,t!==this.validationMessage&&(this.validationMessage=t,this.dispatchEvent({type:Yt.EVENT_VALID_CHANGED}))},e.prototype.getDefaultColumnDisplayValue=function(){return this.advancedFilterExpressionService.translate("advancedFilterBuilderSelectColumn")},e.prototype.getDefaultOptionSelectValue=function(){return this.advancedFilterExpressionService.translate("advancedFilterBuilderSelectOption")},Zt([n("advancedFilterExpressionService")],e.prototype,"advancedFilterExpressionService",void 0),Zt([n("valueParserService")],e.prototype,"valueParserService",void 0),e}(a),$t=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Qt=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},te=function(t){function e(e){var r=t.call(this,'\n            <div class="ag-advanced-filter-builder-pill-wrapper" role="presentation">\n                <div ref="ePill" class="ag-advanced-filter-builder-pill" role="button">\n                    <span ref="eLabel" class="ag-advanced-filter-builder-pill-display"></span>\n                </div>\n            </div>\n        ')||this;return r.params=e,r.value=e.value,r}return $t(e,t),e.prototype.postConstruct=function(){var t=this,e=this.params,r=e.cssClass,n=e.ariaLabel;this.ePill.classList.add(r),this.activateTabIndex([this.ePill]),this.eLabel.id=""+this.getCompId(),u.setAriaDescribedBy(this.ePill,this.eLabel.id),u.setAriaLabel(this.ePill,n),this.renderValue(),this.addManagedListener(this.ePill,"click",(function(e){e.preventDefault(),t.showEditor()})),this.addManagedListener(this.ePill,"keydown",(function(e){switch(e.key){case c.ENTER:e.preventDefault(),u.stopPropagationForAgGrid(e),t.showEditor()}})),this.addDestroyFunc((function(){return t.destroyBean(t.eEditor)}))},e.prototype.getFocusableElement=function(){return this.ePill},e.prototype.showEditor=function(){var t=this;if(!this.eEditor){u.setDisplayed(this.ePill,!1),this.eEditor=this.createEditorComp(this.params.type),this.eEditor.setValue(this.value);var e=this.eEditor.getGui();this.eEditor.addManagedListener(e,"keydown",(function(e){switch(e.key){case c.ENTER:e.preventDefault(),u.stopPropagationForAgGrid(e),t.updateValue(!0);break;case c.ESCAPE:e.preventDefault(),u.stopPropagationForAgGrid(e),t.hideEditor(!0)}})),this.eEditor.addManagedListener(e,"focusout",(function(){t.updateValue(!1)})),this.getGui().appendChild(e),this.eEditor.getFocusableElement().focus()}},e.prototype.createEditorComp=function(t){var e;switch(t){case"text":e=new y;break;case"number":e=new v;break;case"date":e=new f}return this.createBean(e)},e.prototype.hideEditor=function(t){var e=this.eEditor;e&&(this.eEditor=void 0,this.getGui().removeChild(e.getGui()),this.destroyBean(e),u.setDisplayed(this.ePill,!0),t&&this.ePill.focus())},e.prototype.renderValue=function(){var t;this.eLabel.classList.remove("ag-advanced-filter-builder-value-empty","ag-advanced-filter-builder-value-number","ag-advanced-filter-builder-value-text"),u.exists(this.value)?"number"===this.params.type?(t=this.value,this.eLabel.classList.add("ag-advanced-filter-builder-value-number")):(t='"'+this.value+'"',this.eLabel.classList.add("ag-advanced-filter-builder-value-text")):(t=this.advancedFilterExpressionService.translate("advancedFilterBuilderEnterValue"),this.eLabel.classList.add("ag-advanced-filter-builder-value-empty")),this.eLabel.innerText=t},e.prototype.updateValue=function(t){var e;if(this.eEditor){var r=null!==(e=this.eEditor.getValue())&&void 0!==e?e:"";this.dispatchEvent({type:l.EVENT_FIELD_VALUE_CHANGED,value:r}),this.value=r,this.renderValue(),this.hideEditor(t)}},Qt([o("ePill")],e.prototype,"ePill",void 0),Qt([o("eLabel")],e.prototype,"eLabel",void 0),Qt([n("advancedFilterExpressionService")],e.prototype,"advancedFilterExpressionService",void 0),Qt([i],e.prototype,"postConstruct",null),e}(a),ee=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),re=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},ne=function(t){function e(){return t.call(this,'\n            <div class="ag-advanced-filter-builder-item-condition" role="presentation"></div>\n        ')||this}return ee(e,t),e.prototype.init=function(t){var e=this,r=t.item,n=t.createPill,o=r.filterModel;this.filterModel=o,this.ePill=n({key:o.type,displayValue:this.advancedFilterExpressionService.parseJoinOperator(o),cssClass:"ag-advanced-filter-builder-join-pill",isSelect:!0,getEditorParams:function(){return{values:e.advancedFilterExpressionService.getJoinOperatorAutocompleteEntries()}},update:function(t){return o.type=t},pickerAriaLabelKey:"ariaLabelAdvancedFilterBuilderJoinSelectField",pickerAriaLabelValue:"Advanced Filter Builder Join Operator Select Field",ariaLabel:this.advancedFilterExpressionService.translate("ariaAdvancedFilterBuilderJoinOperator")}),this.getGui().appendChild(this.ePill.getGui()),this.addDestroyFunc((function(){return e.destroyBean(e.ePill)}))},e.prototype.getDragName=function(){return this.advancedFilterExpressionService.parseJoinOperator(this.filterModel)},e.prototype.getAriaLabel=function(){return this.advancedFilterExpressionService.translate("ariaAdvancedFilterBuilderGroupItem")+" "+this.getDragName()},e.prototype.getValidationMessage=function(){return null},e.prototype.getFocusableElement=function(){return this.ePill.getFocusableElement()},re([n("advancedFilterExpressionService")],e.prototype,"advancedFilterExpressionService",void 0),e}(a),oe=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ie=function(){return(ie=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},ae=function(t){function e(e){var r=t.call(this,ie(ie({},e),{template:'\n                <div class="ag-picker-field ag-advanced-filter-builder-pill-wrapper" role="presentation">\n                    <div ref="eLabel"></div>\n                    <div ref="eWrapper" class="ag-wrapper ag-advanced-filter-builder-pill ag-picker-collapsed">\n                        <div ref="eDisplayField" class="ag-picker-field-display ag-advanced-filter-builder-pill-display"></div>\n                        <ag-input-text-field ref="eInput" class="ag-rich-select-field-input"></ag-input-text-field>\n                        <div ref="eIcon" class="ag-picker-field-icon" aria-hidden="true"></div>\n                    </div>\n                </div>'}))||this;return r.params=e,r}return oe(e,t),e.prototype.getFocusableElement=function(){return this.eWrapper},e.prototype.showPicker=function(){var e=this;setTimeout((function(){return t.prototype.showPicker.call(e)}))},e.prototype.hidePicker=function(){var e=this;setTimeout((function(){return t.prototype.hidePicker.call(e)}))},e.prototype.postConstruct=function(){t.prototype.postConstruct.call(this);var e=this.params,r=e.wrapperClassName,n=e.ariaLabel;this.eWrapper.classList.add(r),u.setAriaLabelledBy(this.eWrapper,""),u.setAriaLabel(this.eWrapper,n)},e.prototype.createPickerComponent=function(){var e;if(!this.values){var r=this.params.getEditorParams().values;this.values=r;var n=this.value.key,o=null!==(e=r.find((function(t){return t.key===n})))&&void 0!==e?e:{key:n,displayValue:this.value.displayValue};this.value=o}return t.prototype.createPickerComponent.call(this)},e.prototype.onEnterKeyDown=function(e){u.stopPropagationForAgGrid(e),this.isPickerDisplayed?t.prototype.onEnterKeyDown.call(this,e):(e.preventDefault(),this.showPicker())},e}(p),se=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),le=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},ue=function(t){function e(e,r,n){var o=t.call(this,'\n            <div class="ag-advanced-filter-builder-item-wrapper" role="presentation">\n                <div ref="eItem" class="ag-advanced-filter-builder-item" role="presentation">\n                    <div ref="eTreeLines" class="ag-advanced-filter-builder-item-tree-lines" aria-hidden="true"></div>\n                    <span ref="eDragHandle" class="ag-drag-handle" aria-hidden="true"></span>\n                    <span ref="eValidation" class="ag-advanced-filter-builder-item-button ag-advanced-filter-builder-invalid" aria-hidden="true"></span>\n                </div>\n                <div ref="eButtons" class="ag-advanced-filter-builder-item-buttons">\n                    <span ref="eMoveUpButton" class="ag-advanced-filter-builder-item-button" role="button"></span>\n                    <span ref="eMoveDownButton" class="ag-advanced-filter-builder-item-button" role="button"></span>\n                    <div ref="eAddButton" role="presentation"></div>\n                    <span ref="eRemoveButton" class="ag-advanced-filter-builder-item-button" role="button"></span>\n                </div>\n            </div>\n        ')||this;return o.item=e,o.dragFeature=r,o.focusWrapper=n,o.moveUpDisabled=!1,o.moveDownDisabled=!1,o}return se(e,t),e.prototype.postConstruct=function(){var t=this,e=this.item,r=e.filterModel,n=e.level,o=e.showMove,i="join"===r.filterType;if(this.ePillWrapper=this.createManagedBean(i?new ne:new Jt),this.ePillWrapper.init({item:this.item,createPill:function(e){return t.createPill(e)}}),this.eDragHandle.insertAdjacentElement("afterend",this.ePillWrapper.getGui()),0===n){var a=document.createElement("div");a.classList.add("ag-advanced-filter-builder-item-tree-line-vertical-bottom"),a.classList.add("ag-advanced-filter-builder-item-tree-line-root"),this.eTreeLines.appendChild(a),u.setDisplayed(this.eDragHandle,!1),u.setDisplayed(this.eButtons,!1),u.setAriaExpanded(this.focusWrapper,!0)}else this.setupTreeLines(n),this.eDragHandle.appendChild(u.createIconNoSpan("advancedFilterBuilderDrag",this.gridOptionsService)),this.setupValidation(),this.setupMoveButtons(o),this.setupAddButton(),this.setupRemoveButton(),this.setupDragging(),this.updateAriaExpanded();u.setAriaLevel(this.focusWrapper,n+1),this.initialiseTabGuard({}),this.createManagedBean(new Kt(this.getGui(),this.focusWrapper,this.ePillWrapper)),this.updateAriaLabel(),this.addManagedListener(this.ePillWrapper,Yt.EVENT_VALUE_CHANGED,(function(){return t.dispatchEvent({type:Yt.EVENT_VALUE_CHANGED})})),this.addManagedListener(this.ePillWrapper,Yt.EVENT_VALID_CHANGED,(function(){return t.updateValidity()}))},e.prototype.setState=function(t){if(0!==this.item.level){var e=this.item.showMove,r=t.disableMoveUp,n=t.disableMoveDown,o=t.treeLines,i=t.showStartTreeLine;this.updateTreeLines(o,i),this.updateAriaExpanded(),e&&(this.moveUpDisabled=!!r,this.moveDownDisabled=!!n,this.eMoveUpButton.classList.toggle("ag-advanced-filter-builder-item-button-disabled",r),this.eMoveDownButton.classList.toggle("ag-advanced-filter-builder-item-button-disabled",n),u.setAriaDisabled(this.eMoveUpButton,!!r),u.setAriaDisabled(this.eMoveDownButton,!!n),this.moveUpTooltipFeature.refreshToolTip(),this.moveDownTooltipFeature.refreshToolTip())}},e.prototype.focusMoveButton=function(t){(t?this.eMoveUpButton:this.eMoveDownButton).focus()},e.prototype.afterAdd=function(){this.ePillWrapper.getFocusableElement().focus()},e.prototype.setupTreeLines=function(t){for(var e=0;e<t;e++){var r=document.createElement("div");this.eTreeLines.appendChild(r)}},e.prototype.updateTreeLines=function(t,e){for(var r=t.length-1,n=this.eTreeLines.children,o=0;o<r;o++){var i=n.item(o);i&&i.classList.toggle("ag-advanced-filter-builder-item-tree-line-vertical",!t[o])}var a=n.item(r);if(a){a.classList.add("ag-advanced-filter-builder-item-tree-line-horizontal");var s=t[r];a.classList.toggle("ag-advanced-filter-builder-item-tree-line-vertical-top",s),a.classList.toggle("ag-advanced-filter-builder-item-tree-line-vertical",!s)}this.eDragHandle.classList.toggle("ag-advanced-filter-builder-item-tree-line-vertical-bottom",e)},e.prototype.setupValidation=function(){var t=this;this.eValidation.appendChild(u.createIconNoSpan("advancedFilterBuilderInvalid",this.gridOptionsService)),this.validationTooltipFeature=this.createManagedBean(new g({getGui:function(){return t.eValidation},getLocation:function(){return"advancedFilter"},getTooltipValue:function(){return t.ePillWrapper.getValidationMessage()},getTooltipShowDelayOverride:function(){return 1e3}},this.beans)),this.validationTooltipFeature.setComp(this.eValidation),this.updateValidity()},e.prototype.setupAddButton=function(){var t,e=this,r=Xt((function(t){return e.advancedFilterExpressionService.translate(t)}),null===(t=this.gridOptionsService.get("advancedFilterBuilderParams"))||void 0===t?void 0:t.addSelectWidth),n=this.createManagedBean(new Vt(r));this.addManagedListener(n,l.EVENT_FIELD_PICKER_VALUE_SELECTED,(function(t){var r=t.value;return e.dispatchEvent({type:Yt.EVENT_ADDED,item:e.item,isJoin:"join"===r.key})})),this.eAddButton.appendChild(n.getGui()),this.createManagedBean(new g({getGui:function(){return e.eAddButton},getLocation:function(){return"advancedFilter"},getTooltipValue:function(){return e.advancedFilterExpressionService.translate("advancedFilterBuilderAddButtonTooltip")}},this.beans)).setComp(this.eAddButton)},e.prototype.setupRemoveButton=function(){var t=this;this.eRemoveButton.appendChild(u.createIconNoSpan("advancedFilterBuilderRemove",this.gridOptionsService)),this.addManagedListener(this.eRemoveButton,"click",(function(){return t.removeItem()})),this.addManagedListener(this.eRemoveButton,"keydown",(function(e){switch(e.key){case c.ENTER:e.preventDefault(),u.stopPropagationForAgGrid(e),t.removeItem()}})),this.createManagedBean(new g({getGui:function(){return t.eRemoveButton},getLocation:function(){return"advancedFilter"},getTooltipValue:function(){return t.advancedFilterExpressionService.translate("advancedFilterBuilderRemoveButtonTooltip")}},this.beans)).setComp(this.eRemoveButton),u.setAriaLabel(this.eRemoveButton,this.advancedFilterExpressionService.translate("advancedFilterBuilderRemoveButtonTooltip")),this.activateTabIndex([this.eRemoveButton])},e.prototype.setupMoveButtons=function(t){var e=this;t?(this.eMoveUpButton.appendChild(u.createIconNoSpan("advancedFilterBuilderMoveUp",this.gridOptionsService)),this.addManagedListener(this.eMoveUpButton,"click",(function(){return e.moveItem(!0)})),this.addManagedListener(this.eMoveUpButton,"keydown",(function(t){switch(t.key){case c.ENTER:t.preventDefault(),u.stopPropagationForAgGrid(t),e.moveItem(!0)}})),this.moveUpTooltipFeature=this.createManagedBean(new g({getGui:function(){return e.eMoveUpButton},getLocation:function(){return"advancedFilter"},getTooltipValue:function(){return e.moveUpDisabled?null:e.advancedFilterExpressionService.translate("advancedFilterBuilderMoveUpButtonTooltip")}},this.beans)),this.moveUpTooltipFeature.setComp(this.eMoveUpButton),u.setAriaLabel(this.eMoveUpButton,this.advancedFilterExpressionService.translate("advancedFilterBuilderMoveUpButtonTooltip")),this.eMoveDownButton.appendChild(u.createIconNoSpan("advancedFilterBuilderMoveDown",this.gridOptionsService)),this.addManagedListener(this.eMoveDownButton,"click",(function(){return e.moveItem(!1)})),this.addManagedListener(this.eMoveDownButton,"keydown",(function(t){switch(t.key){case c.ENTER:t.preventDefault(),u.stopPropagationForAgGrid(t),e.moveItem(!1)}})),this.moveDownTooltipFeature=this.createManagedBean(new g({getGui:function(){return e.eMoveDownButton},getLocation:function(){return"advancedFilter"},getTooltipValue:function(){return e.moveDownDisabled?null:e.advancedFilterExpressionService.translate("advancedFilterBuilderMoveDownButtonTooltip")}},this.beans)),this.moveDownTooltipFeature.setComp(this.eMoveDownButton),u.setAriaLabel(this.eMoveDownButton,this.advancedFilterExpressionService.translate("advancedFilterBuilderMoveDownButtonTooltip")),this.activateTabIndex([this.eMoveUpButton,this.eMoveDownButton])):(u.setDisplayed(this.eMoveUpButton,!1),u.setDisplayed(this.eMoveDownButton,!1))},e.prototype.updateValidity=function(){u.setVisible(this.eValidation,!this.item.valid),this.validationTooltipFeature.refreshToolTip(),this.updateAriaLabel()},e.prototype.createPill=function(t){var e,r,n=this,o=t.key,i=t.displayValue,a=t.cssClass,s=t.update,u=t.ariaLabel,c=function(t){null!=t&&(s(t),n.dispatchEvent({type:Yt.EVENT_VALUE_CHANGED}))};if(t.isSelect){var p=t.getEditorParams,d=t.pickerAriaLabelKey,h=t.pickerAriaLabelValue,f=this.gridOptionsService.get("advancedFilterBuilderParams"),v=(null!==(e=null==f?void 0:f.pillSelectMinWidth)&&void 0!==e?e:140)+"px",y=(null!==(r=null==f?void 0:f.pillSelectMaxWidth)&&void 0!==r?r:200)+"px",g=this.createBean(new ae({pickerAriaLabelKey:d,pickerAriaLabelValue:h,pickerType:"ag-list",value:{key:o,displayValue:i},valueFormatter:function(t){var e;return null==t?null:null!==(e=t.displayValue)&&void 0!==e?e:t.key},variableWidth:!0,minPickerWidth:v,maxPickerWidth:y,getEditorParams:p,wrapperClassName:a,ariaLabel:u}));return this.addManagedListener(g,l.EVENT_FIELD_PICKER_VALUE_SELECTED,(function(t){var e=t.value;return c(null==e?void 0:e.key)})),g}g=this.createBean(new te({value:i,cssClass:a,type:this.getInputType(t.baseCellDataType),ariaLabel:u}));return this.addManagedListener(g,l.EVENT_FIELD_VALUE_CHANGED,(function(t){var e=t.value;return c(e)})),g},e.prototype.getInputType=function(t){switch(t){case"text":case"object":case"boolean":return"text";case"number":return"number";case"date":case"dateString":return"date"}},e.prototype.setupDragging=function(){var t=this,e={type:h.AdvancedFilterBuilder,eElement:this.eDragHandle,dragItemName:function(){return t.ePillWrapper.getDragName()},getDefaultIconName:function(){return m.ICON_NOT_ALLOWED},getDragItem:function(){return{}},onDragStarted:function(){return t.dragFeature.dispatchEvent({type:Ht.EVENT_DRAG_STARTED,item:t.item})},onDragStopped:function(){return t.dragFeature.dispatchEvent({type:Ht.EVENT_DRAG_ENDED})}};this.dragAndDropService.addDragSource(e,!0),this.addDestroyFunc((function(){return t.dragAndDropService.removeDragSource(e)}))},e.prototype.updateAriaLabel=function(){var t,e=this.ePillWrapper.getAriaLabel(),r=""+(this.item.level+1),n=this.ePillWrapper.getValidationMessage();t=n?this.advancedFilterExpressionService.translate("ariaAdvancedFilterBuilderItemValidation",[e,r,n]):this.advancedFilterExpressionService.translate("ariaAdvancedFilterBuilderItem",[e,r]),u.setAriaLabel(this.focusWrapper,t)},e.prototype.updateAriaExpanded=function(){u.removeAriaExpanded(this.focusWrapper);var t=this.item.filterModel;"join"===(null==t?void 0:t.filterType)&&t.conditions.length&&u.setAriaExpanded(this.focusWrapper,!0)},e.prototype.removeItem=function(){this.dispatchEvent({type:Yt.EVENT_REMOVED,item:this.item})},e.prototype.moveItem=function(t){this.dispatchEvent({type:Yt.EVENT_MOVED,item:this.item,backwards:t})},le([o("eTreeLines")],e.prototype,"eTreeLines",void 0),le([o("eDragHandle")],e.prototype,"eDragHandle",void 0),le([o("eItem")],e.prototype,"eItem",void 0),le([o("eButtons")],e.prototype,"eButtons",void 0),le([o("eValidation")],e.prototype,"eValidation",void 0),le([o("eMoveUpButton")],e.prototype,"eMoveUpButton",void 0),le([o("eMoveDownButton")],e.prototype,"eMoveDownButton",void 0),le([o("eAddButton")],e.prototype,"eAddButton",void 0),le([o("eRemoveButton")],e.prototype,"eRemoveButton",void 0),le([n("beans")],e.prototype,"beans",void 0),le([n("dragAndDropService")],e.prototype,"dragAndDropService",void 0),le([n("advancedFilterExpressionService")],e.prototype,"advancedFilterExpressionService",void 0),le([i],e.prototype,"postConstruct",null),e}(b),ce=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),pe=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},de=function(t){function e(e,r){var n=t.call(this,'\n            <div class="ag-advanced-filter-builder-item-wrapper" role="presentation">\n                <div ref="eItem" class="ag-advanced-filter-builder-item" role="presentation">\n                    <div class="ag-advanced-filter-builder-item-tree-lines" aria-hidden="true">\n                        <div class="ag-advanced-filter-builder-item-tree-line-vertical-top ag-advanced-filter-builder-item-tree-line-horizontal"></div>\n                    </div>\n                </div>\n            </div>\n        ')||this;return n.item=e,n.focusWrapper=r,n}return ce(e,t),e.prototype.postConstruct=function(){var t,e=this;u.setAriaLevel(this.focusWrapper,2);var r=Xt((function(t){return e.advancedFilterExpressionService.translate(t)}),null===(t=this.gridOptionsService.get("advancedFilterBuilderParams"))||void 0===t?void 0:t.addSelectWidth),n=this.createManagedBean(new Vt(r));this.addManagedListener(n,l.EVENT_FIELD_PICKER_VALUE_SELECTED,(function(t){var r=t.value;e.dispatchEvent({type:Yt.EVENT_ADDED,item:e.item,isJoin:"join"===r.key})})),this.eItem.appendChild(n.getGui()),this.createManagedBean(new g({getGui:function(){return n.getGui()},getLocation:function(){return"advancedFilter"},getTooltipValue:function(){return e.advancedFilterExpressionService.translate("advancedFilterBuilderAddButtonTooltip")}},this.beans)).setComp(n.getGui()),this.createManagedBean(new Kt(this.getGui(),this.focusWrapper,n)),u.setAriaLabel(this.focusWrapper,this.advancedFilterExpressionService.translate("ariaAdvancedFilterBuilderItem",[this.advancedFilterExpressionService.translate("advancedFilterBuilderAddButtonTooltip"),""+(this.item.level+1)]))},e.prototype.afterAdd=function(){},pe([n("beans")],e.prototype,"beans",void 0),pe([n("advancedFilterExpressionService")],e.prototype,"advancedFilterExpressionService",void 0),pe([o("eItem")],e.prototype,"eItem",void 0),pe([i],e.prototype,"postConstruct",null),e}(a),he=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),fe=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},ve=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},ye=function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t},ge=function(t){function e(){var e=t.call(this,'\n            <div role="presentation" class="ag-advanced-filter-builder" tabindex="-1">\n                <div role="presentation" class="ag-advanced-filter-builder-list" ref="eList"></div>\n                <div role="presentation" class="ag-advanced-filter-builder-button-panel">\n                    <button class="ag-button ag-standard-button ag-advanced-filter-builder-apply-button" ref="eApplyFilterButton"></button>\n                    <button class="ag-button ag-standard-button ag-advanced-filter-builder-cancel-button" ref="eCancelFilterButton"></button>\n                </div>\n            </div>')||this;return e.validationMessage=null,e}return he(e,t),e.prototype.postConstruct=function(){var t,e=this,r=(null!==(t=this.gridOptionsService.get("advancedFilterBuilderParams"))&&void 0!==t?t:{}).showMoveButtons;this.showMove=!!r,this.addManagedPropertyListener("advancedFilterBuilderParams",(function(t){var r=t.currentValue;e.showMove=!!(null==r?void 0:r.showMoveButtons),e.refreshList(!1)})),this.filterModel=this.setupFilterModel(),this.setupVirtualList(),this.dragFeature=this.createManagedBean(new Ht(this,this.virtualList)),this.setupButtons()},e.prototype.refresh=function(){var t=this.virtualList.getLastFocusedRow();this.setupFilterModel(),this.validateItems(),this.refreshList(!1),null!=t&&(this.virtualList.getComponentAt(t)||(t=0),this.virtualList.focusRow(t))},e.prototype.getNumItems=function(){return this.items.length},e.prototype.moveItem=function(t,e){e&&t&&this.moveItemToIndex(t,e.rowIndex,e.position)},e.prototype.afterGuiAttached=function(){this.virtualList.focusRow(0)},e.prototype.setupVirtualList=function(){var t=this;this.virtualList=this.createManagedBean(new C({cssIdentifier:"advanced-filter-builder",ariaRole:"tree",listName:this.advancedFilterExpressionService.translate("ariaAdvancedFilterBuilderList")})),this.virtualList.setComponentCreator(this.createItemComponent.bind(this)),this.virtualList.setComponentUpdater(this.updateItemComponent.bind(this)),this.virtualList.setRowHeight(40),this.eList.appendChild(this.virtualList.getGui()),this.virtualList.setModel({getRowCount:function(){return t.items.length},getRow:function(e){return t.items[e]},areRowsEqual:function(t,e){return t===e}}),this.buildList(),this.virtualList.refresh()},e.prototype.setupButtons=function(){var t=this;this.eApplyFilterButton.innerText=this.advancedFilterExpressionService.translate("advancedFilterBuilderApply"),this.activateTabIndex([this.eApplyFilterButton]),this.addManagedListener(this.eApplyFilterButton,"click",(function(){t.advancedFilterService.setModel(t.filterModel),t.filterManager.onFilterChanged({source:"advancedFilter"}),t.close()})),this.validationTooltipFeature=this.createManagedBean(new g({getGui:function(){return t.eApplyFilterButton},getLocation:function(){return"advancedFilter"},getTooltipValue:function(){return t.validationMessage},getTooltipShowDelayOverride:function(){return 1e3}},this.beans)),this.validationTooltipFeature.setComp(this.eApplyFilterButton),this.validate(),this.addManagedListener(this.eApplyFilterButton,"mouseenter",(function(){return t.addOrRemoveCssClass("ag-advanced-filter-builder-validation",!0)})),this.addManagedListener(this.eApplyFilterButton,"mouseleave",(function(){return t.addOrRemoveCssClass("ag-advanced-filter-builder-validation",!1)})),this.eCancelFilterButton.innerText=this.advancedFilterExpressionService.translate("advancedFilterBuilderCancel"),this.activateTabIndex([this.eCancelFilterButton]),this.addManagedListener(this.eCancelFilterButton,"click",(function(){return t.close()}))},e.prototype.removeItemFromParent=function(t){var e=t.parent.conditions.indexOf(t.filterModel);return t.parent.conditions.splice(e,1),e},e.prototype.moveItemToIndex=function(t,e,r){var n,o,i=this.items[e],a="join"===(null===(n=i.filterModel)||void 0===n?void 0:n.filterType)&&"bottom"===r,s=a?i.filterModel:i.parent;s&&(this.isChildOrSelf(s,t.filterModel)||i===t||(this.removeItemFromParent(t),a?o=0:-1===(o=s.conditions.indexOf(i.filterModel))?o=s.conditions.length:"bottom"===r&&(o+=1),s.conditions.splice(o,0,t.filterModel),this.refreshList(!1)))},e.prototype.isChildOrSelf=function(t,e){var r=this;return t===e||"join"===e.filterType&&e.conditions.some((function(e){return r.isChildOrSelf(t,e)}))},e.prototype.setupFilterModel=function(){var t=this.formatFilterModel(this.advancedFilterService.getModel());return this.stringifiedModel=JSON.stringify(t),t},e.prototype.formatFilterModel=function(t){return"join"!==(t=null!=t?t:{filterType:"join",type:"AND",conditions:[]}).filterType&&(t={filterType:"join",type:"AND",conditions:[t]}),t},e.prototype.buildList=function(){var t=this,e=function(r,n,o,i){n.push({filterModel:r,level:o,parent:i,valid:!0,showMove:t.showMove}),"join"===r.filterType&&(r.conditions.forEach((function(t){return e(t,n,o+1,r)})),0===o&&n.push({filterModel:null,level:o+1,parent:r,valid:!0}))};this.items=[],e(this.filterModel,this.items,0)},e.prototype.refreshList=function(t){if(!t){var e=[];this.items.forEach((function(t){t.valid||e.push(t.filterModel)})),this.buildList(),e.length&&this.items.forEach((function(t){t.filterModel&&e.includes(t.filterModel)&&(t.valid=!1)}))}this.virtualList.refresh(t),this.validate()},e.prototype.updateItemComponent=function(t,e){var r=this,n=this.items.indexOf(t),o=function(t,e){var n=r.items.find((function(e){return e.filterModel===t})),i=null==n?void 0:n.parent;if(i){var a=i.conditions;o(i,e),e.push(a[a.length-1]===t)}},i=[],a=t.filterModel;a&&(o(a,i),i[0]=!1);var s="join"===(null==a?void 0:a.filterType)&&!!a.conditions.length;e.setState({disableMoveUp:1===n,disableMoveDown:!this.canMoveDown(t,n),treeLines:i,showStartTreeLine:s})},e.prototype.createItemComponent=function(t,e){var r=this,n=this.createBean(t.filterModel?new ue(t,this.dragFeature,e):new de(t,e));return n.addManagedListener(n,Yt.EVENT_REMOVED,(function(t){var e=t.item;return r.removeItem(e)})),n.addManagedListener(n,Yt.EVENT_VALUE_CHANGED,(function(){return r.validate()})),n.addManagedListener(n,Yt.EVENT_ADDED,(function(t){var e=t.item,n=t.isJoin;return r.addItem(e,n)})),n.addManagedListener(n,Yt.EVENT_MOVED,(function(t){var e=t.item,n=t.backwards;return r.moveItemUpDown(e,n)})),n instanceof ue&&this.updateItemComponent(t,n),n},e.prototype.addItem=function(t,e){var r,n,o=t.parent,i=t.level,a=t.filterModel,s="join"===(null==a?void 0:a.filterType),l=e?{filterType:"join",type:"AND",conditions:[]}:{},u=s?a:o,c=s?0:u.conditions.indexOf(a);c>=0?(s||(c+=1),u.conditions.splice(c,0,l)):u.conditions.push(l);var p=this.items.indexOf(t),d=p>=0;if(d){t.filterModel&&p++;var h=[{filterModel:l,level:s?i+1:i,parent:u,valid:e,showMove:this.showMove}];(r=this.items).splice.apply(r,ye([p,0],ve(h)))}this.refreshList(d),d&&(null===(n=this.virtualList.getComponentAt(p))||void 0===n||n.afterAdd())},e.prototype.removeItem=function(t){var e,r=t.parent,n=t.filterModel,o=r.conditions.indexOf(n);r.conditions.splice(o,1);var i="join"===(null===(e=t.filterModel)||void 0===e?void 0:e.filterType),a=this.items.indexOf(t),s=!i&&a>=0;s&&this.items.splice(a,1),this.refreshList(s),a>=0&&this.virtualList.focusRow(a)},e.prototype.moveItemUpDown=function(t,e){var r=this.items.indexOf(t),n=e?r-1:r+1;if(0!==n&&(e||this.canMoveDown(t,r))){var o=this.items[n],i=this.removeItemFromParent(t),a=t.level,s=t.filterModel,l=t.parent,u=o.level,c=o.filterModel,p=o.parent;if(e)if(u===a&&"join"===c.filterType)c.conditions.push(s);else if(u<=a){var d=p.conditions.indexOf(c);p.conditions.splice(d,0,s)}else{l.conditions[i-1].conditions.push(s)}else if(u===a)if("join"===c.filterType)c.conditions.splice(0,0,s);else{var h=p.conditions.indexOf(c);p.conditions.splice(h+1,0,s)}else if(i<l.conditions.length)l.conditions.splice(i+1,0,s);else{var f=this.items.find((function(t){return t.filterModel===l})),v=f.parent.conditions.indexOf(f.filterModel)+1;f.parent.conditions.splice(v,0,s)}this.refreshList(!1);var y=this.items.findIndex((function(t){return t.filterModel===s}));if(y>=0){var g=this.virtualList.getComponentAt(y);g instanceof ue&&g.focusMoveButton(e)}}},e.prototype.canMoveDown=function(t,e){return!(1===t.level&&e===this.items.length-2||1===t.level&&t.parent.conditions[t.parent.conditions.length-1]===t.filterModel)},e.prototype.close=function(){this.advancedFilterService.getCtrl().toggleFilterBuilder("ui")},e.prototype.validate=function(){var t=!this.items.every((function(t){return t.valid}));t?this.validationMessage=this.advancedFilterExpressionService.translate("advancedFilterBuilderValidationIncomplete"):(t=JSON.stringify(this.filterModel)===this.stringifiedModel,this.validationMessage=t?this.advancedFilterExpressionService.translate("advancedFilterBuilderValidationAlreadyApplied"):null),u.setDisabled(this.eApplyFilterButton,t),this.validationTooltipFeature.refreshToolTip()},e.prototype.validateItems=function(){var t=this,e=function(t){t.type=void 0},r=function(t){delete t.filter};this.items.forEach((function(n){if(n.valid&&n.filterModel&&"join"!==n.filterModel.filterType){var o=n.filterModel,i=o.colId,a=t.advancedFilterExpressionService.getColumnAutocompleteEntries().find((function(t){return t.key===i})),s=t.advancedFilterExpressionService.getColumnDetails(o.colId);if(!a||!s)return n.valid=!1,o.colId=void 0,e(o),void r(o);var l=t.advancedFilterExpressionService.getDataTypeExpressionOperator(s.baseCellDataType).operators[o.type];if(!l)return n.valid=!1,e(o),void r(o);l.numOperands>0&&!u.exists(o.filter)&&(n.valid=!1)}}))},fe([o("eList")],e.prototype,"eList",void 0),fe([o("eApplyFilterButton")],e.prototype,"eApplyFilterButton",void 0),fe([o("eCancelFilterButton")],e.prototype,"eCancelFilterButton",void 0),fe([n("filterManager")],e.prototype,"filterManager",void 0),fe([n("advancedFilterService")],e.prototype,"advancedFilterService",void 0),fe([n("advancedFilterExpressionService")],e.prototype,"advancedFilterExpressionService",void 0),fe([n("beans")],e.prototype,"beans",void 0),fe([i],e.prototype,"postConstruct",null),e}(a),me=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),be=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},Ce=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},Se=function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t},we=function(t){function e(e){var r=t.call(this)||this;return r.enabled=e,r}return me(e,t),e.prototype.postConstruct=function(){var t=this;this.hasAdvancedFilterParent=!!this.gridOptionsService.get("advancedFilterParent"),this.ctrlsService.whenReady((function(){return t.setAdvancedFilterComp()})),this.addManagedListener(this.eventService,l.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,(function(e){var r=e.enabled;return t.onEnabledChanged(r)})),this.addManagedPropertyListener("advancedFilterParent",(function(){return t.updateComps()})),this.addDestroyFunc((function(){t.destroyAdvancedFilterComp(),t.destroyBean(t.eBuilderComp),t.eBuilderDialog&&t.eBuilderDialog.isAlive()&&t.destroyBean(t.eBuilderDialog)}))},e.prototype.setupHeaderComp=function(t){this.eHeaderComp=this.createManagedBean(new Nt(this.enabled&&!this.hasAdvancedFilterParent)),t.insertAdjacentElement("beforebegin",this.eHeaderComp.getGui())},e.prototype.focusHeaderComp=function(){return!!this.eHeaderComp&&(this.eHeaderComp.getFocusableElement().focus(),!0)},e.prototype.refreshComp=function(){var t,e;null===(t=this.eFilterComp)||void 0===t||t.refresh(),null===(e=this.eHeaderComp)||void 0===e||e.refresh()},e.prototype.refreshBuilderComp=function(){var t;null===(t=this.eBuilderComp)||void 0===t||t.refresh()},e.prototype.getHeaderHeight=function(){var t,e;return null!==(e=null===(t=this.eHeaderComp)||void 0===t?void 0:t.getHeight())&&void 0!==e?e:0},e.prototype.setInputDisabled=function(t){var e,r;null===(e=this.eFilterComp)||void 0===e||e.setInputDisabled(t),null===(r=this.eHeaderComp)||void 0===r||r.setInputDisabled(t)},e.prototype.toggleFilterBuilder=function(t,r){var n=this;if(!(r&&this.eBuilderDialog||!1===r&&!this.eBuilderDialog)){if(this.eBuilderDialog)return this.builderDestroySource=t,void this.destroyBean(this.eBuilderDialog);this.setInputDisabled(!0);var o=this.getBuilderDialogSize(),i=o.width,a=o.height,s=o.minWidth;this.eBuilderComp=this.createBean(new ge),this.eBuilderDialog=this.createBean(new S({title:this.advancedFilterExpressionService.translate("advancedFilterBuilderTitle"),component:this.eBuilderComp,width:i,height:a,resizable:!0,movable:!0,maximizable:!0,centered:!0,closable:!0,minWidth:s,afterGuiAttached:function(){var t;return null===(t=n.eBuilderComp)||void 0===t?void 0:t.afterGuiAttached()}})),this.dispatchFilterBuilderVisibleChangedEvent(t,!0),this.eBuilderDialog.addEventListener(S.EVENT_DESTROYED,(function(){var t;n.destroyBean(n.eBuilderComp),n.eBuilderComp=void 0,n.eBuilderDialog=void 0,n.setInputDisabled(!1),n.dispatchEvent({type:e.EVENT_BUILDER_CLOSED}),n.dispatchFilterBuilderVisibleChangedEvent(null!==(t=n.builderDestroySource)&&void 0!==t?t:"ui",!1),n.builderDestroySource=void 0}))}},e.prototype.dispatchFilterBuilderVisibleChangedEvent=function(t,e){var r={type:l.EVENT_ADVANCED_FILTER_BUILDER_VISIBLE_CHANGED,source:t,visible:e};this.eventService.dispatchEvent(r)},e.prototype.getBuilderDialogSize=function(){var t,e,r=null!==(e=null===(t=this.gridOptionsService.get("advancedFilterBuilderParams"))||void 0===t?void 0:t.minWidth)&&void 0!==e?e:500,n=this.popupService.getPopupParent(),o=Math.round(u.getAbsoluteWidth(n))-2,i=Math.round(.75*u.getAbsoluteHeight(n))-2;return{width:Math.min(Math.max(600,r),o),height:Math.min(600,i),minWidth:r}},e.prototype.onEnabledChanged=function(t){this.enabled=t,this.updateComps()},e.prototype.updateComps=function(){this.setAdvancedFilterComp(),this.setHeaderCompEnabled(),this.eventService.dispatchEvent({type:l.EVENT_HEADER_HEIGHT_CHANGED})},e.prototype.setAdvancedFilterComp=function(){var t;if(this.destroyAdvancedFilterComp(),this.enabled){var e=this.gridOptionsService.get("advancedFilterParent");if(this.hasAdvancedFilterParent=!!e,e){var r=this.createBean(new Ee),n=r.getGui(),o=this.environment.getTheme().allThemes;o.length&&(t=n.classList).add.apply(t,Se([],Ce(o))),n.classList.add(this.gridOptionsService.is("enableRtl")?"ag-rtl":"ag-ltr"),this.focusService.isKeyboardMode()&&n.classList.add(w.AG_KEYBOARD_FOCUS);var i=this.ctrlsService.getGridCtrl();r.addManagedListener(i,l.EVENT_KEYBOARD_FOCUS,(function(){return n.classList.add(w.AG_KEYBOARD_FOCUS)})),r.addManagedListener(i,l.EVENT_MOUSE_FOCUS,(function(){return n.classList.remove(w.AG_KEYBOARD_FOCUS)})),e.appendChild(n),this.eFilterComp=r}}},e.prototype.setHeaderCompEnabled=function(){var t;null===(t=this.eHeaderComp)||void 0===t||t.setEnabled(this.enabled&&!this.hasAdvancedFilterParent)},e.prototype.destroyAdvancedFilterComp=function(){this.eFilterComp&&(u.removeFromParent(this.eFilterComp.getGui()),this.destroyBean(this.eFilterComp))},e.EVENT_BUILDER_CLOSED="advancedFilterBuilderClosed",be([n("focusService")],e.prototype,"focusService",void 0),be([n("ctrlsService")],e.prototype,"ctrlsService",void 0),be([n("popupService")],e.prototype,"popupService",void 0),be([n("advancedFilterExpressionService")],e.prototype,"advancedFilterExpressionService",void 0),be([i],e.prototype,"postConstruct",null),e}(r),xe=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Oe=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},Ee=function(t){function e(){var e=t.call(this,'\n            <div class="ag-advanced-filter" role="presentation" tabindex="-1">\n                <ag-autocomplete ref="eAutocomplete"></ag-autocomplete>\n                <button class="ag-button ag-standard-button ag-advanced-filter-apply-button" ref="eApplyFilterButton"></button>\n                <button class="ag-advanced-filter-builder-button" ref="eBuilderFilterButton">\n                    <span ref="eBuilderFilterButtonIcon" aria-hidden="true"></span>\n                    <span class="ag-advanced-filter-builder-button-label" ref="eBuilderFilterButtonLabel"></span>\n                </button>\n            </div>')||this;return e.expressionParser=null,e.isApplyDisabled=!0,e.builderOpen=!1,e}return xe(e,t),e.prototype.postConstruct=function(){var t=this;this.eAutocomplete.setListGenerator((function(e,r){return t.generateAutocompleteListParams(r)})).setValidator((function(){return t.validateValue()})).setForceLastSelection((function(e,r){return t.forceLastSelection(e,r)})).setInputAriaLabel(this.advancedFilterExpressionService.translate("ariaAdvancedFilterInput")).setListAriaLabel(this.advancedFilterExpressionService.translate("ariaLabelAdvancedFilterAutocomplete")),this.refresh(),this.addManagedListener(this.eAutocomplete,x.EVENT_VALUE_CHANGED,(function(e){var r=e.value;return t.onValueChanged(r)})),this.addManagedListener(this.eAutocomplete,x.EVENT_VALUE_CONFIRMED,(function(e){var r=e.isValid;return t.onValueConfirmed(r)})),this.addManagedListener(this.eAutocomplete,x.EVENT_OPTION_SELECTED,(function(e){var r=e.position,n=e.updateEntry,o=e.autocompleteType;return t.onOptionSelected(r,n,o)})),this.addManagedListener(this.eAutocomplete,x.EVENT_VALID_CHANGED,(function(e){var r=e.isValid,n=e.validationMessage;return t.onValidChanged(r,n)})),this.setupApplyButton(),this.setupBuilderButton()},e.prototype.refresh=function(){var t=this.advancedFilterService.getExpressionDisplayValue();this.eAutocomplete.setValue({value:null!=t?t:"",position:null==t?void 0:t.length,updateListOnlyIfOpen:!0})},e.prototype.setInputDisabled=function(t){this.eAutocomplete.setInputDisabled(t),u.setDisabled(this.eApplyFilterButton,t||this.isApplyDisabled)},e.prototype.getTooltipParams=function(){var e=t.prototype.getTooltipParams.call(this);return e.location="advancedFilter",e},e.prototype.setupApplyButton=function(){var t=this;this.eApplyFilterButton.innerText=this.advancedFilterExpressionService.translate("advancedFilterApply"),this.activateTabIndex([this.eApplyFilterButton]),this.addManagedListener(this.eApplyFilterButton,"click",(function(){return t.onValueConfirmed(t.eAutocomplete.isValid())})),u.setDisabled(this.eApplyFilterButton,this.isApplyDisabled)},e.prototype.setupBuilderButton=function(){var t=this;this.eBuilderFilterButtonIcon.appendChild(u.createIconNoSpan("advancedFilterBuilder",this.gridOptionsService)),this.eBuilderFilterButtonLabel.innerText=this.advancedFilterExpressionService.translate("advancedFilterBuilder"),this.activateTabIndex([this.eBuilderFilterButton]),this.addManagedListener(this.eBuilderFilterButton,"click",(function(){return t.openBuilder()})),this.addManagedListener(this.advancedFilterService.getCtrl(),we.EVENT_BUILDER_CLOSED,(function(){return t.closeBuilder()}))},e.prototype.onValueChanged=function(t){var e;t=u.makeNull(t),this.advancedFilterService.setExpressionDisplayValue(t),this.expressionParser=this.advancedFilterService.createExpressionParser(t);var r=null===(e=this.expressionParser)||void 0===e?void 0:e.parseExpression();r&&r!==t&&this.eAutocomplete.setValue({value:r,silent:!0,restoreFocus:!0})},e.prototype.onValueConfirmed=function(t){t&&!this.isApplyDisabled&&(u.setDisabled(this.eApplyFilterButton,!0),this.advancedFilterService.applyExpression(),this.filterManager.onFilterChanged({source:"advancedFilter"}))},e.prototype.onOptionSelected=function(t,e,r){var n=this.updateExpression(t,e,r),o=n.updatedValue,i=n.updatedPosition,a=n.hideAutocomplete;this.eAutocomplete.setValue({value:o,position:i,updateListOnlyIfOpen:a,restoreFocus:!0})},e.prototype.validateValue=function(){var t,e,r;return(null===(t=this.expressionParser)||void 0===t?void 0:t.isValid())?null:null!==(r=null===(e=this.expressionParser)||void 0===e?void 0:e.getValidationMessage())&&void 0!==r?r:null},e.prototype.onValidChanged=function(t,e){this.isApplyDisabled=!t||this.advancedFilterService.isCurrentExpressionApplied(),u.setDisabled(this.eApplyFilterButton,this.isApplyDisabled),this.setTooltip(e,1e3)},e.prototype.generateAutocompleteListParams=function(t){return this.expressionParser?this.expressionParser.getAutocompleteListParams(t):this.advancedFilterExpressionService.getDefaultAutocompleteListParams("")},e.prototype.updateExpression=function(t,e,r){var n,o;return this.advancedFilterExpressionService.updateAutocompleteCache(e,r),null!==(o=null===(n=this.expressionParser)||void 0===n?void 0:n.updateExpression(t,e,r))&&void 0!==o?o:this.advancedFilterService.getDefaultExpression(e)},e.prototype.forceLastSelection=function(t,e){var r=t.key,n=t.displayValue;return!!e.toLocaleLowerCase().match("^"+(null!=n?n:r).toLocaleLowerCase()+"\\s*$")},e.prototype.openBuilder=function(){this.builderOpen||(this.builderOpen=!0,u.setDisabled(this.eBuilderFilterButton,!0),this.advancedFilterService.getCtrl().toggleFilterBuilder("ui"))},e.prototype.closeBuilder=function(){this.builderOpen&&(this.builderOpen=!1,u.setDisabled(this.eBuilderFilterButton,!1),this.eBuilderFilterButton.focus())},Oe([o("eAutocomplete")],e.prototype,"eAutocomplete",void 0),Oe([o("eApplyFilterButton")],e.prototype,"eApplyFilterButton",void 0),Oe([o("eBuilderFilterButton")],e.prototype,"eBuilderFilterButton",void 0),Oe([o("eBuilderFilterButtonIcon")],e.prototype,"eBuilderFilterButtonIcon",void 0),Oe([o("eBuilderFilterButtonLabel")],e.prototype,"eBuilderFilterButtonLabel",void 0),Oe([n("advancedFilterService")],e.prototype,"advancedFilterService",void 0),Oe([n("advancedFilterExpressionService")],e.prototype,"advancedFilterExpressionService",void 0),Oe([n("filterManager")],e.prototype,"filterManager",void 0),Oe([i],e.prototype,"postConstruct",null),e}(a),Te={ariaAdvancedFilterBuilderItem:function(t){return t[0]+". Level "+t[1]+". Press ENTER to edit."},ariaAdvancedFilterBuilderItemValidation:function(t){return t[0]+". Level "+t[1]+". "+t[2]+" Press ENTER to edit."},ariaAdvancedFilterBuilderList:"Advanced Filter Builder List",ariaAdvancedFilterBuilderFilterItem:"Filter Condition",ariaAdvancedFilterBuilderGroupItem:"Filter Group",ariaAdvancedFilterBuilderColumn:"Column",ariaAdvancedFilterBuilderOption:"Option",ariaAdvancedFilterBuilderValue:"Value",ariaAdvancedFilterBuilderJoinOperator:"Join Operator",ariaAdvancedFilterInput:"Advanced Filter Input",ariaLabelAdvancedFilterAutocomplete:"Advanced Filter Autocomplete",advancedFilterContains:"contains",advancedFilterNotContains:"does not contain",advancedFilterTextEquals:"equals",advancedFilterTextNotEqual:"does not equal",advancedFilterStartsWith:"starts with",advancedFilterEndsWith:"ends with",advancedFilterBlank:"is blank",advancedFilterNotBlank:"is not blank",advancedFilterEquals:"=",advancedFilterNotEqual:"!=",advancedFilterGreaterThan:">",advancedFilterGreaterThanOrEqual:">=",advancedFilterLessThan:"<",advancedFilterLessThanOrEqual:"<=",advancedFilterTrue:"is true",advancedFilterFalse:"is false",advancedFilterAnd:"AND",advancedFilterOr:"OR",advancedFilterApply:"Apply",advancedFilterBuilder:"Builder",advancedFilterValidationMissingColumn:"Column is missing",advancedFilterValidationMissingOption:"Option is missing",advancedFilterValidationMissingValue:"Value is missing",advancedFilterValidationInvalidColumn:"Column not found",advancedFilterValidationInvalidOption:"Option not found",advancedFilterValidationMissingQuote:"Value is missing an end quote",advancedFilterValidationNotANumber:"Value is not a number",advancedFilterValidationInvalidDate:"Value is not a valid date",advancedFilterValidationMissingCondition:"Condition is missing",advancedFilterValidationJoinOperatorMismatch:"Join operators within a condition must be the same",advancedFilterValidationInvalidJoinOperator:"Join operator not found",advancedFilterValidationMissingEndBracket:"Missing end bracket",advancedFilterValidationExtraEndBracket:"Too many end brackets",advancedFilterValidationMessage:function(t){return"Expression has an error. "+t[0]+" - "+t[1]+"."},advancedFilterValidationMessageAtEnd:function(t){return"Expression has an error. "+t[0]+" at end of expression."},advancedFilterBuilderTitle:"Advanced Filter",advancedFilterBuilderApply:"Apply",advancedFilterBuilderCancel:"Cancel",advancedFilterBuilderAddButtonTooltip:"Add Filter or Group",advancedFilterBuilderRemoveButtonTooltip:"Remove",advancedFilterBuilderMoveUpButtonTooltip:"Move Up",advancedFilterBuilderMoveDownButtonTooltip:"Move Down",advancedFilterBuilderAddJoin:"Add Group",advancedFilterBuilderAddCondition:"Add Filter",advancedFilterBuilderSelectColumn:"Select a column",advancedFilterBuilderSelectOption:"Select an option",advancedFilterBuilderEnterValue:"Enter a value...",advancedFilterBuilderValidationAlreadyApplied:"Current filter already applied.",advancedFilterBuilderValidationIncomplete:"Not all conditions are complete.",advancedFilterBuilderValidationSelectColumn:"Must select a column.",advancedFilterBuilderValidationSelectOption:"Must select an option.",advancedFilterBuilderValidationEnterValue:"Must enter a value."};function Pe(t,e,r){if(!t)return"";var n=r-e;return n?t.slice(0,t.length-n):t}function De(t,e,r,n,o,i){var a=r+(t.length?1:0),s=0;return o&&(" "===t[a]?s=1:(n+=" ",i&&(n+='"'))),{updatedValue:t.slice(0,e)+n+t.slice(a),updatedPosition:e+n.length+s}}function Ae(t,e){for(var r=e;r<t.length;){if(" "===t[r]){r-=1;break}r++}return r}function Me(t,e,r,n){r!==e&&(t.expression=De(t.expression,n-e.length+1,n,r).updatedValue)}var _e=function(){return(_e=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},Re=function(){function t(t,e){this.params=t,this.startPosition=e,this.type="column",this.valid=!0,this.hasStartChar=!1,this.hasEndChar=!1,this.colName=""}return t.prototype.parse=function(t,e){if(t!==Ie.COL_START_CHAR||this.colName)if(t===Ie.COL_END_CHAR&&this.hasStartChar){if(this.parseColumn(!1,e))return this.hasEndChar=!0,!1;this.colName+=t}else this.colName+=t;else this.hasStartChar=!0},t.prototype.getDisplayValue=function(){return(this.hasStartChar?Ie.COL_START_CHAR:"")+this.colName+(this.hasEndChar?Ie.COL_END_CHAR:"")},t.prototype.getColId=function(){return this.colId},t.prototype.complete=function(t){this.parseColumn(!0,t)},t.prototype.getValidationError=function(){var t;return this.valid?null:{message:this.params.advancedFilterExpressionService.translate("advancedFilterValidationInvalidColumn"),startPosition:this.startPosition,endPosition:null!==(t=this.endPosition)&&void 0!==t?t:this.params.expression.length-1}},t.prototype.parseColumn=function(t,e){var r;this.endPosition=e;var n=this.params.advancedFilterExpressionService.getColId(this.colName);return n&&this.hasStartChar&&(this.colId=n.colId,Me(this.params,this.colName,n.columnName,e-1),this.colName=n.columnName,this.column=this.params.columnModel.getPrimaryColumn(this.colId),this.column)?(this.baseCellDataType=null!==(r=this.params.dataTypeService.getBaseDataType(this.column))&&void 0!==r?r:"text",!0):(t&&(this.valid=!1),this.baseCellDataType="text",!1)},t}(),ke=function(){function t(t,e,r){this.params=t,this.startPosition=e,this.baseCellDataType=r,this.type="operator",this.valid=!0,this.expectedNumOperands=0,this.operator=""}return t.prototype.parse=function(t,e){if(" "===t||")"===t){if(this.parseOperator(!1,e-1))return!0;this.operator+=t}else this.operator+=t},t.prototype.complete=function(t){this.parseOperator(!0,t)},t.prototype.getValidationError=function(){var t;return this.valid?null:{message:this.params.advancedFilterExpressionService.translate("advancedFilterValidationInvalidOption"),startPosition:this.startPosition,endPosition:null!==(t=this.endPosition)&&void 0!==t?t:this.params.expression.length-1}},t.prototype.getDisplayValue=function(){return this.operator},t.prototype.getOperatorKey=function(){return this.parsedOperator},t.prototype.parseOperator=function(t,e){var r=this.params.advancedFilterExpressionService.getDataTypeExpressionOperator(this.baseCellDataType),n=r.findOperator(this.operator);if(this.endPosition=e,n){this.parsedOperator=n;var o=r.operators[n];this.expectedNumOperands=o.numOperands;var i=o.displayValue;return Me(this.params,this.operator,i,e),this.operator=i,!0}return!t&&null===n||(this.valid=!1),!1},t}(),Fe=function(){function t(t,e,r,n){this.params=t,this.startPosition=e,this.baseCellDataType=r,this.column=n,this.type="operand",this.valid=!0,this.operand="",this.validationMessage=null}return t.prototype.parse=function(t,e){if(" "===t){if(!this.quotes)return this.parseOperand(!1,e),!0;this.operand+=t}else if(")"===t){if("number"===this.baseCellDataType||!this.quotes)return this.parseOperand(!1,e-1),!0;this.operand+=t}else if(this.operand||this.quotes||"'"!==t&&'"'!==t){if(this.quotes&&t===this.quotes)return this.parseOperand(!1,e),!1;this.operand+=t}else this.quotes=t},t.prototype.complete=function(t){this.parseOperand(!0,t)},t.prototype.getValidationError=function(){var t;return this.validationMessage?{message:this.validationMessage,startPosition:this.startPosition,endPosition:null!==(t=this.endPosition)&&void 0!==t?t:this.params.expression.length-1}:null},t.prototype.getRawValue=function(){return this.operand},t.prototype.getModelValue=function(){return this.modelValue},t.prototype.parseOperand=function(t,e){var r=this.params.advancedFilterExpressionService;if(this.endPosition=e,this.modelValue=this.operand,t&&this.quotes)this.valid=!1,this.validationMessage=r.translate("advancedFilterValidationMissingQuote");else if(""===this.modelValue)this.valid=!1,this.validationMessage=r.translate("advancedFilterValidationMissingValue");else{var n=r.getOperandModelValue(this.operand,this.baseCellDataType,this.column);switch(null!=n&&(this.modelValue=n),this.baseCellDataType){case"number":(this.quotes||isNaN(this.modelValue))&&(this.valid=!1,this.validationMessage=r.translate("advancedFilterValidationNotANumber"));break;case"date":case"dateString":null==n&&(this.valid=!1,this.validationMessage=r.translate("advancedFilterValidationInvalidDate"))}}},t}(),Ie=function(){function t(t,e){this.params=t,this.startPosition=e,this.isAwaiting=!0}return t.prototype.parseExpression=function(){for(var t,e,r=this.startPosition,n=this.params.expression;r<n.length;){var o=n[r];if(" "===o&&this.isAwaiting);else{if(this.isAwaiting=!1,!this.parser){var i=void 0;this.columnParser?this.operatorParser?(this.operandParser=new Fe(this.params,r,this.columnParser.baseCellDataType,this.columnParser.column),i=this.operandParser):(this.operatorParser=new ke(this.params,r,this.columnParser.baseCellDataType),i=this.operatorParser):(this.columnParser=new Re(this.params,r),i=this.columnParser),this.parser=i}var a=this.parser.parse(o,r);if(null!=a){if(this.isComplete())return this.returnEndPosition(a?r-1:r,!0);this.parser=void 0,this.isAwaiting=!0}}r++}return null===(e=null===(t=this.parser)||void 0===t?void 0:t.complete)||void 0===e||e.call(t,r-1),this.returnEndPosition(r)},t.prototype.isValid=function(){return this.isComplete()&&this.columnParser.valid&&this.operatorParser.valid&&(!this.operandParser||this.operandParser.valid)},t.prototype.getValidationError=function(){var t,e,r,n,o,i=null!==(n=null!==(e=null===(t=this.columnParser)||void 0===t?void 0:t.getValidationError())&&void 0!==e?e:null===(r=this.operatorParser)||void 0===r?void 0:r.getValidationError())&&void 0!==n?n:null===(o=this.operandParser)||void 0===o?void 0:o.getValidationError();if(i)return i;var a,s=this.params.expression.length;return this.columnParser?this.operatorParser?this.operatorParser.expectedNumOperands&&!this.operandParser&&(a="advancedFilterValidationMissingValue"):a="advancedFilterValidationMissingOption":a="advancedFilterValidationMissingColumn",a?{message:this.params.advancedFilterExpressionService.translate(a),startPosition:s,endPosition:s}:null},t.prototype.getFunction=function(t){var e,r,n,o=this.columnParser.getColId(),i=o.replace(/(['"])/,"\\$1"),a=null===(e=this.operatorParser)||void 0===e?void 0:e.getOperatorKey(),s=t.operators,l=t.evaluatorParams,u=t.operands,c=this.params.advancedFilterExpressionService.getExpressionOperator(this.columnParser.baseCellDataType,a),p=this.addToListAndGetIndex(s,c),d=this.params.advancedFilterExpressionService.getExpressionEvaluatorParams(o),h=this.addToListAndGetIndex(l,d);0===(null===(r=this.operatorParser)||void 0===r?void 0:r.expectedNumOperands)?n="":n=", params.operands["+this.addToListAndGetIndex(u,this.getOperandValue())+"]";return"params.operators["+p+"].evaluator(expressionProxy.getValue('"+i+"', node), node, params.evaluatorParams["+h+"]"+n+")"},t.prototype.getAutocompleteListParams=function(t){return this.isColumnPosition(t)?this.getColumnAutocompleteListParams(t):this.isOperatorPosition(t)?this.getOperatorAutocompleteListParams(t):this.isBeyondEndPosition(t)?void 0:{enabled:!1}},t.prototype.updateExpression=function(t,e,r){var n,o,i,a,s,l=this.params.expression;if(this.isColumnPosition(t))return De(this.params.expression,this.startPosition,(null===(n=this.columnParser)||void 0===n?void 0:n.getColId())?this.columnParser.endPosition:Ae(l,t),this.params.advancedFilterExpressionService.getColumnValue(e),!0);if(this.isOperatorPosition(t)){var u=this.getBaseCellDataTypeFromOperatorAutocompleteType(r),c=this.hasOperand(u,e.key),p=c&&this.doesOperandNeedQuotes(u),d=void 0;if(null!=(null===(o=this.operatorParser)||void 0===o?void 0:o.startPosition)&&t<this.operatorParser.startPosition)d=De(l,t,t,null!==(i=e.displayValue)&&void 0!==i?i:e.key,c,p);else{var h=(null===(a=this.operatorParser)||void 0===a?void 0:a.getOperatorKey())?this.operatorParser.endPosition:Ae(l,t);d=De(l,function(t,e,r){for(var n=e;n<r;){if(" "!==t[n])break;n++}return n}(l,this.columnParser.endPosition+1,h),h,null!==(s=e.displayValue)&&void 0!==s?s:e.key,c,p)}return _e(_e({},d),{hideAutocomplete:!c})}return null},t.prototype.getModel=function(){var t=this.columnParser.getColId(),e={filterType:this.columnParser.baseCellDataType,colId:t,type:this.operatorParser.getOperatorKey()};return this.operatorParser.expectedNumOperands&&(e.filter=this.operandParser.getModelValue()),e},t.prototype.getOperandValue=function(){var t=this.operandParser.getRawValue(),e=this.columnParser,r=e.baseCellDataType,n=e.column;switch(r){case"number":t=Number(t);break;case"date":case"dateString":t=this.params.valueParserService.parseValue(n,null,t,void 0)}return"dateString"===r?this.params.dataTypeService.getDateParserFunction()(t):t},t.prototype.isComplete=function(){return!(!this.operatorParser||!(!this.operatorParser.expectedNumOperands||this.operatorParser.expectedNumOperands&&this.operandParser))},t.prototype.isColumnPosition=function(t){return!this.columnParser||null==this.columnParser.endPosition||t<=this.columnParser.endPosition+1},t.prototype.isOperatorPosition=function(t){return!this.operatorParser||null==this.operatorParser.endPosition||t<=this.operatorParser.endPosition+1},t.prototype.isBeyondEndPosition=function(t){return this.isComplete()&&null!=this.endPosition&&t>this.endPosition+1&&this.endPosition+1<this.params.expression.length},t.prototype.returnEndPosition=function(t,e){return this.endPosition=e?t:t-1,t},t.prototype.getColumnAutocompleteListParams=function(t){return this.params.advancedFilterExpressionService.generateAutocompleteListParams(this.params.advancedFilterExpressionService.getColumnAutocompleteEntries(),"column",this.getColumnSearchString(t))},t.prototype.getColumnSearchString=function(t){var e,r,n,o,i,a=null!==(r=null===(e=this.columnParser)||void 0===e?void 0:e.getDisplayValue())&&void 0!==r?r:"",s=Pe(a,t,null==(null===(n=this.columnParser)||void 0===n?void 0:n.endPosition)?this.params.expression.length:this.columnParser.endPosition+1),l=(null===(o=this.columnParser)||void 0===o?void 0:o.hasStartChar)&&s.length>0,u=(null===(i=this.columnParser)||void 0===i?void 0:i.hasEndChar)&&s.length===a.length+2;return l?s.slice(1,u?-1:void 0):s},t.prototype.getOperatorAutocompleteListParams=function(t){var e,r,n,o,i,a=null===(e=this.columnParser)||void 0===e?void 0:e.column;if(!a)return{enabled:!1};var s=this.columnParser.baseCellDataType,l=null!=(null===(r=this.operatorParser)||void 0===r?void 0:r.startPosition)&&t<this.operatorParser.startPosition?"":Pe(null!==(o=null===(n=this.operatorParser)||void 0===n?void 0:n.getDisplayValue())&&void 0!==o?o:"",t,null==(null===(i=this.operatorParser)||void 0===i?void 0:i.endPosition)?this.params.expression.length:this.operatorParser.endPosition+1);return this.params.advancedFilterExpressionService.generateAutocompleteListParams(this.params.advancedFilterExpressionService.getOperatorAutocompleteEntries(a,s),"operator-"+s,l)},t.prototype.getBaseCellDataTypeFromOperatorAutocompleteType=function(t){return null==t?void 0:t.replace("operator-","")},t.prototype.hasOperand=function(t,e){var r,n;return!t||!e||(null!==(n=null===(r=this.params.advancedFilterExpressionService.getExpressionOperator(t,e))||void 0===r?void 0:r.numOperands)&&void 0!==n?n:0)>0},t.prototype.doesOperandNeedQuotes=function(t){return"number"!==t},t.prototype.addToListAndGetIndex=function(t,e){var r=t.length;return t.push(e),r},t.COL_START_CHAR="[",t.COL_END_CHAR="]",t}(),Le=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a};function Ne(t,e,r){var n=!1,o=t.toLocaleLowerCase(),i=o+" ",a=Object.entries(e).find((function(t){var e=Le(t,2);e[0];var a=e[1],s=r(a).toLocaleLowerCase();return s.startsWith(i)&&(n=!0),s===o}));return a?a[0]:n?null:void 0}function Ge(t,e){return(null!=e?e:Object.keys(t)).map((function(e){return{key:e,displayValue:t[e].displayValue}}))}var je,Ve=function(){function t(t){this.params=t,this.initOperators()}return t.prototype.getEntries=function(t){return Ge(this.operators,t)},t.prototype.findOperator=function(t){return Ne(t,this.operators,(function(t){return t.displayValue}))},t.prototype.initOperators=function(){var t=this,e=this.params.translate;this.operators={contains:{displayValue:e("advancedFilterContains"),evaluator:function(e,r,n,o){return t.evaluateExpression(e,r,n,o,!1,(function(t,e){return t.includes(e)}))},numOperands:1},notContains:{displayValue:e("advancedFilterNotContains"),evaluator:function(e,r,n,o){return t.evaluateExpression(e,r,n,o,!0,(function(t,e){return!t.includes(e)}))},numOperands:1},equals:{displayValue:e("advancedFilterTextEquals"),evaluator:function(e,r,n,o){return t.evaluateExpression(e,r,n,o,!1,(function(t,e){return t===e}))},numOperands:1},notEqual:{displayValue:e("advancedFilterTextNotEqual"),evaluator:function(e,r,n,o){return t.evaluateExpression(e,r,n,o,!0,(function(t,e){return t!=e}))},numOperands:1},startsWith:{displayValue:e("advancedFilterStartsWith"),evaluator:function(e,r,n,o){return t.evaluateExpression(e,r,n,o,!1,(function(t,e){return t.startsWith(e)}))},numOperands:1},endsWith:{displayValue:e("advancedFilterEndsWith"),evaluator:function(e,r,n,o){return t.evaluateExpression(e,r,n,o,!1,(function(t,e){return t.endsWith(e)}))},numOperands:1},blank:{displayValue:e("advancedFilterBlank"),evaluator:function(t){return null==t||"string"==typeof t&&0===t.trim().length},numOperands:0},notBlank:{displayValue:e("advancedFilterNotBlank"),evaluator:function(t){return null!=t&&("string"!=typeof t||t.trim().length>0)},numOperands:0}}},t.prototype.evaluateExpression=function(t,e,r,n,o,i){return null==t?o:r.caseSensitive?i(r.valueConverter(t,e),n):i(r.valueConverter(t,e).toLocaleLowerCase(),n.toLocaleLowerCase())},t}(),Be=function(){function t(t){this.params=t,this.initOperators()}return t.prototype.getEntries=function(t){return Ge(this.operators,t)},t.prototype.findOperator=function(t){return Ne(t,this.operators,(function(t){return t.displayValue}))},t.prototype.initOperators=function(){var t=this,e=this.params,r=e.translate,n=e.equals;this.operators={equals:{displayValue:r("advancedFilterEquals"),evaluator:function(e,r,o,i){return t.evaluateSingleOperandExpression(e,r,o,i,!!o.includeBlanksInEquals,n)},numOperands:1},notEqual:{displayValue:r("advancedFilterNotEqual"),evaluator:function(e,r,o,i){return t.evaluateSingleOperandExpression(e,r,o,i,!!o.includeBlanksInEquals,(function(t,e){return!n(t,e)}))},numOperands:1},greaterThan:{displayValue:r("advancedFilterGreaterThan"),evaluator:function(e,r,n,o){return t.evaluateSingleOperandExpression(e,r,n,o,!!n.includeBlanksInGreaterThan,(function(t,e){return t>e}))},numOperands:1},greaterThanOrEqual:{displayValue:r("advancedFilterGreaterThanOrEqual"),evaluator:function(e,r,n,o){return t.evaluateSingleOperandExpression(e,r,n,o,!!n.includeBlanksInGreaterThan,(function(t,e){return t>=e}))},numOperands:1},lessThan:{displayValue:r("advancedFilterLessThan"),evaluator:function(e,r,n,o){return t.evaluateSingleOperandExpression(e,r,n,o,!!n.includeBlanksInLessThan,(function(t,e){return t<e}))},numOperands:1},lessThanOrEqual:{displayValue:r("advancedFilterLessThanOrEqual"),evaluator:function(e,r,n,o){return t.evaluateSingleOperandExpression(e,r,n,o,!!n.includeBlanksInLessThan,(function(t,e){return t<=e}))},numOperands:1},blank:{displayValue:r("advancedFilterBlank"),evaluator:function(t){return null==t},numOperands:0},notBlank:{displayValue:r("advancedFilterNotBlank"),evaluator:function(t){return null!=t},numOperands:0}}},t.prototype.evaluateSingleOperandExpression=function(t,e,r,n,o,i){return null==t?o:i(r.valueConverter(t,e),n)},t}(),Ue=function(){function t(t){this.params=t,this.initOperators()}return t.prototype.getEntries=function(t){return Ge(this.operators,t)},t.prototype.findOperator=function(t){return Ne(t,this.operators,(function(t){return t.displayValue}))},t.prototype.initOperators=function(){var t=this.params.translate;this.operators={true:{displayValue:t("advancedFilterTrue"),evaluator:function(t){return!!t},numOperands:0},false:{displayValue:t("advancedFilterFalse"),evaluator:function(t){return!1===t},numOperands:0},blank:{displayValue:t("advancedFilterBlank"),evaluator:function(t){return null==t},numOperands:0},notBlank:{displayValue:t("advancedFilterNotBlank"),evaluator:function(t){return null!=t},numOperands:0}}},t}(),He=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ze=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},We=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},Ke=function(t){function r(){var e=null!==t&&t.apply(this,arguments)||this;return e.columnNameToIdMap={},e.columnAutocompleteEntries=null,e.expressionEvaluatorParams={},e}return He(r,t),r.prototype.postConstruct=function(){this.expressionJoinOperators=this.generateExpressionJoinOperators(),this.expressionOperators=this.generateExpressionOperators()},r.prototype.parseJoinOperator=function(t){var e,r=t.type;return null!==(e=this.expressionJoinOperators[r])&&void 0!==e?e:r},r.prototype.getColumnDisplayValue=function(t){var e,r=t.colId,n=this.getColumnAutocompleteEntries().find((function(t){return t.key===r}));return n?(e=n.displayValue,this.columnNameToIdMap[e.toLocaleUpperCase()]={colId:r,columnName:e}):e=r,e},r.prototype.getOperatorDisplayValue=function(t){var e,r;return null!==(r=null===(e=this.getExpressionOperator(t.filterType,t.type))||void 0===e?void 0:e.displayValue)&&void 0!==r?r:t.type},r.prototype.getOperandModelValue=function(t,e,r){var n;switch(e){case"number":return u.exists(t)?Number(t):null;case"date":return u.serialiseDate(this.valueParserService.parseValue(r,null,t,void 0),!1);case"dateString":var o=this.valueParserService.parseValue(r,null,t,void 0);return u.serialiseDate(null!==(n=this.dataTypeService.getDateParserFunction()(o))&&void 0!==n?n:null,!1)}return t},r.prototype.getOperandDisplayValue=function(t,e){var r,n,o=t,i=o.colId,a=o.filter,s=this.columnModel.getPrimaryColumn(i),l="";if(null!=a){var c=void 0;switch(t.filterType){case"number":c=null!==(r=u.toStringOrNull(a))&&void 0!==r?r:"";break;case"date":var p=u.parseDateTimeFromString(a);c=s?this.valueFormatterService.formatValue(s,null,p):null;break;case"dateString":var d=u.parseDateTimeFromString(a),h=s?this.dataTypeService.getDateFormatterFunction()(null!=d?d:void 0):null;c=s?this.valueFormatterService.formatValue(s,null,h):null}"number"!==t.filterType&&(c=null!==(n=null!=c?c:u.toStringOrNull(a))&&void 0!==n?n:"",e||(c='"'+c+'"')),l=e?c:" "+c}return l},r.prototype.parseColumnFilterModel=function(t){var e,r;return"["+(null!==(e=this.getColumnDisplayValue(t))&&void 0!==e?e:"")+"] "+(null!==(r=this.getOperatorDisplayValue(t))&&void 0!==r?r:"")+this.getOperandDisplayValue(t)},r.prototype.updateAutocompleteCache=function(t,e){if("column"===e){var r=t.key,n=t.displayValue;this.columnNameToIdMap[t.displayValue.toLocaleUpperCase()]={colId:r,columnName:n}}},r.prototype.translate=function(t,e){var r=Te[t];return"function"==typeof r&&(r=r(e)),this.localeService.getLocaleTextFunc()(t,r,e)},r.prototype.generateAutocompleteListParams=function(t,e,r){return{enabled:!0,type:e,searchString:r,entries:t}},r.prototype.getColumnAutocompleteEntries=function(){var t,e=this;if(this.columnAutocompleteEntries)return this.columnAutocompleteEntries;var r=null!==(t=this.columnModel.getAllPrimaryColumns())&&void 0!==t?t:[],n=[],o=this.gridOptionsService.is("includeHiddenColumnsInAdvancedFilter");return r.forEach((function(t){t.getColDef().filter&&(o||t.isVisible()||t.isRowGroupActive())&&n.push({key:t.getColId(),displayValue:e.columnModel.getDisplayNameForColumn(t,"advancedFilter")})})),n.sort((function(t,e){var r,n,o=null!==(r=t.displayValue)&&void 0!==r?r:"",i=null!==(n=e.displayValue)&&void 0!==n?n:"";return o<i?-1:i>o?1:0})),n},r.prototype.getOperatorAutocompleteEntries=function(t,e){var r=this.getActiveOperators(t);return this.getDataTypeExpressionOperator(e).getEntries(r)},r.prototype.getJoinOperatorAutocompleteEntries=function(){return Object.entries(this.expressionJoinOperators).map((function(t){var e=We(t,2);return{key:e[0],displayValue:e[1]}}))},r.prototype.getDefaultAutocompleteListParams=function(t){return this.generateAutocompleteListParams(this.getColumnAutocompleteEntries(),"column",t)},r.prototype.getDataTypeExpressionOperator=function(t){return this.expressionOperators[t]},r.prototype.getExpressionOperator=function(t,e){var r,n;return null===(n=null===(r=this.getDataTypeExpressionOperator(t))||void 0===r?void 0:r.operators)||void 0===n?void 0:n[e]},r.prototype.getExpressionJoinOperators=function(){return this.expressionJoinOperators},r.prototype.getColId=function(t){var e=t.toLocaleUpperCase(),r=this.columnNameToIdMap[e];if(r)return r;var n=this.getColumnAutocompleteEntries().find((function(t){return t.displayValue.toLocaleUpperCase()===e}));if(n){var o={colId:n.key,columnName:n.displayValue};return this.columnNameToIdMap[e]=o,o}return null},r.prototype.getExpressionEvaluatorParams=function(t){var e=this,r=this.expressionEvaluatorParams[t];if(r)return r;var n=this.columnModel.getPrimaryColumn(t);if(!n)return{valueConverter:function(t){return t}};switch(this.dataTypeService.getBaseDataType(n)){case"dateString":r={valueConverter:this.dataTypeService.getDateParserFunction()};break;case"object":r=n.getColDef().filterValueGetter?{valueConverter:function(t){return t}}:{valueConverter:function(t,r){var o;return null!==(o=e.valueFormatterService.formatValue(n,r,t))&&void 0!==o?o:"function"==typeof t.toString?t.toString():""}};break;case"text":case void 0:r={valueConverter:function(t){return u.toStringOrNull(t)}};break;default:r={valueConverter:function(t){return t}}}var o=n.getColDef().filterParams;return o&&["caseSensitive","includeBlanksInEquals","includeBlanksInLessThan","includeBlanksInGreaterThan"].forEach((function(t){var e=o[t];e&&(r[t]=e)})),this.expressionEvaluatorParams[t]=r,r},r.prototype.getColumnDetails=function(t){var e=this.columnModel.getPrimaryColumn(t);if(!e)return null;var r=this.dataTypeService.getBaseDataType(e);return r?{column:e,baseCellDataType:r}:null},r.prototype.generateExpressionOperators=function(){var t=this,e=function(e,r){return t.translate(e,r)};return{text:new Ve({translate:e}),boolean:new Ue({translate:e}),object:new Ve({translate:e}),number:new Be({translate:e,equals:function(t,e){return t===e}}),date:new Be({translate:e,equals:function(t,e){return t.getTime()===e.getTime()}}),dateString:new Be({translate:e,equals:function(t,e){return t.getTime()===e.getTime()}})}},r.prototype.getColumnValue=function(t){var e=t.displayValue;return""+Ie.COL_START_CHAR+e+Ie.COL_END_CHAR},r.prototype.generateExpressionJoinOperators=function(){return{AND:this.translate("advancedFilterAnd"),OR:this.translate("advancedFilterOr")}},r.prototype.getActiveOperators=function(t){var e,r=null===(e=t.getColDef().filterParams)||void 0===e?void 0:e.filterOptions;if(r)return r.every((function(t){return"string"==typeof t}))?r:void 0},r.prototype.resetColumnCaches=function(){this.columnAutocompleteEntries=null,this.columnNameToIdMap={}},ze([n("valueFormatterService")],r.prototype,"valueFormatterService",void 0),ze([n("valueParserService")],r.prototype,"valueParserService",void 0),ze([n("columnModel")],r.prototype,"columnModel",void 0),ze([n("dataTypeService")],r.prototype,"dataTypeService",void 0),ze([i],r.prototype,"postConstruct",null),r=ze([e("advancedFilterExpressionService")],r)}(r),Xe=function(){function t(t){this.params=t,this.operators=[],this.operatorStartPositions=[],this.operatorEndPositions=[],this.activeOperator=0,this.validationError=null}return t.prototype.parseExpression=function(t){this.operators.push(""),this.operatorStartPositions.push(t),this.operatorEndPositions.push(void 0);for(var e=this.params.expression;t<e.length;){var r=e[t];if(" "===r){if(this.parseOperator(t-1))return this.activeOperator++,t-1;this.operators[this.activeOperator]+=r}else this.operators[this.activeOperator]+=r;t++}return this.parseOperator(t-1),t},t.prototype.isValid=function(){return!(this.validationError||this.operators.length&&!this.parsedOperator)},t.prototype.getValidationError=function(){return this.validationError},t.prototype.getFunction=function(){return"OR"===this.parsedOperator?"||":"&&"},t.prototype.getModel=function(){return"OR"===this.parsedOperator?"OR":"AND"},t.prototype.getAutocompleteListParams=function(t,e){var r,n=this;if(null==e)r="";else{var o=this.operators[e],i=this.operatorEndPositions[e];r=Pe(o,t,null==i?this.params.expression.length:i+1)}var a=this.params.advancedFilterExpressionService.getJoinOperatorAutocompleteEntries();return(e||null==e&&this.activeOperator)&&(a=a.filter((function(t){return t.key===n.parsedOperator}))),this.params.advancedFilterExpressionService.generateAutocompleteListParams(a,"join",r)},t.prototype.updateExpression=function(t,e,r){var n,o,i=this.params.expression,a=null!==(n=e.displayValue)&&void 0!==n?n:e.key;if(0===r)for(var s=this.operatorEndPositions.length-1;s>0;s--){var l=this.operatorEndPositions[s];null!=l&&(i=De(i,this.operatorStartPositions[s],l,a).updatedValue)}return De(i,this.operatorStartPositions.length>r?this.operatorStartPositions[r]:i.length,null!==(o=this.operatorEndPositions.length>r?this.operatorEndPositions[r]:void 0)&&void 0!==o?o:Ae(i,t),a,!0)},t.prototype.getNumOperators=function(){return this.operators.length},t.prototype.getLastOperatorEndPosition=function(){return this.operatorEndPositions[this.operatorEndPositions.length-1]},t.prototype.parseOperator=function(t){var e=this.operators.length>this.activeOperator?this.operators[this.activeOperator]:"",r=this.params.advancedFilterExpressionService.getExpressionJoinOperators(),n=Ne(e,r,(function(t){return t}));if(n){this.operatorEndPositions[this.activeOperator]=t;var o=r[n];if(this.activeOperator){if(n!==this.parsedOperator)return this.validationError||(this.validationError={message:this.params.advancedFilterExpressionService.translate("advancedFilterValidationJoinOperatorMismatch"),startPosition:t-e.length+1,endPosition:t}),!1}else this.parsedOperator=n;return e!==o&&(Me(this.params,e,o,t),this.operators[this.activeOperator]=o),!0}return null!==n&&(this.validationError||(this.validationError={message:this.params.advancedFilterExpressionService.translate("advancedFilterValidationInvalidJoinOperator"),startPosition:t-e.length+1,endPosition:t}),!0)},t}(),Ye=function(){function t(t,e){this.params=t,this.startPosition=e,this.expectingExpression=!0,this.expectingOperator=!1,this.expressionParsers=[],this.operatorParser=new Xe(this.params),this.missingEndBracket=!1,this.extraEndBracket=!1}return t.prototype.parseExpression=function(){for(var e=this.startPosition,r=this.params.expression;e<r.length;){var n=r[e];if("("!==n||this.expectingOperator){if(")"===n)return this.endPosition=e-1,0===this.startPosition&&(this.extraEndBracket=!0),e;if(" "===n);else if(this.expectingExpression){e=(o=new Ie(this.params,e)).parseExpression(),this.expressionParsers.push(o),this.expectingExpression=!1,this.expectingOperator=!0}else this.expectingOperator&&(e=this.operatorParser.parseExpression(e),this.expectingOperator=!1,this.expectingExpression=!0)}else{var o;e=(o=new t(this.params,e+1)).parseExpression(),this.expressionParsers.push(o),this.expectingExpression=!1,this.expectingOperator=!0}e++}return this.startPosition>0&&(this.missingEndBracket=!0),e},t.prototype.isValid=function(){return!this.missingEndBracket&&!this.extraEndBracket&&this.expressionParsers.length===this.operatorParser.getNumOperators()+1&&this.operatorParser.isValid()&&this.expressionParsers.every((function(t){return t.isValid()}))},t.prototype.getValidationError=function(){for(var t,e=this.operatorParser.getValidationError(),r=0;r<this.expressionParsers.length;r++){var n=this.expressionParsers[r].getValidationError();if(n)return e&&e.startPosition<n.startPosition?e:n}return e||(this.extraEndBracket?{message:this.params.advancedFilterExpressionService.translate("advancedFilterValidationExtraEndBracket"),startPosition:this.endPosition+1,endPosition:this.endPosition+1}:(this.expressionParsers.length===this.operatorParser.getNumOperators()?t="advancedFilterValidationMissingCondition":this.missingEndBracket&&(t="advancedFilterValidationMissingEndBracket"),t?{message:this.params.advancedFilterExpressionService.translate(t),startPosition:this.params.expression.length,endPosition:this.params.expression.length}:null))},t.prototype.getFunction=function(t){var e=this.expressionParsers.length>1,r=this.expressionParsers.map((function(e){return e.getFunction(t)})).join(" "+this.operatorParser.getFunction()+" ");return e?"("+r+")":r},t.prototype.getAutocompleteListParams=function(t){if(!(null!=this.endPosition&&t>this.endPosition+1)){if(!this.expressionParsers.length)return this.getColumnAutocompleteListParams();var e=this.getExpressionParserIndex(t);if(null==e)return"("===this.params.expression[t]?{enabled:!1}:this.getColumnAutocompleteListParams();var r=this.expressionParsers[e].getAutocompleteListParams(t);if(!r){if(e<this.expressionParsers.length-1)return this.operatorParser.getAutocompleteListParams(t,e);if(this.expressionParsers.length===this.operatorParser.getNumOperators()){var n=this.operatorParser.getLastOperatorEndPosition();return null==n||t<=n+1?this.operatorParser.getAutocompleteListParams(t,this.operatorParser.getNumOperators()-1):this.getColumnAutocompleteListParams()}return")"===this.params.expression[t-1]?{enabled:!1}:this.operatorParser.getAutocompleteListParams(t)}return r}},t.prototype.updateExpression=function(t,e,r){var n,o=this.params.expression,i=this.getExpressionParserIndex(t);if(null==i){var a="column"===r?this.params.advancedFilterExpressionService.getColumnValue(e):null!==(n=e.displayValue)&&void 0!==n?n:e.key;return De(o,this.startPosition,this.startPosition,a,!0)}var s=this.expressionParsers[i].updateExpression(t,e,r);return null==s?"column"===r?De(o,t,o.length-1,this.params.advancedFilterExpressionService.getColumnValue(e),!0):this.operatorParser.updateExpression(t,e,i):s},t.prototype.getModel=function(){return this.expressionParsers.length>1?{filterType:"join",type:this.operatorParser.getModel(),conditions:this.expressionParsers.map((function(t){return t.getModel()}))}:this.expressionParsers[0].getModel()},t.prototype.getColumnAutocompleteListParams=function(){return this.params.advancedFilterExpressionService.generateAutocompleteListParams(this.params.advancedFilterExpressionService.getColumnAutocompleteEntries(),"column","")},t.prototype.getExpressionParserIndex=function(t){for(var e,r=0;r<this.expressionParsers.length;r++){if(this.expressionParsers[r].startPosition>t)break;e=r}return e},t}(),qe=function(){function t(t){this.params=t,this.valid=!1}return t.prototype.parseExpression=function(){this.joinExpressionParser=new Ye(this.params,0);var t=this.joinExpressionParser.parseExpression();return this.valid=t>=this.params.expression.length-1&&this.joinExpressionParser.isValid(),this.params.expression},t.prototype.isValid=function(){return this.valid},t.prototype.getValidationMessage=function(){var t=this.joinExpressionParser.getValidationError();if(!t)return null;var e=t.message,r=t.startPosition,n=t.endPosition;return r<this.params.expression.length?this.params.advancedFilterExpressionService.translate("advancedFilterValidationMessage",[e,this.params.expression.slice(r,n+1).trim()]):this.params.advancedFilterExpressionService.translate("advancedFilterValidationMessageAtEnd",[e])},t.prototype.getFunction=function(){var t={operands:[],operators:[],evaluatorParams:[]};return{functionBody:"return "+this.joinExpressionParser.getFunction(t)+";",params:t}},t.prototype.getAutocompleteListParams=function(t){var e;return null!==(e=this.joinExpressionParser.getAutocompleteListParams(t))&&void 0!==e?e:{enabled:!1}},t.prototype.updateExpression=function(t,e,r){return this.joinExpressionParser.updateExpression(t,e,r)},t.prototype.getModel=function(){return this.isValid()?this.joinExpressionParser.getModel():null},t}(),Ze=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Je=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},$e=function(t){function r(){var e=null!==t&&t.apply(this,arguments)||this;return e.appliedExpression=null,e.expression=null,e.isValid=!0,e}return Ze(r,t),r.prototype.postConstruct=function(){var t=this;this.setEnabled(this.gridOptionsService.is("enableAdvancedFilter"),!0),this.ctrl=this.createManagedBean(new we(this.enabled)),this.expressionProxy={getValue:function(e,r){var n=t.columnModel.getPrimaryColumn(e);return n?t.valueService.getValue(n,r,!0):void 0}},this.addManagedPropertyListener("enableAdvancedFilter",(function(e){return t.setEnabled(!!e.currentValue)})),this.addManagedListener(this.eventService,l.EVENT_NEW_COLUMNS_LOADED,(function(e){return t.onNewColumnsLoaded(e)})),this.addManagedPropertyListener("includeHiddenColumnsInAdvancedFilter",(function(){return t.updateValidity()}))},r.prototype.isEnabled=function(){return this.enabled},r.prototype.isFilterPresent=function(){return!!this.expressionFunction},r.prototype.doesFilterPass=function(t){return this.expressionFunction(this.expressionProxy,t,this.expressionParams)},r.prototype.getModel=function(){var t,e=this.createExpressionParser(this.appliedExpression);return null==e||e.parseExpression(),null!==(t=null==e?void 0:e.getModel())&&void 0!==t?t:null},r.prototype.setModel=function(t){var e=this,r=function(t,n){if("join"===t.filterType){var o=e.advancedFilterExpressionService.parseJoinOperator(t),i=t.conditions.map((function(t){return r(t)})).filter((function(t){return u.exists(t)})).join(" "+o+" ");return n||t.conditions.length<=1?i:"("+i+")"}return e.advancedFilterExpressionService.parseColumnFilterModel(t)},n=t?r(t,!0):null;this.setExpressionDisplayValue(n),this.applyExpression(),this.ctrl.refreshComp(),this.ctrl.refreshBuilderComp()},r.prototype.getExpressionDisplayValue=function(){return this.expression},r.prototype.setExpressionDisplayValue=function(t){this.expression=t},r.prototype.isCurrentExpressionApplied=function(){return this.appliedExpression===this.expression},r.prototype.createExpressionParser=function(t){return t?new qe({expression:t,columnModel:this.columnModel,dataTypeService:this.dataTypeService,valueParserService:this.valueParserService,advancedFilterExpressionService:this.advancedFilterExpressionService}):null},r.prototype.getDefaultExpression=function(t){var e=this.advancedFilterExpressionService.getColumnValue(t)+" ";return{updatedValue:e,updatedPosition:e.length}},r.prototype.isHeaderActive=function(){return!this.gridOptionsService.get("advancedFilterParent")},r.prototype.getCtrl=function(){return this.ctrl},r.prototype.setEnabled=function(t,e){var r=this.enabled,n="clientSide"===this.rowModel.getType();if(t&&!n&&u.doOnce((function(){console.warn("AG Grid: Advanced Filter is only supported with the Client-Side Row Model.")}),"advancedFilterCSRM"),this.enabled=t&&n,!e&&this.enabled!==r){var o={type:l.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,enabled:this.enabled};this.eventService.dispatchEvent(o)}},r.prototype.applyExpression=function(){var t=this.createExpressionParser(this.expression);null==t||t.parseExpression(),this.applyExpressionFromParser(t)},r.prototype.applyExpressionFromParser=function(t){if(this.isValid=!t||t.isValid(),!t||!this.isValid)return this.expressionFunction=null,this.expressionParams=null,void(this.appliedExpression=null);var e=t.getFunction(),r=e.functionBody,n=e.params;this.expressionFunction=new Function("expressionProxy","node","params",r),this.expressionParams=n,this.appliedExpression=this.expression},r.prototype.updateValidity=function(){this.advancedFilterExpressionService.resetColumnCaches();var t=this.createExpressionParser(this.expression);null==t||t.parseExpression();var e=(!t||t.isValid())!==this.isValid;return e&&(this.applyExpressionFromParser(t),this.ctrl.refreshComp()),this.ctrl.refreshBuilderComp(),e},r.prototype.onNewColumnsLoaded=function(t){var e=this;if("gridInitializing"===t.source){var r=function(){var t;return e.setModel(null!==(t=e.gridOptionsService.get("advancedFilterModel"))&&void 0!==t?t:null)};if(this.dataTypeService.isPendingInference()){this.ctrl.setInputDisabled(!0);var n=this.addManagedListener(this.eventService,l.EVENT_DATA_TYPES_INFERRED,(function(){null==n||n(),r(),e.ctrl.setInputDisabled(!1)}))}else r()}},Je([n("valueService")],r.prototype,"valueService",void 0),Je([n("columnModel")],r.prototype,"columnModel",void 0),Je([n("dataTypeService")],r.prototype,"dataTypeService",void 0),Je([n("valueParserService")],r.prototype,"valueParserService",void 0),Je([n("rowModel")],r.prototype,"rowModel",void 0),Je([n("advancedFilterExpressionService")],r.prototype,"advancedFilterExpressionService",void 0),Je([i],r.prototype,"postConstruct",null),r=Je([e("advancedFilterService")],r)}(r),Qe={version:"30.2.0",moduleName:s.AdvancedFilterModule,beans:[$e,Ke],agStackComponents:[{componentName:"agAdvancedFilter",componentClass:Ee}],dependantModules:[Ft]},tr=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),er=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},rr=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},nr=function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t},or=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};!function(t){t[t.CellRange=0]="CellRange",t[t.SelectedRows=1]="SelectedRows",t[t.FocusedCell=2]="FocusedCell"}(je||(je={}));var ir,ar=function(t){function r(){var e=null!==t&&t.apply(this,arguments)||this;return e.lastPasteOperationTime=0,e.navigatorApiFailed=!1,e}var o;return tr(r,t),o=r,r.prototype.init=function(){var t=this;this.logger=this.loggerFactory.create("ClipboardService"),"clientSide"===this.rowModel.getType()&&(this.clientSideRowModel=this.rowModel),this.ctrlsService.whenReady((function(e){t.gridCtrl=e.gridCtrl}))},r.prototype.pasteFromClipboard=function(){var t=this;this.logger.log("pasteFromClipboard"),!this.gridOptionsService.is("suppressClipboardApi")&&!this.navigatorApiFailed&&navigator.clipboard&&navigator.clipboard.readText?navigator.clipboard.readText().then(this.processClipboardData.bind(this)).catch((function(e){u.doOnce((function(){console.warn(e),console.warn("AG Grid: Unable to use the Clipboard API (navigator.clipboard.readText()). The reason why it could not be used has been logged in the previous line. For this reason the grid has defaulted to using a workaround which doesn't perform as well. Either fix why Clipboard API is blocked, OR stop this message from appearing by setting grid property suppressClipboardApi=true (which will default the grid to using the workaround rather than the API")}),"clipboardApiError"),t.navigatorApiFailed=!0,t.pasteFromClipboardLegacy()})):this.pasteFromClipboardLegacy()},r.prototype.pasteFromClipboardLegacy=function(){var t=this,e=!1,r=function(r){var n=(new Date).getTime();n-t.lastPasteOperationTime<50&&(e=!0,r.preventDefault()),t.lastPasteOperationTime=n};this.executeOnTempElement((function(t){t.addEventListener("paste",r),t.focus({preventScroll:!0})}),(function(n){var o=n.value;e?t.refocusLastFocusedCell():t.processClipboardData(o),n.removeEventListener("paste",r)}))},r.prototype.refocusLastFocusedCell=function(){var t=this.focusService.getFocusedCell();t&&this.focusService.setFocusedCell({rowIndex:t.rowIndex,column:t.column,rowPinned:t.rowPinned,forceBrowserFocus:!0})},r.prototype.getClipboardDelimiter=function(){var t=this.gridOptionsService.get("clipboardDelimiter");return u.exists(t)?t:"\t"},r.prototype.processClipboardData=function(t){var e=this;if(null!=t){var r=o.stringToArray(t,this.getClipboardDelimiter()),n=this.gridOptionsService.getCallback("processDataFromClipboard");if(n&&(r=n({data:r})),null!=r){this.gridOptionsService.is("suppressLastEmptyLineOnPaste")&&this.removeLastLineIfBlank(r);this.doPasteOperation((function(t,n,o,i){e.rangeService&&e.rangeService.isMoreThanOneCell()&&!e.hasOnlyOneValueToPaste(r)?e.pasteIntoActiveRange(r,t,n,i):e.pasteStartingFromFocusedCell(r,t,n,o,i)}))}}},r.stringToArray=function(t,e){void 0===e&&(e=",");var r=[],n=function(t){return"\r"===t||"\n"===t},o=!1;if(""===t)return[[""]];for(var i,a,s,l=function(l,u,c){var p=t[c-1],d=t[c],h=t[c+1],f=function(){r[l]||(r[l]=[]),r[l][u]||(r[l][u]="")};if(f(),'"'===d&&(o?'"'===h?(r[l][u]+='"',c++):o=!1:(void 0===p||p===e||n(p))&&(o=!0)),!o&&'"'!==d){if(d===e)return u++,f(),i=l,a=u,s=c,"continue";if(n(d))return u=0,l++,f(),"\r"===d&&"\n"===h&&c++,i=l,a=u,s=c,"continue"}r[l][u]+=d,i=l,a=u,s=c},u=0,c=0,p=0;p<t.length;p++)l(u,c,p),u=i,c=a,p=s;return r},r.prototype.doPasteOperation=function(t){var e,r=this.gridOptionsService.api,n=this.gridOptionsService.columnApi;if(this.eventService.dispatchEvent({type:l.EVENT_PASTE_START,api:r,columnApi:n,source:"clipboard"}),this.clientSideRowModel){var o=this.gridOptionsService.is("aggregateOnlyChangedColumns");e=new O(o,this.clientSideRowModel.getRootNode())}var i={},a=[];t(i,a,this.focusService.getFocusedCell(),e);var s=nr([],rr(a));e&&(this.clientSideRowModel.doAggregate(e),e.forEachChangedNodeDepthFirst((function(t){s.push(t)}))),this.rowRenderer.refreshCells({rowNodes:s}),this.dispatchFlashCells(i),this.fireRowChanged(a),this.refocusLastFocusedCell();var u={type:l.EVENT_PASTE_END,source:"clipboard"};this.eventService.dispatchEvent(u)},r.prototype.pasteIntoActiveRange=function(t,e,r,n){var o=this,i=this.getRangeSize()%t.length!=0,a=0,s=0;this.iterateActiveRanges(!1,(function(l,u,c,p){if(p-a>=t.length){if(i)return;a+=s,s=0}var d=t[p-a];r.push(u);var h=o.gridOptionsService.getCallback("processCellFromClipboard");c.forEach((function(t,r){if(t.isCellEditable(u)&&!t.isSuppressPaste(u)){r>=d.length&&(r%=d.length);var i=o.processCell(u,t,d[r],"dragCopy",h,!0);u.setDataValue(t,i,"paste"),n&&n.addParentNode(u.parent,[t]);var a=l.rowIndex,s=l.rowPinned,c=o.cellPositionUtils.createIdFromValues({rowIndex:a,column:t,rowPinned:s});e[c]=!0}})),s++}))},r.prototype.pasteStartingFromFocusedCell=function(t,e,r,n,o){if(n){var i={rowIndex:n.rowIndex,rowPinned:n.rowPinned},a=this.columnModel.getDisplayedColumnsStartingAt(n.column);this.isPasteSingleValueIntoRange(t)?this.pasteSingleValueIntoRange(t,r,e,o):this.pasteMultipleValues(t,i,r,a,e,"clipboard",o)}},r.prototype.isPasteSingleValueIntoRange=function(t){return this.hasOnlyOneValueToPaste(t)&&null!=this.rangeService&&!this.rangeService.isEmpty()},r.prototype.pasteSingleValueIntoRange=function(t,e,r,n){var o=this,i=t[0][0];this.iterateActiveRanges(!1,(function(t,a,s){e.push(a),s.forEach((function(t){return o.updateCellValue(a,t,i,r,"clipboard",n)}))}))},r.prototype.hasOnlyOneValueToPaste=function(t){return 1===t.length&&1===t[0].length},r.prototype.copyRangeDown=function(){var t=this;if(this.rangeService&&!this.rangeService.isEmpty()){var e=[];this.doPasteOperation((function(r,n,o,i){var a=t.gridOptionsService.getCallback("processCellForClipboard"),s=t.gridOptionsService.getCallback("processCellFromClipboard");t.iterateActiveRanges(!0,(function(o,l,u){e.length?(n.push(l),u.forEach((function(n,a){if(n.isCellEditable(l)&&!n.isSuppressPaste(l)){var u=t.processCell(l,n,e[a],"dragCopy",s,!0);l.setDataValue(n,u,"paste"),i&&i.addParentNode(l.parent,[n]);var c=o.rowIndex,p=o.rowPinned,d=t.cellPositionUtils.createIdFromValues({rowIndex:c,column:n,rowPinned:p});r[d]=!0}}))):u.forEach((function(r){var n=t.processCell(l,r,t.valueService.getValue(r,l),"dragCopy",a,!1,!0);e.push(n)}))}))}))}},r.prototype.removeLastLineIfBlank=function(t){var e=u.last(t);if(e&&1===e.length&&""===e[0]){if(1===t.length)return;u.removeFromArray(t,e)}},r.prototype.fireRowChanged=function(t){var e=this;"fullRow"===this.gridOptionsService.get("editType")&&t.forEach((function(t){var r={type:l.EVENT_ROW_VALUE_CHANGED,node:t,data:t.data,rowIndex:t.rowIndex,rowPinned:t.rowPinned};e.eventService.dispatchEvent(r)}))},r.prototype.pasteMultipleValues=function(t,e,r,n,o,i,a){var s=this,l=e,u=null!=this.clientSideRowModel&&!this.gridOptionsService.is("enableGroupEdit")&&!this.gridOptionsService.is("treeData");t.forEach((function(t){var e=function(){for(;;){if(!l)return null;var t=s.rowPositionUtils.getRowNode(l);if(l=s.cellNavigationService.getRowBelow({rowPinned:l.rowPinned,rowIndex:l.rowIndex}),null==t)return null;if(!(t.detail||t.footer||u&&t.group))return t}}();e&&(t.forEach((function(t,r){return s.updateCellValue(e,n[r],t,o,i,a)})),r.push(e))}))},r.prototype.updateCellValue=function(t,e,r,n,o,i){if(t&&e&&e.isCellEditable(t)&&!e.isSuppressPaste(t)&&(!t.group||!e.isValueActive())){var a=this.processCell(t,e,r,o,this.gridOptionsService.getCallback("processCellFromClipboard"),!0);t.setDataValue(e,a,"paste");var s=t.rowIndex,l=t.rowPinned;n[this.cellPositionUtils.createIdFromValues({rowIndex:s,column:e,rowPinned:l})]=!0,i&&i.addParentNode(t.parent,[e])}},r.prototype.copyToClipboard=function(t){void 0===t&&(t={}),this.copyOrCutToClipboard(t)},r.prototype.cutToClipboard=function(t,e){if(void 0===t&&(t={}),void 0===e&&(e="api"),!this.gridOptionsService.is("suppressCutToClipboard")){var r={type:l.EVENT_CUT_START,source:e};this.eventService.dispatchEvent(r),this.copyOrCutToClipboard(t,!0);var n={type:l.EVENT_CUT_END,source:e};this.eventService.dispatchEvent(n)}},r.prototype.copyOrCutToClipboard=function(t,e){var r=t.includeHeaders,n=t.includeGroupHeaders;this.logger.log("copyToClipboard: includeHeaders = "+r),null==r&&(r=this.gridOptionsService.is("copyHeadersToClipboard")),null==n&&(n=this.gridOptionsService.is("copyGroupHeadersToClipboard"));var o={includeHeaders:r,includeGroupHeaders:n},i=!this.gridOptionsService.is("suppressCopyRowsToClipboard"),a=null;!this.rangeService||this.rangeService.isEmpty()||this.shouldSkipSingleCellRange()?i&&!this.selectionService.isEmpty()?(this.copySelectedRowsToClipboard(o),a=je.SelectedRows):this.focusService.isAnyCellFocused()&&(this.copyFocusedCellToClipboard(o),a=je.FocusedCell):(this.copySelectedRangeToClipboard(o),a=je.CellRange),e&&null!==a&&this.clearCellsAfterCopy(a)},r.prototype.clearCellsAfterCopy=function(t){if(this.eventService.dispatchEvent({type:l.EVENT_KEY_SHORTCUT_CHANGED_CELL_START}),t===je.CellRange)this.rangeService.clearCellRangeCellValues({cellEventSource:"clipboardService"});else if(t===je.SelectedRows)this.clearSelectedRows();else{var e=this.focusService.getFocusedCell();if(null==e)return;var r=this.rowPositionUtils.getRowNode(e);r&&this.clearCellValue(r,e.column)}this.eventService.dispatchEvent({type:l.EVENT_KEY_SHORTCUT_CHANGED_CELL_END})},r.prototype.clearSelectedRows=function(){var t,e,r,n,o=this.selectionService.getSelectedNodes(),i=this.columnModel.getAllDisplayedColumns();try{for(var a=or(o),s=a.next();!s.done;s=a.next()){var l=s.value;try{for(var u=(r=void 0,or(i)),c=u.next();!c.done;c=u.next()){var p=c.value;this.clearCellValue(l,p)}}catch(t){r={error:t}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}}}catch(e){t={error:e}}finally{try{s&&!s.done&&(e=a.return)&&e.call(a)}finally{if(t)throw t.error}}},r.prototype.clearCellValue=function(t,e){e.isCellEditable(t)&&t.setDataValue(e,null,"clipboardService")},r.prototype.shouldSkipSingleCellRange=function(){return this.gridOptionsService.is("suppressCopySingleCellRanges")&&!this.rangeService.isMoreThanOneCell()},r.prototype.iterateActiveRanges=function(t,e,r){var n=this;if(this.rangeService&&!this.rangeService.isEmpty()){var o=this.rangeService.getCellRanges();t?this.iterateActiveRange(o[0],e,r,!0):o.forEach((function(t,i){return n.iterateActiveRange(t,e,r,i===o.length-1)}))}},r.prototype.iterateActiveRange=function(t,e,r,n){if(this.rangeService){var o=this.rangeService.getRangeStartRow(t),i=this.rangeService.getRangeEndRow(t);r&&t.columns&&r(t.columns);for(var a=0,s=!1;!s&&null!=o;){var l=this.rowPositionUtils.getRowNode(o);s=this.rowPositionUtils.sameRow(o,i),e(o,l,t.columns,a++,s&&n),o=this.cellNavigationService.getRowBelow(o)}}},r.prototype.copySelectedRangeToClipboard=function(t){if(void 0===t&&(t={}),this.rangeService&&!this.rangeService.isEmpty()){var e=this.rangeService.areAllRangesAbleToMerge()?this.buildDataFromMergedRanges(t):this.buildDataFromRanges(t),r=e.data,n=e.cellsToFlash;this.copyDataToClipboard(r),this.dispatchFlashCells(n)}},r.prototype.buildDataFromMergedRanges=function(t){var e=this,r=new Set,n=this.rangeService.getCellRanges(),o=new Map,i=[],a={};n.forEach((function(t){t.columns.forEach((function(t){return r.add(t)}));var n=e.getRangeRowPositionsAndCellsToFlash(t),s=n.rowPositions,l=n.cellsToFlash;s.forEach((function(t){var e=t.rowIndex+"-"+(t.rowPinned||"null");o.get(e)||(o.set(e,!0),i.push(t))})),Object.assign(a,l)}));var s=this.columnModel.getAllDisplayedColumns(),l=Array.from(r);return l.sort((function(t,e){return s.indexOf(t)-s.indexOf(e)})),{data:this.buildExportParams({columns:l,rowPositions:i,includeHeaders:t.includeHeaders,includeGroupHeaders:t.includeGroupHeaders}),cellsToFlash:a}},r.prototype.buildDataFromRanges=function(t){var e=this,r=this.rangeService.getCellRanges(),n=[],o={};return r.forEach((function(r){var i=e.getRangeRowPositionsAndCellsToFlash(r),a=i.rowPositions,s=i.cellsToFlash;Object.assign(o,s),n.push(e.buildExportParams({columns:r.columns,rowPositions:a,includeHeaders:t.includeHeaders,includeGroupHeaders:t.includeGroupHeaders}))})),{data:n.join("\n"),cellsToFlash:o}},r.prototype.getRangeRowPositionsAndCellsToFlash=function(t){for(var e=this,r=[],n={},o=this.rangeService.getRangeStartRow(t),i=this.rangeService.getRangeEndRow(t),a=o;a&&(r.push(a),t.columns.forEach((function(t){var r=a,o=r.rowIndex,i=r.rowPinned,s=e.cellPositionUtils.createIdFromValues({rowIndex:o,column:t,rowPinned:i});n[s]=!0})),!this.rowPositionUtils.sameRow(a,i));)a=this.cellNavigationService.getRowBelow(a);return{rowPositions:r,cellsToFlash:n}},r.prototype.copyFocusedCellToClipboard=function(t){var e;void 0===t&&(t={});var r=this.focusService.getFocusedCell();if(null!=r){var n=this.cellPositionUtils.createId(r),o={rowPinned:r.rowPinned,rowIndex:r.rowIndex},i=r.column,a=this.buildExportParams({columns:[i],rowPositions:[o],includeHeaders:t.includeHeaders,includeGroupHeaders:t.includeGroupHeaders});this.copyDataToClipboard(a),this.dispatchFlashCells(((e={})[n]=!0,e))}},r.prototype.copySelectedRowsToClipboard=function(t){void 0===t&&(t={});var e=t.columnKeys,r=t.includeHeaders,n=t.includeGroupHeaders,o=this.buildExportParams({columns:e,includeHeaders:r,includeGroupHeaders:n});this.copyDataToClipboard(o)},r.prototype.buildExportParams=function(t){var e=this,r=t.columns,n=t.rowPositions,o=t.includeHeaders,i=void 0!==o&&o,a=t.includeGroupHeaders,s={columnKeys:r,rowPositions:n,skipColumnHeaders:!i,skipColumnGroupHeaders:!(void 0!==a&&a),suppressQuotes:!0,columnSeparator:this.getClipboardDelimiter(),onlySelected:!n,processCellCallback:this.gridOptionsService.getCallback("processCellForClipboard"),processRowGroupCallback:function(t){return e.processRowGroupCallback(t)},processHeaderCallback:this.gridOptionsService.getCallback("processHeaderForClipboard"),processGroupHeaderCallback:this.gridOptionsService.getCallback("processGroupHeaderForClipboard")};return this.csvCreator.getDataAsCsv(s,!0)},r.prototype.processRowGroupCallback=function(t){var e=this,r=t.node,n=r.key,o=null!=n?n:"";if(t.node.footer){var i="";n&&n.length&&(i=" "+n),o="Total"+i}var a=this.gridOptionsService.getCallback("processCellForClipboard");if(a){var s=r.rowGroupColumn;return!s&&r.footer&&-1===r.level&&(s=this.columnModel.getRowGroupColumns()[0]),a({value:o,node:r,column:s,type:"clipboard",formatValue:function(t){var n;return null!==(n=e.valueFormatterService.formatValue(s,r,t))&&void 0!==n?n:t},parseValue:function(t){return e.valueParserService.parseValue(s,r,t,e.valueService.getValue(s,r))}})}return o},r.prototype.dispatchFlashCells=function(t){var e=this;window.setTimeout((function(){var r={type:l.EVENT_FLASH_CELLS,cells:t};e.eventService.dispatchEvent(r)}),0)},r.prototype.processCell=function(t,e,r,n,o,i,a){var s,l=this;return o?o({column:e,node:t,value:r,type:n,formatValue:function(r){var n;return null!==(n=l.valueFormatterService.formatValue(e,null!=t?t:null,r))&&void 0!==n?n:r},parseValue:function(r){return l.valueParserService.parseValue(e,null!=t?t:null,r,l.valueService.getValue(e,t))}}):i&&e.getColDef().useValueParserForImport?this.valueParserService.parseValue(e,null!=t?t:null,r,this.valueService.getValue(e,t)):a&&e.getColDef().useValueFormatterForExport&&null!==(s=this.valueFormatterService.formatValue(e,null!=t?t:null,r))&&void 0!==s?s:r},r.prototype.copyDataToClipboard=function(t){var e=this,r=this.gridOptionsService.getCallback("sendToClipboard");r?r({data:t}):!this.gridOptionsService.is("suppressClipboardApi")&&navigator.clipboard?navigator.clipboard.writeText(t).catch((function(r){u.doOnce((function(){console.warn(r),console.warn("AG Grid: Unable to use the Clipboard API (navigator.clipboard.writeText()). The reason why it could not be used has been logged in the previous line. For this reason the grid has defaulted to using a workaround which doesn't perform as well. Either fix why Clipboard API is blocked, OR stop this message from appearing by setting grid property suppressClipboardApi=true (which will default the grid to using the workaround rather than the API.")}),"clipboardApiError"),e.copyDataToClipboardLegacy(t)})):this.copyDataToClipboardLegacy(t)},r.prototype.copyDataToClipboardLegacy=function(t){var e=this;this.executeOnTempElement((function(r){var n=e.gridOptionsService.getDocument(),o=n.activeElement;r.value=t||" ",r.select(),r.focus({preventScroll:!0}),n.execCommand("copy")||console.warn("AG Grid: Browser did not allow document.execCommand('copy'). Ensure api.copySelectedRowsToClipboard() is invoked via a user event, i.e. button click, otherwise the browser will prevent it for security reasons."),null!=o&&null!=o.focus&&o.focus({preventScroll:!0})}))},r.prototype.executeOnTempElement=function(t,e){var r=this.gridOptionsService.getDocument(),n=r.createElement("textarea");n.style.width="1px",n.style.height="1px",n.style.top=r.documentElement.scrollTop+"px",n.style.left=r.documentElement.scrollLeft+"px",n.style.position="absolute",n.style.opacity="0";var o=this.gridCtrl.getGui();o.appendChild(n);try{t(n)}catch(t){console.warn("AG Grid: Browser does not support document.execCommand('copy') for clipboard operations")}e?window.setTimeout((function(){e(n),o.removeChild(n)}),100):o.removeChild(n)},r.prototype.getRangeSize=function(){var t=this.rangeService.getCellRanges(),e=0,r=0;return t.length>0&&(e=this.rangeService.getRangeStartRow(t[0]).rowIndex,r=this.rangeService.getRangeEndRow(t[0]).rowIndex),e-r+1},er([n("csvCreator")],r.prototype,"csvCreator",void 0),er([n("loggerFactory")],r.prototype,"loggerFactory",void 0),er([n("selectionService")],r.prototype,"selectionService",void 0),er([E("rangeService")],r.prototype,"rangeService",void 0),er([n("rowModel")],r.prototype,"rowModel",void 0),er([n("ctrlsService")],r.prototype,"ctrlsService",void 0),er([n("valueService")],r.prototype,"valueService",void 0),er([n("focusService")],r.prototype,"focusService",void 0),er([n("rowRenderer")],r.prototype,"rowRenderer",void 0),er([n("columnModel")],r.prototype,"columnModel",void 0),er([n("cellNavigationService")],r.prototype,"cellNavigationService",void 0),er([n("cellPositionUtils")],r.prototype,"cellPositionUtils",void 0),er([n("rowPositionUtils")],r.prototype,"rowPositionUtils",void 0),er([n("valueFormatterService")],r.prototype,"valueFormatterService",void 0),er([n("valueParserService")],r.prototype,"valueParserService",void 0),er([i],r.prototype,"init",null),r=o=er([e("clipboardService")],r)}(r),sr={version:"30.2.0",moduleName:s.ClipboardModule,beans:[ar],dependantModules:[Ft,T]},lr=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ur=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a};!function(t){t[t.EXPANDED=0]="EXPANDED",t[t.COLLAPSED=1]="COLLAPSED",t[t.INDETERMINATE=2]="INDETERMINATE"}(ir||(ir={}));var cr=function(t){function e(){return t.call(this,e.TEMPLATE)||this}return lr(e,t),e.prototype.postConstruct=function(){var t=this;this.createExpandIcons(),this.addManagedListener(this.eExpand,"click",this.onExpandClicked.bind(this)),this.addManagedListener(this.eExpand,"keydown",(function(e){e.key===c.SPACE&&(e.preventDefault(),t.onExpandClicked())})),this.addManagedListener(this.eSelect.getInputElement(),"click",this.onSelectClicked.bind(this)),this.eFilterTextField.onValueChange((function(){return t.onFilterTextChanged()})),this.addManagedListener(this.eFilterTextField.getInputElement(),"keydown",this.onMiniFilterKeyDown.bind(this)),this.addManagedListener(this.eventService,l.EVENT_NEW_COLUMNS_LOADED,this.showOrHideOptions.bind(this));var e=this.localeService.getLocaleTextFunc();this.eSelect.setInputAriaLabel(e("ariaColumnSelectAll","Toggle Select All Columns")),this.eFilterTextField.setInputAriaLabel(e("ariaFilterColumnsInput","Filter Columns Input")),this.activateTabIndex([this.eExpand])},e.prototype.init=function(t){this.params=t,this.columnModel.isReady()&&this.showOrHideOptions()},e.prototype.createExpandIcons=function(){this.eExpand.appendChild(this.eExpandChecked=u.createIconNoSpan("columnSelectOpen",this.gridOptionsService)),this.eExpand.appendChild(this.eExpandUnchecked=u.createIconNoSpan("columnSelectClosed",this.gridOptionsService)),this.eExpand.appendChild(this.eExpandIndeterminate=u.createIconNoSpan("columnSelectIndeterminate",this.gridOptionsService)),this.setExpandState(ir.EXPANDED)},e.prototype.showOrHideOptions=function(){var t=!this.params.suppressColumnFilter,e=!this.params.suppressColumnSelectAll,r=!this.params.suppressColumnExpandAll,n=this.columnModel.isPrimaryColumnGroupsPresent(),o=this.localeService.getLocaleTextFunc();this.eFilterTextField.setInputPlaceholder(o("searchOoo","Search...")),u.setDisplayed(this.eFilterTextField.getGui(),t),u.setDisplayed(this.eSelect.getGui(),e),u.setDisplayed(this.eExpand,r&&n)},e.prototype.onFilterTextChanged=function(){var t=this;this.onFilterTextChangedDebounced||(this.onFilterTextChangedDebounced=u.debounce((function(){var e=t.eFilterTextField.getValue();t.dispatchEvent({type:"filterChanged",filterText:e})}),e.DEBOUNCE_DELAY)),this.onFilterTextChangedDebounced()},e.prototype.onMiniFilterKeyDown=function(t){var r=this;t.key===c.ENTER&&setTimeout((function(){return r.onSelectClicked()}),e.DEBOUNCE_DELAY)},e.prototype.onSelectClicked=function(){this.dispatchEvent({type:this.selectState?"unselectAll":"selectAll"})},e.prototype.onExpandClicked=function(){this.dispatchEvent({type:this.expandState===ir.EXPANDED?"collapseAll":"expandAll"})},e.prototype.setExpandState=function(t){this.expandState=t,u.setDisplayed(this.eExpandChecked,this.expandState===ir.EXPANDED),u.setDisplayed(this.eExpandUnchecked,this.expandState===ir.COLLAPSED),u.setDisplayed(this.eExpandIndeterminate,this.expandState===ir.INDETERMINATE)},e.prototype.setSelectionState=function(t){this.selectState=t,this.eSelect.setValue(this.selectState)},e.DEBOUNCE_DELAY=300,e.TEMPLATE='<div class="ag-column-select-header" role="presentation">\n            <div ref="eExpand" class="ag-column-select-header-icon"></div>\n            <ag-checkbox ref="eSelect" class="ag-column-select-header-checkbox"></ag-checkbox>\n            <ag-input-text-field class="ag-column-select-header-filter-wrapper" ref="eFilterTextField"></ag-input-text-field>\n        </div>',ur([n("columnModel")],e.prototype,"columnModel",void 0),ur([o("eExpand")],e.prototype,"eExpand",void 0),ur([o("eSelect")],e.prototype,"eSelect",void 0),ur([o("eFilterTextField")],e.prototype,"eFilterTextField",void 0),ur([i],e.prototype,"postConstruct",null),e}(a),pr=function(){function t(t,e,r,n,o){void 0===n&&(n=!1),this.eventService=new P,this.displayName=t,this.dept=r,this.group=n,n?(this.columnGroup=e,this.expanded=o,this.children=[]):this.column=e}return t.prototype.isGroup=function(){return this.group},t.prototype.getDisplayName=function(){return this.displayName},t.prototype.getColumnGroup=function(){return this.columnGroup},t.prototype.getColumn=function(){return this.column},t.prototype.getDept=function(){return this.dept},t.prototype.isExpanded=function(){return!!this.expanded},t.prototype.getChildren=function(){return this.children},t.prototype.isPassesFilter=function(){return this.passesFilter},t.prototype.setExpanded=function(e){e!==this.expanded&&(this.expanded=e,this.eventService.dispatchEvent({type:t.EVENT_EXPANDED_CHANGED}))},t.prototype.setPassesFilter=function(t){this.passesFilter=t},t.prototype.addEventListener=function(t,e){this.eventService.addEventListener(t,e)},t.prototype.removeEventListener=function(t,e){this.eventService.removeEventListener(t,e)},t.EVENT_EXPANDED_CHANGED="expandedChanged",t}(),dr=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),hr=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},fr=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},vr=function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t},yr=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},gr=function(t){function e(e,r,n){var o=t.call(this,'<div class="ag-menu"></div>')||this;return o.column=e,o.mouseEvent=r,o.parentEl=n,o.displayName=null,o}return dr(e,t),e.prototype.postConstruct=function(){this.initializeProperties(this.column),this.buildMenuItemMap(),this.column instanceof D?this.displayName=this.columnModel.getDisplayNameForColumn(this.column,"columnToolPanel"):this.displayName=this.columnModel.getDisplayNameForProvidedColumnGroup(null,this.column,"columnToolPanel"),this.isActive()&&(this.mouseEvent.preventDefault(),this.displayContextMenu())},e.prototype.initializeProperties=function(t){this.columns=t instanceof A?t.getLeafColumns():[t],this.allowGrouping=this.columns.some((function(t){return t.isPrimary()&&t.isAllowRowGroup()})),this.allowValues=this.columns.some((function(t){return t.isPrimary()&&t.isAllowValue()})),this.allowPivoting=this.columnModel.isPivotMode()&&this.columns.some((function(t){return t.isPrimary()&&t.isAllowPivot()}))},e.prototype.buildMenuItemMap=function(){var t=this,e=this.localeService.getLocaleTextFunc();this.menuItemMap=new Map,this.menuItemMap.set("rowGroup",{allowedFunction:function(t){return t.isPrimary()&&t.isAllowRowGroup()},activeFunction:function(t){return t.isRowGroupActive()},activateLabel:function(){return e("groupBy","Group by")+" "+t.displayName},deactivateLabel:function(){return e("ungroupBy","Un-Group by")+" "+t.displayName},activateFunction:function(){var e=t.columnModel.getRowGroupColumns();t.columnModel.setRowGroupColumns(t.addColumnsToList(e),"toolPanelUi")},deActivateFunction:function(){var e=t.columnModel.getRowGroupColumns();t.columnModel.setRowGroupColumns(t.removeColumnsFromList(e),"toolPanelUi")},addIcon:"menuAddRowGroup",removeIcon:"menuRemoveRowGroup"}),this.menuItemMap.set("value",{allowedFunction:function(t){return t.isPrimary()&&t.isAllowValue()},activeFunction:function(t){return t.isValueActive()},activateLabel:function(){return e("addToValues","Add "+t.displayName+" to values",[t.displayName])},deactivateLabel:function(){return e("removeFromValues","Remove "+t.displayName+" from values",[t.displayName])},activateFunction:function(){var e=t.columnModel.getValueColumns();t.columnModel.setValueColumns(t.addColumnsToList(e),"toolPanelUi")},deActivateFunction:function(){var e=t.columnModel.getValueColumns();t.columnModel.setValueColumns(t.removeColumnsFromList(e),"toolPanelUi")},addIcon:"valuePanel",removeIcon:"valuePanel"}),this.menuItemMap.set("pivot",{allowedFunction:function(e){return t.columnModel.isPivotMode()&&e.isPrimary()&&e.isAllowPivot()},activeFunction:function(t){return t.isPivotActive()},activateLabel:function(){return e("addToLabels","Add "+t.displayName+" to labels",[t.displayName])},deactivateLabel:function(){return e("removeFromLabels","Remove "+t.displayName+" from labels",[t.displayName])},activateFunction:function(){var e=t.columnModel.getPivotColumns();t.columnModel.setPivotColumns(t.addColumnsToList(e),"toolPanelUi")},deActivateFunction:function(){var e=t.columnModel.getPivotColumns();t.columnModel.setPivotColumns(t.removeColumnsFromList(e),"toolPanelUi")},addIcon:"pivotPanel",removeIcon:"pivotPanel"})},e.prototype.addColumnsToList=function(t){return vr([],fr(t)).concat(this.columns.filter((function(e){return-1===t.indexOf(e)})))},e.prototype.removeColumnsFromList=function(t){var e=this;return t.filter((function(t){return-1===e.columns.indexOf(t)}))},e.prototype.displayContextMenu=function(){var t=this,e=this.getGui(),r=this.createBean(new M),n=this.getMappedMenuItems(),o=this.localeService.getLocaleTextFunc(),i=function(){};e.appendChild(r.getGui()),r.addMenuItems(n),r.addManagedListener(r,_.EVENT_MENU_ITEM_SELECTED,(function(){t.parentEl.focus(),i()}));var a=this.popupService.addPopup({modal:!0,eChild:e,closeOnEsc:!0,afterGuiAttached:function(){return t.focusService.focusInto(r.getGui())},ariaLabel:o("ariaLabelContextMenu","Context Menu"),closedCallback:function(e){e instanceof KeyboardEvent&&t.parentEl.focus(),t.destroyBean(r)}});a&&(i=a.hideFunc),this.popupService.positionPopupUnderMouseEvent({type:"columnContextMenu",mouseEvent:this.mouseEvent,ePopup:e})},e.prototype.isActive=function(){return this.allowGrouping||this.allowValues||this.allowPivoting},e.prototype.getMappedMenuItems=function(){var t,e,r=[],n=function(t){var e=o.columns.some((function(e){return t.allowedFunction(e)&&!t.activeFunction(e)})),n=o.columns.some((function(e){return t.allowedFunction(e)&&t.activeFunction(e)}));e&&r.push({name:t.activateLabel(o.displayName),icon:u.createIconNoSpan(t.addIcon,o.gridOptionsService,null),action:function(){return t.activateFunction()}}),n&&r.push({name:t.deactivateLabel(o.displayName),icon:u.createIconNoSpan(t.removeIcon,o.gridOptionsService,null),action:function(){return t.deActivateFunction()}})},o=this;try{for(var i=yr(this.menuItemMap.values()),a=i.next();!a.done;a=i.next()){n(a.value)}}catch(e){t={error:e}}finally{try{a&&!a.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}return r},hr([n("columnModel")],e.prototype,"columnModel",void 0),hr([n("popupService")],e.prototype,"popupService",void 0),hr([n("focusService")],e.prototype,"focusService",void 0),hr([i],e.prototype,"postConstruct",null),e}(a),mr=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),br=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},Cr=function(t){function e(e,r,n,o){var i=t.call(this)||this;return i.modelItem=e,i.allowDragging=r,i.eventType=n,i.focusWrapper=o,i.processingColumnStateChange=!1,i.modelItem=e,i.columnGroup=e.getColumnGroup(),i.columnDept=e.getDept(),i.displayName=e.getDisplayName(),i.allowDragging=r,i}return mr(e,t),e.prototype.init=function(){var t=this;this.setTemplate(e.TEMPLATE),this.eDragHandle=u.createIconNoSpan("columnDrag",this.gridOptionsService),this.eDragHandle.classList.add("ag-drag-handle","ag-column-select-column-group-drag-handle");var r=this.cbSelect.getGui(),n=this.cbSelect.getInputElement();r.insertAdjacentElement("afterend",this.eDragHandle),n.setAttribute("tabindex","-1"),this.eLabel.innerHTML=this.displayName?this.displayName:"",this.setupExpandContract(),this.addCssClass("ag-column-select-indent-"+this.columnDept),this.addManagedListener(this.eventService,l.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(this.eLabel,"click",this.onLabelClicked.bind(this)),this.addManagedListener(this.cbSelect,l.EVENT_FIELD_VALUE_CHANGED,this.onCheckboxChanged.bind(this)),this.addManagedListener(this.modelItem,pr.EVENT_EXPANDED_CHANGED,this.onExpandChanged.bind(this)),this.addManagedListener(this.focusWrapper,"keydown",this.handleKeyDown.bind(this)),this.addManagedListener(this.focusWrapper,"contextmenu",this.onContextMenu.bind(this)),this.setOpenClosedIcons(),this.setupDragging(),this.onColumnStateChanged(),this.addVisibilityListenersToAllChildren(),this.refreshAriaExpanded(),this.refreshAriaLabel(),this.setupTooltip(),R.getToolPanelClassesFromColDef(this.columnGroup.getColGroupDef(),this.gridOptionsService,null,this.columnGroup).forEach((function(e){return t.addOrRemoveCssClass(e,!0)}))},e.prototype.getColumns=function(){return this.columnGroup.getLeafColumns()},e.prototype.setupTooltip=function(){var t=this,e=this.columnGroup.getColGroupDef();if(e){var r=function(){var r=e.headerTooltip;t.setTooltip(r)};r(),this.addManagedListener(this.eventService,l.EVENT_NEW_COLUMNS_LOADED,r)}},e.prototype.getTooltipParams=function(){var e=t.prototype.getTooltipParams.call(this);return e.location="columnToolPanelColumnGroup",e},e.prototype.handleKeyDown=function(t){switch(t.key){case c.LEFT:t.preventDefault(),this.modelItem.setExpanded(!1);break;case c.RIGHT:t.preventDefault(),this.modelItem.setExpanded(!0);break;case c.SPACE:t.preventDefault(),this.isSelectable()&&this.onSelectAllChanged(!this.isSelected())}},e.prototype.onContextMenu=function(t){var e=this,r=this.columnGroup;if(!this.gridOptionsService.is("functionsReadOnly")){var n=this.createBean(new gr(r,t,this.focusWrapper));this.addDestroyFunc((function(){n.isAlive()&&e.destroyBean(n)}))}},e.prototype.addVisibilityListenersToAllChildren=function(){var t=this;this.columnGroup.getLeafColumns().forEach((function(e){t.addManagedListener(e,D.EVENT_VISIBLE_CHANGED,t.onColumnStateChanged.bind(t)),t.addManagedListener(e,D.EVENT_VALUE_CHANGED,t.onColumnStateChanged.bind(t)),t.addManagedListener(e,D.EVENT_PIVOT_CHANGED,t.onColumnStateChanged.bind(t)),t.addManagedListener(e,D.EVENT_ROW_GROUP_CHANGED,t.onColumnStateChanged.bind(t))}))},e.prototype.setupDragging=function(){var t=this;if(this.allowDragging){var e=!this.gridOptionsService.is("suppressDragLeaveHidesColumns"),r={type:h.ToolPanel,eElement:this.eDragHandle,dragItemName:this.displayName,getDefaultIconName:function(){return e?m.ICON_HIDE:m.ICON_NOT_ALLOWED},getDragItem:function(){return t.createDragItem()},onDragStarted:function(){e=!t.gridOptionsService.is("suppressDragLeaveHidesColumns");var r={type:l.EVENT_COLUMN_PANEL_ITEM_DRAG_START,column:t.columnGroup};t.eventService.dispatchEvent(r)},onDragStopped:function(){var e={type:l.EVENT_COLUMN_PANEL_ITEM_DRAG_END};t.eventService.dispatchEvent(e)},onGridEnter:function(r){e&&t.modelItemUtils.updateColumns({columns:t.columnGroup.getLeafColumns(),visibleState:null==r?void 0:r.visibleState,pivotState:null==r?void 0:r.pivotState,eventType:t.eventType})},onGridExit:function(){e&&t.onChangeCommon(!1)}};this.dragAndDropService.addDragSource(r,!0),this.addDestroyFunc((function(){return t.dragAndDropService.removeDragSource(r)}))}else u.setDisplayed(this.eDragHandle,!1)},e.prototype.createDragItem=function(){var t=this,e=this.columnGroup.getLeafColumns(),r={},n={};return e.forEach((function(e){var o=e.getId();r[o]=e.isVisible(),n[o]=t.modelItemUtils.createPivotState(e)})),{columns:e,visibleState:r,pivotState:n}},e.prototype.setupExpandContract=function(){this.eGroupClosedIcon.appendChild(u.createIcon("columnSelectClosed",this.gridOptionsService,null)),this.eGroupOpenedIcon.appendChild(u.createIcon("columnSelectOpen",this.gridOptionsService,null)),this.addManagedListener(this.eGroupClosedIcon,"click",this.onExpandOrContractClicked.bind(this)),this.addManagedListener(this.eGroupOpenedIcon,"click",this.onExpandOrContractClicked.bind(this));var t=new k(this.eColumnGroupIcons,!0);this.addManagedListener(t,k.EVENT_TAP,this.onExpandOrContractClicked.bind(this)),this.addDestroyFunc(t.destroy.bind(t))},e.prototype.onLabelClicked=function(){var t=!this.cbSelect.getValue();this.onChangeCommon(t)},e.prototype.onCheckboxChanged=function(t){this.onChangeCommon(t.selected)},e.prototype.getVisibleLeafColumns=function(){var t=[],e=function(r){r.forEach((function(r){r.isPassesFilter()&&(r.isGroup()?e(r.getChildren()):t.push(r.getColumn()))}))};return e(this.modelItem.getChildren()),t},e.prototype.onChangeCommon=function(t){this.refreshAriaLabel(),this.processingColumnStateChange||this.modelItemUtils.selectAllChildren(this.modelItem.getChildren(),t,this.eventType)},e.prototype.refreshAriaLabel=function(){var t=this.localeService.getLocaleTextFunc(),e=t("ariaColumnGroup","Column Group"),r=this.cbSelect.getValue(),n=void 0===r?t("ariaIndeterminate","indeterminate"):r?t("ariaVisible","visible"):t("ariaHidden","hidden"),o=t("ariaToggleVisibility","Press SPACE to toggle visibility");u.setAriaLabel(this.focusWrapper,this.displayName+" "+e),this.cbSelect.setInputAriaLabel(o+" ("+n+")"),u.setAriaDescribedBy(this.focusWrapper,this.cbSelect.getInputElement().id)},e.prototype.onColumnStateChanged=function(){var t=this.workOutSelectedValue(),e=this.workOutReadOnlyValue();this.processingColumnStateChange=!0,this.cbSelect.setValue(t),this.cbSelect.setReadOnly(e),this.addOrRemoveCssClass("ag-column-select-column-group-readonly",e),this.processingColumnStateChange=!1},e.prototype.workOutSelectedValue=function(){var t=this,e=this.columnModel.isPivotMode(),r=this.getVisibleLeafColumns(),n=0,o=0;if(r.forEach((function(r){!e&&r.getColDef().lockVisible||(t.isColumnChecked(r,e)?n++:o++)})),!(n>0&&o>0))return n>0},e.prototype.workOutReadOnlyValue=function(){var t=this.columnModel.isPivotMode(),e=0;return this.columnGroup.getLeafColumns().forEach((function(r){t?r.isAnyFunctionAllowed()&&e++:r.getColDef().lockVisible||e++})),0===e},e.prototype.isColumnChecked=function(t,e){if(e){var r=t.isPivotActive(),n=t.isRowGroupActive(),o=t.isValueActive();return r||n||o}return t.isVisible()},e.prototype.onExpandOrContractClicked=function(){var t=this.modelItem.isExpanded();this.modelItem.setExpanded(!t)},e.prototype.onExpandChanged=function(){this.setOpenClosedIcons(),this.refreshAriaExpanded()},e.prototype.setOpenClosedIcons=function(){var t=this.modelItem.isExpanded();u.setDisplayed(this.eGroupClosedIcon,!t),u.setDisplayed(this.eGroupOpenedIcon,t)},e.prototype.refreshAriaExpanded=function(){u.setAriaExpanded(this.focusWrapper,this.modelItem.isExpanded())},e.prototype.getDisplayName=function(){return this.displayName},e.prototype.onSelectAllChanged=function(t){var e=this.cbSelect.getValue();!this.cbSelect.isReadOnly()&&(t&&!e||!t&&e)&&this.cbSelect.toggle()},e.prototype.isSelected=function(){return this.cbSelect.getValue()},e.prototype.isSelectable=function(){return!this.cbSelect.isReadOnly()},e.prototype.setSelected=function(t){this.cbSelect.setValue(t,!0)},e.TEMPLATE='<div class="ag-column-select-column-group" aria-hidden="true">\n            <span class="ag-column-group-icons" ref="eColumnGroupIcons" >\n                <span class="ag-column-group-closed-icon" ref="eGroupClosedIcon"></span>\n                <span class="ag-column-group-opened-icon" ref="eGroupOpenedIcon"></span>\n            </span>\n            <ag-checkbox ref="cbSelect" class="ag-column-select-checkbox"></ag-checkbox>\n            <span class="ag-column-select-column-label" ref="eLabel"></span>\n        </div>',br([n("columnModel")],e.prototype,"columnModel",void 0),br([n("dragAndDropService")],e.prototype,"dragAndDropService",void 0),br([n("modelItemUtils")],e.prototype,"modelItemUtils",void 0),br([o("cbSelect")],e.prototype,"cbSelect",void 0),br([o("eLabel")],e.prototype,"eLabel",void 0),br([o("eGroupOpenedIcon")],e.prototype,"eGroupOpenedIcon",void 0),br([o("eGroupClosedIcon")],e.prototype,"eGroupClosedIcon",void 0),br([o("eColumnGroupIcons")],e.prototype,"eColumnGroupIcons",void 0),br([i],e.prototype,"init",null),e}(a),Sr=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),wr=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},xr=function(t){function e(e,r){var n=t.call(this)||this;return n.comp=e,n.virtualList=r,n}return Sr(e,t),e.prototype.postConstruct=function(){var t=this;this.createManagedBean(new d(this.comp,this.virtualList,{dragSourceType:h.ToolPanel,listItemDragStartEvent:l.EVENT_COLUMN_PANEL_ITEM_DRAG_START,listItemDragEndEvent:l.EVENT_COLUMN_PANEL_ITEM_DRAG_END,eventSource:this.eventService,getCurrentDragValue:function(e){return t.getCurrentDragValue(e)},isMoveBlocked:function(e){return t.isMoveBlocked(e)},getNumRows:function(t){return t.getDisplayedColsList().length},moveItem:function(e,r){return t.moveItem(e,r)}}))},e.prototype.getCurrentDragValue=function(t){return t.column},e.prototype.isMoveBlocked=function(t){return!!this.getCurrentColumns(t).find((function(t){var e=t.getColDef();return!!e.suppressMovable||!!e.lockPosition}))},e.prototype.moveItem=function(t,e){var r=this.getTargetIndex(t,e),n=this.getCurrentColumns(t);null!=r&&this.columnModel.moveColumns(n,r,"toolPanelUi")},e.prototype.getMoveDiff=function(t,e){var r=this.columnModel.getAllGridColumns(),n=this.getCurrentColumns(t),o=n[0],i=n.length;return r.indexOf(o)<e?i:0},e.prototype.getCurrentColumns=function(t){return t instanceof A?t.getLeafColumns():[t]},e.prototype.getTargetIndex=function(t,e){if(!e)return null;var r,n=e.component,o="top"===e.position;n instanceof Cr?(r=n.getColumns()[0],o=!0):r=n.getColumn();if(-1!==this.getCurrentColumns(t).indexOf(r))return null;var i=this.columnModel.getAllGridColumns().indexOf(r),a=o?i:i+1;return a-this.getMoveDiff(t,a)},wr([n("columnModel")],e.prototype,"columnModel",void 0),wr([i],e.prototype,"postConstruct",null),e}(r),Or=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Er=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},Tr=function(t){function e(e,r,n,o){var i=t.call(this)||this;return i.allowDragging=r,i.groupsExist=n,i.focusWrapper=o,i.processingColumnStateChange=!1,i.column=e.getColumn(),i.columnDept=e.getDept(),i.displayName=e.getDisplayName(),i}return Or(e,t),e.prototype.init=function(){var t=this;this.setTemplate(e.TEMPLATE),this.eDragHandle=u.createIconNoSpan("columnDrag",this.gridOptionsService),this.eDragHandle.classList.add("ag-drag-handle","ag-column-select-column-drag-handle");var r=this.cbSelect.getGui(),n=this.cbSelect.getInputElement();r.insertAdjacentElement("afterend",this.eDragHandle),n.setAttribute("tabindex","-1");var o=u.escapeString(this.displayName);this.eLabel.innerHTML=o;var i=this.columnDept;this.groupsExist&&this.addCssClass("ag-column-select-add-group-indent"),this.addCssClass("ag-column-select-indent-"+i),this.setupDragging(),this.addManagedListener(this.eventService,l.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(this.column,D.EVENT_VALUE_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(this.column,D.EVENT_PIVOT_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(this.column,D.EVENT_ROW_GROUP_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(this.column,D.EVENT_VISIBLE_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(this.focusWrapper,"keydown",this.handleKeyDown.bind(this)),this.addManagedListener(this.focusWrapper,"contextmenu",this.onContextMenu.bind(this)),this.addManagedPropertyListener("functionsReadOnly",this.onColumnStateChanged.bind(this)),this.addManagedListener(this.cbSelect,l.EVENT_FIELD_VALUE_CHANGED,this.onCheckboxChanged.bind(this)),this.addManagedListener(this.eLabel,"click",this.onLabelClicked.bind(this)),this.onColumnStateChanged(),this.refreshAriaLabel(),this.setupTooltip(),R.getToolPanelClassesFromColDef(this.column.getColDef(),this.gridOptionsService,this.column,null).forEach((function(e){return t.addOrRemoveCssClass(e,!0)}))},e.prototype.getColumn=function(){return this.column},e.prototype.setupTooltip=function(){var t=this,e=function(){var e=t.column.getColDef().headerTooltip;t.setTooltip(e)};e(),this.addManagedListener(this.eventService,l.EVENT_NEW_COLUMNS_LOADED,e)},e.prototype.getTooltipParams=function(){var e=t.prototype.getTooltipParams.call(this);return e.location="columnToolPanelColumn",e.colDef=this.column.getColDef(),e},e.prototype.onContextMenu=function(t){var e=this,r=this.column;if(!this.gridOptionsService.is("functionsReadOnly")){var n=this.createBean(new gr(r,t,this.focusWrapper));this.addDestroyFunc((function(){n.isAlive()&&e.destroyBean(n)}))}},e.prototype.handleKeyDown=function(t){t.key===c.SPACE&&(t.preventDefault(),this.isSelectable()&&this.onSelectAllChanged(!this.isSelected()))},e.prototype.onLabelClicked=function(){if(!this.gridOptionsService.is("functionsReadOnly")){var t=!this.cbSelect.getValue();this.onChangeCommon(t)}},e.prototype.onCheckboxChanged=function(t){this.onChangeCommon(t.selected)},e.prototype.onChangeCommon=function(t){this.cbSelect.isReadOnly()||(this.refreshAriaLabel(),this.processingColumnStateChange||this.modelItemUtils.setColumn(this.column,t,"toolPanelUi"))},e.prototype.refreshAriaLabel=function(){var t=this.localeService.getLocaleTextFunc(),e=t("ariaColumn","Column"),r=this.cbSelect.getValue()?t("ariaVisible","visible"):t("ariaHidden","hidden"),n=t("ariaToggleVisibility","Press SPACE to toggle visibility");u.setAriaLabel(this.focusWrapper,this.displayName+" "+e),this.cbSelect.setInputAriaLabel(n+" ("+r+")"),u.setAriaDescribedBy(this.focusWrapper,this.cbSelect.getInputElement().id)},e.prototype.setupDragging=function(){var t=this;if(this.allowDragging){var e=!this.gridOptionsService.is("suppressDragLeaveHidesColumns"),r={type:h.ToolPanel,eElement:this.eDragHandle,dragItemName:this.displayName,getDefaultIconName:function(){return e?m.ICON_HIDE:m.ICON_NOT_ALLOWED},getDragItem:function(){return t.createDragItem()},onDragStarted:function(){e=!t.gridOptionsService.is("suppressDragLeaveHidesColumns");var r={type:l.EVENT_COLUMN_PANEL_ITEM_DRAG_START,column:t.column};t.eventService.dispatchEvent(r)},onDragStopped:function(){var e={type:l.EVENT_COLUMN_PANEL_ITEM_DRAG_END};t.eventService.dispatchEvent(e)},onGridEnter:function(r){e&&t.modelItemUtils.updateColumns({columns:[t.column],visibleState:null==r?void 0:r.visibleState,pivotState:null==r?void 0:r.pivotState,eventType:"toolPanelUi"})},onGridExit:function(){e&&t.onChangeCommon(!1)}};this.dragAndDropService.addDragSource(r,!0),this.addDestroyFunc((function(){return t.dragAndDropService.removeDragSource(r)}))}else u.setDisplayed(this.eDragHandle,!1)},e.prototype.createDragItem=function(){var t,e,r=this.column.getColId(),n=((t={})[r]=this.column.isVisible(),t),o=((e={})[r]=this.modelItemUtils.createPivotState(this.column),e);return{columns:[this.column],visibleState:n,pivotState:o}},e.prototype.onColumnStateChanged=function(){this.processingColumnStateChange=!0;var t=this.columnModel.isPivotMode();if(t){var e=this.column.isAnyFunctionActive();this.cbSelect.setValue(e)}else this.cbSelect.setValue(this.column.isVisible());var r=!0,n=!0;if(t){var o=this.gridOptionsService.is("functionsReadOnly"),i=!this.column.isAnyFunctionAllowed();n=r=!o&&!i}else{var a=this.column.getColDef(),s=a.enableRowGroup,l=a.enableValue,u=a.lockPosition,c=a.suppressMovable;r=!a.lockVisible,n=!!s||!!l||!(!!u||!!c)}this.cbSelect.setReadOnly(!r),this.eDragHandle.classList.toggle("ag-column-select-column-readonly",!n),this.addOrRemoveCssClass("ag-column-select-column-readonly",!n&&!r);var p=t&&this.gridOptionsService.is("functionsPassive");this.cbSelect.setPassive(p),this.processingColumnStateChange=!1},e.prototype.getDisplayName=function(){return this.displayName},e.prototype.onSelectAllChanged=function(t){t!==this.cbSelect.getValue()&&(this.cbSelect.isReadOnly()||this.cbSelect.toggle())},e.prototype.isSelected=function(){return this.cbSelect.getValue()},e.prototype.isSelectable=function(){return!this.cbSelect.isReadOnly()},e.prototype.isExpandable=function(){return!1},e.prototype.setExpanded=function(t){console.warn("AG Grid: can not expand a column item that does not represent a column group header")},e.TEMPLATE='<div class="ag-column-select-column" aria-hidden="true">\n            <ag-checkbox ref="cbSelect" class="ag-column-select-checkbox"></ag-checkbox>\n            <span class="ag-column-select-column-label" ref="eLabel"></span>\n        </div>',Er([n("columnModel")],e.prototype,"columnModel",void 0),Er([n("dragAndDropService")],e.prototype,"dragAndDropService",void 0),Er([n("modelItemUtils")],e.prototype,"modelItemUtils",void 0),Er([o("eLabel")],e.prototype,"eLabel",void 0),Er([o("cbSelect")],e.prototype,"cbSelect",void 0),Er([i],e.prototype,"init",null),e}(a),Pr=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Dr=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},Ar=function(){function t(t){this.items=t}return t.prototype.getRowCount=function(){return this.items.length},t.prototype.getRow=function(t){return this.items[t]},t}(),Mr=function(t){function e(){var r=t.call(this,e.TEMPLATE)||this;return r.destroyColumnItemFuncs=[],r}return Pr(e,t),e.prototype.destroyColumnTree=function(){this.allColsTree=[],this.destroyColumnItemFuncs.forEach((function(t){return t()})),this.destroyColumnItemFuncs=[]},e.prototype.init=function(t,e,r){var n=this;this.params=t,this.allowDragging=e,this.eventType=r,this.params.suppressSyncLayoutWithGrid||this.addManagedListener(this.eventService,l.EVENT_COLUMN_MOVED,this.onColumnsChanged.bind(this)),this.addManagedListener(this.eventService,l.EVENT_NEW_COLUMNS_LOADED,this.onColumnsChanged.bind(this)),[l.EVENT_COLUMN_PIVOT_CHANGED,l.EVENT_COLUMN_PIVOT_MODE_CHANGED,l.EVENT_COLUMN_ROW_GROUP_CHANGED,l.EVENT_COLUMN_VALUE_CHANGED,l.EVENT_COLUMN_VISIBLE,l.EVENT_NEW_COLUMNS_LOADED].forEach((function(t){n.addManagedListener(n.eventService,t,n.fireSelectionChangedEvent.bind(n))})),this.expandGroupsByDefault=!this.params.contractColumnSelection;var o=this.localeService.getLocaleTextFunc()("ariaColumnList","Column List");this.virtualList=this.createManagedBean(new C({cssIdentifier:"column-select",ariaRole:"tree",listName:o})),this.appendChild(this.virtualList.getGui()),this.virtualList.setComponentCreator((function(t,e){return u.setAriaLevel(e,t.getDept()+1),n.createComponentFromItem(t,e)})),this.columnModel.isReady()&&this.onColumnsChanged(),t.suppressColumnMove||this.gridOptionsService.is("suppressMovableColumns")||this.createManagedBean(new xr(this,this.virtualList))},e.prototype.createComponentFromItem=function(t,e){if(t.isGroup()){var r=new Cr(t,this.allowDragging,this.eventType,e);return this.getContext().createBean(r),r}var n=new Tr(t,this.allowDragging,this.groupsExist,e);return this.getContext().createBean(n),n},e.prototype.onColumnsChanged=function(){var t=this.getExpandedStates(),e=this.columnModel.isPivotMode();!this.params.suppressSyncLayoutWithGrid&&!e?this.buildTreeFromWhatGridIsDisplaying():this.buildTreeFromProvidedColumnDefs(),this.setExpandedStates(t),this.markFilteredColumns(),this.flattenAndFilterModel()},e.prototype.getDisplayedColsList=function(){return this.displayedColsList},e.prototype.getExpandedStates=function(){if(!this.allColsTree)return{};var t={};return this.forEachItem((function(e){if(e.isGroup()){var r=e.getColumnGroup();r&&(t[r.getId()]=e.isExpanded())}})),t},e.prototype.setExpandedStates=function(t){this.allColsTree&&this.forEachItem((function(e){if(e.isGroup()){var r=e.getColumnGroup();if(r){var n=t[r.getId()];null!=n&&e.setExpanded(n)}}}))},e.prototype.buildTreeFromWhatGridIsDisplaying=function(){this.colDefService.syncLayoutWithGrid(this.setColumnLayout.bind(this))},e.prototype.setColumnLayout=function(t){var e=this.colDefService.createColumnTree(t);this.buildListModel(e),this.groupsExist=t.some((function(t){return t&&void 0!==t.children})),this.markFilteredColumns(),this.flattenAndFilterModel()},e.prototype.buildTreeFromProvidedColumnDefs=function(){this.buildListModel(this.columnModel.getPrimaryColumnTree()),this.groupsExist=this.columnModel.isPrimaryColumnGroupsPresent()},e.prototype.buildListModel=function(t){var e=this,r=this.onColumnExpanded.bind(this),n=function(t,e,r){t.forEach((function(t){t instanceof A?o(t,e,r):i(t,e,r)}))},o=function(t,o,i){var a=t.getColGroupDef();if(!(a&&a.suppressColumnsToolPanel))if(t.isPadding())n(t.getChildren(),o,i);else{var s=e.columnModel.getDisplayNameForProvidedColumnGroup(null,t,"columnToolPanel"),l=new pr(s,t,o,!0,e.expandGroupsByDefault);i.push(l),function(t){t.addEventListener(pr.EVENT_EXPANDED_CHANGED,r);var n=t.removeEventListener.bind(t,pr.EVENT_EXPANDED_CHANGED,r);e.destroyColumnItemFuncs.push(n)}(l),n(t.getChildren(),o+1,l.getChildren())}},i=function(t,r,n){if(!(t.getColDef()&&t.getColDef().suppressColumnsToolPanel)){var o=e.columnModel.getDisplayNameForColumn(t,"columnToolPanel");n.push(new pr(o,t,r))}};this.destroyColumnTree(),n(t,0,this.allColsTree)},e.prototype.onColumnExpanded=function(){this.flattenAndFilterModel()},e.prototype.flattenAndFilterModel=function(){var t=this;this.displayedColsList=[];var e=function(r){r.isPassesFilter()&&(t.displayedColsList.push(r),r.isGroup()&&r.isExpanded()&&r.getChildren().forEach(e))};this.allColsTree.forEach(e),this.virtualList.setModel(new Ar(this.displayedColsList));var r=this.virtualList.getLastFocusedRow();this.virtualList.refresh(),null!=r&&this.focusRowIfAlive(r),this.notifyListeners()},e.prototype.focusRowIfAlive=function(t){var e=this;window.setTimeout((function(){e.isAlive()&&e.virtualList.focusRow(t)}),0)},e.prototype.forEachItem=function(t){var e=function(r){r.forEach((function(r){t(r),r.isGroup()&&e(r.getChildren())}))};e(this.allColsTree)},e.prototype.doSetExpandedAll=function(t){this.forEachItem((function(e){e.isGroup()&&e.setExpanded(t)}))},e.prototype.setGroupsExpanded=function(t,e){if(e){var r=[];this.forEachItem((function(n){if(n.isGroup()){var o=n.getColumnGroup().getId();e.indexOf(o)>=0&&(n.setExpanded(t),r.push(o))}}));var n=e.filter((function(t){return!u.includes(r,t)}));n.length>0&&console.warn("AG Grid: unable to find group(s) for supplied groupIds:",n)}else this.doSetExpandedAll(t)},e.prototype.getExpandState=function(){var t=0,e=0;return this.forEachItem((function(r){r.isGroup()&&(r.isExpanded()?t++:e++)})),t>0&&e>0?ir.INDETERMINATE:e>0?ir.COLLAPSED:ir.EXPANDED},e.prototype.doSetSelectedAll=function(t){this.modelItemUtils.selectAllChildren(this.allColsTree,t,this.eventType)},e.prototype.getSelectionState=function(){var t=0,e=0,r=this.columnModel.isPivotMode();if(this.forEachItem((function(n){if(!n.isGroup()&&n.isPassesFilter()){var o,i=n.getColumn(),a=i.getColDef();if(r){if(!i.isAllowPivot()&&!i.isAllowRowGroup()&&!i.isAllowValue())return;o=i.isValueActive()||i.isPivotActive()||i.isRowGroupActive()}else{if(a.lockVisible)return;o=i.isVisible()}o?t++:e++}})),!(t>0&&e>0))return!(0===t||e>0)},e.prototype.setFilterText=function(t){this.filterText=u.exists(t)?t.toLowerCase():null,this.markFilteredColumns(),this.flattenAndFilterModel()},e.prototype.markFilteredColumns=function(){var t=this,e=function(e){if(!u.exists(t.filterText))return!0;var r=e.getDisplayName();return null==r||-1!==r.toLowerCase().indexOf(t.filterText)},r=function(t,n){var o=!1;if(t.isGroup()){var i=e(t);t.getChildren().forEach((function(t){var e=r(t,i||n);e&&(o=e)}))}var a=!(!n&&!o)||e(t);return t.setPassesFilter(a),a};this.allColsTree.forEach((function(t){return r(t,!1)}))},e.prototype.notifyListeners=function(){this.fireGroupExpandedEvent(),this.fireSelectionChangedEvent()},e.prototype.fireGroupExpandedEvent=function(){var t=this.getExpandState();this.dispatchEvent({type:"groupExpanded",state:t})},e.prototype.fireSelectionChangedEvent=function(){var t=this.getSelectionState();this.dispatchEvent({type:"selectionChanged",state:t})},e.TEMPLATE='<div class="ag-column-select-list" role="presentation"></div>',Dr([n("columnModel")],e.prototype,"columnModel",void 0),Dr([n("toolPanelColDefService")],e.prototype,"colDefService",void 0),Dr([n("modelItemUtils")],e.prototype,"modelItemUtils",void 0),Dr([F],e.prototype,"destroyColumnTree",null),e}(a),_r=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Rr=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},kr=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return _r(r,e),r.prototype.createTemplate=function(){return'<div class="ag-pivot-mode-panel">\n                <ag-toggle-button ref="cbPivotMode" class="ag-pivot-mode-select"></ag-toggle-button>\n            </div>'},r.prototype.init=function(){this.setTemplate(this.createTemplate()),this.cbPivotMode.setValue(this.columnModel.isPivotMode());var t=this.localeService.getLocaleTextFunc();this.cbPivotMode.setLabel(t("pivotMode","Pivot Mode")),this.addManagedListener(this.cbPivotMode,l.EVENT_FIELD_VALUE_CHANGED,this.onBtPivotMode.bind(this)),this.addManagedListener(this.eventService,l.EVENT_NEW_COLUMNS_LOADED,this.onPivotModeChanged.bind(this)),this.addManagedListener(this.eventService,l.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.onPivotModeChanged.bind(this))},r.prototype.onBtPivotMode=function(){var t=!!this.cbPivotMode.getValue();if(t!==this.columnModel.isPivotMode()){this.columnModel.setPivotMode(t,"toolPanelUi");var e=this.gridOptionsService.api;e&&e.refreshHeader()}},r.prototype.onPivotModeChanged=function(){var t=this.columnModel.isPivotMode();this.cbPivotMode.setValue(t)},Rr([n("columnModel")],r.prototype,"columnModel",void 0),Rr([o("cbPivotMode")],r.prototype,"cbPivotMode",void 0),Rr([t],r.prototype,"init",null),r}(a),Fr=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ir=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},Lr=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return Fr(r,t),r.prototype.execute=function(t){var e=u.missingOrEmpty(this.columnModel.getValueColumns()),r=!this.gridOptionsService.getCallback("getGroupRowAgg"),n=t.changedPath&&t.changedPath.isActive();if(!(e&&r&&n)){var o=this.createAggDetails(t);this.recursivelyCreateAggData(o)}},r.prototype.createAggDetails=function(t){var e=this.columnModel.isPivotActive(),r=this.columnModel.getValueColumns(),n=e?this.columnModel.getPivotColumns():[];return{alwaysAggregateAtRootLevel:this.gridOptionsService.is("alwaysAggregateAtRootLevel"),groupIncludeTotalFooter:this.gridOptionsService.is("groupIncludeTotalFooter"),changedPath:t.changedPath,valueColumns:r,pivotColumns:n,filteredOnly:!this.isSuppressAggFilteredOnly(),userAggFunc:this.gridOptionsService.getCallback("getGroupRowAgg")}},r.prototype.isSuppressAggFilteredOnly=function(){return void 0!==this.gridOptionsService.getGroupAggFiltering()||this.gridOptionsService.is("suppressAggFilteredOnly")},r.prototype.recursivelyCreateAggData=function(t){var e=this;t.changedPath.forEachChangedNodeDepthFirst((function(r){if(!r.hasChildren())r.aggData&&r.setAggData(null);else{if(-1===r.level&&!t.groupIncludeTotalFooter){var n=!e.columnModel.isPivotMode();if(!t.alwaysAggregateAtRootLevel&&n)return}e.aggregateRowNode(r,t)}}),!0)},r.prototype.aggregateRowNode=function(t,e){var r,n=0===e.valueColumns.length,o=0===e.pivotColumns.length;r=e.userAggFunc?e.userAggFunc({nodes:t.childrenAfterFilter}):n?null:o?this.aggregateRowNodeUsingValuesOnly(t,e):this.aggregateRowNodeUsingValuesAndPivot(t),t.setAggData(r),t.sibling&&t.sibling.setAggData(r)},r.prototype.aggregateRowNodeUsingValuesAndPivot=function(t){var e,r=this,n={},o=null!==(e=this.columnModel.getSecondaryColumns())&&void 0!==e?e:[];return o.forEach((function(e){var o=e.getColDef(),i=o.pivotValueColumn,a=o.pivotTotalColumnIds,s=o.colId,l=o.pivotKeys;if(!u.exists(a)){var c,p=null!=l?l:[];c=t.leafGroup?r.getValuesFromMappedSet(t.childrenMapped,p,i):r.getValuesPivotNonLeaf(t,s),n[s]=r.aggregateValues(c,i.getAggFunc(),i,t,e)}})),o.forEach((function(e){var o=e.getColDef(),i=o.pivotValueColumn,a=o.pivotTotalColumnIds,s=o.colId;if(u.exists(a)){var l=[];a&&a.length&&(a.forEach((function(t){l.push(n[t])})),n[s]=r.aggregateValues(l,i.getAggFunc(),i,t,e))}})),n},r.prototype.aggregateRowNodeUsingValuesOnly=function(t,e){var r=this,n={},o=e.changedPath.isActive()?e.changedPath.getValueColumnsForNode(t,e.valueColumns):e.valueColumns,i=e.changedPath.isActive()?e.changedPath.getNotValueColumnsForNode(t,e.valueColumns):null,a=this.getValuesNormal(t,o,e.filteredOnly),s=t.aggData;return o.forEach((function(e,o){n[e.getId()]=r.aggregateValues(a[o],e.getAggFunc(),e,t)})),i&&s&&i.forEach((function(t){n[t.getId()]=s[t.getId()]})),n},r.prototype.getValuesPivotNonLeaf=function(t,e){var r=[];return t.childrenAfterFilter.forEach((function(t){var n=t.aggData[e];r.push(n)})),r},r.prototype.getValuesFromMappedSet=function(t,e,r){var n=this,o=t;if(e.forEach((function(t){return o=o?o[t]:null})),!o)return[];var i=[];return o.forEach((function(t){var e=n.valueService.getValue(r,t);i.push(e)})),i},r.prototype.getValuesNormal=function(t,e,r){var n=[];e.forEach((function(){return n.push([])}));for(var o=e.length,i=r?t.childrenAfterFilter:t.childrenAfterGroup,a=i.length,s=0;s<a;s++)for(var l=i[s],u=0;u<o;u++){var c=e[u],p=this.valueService.getValue(c,l);n[u].push(p)}return n},r.prototype.aggregateValues=function(t,e,r,n,o){var i="string"==typeof e?this.aggFuncService.getAggFunc(e):e;return"function"!=typeof i?(console.error("AG Grid: unrecognised aggregation function "+e),null):i({values:t,column:r,colDef:r?r.getColDef():void 0,pivotResultColumn:o,rowNode:n,data:n?n.data:void 0,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context})},Ir([n("columnModel")],r.prototype,"columnModel",void 0),Ir([n("valueService")],r.prototype,"valueService",void 0),Ir([n("aggFuncService")],r.prototype,"aggFuncService",void 0),r=Ir([e("aggregationStage")],r)}(r),Nr=function(){function t(){this.allSets={},this.allParents=[]}return t.prototype.removeFromChildrenAfterGroup=function(t,e){this.getSet(t).removeFromChildrenAfterGroup[e.id]=!0},t.prototype.isRemoveFromAllLeafChildren=function(t,e){return!!this.getSet(t).removeFromAllLeafChildren[e.id]},t.prototype.preventRemoveFromAllLeafChildren=function(t,e){delete this.getSet(t).removeFromAllLeafChildren[e.id]},t.prototype.removeFromAllLeafChildren=function(t,e){this.getSet(t).removeFromAllLeafChildren[e.id]=!0},t.prototype.getSet=function(t){return this.allSets[t.id]||(this.allSets[t.id]={removeFromAllLeafChildren:{},removeFromChildrenAfterGroup:{}},this.allParents.push(t)),this.allSets[t.id]},t.prototype.getAllParents=function(){return this.allParents},t.prototype.flush=function(){var t=this;this.allParents.forEach((function(e){var r=t.allSets[e.id];e.childrenAfterGroup=e.childrenAfterGroup.filter((function(t){return!r.removeFromChildrenAfterGroup[t.id]})),e.allLeafChildren=e.allLeafChildren.filter((function(t){return!r.removeFromAllLeafChildren[t.id]})),e.updateHasChildren(),e.sibling&&(e.sibling.childrenAfterGroup=e.childrenAfterGroup,e.sibling.allLeafChildren=e.allLeafChildren)})),this.allSets={},this.allParents.length=0},t}(),Gr=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),jr=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},Vr=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},Br=function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t},Ur=function(t){function r(){var e=null!==t&&t.apply(this,arguments)||this;return e.groupIdSequence=new I,e}return Gr(r,t),r.prototype.execute=function(t){var e=this.createGroupingDetails(t);if(e.transactions)this.handleTransaction(e);else{var r=!0===t.afterColumnsChanged;this.shotgunResetEverything(e,r)}e.usingTreeData||(this.positionLeafsAndGroups(t.changedPath),this.orderGroups(e)),this.selectableService.updateSelectableAfterGrouping(e.rootNode)},r.prototype.positionLeafsAndGroups=function(t){t.forEachChangedNodeDepthFirst((function(t){if(t.childrenAfterGroup){var e,r=[],n=[];t.childrenAfterGroup.forEach((function(t){var o;(null===(o=t.childrenAfterGroup)||void 0===o?void 0:o.length)?""!==t.key||e?n.push(t):e=t:r.push(t)})),e&&n.push(e),t.childrenAfterGroup=Br(Br([],Vr(r)),Vr(n))}}),!1)},r.prototype.createGroupingDetails=function(t){var e=t.rowNode,r=t.changedPath,n=t.rowNodeTransactions,o=t.rowNodeOrder,i=this.gridOptionsService.is("treeData"),a=i?null:this.columnModel.getRowGroupColumns();return{includeParents:!this.gridOptionsService.is("suppressParentsInRowNodes"),expandByDefault:this.gridOptionsService.getNum("groupDefaultExpanded"),groupedCols:a,rootNode:e,pivotMode:this.columnModel.isPivotMode(),groupedColCount:i||!a?0:a.length,rowNodeOrder:o,transactions:n,changedPath:r,groupAllowUnbalanced:this.gridOptionsService.is("groupAllowUnbalanced"),isGroupOpenByDefault:this.gridOptionsService.getCallback("isGroupOpenByDefault"),initialGroupOrderComparator:this.gridOptionsService.getCallback("initialGroupOrderComparator"),createGroupFooter:this.gridOptionsService.isGroupIncludeFooterTrueOrCallback(),usingTreeData:i,getDataPath:i?this.gridOptionsService.get("getDataPath"):void 0}},r.prototype.handleTransaction=function(t){var e=this;t.transactions.forEach((function(r){var n=t.usingTreeData?void 0:new Nr;if(u.existsAndNotEmpty(r.remove)&&e.removeNodes(r.remove,t,n),u.existsAndNotEmpty(r.update)&&e.moveNodesInWrongPath(r.update,t,n),u.existsAndNotEmpty(r.add)&&e.insertNodes(r.add,t,!1),n){var o=n.getAllParents().slice();n.flush(),e.removeEmptyGroups(o,t)}})),t.rowNodeOrder&&this.sortChildren(t)},r.prototype.sortChildren=function(t){t.changedPath.forEachChangedNodeDepthFirst((function(e){e.childrenAfterGroup&&(u.sortRowNodesByOrder(e.childrenAfterGroup,t.rowNodeOrder)&&t.changedPath.addParentNode(e))}),!1,!0)},r.prototype.orderGroups=function(t){var e=t.initialGroupOrderComparator;u.exists(e)&&function t(r){u.exists(r.childrenAfterGroup)&&!r.leafGroup&&(r.childrenAfterGroup.sort((function(t,r){return e({nodeA:t,nodeB:r})})),r.childrenAfterGroup.forEach((function(e){return t(e)})))}(t.rootNode)},r.prototype.getExistingPathForNode=function(t,e){for(var r=[],n=e.usingTreeData?t:t.parent;n&&n!==e.rootNode;)r.push({key:n.key,rowGroupColumn:n.rowGroupColumn,field:n.field}),n=n.parent;return r.reverse(),r},r.prototype.moveNodesInWrongPath=function(t,e,r){var n=this;t.forEach((function(t){e.changedPath.isActive()&&e.changedPath.addParentNode(t.parent);var o=function(t){return t.key},i=n.getExistingPathForNode(t,e).map(o),a=n.getGroupInfo(t,e).map(o);u.areEqual(i,a)||n.moveNode(t,e,r)}))},r.prototype.moveNode=function(t,e,r){if(this.removeNodesInStages([t],e,r),this.insertOneNode(t,e,!0,r),t.setData(t.data),e.changedPath.isActive()){var n=t.parent;e.changedPath.addParentNode(n)}},r.prototype.removeNodes=function(t,e,r){this.removeNodesInStages(t,e,r),e.changedPath.isActive()&&t.forEach((function(t){return e.changedPath.addParentNode(t.parent)}))},r.prototype.removeNodesInStages=function(t,e,r){if(this.removeNodesFromParents(t,e,r),e.usingTreeData){this.postRemoveCreateFillerNodes(t,e);var n=t.map((function(t){return t.parent}));this.removeEmptyGroups(n,e)}},r.prototype.forEachParentGroup=function(t,e,r){for(var n=e;n&&n!==t.rootNode;)r(n),n=n.parent},r.prototype.removeNodesFromParents=function(t,e,r){var n=this,o=null==r,i=r||new Nr;t.forEach((function(t){n.removeFromParent(t,i),n.forEachParentGroup(e,t.parent,(function(e){i.removeFromAllLeafChildren(e,t)}))})),o&&i.flush()},r.prototype.postRemoveCreateFillerNodes=function(t,e){var r=this;t.forEach((function(t){if(t.hasChildren()){var n=r.getExistingPathForNode(t,e),o=r.findParentForNode(t,n,e);o.expanded=t.expanded,o.allLeafChildren=t.allLeafChildren,o.childrenAfterGroup=t.childrenAfterGroup,o.childrenMapped=t.childrenMapped,o.updateHasChildren(),o.childrenAfterGroup.forEach((function(t){return t.parent=o}))}}))},r.prototype.removeEmptyGroups=function(t,e){for(var r=this,n=!0,o=function(){n=!1;var o=new Nr;t.forEach((function(t){r.forEachParentGroup(e,t,(function(t){(function(t){var e=r.getChildrenMappedKey(t.key,t.rowGroupColumn),n=t.parent;return!(!n||!n.childrenMapped||!n.childrenMapped[e])&&!!t.isEmptyRowGroupNode()})(t)&&(n=!0,r.removeFromParent(t,o),t.setSelectedParams({newValue:!1,source:"rowGroupChanged"}))}))})),o.flush()};n;)o()},r.prototype.removeFromParent=function(t,e){t.parent&&(e?e.removeFromChildrenAfterGroup(t.parent,t):(u.removeFromArray(t.parent.childrenAfterGroup,t),t.parent.updateHasChildren()));var r=this.getChildrenMappedKey(t.key,t.rowGroupColumn);t.parent&&t.parent.childrenMapped&&(t.parent.childrenMapped[r]=void 0),t.setRowTop(null),t.setRowIndex(null)},r.prototype.addToParent=function(t,e){var r=this.getChildrenMappedKey(t.key,t.rowGroupColumn);e&&(null!=e.childrenMapped&&(e.childrenMapped[r]=t),e.childrenAfterGroup.push(t),e.updateHasChildren())},r.prototype.areGroupColsEqual=function(t,e){return null!=t&&null!=e&&t.pivotMode===e.pivotMode&&u.areEqual(t.groupedCols,e.groupedCols)},r.prototype.checkAllGroupDataAfterColsChanged=function(t){var e=this,r=function(n){n&&n.forEach((function(n){if(!(!t.usingTreeData&&!n.group)){var o={field:n.field,key:n.key,rowGroupColumn:n.rowGroupColumn};e.setGroupData(n,o,t),r(n.childrenAfterGroup)}}))};r(t.rootNode.childrenAfterGroup)},r.prototype.shotgunResetEverything=function(t,e){if(!this.noChangeInGroupingColumns(t,e)){this.selectionService.filterFromSelection((function(t){return t&&!t.group}));var r=t.rootNode,n=t.groupedCols;r.leafGroup=!t.usingTreeData&&0===n.length,r.childrenAfterGroup=[],r.childrenMapped={},r.updateHasChildren();var o=r.sibling;o&&(o.childrenAfterGroup=r.childrenAfterGroup,o.childrenMapped=r.childrenMapped),this.insertNodes(r.allLeafChildren,t,!1)}},r.prototype.noChangeInGroupingColumns=function(t,e){var r=!1,n=this.columnModel.getGroupDisplayColumns(),o=n?n.map((function(t){return t.getId()})).join("-"):"";return e&&(r=t.usingTreeData||this.areGroupColsEqual(t,this.oldGroupingDetails),this.oldGroupDisplayColIds!==o&&this.checkAllGroupDataAfterColsChanged(t)),this.oldGroupingDetails=t,this.oldGroupDisplayColIds=o,r},r.prototype.insertNodes=function(t,e,r){var n=this;t.forEach((function(t){n.insertOneNode(t,e,r),e.changedPath.isActive()&&e.changedPath.addParentNode(t.parent)}))},r.prototype.insertOneNode=function(t,e,r,n){var o=this.getGroupInfo(t,e),i=this.findParentForNode(t,o,e,n);i.group||console.warn("AG Grid: duplicate group keys for row data, keys should be unique",[i.data,t.data]),e.usingTreeData?this.swapGroupWithUserNode(i,t,r):(t.parent=i,t.level=o.length,i.childrenAfterGroup.push(t),i.updateHasChildren())},r.prototype.findParentForNode=function(t,e,r,n){var o=this,i=r.rootNode;return e.forEach((function(e,a){i=o.getOrCreateNextNode(i,e,a,r),(null==n?void 0:n.isRemoveFromAllLeafChildren(i,t))?null==n||n.preventRemoveFromAllLeafChildren(i,t):i.allLeafChildren.push(t)})),i},r.prototype.swapGroupWithUserNode=function(t,e,r){e.parent=t.parent,e.key=t.key,e.field=t.field,e.groupData=t.groupData,e.level=t.level,r||(e.expanded=t.expanded),e.leafGroup=t.leafGroup,e.rowGroupIndex=t.rowGroupIndex,e.allLeafChildren=t.allLeafChildren,e.childrenAfterGroup=t.childrenAfterGroup,e.childrenMapped=t.childrenMapped,e.sibling=t.sibling,e.updateHasChildren(),this.removeFromParent(t),e.childrenAfterGroup.forEach((function(t){return t.parent=e})),this.addToParent(e,t.parent)},r.prototype.getOrCreateNextNode=function(t,e,r,n){var o=this.getChildrenMappedKey(e.key,e.rowGroupColumn),i=t.childrenMapped?t.childrenMapped[o]:void 0;return i||(i=this.createGroup(e,t,r,n),this.addToParent(i,t)),i},r.prototype.createGroup=function(t,e,r,n){var o=new L(this.beans);return o.group=!0,o.field=t.field,o.rowGroupColumn=t.rowGroupColumn,this.setGroupData(o,t,n),o.id=L.ID_PREFIX_ROW_GROUP+this.groupIdSequence.next(),o.key=t.key,o.level=r,o.leafGroup=!n.usingTreeData&&r===n.groupedColCount-1,o.allLeafChildren=[],o.setAllChildrenCount(0),o.rowGroupIndex=n.usingTreeData?null:r,o.childrenAfterGroup=[],o.childrenMapped={},o.updateHasChildren(),o.parent=n.includeParents?e:null,this.setExpandedInitialValue(n,o),o},r.prototype.setGroupData=function(t,e,r){t.groupData={},this.columnModel.getGroupDisplayColumns().forEach((function(n){(r.usingTreeData||!!t.rowGroupColumn&&n.isRowGroupDisplayed(t.rowGroupColumn.getId()))&&(t.groupData[n.getColId()]=e.key)}))},r.prototype.getChildrenMappedKey=function(t,e){return e?e.getId()+"-"+t:t},r.prototype.setExpandedInitialValue=function(t,e){if(t.pivotMode&&e.leafGroup)e.expanded=!1;else{var r=t.isGroupOpenByDefault;if(r){var n={rowNode:e,field:e.field,key:e.key,level:e.level,rowGroupColumn:e.rowGroupColumn};e.expanded=1==r(n)}else{var o=t.expandByDefault;-1!==t.expandByDefault?e.expanded=e.level<o:e.expanded=!0}}},r.prototype.getGroupInfo=function(t,e){return e.usingTreeData?this.getGroupInfoFromCallback(t,e):this.getGroupInfoFromGroupColumns(t,e)},r.prototype.getGroupInfoFromCallback=function(t,e){var r=e.getDataPath?e.getDataPath(t.data):null;null!=r&&0!==r.length||u.doOnce((function(){return console.warn("AG Grid: getDataPath() should not return an empty path for data",t.data)}),"groupStage.getGroupInfoFromCallback");return r?r.map((function(t){return{key:t,field:null,rowGroupColumn:null}})):[]},r.prototype.getGroupInfoFromGroupColumns=function(t,e){var r=this,n=[];return e.groupedCols.forEach((function(o){var i=r.valueService.getKeyForNode(o,t),a=null!=i&&""!==i;if((e.pivotMode||!e.groupAllowUnbalanced)&&!a&&(i="",a=!0),a){var s={key:i,field:o.getColDef().field,rowGroupColumn:o};n.push(s)}})),n},jr([n("columnModel")],r.prototype,"columnModel",void 0),jr([n("selectableService")],r.prototype,"selectableService",void 0),jr([n("valueService")],r.prototype,"valueService",void 0),jr([n("beans")],r.prototype,"beans",void 0),jr([n("selectionService")],r.prototype,"selectionService",void 0),r=jr([e("groupStage")],r)}(r),Hr=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),zr=function(){return(zr=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},Wr=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},Kr=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},Xr=function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t},Yr=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}var o;return Hr(r,t),o=r,r.prototype.init=function(){var t=this,e=function(){var e;return null!==(e=t.gos.get("serverSidePivotResultFieldSeparator"))&&void 0!==e?e:"_"};this.fieldSeparator=e(),this.addManagedPropertyListener("serverSidePivotResultFieldSeparator",(function(){t.fieldSeparator=e()}));var r=function(){var e;return null!==(e=t.gos.getNum("pivotDefaultExpanded"))&&void 0!==e?e:0};this.pivotDefaultExpanded=r(),this.addManagedPropertyListener("pivotDefaultExpanded",(function(){t.pivotDefaultExpanded=r()}))},r.prototype.createPivotColumnDefs=function(t){var e=this.createPivotColumnsFromUniqueValues(t);var r=function t(e,r){return void 0===r&&(r=[]),e.forEach((function(e){void 0!==e.children?t(e.children,r):r.push(e)})),r}(e);return this.addRowGroupTotals(e,r),this.addExpandablePivotGroups(e,r),this.addPivotTotalsToGroups(e,r),{pivotColumnGroupDefs:e,pivotColumnDefs:r.map((function(t){return u.cloneObject(t)}))}},r.prototype.createPivotColumnsFromUniqueValues=function(t){var e=this.columnModel.getPivotColumns(),r=e.length;return this.recursivelyBuildGroup(0,t,[],r,e)},r.prototype.recursivelyBuildGroup=function(t,e,r,n,o){var i=this,a=this.columnModel.getValueColumns();if(t>=n)return this.buildMeasureCols(r);var s=o[t].getColDef(),l=this.headerNameComparator.bind(this,s.pivotComparator);if(1===a.length&&this.gridOptionsService.is("removePivotHeaderRowWhenSingleValueColumn")&&t===n-1){var c=[];return u.iterateObject(e,(function(t){var e=Xr(Xr([],Kr(r)),[t]),n=i.createColDef(a[0],t,e);n.columnGroupShow="open",c.push(n)})),c.sort(l),c}var p=[];return u.iterateObject(e,(function(e,a){var s=-1===i.pivotDefaultExpanded||t<i.pivotDefaultExpanded,l=Xr(Xr([],Kr(r)),[e]);p.push({children:i.recursivelyBuildGroup(t+1,a,l,n,o),headerName:e,pivotKeys:l,columnGroupShow:"open",openByDefault:s,groupId:i.generateColumnGroupId(l)})})),p.sort(l),p},r.prototype.buildMeasureCols=function(t){var e=this,r=this.columnModel.getValueColumns();return 0===r.length?[this.createColDef(null,"-",t)]:r.map((function(r){var n=e.columnModel.getDisplayNameForColumn(r,"header");return zr(zr({},e.createColDef(r,n,t)),{columnGroupShow:"open"})}))},r.prototype.addExpandablePivotGroups=function(t,e){var r=this;if(!this.gridOptionsService.is("suppressExpandablePivotGroups")&&!this.gridOptionsService.get("pivotColumnGroupTotals")){var n=function(t,e,o){var i=t;if(i.children){var a=new Map;i.children.forEach((function(t){n(t,e,a)}));var s=!i.children.some((function(t){return t.children}));r.columnModel.getValueColumns().forEach((function(n){var o=r.columnModel.getDisplayNameForColumn(n,"header"),i=r.createColDef(n,o,t.pivotKeys);(i.pivotTotalColumnIds=a.get(n.getColId()),i.columnGroupShow="closed",i.aggFunc=n.getAggFunc(),s)||(t.children.push(i),e.push(i))})),r.merge(o,a)}else{var l=t;if(!l.pivotValueColumn)return;var u=l.pivotValueColumn.getColId(),c=o.has(u)?o.get(u):[];c.push(l.colId),o.set(u,c)}};t.forEach((function(t){n(t,e,new Map)}))}},r.prototype.addPivotTotalsToGroups=function(t,e){var r=this;if(this.gridOptionsService.get("pivotColumnGroupTotals")){var n="after"===this.gridOptionsService.get("pivotColumnGroupTotals"),o=this.columnModel.getValueColumns(),i=o.map((function(t){return t.getAggFunc()}));if(i&&!(i.length<1)&&this.sameAggFuncs(i)){var a=o[0];t.forEach((function(t){r.recursivelyAddPivotTotal(t,e,a,n)}))}}},r.prototype.recursivelyAddPivotTotal=function(t,e,r,n){var o=this,i=t;if(!i.children){var a=t;return a.colId?[a.colId]:null}var s=[];if(i.children.forEach((function(t){var i=o.recursivelyAddPivotTotal(t,e,r,n);i&&(s=s.concat(i))})),i.children.length>1){var l=this.localeService.getLocaleTextFunc()("pivotColumnGroupTotals","Total"),u=this.createColDef(r,l,t.pivotKeys,!0);u.pivotTotalColumnIds=s,u.aggFunc=r.getAggFunc();var c=t.children;n?c.push(u):c.unshift(u),e.push(u)}return s},r.prototype.addRowGroupTotals=function(t,e){var r=this;if(this.gridOptionsService.get("pivotRowTotals"))for(var n="after"===this.gridOptionsService.get("pivotRowTotals"),o=this.columnModel.getValueColumns(),i=n?o.slice():o.slice().reverse(),a=function(o){var a=i[o],l=[];t.forEach((function(t){l=l.concat(r.extractColIdsForValueColumn(t,a))}));var u=i.length>1||!s.gridOptionsService.is("removePivotHeaderRowWhenSingleValueColumn");s.createRowGroupTotal(t,e,a,l,n,u)},s=this,l=0;l<i.length;l++)a(l)},r.prototype.extractColIdsForValueColumn=function(t,e){var r=this,n=t;if(!n.children){var o=n;return o.pivotValueColumn===e&&o.colId?[o.colId]:[]}var i=[];return n.children.forEach((function(t){r.extractColIdsForValueColumn(t,e);var n=r.extractColIdsForValueColumn(t,e);i=i.concat(n)})),i},r.prototype.createRowGroupTotal=function(t,e,r,n,i,a){var s;if(0===this.columnModel.getValueColumns().length)s=this.createColDef(null,"-",[]);else{var l=this.columnModel.getDisplayNameForColumn(r,"header");(s=this.createColDef(r,l,[])).pivotTotalColumnIds=n}s.colId=o.PIVOT_ROW_TOTAL_PREFIX+s.colId,e.push(s);var u=a?{children:[s],pivotKeys:[],groupId:o.PIVOT_ROW_TOTAL_PREFIX+"_pivotGroup_"+r.getColId()}:s;i?t.push(u):t.unshift(u)},r.prototype.createColDef=function(t,e,r,n){void 0===n&&(n=!1);var o={};if(t){var i=t.getColDef();Object.assign(o,i),o.hide=!1}return o.headerName=e,o.colId=this.generateColumnId(r||[],t&&!n?t.getColId():""),o.field=o.colId,o.valueGetter=function(t){var e;return null===(e=t.data)||void 0===e?void 0:e[t.colDef.field]},o.pivotKeys=r,o.pivotValueColumn=t,!0===o.filter&&(o.filter="agNumberColumnFilter"),o},r.prototype.sameAggFuncs=function(t){if(1==t.length)return!0;for(var e=1;e<t.length;e++)if(t[e]!==t[0])return!1;return!0},r.prototype.headerNameComparator=function(t,e,r){return t?t(e.headerName,r.headerName):e.headerName&&!r.headerName?1:!e.headerName&&r.headerName?-1:e.headerName&&r.headerName?e.headerName<r.headerName?-1:e.headerName>r.headerName?1:0:0},r.prototype.merge=function(t,e){e.forEach((function(e,r,n){var o=t.has(r)?t.get(r):[],i=Xr(Xr([],Kr(o)),Kr(e));t.set(r,i)}))},r.prototype.generateColumnGroupId=function(t){return"pivotGroup_"+this.columnModel.getPivotColumns().map((function(t){return t.getColId()})).join("-")+"_"+t.join("-")},r.prototype.generateColumnId=function(t,e){return"pivot_"+this.columnModel.getPivotColumns().map((function(t){return t.getColId()})).join("-")+"_"+t.join("-")+"_"+e},r.prototype.createColDefsFromFields=function(t){for(var e=this,r={},n=0;n<t.length;n++)for(var o=t[n].split(this.fieldSeparator),i=r,a=0;a<o.length;a++){var s=o[a];null==i[s]&&(i[s]={}),i=i[s]}var l=function(t,r,n,o){var i,a=[];for(var s in n){var u=n[s],c=l(""+t+e.fieldSeparator+s,s,u,o+1);a.push(c)}if(0===a.length){var p={colId:t,headerName:r,valueGetter:function(e){var r;return null===(r=e.data)||void 0===r?void 0:r[t]}},d=e.columnModel.getPrimaryColumn(r);return d&&(p.headerName=null!==(i=e.columnModel.getDisplayNameForColumn(d,"header"))&&void 0!==i?i:r,p.aggFunc=d.getAggFunc(),p.pivotValueColumn=d),p}return e.gridOptionsService.is("removePivotHeaderRowWhenSingleValueColumn")&&1===a.length&&"colId"in a[0]?(a[0].headerName=r,a[0]):{openByDefault:-1===e.pivotDefaultExpanded||o<e.pivotDefaultExpanded,groupId:t,headerName:r,children:a}},u=[];for(var c in r){var p=l(c,c,r[c],0);u.push(p)}return u},r.PIVOT_ROW_TOTAL_PREFIX="PivotRowTotal_",Wr([n("columnModel")],r.prototype,"columnModel",void 0),Wr([n("gridOptionsService")],r.prototype,"gos",void 0),Wr([i],r.prototype,"init",null),r=o=Wr([e("pivotColDefService")],r)}(r),qr=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Zr=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},Jr=function(t){function r(){var e=null!==t&&t.apply(this,arguments)||this;return e.uniqueValues={},e}return qr(r,t),r.prototype.execute=function(t){var e=t.changedPath;this.columnModel.isPivotActive()?this.executePivotOn(e):this.executePivotOff(e)},r.prototype.executePivotOff=function(t){this.aggregationColumnsHashLastTime=null,this.uniqueValues={},this.columnModel.isSecondaryColumnsPresent()&&(this.columnModel.setSecondaryColumns(null,"rowModelUpdated"),t&&t.setInactive())},r.prototype.executePivotOn=function(t){var e=this.bucketUpRowNodes(t),r=this.setUniqueValues(e),n=this.columnModel.getValueColumns(),o=n.map((function(t){return t.getId()+"-"+t.getColDef().headerName})).join("#"),i=n.map((function(t){return t.getAggFunc().toString()})).join("#"),a=this.aggregationColumnsHashLastTime!==o,s=this.aggregationFuncsHashLastTime!==i;this.aggregationColumnsHashLastTime=o,this.aggregationFuncsHashLastTime=i;var l=this.columnModel.getRowGroupColumns().map((function(t){return t.getId()})).join("#"),u=l!==this.groupColumnsHashLastTime;if(this.groupColumnsHashLastTime=l,r||a||u||s){var c=this.pivotColDefService.createPivotColumnDefs(this.uniqueValues),p=c.pivotColumnGroupDefs,d=c.pivotColumnDefs;this.pivotColumnDefs=d,this.columnModel.setSecondaryColumns(p,"rowModelUpdated"),t&&t.setInactive()}},r.prototype.setUniqueValues=function(t){return!!(JSON.stringify(t)!==JSON.stringify(this.uniqueValues))&&(this.uniqueValues=t,!0)},r.prototype.bucketUpRowNodes=function(t){var e=this,r={};t.forEachChangedNodeDepthFirst((function(t){t.leafGroup&&(t.childrenMapped=null)}));var n=function(t){var o;t.leafGroup?e.bucketRowNode(t,r):null===(o=t.childrenAfterFilter)||void 0===o||o.forEach(n)};return t.executeFromRootNode(n),r},r.prototype.bucketRowNode=function(t,e){var r=this.columnModel.getPivotColumns();0===r.length?t.childrenMapped=null:t.childrenMapped=this.bucketChildren(t.childrenAfterFilter,r,0,e),t.sibling&&(t.sibling.childrenMapped=t.childrenMapped)},r.prototype.bucketChildren=function(t,e,r,n){var o=this,i={},a=e[r];if(t.forEach((function(t){var e=o.valueService.getKeyForNode(a,t);u.missing(e)&&(e=""),n[e]||(n[e]={}),i[e]||(i[e]=[]),i[e].push(t)})),r===e.length-1)return i;var s={};return u.iterateObject(i,(function(t,i){s[t]=o.bucketChildren(i,e,r+1,n[t])})),s},r.prototype.getPivotColumnDefs=function(){return this.pivotColumnDefs},Zr([n("valueService")],r.prototype,"valueService",void 0),Zr([n("columnModel")],r.prototype,"columnModel",void 0),Zr([n("pivotColDefService")],r.prototype,"pivotColDefService",void 0),r=Zr([e("pivotStage")],r)}(r),$r=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Qr=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},tn="undefined"==typeof BigInt?null:BigInt,en=function(t){function r(){var e=null!==t&&t.apply(this,arguments)||this;return e.aggFuncsMap={},e.initialised=!1,e}var n;return $r(r,t),n=r,r.prototype.init=function(){this.initialised||(this.initialiseWithDefaultAggregations(),this.addAggFuncs(this.gridOptionsService.get("aggFuncs")))},r.prototype.initialiseWithDefaultAggregations=function(){this.aggFuncsMap[n.AGG_SUM]=rn,this.aggFuncsMap[n.AGG_FIRST]=nn,this.aggFuncsMap[n.AGG_LAST]=on,this.aggFuncsMap[n.AGG_MIN]=an,this.aggFuncsMap[n.AGG_MAX]=sn,this.aggFuncsMap[n.AGG_COUNT]=ln,this.aggFuncsMap[n.AGG_AVG]=un,this.initialised=!0},r.prototype.isAggFuncPossible=function(t,e){var r=this.getFuncNames(t),n=u.includes(r,e),o=u.exists(this.aggFuncsMap[e]);return n&&o},r.prototype.getDefaultAggFunc=function(t){var e=t.getColDef().defaultAggFunc;if(u.exists(e)&&this.isAggFuncPossible(t,e))return e;if(this.isAggFuncPossible(t,n.AGG_SUM))return n.AGG_SUM;var r=this.getFuncNames(t);return u.existsAndNotEmpty(r)?r[0]:null},r.prototype.addAggFuncs=function(t){u.iterateObject(t,this.addAggFunc.bind(this))},r.prototype.addAggFunc=function(t,e){this.init(),this.aggFuncsMap[t]=e},r.prototype.getAggFunc=function(t){return this.init(),this.aggFuncsMap[t]},r.prototype.getFuncNames=function(t){var e=t.getColDef().allowedAggFuncs;return null==e?Object.keys(this.aggFuncsMap).sort():e},r.prototype.clear=function(){this.aggFuncsMap={}},r.AGG_SUM="sum",r.AGG_FIRST="first",r.AGG_LAST="last",r.AGG_MIN="min",r.AGG_MAX="max",r.AGG_COUNT="count",r.AGG_AVG="avg",Qr([i],r.prototype,"init",null),r=n=Qr([e("aggFuncService")],r)}(r);function rn(t){for(var e=t.values,r=null,n=0;n<e.length;n++){var o=e[n];"number"==typeof o?null===r?r=o:r+=tn?"number"==typeof r?o:tn(o):o:"bigint"==typeof o&&(r=null===r?o:("bigint"==typeof r?r:tn(r))+o)}return r}function nn(t){return t.values.length>0?t.values[0]:null}function on(t){return t.values.length>0?u.last(t.values):null}function an(t){for(var e=t.values,r=null,n=0;n<e.length;n++){var o=e[n];"number"!=typeof o&&"bigint"!=typeof o||!(null===r||r>o)||(r=o)}return r}function sn(t){for(var e=t.values,r=null,n=0;n<e.length;n++){var o=e[n];"number"!=typeof o&&"bigint"!=typeof o||!(null===r||r<o)||(r=o)}return r}function ln(t){for(var e,r,n=t.values,o=0,i=0;i<n.length;i++){var a=n[i];o+=null!=a&&"number"==typeof a.value?a.value:1}var s=null===(r=null===(e=t.rowNode)||void 0===e?void 0:e.aggData)||void 0===r?void 0:r[t.column.getColId()];return s&&s.value===o?s:{value:o,toString:function(){return this.value.toString()},toNumber:function(){return this.value}}}function un(t){for(var e,r,n,o=t.values,i=0,a=0,s=0;s<o.length;s++){var l=o[s],u=null;"number"==typeof l||"bigint"==typeof l?(u=l,a++):null==l||"number"!=typeof l.value&&"bigint"!=typeof l.value||"number"!=typeof l.count||(u=tn?l.value*("number"==typeof l.value?l.count:tn(l.count)):l.value*l.count,a+=l.count),"number"==typeof u?i+=tn?"number"==typeof i?u:tn(u):u:"bigint"==typeof u&&(i=("bigint"==typeof i?i:tn(i))+u)}var c=null;a>0&&(c=tn?i/("number"==typeof i?a:tn(a)):i/a);var p=null===(r=null===(e=t.rowNode)||void 0===e?void 0:e.aggData)||void 0===r?void 0:r[null===(n=t.column)||void 0===n?void 0:n.getColId()];return p&&p.count===a&&p.value===c?p:{count:a,value:c,toString:function(){return"number"==typeof this.value||"bigint"==typeof this.value?this.value.toString():""},toNumber:function(){return this.value}}}var cn=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),pn=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},dn=function(t){function e(e,r,n,o,i){var a=t.call(this)||this;return a.column=e,a.dragSourceDropTarget=r,a.ghost=n,a.dropZonePurpose=o,a.horizontal=i,a.popupShowing=!1,a}return cn(e,t),e.prototype.init=function(){var t=this;this.setTemplate(e.TEMPLATE);var r=this.getGui(),n=this.gridOptionsService.is("functionsReadOnly");this.addElementClasses(r),this.addElementClasses(this.eDragHandle,"drag-handle"),this.addElementClasses(this.eText,"text"),this.addElementClasses(this.eButton,"button"),this.eDragHandle.appendChild(u.createIconNoSpan("columnDrag",this.gridOptionsService)),this.eButton.appendChild(u.createIconNoSpan("cancel",this.gridOptionsService)),this.setupSort(),this.displayName=this.columnModel.getDisplayNameForColumn(this.column,"columnDrop"),this.setupComponents(),this.ghost||n||this.addDragSource(),this.setupAria(),this.addManagedListener(this.eventService,D.EVENT_SORT_CHANGED,(function(){t.setupAria()})),this.setupTooltip(),this.activateTabIndex()},e.prototype.setupAria=function(){var t=this.localeService.getLocaleTextFunc(),e=this.getColumnAndAggFuncName(),r=e.name,n=e.aggFuncName,o=t("ariaDropZoneColumnComponentAggFuncSeparator"," of "),i={asc:t("ariaDropZoneColumnComponentSortAscending","ascending"),desc:t("ariaDropZoneColumnComponentSortDescending","descending")},a=this.column.getSort(),s=this.gridOptionsService.is("rowGroupPanelSuppressSort"),l=[[n&&""+n+o,r,this.isGroupingZone()&&!s&&a&&", "+i[a]].filter((function(t){return!!t})).join("")],c=this.gridOptionsService.is("functionsReadOnly");if(this.isAggregationZone()&&!c){var p=t("ariaDropZoneColumnValueItemDescription","Press ENTER to change the aggregation type");l.push(p)}if(this.isGroupingZone()&&this.column.getColDef().sortable&&!s){var d=t("ariaDropZoneColumnGroupItemDescription","Press ENTER to sort");l.push(d)}var h=t("ariaDropZoneColumnComponentDescription","Press DELETE to remove");l.push(h),u.setAriaLabel(this.getGui(),l.join(". "))},e.prototype.setupTooltip=function(){var t=this,e=function(){var e=t.column.getColDef().headerTooltip;t.setTooltip(e)};e(),this.addManagedListener(this.eventService,l.EVENT_NEW_COLUMNS_LOADED,e)},e.prototype.setupSort=function(){var t=this,e=this.column.getColDef().sortable,r=this.isGroupingZone();if(e&&r&&!this.gridOptionsService.is("rowGroupPanelSuppressSort")){this.eSortIndicator.setupSort(this.column,!0);var n=function(e){e.preventDefault();var r="ctrl"===t.gridOptionsService.get("multiSortKey")?e.ctrlKey||e.metaKey:e.shiftKey;t.sortController.progressSort(t.column,r,"uiColumnSorted")};this.addGuiEventListener("click",n),this.addGuiEventListener("keydown",(function(e){e.key===c.ENTER&&t.isGroupingZone()&&n(e)}))}},e.prototype.addDragSource=function(){var t=this,e={type:h.ToolPanel,eElement:this.eDragHandle,getDefaultIconName:function(){return m.ICON_HIDE},getDragItem:function(){return t.createDragItem()},dragItemName:this.displayName,dragSourceDropTarget:this.dragSourceDropTarget};this.dragAndDropService.addDragSource(e,!0),this.addDestroyFunc((function(){return t.dragAndDropService.removeDragSource(e)}))},e.prototype.createDragItem=function(){var t={};return t[this.column.getId()]=this.column.isVisible(),{columns:[this.column],visibleState:t}},e.prototype.setupComponents=function(){this.setTextValue(),this.setupRemove(),this.ghost&&this.addCssClass("ag-column-drop-cell-ghost"),this.isAggregationZone()&&!this.gridOptionsService.is("functionsReadOnly")&&this.addGuiEventListener("click",this.onShowAggFuncSelection.bind(this))},e.prototype.setupRemove=function(){var t=this;u.setDisplayed(this.eButton,!this.gridOptionsService.is("functionsReadOnly"));var r={type:e.EVENT_COLUMN_REMOVE};this.addGuiEventListener("keydown",(function(e){var n=e.key===c.ENTER;e.key===c.DELETE&&(e.preventDefault(),t.dispatchEvent(r)),n&&t.isAggregationZone()&&!t.gridOptionsService.is("functionsReadOnly")&&(e.preventDefault(),t.onShowAggFuncSelection())})),this.addManagedListener(this.eButton,"click",(function(e){t.dispatchEvent(r),e.stopPropagation()}));var n=new k(this.eButton);this.addManagedListener(n,k.EVENT_TAP,(function(){t.dispatchEvent(r)})),this.addDestroyFunc(n.destroy.bind(n))},e.prototype.getColumnAndAggFuncName=function(){var t=this.displayName,e="";if(this.isAggregationZone()){var r=this.column.getAggFunc(),n="string"==typeof r?r:"agg";e=this.localeService.getLocaleTextFunc()(n,n)}return{name:t,aggFuncName:e}},e.prototype.setTextValue=function(){var t=this.getColumnAndAggFuncName(),e=t.name,r=t.aggFuncName,n=this.isAggregationZone()?r+"("+e+")":e,o=u.escapeString(n);this.eText.innerHTML=o},e.prototype.onShowAggFuncSelection=function(){var t=this;if(!this.popupShowing){this.popupShowing=!0;var e=new C({cssIdentifier:"select-agg-func"}),r=this.aggFuncService.getFuncNames(this.column),n=this.getGui(),o=e.getGui();e.setModel({getRow:function(t){return r[t]},getRowCount:function(){return r.length}}),this.getContext().createBean(e);var i=u.loadTemplate('<div class="ag-select-agg-func-popup"></div>');i.style.top="0px",i.style.left="0px",i.appendChild(o),i.style.width=n.clientWidth+"px";var a=this.addManagedListener(i,"focusout",(function(t){!i.contains(t.relatedTarget)&&l&&l.hideFunc()})),s=this.localeService.getLocaleTextFunc(),l=this.popupService.addPopup({modal:!0,eChild:i,closeOnEsc:!0,closedCallback:function(r){t.destroyBean(e),t.popupShowing=!1,"Escape"===(null==r?void 0:r.key)&&n.focus(),a&&a()},ariaLabel:s("ariaLabelAggregationFunction","Aggregation Function")});l&&e.setComponentCreator(this.createAggSelect.bind(this,l.hideFunc)),e.addGuiEventListener("keydown",(function(t){if(t.key===c.ENTER||t.key===c.SPACE){var r=e.getLastFocusedRow();if(null==r)return;var n=e.getComponentAt(r);n&&n.selectItem()}})),this.popupService.positionPopupByComponent({type:"aggFuncSelect",eventSource:n,ePopup:i,keepWithinBounds:!0,column:this.column,position:"under"}),e.refresh();var p=r.findIndex((function(e){return e===t.column.getAggFunc()}));-1===p&&(p=0),e.focusRow(p)}},e.prototype.createAggSelect=function(t,e){var r=this,n=this.localeService.getLocaleTextFunc(),o=e.toString(),i=n(o,o);return new hn((function(){if(t(),r.gridOptionsService.is("functionsPassive")){var n={type:l.EVENT_COLUMN_AGG_FUNC_CHANGE_REQUEST,columns:[r.column],aggFunc:e};r.eventService.dispatchEvent(n)}else r.columnModel.setColumnAggFunc(r.column,e,"toolPanelDragAndDrop")}),i)},e.prototype.addElementClasses=function(t,e){e=e?"-"+e:"";var r=this.horizontal?"horizontal":"vertical";t.classList.add("ag-column-drop-cell"+e,"ag-column-drop-"+r+"-cell"+e)},e.prototype.isAggregationZone=function(){return"aggregation"===this.dropZonePurpose},e.prototype.isGroupingZone=function(){return"rowGroup"===this.dropZonePurpose},e.EVENT_COLUMN_REMOVE="columnRemove",e.TEMPLATE='<span role="option">\n          <span ref="eDragHandle" class="ag-drag-handle ag-column-drop-cell-drag-handle" role="presentation"></span>\n          <span ref="eText" class="ag-column-drop-cell-text" aria-hidden="true"></span>\n          <ag-sort-indicator ref="eSortIndicator"></ag-sort-indicator>\n          <span ref="eButton" class="ag-column-drop-cell-button" role="presentation"></span>\n        </span>',pn([n("dragAndDropService")],e.prototype,"dragAndDropService",void 0),pn([n("columnModel")],e.prototype,"columnModel",void 0),pn([n("popupService")],e.prototype,"popupService",void 0),pn([E("aggFuncService")],e.prototype,"aggFuncService",void 0),pn([n("sortController")],e.prototype,"sortController",void 0),pn([o("eText")],e.prototype,"eText",void 0),pn([o("eDragHandle")],e.prototype,"eDragHandle",void 0),pn([o("eButton")],e.prototype,"eButton",void 0),pn([o("eSortIndicator")],e.prototype,"eSortIndicator",void 0),pn([i],e.prototype,"init",null),e}(a),hn=function(t){function e(e,r){var n=t.call(this,'<div class="ag-select-agg-func-item"/>')||this;return n.selectItem=e,n.getGui().innerText=r,n.addGuiEventListener("click",n.selectItem),n}return cn(e,t),e}(a),fn=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),vn=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},yn=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},gn=function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t},mn=function(t){function e(r,n){var o=t.call(this,'<div class="ag-unselectable" role="presentation"></div>')||this;return o.horizontal=r,o.dropZonePurpose=n,o.state=e.STATE_NOT_DRAGGING,o.guiDestroyFunctions=[],o.childColumnComponents=[],o.resizeEnabled=!1,o.addElementClasses(o.getGui()),o.eColumnDropList=document.createElement("div"),o.addElementClasses(o.eColumnDropList,"list"),u.setAriaRole(o.eColumnDropList,"listbox"),o}return fn(e,t),e.prototype.isHorizontal=function(){return this.horizontal},e.prototype.toggleResizable=function(t){this.positionableFeature.setResizable(!!t&&{bottom:!0}),this.resizeEnabled=t},e.prototype.setBeans=function(t){this.beans=t},e.prototype.destroy=function(){this.destroyGui(),t.prototype.destroy.call(this)},e.prototype.destroyGui=function(){this.guiDestroyFunctions.forEach((function(t){return t()})),this.guiDestroyFunctions.length=0,this.childColumnComponents.length=0,u.clearElement(this.getGui()),u.clearElement(this.eColumnDropList)},e.prototype.init=function(t){this.params=t,this.createManagedBean(new N(this.getFocusableElement(),{handleKeyDown:this.handleKeyDown.bind(this)})),this.addManagedListener(this.beans.eventService,l.EVENT_NEW_COLUMNS_LOADED,this.refreshGui.bind(this)),this.addManagedPropertyListener("functionsReadOnly",this.refreshGui.bind(this)),this.setupDropTarget(),this.positionableFeature=new G(this.getGui(),{minHeight:100}),this.createManagedBean(this.positionableFeature),this.refreshGui(),u.setAriaLabel(this.eColumnDropList,this.getAriaLabel())},e.prototype.handleKeyDown=function(t){var e=!this.horizontal,r=t.key===c.DOWN,n=t.key===c.UP;if(!e){var o=this.gridOptionsService.is("enableRtl");r=!o&&t.key===c.RIGHT||o&&t.key===c.LEFT,n=!o&&t.key===c.LEFT||o&&t.key===c.RIGHT}if(r||n){var i=this.focusService.findNextFocusableElement(this.getFocusableElement(),!1,n);i&&(t.preventDefault(),i.focus())}},e.prototype.addElementClasses=function(t,e){e=e?"-"+e:"";var r=this.horizontal?"horizontal":"vertical";t.classList.add("ag-column-drop"+e,"ag-column-drop-"+r+e)},e.prototype.setupDropTarget=function(){this.dropTarget={getContainer:this.getGui.bind(this),getIconName:this.getIconName.bind(this),onDragging:this.onDragging.bind(this),onDragEnter:this.onDragEnter.bind(this),onDragLeave:this.onDragLeave.bind(this),onDragStop:this.onDragStop.bind(this),isInterestedIn:this.isInterestedIn.bind(this)},this.beans.dragAndDropService.addDropTarget(this.dropTarget)},e.prototype.isInterestedIn=function(t){return t===h.HeaderCell||t===h.ToolPanel},e.prototype.checkInsertIndex=function(t){var e=this.getNewInsertIndex(t);if(e<0)return!1;var r=e!==this.insertIndex;return r&&(this.insertIndex=e),r},e.prototype.getNewInsertIndex=function(t){var e=this,r=t.event,n=this.horizontal?r.clientX:r.clientY,o=this.childColumnComponents.map((function(t){return t.getGui().getBoundingClientRect()})),i=o.findIndex((function(t){return e.horizontal?t.right>n&&t.left<n:t.top<n&&t.bottom>n}));if(-1===i){var a=this.beans.gridOptionsService.is("enableRtl");return o.every((function(t){return n>(e.horizontal?t.right:t.bottom)}))?a&&this.horizontal?0:this.childColumnComponents.length:o.every((function(t){return n<(e.horizontal?t.left:t.top)}))?a&&this.horizontal?this.childColumnComponents.length:0:this.insertIndex}return this.insertIndex<=i?i+1:i},e.prototype.checkDragStartedBySelf=function(t){this.state===e.STATE_NOT_DRAGGING&&(this.state=e.STATE_REARRANGE_COLUMNS,this.potentialDndColumns=t.dragSource.getDragItem().columns||[],this.refreshGui(),this.checkInsertIndex(t),this.refreshGui())},e.prototype.onDragging=function(t){this.checkDragStartedBySelf(t),this.checkInsertIndex(t)&&this.refreshGui()},e.prototype.onDragEnter=function(t){var r=t.dragSource.getDragItem().columns||[];this.state=e.STATE_NEW_COLUMNS_IN;var n=r.filter(this.isColumnDroppable.bind(this));if(n.length>0){if(this.isRowGroupPanel()&&!this.gridOptionsService.is("suppressRowGroupHidesColumns")&&!t.fromNudge){var o=t.dragSource.getDragItem().columns;this.setColumnsVisible(o,!1,"uiColumnDragged")}this.potentialDndColumns=n,this.checkInsertIndex(t),this.refreshGui()}},e.prototype.setColumnsVisible=function(t,e,r){if(void 0===r&&(r="api"),t){var n=t.filter((function(t){return!t.getColDef().lockVisible}));this.colModel.setColumnsVisible(n,e,r)}},e.prototype.isPotentialDndColumns=function(){return u.existsAndNotEmpty(this.potentialDndColumns)},e.prototype.isRowGroupPanel=function(){return"rowGroup"===this.dropZonePurpose},e.prototype.onDragLeave=function(t){if(this.state===e.STATE_REARRANGE_COLUMNS){var r=t.dragSource.getDragItem().columns||[];this.removeColumns(r)}if(this.isPotentialDndColumns()){if(this.isRowGroupPanel()&&!this.gridOptionsService.is("suppressMakeColumnVisibleAfterUnGroup")&&!t.fromNudge){var n=t.dragSource.getDragItem();this.setColumnsVisible(n.columns,!0,"uiColumnDragged")}this.potentialDndColumns=[],this.refreshGui()}this.state=e.STATE_NOT_DRAGGING},e.prototype.onDragStop=function(){if(this.isPotentialDndColumns()){var t=!1;this.state===e.STATE_NEW_COLUMNS_IN?(this.addColumns(this.potentialDndColumns),t=!0):t=this.rearrangeColumns(this.potentialDndColumns),this.potentialDndColumns=[],this.beans.gridOptionsService.is("functionsPassive")&&t||this.refreshGui()}this.state=e.STATE_NOT_DRAGGING},e.prototype.removeColumns=function(t){var e=this.getExistingColumns().filter((function(e){return!u.includes(t,e)}));this.updateColumns(e)},e.prototype.addColumns=function(t){if(t){var e=this.getExistingColumns().slice(),r=t.filter((function(t){return e.indexOf(t)<0}));u.insertArrayIntoArray(e,r,this.insertIndex),this.updateColumns(e)}},e.prototype.rearrangeColumns=function(t){var e=this.getNonGhostColumns().slice();return u.insertArrayIntoArray(e,t,this.insertIndex),!u.areEqual(e,this.getExistingColumns())&&(this.updateColumns(e),!0)},e.prototype.refreshGui=function(){var t=this.eColumnDropList.scrollTop,e=this.resizeEnabled,r=this.getFocusedItem(),n=this.focusService.findNextFocusableElement();n||(n=this.focusService.findNextFocusableElement(void 0,!1,!0)),this.toggleResizable(!1),this.destroyGui(),this.addIconAndTitleToGui(),this.addEmptyMessageToGui(),this.addColumnsToGui(),this.isHorizontal()||(this.eColumnDropList.scrollTop=t),e&&this.toggleResizable(e),this.focusService.isKeyboardMode()&&this.restoreFocus(r,n)},e.prototype.getFocusedItem=function(){var t=this.getGui(),e=this.gridOptionsService.getDocument().activeElement;return t.contains(e)?Array.from(t.querySelectorAll(".ag-column-drop-cell")).indexOf(e):-1},e.prototype.restoreFocus=function(t,e){var r=this.getGui(),n=Array.from(r.querySelectorAll(".ag-column-drop-cell"));if(-1!==t){0===n.length&&e.focus();var o=n[Math.min(n.length-1,t)];o&&o.focus()}},e.prototype.getNonGhostColumns=function(){var t=this,e=this.getExistingColumns();return this.isPotentialDndColumns()?e.filter((function(e){return!u.includes(t.potentialDndColumns,e)})):e},e.prototype.addColumnsToGui=function(){var t=this,e=this.getNonGhostColumns().map((function(e){return t.createColumnComponent(e,!1)}));if(this.isPotentialDndColumns()){var r=this.potentialDndColumns.map((function(e){return t.createColumnComponent(e,!0)}));this.insertIndex>=e.length?e.push.apply(e,gn([],yn(r))):e.splice.apply(e,gn([this.insertIndex,0],yn(r)))}this.appendChild(this.eColumnDropList),e.forEach((function(e,r){r>0&&t.addArrow(t.eColumnDropList),t.eColumnDropList.appendChild(e.getGui())})),this.addAriaLabelsToComponents()},e.prototype.addAriaLabelsToComponents=function(){var t=this;this.childColumnComponents.forEach((function(e,r){var n=e.getGui();u.setAriaPosInSet(n,r+1),u.setAriaSetSize(n,t.childColumnComponents.length)}))},e.prototype.createColumnComponent=function(t,e){var r=this,n=new dn(t,this.dropTarget,e,this.dropZonePurpose,this.horizontal);return n.addEventListener(dn.EVENT_COLUMN_REMOVE,this.removeColumns.bind(this,[t])),this.beans.context.createBean(n),this.guiDestroyFunctions.push((function(){return r.destroyBean(n)})),e||this.childColumnComponents.push(n),n},e.prototype.addIconAndTitleToGui=function(){var t=this.params.icon,e=document.createElement("div");if(u.setAriaHidden(e,!0),this.addElementClasses(e,"title-bar"),this.addElementClasses(t,"icon"),this.addOrRemoveCssClass("ag-column-drop-empty",this.isExistingColumnsEmpty()),e.appendChild(t),!this.horizontal){var r=document.createElement("span");this.addElementClasses(r,"title"),r.innerHTML=this.params.title,e.appendChild(r)}this.appendChild(e)},e.prototype.isExistingColumnsEmpty=function(){return 0===this.getExistingColumns().length},e.prototype.addEmptyMessageToGui=function(){if(this.isExistingColumnsEmpty()&&!this.isPotentialDndColumns()){var t=document.createElement("span");t.innerHTML=this.params.emptyMessage,this.addElementClasses(t,"empty-message"),this.eColumnDropList.appendChild(t)}},e.prototype.addArrow=function(t){if(this.horizontal){var e=this.beans.gridOptionsService.is("enableRtl"),r=u.createIconNoSpan(e?"smallLeft":"smallRight",this.beans.gridOptionsService);this.addElementClasses(r,"cell-separator"),t.appendChild(r)}},e.STATE_NOT_DRAGGING="notDragging",e.STATE_NEW_COLUMNS_IN="newColumnsIn",e.STATE_REARRANGE_COLUMNS="rearrangeColumns",vn([n("columnModel")],e.prototype,"colModel",void 0),vn([n("focusService")],e.prototype,"focusService",void 0),e}(a),bn=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Cn=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},Sn=function(t){function e(e){return t.call(this,e,"rowGroup")||this}return bn(e,t),e.prototype.passBeansUp=function(){t.prototype.setBeans.call(this,{gridOptionsService:this.gridOptionsService,eventService:this.eventService,context:this.getContext(),loggerFactory:this.loggerFactory,dragAndDropService:this.dragAndDropService});var e=this.localeService.getLocaleTextFunc(),r=e("rowGroupColumnsEmptyMessage","Drag here to set row groups"),n=e("groups","Row Groups");t.prototype.init.call(this,{dragAndDropIcon:m.ICON_GROUP,icon:u.createIconNoSpan("rowGroupPanel",this.gridOptionsService,null),emptyMessage:r,title:n}),this.addManagedListener(this.eventService,l.EVENT_COLUMN_ROW_GROUP_CHANGED,this.refreshGui.bind(this))},e.prototype.getAriaLabel=function(){return this.localeService.getLocaleTextFunc()("ariaRowGroupDropZonePanelLabel","Row Groups")},e.prototype.getTooltipParams=function(){var e=t.prototype.getTooltipParams.call(this);return e.location="rowGroupColumnsList",e},e.prototype.isColumnDroppable=function(t){return!(this.gridOptionsService.is("functionsReadOnly")||!t.isPrimary())&&(t.isAllowRowGroup()&&!t.isRowGroupActive())},e.prototype.updateColumns=function(t){if(this.gridOptionsService.is("functionsPassive")){var e={type:l.EVENT_COLUMN_ROW_GROUP_CHANGE_REQUEST,columns:t};this.eventService.dispatchEvent(e)}else this.columnModel.setRowGroupColumns(t,"toolPanelUi")},e.prototype.getIconName=function(){return this.isPotentialDndColumns()?m.ICON_GROUP:m.ICON_NOT_ALLOWED},e.prototype.getExistingColumns=function(){return this.columnModel.getRowGroupColumns()},Cn([n("columnModel")],e.prototype,"columnModel",void 0),Cn([n("loggerFactory")],e.prototype,"loggerFactory",void 0),Cn([n("dragAndDropService")],e.prototype,"dragAndDropService",void 0),Cn([i],e.prototype,"passBeansUp",null),e}(mn),wn=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),xn=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},On=function(t){function e(e){return t.call(this,e,"pivot")||this}return wn(e,t),e.prototype.passBeansUp=function(){t.prototype.setBeans.call(this,{gridOptionsService:this.gridOptionsService,eventService:this.eventService,context:this.getContext(),loggerFactory:this.loggerFactory,dragAndDropService:this.dragAndDropService});var e=this.localeService.getLocaleTextFunc(),r=e("pivotColumnsEmptyMessage","Drag here to set column labels"),n=e("pivots","Column Labels");t.prototype.init.call(this,{dragAndDropIcon:m.ICON_GROUP,icon:u.createIconNoSpan("pivotPanel",this.gridOptionsService,null),emptyMessage:r,title:n}),this.addManagedListener(this.eventService,l.EVENT_NEW_COLUMNS_LOADED,this.refresh.bind(this)),this.addManagedListener(this.eventService,l.EVENT_COLUMN_PIVOT_CHANGED,this.refresh.bind(this)),this.addManagedListener(this.eventService,l.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.checkVisibility.bind(this)),this.refresh()},e.prototype.getAriaLabel=function(){return this.localeService.getLocaleTextFunc()("ariaPivotDropZonePanelLabel","Column Labels")},e.prototype.getTooltipParams=function(){var e=t.prototype.getTooltipParams.call(this);return e.location="pivotColumnsList",e},e.prototype.refresh=function(){this.checkVisibility(),this.refreshGui()},e.prototype.checkVisibility=function(){var t=this.columnModel.isPivotMode();if(this.isHorizontal())switch(this.gridOptionsService.get("pivotPanelShow")){case"always":this.setDisplayed(t);break;case"onlyWhenPivoting":var e=this.columnModel.isPivotActive();this.setDisplayed(t&&e);break;default:this.setDisplayed(!1)}else this.setDisplayed(t)},e.prototype.isColumnDroppable=function(t){return!(this.gridOptionsService.is("functionsReadOnly")||!t.isPrimary())&&(t.isAllowPivot()&&!t.isPivotActive())},e.prototype.updateColumns=function(t){if(this.gridOptionsService.is("functionsPassive")){var e={type:l.EVENT_COLUMN_PIVOT_CHANGE_REQUEST,columns:t};this.eventService.dispatchEvent(e)}else this.columnModel.setPivotColumns(t,"toolPanelUi")},e.prototype.getIconName=function(){return this.isPotentialDndColumns()?m.ICON_PIVOT:m.ICON_NOT_ALLOWED},e.prototype.getExistingColumns=function(){return this.columnModel.getPivotColumns()},xn([n("columnModel")],e.prototype,"columnModel",void 0),xn([n("loggerFactory")],e.prototype,"loggerFactory",void 0),xn([n("dragAndDropService")],e.prototype,"dragAndDropService",void 0),xn([i],e.prototype,"passBeansUp",null),e}(mn),En=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Tn=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},Pn=function(t){function e(){return t.call(this)||this}return En(e,t),e.prototype.postConstruct=function(){this.setGui(this.createNorthPanel()),this.addManagedListener(this.eventService,l.EVENT_COLUMN_ROW_GROUP_CHANGED,this.onRowGroupChanged.bind(this)),this.addManagedListener(this.eventService,l.EVENT_NEW_COLUMNS_LOADED,this.onRowGroupChanged.bind(this)),this.addManagedPropertyListener("rowGroupPanelShow",this.onRowGroupChanged.bind(this)),this.onRowGroupChanged()},e.prototype.createNorthPanel=function(){var t=document.createElement("div"),e=this.onDropPanelVisible.bind(this);return t.classList.add("ag-column-drop-wrapper"),u.setAriaRole(t,"presentation"),this.rowGroupComp=new Sn(!0),this.createManagedBean(this.rowGroupComp),this.pivotComp=new On(!0),this.createManagedBean(this.pivotComp),t.appendChild(this.rowGroupComp.getGui()),t.appendChild(this.pivotComp.getGui()),this.addManagedListener(this.rowGroupComp,a.EVENT_DISPLAYED_CHANGED,e),this.addManagedListener(this.pivotComp,a.EVENT_DISPLAYED_CHANGED,e),this.onDropPanelVisible(),t},e.prototype.onDropPanelVisible=function(){var t=this.rowGroupComp.isDisplayed()&&this.pivotComp.isDisplayed();this.rowGroupComp.addOrRemoveCssClass("ag-column-drop-horizontal-half-width",t),this.pivotComp.addOrRemoveCssClass("ag-column-drop-horizontal-half-width",t)},e.prototype.onRowGroupChanged=function(){if(this.rowGroupComp){var t=this.gridOptionsService.get("rowGroupPanelShow");if("always"===t)this.rowGroupComp.setDisplayed(!0);else if("onlyWhenGrouping"===t){var e=!this.columnModel.isRowGroupEmpty();this.rowGroupComp.setDisplayed(e)}else this.rowGroupComp.setDisplayed(!1)}},Tn([n("columnModel")],e.prototype,"columnModel",void 0),Tn([i],e.prototype,"postConstruct",null),e}(a),Dn=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),An=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},Mn=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return Dn(r,t),r.prototype.execute=function(t){var e=this,r=this.columnModel.isPivotMode(),n=this.filterManager.isAggregateFilterPresent()||this.filterManager.isAggregateQuickFilterPresent(),o=this.gridOptionsService.getGroupAggFiltering()||(r?function(t){return t.node.leafGroup}:function(t){return!t.node.group}),i=t.changedPath,a=function(t,r){void 0===r&&(r=!1),t.childrenAfterFilter&&(t.childrenAfterAggFilter=t.childrenAfterFilter,r&&t.childrenAfterAggFilter.forEach((function(t){return a(t,r)})),e.setAllChildrenCount(t)),t.sibling&&(t.sibling.childrenAfterAggFilter=t.childrenAfterAggFilter)};i.forEachChangedNodeDepthFirst(n?function(t){var r;t.childrenAfterAggFilter=(null===(r=t.childrenAfterFilter)||void 0===r?void 0:r.filter((function(t){var r;if(o({node:t})&&e.filterManager.doesRowPassAggregateFilters({rowNode:t}))return a(t,!0),!0;return null===(r=t.childrenAfterAggFilter)||void 0===r?void 0:r.length})))||null,e.setAllChildrenCount(t),t.sibling&&(t.sibling.childrenAfterAggFilter=t.childrenAfterAggFilter)}:a,!0)},r.prototype.setAllChildrenCountTreeData=function(t){var e=0;t.childrenAfterAggFilter.forEach((function(t){e++,e+=t.allChildrenCount})),t.setAllChildrenCount(e)},r.prototype.setAllChildrenCountGridGrouping=function(t){var e=0;t.childrenAfterAggFilter.forEach((function(t){t.group?e+=t.allChildrenCount:e++})),t.setAllChildrenCount(e)},r.prototype.setAllChildrenCount=function(t){t.hasChildren()?this.gridOptionsService.is("treeData")?this.setAllChildrenCountTreeData(t):this.setAllChildrenCountGridGrouping(t):t.setAllChildrenCount(null)},An([n("filterManager")],r.prototype,"filterManager",void 0),An([n("columnModel")],r.prototype,"columnModel",void 0),r=An([e("filterAggregatesStage")],r)}(r),_n=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Rn=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},kn=function(t){function e(){return t.call(this,'\n            <div class="ag-group-filter">\n                <div ref="eGroupField"></div>\n                <div ref="eUnderlyingFilter"></div>\n            </div>\n        ')||this}return _n(e,t),e.prototype.postConstruct=function(){this.initialiseTabGuard({})},e.prototype.init=function(t){var e=this;return this.params=t,this.validateParams(),this.updateGroups().then((function(){e.addManagedListener(e.eventService,l.EVENT_COLUMN_ROW_GROUP_CHANGED,(function(){return e.onColumnRowGroupChanged()}))}))},e.prototype.validateParams=function(){var t=this.params.colDef;t.field&&u.doOnce((function(){return console.warn('AG Grid: Group Column Filter does not work with the colDef property "field". This property will be ignored.')}),"groupFilterFieldParam"),t.filterValueGetter&&u.doOnce((function(){return console.warn('AG Grid: Group Column Filter does not work with the colDef property "filterValueGetter". This property will be ignored.')}),"groupFilterFilterValueGetterParam"),t.filterParams&&u.doOnce((function(){return console.warn('AG Grid: Group Column Filter does not work with the colDef property "filterParams". This property will be ignored.')}),"groupFilterFilterParams")},e.prototype.updateGroups=function(){var t=this.updateGroupField();return this.getUnderlyingFilters(t)},e.prototype.getSourceColumns=function(){if(this.groupColumn=this.params.column,this.gridOptionsService.is("treeData"))return u.doOnce((function(){return console.warn("AG Grid: Group Column Filter does not work with Tree Data enabled. Please disable Tree Data, or use a different filter.")}),"groupFilterTreeData"),[];var t=this.columnModel.getSourceColumnsForGroupColumn(this.groupColumn);return t||(u.doOnce((function(){return console.warn("AG Grid: Group Column Filter only works on group columns. Please use a different filter.")}),"groupFilterNotGroupColumn"),[])},e.prototype.updateGroupField=function(){var t=this;u.clearElement(this.eGroupField),this.eGroupFieldSelect&&this.destroyBean(this.eGroupFieldSelect);var e=this.getSourceColumns(),r=e.filter((function(t){return t.isFilterAllowed()}));return r.length?(1===e.length?(this.selectedColumn=r[0],u.setDisplayed(this.eGroupField,!1)):(this.selectedColumn&&r.some((function(e){return e.getId()===t.selectedColumn.getId()}))||(this.selectedColumn=r[0]),this.createGroupFieldSelectElement(r),this.eGroupField.appendChild(this.eGroupFieldSelect.getGui()),this.eGroupField.appendChild(u.loadTemplate('<div class="ag-filter-separator"></div>')),u.setDisplayed(this.eGroupField,!0)),r):(this.selectedColumn=void 0,u.setDisplayed(this.eGroupField,!1),null)},e.prototype.createGroupFieldSelectElement=function(t){var e=this;this.eGroupFieldSelect=this.createManagedBean(new j);var r=this.localeService.getLocaleTextFunc();this.eGroupFieldSelect.setLabel(r("groupFilterSelect","Select field:")),this.eGroupFieldSelect.setLabelAlignment("top"),this.eGroupFieldSelect.addOptions(t.map((function(t){var r;return{value:t.getId(),text:null!==(r=e.columnModel.getDisplayNameForColumn(t,"groupFilter",!1))&&void 0!==r?r:void 0}}))),this.eGroupFieldSelect.setValue(this.selectedColumn.getId()),this.eGroupFieldSelect.onValueChange((function(t){return e.updateSelectedColumn(t)})),this.eGroupFieldSelect.addCssClass("ag-group-filter-field-select-wrapper"),1===t.length&&this.eGroupFieldSelect.setDisabled(!0)},e.prototype.getUnderlyingFilters=function(t){var e=this;if(!t)return this.filterColumnPairs=void 0,this.selectedFilter=void 0,this.groupColumn.setFilterActive(!1,"columnRowGroupChanged"),V.resolve();var r=[],n=[];return t.forEach((function(t){var o=e.filterManager.getOrCreateFilterWrapper(t,"COLUMN_MENU");(null==o?void 0:o.filterPromise)&&r.push(o.filterPromise.then((function(r){return r&&n.push({filter:r,column:t}),t.getId()===e.selectedColumn.getId()&&(e.selectedFilter=null!=r?r:void 0),r})))})),V.all(r).then((function(){e.filterColumnPairs=n,e.groupColumn.setFilterActive(e.isFilterActive(),"columnRowGroupChanged")}))},e.prototype.addUnderlyingFilterElement=function(){var t=this;if(u.clearElement(this.eUnderlyingFilter),!this.selectedColumn)return V.resolve();var e=this.filterManager.getOrCreateFilterWrapper(this.selectedColumn,"COLUMN_MENU");return e?e.guiPromise.then((function(r){var n;t.eUnderlyingFilter.appendChild(r),null===(n=e.filterPromise)||void 0===n||n.then((function(e){var r,n;null===(r=null==e?void 0:e.afterGuiAttached)||void 0===r||r.call(e,t.afterGuiAttachedParams),(null===(n=t.afterGuiAttachedParams)||void 0===n?void 0:n.suppressFocus)||!t.eGroupFieldSelect||t.eGroupFieldSelect.isDisabled()||t.eGroupFieldSelect.getFocusableElement().focus()}))})):V.resolve()},e.prototype.updateSelectedColumn=function(t){var r,n;if(t){null===(n=null===(r=this.selectedFilter)||void 0===r?void 0:r.afterGuiDetached)||void 0===n||n.call(r);var o=this.getFilterColumnPair(t);this.selectedColumn=null==o?void 0:o.column,this.selectedFilter=null==o?void 0:o.filter,this.dispatchEvent({type:e.EVENT_SELECTED_COLUMN_CHANGED}),this.addUnderlyingFilterElement()}},e.prototype.isFilterActive=function(){var t;return!!(null===(t=this.filterColumnPairs)||void 0===t?void 0:t.some((function(t){return t.filter.isFilterActive()})))},e.prototype.doesFilterPass=function(){return!0},e.prototype.getModel=function(){return null},e.prototype.setModel=function(){return V.resolve()},e.prototype.afterGuiAttached=function(t){this.afterGuiAttachedParams=t,this.addUnderlyingFilterElement()},e.prototype.afterGuiDetached=function(){var t,e;u.clearElement(this.eUnderlyingFilter),null===(e=null===(t=this.selectedFilter)||void 0===t?void 0:t.afterGuiDetached)||void 0===e||e.call(t)},e.prototype.onColumnRowGroupChanged=function(){var t=this;this.updateGroups().then((function(){t.dispatchEvent({type:e.EVENT_COLUMN_ROW_GROUP_CHANGED}),t.eventService.dispatchEvent({type:"filterAllowedUpdated"})}))},e.prototype.getFilterColumnPair=function(t){var e;if(t)return null===(e=this.filterColumnPairs)||void 0===e?void 0:e.find((function(e){return e.column.getId()===t}))},e.prototype.getSelectedFilter=function(){return this.selectedFilter},e.prototype.getSelectedColumn=function(){return this.selectedColumn},e.prototype.isFilterAllowed=function(){return!!this.selectedColumn},e.prototype.destroy=function(){t.prototype.destroy.call(this)},e.EVENT_COLUMN_ROW_GROUP_CHANGED="columnRowGroupChanged",e.EVENT_SELECTED_COLUMN_CHANGED="selectedColumnChanged",Rn([n("filterManager")],e.prototype,"filterManager",void 0),Rn([n("columnModel")],e.prototype,"columnModel",void 0),Rn([o("eGroupField")],e.prototype,"eGroupField",void 0),Rn([o("eUnderlyingFilter")],e.prototype,"eUnderlyingFilter",void 0),Rn([i],e.prototype,"postConstruct",null),e}(b),Fn=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),In=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},Ln=function(t){function e(){var e=t.call(this,'\n            <div ref="eFloatingFilter" class="ag-group-floating-filter ag-floating-filter-input" role="presentation"></div>\n        ')||this;return e.haveAddedColumnListeners=!1,e}return Fn(e,t),e.prototype.init=function(t){var e=this;this.params=t;var r="multipleColumns"===this.gridOptionsService.get("groupDisplayType");return new V((function(t){e.params.parentFilterInstance((function(n){e.parentFilterInstance=n,r?e.setupUnderlyingFloatingFilterElement().then((function(){return t()})):(e.setupReadOnlyFloatingFilterElement(),t())}))})).then((function(){e.addManagedListener(e.parentFilterInstance,kn.EVENT_SELECTED_COLUMN_CHANGED,(function(){return e.onSelectedColumnChanged()})),e.addManagedListener(e.parentFilterInstance,kn.EVENT_COLUMN_ROW_GROUP_CHANGED,(function(){return e.onColumnRowGroupChanged()}))}))},e.prototype.onParamsUpdated=function(t){this.params=t,this.setParams()},e.prototype.setParams=function(){var t,e=this.columnModel.getDisplayNameForColumn(this.params.column,"header",!0),r=this.localeService.getLocaleTextFunc();null===(t=this.eFloatingFilterText)||void 0===t||t.setInputAriaLabel(e+" "+r("ariaFilterInput","Filter Input"))},e.prototype.setupReadOnlyFloatingFilterElement=function(){var t=this;this.eFloatingFilterText||(this.eFloatingFilterText=this.createManagedBean(new y),this.eFloatingFilterText.setDisabled(!0).addGuiEventListener("click",(function(){return t.params.showParentFilter()})),this.setParams()),this.updateDisplayedValue(),this.eFloatingFilter.appendChild(this.eFloatingFilterText.getGui())},e.prototype.setupUnderlyingFloatingFilterElement=function(){var t=this;this.showingUnderlyingFloatingFilter=!1,this.underlyingFloatingFilter=void 0,u.clearElement(this.eFloatingFilter);var e=this.parentFilterInstance.getSelectedColumn();if(e&&!e.isVisible()){var r=this.filterManager.getFloatingFilterCompDetails(e,this.params.showParentFilter);if(r)return this.compDetails=r,this.haveAddedColumnListeners||(this.haveAddedColumnListeners=!0,this.addManagedListener(e,D.EVENT_VISIBLE_CHANGED,this.onColumnVisibleChanged.bind(this)),this.addManagedListener(e,D.EVENT_COL_DEF_CHANGED,this.onColDefChanged.bind(this))),r.newAgStackInstance().then((function(e){var r,n;t.underlyingFloatingFilter=e,null===(r=t.underlyingFloatingFilter)||void 0===r||r.onParentModelChanged(null===(n=t.parentFilterInstance.getSelectedFilter())||void 0===n?void 0:n.getModel()),t.appendChild(e.getGui()),t.showingUnderlyingFloatingFilter=!0}))}return this.setupReadOnlyFloatingFilterElement(),V.resolve()},e.prototype.onColumnVisibleChanged=function(){this.setupUnderlyingFloatingFilterElement()},e.prototype.onColDefChanged=function(t){var e,r;if(t.column){var n=this.filterManager.getFloatingFilterCompDetails(t.column,this.params.showParentFilter);n&&(null===(r=null===(e=this.underlyingFloatingFilter)||void 0===e?void 0:e.onParamsUpdated)||void 0===r||r.call(e,n.params))}},e.prototype.onParentModelChanged=function(t,e){var r,n;this.showingUnderlyingFloatingFilter?null===(r=this.underlyingFloatingFilter)||void 0===r||r.onParentModelChanged(null===(n=this.parentFilterInstance.getSelectedFilter())||void 0===n?void 0:n.getModel(),e):this.updateDisplayedValue()},e.prototype.updateDisplayedValue=function(){if(this.parentFilterInstance&&this.eFloatingFilterText){var t=this.parentFilterInstance.getSelectedFilter();if(!t)return this.eFloatingFilterText.setValue(""),void this.eFloatingFilterText.setDisplayed(!1);if(this.eFloatingFilterText.setDisplayed(!0),t.getModelAsString){var e=t.getModel();this.eFloatingFilterText.setValue(null==e?"":t.getModelAsString(e))}else this.eFloatingFilterText.setValue("")}},e.prototype.onSelectedColumnChanged=function(){this.showingUnderlyingFloatingFilter||this.updateDisplayedValue()},e.prototype.onColumnRowGroupChanged=function(){this.showingUnderlyingFloatingFilter||this.updateDisplayedValue()},e.prototype.destroy=function(){t.prototype.destroy.call(this)},In([n("columnModel")],e.prototype,"columnModel",void 0),In([n("filterManager")],e.prototype,"filterManager",void 0),In([o("eFloatingFilter")],e.prototype,"eFloatingFilter",void 0),e}(a),Nn={version:"30.2.0",moduleName:s.RowGroupingModule,beans:[Lr,Mn,Ur,Yr,Jr,en],agStackComponents:[{componentName:"AgGridHeaderDropZones",componentClass:Pn}],userComponents:[{componentName:"agGroupColumnFilter",componentClass:kn},{componentName:"agGroupColumnFloatingFilter",componentClass:Ln}],dependantModules:[Ft]},Gn=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),jn=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},Vn=function(t){function e(e){return t.call(this,e,"aggregation")||this}return Gn(e,t),e.prototype.passBeansUp=function(){t.prototype.setBeans.call(this,{gridOptionsService:this.gridOptionsService,eventService:this.eventService,context:this.getContext(),loggerFactory:this.loggerFactory,dragAndDropService:this.dragAndDropService});var e=this.localeService.getLocaleTextFunc(),r=e("valueColumnsEmptyMessage","Drag here to aggregate"),n=e("values","Values");t.prototype.init.call(this,{dragAndDropIcon:m.ICON_AGGREGATE,icon:u.createIconNoSpan("valuePanel",this.gridOptionsService,null),emptyMessage:r,title:n}),this.addManagedListener(this.eventService,l.EVENT_COLUMN_VALUE_CHANGED,this.refreshGui.bind(this))},e.prototype.getAriaLabel=function(){return this.localeService.getLocaleTextFunc()("ariaValuesDropZonePanelLabel","Values")},e.prototype.getTooltipParams=function(){var e=t.prototype.getTooltipParams.call(this);return e.location="valueColumnsList",e},e.prototype.getIconName=function(){return this.isPotentialDndColumns()?m.ICON_AGGREGATE:m.ICON_NOT_ALLOWED},e.prototype.isColumnDroppable=function(t){return!(this.gridOptionsService.is("functionsReadOnly")||!t.isPrimary())&&(t.isAllowValue()&&!t.isValueActive())},e.prototype.updateColumns=function(t){if(this.gridOptionsService.is("functionsPassive")){var e={type:l.EVENT_COLUMN_VALUE_CHANGE_REQUEST,columns:t};this.eventService.dispatchEvent(e)}else this.columnModel.setValueColumns(t,"toolPanelUi")},e.prototype.getExistingColumns=function(){return this.columnModel.getValueColumns()},jn([n("columnModel")],e.prototype,"columnModel",void 0),jn([n("loggerFactory")],e.prototype,"loggerFactory",void 0),jn([n("dragAndDropService")],e.prototype,"dragAndDropService",void 0),jn([i],e.prototype,"passBeansUp",null),e}(mn),Bn=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Un=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},Hn=function(t){function e(){return t.call(this,e.TEMPLATE)||this}return Bn(e,t),e.prototype.init=function(t,e,r){this.allowDragging=t,this.params=e,this.eventType=r,this.primaryColsHeaderPanel.init(this.params);var n=this.params.suppressColumnFilter,o=this.params.suppressColumnSelectAll;this.params.suppressColumnExpandAll&&n&&o&&this.primaryColsHeaderPanel.setDisplayed(!1),this.addManagedListener(this.primaryColsListPanel,"groupExpanded",this.onGroupExpanded.bind(this)),this.addManagedListener(this.primaryColsListPanel,"selectionChanged",this.onSelectionChange.bind(this)),this.primaryColsListPanel.init(this.params,this.allowDragging,this.eventType),this.addManagedListener(this.primaryColsHeaderPanel,"expandAll",this.onExpandAll.bind(this)),this.addManagedListener(this.primaryColsHeaderPanel,"collapseAll",this.onCollapseAll.bind(this)),this.addManagedListener(this.primaryColsHeaderPanel,"selectAll",this.onSelectAll.bind(this)),this.addManagedListener(this.primaryColsHeaderPanel,"unselectAll",this.onUnselectAll.bind(this)),this.addManagedListener(this.primaryColsHeaderPanel,"filterChanged",this.onFilterChanged.bind(this)),this.positionableFeature=new G(this.getGui(),{minHeight:100}),this.createManagedBean(this.positionableFeature)},e.prototype.toggleResizable=function(t){this.positionableFeature.setResizable(!!t&&{bottom:!0})},e.prototype.onExpandAll=function(){this.primaryColsListPanel.doSetExpandedAll(!0)},e.prototype.onCollapseAll=function(){this.primaryColsListPanel.doSetExpandedAll(!1)},e.prototype.expandGroups=function(t){this.primaryColsListPanel.setGroupsExpanded(!0,t)},e.prototype.collapseGroups=function(t){this.primaryColsListPanel.setGroupsExpanded(!1,t)},e.prototype.setColumnLayout=function(t){this.primaryColsListPanel.setColumnLayout(t)},e.prototype.onFilterChanged=function(t){this.primaryColsListPanel.setFilterText(t.filterText)},e.prototype.syncLayoutWithGrid=function(){this.primaryColsListPanel.onColumnsChanged()},e.prototype.onSelectAll=function(){this.primaryColsListPanel.doSetSelectedAll(!0)},e.prototype.onUnselectAll=function(){this.primaryColsListPanel.doSetSelectedAll(!1)},e.prototype.onGroupExpanded=function(t){this.primaryColsHeaderPanel.setExpandState(t.state)},e.prototype.onSelectionChange=function(t){this.primaryColsHeaderPanel.setSelectionState(t.state)},e.TEMPLATE='<div class="ag-column-select">\n            <ag-primary-cols-header ref="primaryColsHeaderPanel"></ag-primary-cols-header>\n            <ag-primary-cols-list ref="primaryColsListPanel"></ag-primary-cols-list>\n        </div>',Un([o("primaryColsHeaderPanel")],e.prototype,"primaryColsHeaderPanel",void 0),Un([o("primaryColsListPanel")],e.prototype,"primaryColsListPanel",void 0),e}(a),zn=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Wn=function(){return(Wn=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},Kn=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},Xn=function(t){function e(){var r=t.call(this,e.TEMPLATE)||this;return r.initialised=!1,r.childDestroyFuncs=[],r}return zn(e,t),e.prototype.setVisible=function(e){t.prototype.setDisplayed.call(this,e),e&&!this.initialised&&this.init(this.params)},e.prototype.init=function(t){var e=this,r={suppressColumnMove:!1,suppressColumnSelectAll:!1,suppressColumnFilter:!1,suppressColumnExpandAll:!1,contractColumnSelection:!1,suppressPivotMode:!1,suppressRowGroups:!1,suppressValues:!1,suppressPivots:!1,suppressSyncLayoutWithGrid:!1,api:this.gridApi,columnApi:this.columnApi};if(this.params=Wn(Wn(Wn({},r),t),{context:this.gridOptionsService.context}),this.isRowGroupingModuleLoaded()&&!this.params.suppressPivotMode&&(this.pivotModePanel=this.createBean(new kr),this.childDestroyFuncs.push((function(){return e.destroyBean(e.pivotModePanel)})),this.appendChild(this.pivotModePanel)),this.primaryColsPanel=this.createBean(new Hn),this.childDestroyFuncs.push((function(){return e.destroyBean(e.primaryColsPanel)})),this.primaryColsPanel.init(!0,this.params,"toolPanelUi"),this.primaryColsPanel.addCssClass("ag-column-panel-column-select"),this.appendChild(this.primaryColsPanel),this.isRowGroupingModuleLoaded()){this.params.suppressRowGroups||(this.rowGroupDropZonePanel=this.createBean(new Sn(!1)),this.childDestroyFuncs.push((function(){return e.destroyBean(e.rowGroupDropZonePanel)})),this.appendChild(this.rowGroupDropZonePanel)),this.params.suppressValues||(this.valuesDropZonePanel=this.createBean(new Vn(!1)),this.childDestroyFuncs.push((function(){return e.destroyBean(e.valuesDropZonePanel)})),this.appendChild(this.valuesDropZonePanel)),this.params.suppressPivots||(this.pivotDropZonePanel=this.createBean(new On(!1)),this.childDestroyFuncs.push((function(){return e.destroyBean(e.pivotDropZonePanel)})),this.appendChild(this.pivotDropZonePanel)),this.setLastVisible();var n=this.addManagedListener(this.eventService,l.EVENT_COLUMN_PIVOT_MODE_CHANGED,(function(){e.resetChildrenHeight(),e.setLastVisible()}));this.childDestroyFuncs.push((function(){return n()}))}this.initialised=!0},e.prototype.setPivotModeSectionVisible=function(t){var e=this;this.isRowGroupingModuleLoaded()&&(this.pivotModePanel?this.pivotModePanel.setDisplayed(t):t&&(this.pivotModePanel=this.createBean(new kr),this.getGui().insertBefore(this.pivotModePanel.getGui(),this.getGui().firstChild),this.childDestroyFuncs.push((function(){return e.destroyBean(e.pivotModePanel)}))),this.setLastVisible())},e.prototype.setRowGroupsSectionVisible=function(t){this.isRowGroupingModuleLoaded()&&(this.rowGroupDropZonePanel?this.rowGroupDropZonePanel.setDisplayed(t):t&&(this.rowGroupDropZonePanel=this.createManagedBean(new Sn(!1)),this.appendChild(this.rowGroupDropZonePanel)),this.setLastVisible())},e.prototype.setValuesSectionVisible=function(t){this.isRowGroupingModuleLoaded()&&(this.valuesDropZonePanel?this.valuesDropZonePanel.setDisplayed(t):t&&(this.valuesDropZonePanel=this.createManagedBean(new Vn(!1)),this.appendChild(this.valuesDropZonePanel)),this.setLastVisible())},e.prototype.setPivotSectionVisible=function(t){this.isRowGroupingModuleLoaded()&&(this.pivotDropZonePanel?this.pivotDropZonePanel.setDisplayed(t):t&&(this.pivotDropZonePanel=this.createManagedBean(new On(!1)),this.appendChild(this.pivotDropZonePanel),this.pivotDropZonePanel.setDisplayed(t)),this.setLastVisible())},e.prototype.setResizers=function(){[this.primaryColsPanel,this.rowGroupDropZonePanel,this.valuesDropZonePanel,this.pivotDropZonePanel].forEach((function(t){if(t){var e=t.getGui();t.toggleResizable(!e.classList.contains("ag-last-column-drop")&&!e.classList.contains("ag-hidden"))}}))},e.prototype.setLastVisible=function(){var t=this.getGui();Array.prototype.slice.call(t.querySelectorAll(".ag-column-drop")).forEach((function(t){return t.classList.remove("ag-last-column-drop")}));var e=t.querySelectorAll(".ag-column-drop:not(.ag-hidden)"),r=u.last(e);r&&r.classList.add("ag-last-column-drop"),this.setResizers()},e.prototype.resetChildrenHeight=function(){for(var t=this.getGui().children,e=0;e<t.length;e++){var r=t[e];r.style.removeProperty("height"),r.style.removeProperty("flex")}},e.prototype.isRowGroupingModuleLoaded=function(){return B.__assertRegistered(s.RowGroupingModule,"Row Grouping",this.context.getGridId())},e.prototype.expandColumnGroups=function(t){this.primaryColsPanel.expandGroups(t)},e.prototype.collapseColumnGroups=function(t){this.primaryColsPanel.collapseGroups(t)},e.prototype.setColumnLayout=function(t){this.primaryColsPanel.setColumnLayout(t)},e.prototype.syncLayoutWithGrid=function(){this.primaryColsPanel.syncLayoutWithGrid()},e.prototype.destroyChildren=function(){this.childDestroyFuncs.forEach((function(t){return t()})),this.childDestroyFuncs.length=0,u.clearElement(this.getGui())},e.prototype.refresh=function(){this.destroyChildren(),this.init(this.params)},e.prototype.destroy=function(){this.destroyChildren(),t.prototype.destroy.call(this)},e.TEMPLATE='<div class="ag-column-panel"></div>',Kn([n("gridApi")],e.prototype,"gridApi",void 0),Kn([n("columnApi")],e.prototype,"columnApi",void 0),e}(a),Yn=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),qn=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},Zn=function(t){function e(){var e=t.call(this,'<div class="ag-tool-panel-horizontal-resize"></div>')||this;return e.minWidth=100,e.maxWidth=null,e}return Yn(e,t),e.prototype.setElementToResize=function(t){this.elementToResize=t},e.prototype.postConstruct=function(){var t=this.horizontalResizeService.addResizeBar({eResizeBar:this.getGui(),dragStartPixels:1,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this),onResizeEnd:this.onResizeEnd.bind(this)});this.addDestroyFunc(t),this.setInverted(this.gridOptionsService.is("enableRtl"))},e.prototype.dispatchResizeEvent=function(t,e,r){var n={type:l.EVENT_TOOL_PANEL_SIZE_CHANGED,width:r,started:t,ended:e};this.eventService.dispatchEvent(n)},e.prototype.onResizeStart=function(){this.startingWidth=this.elementToResize.offsetWidth,this.dispatchResizeEvent(!0,!1,this.startingWidth)},e.prototype.onResizeEnd=function(t){return this.onResizing(t,!0)},e.prototype.onResizing=function(t,e){void 0===e&&(e=!1);var r=this.inverted?-1:1,n=Math.max(this.minWidth,Math.floor(this.startingWidth-t*r));null!=this.maxWidth&&(n=Math.min(this.maxWidth,n)),this.elementToResize.style.width=n+"px",this.dispatchResizeEvent(!1,e,n)},e.prototype.setInverted=function(t){this.inverted=t},e.prototype.setMaxWidth=function(t){this.maxWidth=t},e.prototype.setMinWidth=function(t){this.minWidth=null!=t?t:100},qn([n("horizontalResizeService")],e.prototype,"horizontalResizeService",void 0),qn([i],e.prototype,"postConstruct",null),e}(a),Jn=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),$n=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},Qn=function(t){function e(e){var r=t.call(this)||this;return r.toolPanelDef=e,r}return Jn(e,t),e.prototype.getToolPanelId=function(){return this.toolPanelDef.id},e.prototype.postConstruct=function(){var t=this.createTemplate();this.setTemplate(t),this.setLabel(),this.setIcon(),this.addManagedListener(this.eToggleButton,"click",this.onButtonPressed.bind(this)),this.eToggleButton.setAttribute("id","ag-"+this.getCompId()+"-button")},e.prototype.createTemplate=function(){return'<div class="ag-side-button" role="presentation">\n                <button type="button" ref="eToggleButton" tabindex="-1" role="tab" aria-expanded="false" class="ag-button ag-side-button-button">\n                    <div ref="eIconWrapper" class="ag-side-button-icon-wrapper" aria-hidden="true"></div>\n                    <span ref ="eLabel" class="ag-side-button-label"></span>\n                </button>\n            </div>'},e.prototype.setLabel=function(){var t=this.localeService.getLocaleTextFunc(),e=this.toolPanelDef,r=t(e.labelKey,e.labelDefault);this.eLabel.innerText=r},e.prototype.setIcon=function(){this.eIconWrapper.insertAdjacentElement("afterbegin",u.createIconNoSpan(this.toolPanelDef.iconKey,this.gridOptionsService))},e.prototype.onButtonPressed=function(){this.dispatchEvent({type:e.EVENT_TOGGLE_BUTTON_CLICKED})},e.prototype.setSelected=function(t){this.addOrRemoveCssClass("ag-selected",t),u.setAriaExpanded(this.eToggleButton,t)},e.prototype.getButtonElement=function(){return this.eToggleButton},e.EVENT_TOGGLE_BUTTON_CLICKED="toggleButtonClicked",$n([o("eToggleButton")],e.prototype,"eToggleButton",void 0),$n([o("eIconWrapper")],e.prototype,"eIconWrapper",void 0),$n([o("eLabel")],e.prototype,"eLabel",void 0),$n([i],e.prototype,"postConstruct",null),e}(a),to=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),eo=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},ro=function(t){function e(){var r=t.call(this,e.TEMPLATE)||this;return r.buttonComps=[],r}return to(e,t),e.prototype.postConstruct=function(){this.addManagedListener(this.getFocusableElement(),"keydown",this.handleKeyDown.bind(this))},e.prototype.handleKeyDown=function(t){if(t.key===c.TAB&&t.shiftKey){var e=u.last(this.columnModel.getAllDisplayedColumns());this.focusService.focusGridView(e,!0)&&t.preventDefault()}},e.prototype.setActiveButton=function(t){this.buttonComps.forEach((function(e){e.setSelected(t===e.getToolPanelId())}))},e.prototype.addButtonComp=function(t){var r=this,n=this.createBean(new Qn(t));return this.buttonComps.push(n),this.appendChild(n),n.addEventListener(Qn.EVENT_TOGGLE_BUTTON_CLICKED,(function(){r.dispatchEvent({type:e.EVENT_SIDE_BAR_BUTTON_CLICKED,toolPanelId:t.id})})),n},e.prototype.clearButtons=function(){this.buttonComps=this.destroyBeans(this.buttonComps),u.clearElement(this.getGui())},e.EVENT_SIDE_BAR_BUTTON_CLICKED="sideBarButtonClicked",e.TEMPLATE='<div class="ag-side-buttons" role="tablist"></div>',eo([n("focusService")],e.prototype,"focusService",void 0),eo([n("columnModel")],e.prototype,"columnModel",void 0),eo([i],e.prototype,"postConstruct",null),eo([F],e.prototype,"clearButtons",null),e}(a),no=function(){function t(){}return t.parse=function(e){if(e){if(!0===e)return{toolPanels:[t.DEFAULT_COLUMN_COMP,t.DEFAULT_FILTER_COMP],defaultToolPanel:"columns"};if("string"==typeof e)return t.parse([e]);if(Array.isArray(e)){var r=[];if(e.forEach((function(e){var n=t.DEFAULT_BY_KEY[e];n?r.push(n):console.warn("AG Grid: the key "+e+" is not a valid key for specifying a tool panel, valid keys are: "+Object.keys(t.DEFAULT_BY_KEY).join(","))})),0===r.length)return;return{toolPanels:r,defaultToolPanel:r[0].id}}return{toolPanels:t.parseComponents(e.toolPanels),defaultToolPanel:e.defaultToolPanel,hiddenByDefault:e.hiddenByDefault,position:e.position}}},t.parseComponents=function(e){var r=[];return e?(e.forEach((function(e){var n=null;if("string"==typeof e){var o=t.DEFAULT_BY_KEY[e];if(!o)return void console.warn("AG Grid: the key "+e+" is not a valid key for specifying a tool panel, valid keys are: "+Object.keys(t.DEFAULT_BY_KEY).join(","));n=o}else n=e;r.push(n)})),r):r},t.DEFAULT_COLUMN_COMP={id:"columns",labelDefault:"Columns",labelKey:"columns",iconKey:"columns",toolPanel:"agColumnsToolPanel"},t.DEFAULT_FILTER_COMP={id:"filters",labelDefault:"Filters",labelKey:"filters",iconKey:"filter",toolPanel:"agFiltersToolPanel"},t.DEFAULT_BY_KEY={columns:t.DEFAULT_COLUMN_COMP,filters:t.DEFAULT_FILTER_COMP},t}(),oo=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),io=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},ao=function(t){function e(){return t.call(this,e.TEMPLATE)||this}return oo(e,t),e.prototype.setupResize=function(){var t=this.getGui(),e=this.resizeBar=this.createManagedBean(new Zn);t.setAttribute("id","ag-"+this.getCompId()),e.setElementToResize(t),this.appendChild(e)},e.prototype.getToolPanelId=function(){return this.toolPanelId},e.prototype.setToolPanelDef=function(t){var e=t.id,r=t.minWidth,n=t.maxWidth,o=t.width;this.toolPanelId=e,this.width=o;var i=this.userComponentFactory.getToolPanelCompDetails(t,{}).newAgStackInstance();null!=i?(i.then(this.setToolPanelComponent.bind(this)),null!=r&&this.resizeBar.setMinWidth(r),null!=n&&this.resizeBar.setMaxWidth(n)):console.warn("AG Grid: error processing tool panel component "+e+". You need to specify 'toolPanel'")},e.prototype.setToolPanelComponent=function(t){var e=this;this.toolPanelCompInstance=t,this.appendChild(t.getGui()),this.addDestroyFunc((function(){e.destroyBean(t)})),this.width&&(this.getGui().style.width=this.width+"px")},e.prototype.getToolPanelInstance=function(){return this.toolPanelCompInstance},e.prototype.setResizerSizerSide=function(t){var e="left"===t,r=this.gridOptionsService.is("enableRtl")?e:!e;this.resizeBar.setInverted(r)},e.prototype.refresh=function(){this.toolPanelCompInstance.refresh()},e.TEMPLATE='<div class="ag-tool-panel-wrapper" role="tabpanel"/>',io([n("userComponentFactory")],e.prototype,"userComponentFactory",void 0),io([i],e.prototype,"setupResize",null),e}(a),so=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),lo=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},uo=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},co=function(t){function e(){var r=t.call(this,e.TEMPLATE)||this;return r.toolPanelWrappers=[],r}return so(e,t),e.prototype.postConstruct=function(){var t=this;this.sideBarButtonsComp.addEventListener(ro.EVENT_SIDE_BAR_BUTTON_CLICKED,this.onToolPanelButtonClicked.bind(this)),this.setSideBarDef(),this.addManagedPropertyListener("sideBar",(function(){t.clearDownUi(),t.setSideBarDef()})),this.gridApi.registerSideBarComp(this),this.createManagedBean(new N(this.getFocusableElement(),{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this)}))},e.prototype.onTabKeyDown=function(t){if(!t.defaultPrevented){var e=this.focusService,r=this.sideBarButtonsComp,n=this.getGui(),o=r.getGui(),i=this.gridOptionsService.getDocument().activeElement,a=n.querySelector(".ag-tool-panel-wrapper:not(.ag-hidden)"),s=t.target;if(a)if(o.contains(i))e.focusInto(a,t.shiftKey)&&t.preventDefault();else if(t.shiftKey){var l=null;a.contains(i)?l=this.focusService.findNextFocusableElement(a,void 0,!0):e.isTargetUnderManagedComponent(a,s)&&t.shiftKey&&(l=this.focusService.findFocusableElementBeforeTabGuard(a,s)),l||(l=o.querySelector(".ag-selected button")),l&&(t.preventDefault(),l.focus())}}},e.prototype.handleKeyDown=function(t){var e=this.gridOptionsService.getDocument();if(this.sideBarButtonsComp.getGui().contains(e.activeElement)){var r=this.sideBarButtonsComp.getGui(),n=Array.prototype.slice.call(r.querySelectorAll(".ag-side-button")),o=e.activeElement,i=n.findIndex((function(t){return t.contains(o)})),a=null;switch(t.key){case c.LEFT:case c.UP:a=Math.max(0,i-1);break;case c.RIGHT:case c.DOWN:a=Math.min(i+1,n.length-1)}if(null!==a){var s=n[a].querySelector("button");s&&(s.focus(),t.preventDefault())}}},e.prototype.onToolPanelButtonClicked=function(t){var e=t.toolPanelId;this.openedItem()===e?this.openToolPanel(void 0,"sideBarButtonClicked"):this.openToolPanel(e,"sideBarButtonClicked")},e.prototype.clearDownUi=function(){this.sideBarButtonsComp.clearButtons(),this.destroyToolPanelWrappers()},e.prototype.setSideBarDef=function(){this.setDisplayed(!1);var t=this.gridOptionsService.get("sideBar");if(this.sideBar=no.parse(t),this.sideBar&&this.sideBar.toolPanels){var e=this.sideBar.toolPanels;if(this.createToolPanelsAndSideButtons(e),!this.toolPanelWrappers.length)return;var r=!this.sideBar.hiddenByDefault;this.setDisplayed(r),this.setSideBarPosition(this.sideBar.position),this.sideBar.hiddenByDefault||this.openToolPanel(this.sideBar.defaultToolPanel,"sideBarInitializing")}},e.prototype.getDef=function(){return this.sideBar},e.prototype.setSideBarPosition=function(t){t||(t="right");var e="left"===t,r=e?"right":"left";return this.addOrRemoveCssClass("ag-side-bar-left",e),this.addOrRemoveCssClass("ag-side-bar-right",!e),this.toolPanelWrappers.forEach((function(t){t.setResizerSizerSide(r)})),this},e.prototype.createToolPanelsAndSideButtons=function(t){var e,r;try{for(var n=uo(t),o=n.next();!o.done;o=n.next()){var i=o.value;this.createToolPanelAndSideButton(i)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}},e.prototype.validateDef=function(t){if(null==t.id)return console.warn("AG Grid: please review all your toolPanel components, it seems like at least one of them doesn't have an id"),!1;if("agColumnsToolPanel"===t.toolPanel&&!B.__assertRegistered(s.ColumnsToolPanelModule,"Column Tool Panel",this.context.getGridId()))return!1;if("agFiltersToolPanel"===t.toolPanel){if(!B.__assertRegistered(s.FiltersToolPanelModule,"Filters Tool Panel",this.context.getGridId()))return!1;if(this.filterManager.isAdvancedFilterEnabled())return u.doOnce((function(){console.warn("AG Grid: Advanced Filter does not work with Filters Tool Panel. Filters Tool Panel has been disabled.")}),"advancedFilterToolPanel"),!1}return!0},e.prototype.createToolPanelAndSideButton=function(t){if(this.validateDef(t)){var e=this.sideBarButtonsComp.addButtonComp(t),r=this.getContext().createBean(new ao);r.setToolPanelDef(t),r.setDisplayed(!1);var n=r.getGui();this.appendChild(n),this.toolPanelWrappers.push(r),u.setAriaControls(e.getButtonElement(),n)}},e.prototype.refresh=function(){this.toolPanelWrappers.forEach((function(t){return t.refresh()}))},e.prototype.openToolPanel=function(t,e){void 0===e&&(e="api");var r=this.openedItem();r!==t&&(this.toolPanelWrappers.forEach((function(e){var r=t===e.getToolPanelId();e.setDisplayed(r)})),r!==this.openedItem()&&(this.sideBarButtonsComp.setActiveButton(t),this.raiseToolPanelVisibleEvent(t,null!=r?r:void 0,e)))},e.prototype.getToolPanelInstance=function(t){var e=this.toolPanelWrappers.filter((function(e){return e.getToolPanelId()===t}))[0];if(e)return e.getToolPanelInstance();console.warn("AG Grid: unable to lookup Tool Panel as invalid key supplied: "+t)},e.prototype.raiseToolPanelVisibleEvent=function(t,e,r){var n=!!t&&!!e;if(e){var o={type:l.EVENT_TOOL_PANEL_VISIBLE_CHANGED,source:r,key:e,visible:!1,switchingToolPanel:n};this.eventService.dispatchEvent(o)}if(t){var i={type:l.EVENT_TOOL_PANEL_VISIBLE_CHANGED,source:r,key:t,visible:!0,switchingToolPanel:n};this.eventService.dispatchEvent(i)}},e.prototype.close=function(t){void 0===t&&(t="api"),this.openToolPanel(void 0,t)},e.prototype.isToolPanelShowing=function(){return!!this.openedItem()},e.prototype.openedItem=function(){var t=null;return this.toolPanelWrappers.forEach((function(e){e.isDisplayed()&&(t=e.getToolPanelId())})),t},e.prototype.destroyToolPanelWrappers=function(){var t=this;this.toolPanelWrappers.forEach((function(e){u.removeFromParent(e.getGui()),t.destroyBean(e)})),this.toolPanelWrappers.length=0},e.prototype.destroy=function(){this.destroyToolPanelWrappers(),t.prototype.destroy.call(this)},e.TEMPLATE='<div class="ag-side-bar ag-unselectable">\n            <ag-side-bar-buttons ref="sideBarButtons"></ag-side-bar-buttons>\n        </div>',lo([n("gridApi")],e.prototype,"gridApi",void 0),lo([n("focusService")],e.prototype,"focusService",void 0),lo([n("filterManager")],e.prototype,"filterManager",void 0),lo([o("sideBarButtons")],e.prototype,"sideBarButtonsComp",void 0),lo([i],e.prototype,"postConstruct",null),e}(a),po=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ho=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},fo=function(t){function r(){var e=null!==t&&t.apply(this,arguments)||this;return e.isColGroupDef=function(t){return t&&void 0!==t.children},e.getId=function(t){return e.isColGroupDef(t)?t.groupId:t.colId},e}return po(r,t),r.prototype.createColumnTree=function(t){var e=this,r=[],n=function(t,o){if(e.isColGroupDef(t)){var i=t,a=void 0!==i.groupId?i.groupId:i.headerName,s=new A(i,a,!1,o),l=[];return i.children.forEach((function(t){var e=n(t,o+1);e&&l.push(e)})),s.setChildren(l),s}var u=t,c=u.colId?u.colId:u.field,p=e.columnModel.getPrimaryColumn(c);return p||r.push(u),p},o=[];return t.forEach((function(t){var e=n(t,0);e&&o.push(e)})),r.length>0&&console.warn("AG Grid: unable to find grid columns for the supplied colDef(s):",r),o},r.prototype.syncLayoutWithGrid=function(t){var e=this.getLeafPathTrees();t(this.mergeLeafPathTrees(e))},r.prototype.getLeafPathTrees=function(){var t=function(e,r){var n;if(e instanceof A)if(e.isPadding())n=r;else{var o=Object.assign({},e.getColGroupDef());o.groupId=e.getGroupId(),o.children=[r],n=o}else{var i=Object.assign({},e.getColDef());i.colId=e.getColId(),n=i}var a=e.getOriginalParent();return a?t(a,n):n};return this.columnModel.getAllGridColumns().filter((function(t){var e=t.getColDef();return t.isPrimary()&&!e.showRowGroup})).map((function(e){return t(e,e.getColDef())}))},r.prototype.mergeLeafPathTrees=function(t){for(var e,r,n=this,o=function(t,e){if(!n.isColGroupDef(e))return t;var r=t,i=e;if(i.children&&i.groupId&&n.addChildrenToGroup(r,i.groupId,i.children[0]))return r;return i.children.forEach((function(t){return o(r,t)})),r},i=[],a=1;a<=t.length;a++){var s=t[a-1],l=t[a];e=s,r=l,n.isColGroupDef(e)&&n.isColGroupDef(r)&&n.getId(e)===n.getId(r)?t[a]=o(s,l):i.push(s)}return i},r.prototype.addChildrenToGroup=function(t,e,r){var n=this;if(!this.isColGroupDef(t))return!0;var o=t,i=r;if(function(t,e){var r=t.children.map(n.getId),o=u.includes(r,n.getId(e)),i=u.last(t.children),a=i&&n.getId(i)!==n.getId(e);return o&&a}(o,i))return o.children.push(i),!0;if(o.groupId===e){var a=o.children.map(this.getId);if(!u.includes(a,this.getId(i)))return o.children.push(i),!0}return o.children.forEach((function(t){return n.addChildrenToGroup(t,e,r)})),!1},ho([n("columnModel")],r.prototype,"columnModel",void 0),r=ho([e("toolPanelColDefService")],r)}(r),vo={version:"30.2.0",moduleName:s.SideBarModule,beans:[fo],agStackComponents:[{componentName:"AgHorizontalResize",componentClass:Zn},{componentName:"AgSideBar",componentClass:co},{componentName:"AgSideBarButtons",componentClass:ro}],dependantModules:[Ft]},yo=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},go=function(){function t(){}return t.prototype.selectAllChildren=function(t,e,r){var n=this.extractAllLeafColumns(t);this.setAllColumns(n,e,r)},t.prototype.setColumn=function(t,e,r){this.setAllColumns([t],e,r)},t.prototype.setAllColumns=function(t,e,r){this.columnModel.isPivotMode()?this.setAllPivot(t,e,r):this.setAllVisible(t,e,r)},t.prototype.extractAllLeafColumns=function(t){var e=[],r=function(t){t.forEach((function(t){t.isPassesFilter()&&(t.isGroup()?r(t.getChildren()):e.push(t.getColumn()))}))};return r(t),e},t.prototype.setAllVisible=function(t,e,r){var n=[];t.forEach((function(t){t.getColDef().lockVisible||t.isVisible()!=e&&n.push({colId:t.getId(),hide:!e})})),n.length>0&&this.columnModel.applyColumnState({state:n},r)},t.prototype.setAllPivot=function(t,e,r){this.gridOptionsService.is("functionsPassive")?this.setAllPivotPassive(t,e):this.setAllPivotActive(t,e,r)},t.prototype.setAllPivotPassive=function(t,e){var r=this.columnModel.getPivotColumns().slice(),n=this.columnModel.getValueColumns().slice(),o=this.columnModel.getRowGroupColumns().slice(),i=!1,a=!1,s=!1,c=e?function(t){t.isAnyFunctionActive()||(t.isAllowValue()?(n.push(t),a=!0):t.isAllowRowGroup()?(o.push(t),i=!0):t.isAllowPivot()&&(r.push(t),s=!0))}:function(t){t.isAnyFunctionActive()&&(r.indexOf(t)>=0&&(u.removeFromArray(r,t),i=!0),n.indexOf(t)>=0&&(u.removeFromArray(n,t),a=!0),o.indexOf(t)>=0&&(u.removeFromArray(o,t),s=!0))};if(t.forEach(c),i){var p={type:l.EVENT_COLUMN_PIVOT_CHANGE_REQUEST,columns:r};this.eventService.dispatchEvent(p)}if(s){var d={type:l.EVENT_COLUMN_ROW_GROUP_CHANGE_REQUEST,columns:o};this.eventService.dispatchEvent(d)}if(a){var h={type:l.EVENT_COLUMN_VALUE_CHANGE_REQUEST,columns:o};this.eventService.dispatchEvent(h)}},t.prototype.setAllPivotActive=function(t,e,r){var n=this,o=[],i=e?function(t){if(!t.isAnyFunctionActive())if(t.isAllowValue()){var e="string"==typeof t.getAggFunc()?t.getAggFunc():n.aggFuncService.getDefaultAggFunc(t);o.push({colId:t.getId(),aggFunc:e})}else t.isAllowRowGroup()?o.push({colId:t.getId(),rowGroup:!0}):t.isAllowPivot()&&o.push({colId:t.getId(),pivot:!0})}:function(t){(t.isPivotActive()||t.isRowGroupActive()||t.isValueActive())&&o.push({colId:t.getId(),pivot:!1,rowGroup:!1,aggFunc:null})};t.forEach(i),o.length>0&&this.columnModel.applyColumnState({state:o},r)},t.prototype.updateColumns=function(t){var e=this,r=t.columns,n=t.visibleState,o=t.pivotState,i=t.eventType,a=r.map((function(t){var r=t.getColId();if(e.columnModel.isPivotMode()){var i=null==o?void 0:o[r];return{colId:r,pivot:null==i?void 0:i.pivot,rowGroup:null==i?void 0:i.rowGroup,aggFunc:null==i?void 0:i.aggFunc}}return{colId:r,hide:!(null==n?void 0:n[r])}}));this.columnModel.applyColumnState({state:a},i)},t.prototype.createPivotState=function(t){return{pivot:t.isPivotActive(),rowGroup:t.isRowGroupActive(),aggFunc:t.isValueActive()?t.getAggFunc():void 0}},yo([n("aggFuncService")],t.prototype,"aggFuncService",void 0),yo([n("columnModel")],t.prototype,"columnModel",void 0),yo([n("gridOptionsService")],t.prototype,"gridOptionsService",void 0),yo([n("eventService")],t.prototype,"eventService",void 0),t=yo([e("modelItemUtils")],t)}(),mo={version:"30.2.0",moduleName:s.ColumnsToolPanelModule,beans:[go],agStackComponents:[{componentName:"AgPrimaryColsHeader",componentClass:cr},{componentName:"AgPrimaryColsList",componentClass:Mr},{componentName:"AgPrimaryCols",componentClass:Hn}],userComponents:[{componentName:"agColumnsToolPanel",componentClass:Xn}],dependantModules:[Ft,Nn,vo]},bo=function(){return{name:"Workbook",properties:{prefixedAttributes:[{prefix:"xmlns:",map:{o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",html:"http://www.w3.org/TR/REC-html40"}}],rawMap:{xmlns:"urn:schemas-microsoft-com:office:spreadsheet"}}}},Co=function(){return{name:"ExcelWorkbook",properties:{rawMap:{xmlns:"urn:schemas-microsoft-com:office:excel"}},children:[{name:"WindowHeight",textNode:"8130"},{name:"WindowWidth",textNode:"15135"},{name:"WindowHeight",textNode:"8130"},{name:"WindowTopX",textNode:"120"},{name:"WindowTopY",textNode:"45"},{name:"ProtectStructure",textNode:"False"},{name:"ProtectWindow",textNode:"False"}]}},So=function(t){return{name:"Column",properties:{prefixedAttributes:[{prefix:"ss:",map:{Width:t.width}}]}}},wo=function(t){var e=t.mergeAcross,r=t.styleId,n=t.data,o={};return e&&(o.MergeAcross=e),r&&(o.StyleID=r),{name:"Cell",properties:{prefixedAttributes:[{prefix:"ss:",map:o}]},children:[{name:"Data",properties:{prefixedAttributes:[{prefix:"ss:",map:{Type:null==n?void 0:n.type}}]},textNode:null==n?void 0:n.value}]}},xo=function(t){return{name:"Row",children:t.cells.map((function(t){return wo(t)}))}},Oo=function(t){var e=t.table,r=t.name,n=e.columns,o=e.rows,i=n.map((function(t){return So(t)})),a=o.map((function(t){return xo(t)}));return{name:"Worksheet",children:[{name:"Table",children:i.concat(a)}],properties:{prefixedAttributes:[{prefix:"ss:",map:{Name:r}}]}}},Eo=function(){return{name:"DocumentProperties",properties:{rawMap:{xmlns:"urn:schemas-microsoft-com:office:office"}},children:[{name:"Version",textNode:"12.00"}]}},To={getTemplate:function(t){var e=t.alignment;return{name:"Alignment",properties:{prefixedAttributes:[{prefix:"ss:",map:{Vertical:e.vertical,Horizontal:e.horizontal,Indent:e.indent,ReadingOrder:e.readingOrder,Rotate:e.rotate,ShrinkToFit:e.shrinkToFit,VerticalText:e.verticalText,WrapText:e.wrapText}}]}}}},Po={getTemplate:function(t){var e=t.borders;return{name:"Borders",children:[e.borderBottom,e.borderLeft,e.borderRight,e.borderTop].map((function(t,e){return{name:"Border",properties:{prefixedAttributes:[{prefix:"ss:",map:{Position:0==e?"Bottom":1==e?"Left":2==e?"Right":"Top",LineStyle:t.lineStyle,Weight:t.weight,Color:t.color}}]}}}))}}},Do={getTemplate:function(t){var e=t.font;return{name:"Font",properties:{prefixedAttributes:[{prefix:"ss:",map:{Bold:e.bold,FontName:e.fontName,Italic:e.italic,Color:e.color,Outline:e.outline,Shadow:e.shadow,Size:e.size,StrikeThrough:e.strikeThrough,Underline:e.underline,VerticalAlign:e.verticalAlign}},{prefix:"x:",map:{CharSet:e.charSet,Family:e.family}}]}}}},Ao={getTemplate:function(t){var e=t.interior;return{name:"Interior",properties:{prefixedAttributes:[{prefix:"ss:",map:{Color:e.color,Pattern:e.pattern,PatternColor:e.patternColor}}]}}}},Mo={getTemplate:function(t){return{name:"Protection",properties:{prefixedAttributes:[{prefix:"ss:",map:{Protected:t.protection.protected,HideFormula:t.protection.hideFormula}}]}}}},_o={getTemplate:function(t){return{name:"NumberFormat",properties:{prefixedAttributes:[{prefix:"ss:",map:{Format:t.numberFormat.format}}]}}}},Ro=function(t){var e=t.id,r=t.name;return{name:"Style",properties:{prefixedAttributes:[{prefix:"ss:",map:{ID:e,Name:r||e}}]}}},ko=function(){function t(){}return t.createExcel=function(t,e){var r=this.excelXmlHeader(),n=Eo(),o=Co(),i=this.workbook(n,o,t,e);return""+r+H.createXml(i,(function(t){return t?"1":"0"}))},t.workbook=function(t,e,r,n){var o=[t,e,this.stylesXmlElement(r)].concat(Oo(n));return Object.assign({},bo(),{children:o})},t.excelXmlHeader=function(){return'<?xml version="1.0" ?>\n        <?mso-application progid="Excel.Sheet" ?>\n        '},t.stylesXmlElement=function(t){var e=this;return{name:"Styles",children:t?t.map((function(t){return e.styleXmlElement(t)})):[]}},t.styleXmlElement=function(t){var e=u.compose(this.addProperty("alignment",t),this.addProperty("borders",t),this.addProperty("font",t),this.addProperty("interior",t),this.addProperty("protection",t),this.addProperty("numberFormat",t))([]);return Object.assign({},Ro(t),{children:e})},t.addProperty=function(t,e){return function(r){if(!e[t])return r;var n={alignment:To,borders:Po,font:Do,interior:Ao,numberFormat:_o,protection:Mo};return r.concat(n[t].getTemplate(e))}},t.factoryMode=U.SINGLE_SHEET,t}(),Fo={0:1,"0.00":2,"#,##0":3,"#,##0.00":4,"0%":9,"0.00%":10,"0.00E+00":11,"# ?/?":12,"# ??/??":13,"mm-dd-yy":14,"d-mmm-yy":15,"d-mmm":16,"mmm-yy":17,"h:mm AM/PM":18,"h:mm:ss AM/PM":19,"h:mm":20,"h:mm:ss":21,"m/d/yy h:mm":22,"#,##0 ;(#,##0)":37,"#,##0 ;[Red](#,##0)":38,"#,##0.00;(#,##0.00)":39,"#,##0.00;[Red](#,##0.00)":40,"mm:ss":45,"[h]:mm:ss":46,"mmss.0":47,"##0.0E+0":48,"@":49},Io=function(t){return Math.ceil(9525*t)},Lo=function(t,e){if(e){var r,n;if("number"==typeof e)r=e;else r=e({rowIndex:t});return n=r,Math.round(72*n/96)}},No=function(t){return""+H.createHeader({encoding:"UTF-8",standalone:"yes"})+H.createXml(t)},Go=function(t){var e=String.fromCharCode,r=Math.floor(t/26),n=t%26;return r&&26!==t?n?r<26?e(65+r-1)+e(65+n-1):Go(r)+e(65+n-1):Go(r-1)+"Z":e(65+t-1)},jo=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Vo=function(){return(Vo=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},Bo=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},Uo=function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t},Ho=function(t){function e(e){var r=t.call(this,e)||this;return r.mixedStyles={},r.mixedStyleCounter=0,r.rows=[],r.config=Object.assign({},e),r.stylesByIds={},r.config.baseExcelStyles.forEach((function(t){r.stylesByIds[t.id]=t})),r.excelStyles=Uo([],Bo(r.config.baseExcelStyles)),r}return jo(e,t),e.prototype.addCustomContent=function(t){var e=this;t.forEach((function(t){var r,n=e.rows.length+1;e.config.suppressRowOutline||null==t.outlineLevel||(r=t.outlineLevel);var o={height:Lo(n,t.height||e.config.rowHeight),cells:(t.cells||[]).map((function(t,r){var o,i,a,s=e.addImage(n,e.columnsToExport[r],null===(o=t.data)||void 0===o?void 0:o.value),l=null;t.styleId&&(l="string"==typeof t.styleId?[t.styleId]:t.styleId);var u=e.getStyleId(l);if(s)return e.createCell(u,e.getDataTypeForValue(s.value),null==s.value?"":s.value);var c=null!==(a=null===(i=t.data)||void 0===i?void 0:i.value)&&void 0!==a?a:"",p=e.getDataTypeForValue(c);return t.mergeAcross?e.createMergedCell(u,p,c,t.mergeAcross):e.createCell(u,p,c)})),outlineLevel:r};null!=t.collapsed&&(o.collapsed=t.collapsed),null!=t.hidden&&(o.hidden=t.hidden),e.rows.push(o)}))},e.prototype.onNewHeaderGroupingRow=function(){var t=this,e=[];return this.rows.push({cells:e,height:Lo(this.rows.length+1,this.config.headerRowHeight)}),{onColumn:function(r,n,o,i,a){var s=t.config.styleLinker({rowType:z.HEADER_GROUPING,rowIndex:1,value:"grouping-"+n,columnGroup:r});e.push(Vo(Vo({},t.createMergedCell(t.getStyleId(s),t.getDataTypeForValue("string"),n,i)),{collapsibleRanges:a}))}}},e.prototype.onNewHeaderRow=function(){return this.onNewRow(this.onNewHeaderColumn,this.config.headerRowHeight)},e.prototype.onNewBodyRow=function(t){var e=this.onNewRow(this.onNewBodyColumn,this.config.rowHeight);return t&&this.addRowOutlineIfNecessary(t),e},e.prototype.addRowOutlineIfNecessary=function(t){var e=this.config,r=e.gridOptionsService,n=e.suppressRowOutline,o=e.rowGroupExpandState,i=void 0===o?"expanded":o;if(!r.is("groupHideOpenParents")&&!n&&null!=t.level){var a=t.footer?1:0,s=u.last(this.rows);if(s.outlineLevel=t.level+a,"expanded"!==i){var l="collapsed"===i;if(t.isExpandable()){var c=!l&&t.expanded;s.collapsed=!c}s.hidden=!!t.parent&&-1!==t.parent.level&&(l||this.isAnyParentCollapsed(t.parent))}}},e.prototype.isAnyParentCollapsed=function(t){for(;t&&-1!==t.level;){if(!t.expanded)return!0;t=t.parent}return!1},e.prototype.prepare=function(e){var r=this;t.prototype.prepare.call(this,e),this.columnsToExport=Uo([],Bo(e)),this.cols=e.map((function(t,e){return r.convertColumnToExcel(t,e)}))},e.prototype.parse=function(){for(var t=this.rows.reduce((function(t,e){return Math.max(t,e.cells.length)}),0);this.cols.length<t;)this.cols.push(this.convertColumnToExcel(null,this.cols.length+1));var e={name:this.config.sheetName,table:{columns:this.cols,rows:this.rows}};return this.createExcel(e)},e.prototype.isFormula=function(t){return null!=t&&(this.config.autoConvertFormulas&&t.toString().startsWith("="))},e.prototype.isNumerical=function(t){return"bigint"==typeof t||isFinite(t)&&""!==t&&!isNaN(parseFloat(t))},e.prototype.getStyleById=function(t){return null==t?null:this.stylesByIds[t]||null},e.prototype.convertColumnToExcel=function(t,e){var r=this.config.columnWidth;if(r)return"number"==typeof r?{width:r}:{width:r({column:t,index:e})};if(t){return{width:Math.max(t.getActualWidth(),75)}}return{}},e.prototype.onNewHeaderColumn=function(t,e){var r=this;return function(n,o){var i=r.extractHeaderValue(n),a=r.config.styleLinker({rowType:z.HEADER,rowIndex:t,value:i,column:n});e.push(r.createCell(r.getStyleId(a),r.getDataTypeForValue("string"),i))}},e.prototype.onNewRow=function(t,e){var r=[];return this.rows.push({cells:r,height:Lo(this.rows.length+1,e)}),{onColumn:t.bind(this,this.rows.length,r)()}},e.prototype.onNewBodyColumn=function(t,e){var r=this,n=0;return function(o,i,a){if(n>0)n-=1;else{var s=r.extractRowCellValue(o,i,t,"excel",a),l=s.value,u=s.valueFormatted,c=r.config.styleLinker({rowType:z.BODY,rowIndex:t,value:l,column:o,node:a}),p=r.getStyleId(c),d=o.getColSpan(a),h=r.addImage(t,o,l);h?e.push(r.createCell(p,r.getDataTypeForValue(h.value),null==h.value?"":h.value)):d>1?(n=d-1,e.push(r.createMergedCell(p,r.getDataTypeForValue(l),l,d-1))):e.push(r.createCell(p,r.getDataTypeForValue(l),l,u))}}},e.prototype.getStyleId=function(t){if(!t||!t.length)return null;if(1===t.length)return t[0];var e=t.join("-");return this.mixedStyles[e]||this.addNewMixedStyle(t),this.mixedStyles[e].excelID},e.prototype.addNewMixedStyle=function(t){var e=this;this.mixedStyleCounter+=1;var r="mixedStyle"+this.mixedStyleCounter,n={};t.forEach((function(t){e.excelStyles.forEach((function(e){e.id===t&&u.mergeDeep(n,u.deepCloneObject(e))}))})),n.id=r,n.name=r;var o=t.join("-");this.mixedStyles[o]={excelID:r,key:o,result:n},this.excelStyles.push(n),this.stylesByIds[r]=n},e}(W),zo=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Wo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return zo(e,t),e.prototype.createExcel=function(t){return ko.createExcel(this.excelStyles,t)},e.prototype.getDataTypeForValue=function(t){return this.isNumerical(t)?"Number":"String"},e.prototype.getType=function(t,e,r){if(this.isFormula(r))return"Formula";if(e&&e.dataType)switch(e.dataType.toLocaleLowerCase()){case"string":return"Formula";case"number":return"Number";case"datetime":return"DateTime";case"error":return"Error";case"boolean":return"Boolean";default:console.warn("AG Grid: Unrecognized data type for excel export ["+e.id+".dataType="+e.dataType+"]")}return t},e.prototype.addImage=function(){},e.prototype.createCell=function(t,e,r,n){var o=this.getStyleById(t);!(null==o?void 0:o.dataType)&&"String"===e&&n&&(r=n);var i=this.getType(e,o,r)||e;return{styleId:o?t:void 0,data:{type:i,value:this.getValueTransformed(i,r)}}},e.prototype.getValueTransformed=function(t,e){var r,n=this;switch(t){case"String":return function(t){if(n.config.suppressTextAsCDATA)return u.escapeString(t);var e=new RegExp("]]>","g");return"<![CDATA["+String(t).replace(e,"]]]]><![CDATA[>")+"]]>"}(e);case"Number":return Number(e).valueOf()+"";case"Boolean":return(r=e)&&"0"!==r&&"false"!==r?"1":"0";default:return e}},e.prototype.createMergedCell=function(t,e,r,n){return{styleId:this.getStyleById(t)?t:void 0,data:{type:e,value:r},mergeAcross:n}},e}(Ho),Ko=function(t){var e=(new Date).toJSON();return{name:"cp:coreProperties",properties:{prefixedAttributes:[{prefix:"xmlns:",map:{cp:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",xsi:"http://www.w3.org/2001/XMLSchema-instance"}}]},children:[{name:"dc:creator",textNode:t},{name:"dc:title",textNode:"Workbook"},{name:"dcterms:created",properties:{rawMap:{"xsi:type":"dcterms:W3CDTF"}},textNode:e},{name:"dcterms:modified",properties:{rawMap:{"xsi:type":"dcterms:W3CDTF"}},textNode:e}]}},Xo=function(t){var e=t.name,r=t.ContentType;return{name:e,properties:{rawMap:{Extension:t.Extension,PartName:t.PartName,ContentType:r}}}},Yo=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},qo=function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t},Zo=function(t){var e=new Array(t).fill(void 0).map((function(t,e){return{name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",PartName:"/xl/worksheets/sheet"+(e+1)+".xml"}})),r=Ma.worksheetImages.size,n={};Ma.workbookImageIds.forEach((function(t){n[t.type]=!0}));var o=new Array(r).fill(void 0).map((function(t,e){return{name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.drawing+xml",PartName:"/xl/drawings/drawing"+(e+1)+".xml"}})),i=Object.keys(n).map((function(t){return{name:"Default",ContentType:"image/"+t,Extension:t}}));return{name:"Types",properties:{rawMap:{xmlns:"http://schemas.openxmlformats.org/package/2006/content-types"}},children:qo(qo(qo(qo(qo(qo([],Yo(i)),[{name:"Default",Extension:"rels",ContentType:"application/vnd.openxmlformats-package.relationships+xml"},{name:"Default",ContentType:"application/xml",Extension:"xml"},{name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",PartName:"/xl/workbook.xml"}]),Yo(e)),[{name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.theme+xml",PartName:"/xl/theme/theme1.xml"},{name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",PartName:"/xl/styles.xml"},{name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",PartName:"/xl/sharedStrings.xml"}]),Yo(o)),[{name:"Override",ContentType:"application/vnd.openxmlformats-package.core-properties+xml",PartName:"/docProps/core.xml"}]).map((function(t){return Xo(t)}))}},Jo=function(t,e){return{name:"xdr:"+t,children:[{name:"xdr:col",textNode:e.col.toString()},{name:"xdr:colOff",textNode:e.offsetX.toString()},{name:"xdr:row",textNode:e.row.toString()},{name:"xdr:rowOff",textNode:e.offsetY.toString()}]}},$o=function(t){var e=[{name:"a:ext",properties:{rawMap:{uri:"{FF2B5EF4-FFF2-40B4-BE49-F238E27FC236}"}},children:[{name:"a16:creationId",properties:{rawMap:{id:"{822E6D20-D7BC-2841-A643-D49A6EF008A2}","xmlns:a16":"http://schemas.microsoft.com/office/drawing/2014/main"}}}]}];switch(t.recolor&&t.recolor.toLowerCase()){case"grayscale":case"sepia":case"washout":e.push({name:"a:ext",properties:{rawMap:{uri:"{C183D7F6-B498-43B3-948B-1728B52AA6E4}"}},children:[{name:"adec:decorative",properties:{rawMap:{val:"0","xmlns:adec":"http://schemas.microsoft.com/office/drawing/2017/decorative"}}}]})}return{name:"a:extLst",children:e}},Qo=function(t,e){return{name:"xdr:nvPicPr",children:[{name:"xdr:cNvPr",properties:{rawMap:{id:e,name:t.id,descr:null!=t.altText?t.altText:void 0}},children:[$o(t)]},{name:"xdr:cNvPicPr",properties:{rawMap:{preferRelativeResize:"0"}},children:[{name:"a:picLocks"}]}]}},ti=function(t){if(t.saturation||t.tint){var e=[];return t.saturation&&e.push({name:"a:satMod",properties:{rawMap:{val:1e3*t.saturation}}}),t.tint&&e.push({name:"a:tint",properties:{rawMap:{val:1e3*t.tint}}}),e}},ei=function(t,e){var r,n,o;if(t.transparency){var i=Math.min(Math.max(t.transparency,0),100);r=[{name:"a:alphaModFix",properties:{rawMap:{amt:1e5-Math.round(1e3*i)}}}]}if(t.recolor)switch(r||(r=[]),t.recolor.toLocaleLowerCase()){case"grayscale":r.push({name:"a:grayscl"});break;case"sepia":r.push((o={color:"D9C3A5",tint:50,saturation:180},{name:"a:duotone",children:[{name:"a:prstClr",properties:{rawMap:{val:(n={color:"black"}).color}},children:ti(n)},{name:"a:srgbClr",properties:{rawMap:{val:o.color}},children:ti(o)}]}));break;case"washout":r.push({name:"a:lum",properties:{rawMap:{bright:"70000",contrast:"-70000"}}})}return{name:"xdr:blipFill",children:[{name:"a:blip",properties:{rawMap:{cstate:"print","r:embed":"rId"+e,"xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships"}},children:r},{name:"a:stretch",children:[{name:"a:fillRect"}]}]}},ri=function(t,e){var r={name:"a:xfrm",children:[{name:"a:off",properties:{rawMap:{x:0,y:0}}},{name:"a:ext",properties:{rawMap:{cx:e.width,cy:e.height}}}]};if(t.rotation){var n=t.rotation;r.properties={rawMap:{rot:6e4*Math.min(Math.max(n,0),360)}}}return{name:"xdr:spPr",children:[r,{name:"a:prstGeom",properties:{rawMap:{prst:"rect"}},children:[{name:"a:avLst"}]}]}},ni=function(t,e,r,n){return{name:"xdr:pic",children:[Qo(t,e+1),ei(t,r+1),ri(t,n)]}},oi=function(t){var e=t.sheetIndex,r=Ma.worksheetImages.get(e),n=Ma.worksheetImageIds.get(e);return{name:"xdr:wsDr",properties:{rawMap:{"xmlns:a":"http://schemas.openxmlformats.org/drawingml/2006/main","xmlns:xdr":"http://schemas.openxmlformats.org/drawingml/2006/spreadsheetDrawing"}},children:r.map((function(t,e){var r=function(t){t.fitCell=!!t.fitCell||!t.width||!t.height;var e=t.position,r=void 0===e?{}:e,n=t.fitCell,o=t.width,i=void 0===o?0:o,a=t.height,s=void 0===a?0:a,l=t.totalHeight,u=t.totalWidth,c=r.offsetX,p=void 0===c?0:c,d=r.offsetY,h=void 0===d?0:d,f=r.row,v=void 0===f?1:f,y=r.rowSpan,g=void 0===y?1:y,m=r.column,b=void 0===m?1:m,C=r.colSpan,S=void 0===C?1:C;return{from:{row:v-1,col:b-1,offsetX:Io(p),offsetY:Io(h)},to:{row:v-1+(n?1:g-1),col:b-1+(n?1:S-1),offsetX:Io(i+p),offsetY:Io(s+h)},height:Io(l||s),width:Io(u||i)}}(t);return{name:"xdr:twoCellAnchor",properties:{rawMap:{editAs:"absolute"}},children:[Jo("from",r.from),Jo("to",r.to),ni(t,e,n.get(t.id).index,r),{name:"xdr:clientData"}]}}))}},ii=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},ai=function(t){var e=ii(t,4);return{name:"a:"+e[0],children:[{name:"a:"+e[1],properties:{rawMap:{val:e[2],lastClr:e[3]}}}]}},si=function(){return{name:"a:clrScheme",properties:{rawMap:{name:"Office"}},children:[ai(["dk1","sysClr","windowText","000000"]),ai(["lt1","sysClr","window","FFFFFF"]),ai(["dk2","srgbClr","44546A"]),ai(["lt2","srgbClr","E7E6E6"]),ai(["accent1","srgbClr","4472C4"]),ai(["accent2","srgbClr","ED7D31"]),ai(["accent3","srgbClr","A5A5A5"]),ai(["accent4","srgbClr","FFC000"]),ai(["accent5","srgbClr","5B9BD5"]),ai(["accent6","srgbClr","70AD47"]),ai(["hlink","srgbClr","0563C1"]),ai(["folHlink","srgbClr","954F72"])]}},li=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},ui=function(t){var e=li(t,4),r=e[0],n=e[1];return{name:"a:"+r,properties:{rawMap:{script:e[2],typeface:n,panose:e[3]}}}},ci=function(){var t=u.utf8_encode;return{name:"a:fontScheme",properties:{rawMap:{name:"Office"}},children:[{name:"a:majorFont",children:[ui(["latin","Calibri Light",void 0,"020F0302020204030204"]),ui(["ea",""]),ui(["cs",""]),ui(["font",t("\u6e38\u30b4\u30b7\u30c3\u30af Light"),"Jpan"]),ui(["font",t("\ub9d1\uc740 \uace0\ub515"),"Hang"]),ui(["font",t("\u7b49\u7ebf Light"),"Hans"]),ui(["font",t("\u65b0\u7d30\u660e\u9ad4"),"Hant"]),ui(["font","Times New Roman","Arab"]),ui(["font","Times New Roman","Hebr"]),ui(["font","Tahoma","Thai"]),ui(["font","Nyala","Ethi"]),ui(["font","Vrinda","Beng"]),ui(["font","Shruti","Gujr"]),ui(["font","MoolBoran","Khmr"]),ui(["font","Tunga","Knda"]),ui(["font","Raavi","Guru"]),ui(["font","Euphemia","Cans"]),ui(["font","Plantagenet Cherokee","Cher"]),ui(["font","Microsoft Yi Baiti","Yiii"]),ui(["font","Microsoft Himalaya","Tibt"]),ui(["font","MV Boli","Thaa"]),ui(["font","Mangal","Deva"]),ui(["font","Gautami","Telu"]),ui(["font","Latha","Taml"]),ui(["font","Estrangelo Edessa","Syrc"]),ui(["font","Kalinga","Orya"]),ui(["font","Kartika","Mlym"]),ui(["font","DokChampa","Laoo"]),ui(["font","Iskoola Pota","Sinh"]),ui(["font","Mongolian Baiti","Mong"]),ui(["font","Times New Roman","Viet"]),ui(["font","Microsoft Uighur","Uigh"]),ui(["font","Sylfaen","Geor"]),ui(["font","Arial","Armn"]),ui(["font","Leelawadee UI","Bugi"]),ui(["font","Microsoft JhengHei","Bopo"]),ui(["font","Javanese Text","Java"]),ui(["font","Segoe UI","Lisu"]),ui(["font","Myanmar Text","Mymr"]),ui(["font","Ebrima","Nkoo"]),ui(["font","Nirmala UI","Olck"]),ui(["font","Ebrima","Osma"]),ui(["font","Phagspa","Phag"]),ui(["font","Estrangelo Edessa","Syrn"]),ui(["font","Estrangelo Edessa","Syrj"]),ui(["font","Estrangelo Edessa","Syre"]),ui(["font","Nirmala UI","Sora"]),ui(["font","Microsoft Tai Le","Tale"]),ui(["font","Microsoft New Tai Lue","Talu"]),ui(["font","Ebrima","Tfng"])]},{name:"a:minorFont",children:[ui(["latin","Calibri",void 0,"020F0502020204030204"]),ui(["ea",""]),ui(["cs",""]),ui(["font",t("\u6e38\u30b4\u30b7\u30c3\u30af"),"Jpan"]),ui(["font",t("\ub9d1\uc740 \uace0\ub515"),"Hang"]),ui(["font",t("\u7b49\u7ebf"),"Hans"]),ui(["font",t("\u65b0\u7d30\u660e\u9ad4"),"Hant"]),ui(["font","Arial","Arab"]),ui(["font","Arial","Hebr"]),ui(["font","Tahoma","Thai"]),ui(["font","Nyala","Ethi"]),ui(["font","Vrinda","Beng"]),ui(["font","Shruti","Gujr"]),ui(["font","DaunPenh","Khmr"]),ui(["font","Tunga","Knda"]),ui(["font","Raavi","Guru"]),ui(["font","Euphemia","Cans"]),ui(["font","Plantagenet Cherokee","Cher"]),ui(["font","Microsoft Yi Baiti","Yiii"]),ui(["font","Microsoft Himalaya","Tibt"]),ui(["font","MV Boli","Thaa"]),ui(["font","Mangal","Deva"]),ui(["font","Gautami","Telu"]),ui(["font","Latha","Taml"]),ui(["font","Estrangelo Edessa","Syrc"]),ui(["font","Kalinga","Orya"]),ui(["font","Kartika","Mlym"]),ui(["font","DokChampa","Laoo"]),ui(["font","Iskoola Pota","Sinh"]),ui(["font","Mongolian Baiti","Mong"]),ui(["font","Arial","Viet"]),ui(["font","Microsoft Uighur","Uigh"]),ui(["font","Sylfaen","Geor"]),ui(["font","Arial","Armn"]),ui(["font","Leelawadee UI","Bugi"]),ui(["font","Microsoft JhengHei","Bopo"]),ui(["font","Javanese Text","Java"]),ui(["font","Segoe UI","Lisu"]),ui(["font","Myanmar Text","Mymr"]),ui(["font","Ebrima","Nkoo"]),ui(["font","Nirmala UI","Olck"]),ui(["font","Ebrima","Osma"]),ui(["font","Phagspa","Phag"]),ui(["font","Estrangelo Edessa","Syrn"]),ui(["font","Estrangelo Edessa","Syrj"]),ui(["font","Estrangelo Edessa","Syre"]),ui(["font","Nirmala UI","Sora"]),ui(["font","Microsoft Tai Le","Tale"]),ui(["font","Microsoft New Tai Lue","Talu"]),ui(["font","Ebrima","Tfng"])]}]}},pi=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},di=function(t,e,r){return{name:"a:"+t,properties:{rawMap:{val:e}},children:r}},hi=function(t){var e=pi(t,6),r=e[0],n=e[1],o=e[2],i=e[3],a=e[4],s=e[5],l=[];return l.push(di("satMod",o)),i&&l.push(di("lumMod",i)),a&&l.push(di("tint",a)),s&&l.push(di("shade",s)),{name:"a:gs",properties:{rawMap:{pos:r}},children:[{name:"a:schemeClr",properties:{rawMap:{val:n}},children:l}]}},fi=function(t,e){return{name:"a:solidFill",children:[di("schemeClr",t,e)]}},vi=function(t){var e=pi(t,5),r=e[0],n=e[1],o=e[2],i=e[3],a=e[4],s=pi(a,2),l=s[0],u=s[1];return{name:"a:gradFill",properties:{rawMap:{rotWithShape:r}},children:[{name:"a:gsLst",children:[hi(n),hi(o),hi(i)]},{name:"a:lin",properties:{rawMap:{ang:l,scaled:u}}}]}},yi=function(t){var e=pi(t,4);return{name:"a:ln",properties:{rawMap:{w:e[0],cap:e[1],cmpd:e[2],algn:e[3]}},children:[fi("phClr"),di("prstDash","solid"),{name:"a:miter",properties:{rawMap:{lim:"800000"}}}]}},gi=function(t){var e=[];if(t){var r=pi(t,5),n=r[0],o=r[1],i=r[2],a=r[3],s=r[4];e.push({name:"a:outerShdw",properties:{rawMap:{blurRad:n,dist:o,dir:i,algn:a,rotWithShape:s}},children:[di("srgbClr","000000",[di("alpha","63000")])]})}return{name:"a:effectStyle",children:[Object.assign({},{name:"a:effectLst"},e.length?{children:e}:{})]}},mi=function(){return{name:"a:fmtScheme",properties:{rawMap:{name:"Office"}},children:[{name:"a:fillStyleLst",children:[fi("phClr"),vi(["1",["0","phClr","105000","110000","67000"],["50000","phClr","103000","105000","73000"],["100000","phClr","109000","105000","81000"],["5400000","0"]]),vi(["1",["0","phClr","103000","102000","94000"],["50000","phClr","110000","100000",void 0,"100000"],["100000","phClr","120000","99000",void 0,"78000"],["5400000","0"]])]},{name:"a:lnStyleLst",children:[yi(["6350","flat","sng","ctr"]),yi(["12700","flat","sng","ctr"]),yi(["19050","flat","sng","ctr"])]},{name:"a:effectStyleLst",children:[gi(),gi(),gi(["57150","19050","5400000","ctr","0"])]},{name:"a:bgFillStyleLst",children:[fi("phClr"),fi("phClr",[di("tint","95000"),di("satMod","170000")]),vi(["1",["0","phClr","150000","102000","93000","98000"],["50000","phClr","130000","103000","98000","90000"],["100000","phClr","120000",void 0,void 0,"63000"],["5400000","0"]])]}]}},bi=function(){return{name:"a:themeElements",children:[si(),ci(),mi()]}},Ci=function(){return{name:"a:theme",properties:{prefixedAttributes:[{prefix:"xmlns:",map:{a:"http://schemas.openxmlformats.org/drawingml/2006/main"}}],rawMap:{name:"Office Theme"}},children:[bi(),{name:"a:objectDefaults"},{name:"a:extraClrSchemeLst"}]}},Si=function(t){return{name:"sst",properties:{rawMap:{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main",count:t.size,uniqueCount:t.size}},children:(e=t,r=[],e.forEach((function(t,e){var n=e.toString(),o={name:"t",textNode:u.utf8_encode(u.escapeString(n))};n.trim().length!==n.length&&(o.properties={rawMap:{"xml:space":"preserve"}}),r.push({name:"si",children:[o]})})),r)};var e,r};var wi,xi,Oi,Ei,Ti,Pi,Di,Ai,Mi,_i,Ri=function(t){var e=t.formatCode,r=t.numFmtId;return e.length&&(e=function(t){for(var e=t.split(/(\[[^\]]*\])/),r=0;r<e.length;r++){var n=e[r];n.length&&(n.startsWith("[")||(n=n.replace(/\$/g,'"$"')),e[r]=u.escapeString(n))}return e.join("")}(e)),{name:"numFmt",properties:{rawMap:{formatCode:e,numFmtId:r}}}},ki=function(t){return{name:"numFmts",properties:{rawMap:{count:t.length}},children:t.map((function(t){return Ri(t)}))}},Fi=function(t){var e=t.size,r=t.colorTheme,n=t.color,o=void 0===n?"FF000000":n,i=t.fontName,a=void 0===i?"Calibri":i,s=t.family,l=t.scheme,u=t.italic,c=t.bold,p=t.strikeThrough,d=t.outline,h=t.shadow,f=t.underline,v=t.verticalAlign,y=[{name:"sz",properties:{rawMap:{val:e}}},{name:"color",properties:{rawMap:{theme:r,rgb:o}}},{name:"name",properties:{rawMap:{val:a}}}];return s&&y.push({name:"family",properties:{rawMap:{val:s}}}),l&&y.push({name:"scheme",properties:{rawMap:{val:l}}}),u&&y.push({name:"i"}),c&&y.push({name:"b"}),p&&y.push({name:"strike"}),d&&y.push({name:"outline"}),h&&y.push({name:"shadow"}),f&&y.push({name:"u",properties:{rawMap:{val:f}}}),v&&y.push({name:"vertAlign",properties:{rawMap:{val:v}}}),{name:"font",children:y}},Ii=function(t){return{name:"fonts",properties:{rawMap:{count:t.length}},children:t.map((function(t){return Fi(t)}))}},Li=function(t){var e=t.patternType,r=t.fgTheme,n=t.fgTint,o=t.fgRgb,i=t.bgRgb,a=t.bgIndexed,s={name:"patternFill",properties:{rawMap:{patternType:e}}};return(r||n||o)&&(s.children=[{name:"fgColor",properties:{rawMap:{theme:r,tint:n,rgb:o}}}]),(a||i)&&(s.children||(s.children=[]),s.children.push({name:"bgColor",properties:{rawMap:{indexed:a,rgb:i}}})),{name:"fill",children:[s]}},Ni=function(t){return{name:"fills",properties:{rawMap:{count:t.length}},children:t.map((function(t){return Li(t)}))}},Gi={None:"None",Dot:"Dotted",Dash:"Dashed",Double:"Double",DashDot:"DashDot",DashDotDot:"DashDotDot",SlantDashDot:"SlantDashDot"},ji=["Dashed","DashDot","DashDotDot"],Vi={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinDiagStripe:"lightUp",ThinHorzCross:"lightGrid",ThinDiagCross:"lightTrellis",Gray125:"gray125",Gray0625:"gray0625"},Bi={Automatic:"general",Left:"left",Center:"center",Right:"right",Fill:"fill",Justify:"justify",CenterAcrossSelection:"centerContinuous",Distributed:"distributed",JustifyDistributed:"justify"},Ui={Automatic:void 0,Top:"top",Bottom:"bottom",Center:"center",Justify:"justify",Distributed:"distributed",JustifyDistributed:"justify"},Hi=function(t){return null==t?t:("#"===t.charAt(0)&&(t=t.substr(1)),6===t.length?"FF"+t:t)},zi=function(t,e){if(!t)return"thin";var r=function(t){switch(t){case 1:return"thin";case 2:return"medium";case 3:return"thick";default:return"hair"}}(e),n=Gi[t];return"Continuous"===t?r:"medium"===r&&-1!==ji.indexOf(n)?"medium"+n:n.charAt(0).toLowerCase()+n.substr(1)},Wi=function(t){return Bi[t]||"general"},Ki=function(t){return Ui[t]||void 0},Xi=function(t){return{name:"color",properties:{rawMap:{rgb:Hi(t||"#000000")}}}},Yi=function(t){var e=t.left,r=t.right,n=t.top,o=t.bottom,i=t.diagonal,a=e?[Xi(e.color)]:void 0,s=r?[Xi(r.color)]:void 0,l=n?[Xi(n.color)]:void 0,u=o?[Xi(o.color)]:void 0,c=i?[Xi(i.color)]:void 0;return{name:"border",children:[{name:"left",properties:{rawMap:{style:e&&e.style}},children:a},{name:"right",properties:{rawMap:{style:r&&r.style}},children:s},{name:"top",properties:{rawMap:{style:n&&n.style}},children:l},{name:"bottom",properties:{rawMap:{style:o&&o.style}},children:u},{name:"diagonal",properties:{rawMap:{style:i&&i.style}},children:c}]}},qi=function(t){return{name:"borders",properties:{rawMap:{count:t.length}},children:t.map((function(t){return Yi(t)}))}},Zi=function(t){var e=["Context","LeftToRight","RightToLeft"].indexOf(t);return Math.max(e,0)},Ji=function(t){var e=t.horizontal,r=t.indent,n=t.readingOrder,o=t.rotate,i=t.shrinkToFit,a=t.vertical,s=t.wrapText;return{name:"alignment",properties:{rawMap:{horizontal:e&&Wi(e),indent:r,readingOrder:n&&Zi(n),textRotation:o,shrinkToFit:i,vertical:a&&Ki(a),wrapText:s}}}},$i=function(t){var e=!1===t.protected?0:1;return{name:"protection",properties:{rawMap:{hidden:!0===t.hideFormula?1:0,locked:e}}}},Qi=function(t){var e=t.alignment,r=t.borderId,n=t.fillId,o=t.fontId,i=t.numFmtId,a=t.protection,s=t.xfId,l=[];return e&&l.push(Ji(e)),a&&l.push($i(a)),{name:"xf",properties:{rawMap:{applyAlignment:e?1:void 0,applyProtection:a?1:void 0,applyBorder:r?1:void 0,applyFill:n?1:void 0,borderId:r,fillId:n,applyFont:o?1:void 0,fontId:o,applyNumberFormat:i?1:void 0,numFmtId:i,xfId:s}},children:l.length?l:void 0}},ta=function(t){return{name:"cellStyleXfs",properties:{rawMap:{count:t.length}},children:t.map((function(t){return Qi(t)}))}},ea=function(t){return{name:"cellXfs",properties:{rawMap:{count:t.length}},children:t.map((function(t){return Qi(t)}))}},ra=function(t){return{name:"cellStyle",properties:{rawMap:{builtinId:t.builtinId,name:t.name,xfId:t.xfId}}}},na=function(t){return{name:"cellStyles",properties:{rawMap:{count:t.length}},children:t.map((function(t){return ra(t)}))}},oa=function(){return(oa=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},ia=function(t,e){return-1!==t.indexOf("mixedStyle")&&e>1&&(t+="_"+e),t},aa=function(){wi={base:0},xi=[],Oi=[{fontName:"Calibri",colorTheme:"1",family:"2",scheme:"minor"}],Ei=[{patternType:"none"},{patternType:"gray125"}],Ti=[{left:void 0,right:void 0,top:void 0,bottom:void 0,diagonal:void 0}],Pi=[{borderId:0,fillId:0,fontId:0,numFmtId:0}],Di=[{borderId:0,fillId:0,fontId:0,numFmtId:0,xfId:0}],Ai=[{builtinId:0,name:"Normal",xfId:0}]},sa=function(t){var e,r=(e=t.pattern)?Vi[e]||e:"none",n=Hi(t.color),o=Hi(t.patternColor),i=Ei.findIndex((function(t){var e=t.patternType,i=t.fgRgb,a=t.bgRgb;return e==r&&i==n&&a==o}));return-1===i&&(i=Ei.length,Ei.push({patternType:r,fgRgb:n,bgRgb:o})),i},la=function(t){var e=t.fontName,r=void 0===e?"Calibri":e,n=t.color,o=t.size,i=t.bold,a=t.italic,s=t.outline,l=t.shadow,c=t.strikeThrough,p=t.underline,d=t.family,h=t.verticalAlign,f=r?u.utf8_encode(r):r,v=Hi(n),y=function(t){if(void 0!==t){var e=["Automatic","Roman","Swiss","Modern","Script","Decorative"].indexOf(t||"Automatic");return Math.max(e,0)}}(d),g=p?p.toLocaleLowerCase():void 0,m=h?h.toLocaleLowerCase():void 0,b=Oi.findIndex((function(t){return t.fontName==f&&t.color==v&&t.size==o&&t.bold==i&&t.italic==a&&t.outline==s&&t.shadow==l&&t.strikeThrough==c&&t.underline==g&&t.verticalAlign==m&&t.family==y}));return-1===b&&(b=Oi.length,Oi.push({fontName:f,color:v,size:o,bold:i,italic:a,outline:s,shadow:l,strikeThrough:c,underline:g,verticalAlign:m,family:null!=y?y.toString():void 0})),b},ua=function(t){var e=t.alignment,r=t.borders,n=t.font,o=t.interior,i=t.numberFormat,a=t.protection,s=t.id,l=0,c=0,p=0,d=0;s&&(s=ia(s,Mi),null==wi[s]&&(o&&(l=sa(o)),r&&(c=function(t){var e,r,n,o,i,a,s,l,u=t.borderBottom,c=t.borderTop,p=t.borderLeft,d=t.borderRight;p&&(n=zi(p.lineStyle,p.weight),s=Hi(p.color)),d&&(o=zi(d.lineStyle,d.weight),l=Hi(d.color)),u&&(e=zi(u.lineStyle,u.weight),i=Hi(u.color)),c&&(r=zi(c.lineStyle,c.weight),a=Hi(c.color));var h=Ti.findIndex((function(t){var u=t.left,c=t.right,p=t.top,d=t.bottom;if(!u&&(n||s))return!1;if(!c&&(o||l))return!1;if(!p&&(r||a))return!1;if(!d&&(e||i))return!1;var h=u||{},f=h.style,v=h.color,y=c||{},g=y.style,m=y.color,b=p||{},C=b.style,S=b.color,w=d||{},x=w.style,O=w.color;return f==n&&v==s&&(g==o&&m==l&&(C==r&&S==a&&(x==e&&O==i)))}));return-1===h&&(h=Ti.length,Ti.push({left:{style:n,color:s},right:{style:o,color:l},top:{style:r,color:a},bottom:{style:e,color:i},diagonal:{style:void 0,color:void 0}})),h}(r)),n&&(p=la(n)),i&&(d=function(t){if(t=u.utf8_encode(t),Fo[t])return Fo[t];var e=xi.findIndex((function(e){return e.formatCode===t}));return-1===e?(e=xi.length+164,xi.push({formatCode:t,numFmtId:e})):e=xi[e].numFmtId,e}(i.format)),wi[s]=Di.length,Di.push({alignment:e,borderId:c||0,fillId:l||0,fontId:p||0,numFmtId:d||0,protection:a,xfId:0})))},ca=function(t){var e=ki(xi),r=Ii(Oi.map((function(e){return oa(oa({},e),{size:null!=e.size?e.size:t})}))),n=Ni(Ei),o=qi(Ti),i=ta(Pi),a=ea(Di),s=na(Ai);return aa(),{name:"styleSheet",properties:{rawMap:{"mc:Ignorable":"x14ac x16r2 xr",xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","xmlns:x14ac":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac","xmlns:x16r2":"http://schemas.microsoft.com/office/spreadsheetml/2015/02/main","xmlns:xr":"http://schemas.microsoft.com/office/spreadsheetml/2014/revision"}},children:[e,r,n,o,i,a,s,{name:"tableStyles",properties:{rawMap:{count:0,defaultPivotStyle:"PivotStyleLight16",defaultTableStyle:"TableStyleMedium2"}}}]}},pa=function(t,e){return wi[ia(t,e)]||0},da=function(t,e){var r=(e+1).toString();return{name:"sheet",properties:{rawMap:{name:t,sheetId:r,"r:id":"rId"+r}}}},ha=function(t){return{name:"sheets",children:t.map((function(t,e){return da(t,e)}))}},fa=function(t){return{name:"workbook",properties:{prefixedAttributes:[{prefix:"xmlns:",map:{r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships"}}],rawMap:{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main"}},children:[ha(t)]}},va=function(t){var e=t.min,r=t.max,n=t.outlineLevel,o=t.s,i=t.width,a=t.hidden,s=t.bestFit,l=1,u="0";return i>1&&(l=function(t){return Math.ceil((t-12)/7+1)}(i),u="1"),{name:"col",properties:{rawMap:{min:e,max:r,outlineLevel:null!=n?n:void 0,width:l,style:o,hidden:a?"1":"0",bestFit:s?"1":"0",customWidth:u}}}},ya=function(t,e,r){var n=t.ref,o=t.data,i=t.styleId,a=o||{type:"empty",value:null},s=a.type,l=a.value,c=s;"f"===s?c="str":s.charAt(0)===s.charAt(0).toUpperCase()&&(c=function(t){var e=t.charAt(0).toLowerCase();return"s"===e?"inlineStr":e}(s));var p,d={name:"c",properties:{rawMap:{r:n,t:"empty"===c?void 0:c,s:i?pa(i,r):void 0}}};return"empty"===c?d:(p="str"===c&&"f"===s?[{name:"f",textNode:u.escapeString(u.utf8_encode(l))}]:"inlineStr"===c?[{name:"is",children:[{name:"t",textNode:u.escapeString(u.utf8_encode(l))}]}]:[{name:"v",textNode:l}],Object.assign({},d,{children:p}))},ga=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},ma=function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t},ba=function(t){var e;return""!==(null===(e=t.data)||void 0===e?void 0:e.value)||void 0!==t.styleId},Ca=function(t,e,r){var n=t.collapsed,o=t.hidden,i=t.height,a=t.outlineLevel,s=t.cells,l=void 0===s?[]:s;return function(t,e){for(var r=[],n=0,o=0;o<t.length;o++){(a=t[o]).mergeAcross&&(r.push({pos:o,excelPos:n}),n+=a.mergeAcross),n++}if(r.length)for(o=r.length-1;o>=0;o--){for(var i=[],a=t[r[o].pos],s=1;s<=a.mergeAcross;s++)i.push({ref:""+Go(r[o].excelPos+1+s)+(e+1),styleId:a.styleId,data:{type:"empty",value:null}});i.length&&t.splice.apply(t,ma([r[o].pos+1,0],ga(i)))}}(l,e),{name:"row",properties:{rawMap:{r:e+1,collapsed:n?"1":"0",hidden:o?"1":"0",ht:i,customHeight:null!=i?"1":"0",spans:"1:1",outlineLevel:a||void 0}},children:l.filter(ba).map((function(t,e){return ya(t,e,r)}))}},Sa=function(t){return{name:"mergeCell",properties:{rawMap:{ref:t}}}},wa=function(t){if(null==t)return 1;var e=["Letter","Letter Small","Tabloid","Ledger","Legal","Statement","Executive","A3","A4","A4 Small","A5","A6","B4","B5","Folio","Envelope","Envelope DL","Envelope C5","Envelope B5","Envelope C3","Envelope C4","Envelope C6","Envelope Monarch","Japanese Postcard","Japanese Double Postcard"].indexOf(t);return-1===e?1:e+1},xa=function(t){return t.reduce((function(t,e){var r,n;return""+function(t,e){return e?(t+="&amp;&quot;",t+=e.fontName||"Calibri",e.bold!==e.italic?t+=e.bold?",Bold":",Italic":e.bold?t+=",Bold Italic":t+=",Regular",t+="&quot;",e.size&&(t+="&amp;"+e.size),e.strikeThrough&&(t+="&amp;S"),e.underline&&(t+="&amp;"+("Double"===e.underline?"E":"U")),e.color&&(t+="&amp;K"+e.color.replace("#","").toUpperCase()),t):t}(t+"&amp;"+("Center"===(r=e.position)?"C":"Right"===r?"R":"L"),e.font)+u.escapeString(u.utf8_encode((n=e.value,u.iterateObject({"&[Page]":"&P","&[Pages]":"&N","&[Date]":"&D","&[Time]":"&T","&[Tab]":"&A","&[Path]":"&Z","&[File]":"&F"},(function(t,e){n=n.replace(t,e)})),n)))}),"")},Oa=function(t){var e=[];return["all","first","even"].forEach((function(r){var n=t[r],o="all"===r?"odd":r;n&&(n.header||n.footer)&&u.iterateObject(n,(function(t,r){var n=""+t.charAt(0).toUpperCase()+t.slice(1);r&&e.push({name:""+o+n,properties:{rawMap:{"xml:space":"preserve"}},textNode:xa(r)})}))})),e},Ea=function(t){var e,r=t.worksheet,n=t.currentSheet,o=t.config,i=o.margins,a=void 0===i?{}:i,s=o.pageSetup,l=o.headerFooterConfig,c=o.suppressColumnOutline,p=r.table,d=p.rows,h=p.columns,f=h&&h.length?function(t,e,r){var n=[],o=[];t.forEach((function(t,r){var i,a=t.cells,s=0;a.forEach((function(t,a){var l=a+s+1,u=Go(l),c=r+1;if(t.mergeAcross){s+=t.mergeAcross;var p=Go(a+s+1);n.push(""+u+c+":"+p+c)}e[l-1]||(e[l-1]={});var d=t.collapsibleRanges;d&&d.forEach((function(t){o.push([l+t[0],l+t[1]])})),(i=e[l-1]).min=l,i.max=l,t.ref=""+u+c}))})),o.sort((function(t,e){return t[0]!==e[0]?t[0]-e[0]:e[1]-t[1]}));var i=new Map,a=new Map;return o.filter((function(t){var e=t.toString();return!i.get(e)&&(i.set(e,!0),!0)})).forEach((function(t){var n=e.find((function(e){return e.min==t[0]&&e.max==t[1]})),o=a.get(t[0]);e.push({min:t[0],max:t[1],outlineLevel:r?void 0:o||1,width:(n||{width:100}).width}),a.set(t[0],(o||0)+1)})),n}(d,h,!!c):[];return{name:"worksheet",properties:{prefixedAttributes:[{prefix:"xmlns:",map:{r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships"}}],rawMap:{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main"}},children:u.compose((function(t){return t.push({name:"sheetPr",children:[{name:"outlinePr",properties:{rawMap:{summaryBelow:0}}}]}),t}),function(t){return function(e){var r=t.reduce((function(t,e){return e.outlineLevel&&e.outlineLevel>t?e.outlineLevel:t}),0);return e.push({name:"sheetFormatPr",properties:{rawMap:{baseColWidth:10,defaultRowHeight:16,outlineLevelRow:r||void 0}}}),e}}(d),function(t){return function(e){return t.length&&e.push({name:"cols",children:t.map((function(t){return va(t)}))}),e}}(h),function(t,e){return function(r){return t.length&&r.push({name:"sheetData",children:t.map((function(t,r){return Ca(t,r,e)}))}),r}}(d,n+1),(e=f,function(t){return e.length&&t.push({name:"mergeCells",properties:{rawMap:{count:e.length}},children:e.map((function(t){return Sa(t)}))}),t}),function(t){return function(e){var r=t.top,n=void 0===r?.75:r,o=t.right,i=void 0===o?.7:o,a=t.bottom,s=void 0===a?.75:a,l=t.left,u=void 0===l?.7:l,c=t.header,p=void 0===c?.3:c,d=t.footer,h=void 0===d?.3:d;return e.push({name:"pageMargins",properties:{rawMap:{bottom:s,footer:h,header:p,left:u,right:i,top:n}}}),e}}(a),function(t){return function(e){var r;return t&&e.push({name:"pageSetup",properties:{rawMap:{horizontalDpi:0,verticalDpi:0,orientation:(r=t.orientation,!r||"Portrait"!==r&&"Landscape"!==r?"portrait":r.toLocaleLowerCase()),paperSize:wa(t.pageSize)}}}),e}}(s),function(t){return function(e){if(!t)return e;var r=null!=t.first?1:0,n=null!=t.even?1:0;return e.push({name:"headerFooter",properties:{rawMap:{differentFirst:r,differentOddEven:n}},children:Oa(t)}),e}}(l),function(t){return function(e){return Ma.worksheetImages.get(t)&&e.push({name:"drawing",properties:{rawMap:{"r:id":"rId1"}}}),e}}(n))([])}},Ta=function(t){return{name:"Relationship",properties:{rawMap:{Id:t.Id,Type:t.Type,Target:t.Target}}}},Pa=function(t){return{name:"Relationships",properties:{rawMap:{xmlns:"http://schemas.openxmlformats.org/package/2006/relationships"}},children:t.map((function(t){return Ta(t)}))}},Da=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},Aa=function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t},Ma=function(){function t(){}return t.createExcel=function(t,e,r){return this.addSheetName(e),function(t,e){1===(Mi=e)&&aa(),t.forEach(ua)}(t,this.sheetNames.length),this.createWorksheet(e,r)},t.buildImageMap=function(t,e,r,n,o){var i=this.sheetNames.length,a=this.images.get(t.id);t.position&&t.position.row&&t.position.column||(t.position||(t.position={}),t.position=Object.assign({},t.position,{row:e,column:n.indexOf(r)+1}));var s=t;if(function(t,e){var r=t.position,n=r.colSpan,o=r.column;if(t.width)if(n)for(var i=e.slice(o-1,o+n-1),a=0,s=0;s<i.length;s++){var l=i[s].getActualWidth();if(t.width<a+l){t.position.colSpan=s+1,t.totalWidth=t.width,t.width=t.totalWidth-a;break}a+=l}else t.totalWidth=t.width}(s,n),function(t,e){var r,n=t.position,o=n.rowSpan,i=n.row;if(t.height)if(o)for(var a=0,s=0,l=i;l<i+o;l++){var u=(r=Lo(l,e)||20,Math.round(96*r/72));if(t.height<a+u){t.position.rowSpan=s+1,t.totalHeight=t.height,t.height=t.totalHeight-a;break}a+=u,s++}else t.totalHeight=t.height}(s,o),a){var l=a.find((function(t){return t.sheetId===i}));l?l.image.push(s):a.push({sheetId:i,image:[s]})}else this.images.set(s.id,[{sheetId:i,image:[s]}]),this.workbookImageIds.set(s.id,{type:s.imageType,index:this.workbookImageIds.size});this.buildSheetImageMap(i,s)},t.buildSheetImageMap=function(t,e){var r=this.worksheetImageIds.get(t);r||(r=new Map,this.worksheetImageIds.set(t,r));var n=this.worksheetImages.get(t);n?(n.push(e),r.get(e.id)||r.set(e.id,{index:r.size,type:e.imageType})):(this.worksheetImages.set(t,[e]),r.set(e.id,{index:0,type:e.imageType}))},t.addSheetName=function(t){for(var e=u.escapeString(t.name)||"",r="";-1!==this.sheetNames.indexOf(""+e+r);)if(""===r)r="_1";else{var n=parseInt(r.slice(1),10);r="_"+(n+1)}t.name=""+e+r,this.sheetNames.push(t.name)},t.getStringPosition=function(t){return this.sharedStrings.has(t)?this.sharedStrings.get(t):(this.sharedStrings.set(t,this.sharedStrings.size),this.sharedStrings.size-1)},t.resetFactory=function(){this.sharedStrings=new Map,this.images=new Map,this.worksheetImages=new Map,this.workbookImageIds=new Map,this.worksheetImageIds=new Map,this.sheetNames=[],this.factoryMode=U.SINGLE_SHEET},t.createWorkbook=function(){return No(fa(this.sheetNames))},t.createStylesheet=function(t){return No(ca(t))},t.createSharedStrings=function(){return No(Si(this.sharedStrings))},t.createCore=function(t){return No(Ko(t))},t.createContentTypes=function(t){return No(Zo(t))},t.createRels=function(){var t=Pa([{Id:"rId1",Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",Target:"xl/workbook.xml"},{Id:"rId2",Type:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",Target:"docProps/core.xml"}]);return No(t)},t.createTheme=function(){return No(Ci())},t.createWorkbookRels=function(t){var e=new Array(t).fill(void 0).map((function(t,e){return{Id:"rId"+(e+1),Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet",Target:"worksheets/sheet"+(e+1)+".xml"}})),r=Pa(Aa(Aa([],Da(e)),[{Id:"rId"+(t+1),Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",Target:"theme/theme1.xml"},{Id:"rId"+(t+2),Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",Target:"styles.xml"},{Id:"rId"+(t+3),Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",Target:"sharedStrings.xml"}]));return No(r)},t.createDrawing=function(t){return No(oi({sheetIndex:t}))},t.createDrawingRel=function(t){var e=this,r=this.worksheetImageIds.get(t),n=[];return r.forEach((function(t,r){n.push({Id:"rId"+(t.index+1),Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",Target:"../media/image"+(e.workbookImageIds.get(r).index+1)+"."+t.type})})),No(Pa(n))},t.createWorksheetDrawingRel=function(t){var e=Pa([{Id:"rId1",Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",Target:"../drawings/drawing"+(t+1)+".xml"}]);return No(e)},t.createWorksheet=function(t,e){return No(Ea({worksheet:t,currentSheet:this.sheetNames.length-1,config:e}))},t.sharedStrings=new Map,t.sheetNames=[],t.images=new Map,t.worksheetImages=new Map,t.workbookImageIds=new Map,t.worksheetImageIds=new Map,t.factoryMode=U.SINGLE_SHEET,t}(),_a=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ra=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _a(e,t),e.prototype.createExcel=function(t){var e=this.excelStyles,r=this.config;return Ma.createExcel(e,t,r)},e.prototype.getDataTypeForValue=function(t){return void 0===t?"empty":this.isNumerical(t)?"n":"s"},e.prototype.getType=function(t,e,r){if(this.isFormula(r))return"f";if(e&&e.dataType)switch(e.dataType.toLocaleLowerCase()){case"formula":return"f";case"string":return"s";case"number":return"n";case"datetime":return"d";case"error":return"e";case"boolean":return"b";default:console.warn("AG Grid: Unrecognized data type for excel export ["+e.id+".dataType="+e.dataType+"]")}return t},e.prototype.addImage=function(t,e,r){if(this.config.addImageToCell){var n=this.config.addImageToCell(t,e,r);if(n)return Ma.buildImageMap(n.image,t,e,this.columnsToExport,this.config.rowHeight),n}},e.prototype.createCell=function(t,e,r,n){var o=this.getStyleById(t);!(null==o?void 0:o.dataType)&&"s"===e&&n&&(r=n);var i=this.getType(e,o,r)||e;return{styleId:o?t:void 0,data:{type:i,value:this.getCellValue(i,r)}}},e.prototype.createMergedCell=function(t,e,r,n){var o=null==r?"":r;return{styleId:this.getStyleById(t)?t:void 0,data:{type:e,value:"s"===e?Ma.getStringPosition(o).toString():r},mergeAcross:n}},e.prototype.getCellValue=function(t,e){if(null==e)return Ma.getStringPosition("").toString();switch(t){case"s":return""===e?"":Ma.getStringPosition(e).toString();case"f":return e.slice(1);case"n":return Number(e).toString();default:return e}},e}(Ho),ka=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Fa=function(){return(Fa=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},Ia=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},La=function(t){var e=t.data,r=t.fontSize,n=void 0===r?11:r,o=t.author,i=void 0===o?"AG Grid":o,a=Ma.images.size>0;if(Y.addFolders(["_rels/","docProps/","xl/","xl/theme/","xl/_rels/","xl/worksheets/"]),a){Y.addFolders(["xl/worksheets/_rels","xl/drawings/","xl/drawings/_rels","xl/media/"]);var s=0;Ma.images.forEach((function(t){var e=t[0].image[0],r=e.imageType;Y.addFile("xl/media/image"+ ++s+"."+r,e.base64,!0)}))}if(!e||0===e.length)return console.warn("AG Grid: Invalid params supplied to getMultipleSheetsAsExcel() - `ExcelExportParams.data` is empty."),void Ma.resetFactory();var l=e.length,u=0;e.forEach((function(t,e){Y.addFile("xl/worksheets/sheet"+(e+1)+".xml",t),a&&Ma.worksheetImages.get(e)&&Ga(e,u++)})),Y.addFile("xl/workbook.xml",Ma.createWorkbook()),Y.addFile("xl/styles.xml",Ma.createStylesheet(n)),Y.addFile("xl/sharedStrings.xml",Ma.createSharedStrings()),Y.addFile("xl/theme/theme1.xml",Ma.createTheme()),Y.addFile("xl/_rels/workbook.xml.rels",Ma.createWorkbookRels(l)),Y.addFile("docProps/core.xml",Ma.createCore(i)),Y.addFile("[Content_Types].xml",Ma.createContentTypes(l)),Y.addFile("_rels/.rels",Ma.createRels()),Ma.resetFactory();var c=t.mimeType||"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";return Y.getContent(c)},Na=function(t){var e=t.fileName,r=void 0===e?"export.xlsx":e,n=La(t);n&&K.download(r,n)},Ga=function(t,e){var r="xl/drawings/drawing"+(e+1)+".xml",n="xl/drawings/_rels/drawing"+(e+1)+".xml.rels",o="xl/worksheets/_rels/sheet"+(t+1)+".xml.rels";Y.addFile(n,Ma.createDrawingRel(t)),Y.addFile(r,Ma.createDrawing(t)),Y.addFile(o,Ma.createWorksheetDrawingRel(e))},ja=function(t){function r(){var e=null!==t&&t.apply(this,arguments)||this;return e.exportMode="xlsx",e}return ka(r,t),r.prototype.postConstruct=function(){this.setBeans({gridSerializer:this.gridSerializer,gridOptionsService:this.gridOptionsService})},r.prototype.getMergedParams=function(t){var e=this.gridOptionsService.get("defaultExcelExportParams");return Object.assign({},e,t)},r.prototype.getData=function(e){return this.setExportMode(e.exportMode||"xlsx"),t.prototype.getData.call(this,e)},r.prototype.export=function(t){if(this.isExportSuppressed())return console.warn("AG Grid: Export cancelled. Export is not allowed as per your configuration."),"";var e=this.getMergedParams(t),r=this.getData(e),n={data:[r],fontSize:e.fontSize,author:e.author,mimeType:e.mimeType},o=this.packageFile(n);return o&&K.download(this.getFileName(e.fileName),o),r},r.prototype.exportDataAsExcel=function(t){return this.export(t)},r.prototype.getDataAsExcel=function(t){var e=this.getMergedParams(t),r=this.getData(e);if(t&&"xml"===t.exportMode)return r;var n={data:[r],fontSize:e.fontSize,author:e.author,mimeType:e.mimeType};return this.packageFile(n)},r.prototype.setFactoryMode=function(t,e){void 0===e&&(e="xlsx"),("xlsx"===e?Ma:ko).factoryMode=t},r.prototype.getFactoryMode=function(t){return("xlsx"===t?Ma:ko).factoryMode},r.prototype.getSheetDataForExcel=function(t){var e=this.getMergedParams(t);return this.getData(e)},r.prototype.getMultipleSheetsAsExcel=function(t){return La(t)},r.prototype.exportMultipleSheetsAsExcel=function(t){return Na(t)},r.prototype.getDefaultFileName=function(){return"export."+this.getExportMode()},r.prototype.getDefaultFileExtension=function(){return this.getExportMode()},r.prototype.createSerializingSession=function(t){var e=this,r=e.columnModel,n=e.valueService,o=e.gridOptionsService,i=e.valueFormatterService,a=e.valueParserService,s="xlsx"===this.getExportMode(),l="ag-grid";null!=t.sheetName&&(l=u.utf8_encode(t.sheetName.toString().substr(0,31)));var c=Fa(Fa({},t),{sheetName:l,columnModel:r,valueService:n,gridOptionsService:o,valueFormatterService:i,valueParserService:a,headerRowHeight:t.headerRowHeight||t.rowHeight,baseExcelStyles:this.gridOptionsService.get("excelStyles")||[],styleLinker:this.styleLinker.bind(this)});return new(s?Ra:Wo)(c)},r.prototype.styleLinker=function(t){var e=t.rowType,r=t.rowIndex,n=t.value,o=t.column,i=t.columnGroup,a=t.node,s=e===z.HEADER,l=e===z.HEADER_GROUPING,u=s?o:i,c=[];if(s||l)return c.push("header"),l&&c.push("headerGroup"),u&&(c=c.concat(R.getHeaderClassesFromColDef(u.getDefinition(),this.gridOptionsService,o||null,i||null))),c;var p=this.gridOptionsService.get("excelStyles"),d=["cell"];if(!p||!p.length)return d;var h=p.map((function(t){return t.id}));return this.stylingService.processAllCellClasses(o.getDefinition(),{value:n,data:a.data,node:a,colDef:o.getDefinition(),column:o,rowIndex:r,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context},(function(t){h.indexOf(t)>-1&&d.push(t)})),d.sort((function(t,e){return h.indexOf(t)<h.indexOf(e)?-1:1}))},r.prototype.isExportSuppressed=function(){return this.gridOptionsService.is("suppressExcelExport")},r.prototype.setExportMode=function(t){this.exportMode=t},r.prototype.getExportMode=function(){return this.exportMode},r.prototype.packageFile=function(t){if("xml"===this.getExportMode()){var e=t.mimeType||"application/vnd.ms-excel";return new Blob(["\ufeff",t.data[0]],{type:e})}return La(t)},Ia([n("columnModel")],r.prototype,"columnModel",void 0),Ia([n("valueService")],r.prototype,"valueService",void 0),Ia([n("stylingService")],r.prototype,"stylingService",void 0),Ia([n("gridSerializer")],r.prototype,"gridSerializer",void 0),Ia([n("gridOptionsService")],r.prototype,"gridOptionsService",void 0),Ia([n("valueFormatterService")],r.prototype,"valueFormatterService",void 0),Ia([n("valueParserService")],r.prototype,"valueParserService",void 0),Ia([i],r.prototype,"postConstruct",null),r=Ia([e("excelCreator")],r)}(X),Va={version:"30.2.0",moduleName:s.ExcelExportModule,beans:[ja,q,Z],dependantModules:[T,Ft]},Ba=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ua=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a};!function(t){t[t.EXPANDED=0]="EXPANDED",t[t.COLLAPSED=1]="COLLAPSED",t[t.INDETERMINATE=2]="INDETERMINATE"}(_i||(_i={}));var Ha=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return Ba(r,e),r.prototype.preConstruct=function(){this.setTemplate('<div class="ag-filter-toolpanel-search" role="presentation">\n                <div ref="eExpand" class="ag-filter-toolpanel-expand"></div>\n                <ag-input-text-field ref="eFilterTextField" class="ag-filter-toolpanel-search-input"></ag-input-text-field>\n            </div>')},r.prototype.postConstruct=function(){var t=this.localeService.getLocaleTextFunc();this.eFilterTextField.onValueChange(this.onSearchTextChanged.bind(this)),this.eFilterTextField.setInputAriaLabel(t("ariaFilterColumnsInput","Filter Columns Input")),this.createExpandIcons(),this.setExpandState(_i.EXPANDED),this.addManagedListener(this.eExpand,"click",this.onExpandClicked.bind(this)),this.addManagedListener(this.eventService,l.EVENT_NEW_COLUMNS_LOADED,this.showOrHideOptions.bind(this))},r.prototype.init=function(t){this.params=t,this.columnModel.isReady()&&this.showOrHideOptions()},r.prototype.createExpandIcons=function(){this.eExpand.appendChild(this.eExpandChecked=u.createIconNoSpan("columnSelectOpen",this.gridOptionsService)),this.eExpand.appendChild(this.eExpandUnchecked=u.createIconNoSpan("columnSelectClosed",this.gridOptionsService)),this.eExpand.appendChild(this.eExpandIndeterminate=u.createIconNoSpan("columnSelectIndeterminate",this.gridOptionsService))},r.prototype.showOrHideOptions=function(){var t=!this.params.suppressFilterSearch,e=!this.params.suppressExpandAll,r=this.localeService.getLocaleTextFunc();this.eFilterTextField.setInputPlaceholder(r("searchOoo","Search..."));var n=this.columnModel.getAllGridColumns().some((function(t){return t.getOriginalParent()&&t.isFilterAllowed()}));u.setDisplayed(this.eFilterTextField.getGui(),t),u.setDisplayed(this.eExpand,e&&n)},r.prototype.onSearchTextChanged=function(){var t=this;this.onSearchTextChangedDebounced||(this.onSearchTextChangedDebounced=u.debounce((function(){t.dispatchEvent({type:"searchChanged",searchText:t.eFilterTextField.getValue()})}),300)),this.onSearchTextChangedDebounced()},r.prototype.onExpandClicked=function(){var t=this.currentExpandState===_i.EXPANDED?{type:"collapseAll"}:{type:"expandAll"};this.dispatchEvent(t)},r.prototype.setExpandState=function(t){this.currentExpandState=t,u.setDisplayed(this.eExpandChecked,this.currentExpandState===_i.EXPANDED),u.setDisplayed(this.eExpandUnchecked,this.currentExpandState===_i.COLLAPSED),u.setDisplayed(this.eExpandIndeterminate,this.currentExpandState===_i.INDETERMINATE)},Ua([n("columnModel")],r.prototype,"columnModel",void 0),Ua([o("eExpand")],r.prototype,"eExpand",void 0),Ua([o("eFilterTextField")],r.prototype,"eFilterTextField",void 0),Ua([t],r.prototype,"preConstruct",null),Ua([i],r.prototype,"postConstruct",null),r}(a),za=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Wa=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},Ka=function(t){function e(r){void 0===r&&(r=!1);var n=t.call(this,e.TEMPLATE)||this;return n.expanded=!1,n.hideHeader=r,n}return za(e,t),e.prototype.postConstruct=function(){this.eExpandChecked=u.createIconNoSpan("columnSelectOpen",this.gridOptionsService),this.eExpandUnchecked=u.createIconNoSpan("columnSelectClosed",this.gridOptionsService),this.eExpand.appendChild(this.eExpandChecked),this.eExpand.appendChild(this.eExpandUnchecked)},e.prototype.setColumn=function(t){var e=this;this.column=t,this.eFilterName.innerText=this.columnModel.getDisplayNameForColumn(this.column,"filterToolPanel",!1)||"",this.addManagedListener(this.eFilterToolPanelHeader,"click",this.toggleExpanded.bind(this)),this.addManagedListener(this.eFilterToolPanelHeader,"keydown",(function(t){t.key!==c.ENTER&&t.key!==c.SPACE||(t.preventDefault(),e.toggleExpanded())})),this.addManagedListener(this.eventService,l.EVENT_FILTER_OPENED,this.onFilterOpened.bind(this)),this.addInIcon("filter",this.eFilterIcon,this.column),u.setDisplayed(this.eFilterIcon,this.isFilterActive(),{skipAriaHidden:!0}),u.setDisplayed(this.eExpandChecked,!1),this.hideHeader?(u.setDisplayed(this.eFilterToolPanelHeader,!1),this.eFilterToolPanelHeader.removeAttribute("tabindex")):this.eFilterToolPanelHeader.setAttribute("tabindex","0"),this.addManagedListener(this.column,D.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this)),this.addManagedListener(this.eventService,l.EVENT_FILTER_DESTROYED,this.onFilterDestroyed.bind(this))},e.prototype.getColumn=function(){return this.column},e.prototype.getColumnFilterName=function(){return this.columnModel.getDisplayNameForColumn(this.column,"filterToolPanel",!1)},e.prototype.addCssClassToTitleBar=function(t){this.eFilterToolPanelHeader.classList.add(t)},e.prototype.addInIcon=function(t,e,r){if(null!=e){var n=u.createIconNoSpan(t,this.gridOptionsService,r);e.appendChild(n)}},e.prototype.isFilterActive=function(){return this.filterManager.isFilterActive(this.column)},e.prototype.onFilterChanged=function(){u.setDisplayed(this.eFilterIcon,this.isFilterActive(),{skipAriaHidden:!0}),this.dispatchEvent({type:D.EVENT_FILTER_CHANGED})},e.prototype.onFilterDestroyed=function(t){this.expanded&&"api"===t.source&&t.column.getId()===this.column.getId()&&this.columnModel.getPrimaryColumn(this.column)&&(this.removeFilterElement(),this.addFilterElement())},e.prototype.toggleExpanded=function(){this.expanded?this.collapse():this.expand()},e.prototype.expand=function(){this.expanded||(this.expanded=!0,u.setAriaExpanded(this.eFilterToolPanelHeader,!0),u.setDisplayed(this.eExpandChecked,!0),u.setDisplayed(this.eExpandUnchecked,!1),this.addFilterElement())},e.prototype.addFilterElement=function(){var t=this,e=u.loadTemplate('<div class="ag-filter-toolpanel-instance-filter"></div>'),r=this.filterManager.getOrCreateFilterWrapper(this.column,"TOOLBAR");if(r){var n=r.filterPromise,o=r.guiPromise;null==n||n.then((function(r){t.underlyingFilter=r,r&&o.then((function(n){n&&e.appendChild(n),t.agFilterToolPanelBody.appendChild(e),r.afterGuiAttached&&r.afterGuiAttached({container:"toolPanel"})}))}))}},e.prototype.collapse=function(){var t,e;this.expanded&&(this.expanded=!1,u.setAriaExpanded(this.eFilterToolPanelHeader,!1),this.removeFilterElement(),u.setDisplayed(this.eExpandChecked,!1),u.setDisplayed(this.eExpandUnchecked,!0),null===(e=null===(t=this.underlyingFilter)||void 0===t?void 0:t.afterGuiDetached)||void 0===e||e.call(t))},e.prototype.removeFilterElement=function(){u.clearElement(this.agFilterToolPanelBody)},e.prototype.isExpanded=function(){return this.expanded},e.prototype.refreshFilter=function(t){var e;if(this.expanded){var r=this.underlyingFilter;r&&(t?"function"==typeof r.refreshVirtualList&&r.refreshVirtualList():null===(e=r.afterGuiDetached)||void 0===e||e.call(r))}},e.prototype.onFilterOpened=function(t){"COLUMN_MENU"===t.source&&t.column===this.column&&this.expanded&&this.collapse()},e.TEMPLATE='\n        <div class="ag-filter-toolpanel-instance">\n            <div class="ag-filter-toolpanel-header ag-filter-toolpanel-instance-header" ref="eFilterToolPanelHeader" role="button" aria-expanded="false">\n                <div ref="eExpand" class="ag-filter-toolpanel-expand"></div>\n                <span ref="eFilterName" class="ag-header-cell-text"></span>\n                <span ref="eFilterIcon" class="ag-header-icon ag-filter-icon ag-filter-toolpanel-instance-header-icon" aria-hidden="true"></span>\n            </div>\n            <div class="ag-filter-toolpanel-instance-body ag-filter" ref="agFilterToolPanelBody"></div>\n        </div>',Wa([o("eFilterToolPanelHeader")],e.prototype,"eFilterToolPanelHeader",void 0),Wa([o("eFilterName")],e.prototype,"eFilterName",void 0),Wa([o("agFilterToolPanelBody")],e.prototype,"agFilterToolPanelBody",void 0),Wa([o("eFilterIcon")],e.prototype,"eFilterIcon",void 0),Wa([o("eExpand")],e.prototype,"eExpand",void 0),Wa([n("filterManager")],e.prototype,"filterManager",void 0),Wa([n("columnModel")],e.prototype,"columnModel",void 0),Wa([i],e.prototype,"postConstruct",null),e}(a),Xa=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ya=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},qa=function(e){function r(t,r,n,o,i){var a=e.call(this)||this;return a.columnGroup=t,a.childFilterComps=r,a.depth=o,a.expandedCallback=n,a.showingColumn=i,a}return Xa(r,e),r.prototype.preConstruct=function(){this.setTemplate(r.TEMPLATE,{filterGroupComp:{cssIdentifier:"filter-toolpanel",direction:"vertical"}})},r.prototype.init=function(){var t=this;this.setGroupTitle(),this.filterGroupComp.setAlignItems("stretch"),this.filterGroupComp.addCssClass("ag-filter-toolpanel-group-level-"+this.depth),this.filterGroupComp.addCssClassToTitleBar("ag-filter-toolpanel-group-level-"+this.depth+"-header"),this.childFilterComps.forEach((function(e){t.filterGroupComp.addItem(e),e.addCssClassToTitleBar("ag-filter-toolpanel-group-level-"+(t.depth+1)+"-header")})),this.refreshFilterClass(),this.addExpandCollapseListeners(),this.addFilterChangedListeners(),this.setupTooltip()},r.prototype.setupTooltip=function(){var t=this;if(this.showingColumn){var e=function(){var e=t.columnGroup.getColDef().headerTooltip;t.setTooltip(e)};e(),this.addManagedListener(this.eventService,l.EVENT_NEW_COLUMNS_LOADED,e)}},r.prototype.getTooltipParams=function(){var t=e.prototype.getTooltipParams.call(this);return t.location="filterToolPanelColumnGroup",t},r.prototype.addCssClassToTitleBar=function(t){this.filterGroupComp.addCssClassToTitleBar(t)},r.prototype.refreshFilters=function(t){this.childFilterComps.forEach((function(e){e instanceof r?e.refreshFilters(t):e.refreshFilter(t)}))},r.prototype.isColumnGroup=function(){return this.columnGroup instanceof A},r.prototype.isExpanded=function(){return this.filterGroupComp.isExpanded()},r.prototype.getChildren=function(){return this.childFilterComps},r.prototype.getFilterGroupName=function(){return this.filterGroupName?this.filterGroupName:""},r.prototype.getFilterGroupId=function(){return this.columnGroup.getId()},r.prototype.hideGroupItem=function(t,e){this.filterGroupComp.hideItem(t,e)},r.prototype.hideGroup=function(t){this.setDisplayed(!t)},r.prototype.forEachToolPanelFilterChild=function(t){this.childFilterComps.forEach((function(e){e instanceof Ka&&t(e)}))},r.prototype.addExpandCollapseListeners=function(){var t=this,e=this.isColumnGroup()?function(){return t.expandedCallback()}:function(){return t.forEachToolPanelFilterChild((function(t){return t.expand()}))},r=this.isColumnGroup()?function(){return t.expandedCallback()}:function(){return t.forEachToolPanelFilterChild((function(t){return t.collapse()}))};this.addManagedListener(this.filterGroupComp,J.EVENT_EXPANDED,e),this.addManagedListener(this.filterGroupComp,J.EVENT_COLLAPSED,r)},r.prototype.getColumns=function(){return this.columnGroup instanceof A?this.columnGroup.getLeafColumns():[this.columnGroup]},r.prototype.addFilterChangedListeners=function(){var t=this;this.getColumns().forEach((function(e){t.addManagedListener(e,D.EVENT_FILTER_CHANGED,(function(){return t.refreshFilterClass()}))})),this.columnGroup instanceof A||this.addManagedListener(this.eventService,l.EVENT_FILTER_OPENED,this.onFilterOpened.bind(this))},r.prototype.refreshFilterClass=function(){var t=this.getColumns();this.filterGroupComp.addOrRemoveCssClass("ag-has-filter",t.some((function(t){return t.isFilterActive()})))},r.prototype.onFilterOpened=function(t){"COLUMN_MENU"===t.source&&t.column===this.columnGroup&&this.isExpanded()&&this.collapse()},r.prototype.expand=function(){this.filterGroupComp.toggleGroupExpand(!0)},r.prototype.collapse=function(){this.filterGroupComp.toggleGroupExpand(!1)},r.prototype.setGroupTitle=function(){this.filterGroupName=this.columnGroup instanceof A?this.getColumnGroupName(this.columnGroup):this.getColumnName(this.columnGroup),this.filterGroupComp.setTitle(this.filterGroupName||"")},r.prototype.getColumnGroupName=function(t){return this.columnModel.getDisplayNameForProvidedColumnGroup(null,t,"filterToolPanel")},r.prototype.getColumnName=function(t){return this.columnModel.getDisplayNameForColumn(t,"filterToolPanel",!1)},r.prototype.destroyFilters=function(){this.childFilterComps=this.destroyBeans(this.childFilterComps),u.clearElement(this.getGui())},r.prototype.destroy=function(){this.destroyFilters(),e.prototype.destroy.call(this)},r.TEMPLATE='<div class="ag-filter-toolpanel-group-wrapper">\n            <ag-group-component ref="filterGroupComp"></ag-group-component>\n        </div>',Ya([o("filterGroupComp")],r.prototype,"filterGroupComp",void 0),Ya([n("columnModel")],r.prototype,"columnModel",void 0),Ya([t],r.prototype,"preConstruct",null),Ya([i],r.prototype,"init",null),r}(a),Za=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ja=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},$a=function(t){function e(){var r=t.call(this,e.TEMPLATE)||this;return r.initialised=!1,r.filterGroupComps=[],r}return Za(e,t),e.prototype.init=function(t){var e=this;this.initialised=!0;var r={suppressExpandAll:!1,suppressFilterSearch:!1,suppressSyncLayoutWithGrid:!1,api:this.gridApi,columnApi:this.columnApi,context:this.gridOptionsService.context};u.mergeDeep(r,t),this.params=r,this.params.suppressSyncLayoutWithGrid||this.addManagedListener(this.eventService,l.EVENT_COLUMN_MOVED,(function(){return e.onColumnsChanged()})),this.addManagedListener(this.eventService,l.EVENT_NEW_COLUMNS_LOADED,(function(){return e.onColumnsChanged()})),this.addManagedListener(this.eventService,l.EVENT_TOOL_PANEL_VISIBLE_CHANGED,(function(t){"filters"===t.key&&e.refreshFilters(t.visible)})),this.columnModel.isReady()&&this.onColumnsChanged()},e.prototype.onColumnsChanged=function(){var t=this.columnModel.isPivotMode();!this.params.suppressSyncLayoutWithGrid&&!t?this.syncFilterLayout():this.buildTreeFromProvidedColumnDefs()},e.prototype.syncFilterLayout=function(){this.toolPanelColDefService.syncLayoutWithGrid(this.setFiltersLayout.bind(this))},e.prototype.buildTreeFromProvidedColumnDefs=function(){var t=this.columnModel.getPrimaryColumnTree();this.recreateFilters(t)},e.prototype.setFiltersLayout=function(t){var e=this.toolPanelColDefService.createColumnTree(t);this.recreateFilters(e)},e.prototype.recreateFilters=function(t){var e=this,r=this.gridOptionsService.getDocument().activeElement,n=this.getExpansionState();this.destroyFilters(),this.filterGroupComps=this.recursivelyAddComps(t,0,n);var o=this.filterGroupComps.length;o&&(this.filterGroupComps.forEach((function(t){return e.appendChild(t)})),this.setFirstAndLastVisible(0,o-1)),u.exists(this.searchFilterText)&&this.searchFilters(this.searchFilterText),this.fireExpandedEvent(),this.getGui().contains(r)&&r.focus()},e.prototype.recursivelyAddComps=function(t,e,r){var n=this;return u.flatten(t.map((function(t){if(t instanceof A)return u.flatten(n.recursivelyAddFilterGroupComps(t,e,r));var o=t;if(!n.shouldDisplayFilter(o))return[];var i=new Ka(0===e);if(n.createBean(i),i.setColumn(o),r.get(o.getId())&&i.expand(),e>0)return i;var a=n.createBean(new qa(o,[i],n.onGroupExpanded.bind(n),e,!0));return a.addCssClassToTitleBar("ag-filter-toolpanel-header"),r.get(a.getFilterGroupId())||a.collapse(),a})))},e.prototype.recursivelyAddFilterGroupComps=function(t,e,r){if(this.filtersExistInChildren(t.getChildren())){var n=t.getColGroupDef();if(n&&n.suppressFiltersToolPanel)return[];var o=t.isPadding()?e:e+1,i=u.flatten(this.recursivelyAddComps(t.getChildren(),o,r));if(t.isPadding())return i;var a=new qa(t,i,this.onGroupExpanded.bind(this),e,!1);return this.createBean(a),a.addCssClassToTitleBar("ag-filter-toolpanel-header"),!1===r.get(a.getFilterGroupId())&&a.collapse(),[a]}},e.prototype.filtersExistInChildren=function(t){var e=this;return t.some((function(t){return t instanceof A?e.filtersExistInChildren(t.getChildren()):e.shouldDisplayFilter(t)}))},e.prototype.shouldDisplayFilter=function(t){var e=t.getColDef()&&t.getColDef().suppressFiltersToolPanel;return t.isFilterAllowed()&&!e},e.prototype.getExpansionState=function(){var t=new Map,e=function(r){t.set(r.getFilterGroupId(),r.isExpanded()),r.getChildren().forEach((function(r){r instanceof qa?e(r):t.set(r.getColumn().getId(),r.isExpanded())}))};return this.filterGroupComps.forEach(e),t},e.prototype.refresh=function(){},e.prototype.setVisible=function(e){t.prototype.setDisplayed.call(this,e),e&&!this.initialised&&this.init(this.params)},e.prototype.expandFilterGroups=function(t,e){var r=[],n=function(o){var i=o.getFilterGroupId();(!e||u.includes(e,i))&&(t&&o.isColumnGroup()?o.expand():o.collapse(),r.push(i)),o.getChildren().forEach((function(t){t instanceof qa&&n(t)}))};if(this.filterGroupComps.forEach(n),this.onGroupExpanded(),e){var o=e.filter((function(t){return r.indexOf(t)<0}));o.length>0&&console.warn("AG Grid: unable to find groups for these supplied groupIds:",o)}},e.prototype.expandFilters=function(t,e){var r=[],n=function(o){if(o instanceof qa){var i=!1;return o.getChildren().forEach((function(e){n(e)&&(t?(o.expand(),i=!0):o.isColumnGroup()||o.collapse())})),i}var a=o.getColumn().getColId(),s=!e||u.includes(e,a);return s&&(t?o.expand():o.collapse(),r.push(a)),s};if(this.filterGroupComps.forEach(n),this.onGroupExpanded(),e){var o=e.filter((function(t){return r.indexOf(t)<0}));o.length>0&&console.warn("AG Grid: unable to find columns for these supplied colIds:",o)}},e.prototype.onGroupExpanded=function(){this.fireExpandedEvent()},e.prototype.fireExpandedEvent=function(){var t,e=0,r=0,n=function(t){t.isColumnGroup()&&(t.isExpanded()?e++:r++,t.getChildren().forEach((function(t){t instanceof qa&&n(t)})))};this.filterGroupComps.forEach(n),t=e>0&&r>0?_i.INDETERMINATE:r>0?_i.COLLAPSED:_i.EXPANDED,this.dispatchEvent({type:"groupExpanded",state:t})},e.prototype.performFilterSearch=function(t){this.searchFilterText=u.exists(t)?t.toLowerCase():null,this.searchFilters(this.searchFilterText)},e.prototype.searchFilters=function(t){var e,r,n=function(e){return!u.exists(t)||-1!==e.toLowerCase().indexOf(t)},o=function(t,e){if(!(t instanceof qa))return n(t.getColumnFilterName()||"");var r=t.getChildren(),i=n(t.getFilterGroupName()),a=e||i;if(a){t.hideGroup(!1);for(var s=0;s<r.length;s++)o(r[s],a),t.hideGroupItem(!1,s);return!0}var l=!1;return r.forEach((function(r,n){var i=o(r,e);t.hideGroupItem(!i,n),i&&(l=!0)})),t.hideGroup(!l),l};this.filterGroupComps.forEach((function(t,n){o(t,!1),void 0===e?t.containsCssClass("ag-hidden")||(e=n,r=n):t.containsCssClass("ag-hidden")||r===n||(r=n)})),this.setFirstAndLastVisible(e,r)},e.prototype.setFirstAndLastVisible=function(t,e){this.filterGroupComps.forEach((function(r,n){r.removeCssClass("ag-first-group-visible"),r.removeCssClass("ag-last-group-visible"),n===t&&r.addCssClass("ag-first-group-visible"),n===e&&r.addCssClass("ag-last-group-visible")}))},e.prototype.refreshFilters=function(t){this.filterGroupComps.forEach((function(e){return e.refreshFilters(t)}))},e.prototype.destroyFilters=function(){this.filterGroupComps=this.destroyBeans(this.filterGroupComps),u.clearElement(this.getGui())},e.prototype.destroy=function(){this.destroyFilters(),t.prototype.destroy.call(this)},e.TEMPLATE='<div class="ag-filter-list-panel"></div>',Ja([n("gridApi")],e.prototype,"gridApi",void 0),Ja([n("columnApi")],e.prototype,"columnApi",void 0),Ja([n("toolPanelColDefService")],e.prototype,"toolPanelColDefService",void 0),Ja([n("columnModel")],e.prototype,"columnModel",void 0),e}(a),Qa=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ts=function(){return(ts=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},es=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},rs=function(t){function e(){var r=t.call(this,e.TEMPLATE)||this;return r.initialised=!1,r.listenerDestroyFuncs=[],r}return Qa(e,t),e.prototype.init=function(t){this.initialised&&(this.listenerDestroyFuncs.forEach((function(t){return t()})),this.listenerDestroyFuncs=[]),this.initialised=!0;var e={suppressExpandAll:!1,suppressFilterSearch:!1,suppressSyncLayoutWithGrid:!1,api:this.gridApi,columnApi:this.columnApi};this.params=ts(ts(ts({},e),t),{context:this.gridOptionsService.context}),this.filtersToolPanelHeaderPanel.init(this.params),this.filtersToolPanelListPanel.init(this.params);var r=this.params.suppressExpandAll,n=this.params.suppressFilterSearch;r&&n&&this.filtersToolPanelHeaderPanel.setDisplayed(!1),this.listenerDestroyFuncs.push(this.addManagedListener(this.filtersToolPanelHeaderPanel,"expandAll",this.onExpandAll.bind(this)),this.addManagedListener(this.filtersToolPanelHeaderPanel,"collapseAll",this.onCollapseAll.bind(this)),this.addManagedListener(this.filtersToolPanelHeaderPanel,"searchChanged",this.onSearchChanged.bind(this)),this.addManagedListener(this.filtersToolPanelListPanel,"groupExpanded",this.onGroupExpanded.bind(this)))},e.prototype.setVisible=function(e){t.prototype.setDisplayed.call(this,e),e&&!this.initialised&&this.init(this.params)},e.prototype.onExpandAll=function(){this.filtersToolPanelListPanel.expandFilterGroups(!0)},e.prototype.onCollapseAll=function(){this.filtersToolPanelListPanel.expandFilterGroups(!1)},e.prototype.onSearchChanged=function(t){this.filtersToolPanelListPanel.performFilterSearch(t.searchText)},e.prototype.setFilterLayout=function(t){this.filtersToolPanelListPanel.setFiltersLayout(t)},e.prototype.onGroupExpanded=function(t){this.filtersToolPanelHeaderPanel.setExpandState(t.state)},e.prototype.expandFilterGroups=function(t){this.filtersToolPanelListPanel.expandFilterGroups(!0,t)},e.prototype.collapseFilterGroups=function(t){this.filtersToolPanelListPanel.expandFilterGroups(!1,t)},e.prototype.expandFilters=function(t){this.filtersToolPanelListPanel.expandFilters(!0,t)},e.prototype.collapseFilters=function(t){this.filtersToolPanelListPanel.expandFilters(!1,t)},e.prototype.syncLayoutWithGrid=function(){this.filtersToolPanelListPanel.syncFilterLayout()},e.prototype.refresh=function(){this.init(this.params)},e.prototype.destroy=function(){t.prototype.destroy.call(this)},e.TEMPLATE='<div class="ag-filter-toolpanel">\n            <ag-filters-tool-panel-header ref="filtersToolPanelHeaderPanel"></ag-filters-tool-panel-header>\n            <ag-filters-tool-panel-list ref="filtersToolPanelListPanel"></ag-filters-tool-panel-list>\n         </div>',es([o("filtersToolPanelHeaderPanel")],e.prototype,"filtersToolPanelHeaderPanel",void 0),es([o("filtersToolPanelListPanel")],e.prototype,"filtersToolPanelListPanel",void 0),es([n("gridApi")],e.prototype,"gridApi",void 0),es([n("columnApi")],e.prototype,"columnApi",void 0),e}(a),ns={version:"30.2.0",moduleName:s.FiltersToolPanelModule,beans:[],agStackComponents:[{componentName:"AgFiltersToolPanelHeader",componentClass:Ha},{componentName:"AgFiltersToolPanelList",componentClass:$a}],userComponents:[{componentName:"agFiltersToolPanel",componentClass:rs}],dependantModules:[vo,Ft]},os=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),is=function(){function t(t,e,r){this._encode=t,this._decode=e,this._rangeCallback=r}return t.prototype.floor=function(t){var e=new Date(t),r=this._encode(e);return this._decode(r)},t.prototype.ceil=function(t){var e=new Date(Number(t)-1),r=this._encode(e);return this._decode(r+1)},t.prototype.range=function(t,e,r){var n,o=null===(n=this._rangeCallback)||void 0===n?void 0:n.call(this,t,e),i=this._encode(r?this.floor(t):this.ceil(t)),a=this._encode(r?this.ceil(e):this.floor(e));if(a<i)return[];for(var s=[],l=i;l<=a;l++){var u=this._decode(l);s.push(u)}return null==o||o(),s},t}(),as=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return os(e,t),e.prototype.getOffset=function(t,e){var r="number"==typeof t||t instanceof Date?this._encode(new Date(t)):0;return Math.floor(r)%e},e.prototype.every=function(t,e){var r,n=this,o=0,i=(null!=e?e:{}).snapTo,a=void 0===i?"start":i;if("string"==typeof a){var s=o;r=function(e,r){var i="start"===a?e:r;return o=n.getOffset(i,t),function(){return o=s}}}else"number"==typeof a?o=this.getOffset(new Date(a),t):a instanceof Date&&(o=this.getOffset(a,t));return new is((function(e){var r=n._encode(e);return Math.floor((r-o)/t)}),(function(e){return n._decode(e*t+o)}),r)},e}(is);var ss=new as((function(t){return t.getTime()}),(function(t){return new Date(t)}));new Date(0).getFullYear();var ls=6e4*(new Date).getTimezoneOffset();var us=new as((function(t){return Math.floor((t.getTime()-ls)/1e3)}),(function(t){return new Date(ls+1e3*t)})),cs=6e4*(new Date).getTimezoneOffset();var ps=new as((function(t){return Math.floor((t.getTime()-cs)/6e4)}),(function(t){return new Date(cs+6e4*t)})),ds=6e4*(new Date).getTimezoneOffset();var hs=new as((function(t){return Math.floor((t.getTime()-ds)/36e5)}),(function(t){return new Date(ds+36e5*t)}));var fs=new as((function(t){var e=6e4*t.getTimezoneOffset();return Math.floor((t.getTime()-e)/864e5)}),(function(t){var e=new Date(1970,0,1);return e.setDate(e.getDate()+t),e}));function vs(t){var e=new Date(2023,0,1+t).getTime();return new as((function(t){var r=t.getTime();return Math.floor((r-e)/6048e5)}),(function(t){var r=new Date(e);return r.setDate(r.getDate()+7*t),r}))}var ys=vs(0),gs=vs(1),ms=vs(2),bs=vs(3),Cs=vs(4),Ss=vs(5),ws=vs(6);var xs=new as((function(t){return 12*t.getFullYear()+t.getMonth()}),(function(t){var e=Math.floor(t/12);return new Date(e,t-12*e,1)}));var Os=new as((function(t){return t.getFullYear()}),(function(t){var e=new Date;return e.setFullYear(t),e.setMonth(0,1),e.setHours(0,0,0,0),e}));var Es=new as((function(t){return Math.floor(t.getTime()/6e4)}),(function(t){return new Date(6e4*t)}));var Ts=new as((function(t){return Math.floor(t.getTime()/36e5)}),(function(t){return new Date(36e5*t)}));var Ps=new as((function(t){return Math.floor(t.getTime()/864e5)}),(function(t){var e=new Date(0);return e.setUTCDate(e.getUTCDate()+t),e.setUTCHours(0,0,0,0),e}));var Ds=new as((function(t){return 12*t.getUTCFullYear()+t.getUTCMonth()}),(function(t){var e=Math.floor(t/12),r=t-12*e;return new Date(Date.UTC(e,r,1))}));var As=new as((function(t){return t.getUTCFullYear()}),(function(t){var e=new Date;return e.setUTCFullYear(t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0),e})),Ms=Object.freeze({__proto__:null,millisecond:ss,second:us,minute:ps,hour:hs,day:fs,sunday:ys,monday:gs,tuesday:ms,wednesday:bs,thursday:Cs,friday:Ss,saturday:ws,month:xs,year:Os,utcMinute:Es,utcHour:Ts,utcDay:Ps,utcMonth:Ds,utcYear:As}),_s=[/Android/i,/webOS/i,/iPhone/i,/iPad/i,/iPod/i,/BlackBerry/i,/Windows Phone/i];function Rs(){var t=navigator.userAgent;return!_s.some((function(e){return e.test(t)}))}var ks,Fs=function(){function t(t){var e=t.document,r=void 0===e?window.document:e,n=t.width,o=void 0===n?600:n,i=t.height,a=void 0===i?300:i,s=t.domLayer,l=void 0!==s&&s,u=t.zIndex,c=void 0===u?0:u,p=t.name,d=void 0===p?void 0:p,h=t.overrideDevicePixelRatio,f=void 0===h?void 0:h;this._container=void 0,this._enabled=!0,this._pixelRatio=NaN,this._width=0,this._height=0,this.document=r,this.element=r.createElement("canvas"),this.element.width=o,this.element.height=a,this.context=this.element.getContext("2d"),this.imageSource=this.context.canvas;var v=this.element.style;v.userSelect="none",v.display="block",l&&(v.position="absolute",v.zIndex=String(c),v.top="0",v.left="0",v.pointerEvents="none",v.opacity="1",d&&(this.element.id=d)),this.setPixelRatio(f),this.resize(o,a)}return Object.defineProperty(t.prototype,"container",{get:function(){return this._container},set:function(t){this._container!==t&&(this.remove(),t&&t.appendChild(this.element),this._container=t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"enabled",{get:function(){return this._enabled},set:function(t){this.element.style.display=t?"block":"none",this._enabled=!!t},enumerable:!1,configurable:!0}),t.prototype.remove=function(){var t=this.element.parentNode;null!=t&&t.removeChild(this.element)},t.prototype.destroy=function(){this.element.remove(),this.element.width=0,this.element.height=0,this.context.clearRect(0,0,0,0),Object.freeze(this)},t.prototype.snapshot=function(){},t.prototype.clear=function(){this.context.save(),this.context.resetTransform(),this.context.clearRect(0,0,this.width,this.height),this.context.restore()},t.prototype.toImage=function(){var t=this.document.createElement("img");return t.src=this.getDataURL(),t},t.prototype.getDataURL=function(t){return this.element.toDataURL(t)},t.prototype.download=function(t,e){void 0===e&&(e="image/png"),t=(null!=t?t:"").trim()||"image";var r=this.getDataURL(e),n=this.document,o=n.createElement("a");o.href=r,o.download=t,o.style.display="none",n.body.appendChild(o),o.click(),n.body.removeChild(o)},Object.defineProperty(t.prototype,"pixelRatio",{get:function(){return this._pixelRatio},enumerable:!1,configurable:!0}),t.prototype.setPixelRatio=function(e){var r=null!=e?e:window.devicePixelRatio;Rs()||(r=1),t.overrideScale(this.context,r),this._pixelRatio=r},Object.defineProperty(t.prototype,"pixelated",{get:function(){return"pixelated"===this.element.style.imageRendering},set:function(t){this.element.style.imageRendering=t?"pixelated":"auto"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),t.prototype.resize=function(t,e){if(t>0&&e>0){var r=this.element,n=this.context,o=this.pixelRatio;r.width=Math.round(t*o),r.height=Math.round(e*o),r.style.width=t+"px",r.style.height=e+"px",n.resetTransform(),this._width=t,this._height=e}},Object.defineProperty(t,"textMeasuringContext",{get:function(){if(this._textMeasuringContext)return this._textMeasuringContext;var t=document.createElement("canvas");return this._textMeasuringContext=t.getContext("2d"),this._textMeasuringContext},enumerable:!1,configurable:!0}),Object.defineProperty(t,"svgText",{get:function(){if(this._svgText)return this._svgText;var t="http://www.w3.org/2000/svg",e=document.createElementNS(t,"svg");e.setAttribute("width","100"),e.setAttribute("height","100"),e.classList?e.classList.add("text-measuring-svg"):e.setAttribute("class","text-measuring-svg"),e.style.position="absolute",e.style.top="-1000px",e.style.visibility="hidden";var r=document.createElementNS(t,"text");return r.setAttribute("x","0"),r.setAttribute("y","30"),r.setAttribute("text","black"),e.appendChild(r),document.body.appendChild(e),this._svgText=r,r},enumerable:!1,configurable:!0}),Object.defineProperty(t,"has",{get:function(){if(this._has)return this._has;var t=navigator.userAgent.indexOf("Chrome")>-1,e=navigator.userAgent.indexOf("Firefox")>-1,r=!t&&navigator.userAgent.indexOf("Safari")>-1;return this._has=Object.freeze({textMetrics:void 0!==this.textMeasuringContext.measureText("test").actualBoundingBoxDescent&&!e&&!r,getTransform:void 0!==this.textMeasuringContext.getTransform}),this._has},enumerable:!1,configurable:!0}),t.measureText=function(t,e,r,n){var o=this.textMeasuringContext;return o.font=e,o.textBaseline=r,o.textAlign=n,o.measureText(t)},t.getTextSize=function(t,e){if(this.has.textMetrics){var r=this.textMeasuringContext;r.font=e;var n=r.measureText(t);return{width:n.width,height:n.actualBoundingBoxAscent+n.actualBoundingBoxDescent}}return this.measureSvgText(t,e)},t.measureSvgText=function(t,e){var r=this.textSizeCache,n=r[e];if(n){var o=n[t];if(o)return o}else r[e]={};var i=this.svgText;i.style.font=e,i.textContent=t;var a=i.getBBox(),s={width:a.width,height:a.height};return r[e][t]=s,s},t.overrideScale=function(t,e){var r=0,n={save:function(){this.$save(),r++},restore:function(){if(!(r>0))throw new Error("AG Charts - Unable to restore() past depth 0");this.$restore(),r--},setTransform:function(t,r,n,o,i,a){"object"==typeof t?this.$setTransform(t):this.$setTransform(t*e,r*e,n*e,o*e,i*e,a*e)},resetTransform:function(){this.$setTransform(e,0,0,e,0,0)},verifyDepthZero:function(){if(0!==r)throw new Error("AG Charts - Save/restore depth is non-zero: "+r)}};for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t["$"+o]||(t["$"+o]=t[o]),t[o]=n[o])},t.textSizeCache={},t}(),Is=function(){return(Is=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},Ls=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},Ns=function(){function t(t,e,r,n){this.x=t,this.y=e,this.width=r,this.height=n}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.equals=function(t){return this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height},t.prototype.containsPoint=function(t,e){return t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height},t.prototype.collidesBBox=function(t){return this.x<t.x+t.width&&this.x+this.width>t.x&&this.y<t.y+t.height&&this.y+this.height>t.y},t.prototype.isInfinite=function(){return Math.abs(this.x)===1/0||Math.abs(this.y)===1/0||Math.abs(this.width)===1/0||Math.abs(this.height)===1/0},t.prototype.shrink=function(t,e){var r=this,n=function(t,e){switch(t){case"top":r.y+=e;case"bottom":r.height-=e;break;case"left":r.x+=e;case"right":r.width-=e;break;case"vertical":r.y+=e,r.height-=2*e;break;case"horizontal":r.x+=e,r.width-=2*e;break;default:r.x+=e,r.width-=2*e,r.y+=e,r.height-=2*e}};return"number"==typeof t?n(e,t):Object.entries(t).forEach((function(t){var e=Ls(t,2),r=e[0],o=e[1];return n(r,o)})),this},t.prototype.grow=function(t,e){if("number"==typeof t)this.shrink(-t,e);else{var r=Is({},t);for(var n in r)r[n]*=-1;this.shrink(r)}return this},t.merge=function(e){var r=1/0,n=1/0,o=-1/0,i=-1/0;return e.forEach((function(t){t.x<r&&(r=t.x),t.y<n&&(n=t.y),t.x+t.width>o&&(o=t.x+t.width),t.y+t.height>i&&(i=t.y+t.height)})),new t(r,n,o-r,i-n)},t}(),Gs=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},js=function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t},Vs=function(){function t(t){void 0===t&&(t=[1,0,0,1,0,0]),this.elements=t}return Object.defineProperty(t.prototype,"e",{get:function(){return js([],Gs(this.elements))},enumerable:!1,configurable:!0}),t.prototype.setElements=function(t){var e=this.elements;return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],this},Object.defineProperty(t.prototype,"identity",{get:function(){var t=this.elements;return 1===t[0]&&0===t[1]&&0===t[2]&&1===t[3]&&0===t[4]&&0===t[5]},enumerable:!1,configurable:!0}),t.prototype.AxB=function(t,e,r){var n=t[0]*e[0]+t[2]*e[1],o=t[1]*e[0]+t[3]*e[1],i=t[0]*e[2]+t[2]*e[3],a=t[1]*e[2]+t[3]*e[3],s=t[0]*e[4]+t[2]*e[5]+t[4],l=t[1]*e[4]+t[3]*e[5]+t[5];(r=null!=r?r:t)[0]=n,r[1]=o,r[2]=i,r[3]=a,r[4]=s,r[5]=l},t.prototype.multiplySelf=function(t){return this.AxB(this.elements,t.elements),this},t.prototype.multiply=function(e){var r=new Array(6);return this.AxB(this.elements,e.elements,r),new t(r)},t.prototype.preMultiplySelf=function(t){return this.AxB(t.elements,this.elements,this.elements),this},t.prototype.inverse=function(){var e=this.elements,r=e[0],n=e[1],o=e[2],i=e[3],a=e[4],s=e[5],l=1/(r*i-n*o);return new t([i*=l,-(n*=l),-(o*=l),r*=l,o*s-i*a,n*a-r*s])},t.prototype.inverseTo=function(t){var e=this.elements,r=e[0],n=e[1],o=e[2],i=e[3],a=e[4],s=e[5],l=1/(r*i-n*o);return r*=l,n*=l,o*=l,i*=l,t.setElements([i,-n,-o,r,o*s-i*a,n*a-r*s]),this},t.prototype.invertSelf=function(){var t=this.elements,e=t[0],r=t[1],n=t[2],o=t[3],i=t[4],a=t[5],s=1/(e*o-r*n);return e*=s,r*=s,n*=s,o*=s,t[0]=o,t[1]=-r,t[2]=-n,t[3]=e,t[4]=n*a-o*i,t[5]=r*i-e*a,this},t.prototype.transformPoint=function(t,e){var r=this.elements;return{x:t*r[0]+e*r[2]+r[4],y:t*r[1]+e*r[3]+r[5]}},t.prototype.transformBBox=function(t,e){var r=this.elements,n=r[0],o=r[1],i=r[2],a=r[3],s=.5*t.width,l=.5*t.height,u=t.x+s,c=t.y+l,p=Math.abs(s*n)+Math.abs(l*i),d=Math.abs(s*o)+Math.abs(l*a);return e||(e=new Ns(0,0,0,0)),e.x=u*n+c*i+r[4]-p,e.y=u*o+c*a+r[5]-d,e.width=p+p,e.height=d+d,e},t.prototype.toContext=function(t){if(!this.identity){var e=this.elements;t.transform(e[0],e[1],e[2],e[3],e[4],e[5])}},t.flyweight=function(e){return t.instance.setElements(e.elements)},t.updateTransformMatrix=function(t,e,r,n,o,i,a){var s,l,u=Gs([0,0],2),c=u[0],p=u[1],d=e,h=r;1===d&&1===h?(s=0,l=0):(s=null==(null==a?void 0:a.scalingCenterX)?c:null==a?void 0:a.scalingCenterX,l=null==(null==a?void 0:a.scalingCenterY)?p:null==a?void 0:a.scalingCenterY);var f,v,y=n,g=Math.cos(y),m=Math.sin(y);0===y?(f=0,v=0):(f=null==(null==a?void 0:a.rotationCenterX)?c:null==a?void 0:a.rotationCenterX,v=null==(null==a?void 0:a.rotationCenterY)?p:null==a?void 0:a.rotationCenterY);var b=o,C=i,S=s*(1-d)-f,w=l*(1-h)-v;return t.setElements([g*d,m*d,-m*h,g*h,g*S-m*w+f+b,m*S+g*w+v+C]),t},t.fromContext=function(e){var r=e.getTransform();return new t([r.a,r.b,r.c,r.d,r.e,r.f])},t.instance=new t,t}(),Bs={};function Us(t){var e,r=t.constructor,n=Object.prototype.hasOwnProperty.call(r,"className")?r.className:r.name;if(!n)throw new Error("The "+r+" is missing the 'className' property.");var o=(null!==(e=Bs[n])&&void 0!==e?e:0)+1;return Bs[n]=o,n+"-"+o}!function(t){t[t.NONE=0]="NONE",t[t.TRIVIAL=1]="TRIVIAL",t[t.MINOR=2]="MINOR",t[t.MAJOR=3]="MAJOR"}(ks||(ks={}));var Hs=function(){try{return new Function("return true"),!0}catch(t){return!1}}();function zs(t){var e=null!=t?t:{},r=e.changeCb,n=e.convertor;return function(e,o){var i="__"+o;e[o]||(Hs&&null==r&&null==n?function(t,e,r,n){var o=null!=n?n:{},i=o.redraw,a=void 0===i?ks.TRIVIAL:i,s=o.type,l=void 0===s?"normal":s,u=o.checkDirtyOnAssignment,c=new Function("value","\n        const oldValue = this."+r+";\n        if (value !== oldValue) {\n            this."+r+" = value;\n            "+("normal"===l?"this.markDirty(this, "+a+");":"")+"\n            "+("transform"===l?"this.markDirtyTransform("+a+");":"")+"\n            "+("path"===l?"if (!this._dirtyPath) { this._dirtyPath = true; this.markDirty(this, "+a+"); }":"")+"\n            "+("font"===l?"if (!this._dirtyFont) { this._dirtyFont = true; this.markDirty(this, "+a+"); }":"")+"\n        }\n        "+(void 0!==u&&u?"if (value != null && value._dirty > "+ks.NONE+") { this.markDirty(value, value._dirty); }":"")+"\n"),p=new Function("return this."+r+";");Object.defineProperty(t,e,{set:c,get:p,enumerable:!0,configurable:!0})}(e,o,i,t):function(t,e,r,n){var o=null!=n?n:{},i=o.redraw,a=void 0===i?ks.TRIVIAL:i,s=o.type,l=void 0===s?"normal":s,u=o.changeCb,c=o.convertor,p=o.checkDirtyOnAssignment,d=void 0!==p&&p;Object.defineProperty(t,e,{set:function(t){var e=this[r];(t=c?c(t):t)!==e&&(this[r]=t,"normal"===l&&this.markDirty(this,a),"transform"===l&&this.markDirtyTransform(a),"path"!==l||this._dirtyPath||(this._dirtyPath=!0,this.markDirty(this,a)),"font"!==l||this._dirtyFont||(this._dirtyFont=!0,this.markDirty(this,a)),u&&u(this)),d&&null!=t&&t._dirty>ks.NONE&&this.markDirty(t,t._dirty)},get:function(){return this[r]},enumerable:!0,configurable:!0})}(e,o,i,t))}}var Ws,Ks=function(){function t(){this._dirty=ks.MAJOR}return t.prototype.markDirty=function(t,e){void 0===e&&(e=ks.TRIVIAL),this._dirty>e||(this._dirty=e)},t.prototype.markClean=function(t){this._dirty=ks.NONE},t.prototype.isDirty=function(){return this._dirty>ks.NONE},t}(),Xs=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ys=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},qs=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Zs=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},Js=function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t};!function(t){t[t.All=0]="All",t[t.None=1]="None"}(Ws||(Ws={}));var $s=function(t){t.parent&&(t.parent.dirtyZIndex=!0),t.zIndexChanged()},Qs=function(t){function e(r){var n=(void 0===r?{}:r).isVirtual,o=t.call(this)||this;return o.serialNumber=e._nextSerialNumber++,o.id=Us(o),o.tag=NaN,o.isContainerNode=!1,o._virtualChildren=[],o._children=[],o.childSet={},o.matrix=new Vs,o.inverseMatrix=new Vs,o.dirtyTransform=!1,o.scalingX=1,o.scalingY=1,o.scalingCenterX=null,o.scalingCenterY=null,o.rotationCenterX=null,o.rotationCenterY=null,o.rotation=0,o.translationX=0,o.translationY=0,o.visible=!0,o.dirtyZIndex=!1,o.zIndex=0,o.zIndexSubOrder=void 0,o.pointerEvents=Ws.All,o.isVirtual=null!=n&&n,o}return Xs(e,t),Object.defineProperty(e.prototype,"datum",{get:function(){var t;return void 0!==this._datum?this._datum:null===(t=this._parent)||void 0===t?void 0:t.datum},set:function(t){this._datum=t},enumerable:!1,configurable:!0}),e.prototype._setLayerManager=function(t){var e,r,n,o;this._layerManager=t,this._debug=null==t?void 0:t.debug;try{for(var i=qs(this._children),a=i.next();!a.done;a=i.next()){a.value._setLayerManager(t)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}try{for(var s=qs(this._virtualChildren),l=s.next();!l.done;l=s.next()){l.value._setLayerManager(t)}}catch(t){n={error:t}}finally{try{l&&!l.done&&(o=s.return)&&o.call(s)}finally{if(n)throw n.error}}},Object.defineProperty(e.prototype,"layerManager",{get:function(){return this._layerManager},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this._parent},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"children",{get:function(){var t,e;if(0===this._virtualChildren.length)return this._children;var r=Js([],Zs(this._children));try{for(var n=qs(this._virtualChildren),o=n.next();!o.done;o=n.next()){var i=o.value;r.push.apply(r,Js([],Zs(i.children)))}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"virtualChildren",{get:function(){return this._virtualChildren},enumerable:!1,configurable:!0}),e.prototype.hasVirtualChildren=function(){return this._virtualChildren.length>0},e.prototype.append=function(t){var e,r;Array.isArray(t)||(t=[t]);try{for(var n=qs(t),o=n.next();!o.done;o=n.next()){var i=o.value;if(i.parent)throw new Error(i+" already belongs to another parent: "+i.parent+".");if(i.layerManager)throw new Error(i+" already belongs to a scene: "+i.layerManager+".");if(this.childSet[i.id])throw new Error("Duplicate "+i.constructor.name+" node: "+i);i.isVirtual?this._virtualChildren.push(i):this._children.push(i),this.childSet[i.id]=!0,i._parent=this,i._setLayerManager(this.layerManager)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}this.dirtyZIndex=!0,this.markDirty(this,ks.MAJOR)},e.prototype.appendChild=function(t){return this.append(t),t},e.prototype.removeChild=function(t){var e,r=function(){throw new Error("The node to be removed is not a child of this node.")};(t.parent!==this&&r(),t.isVirtual)?((e=this._virtualChildren.indexOf(t))<0&&r(),this._virtualChildren.splice(e,1)):((e=this._children.indexOf(t))<0&&r(),this._children.splice(e,1));return delete this.childSet[t.id],t._parent=void 0,t._setLayerManager(),this.dirtyZIndex=!0,this.markDirty(t,ks.MAJOR),t},e.prototype.calculateCumulativeMatrix=function(){this.computeTransformMatrix();for(var t=Vs.flyweight(this.matrix),e=this.parent;e;)e.computeTransformMatrix(),t.preMultiplySelf(e.matrix),e=e.parent;return t},e.prototype.transformPoint=function(t,e){return this.calculateCumulativeMatrix().invertSelf().transformPoint(t,e)},e.prototype.inverseTransformPoint=function(t,e){return this.calculateCumulativeMatrix().transformPoint(t,e)},e.prototype.transformBBox=function(t){return this.calculateCumulativeMatrix().invertSelf().transformBBox(t)},e.prototype.inverseTransformBBox=function(t){return this.calculateCumulativeMatrix().transformBBox(t)},e.prototype.markDirtyTransform=function(){this.dirtyTransform=!0,this.markDirty(this,ks.MAJOR)},e.prototype.containsPoint=function(t,e){return!1},e.prototype.pickNode=function(t,e){var r;if(this.visible&&this.pointerEvents!==Ws.None&&this.containsPoint(t,e)){var n=this.children;if(n.length>1e3)for(var o=n.length-1;o>=0;o--){var i=n[o];if(a=(null===(r=i.computeTransformedBBox())||void 0===r?void 0:r.containsPoint(t,e))?i.pickNode(t,e):void 0)return a}else if(n.length)for(o=n.length-1;o>=0;o--){var a;if(a=n[o].pickNode(t,e))return a}else if(!this.isContainerNode)return this}},e.prototype.findNodes=function(t){var e,r,n=t(this)?[this]:[];try{for(var o=qs(this.children),i=o.next();!i.done;i=o.next()){var a=i.value.findNodes(t);a&&n.push.apply(n,Js([],Zs(a)))}}catch(t){e={error:t}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}return n},e.prototype.computeBBox=function(){},e.prototype.computeTransformedBBox=function(){var t=this.computeBBox();if(t){this.computeTransformMatrix();for(var e=Vs.flyweight(this.matrix),r=this.parent;r;)r.computeTransformMatrix(),e.preMultiplySelf(r.matrix),r=r.parent;return e.transformBBox(t,t),t}},e.prototype.computeTransformMatrix=function(){if(this.dirtyTransform){var t=this,e=t.matrix,r=t.scalingX,n=t.scalingY,o=t.rotation,i=t.translationX,a=t.translationY,s=t.scalingCenterX,l=t.scalingCenterY,u=t.rotationCenterX,c=t.rotationCenterY;Vs.updateTransformMatrix(e,r,n,o,i,a,{scalingCenterX:s,scalingCenterY:l,rotationCenterX:u,rotationCenterY:c}),e.inverseTo(this.inverseMatrix),this.dirtyTransform=!1}},e.prototype.render=function(t){var e=t.stats;this._dirty=ks.NONE,e&&e.nodesRendered++},e.prototype.clearBBox=function(t){var e=this.computeBBox();if(null!=e){var r=e.x,n=e.y,o=e.width,i=e.height,a=this.transformPoint(r,n),s=this.transformPoint(r+o,n+i);t.clearRect(a.x,a.y,s.x-a.x,s.y-a.y)}},e.prototype.markDirty=function(t,e,r){void 0===e&&(e=ks.TRIVIAL),void 0===r&&(r=e),this._dirty>e||this._dirty===e&&e===r||(this._dirty=e,this.parent?this.parent.markDirty(this,r):this.layerManager&&this.layerManager.markDirty())},Object.defineProperty(e.prototype,"dirty",{get:function(){return this._dirty},enumerable:!1,configurable:!0}),e.prototype.markClean=function(t){var e,r,n,o,i=null!=t?t:{},a=i.force,s=void 0!==a&&a,l=i.recursive,u=void 0===l||l;if(this._dirty!==ks.NONE||s){if(this._dirty=ks.NONE,!1!==u)try{for(var c=qs(this._virtualChildren),p=c.next();!p.done;p=c.next()){p.value.markClean({force:s})}}catch(t){e={error:t}}finally{try{p&&!p.done&&(r=c.return)&&r.call(c)}finally{if(e)throw e.error}}if(!0===u)try{for(var d=qs(this._children),h=d.next();!h.done;h=d.next()){h.value.markClean({force:s})}}catch(t){n={error:t}}finally{try{h&&!h.done&&(o=d.return)&&o.call(d)}finally{if(n)throw n.error}}}},e.prototype.visibilityChanged=function(){},Object.defineProperty(e.prototype,"nodeCount",{get:function(){var t,e,r,n,o=1,i=this._dirty>=ks.NONE||this.dirtyTransform?1:0,a=this.visible?1:0,s=function(t){var e=t.nodeCount,r=e.count,n=e.visibleCount,s=e.dirtyCount;o+=r,a+=n,i+=s};try{for(var l=qs(this._children),u=l.next();!u.done;u=l.next()){s(u.value)}}catch(e){t={error:e}}finally{try{u&&!u.done&&(e=l.return)&&e.call(l)}finally{if(t)throw t.error}}try{for(var c=qs(this._virtualChildren),p=c.next();!p.done;p=c.next()){s(p.value)}}catch(t){r={error:t}}finally{try{p&&!p.done&&(n=c.return)&&n.call(c)}finally{if(r)throw r.error}}return{count:o,visibleCount:a,dirtyCount:i}},enumerable:!1,configurable:!0}),e.prototype.zIndexChanged=function(){},e._nextSerialNumber=0,Ys([zs({type:"transform"})],e.prototype,"scalingX",void 0),Ys([zs({type:"transform"})],e.prototype,"scalingY",void 0),Ys([zs({type:"transform"})],e.prototype,"scalingCenterX",void 0),Ys([zs({type:"transform"})],e.prototype,"scalingCenterY",void 0),Ys([zs({type:"transform"})],e.prototype,"rotationCenterX",void 0),Ys([zs({type:"transform"})],e.prototype,"rotationCenterY",void 0),Ys([zs({type:"transform"})],e.prototype,"rotation",void 0),Ys([zs({type:"transform"})],e.prototype,"translationX",void 0),Ys([zs({type:"transform"})],e.prototype,"translationY",void 0),Ys([zs({redraw:ks.MAJOR,changeCb:function(t){return t.visibilityChanged()}})],e.prototype,"visible",void 0),Ys([zs({redraw:ks.TRIVIAL,changeCb:$s})],e.prototype,"zIndex",void 0),Ys([zs({redraw:ks.TRIVIAL,changeCb:$s})],e.prototype,"zIndexSubOrder",void 0),e}(Ks);function tl(t,e){var r=0;return"number"==typeof t&&"number"==typeof e?r=t-e:"string"==typeof t&&"string"==typeof e?r=t.localeCompare(e):null==t&&null==e||(r=null==t?-1:null==e?1:String(t).localeCompare(String(e))),r}function el(t,e,r){var n=function(t){return"function"==typeof t?t():t};for(var o in t){var i=r(n(t[o]),n(e[o]));if(0!==i)return i}return 0}var rl={};function nl(t,e){rl[e]||(t(),rl[e]=!0)}var ol,il=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},al=function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t},sl={debug:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];console.log.apply(console,al([],il(t)))},warn:function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];console.warn.apply(console,al(["AG Charts - "+t],il(e)))},error:function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];"object"==typeof t?console.error.apply(console,al(["AG Charts error",t],il(e))):console.error.apply(console,al(["AG Charts - "+t],il(e)))},warnOnce:function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];nl((function(){return sl.warn.apply(sl,al([t],il(e)))}),"Logger.warn: "+t)},errorOnce:function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];nl((function(){return sl.error.apply(sl,al([t],il(e)))}),"Logger.warn: "+t)}},ll=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ul=function(){return(ul=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},cl=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},pl=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},dl=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},hl=function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t},fl=function(t){function e(e){var r,n=t.call(this,{isVirtual:null==e?void 0:e.isVirtual})||this;n.opts=e,n.opacity=1,n.lastBBox=void 0;var o=null!=e?e:{},i=o.zIndex,a=o.zIndexSubOrder;return n.isContainerNode=!0,void 0!==i&&(n.zIndex=i),void 0!==a&&(n.zIndexSubOrder=a),n.name=null===(r=n.opts)||void 0===r?void 0:r.name,n}return ll(e,t),e.prototype.zIndexChanged=function(){var t;this.layer&&(null===(t=this._layerManager)||void 0===t||t.moveLayer(this.layer,this.zIndex,this.zIndexSubOrder))},e.prototype.isLayer=function(){return null!=this.layer},e.prototype._setLayerManager=function(e){var r,n,o=this;if(this._layerManager&&this.layer&&(this._layerManager.removeLayer(this.layer),this.layer=void 0),this.layer)throw new Error("AG Charts - unable to deregister scene rendering layer!");if(t.prototype._setLayerManager.call(this,e),e&&(null===(r=this.opts)||void 0===r?void 0:r.layer)){var i=null!==(n=this.opts)&&void 0!==n?n:{},a=i.zIndex,s=i.zIndexSubOrder,l=i.name;this.layer=e.addLayer({zIndex:a,zIndexSubOrder:s,name:l,getComputedOpacity:function(){return o.getComputedOpacity()},getVisibility:function(){return o.getVisibility()}})}},e.prototype.getComputedOpacity=function(){var t=1,r=this;do{r instanceof e&&(t*=r.opacity)}while(r=r.parent);return t},e.prototype.getVisibility=function(){for(var t=this,e=this.visible;t=t.parent;)t.visible||(e=t.visible);return e},e.prototype.visibilityChanged=function(){this.layer&&(this.layer.enabled=this.visible)},e.prototype.markDirty=function(e,r){if(void 0===r&&(r=ks.TRIVIAL),this.isVirtual)t.prototype.markDirty.call(this,e,r);else{var n=r;(r<ks.MINOR||null!=this.layer)&&(n=ks.TRIVIAL),t.prototype.markDirty.call(this,e,r,n)}},e.prototype.containsPoint=function(t,e){return!0},e.prototype.computeBBox=function(){return this.computeTransformMatrix(),e.computeBBox(this.children)},e.prototype.computeTransformedBBox=function(){return this.computeBBox()},e.prototype.render=function(e){var r,n,o,i,a,s,l,u,c=this.opts,p=(void 0===c?{}:c).name,d=void 0===p?void 0:p,h=this._debug,f=(void 0===h?{}:h).consoleLog,v=void 0!==f&&f,y=this,g=y.dirty,m=y.dirtyZIndex,b=y.layer,C=y.children,S=y.clipRect,w=y.dirtyTransform,x=e.ctx,O=e.forceRender,E=e.clipBBox,T=e.resized,P=e.stats,D=x.getTransform(),A=g>=ks.MINOR||m||T,M=A,_=!1;try{for(var R=pl(C),k=R.next();!k.done;k=R.next()){var F=k.value;if(M||(M=null==F.layerManager&&F.dirty>=ks.TRIVIAL),_||(_=null!=F.layerManager&&F.dirty>=ks.TRIVIAL),M)break}}catch(t){r={error:t}}finally{try{k&&!k.done&&(n=R.return)&&n.call(R)}finally{if(r)throw r.error}}if(d&&v&&sl.debug({name:d,group:this,isDirty:A,isChildDirty:M,dirtyTransform:w,renderCtx:e,forceRender:O}),w)O="dirtyTransform";else if(b){var I=this.computeBBox();void 0!==this.lastBBox&&this.lastBBox.equals(I)||(O="dirtyTransform",this.lastBBox=I)}if(!(A||M||_||O)){if(d&&v&&P){var L=this.nodeCount;sl.debug({name:d,result:"skipping",renderCtx:e,counts:L,group:this})}return b&&P&&(P.layersSkipped++,P.nodesSkipped+=this.nodeCount.count),void this.markClean({recursive:!1})}var N=this.visible;if(b){if((x=b.context).save(),x.resetTransform(),"dirtyTransform"!==O&&(O=M||m),O&&b.clear(),E){var G=E.width,j=E.height,V=E.x,B=E.y;v&&sl.debug({name:d,clipBBox:E,ctxTransform:x.getTransform(),renderCtx:e,group:this}),this.clipCtx(x,V,B,G,j)}x.setTransform(D)}else x.globalAlpha*=this.opacity;if(this.computeTransformMatrix(),this.matrix.toContext(x),S){V=S.x,B=S.y,G=S.width,j=S.height;x.save(),v&&sl.debug({name:d,clipRect:S,ctxTransform:x.getTransform(),renderCtx:e,group:this}),this.clipCtx(x,V,B,G,j),E=this.matrix.transformBBox(S)}var U=this.hasVirtualChildren();m?(this.sortChildren(C),"dirtyTransform"!==O&&(O=!0)):U&&this.sortChildren(C);var H=O!==e.forceRender||E!==e.clipBBox||x!==e.ctx?ul(ul({},e),{ctx:x,forceRender:O,clipBBox:E}):e,z=0;try{for(var W=pl(C),K=W.next();!K.done;K=W.next()){(F=K.value).visible&&N?O||F.dirty!==ks.NONE?(x.save(),F.render(H),x.restore()):P&&(z+=F.nodeCount.count):(F.markClean(),P&&(z+=F.nodeCount.count))}}catch(t){o={error:t}}finally{try{K&&!K.done&&(i=W.return)&&i.call(W)}finally{if(o)throw o.error}}if(P&&(P.nodesSkipped+=z),t.prototype.render.call(this,e),S&&x.restore(),U)try{for(var X=pl(this.virtualChildren),Y=X.next();!Y.done;Y=X.next()){(F=Y.value).markClean({recursive:"virtual"})}}catch(t){a={error:t}}finally{try{Y&&!Y.done&&(s=X.return)&&s.call(X)}finally{if(a)throw a.error}}if(b&&(P&&P.layersRendered++,x.restore(),O&&b.snapshot(),null===(u=(l=b.context).verifyDepthZero)||void 0===u||u.call(l)),d&&v&&P){L=this.nodeCount;sl.debug({name:d,result:"rendered",skipped:z,renderCtx:e,counts:L,group:this})}},e.prototype.sortChildren=function(t){this.dirtyZIndex=!1,t.sort((function(t,e){var r,n;return el(hl(hl([t.zIndex],dl(null!==(r=t.zIndexSubOrder)&&void 0!==r?r:[void 0,void 0])),[t.serialNumber]),hl(hl([e.zIndex],dl(null!==(n=e.zIndexSubOrder)&&void 0!==n?n:[void 0,void 0])),[e.serialNumber]),tl)}))},e.prototype.clipCtx=function(t,e,r,n,o){t.beginPath(),t.moveTo(e,r),t.lineTo(e+n,r),t.lineTo(e+n,r+o),t.lineTo(e,r+o),t.closePath(),t.clip()},e.computeBBox=function(t){var e=1/0,r=-1/0,n=1/0,o=-1/0;return t.forEach((function(t){if(t.visible){var i=t.computeTransformedBBox();if(i){var a=i.x,s=i.y;a<e&&(e=a),s<n&&(n=s),a+i.width>r&&(r=a+i.width),s+i.height>o&&(o=s+i.height)}}})),new Ns(e,n,r-e,o-n)},e.prototype.setClipRectInGroupCoordinateSpace=function(t){this.clipRect=t?this.transformBBox(t):void 0},e.className="Group",cl([zs({redraw:ks.MAJOR,convertor:function(t){return Math.min(1,Math.max(0,t))}})],e.prototype,"opacity",void 0),e}(Qs),vl=function(){function t(t){var e=t.width,r=void 0===e?600:e,n=t.height,o=void 0===n?300:n,i=t.overrideDevicePixelRatio,a=void 0===i?void 0:i;this.enabled=!0,this._pixelRatio=NaN,this._width=0,this._height=0,this.canvas=new OffscreenCanvas(r,o),this.context=this.canvas.getContext("2d"),this.imageSource=this.canvas.transferToImageBitmap(),this.setPixelRatio(a),this.resize(r,o)}return t.isSupported=function(){return null!=window.OffscreenCanvas},t.prototype.snapshot=function(){this.imageSource.close(),this.imageSource=this.canvas.transferToImageBitmap()},t.prototype.destroy=function(){this.imageSource.close(),this.canvas.width=0,this.canvas.height=0,this.context.clearRect(0,0,0,0)},t.prototype.clear=function(){this.context.save(),this.context.resetTransform(),this.context.clearRect(0,0,this.width,this.height),this.context.restore()},Object.defineProperty(t.prototype,"pixelRatio",{get:function(){return this._pixelRatio},enumerable:!1,configurable:!0}),t.prototype.setPixelRatio=function(t){var e=null!=t?t:window.devicePixelRatio;Rs()||(e=1),Fs.overrideScale(this.context,e),this._pixelRatio=e},Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),t.prototype.resize=function(t,e){if(t>0&&e>0){var r=this.canvas,n=this.context,o=this.pixelRatio;r.width=Math.round(t*o),r.height=Math.round(e*o),n.resetTransform(),this._width=t,this._height=e}},t}();function yl(t){var e="undefined"!=typeof window?window:void 0;return null==e?void 0:e[t]}!function(t){t[t.SUMMARY=0]="SUMMARY",t[t.DETAILED=1]="DETAILED"}(ol||(ol={}));var gl=function(){return(gl=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},ml=function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{l(n.next(t))}catch(t){i(t)}}function s(t){try{l(n.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}l((n=n.apply(t,e||[])).next())}))},bl=function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Cl=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},Sl=function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t},wl=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};var xl=function(){function t(t){var e,r,n;this.id=Us(this),this.layers=[],this._nextZIndex=0,this._nextLayerId=0,this._dirty=!1,this._root=null,this.debug={dirtyTree:!1,stats:!1,renderBoundingBoxes:!1,consoleLog:!1,level:ol.SUMMARY,sceneNodeHighlight:[]};var o=t.document,i=void 0===o?window.document:o,a=t.mode,s=void 0===a?null!==(e=yl("agChartsSceneRenderModel"))&&void 0!==e?e:"adv-composite":a,l=t.width,u=t.height,c=t.overrideDevicePixelRatio,p=void 0===c?void 0:c;this.overrideDevicePixelRatio=p,this.opts={document:i,mode:s},this.debug.consoleLog=[!0,"scene"].includes(yl("agChartsDebug")),this.debug.level=["scene"].includes(yl("agChartsDebug"))?ol.DETAILED:ol.SUMMARY,this.debug.stats=null!==(r=yl("agChartsSceneStats"))&&void 0!==r&&r,this.debug.dirtyTree=null!==(n=yl("agChartsSceneDirtyTree"))&&void 0!==n&&n,this.debug.sceneNodeHighlight=function(){var t,e=null!==(t=yl("agChartsSceneDebug"))&&void 0!==t?t:[];"string"==typeof e&&(e=[e]);var r=[];return e.forEach((function(t){"layout"===t?r.push("seriesRoot","legend","root",/.*Axis-\d+-axis.*/):r.push(t)})),r}(),this.canvas=new Fs({document:i,width:l,height:u,overrideDevicePixelRatio:p})}return Object.defineProperty(t.prototype,"container",{get:function(){return this.canvas.container},set:function(t){this.canvas.container=t},enumerable:!1,configurable:!0}),t.prototype.download=function(t,e){this.canvas.download(t,e)},t.prototype.getDataURL=function(t){return this.canvas.getDataURL(t)},Object.defineProperty(t.prototype,"width",{get:function(){return this.pendingSize?this.pendingSize[0]:this.canvas.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.pendingSize?this.pendingSize[1]:this.canvas.height},enumerable:!1,configurable:!0}),t.prototype.resize=function(t,e){t=Math.round(t),e=Math.round(e);var r=t<=0||e<=0,n=isNaN(t)||isNaN(e);return!(t===this.width&&e===this.height||n||r)&&(this.pendingSize=[t,e],this.markDirty(),!0)},t.prototype.addLayer=function(t){var e,r=this.opts.mode;if(["composite","dom-composite","adv-composite"].includes(r)){var n=t.zIndex,o=void 0===n?this._nextZIndex++:n,i=t.name,a=t.zIndexSubOrder,s=t.getComputedOpacity,l=t.getVisibility,u=this.width,c=this.height,p=this.overrideDevicePixelRatio,d="dom-composite"===r,h="adv-composite"===r&&vl.isSupported()?new vl({width:u,height:c,overrideDevicePixelRatio:p}):new Fs({document:this.opts.document,width:u,height:c,domLayer:d,zIndex:o,name:i,overrideDevicePixelRatio:p}),f={id:this._nextLayerId++,name:i,zIndex:o,zIndexSubOrder:a,canvas:h,getComputedOpacity:s,getVisibility:l};if(o>=this._nextZIndex&&(this._nextZIndex=o+1),this.layers.push(f),this.sortLayers(),d){var v=this.layers.map((function(t){return t.canvas})).filter((function(t){return t instanceof Fs})),y=v.findIndex((function(t){return t===h}));(null!==(e=v[y-1])&&void 0!==e?e:this.canvas).element.insertAdjacentElement("afterend",h.element)}return this.debug.consoleLog&&sl.debug("Scene.addLayer() - layers",this.layers),f.canvas}},t.prototype.removeLayer=function(t){var e=this.layers.findIndex((function(e){return e.canvas===t}));e>=0&&(this.layers.splice(e,1),t.destroy(),this.markDirty(),this.debug.consoleLog&&sl.debug("Scene.removeLayer() -  layers",this.layers))},t.prototype.moveLayer=function(t,e,r){var n=this.layers.find((function(e){return e.canvas===t}));n&&(n.zIndex=e,n.zIndexSubOrder=r,this.sortLayers(),this.markDirty(),this.debug.consoleLog&&sl.debug("Scene.moveLayer() -  layers",this.layers))},t.prototype.sortLayers=function(){this.layers.sort((function(t,e){var r,n;return el(Sl(Sl([t.zIndex],Cl(null!==(r=t.zIndexSubOrder)&&void 0!==r?r:[void 0,void 0])),[t.id]),Sl(Sl([e.zIndex],Cl(null!==(n=e.zIndexSubOrder)&&void 0!==n?n:[void 0,void 0])),[e.id]),tl)}))},t.prototype.markDirty=function(){this._dirty=!0},Object.defineProperty(t.prototype,"dirty",{get:function(){return this._dirty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){return this._root},set:function(t){var e=this;t!==this._root&&(this._root&&this._root._setLayerManager(),this._root=t,t&&(null===t.parent&&t.layerManager&&t.layerManager!==this&&(t.layerManager.root=null),t._setLayerManager({addLayer:function(t){return e.addLayer(t)},moveLayer:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return e.moveLayer.apply(e,Sl([],Cl(t)))},removeLayer:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return e.removeLayer.apply(e,Sl([],Cl(t)))},markDirty:function(){return e.markDirty()},canvas:this.canvas,debug:gl(gl({},this.debug),{consoleLog:this.debug.level>=ol.DETAILED})})),this.markDirty())},enumerable:!1,configurable:!0}),t.prototype.strip=function(){var t,e,r=this.layers;try{for(var n=wl(r),o=n.next();!o.done;o=n.next()){var i=o.value;i.canvas.destroy(),delete i.canvas}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}r.splice(0,r.length),this.root=null,this._dirty=!1,this.canvas.context.resetTransform()},t.prototype.destroy=function(){this.container=void 0,this.strip(),this.canvas.destroy(),Object.assign(this,{canvas:void 0,ctx:void 0})},t.prototype.render=function(t){var e;return ml(this,void 0,void 0,(function(){var r,n,o,i,a,s,l,u,c,p,d,h,f,v,y,g,m,b;return bl(this,(function(C){return n=(r=null!=t?t:{}).debugSplitTimes,o=void 0===n?[performance.now()]:n,i=r.extraDebugStats,a=void 0===i?{}:i,l=(s=this).canvas,u=s.canvas.context,c=s.root,p=s.layers,d=s.pendingSize,h=s.opts.mode,d&&((b=this.canvas).resize.apply(b,Sl([],Cl(d))),this.layers.forEach((function(t){var e;return(e=t.canvas).resize.apply(e,Sl([],Cl(d)))})),this.pendingSize=void 0),c&&!c.visible?(this._dirty=!1,[2]):c&&!this.dirty?(this.debug.consoleLog&&sl.debug("Scene.render() - no-op",{redrawType:ks[c.dirty],tree:this.buildTree(c)}),this.debugStats(o,u,void 0,a),[2]):(f={ctx:u,forceRender:!0,resized:!!d,debugNodes:{}},"detailed"===this.debug.stats&&(f.stats={layersRendered:0,layersSkipped:0,nodesRendered:0,nodesSkipped:0}),v=!1,(!c||c.dirty>=ks.TRIVIAL)&&(v=!0,l.clear()),c&&this.debug.dirtyTree&&(y=this.buildDirtyTree(c),g=y.dirtyTree,m=y.paths,sl.debug("Scene.render() - dirtyTree",{dirtyTree:g,paths:m})),c&&v&&(this.debug.consoleLog&&sl.debug("Scene.render() - before",{redrawType:ks[c.dirty],canvasCleared:v,tree:this.buildTree(c)}),c.visible&&(u.save(),c.render(f),u.restore())),"dom-composite"!==h&&p.length>0&&v&&(this.sortLayers(),u.save(),u.setTransform(1/l.pixelRatio,0,0,1/l.pixelRatio,0,0),p.forEach((function(t){var e=t.canvas,r=e.imageSource,n=e.enabled,o=t.getComputedOpacity,i=t.getVisibility;n&&i()&&(u.globalAlpha=o(),u.drawImage(r,0,0))})),u.restore()),null===(e=u.verifyDepthZero)||void 0===e||e.call(u),this._dirty=!1,this.debugStats(o,u,f.stats,a),this.debugSceneNodeHighlight(u,this.debug.sceneNodeHighlight,f.debugNodes),c&&this.debug.consoleLog&&sl.debug("Scene.render() - after",{redrawType:ks[c.dirty],canvasCleared:v,tree:this.buildTree(c)}),[2])}))}))},t.prototype.debugStats=function(t,e,r,n){var o,i;void 0===n&&(n={});var a=performance.now();if(this.debug.stats){var s=t[0];t.push(a);var l=function(t,e){var r=t+e;return t+" / "+r+" ("+Math.round(100*t/r)+"%)"},u=function(t,e){return Math.round(100*(e-t))/100+"ms"},c=null!=r?r:{},p=c.layersRendered,d=void 0===p?0:p,h=c.layersSkipped,f=void 0===h?0:h,v=c.nodesRendered,y=void 0===v?0:v,g=c.nodesSkipped,m=void 0===g?0:g,b=t.map((function(e,r){return r>0?u(t[r-1],e):null})).filter((function(t){return null!=t})).join(" + "),C=Object.entries(n).map((function(t){var e=Cl(t,2);return e[0]+": "+e[1]})).join(" ; "),S=[u(s,a)+" ("+b+")",""+C,"detailed"===this.debug.stats?"Layers: "+l(d,f):null,"detailed"===this.debug.stats?"Nodes: "+l(y,m):null].filter((function(t){return null!=t})).map((function(t){return[t,Fs.getTextSize(t,e.font)]})),w=Math.max.apply(Math,Sl([],Cl(S.map((function(t){return Cl(t,2)[1].width}))))),x=S.reduce((function(t,e){return t+Cl(e,2)[1].height}),0);e.save(),e.fillStyle="white",e.fillRect(0,0,w,x),e.fillStyle="black";var O=0;try{for(var E=wl(S),T=E.next();!T.done;T=E.next()){var P=Cl(T.value,2),D=P[0];O+=P[1].height,e.fillText(D,2,O)}}catch(t){o={error:t}}finally{try{T&&!T.done&&(i=E.return)&&i.call(E)}finally{if(o)throw o.error}}e.restore()}},t.prototype.debugSceneNodeHighlight=function(t,e,r){var n,o,i,a,s,l,u,c=function(t){return function(e){return!!t.test(e.id)||e instanceof fl&&null!=e.name&&t.test(e.name)}},p=function(t){return function(e){return t===e.id||e instanceof fl&&null!=e.name&&t===e.name}};try{for(var d=wl(e),h=d.next();!h.done;h=d.next()){var f=h.value;if("string"!=typeof f||null==r[f]){var v="string"==typeof f?p(f):c(f),y=null===(u=this.root)||void 0===u?void 0:u.findNodes(v);if(y&&0!==y.length)try{for(var g=(i=void 0,wl(y)),m=g.next();!m.done;m=g.next()){(S=m.value)instanceof fl&&S.name?r[S.name]=S:r[S.id]=S}}catch(t){i={error:t}}finally{try{m&&!m.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}else sl.debug("Scene.render() - no debugging node with id ["+f+"] in scene graph.")}}}catch(t){n={error:t}}finally{try{h&&!h.done&&(o=d.return)&&o.call(d)}finally{if(n)throw n.error}}t.save();try{for(var b=wl(Object.entries(r)),C=b.next();!C.done;C=b.next()){var S,w=Cl(C.value,2),x=w[0],O=(S=w[1]).computeTransformedBBox();O?(t.globalAlpha=.8,t.strokeStyle="red",t.lineWidth=1,t.strokeRect(O.x,O.y,O.width,O.height),t.fillStyle="red",t.strokeStyle="white",t.font="16px sans-serif",t.textBaseline="top",t.textAlign="left",t.lineWidth=2,t.strokeText(x,O.x,O.y,O.width),t.fillText(x,O.x,O.y,O.width)):sl.debug("Scene.render() - no bbox for debugged node ["+x+"].")}}catch(t){s={error:t}}finally{try{C&&!C.done&&(l=b.return)&&l.call(b)}finally{if(s)throw s.error}}t.restore()},t.prototype.buildTree=function(t){var e,r,n=this,o=null!==(e=t instanceof fl?t.name:null)&&void 0!==e?e:t.id;return gl(gl({name:o,node:t,dirty:ks[t.dirty]},(null===(r=t.parent)||void 0===r?void 0:r.isVirtual)?{virtualParentDirty:ks[t.parent.dirty],virtualParent:t.parent}:{}),t.children.map((function(t){return n.buildTree(t)})).reduce((function(t,e){var r=e.name,n=e.node,o=n.visible,i=n.opacity,a=n.zIndex,s=n.zIndexSubOrder,l=e.node,u=e.virtualParent;(!o||i<=0)&&(r="("+r+")"),l instanceof fl&&l.isLayer()&&(r="*"+r+"*");for(var c=[""+(null!=r?r:"<unknown>"),"z: "+a,s&&"zo: "+s.map((function(t){return"function"==typeof t?t()+" (fn)":t})).join(" / "),u&&"(virtual parent)"].filter((function(t){return!!t})).join(" "),p=c,d=1;null!=t[p]&&d<100;)p=c+" ("+d+++")";return t[p]=e,t}),{}))},t.prototype.buildDirtyTree=function(t){var e,r=this;if(t.dirty===ks.NONE)return{dirtyTree:{},paths:[]};var n=t.children.map((function(t){return r.buildDirtyTree(t)})).filter((function(t){return t.paths.length>0})),o=null!==(e=t instanceof fl?t.name:null)&&void 0!==e?e:t.id,i=0===n.length?[o]:n.map((function(t){return t.paths})).reduce((function(t,e){return t.concat(e)}),[]).map((function(t){return o+"."+t}));return{dirtyTree:gl({name:o,node:t,dirty:ks[t.dirty]},n.map((function(t){return t.dirtyTree})).filter((function(t){return void 0!==t.dirty})).reduce((function(t,e){var r;return t[null!==(r=e.name)&&void 0!==r?r:"<unknown>"]=e,t}),{})),paths:i}},t.className="Scene",t}(),Ol=function(){this.stops=[]},El=2*Math.PI;function Tl(t){return t%=El,t+=El,t%=El}function Pl(t){return t/180*Math.PI}var Dl=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Al=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.angle=0,e}return Dl(e,t),e.prototype.createGradient=function(t,e){var r=this.stops,n=Tl(Pl(this.angle+90)),o=Math.cos(n),i=Math.sin(n),a=e.width,s=e.height,l=e.x+.5*a,u=e.y+.5*s;if(a>0&&s>0){var c=Math.sqrt(s*s+a*a)/2,p=Math.atan2(s,a),d=void 0;d=n<Math.PI/2?n:n<Math.PI?Math.PI-n:n<3*Math.PI/2?n-Math.PI:2*Math.PI-n;var h=c*Math.abs(Math.cos(d-p)),f=t.createLinearGradient(l+o*h,u+i*h,l-o*h,u-i*h);return r.forEach((function(t){f.addColorStop(t.offset,t.color)})),f}return"black"},e}(Ol),Ml=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),_l=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},Rl=/^linear-gradient\((.*?)deg,\s*(.*?)\s*\)$/i,kl=function(t){function e(){var r=null!==t&&t.apply(this,arguments)||this;return r.lastInstanceId=0,r.fillOpacity=1,r.strokeOpacity=1,r.fill=e.defaultStyles.fill,r.stroke=e.defaultStyles.stroke,r.strokeWidth=e.defaultStyles.strokeWidth,r.lineDash=e.defaultStyles.lineDash,r.lineDashOffset=e.defaultStyles.lineDashOffset,r.lineCap=e.defaultStyles.lineCap,r.lineJoin=e.defaultStyles.lineJoin,r.opacity=e.defaultStyles.opacity,r.fillShadow=e.defaultStyles.fillShadow,r}return Ml(e,t),e.createInstance=function(t){var e=Object.create(t);return e._setParent(void 0),e.id=t.id+"-Instance-"+String(++t.lastInstanceId),e},e.prototype.restoreOwnStyles=function(){for(var t=this.constructor.defaultStyles,e=Object.getOwnPropertyNames(t),r=0,n=e.length;r<n;r++){var o=e[r];this[o]=t[o]}},e.prototype.restoreAllStyles=function(){var t=this.constructor.defaultStyles;for(var e in t)this[e]=t[e]},e.prototype.restoreOverriddenStyles=function(){var t=this.constructor.defaultStyles,e=Object.getPrototypeOf(t);for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&Object.prototype.hasOwnProperty.call(e,r)&&(this[r]=t[r])},e.prototype.updateGradient=function(){var t,e=this.fill;if((null==e?void 0:e.startsWith("linear-gradient"))&&(t=Rl.exec(e))){for(var r=parseFloat(t[1]),n=[],o=t[2],i=/(#[0-9a-f]+)|(rgba?\(.+?\))|([a-z]+)/gi,a=void 0;a=i.exec(o);)n.push(a[0]);this.gradient=new Al,this.gradient.angle=r,this.gradient.stops=n.map((function(t,e){return{offset:e/(n.length-1),color:t}}))}else this.gradient=void 0},e.prototype.align=function(t,e){var r,n,o,i=null!==(o=null===(n=null===(r=this.layerManager)||void 0===r?void 0:r.canvas)||void 0===n?void 0:n.pixelRatio)&&void 0!==o?o:1,a=Math.round(t*i)/i;return null==e?a:0===e?0:e<1?Math.ceil(e*i)/i:Math.round((e+t)*i)/i-a},e.prototype.fillStroke=function(t){this.renderFill(t),this.renderStroke(t)},e.prototype.renderFill=function(t){if(this.fill){var e=t.globalAlpha;this.applyFill(t),this.applyFillAlpha(t),this.applyShadow(t),t.fill(),t.globalAlpha=e}t.shadowColor="rgba(0, 0, 0, 0)"},e.prototype.applyFill=function(t){this.gradient?t.fillStyle=this.gradient.createGradient(t,this.computeBBox()):t.fillStyle=this.fill},e.prototype.applyFillAlpha=function(t){var e=t.globalAlpha;t.globalAlpha=e*this.opacity*this.fillOpacity},e.prototype.applyShadow=function(t){var e,r,n=null!==(r=null===(e=this.layerManager)||void 0===e?void 0:e.canvas.pixelRatio)&&void 0!==r?r:1,o=this.fillShadow;(null==o?void 0:o.enabled)&&(t.shadowColor=o.color,t.shadowOffsetX=o.xOffset*n,t.shadowOffsetY=o.yOffset*n,t.shadowBlur=o.blur*n)},e.prototype.renderStroke=function(t){if(this.stroke&&this.strokeWidth){var e=t.globalAlpha;t.strokeStyle=this.stroke,t.globalAlpha=e*this.opacity*this.strokeOpacity,t.lineWidth=this.strokeWidth,this.lineDash&&t.setLineDash(this.lineDash),this.lineDashOffset&&(t.lineDashOffset=this.lineDashOffset),this.lineCap&&(t.lineCap=this.lineCap),this.lineJoin&&(t.lineJoin=this.lineJoin),t.stroke(),t.globalAlpha=e}},e.prototype.containsPoint=function(t,e){return this.isPointInPath(t,e)},e.defaultStyles=Object.assign({},{fill:"black",stroke:void 0,strokeWidth:0,lineDash:void 0,lineDashOffset:0,lineCap:void 0,lineJoin:void 0,opacity:1,fillShadow:void 0}),_l([zs({redraw:ks.MINOR})],e.prototype,"fillOpacity",void 0),_l([zs({redraw:ks.MINOR})],e.prototype,"strokeOpacity",void 0),_l([zs({redraw:ks.MINOR,changeCb:function(t){return t.updateGradient()}})],e.prototype,"fill",void 0),_l([zs({redraw:ks.MINOR})],e.prototype,"stroke",void 0),_l([zs({redraw:ks.MINOR})],e.prototype,"strokeWidth",void 0),_l([zs({redraw:ks.MINOR})],e.prototype,"lineDash",void 0),_l([zs({redraw:ks.MINOR})],e.prototype,"lineDashOffset",void 0),_l([zs({redraw:ks.MINOR})],e.prototype,"lineCap",void 0),_l([zs({redraw:ks.MINOR})],e.prototype,"lineJoin",void 0),_l([zs({redraw:ks.MINOR,convertor:function(t){return Math.min(1,Math.max(0,t))}})],e.prototype,"opacity",void 0),_l([zs({redraw:ks.MINOR,checkDirtyOnAssignment:!0})],e.prototype,"fillShadow",void 0),e}(Qs),Fl=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Il=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},Ll=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function Nl(t){var e=null!=t?t:{},r=e.redraw;return zs({redraw:void 0===r?ks.MAJOR:r,type:"font",changeCb:e.changeCb})}var Gl=function(t){function e(){var r=null!==t&&t.apply(this,arguments)||this;return r.x=0,r.y=0,r.lines=[],r.text=void 0,r._dirtyFont=!0,r.fontSize=10,r.fontFamily="sans-serif",r.textAlign=e.defaultStyles.textAlign,r.textBaseline=e.defaultStyles.textBaseline,r.lineHeight=void 0,r}return Fl(e,t),e.prototype._setLines=function(){this.lines=zl(this.text)},Object.defineProperty(e.prototype,"font",{get:function(){return(null==this._font||this._dirtyFont)&&(this._dirtyFont=!1,this._font=jl(this)),this._font},enumerable:!1,configurable:!0}),e.prototype.computeBBox=function(){return Fs.has.textMetrics?Bl(this.lines,this.x,this.y,this):Ul(this.lines,this.x,this.y,this)},e.prototype.getLineHeight=function(t){var e,r;if(this.lineHeight)return this.lineHeight;if(Fs.has.textMetrics){var n=Fs.measureText(t,this.font,this.textBaseline,this.textAlign);return(null!==(e=n.fontBoundingBoxAscent)&&void 0!==e?e:n.emHeightAscent)+(null!==(r=n.fontBoundingBoxDescent)&&void 0!==r?r:n.emHeightDescent)}return Fs.getTextSize(t,this.font).height},e.prototype.isPointInPath=function(t,e){var r=this.transformPoint(t,e),n=this.computeBBox();return!!n&&n.containsPoint(r.x,r.y)},e.prototype.render=function(e){var r=e.ctx,n=e.forceRender,o=e.stats;if(this.dirty!==ks.NONE||n)if(this.lines.length&&this.layerManager){this.computeTransformMatrix(),this.matrix.toContext(r);var i=this.fill,a=this.stroke,s=this.strokeWidth;r.font=this.font,r.textAlign=this.textAlign,r.textBaseline=this.textBaseline;var l=this.layerManager.canvas.pixelRatio||1,u=r.globalAlpha;if(i){r.fillStyle=i,r.globalAlpha=u*this.opacity*this.fillOpacity;var c=this.fillShadow;(null==c?void 0:c.enabled)&&(r.shadowColor=c.color,r.shadowOffsetX=c.xOffset*l,r.shadowOffsetY=c.yOffset*l,r.shadowBlur=c.blur*l),this.renderLines((function(t,e,n){return r.fillText(t,e,n)}))}if(a&&s){r.strokeStyle=a,r.lineWidth=s,r.globalAlpha=u*this.opacity*this.strokeOpacity;var p=this.lineDash,d=this.lineDashOffset,h=this.lineCap,f=this.lineJoin;p&&r.setLineDash(p),d&&(r.lineDashOffset=d),h&&(r.lineCap=h),f&&(r.lineJoin=f),this.renderLines((function(t,e,n){return r.strokeText(t,e,n)}))}t.prototype.render.call(this,e)}else o&&(o.nodesSkipped+=this.nodeCount.count);else o&&(o.nodesSkipped+=this.nodeCount.count)},e.prototype.renderLines=function(t){for(var e=this,r=this.lines,n=this.x,o=this.y,i=this.lines.map((function(t){return e.getLineHeight(t)})),a=-(i.reduce((function(t,e){return t+e}),0)-i[0])*Hl(this.textBaseline),s=0;s<r.length;s++)t(r[s],n,o+a),a+=i[s]},e.wrap=function(t,r,n,o,i){var a,s,l=function(t){var e=new Map,r=function(e){return Fs.getTextSize(e,t)};return{size:r,width:function(t){if(e.has(t))return e.get(t);var n=r(t).width;return e.set(t,n),n}}}(jl(o)),u=t.split(/\r?\n/g);if(0===u.length)return"";if("never"===i)return e.truncateLine(u[0],r,l,!1);var c=[],p=0;try{for(var d=Ll(u),h=d.next();!h.done;h=d.next()){var f=h.value,v=e.wrapLine(f,r,n,l,o,i,p);if(c.push(v.result),p=v.cumulativeHeight,v.truncated)break}}catch(t){a={error:t}}finally{try{h&&!h.done&&(s=d.return)&&s.call(d)}finally{if(a)throw a.error}}return c.join("\n").trim()},e.wrapLine=function(t,r,n,o,i,a,s){if(!(t=t.trim()))return{result:"",truncated:!1,cumulativeHeight:s};var l=o.size(t);if(l.width<=r)return{result:t,truncated:!1,cumulativeHeight:s+l.height};if(l.height>n||o.width("W")>r)return{result:"",truncated:!0,cumulativeHeight:s};var u=t.split(/\s+/g),c=e.wrapLineSequentially(u,r,n,o,i,a,s);s=c.cumulativeHeight;var p=c.lines;if(!c.wordsBrokenOrTruncated&&!c.linesTruncated){var d=c.lines.length,h=e.wrapLineBalanced(u,r,o,d);h.length===p.length&&(p=h)}return{result:p.map((function(t){return t.join(" ")})).join("\n"),truncated:c.linesTruncated,cumulativeHeight:s}},e.breakWord=function(t,r,n,o,i){for(var a,s,l=function(r){return e.punctuationMarks.includes(t[r])},u=o?i.width("-"):0,c=[],p=0,d=0,h=0;h<t.length;h++){var f=t[h],v=i.width(f);p+v+u>(0===d?r:n)&&(c.push(h),p=0,d++),p+=v}var y=[],g=0;try{for(var m=Ll(c),b=m.next();!b.done;b=m.next()){var C=b.value,S=t.substring(g,C);o&&S.length>0&&!l(C-1)&&!l(C)&&(S+="-"),y.push(S),g=C}}catch(t){a={error:t}}finally{try{b&&!b.done&&(s=m.return)&&s.call(m)}finally{if(a)throw a.error}}return y.push(t.substring(g)),y},e.truncateLine=function(t,e,r,n){var o=r.width(t);if(o<e&&!n)return t;var i=r.width("\u2026");if(o+i<=e)return t+"\u2026";var a,s,l=Math.floor(t.length*e/o)+1;do{a=t.substring(0,l),s=r.width(a)}while(--l>=0&&s+i>e);return a+"\u2026"},e.wrapLineSequentially=function(t,r,n,o,i,a,s){var l=i.fontSize,u=i.lineHeight,c=void 0===u?l*e.defaultLineHeightRatio:u,p="always"===a||"hyphenate"===a,d="hyphenate"===a,h=o.width(" "),f=!1,v=!1,y=[],g=[],m=0,b=function(){var t=s+c;if(t>=n){var i=g.join(" "),a=e.truncateLine(i,r,o,!0);return g.splice(0,g.length,a),v=!0,!1}return g=[],m=0,s=t,y.push(g),!0};if(!b())return{lines:y,linesTruncated:!0,wordsBrokenOrTruncated:f,cumulativeHeight:s};for(var C=0;C<t.length;C++){var S=t[C],w=o.width(S),x=0===g.length?0:h,O=m+x+w;if(O<=r)g.push(S),m=O;else if(w<=r){if(!b())break;g.push(S),m=w}else{if(f=!0,!p){if(!b())break;var E=e.truncateLine(S,r,o,!0);g.push(E),C<t.length-1&&(v=!0);break}for(var T=r-m-x,P=e.breakWord(S,T,r,d,o),D=!1,A=0;A<P.length;A++){var M=P[A];if(M&&g.push(M),A===P.length-1)m=o.width(M);else if(!b()){D=!0;break}}if(D)break}}return{lines:y,linesTruncated:v,wordsBrokenOrTruncated:f,cumulativeHeight:s}},e.wrapLineBalanced=function(t,e,r,n){var o,i,a=t.reduce((function(t,e){return t+r.width(e)}),0),s=r.width(" "),l=(a+s*(t.length-n-2))/n,u=[],c=[],p=r.width(t[0]),d=!0;try{for(var h=Ll(t),f=h.next();!f.done;f=h.next()){var v=f.value,y=r.width(v);if(d)(c=[]).push(v),p=y,d=!1,u.push(c);else{var g=p+s+y;g<=l?(c.push(v),p=g):g<=e?(c.push(v),d=!0):(c=[v],p=y,u.push(c))}}}catch(t){o={error:t}}finally{try{f&&!f.done&&(i=h.return)&&i.call(h)}finally{if(o)throw o.error}}return u},e.prototype.setFont=function(t){this.fontFamily=t.fontFamily,this.fontSize=t.fontSize,this.fontStyle=t.fontStyle,this.fontWeight=t.fontWeight},e.prototype.setAlign=function(t){this.textAlign=t.textAlign,this.textBaseline=t.textBaseline},e.className="Text",e.defaultLineHeightRatio=1.15,e.defaultStyles=Object.assign({},kl.defaultStyles,{textAlign:"start",fontStyle:void 0,fontWeight:void 0,fontSize:10,fontFamily:"sans-serif",textBaseline:"alphabetic"}),e.punctuationMarks=[".",",","-",":",";","!","?","'",'"',"(",")"],Il([zs({redraw:ks.MAJOR})],e.prototype,"x",void 0),Il([zs({redraw:ks.MAJOR})],e.prototype,"y",void 0),Il([zs({redraw:ks.MAJOR,changeCb:function(t){return t._setLines()}})],e.prototype,"text",void 0),Il([Nl()],e.prototype,"fontStyle",void 0),Il([Nl()],e.prototype,"fontWeight",void 0),Il([Nl()],e.prototype,"fontSize",void 0),Il([Nl()],e.prototype,"fontFamily",void 0),Il([zs({redraw:ks.MAJOR})],e.prototype,"textAlign",void 0),Il([zs({redraw:ks.MAJOR})],e.prototype,"textBaseline",void 0),Il([zs({redraw:ks.MAJOR})],e.prototype,"lineHeight",void 0),e}(kl);function jl(t){var e=t.fontFamily,r=t.fontSize,n=t.fontStyle,o=t.fontWeight;return[null!=n?n:"",null!=o?o:"",r+"px",e].join(" ").trim()}function Vl(t,e,r,n){return Fs.has.textMetrics?Bl(t,e,r,n):Ul(t,e,r,n)}function Bl(t,e,r,n){for(var o,i,a=0,s=0,l=0,u=0,c=0,p=jl(n),d=n.lineHeight,h=n.textBaseline,f=void 0===h?Gl.defaultStyles.textBaseline:h,v=n.textAlign,y=void 0===v?Gl.defaultStyles.textAlign:v,g=0;g<t.length;g++){var m=Fs.measureText(t[g],p,f,y);a=Math.max(a,m.actualBoundingBoxLeft),l=Math.max(l,m.width),0==g?(s+=m.actualBoundingBoxAscent,u+=m.actualBoundingBoxAscent):c+=null!==(o=m.fontBoundingBoxAscent)&&void 0!==o?o:m.emHeightAscent,g==t.length-1?u+=m.actualBoundingBoxDescent:c+=null!==(i=m.fontBoundingBoxDescent)&&void 0!==i?i:m.emHeightDescent}return void 0!==d&&(c=(t.length-1)*d),u+=c,s+=c*Hl(f),new Ns(e-a,r-s,l,u)}function Ul(t,e,r,n){var o=0,i=0,a=0,s=jl(n),l=n.lineHeight,u=n.textBaseline,c=void 0===u?Gl.defaultStyles.textBaseline:u,p=n.textAlign,d=void 0===p?Gl.defaultStyles.textAlign:p;t.length>0&&(o=(f=Fs.getTextSize(t[0],s)).width,i=f.height);for(var h=1;h<t.length;h++){var f=Fs.getTextSize(t[h],s);o=Math.max(o,f.width),a+=null!=l?l:f.height}switch(d){case"end":case"right":e-=o;break;case"center":e-=o/2}switch(c){case"alphabetic":r-=.7*i+.5*a;break;case"middle":r-=.45*i+.5*a;break;case"ideographic":r-=i+a;break;case"hanging":r-=.2*i+.5*a;break;case"bottom":r-=i+a}return new Ns(e,r,o,i+a)}function Hl(t){switch(t){case"top":case"hanging":return 0;case"bottom":case"alphabetic":case"ideographic":return 1;case"middle":return.5}}function zl(t){return"string"==typeof t?t.split(/\r?\n/g):[]}var Wl=function(){function t(){this.allEventListeners=new Map}return t.prototype.addEventListener=function(t,e){if("function"!=typeof e)throw new Error("AG Charts - listener must be a Function");var r=this.allEventListeners,n=r.get(t);n||(n=new Set,r.set(t,n)),n.has(e)||n.add(e)},t.prototype.removeEventListener=function(t,e){var r=this.allEventListeners,n=r.get(t);n&&(n.delete(e),0===n.size&&r.delete(t))},t.prototype.hasEventListener=function(t){return this.allEventListeners.has(t)},t.prototype.clearEventListeners=function(){this.allEventListeners.clear()},t.prototype.fireEvent=function(t){var e=this.allEventListeners.get(t.type);null==e||e.forEach((function(e){return e(t)}))},t}(),Kl=function(t){return"string"==typeof t},Xl=function(t){return!!t&&Object.prototype.hasOwnProperty.call(t,"toString")&&Kl(t.toString())};function Yl(t){return Kl(t)||Xl(t)}function ql(t){var e;return Jl(t)||!!(e=t)&&Object.prototype.hasOwnProperty.call(e,"valueOf")&&Jl(e.valueOf())||function(t){return t instanceof Date&&!isNaN(+t)}(t)}function Zl(t,e){return e&&ql(t)?t:e?void 0:Yl(t)?t:String(t)}var Jl=function(t){return"number"==typeof t&&Number.isFinite(t)},$l=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},Ql=function(){function t(t,e,r,n){void 0===n&&(n=1),this.r=Math.min(1,Math.max(0,t||0)),this.g=Math.min(1,Math.max(0,e||0)),this.b=Math.min(1,Math.max(0,r||0)),this.a=Math.min(1,Math.max(0,n||0))}return t.validColorString=function(e){return e.indexOf("#")>=0?!!t.parseHex(e):e.indexOf("rgb")>=0?!!t.stringToRgba(e):!!t.nameToHex[e.toLowerCase()]},t.fromString=function(e){if(e.indexOf("#")>=0)return t.fromHexString(e);var r=t.nameToHex[e.toLowerCase()];if(r)return t.fromHexString(r);if(e.indexOf("rgb")>=0)return t.fromRgbaString(e);throw new Error("Invalid color string: '"+e+"'")},t.tryParseFromString=function(e){try{return t.fromString(e)}catch(r){return sl.warnOnce("invalid color string: '"+e+"'."),t.fromArray([0,0,0])}},t.parseHex=function(t){var e;switch((t=t.replace(/ /g,"").slice(1)).length){case 6:case 8:e=[];for(var r=0;r<t.length;r+=2)e.push(parseInt(""+t[r]+t[r+1],16));break;case 3:case 4:e=t.split("").map((function(t){return parseInt(t,16)})).map((function(t){return t+16*t}))}if((null==e?void 0:e.length)>=3&&e.every((function(t){return t>=0})))return 3===e.length&&e.push(255),e},t.fromHexString=function(e){var r=t.parseHex(e);if(r){var n=$l(r,4);return new t(n[0]/255,n[1]/255,n[2]/255,n[3]/255)}throw new Error("Malformed hexadecimal color string: '"+e+"'")},t.stringToRgba=function(t){for(var e=$l([NaN,NaN],2),r=e[0],n=e[1],o=0;o<t.length;o++){var i=t[o];if(r||"("!==i){if(")"===i){n=o;break}}else r=o}var a=r&&n&&t.substring(r+1,n);if(a){var s=a.split(","),l=[];for(o=0;o<s.length;o++){var u=s[o],c=parseFloat(u);if(isNaN(c))return;u.indexOf("%")>=0?(c=Math.max(0,Math.min(100,c)),c/=100):3===o?c=Math.max(0,Math.min(1,c)):(c=Math.max(0,Math.min(255,c)),c/=255),l.push(c)}return l}},t.fromRgbaString=function(e){var r=t.stringToRgba(e);if(r){if(3===r.length)return new t(r[0],r[1],r[2]);if(4===r.length)return new t(r[0],r[1],r[2],r[3])}throw new Error("Malformed rgb/rgba color string: '"+e+"'")},t.fromArray=function(e){if(4===e.length)return new t(e[0],e[1],e[2],e[3]);if(3===e.length)return new t(e[0],e[1],e[2]);throw new Error("The given array should contain 3 or 4 color components (numbers).")},t.fromHSB=function(e,r,n,o){void 0===o&&(o=1);var i=t.HSBtoRGB(e,r,n);return new t(i[0],i[1],i[2],o)},t.padHex=function(t){return 1===t.length?"0"+t:t},t.prototype.toHexString=function(){var e="#"+t.padHex(Math.round(255*this.r).toString(16))+t.padHex(Math.round(255*this.g).toString(16))+t.padHex(Math.round(255*this.b).toString(16));return this.a<1&&(e+=t.padHex(Math.round(255*this.a).toString(16))),e},t.prototype.toRgbaString=function(t){void 0===t&&(t=3);var e=[Math.round(255*this.r),Math.round(255*this.g),Math.round(255*this.b)],r=Math.pow(10,t);return 1!==this.a?(e.push(Math.round(this.a*r)/r),"rgba("+e.join(", ")+")"):"rgb("+e.join(", ")+")"},t.prototype.toString=function(){return 1===this.a?this.toHexString():this.toRgbaString()},t.prototype.toHSB=function(){return t.RGBtoHSB(this.r,this.g,this.b)},t.RGBtoHSB=function(t,e,r){var n=Math.min(t,e,r),o=Math.max(t,e,r),i=NaN;if(n!==o){var a=o-n,s=(o-t)/a,l=(o-e)/a,u=(o-r)/a;i=t===o?u-l:e===o?2+s-u:4+l-s,(i/=6)<0&&(i+=1)}return[360*i,0!==o?(o-n)/o:0,o]},t.HSBtoRGB=function(t,e,r){isNaN(t)&&(t=0),t=(t%360+360)%360/360;var n=0,o=0,i=0;if(0===e)n=o=i=r;else{var a=6*(t-Math.floor(t)),s=a-Math.floor(a),l=r*(1-e),u=r*(1-e*s),c=r*(1-e*(1-s));switch(a>>0){case 0:n=r,o=c,i=l;break;case 1:n=u,o=r,i=l;break;case 2:n=l,o=r,i=c;break;case 3:n=l,o=u,i=r;break;case 4:n=c,o=l,i=r;break;case 5:n=r,o=l,i=u}}return[n,o,i]},t.prototype.derive=function(e,r,n,o){var i=t.RGBtoHSB(this.r,this.g,this.b),a=i[2];0==a&&n>1&&(a=.05);var s=((i[0]+e)%360+360)%360,l=Math.max(Math.min(i[1]*r,1),0);a=Math.max(Math.min(a*n,1),0);var u=Math.max(Math.min(this.a*o,1),0),c=t.HSBtoRGB(s,l,a);return c.push(u),t.fromArray(c)},t.prototype.brighter=function(){return this.derive(0,1,1/.7,1)},t.prototype.darker=function(){return this.derive(0,1,.7,1)},t.interpolate=function(e,r){var n=t.tryParseFromString(e),o=t.tryParseFromString(r);return function(e){var r=function(t,r){return t*(1-e)+r*e};return new t(r(n.r,o.r),r(n.g,o.g),r(n.b,o.b),r(n.a,o.a)).toString()}},t.nameToHex=Object.freeze({aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",green:"#008000",greenyellow:"#ADFF2F",grey:"#808080",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",transparent:"#00000000",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"}),t}(),tu=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},eu=Symbol("BREAK");function ru(t,e){return function(r,n){var o=n.toString(),i=function(t,e,r,n){null==Object.getOwnPropertyDescriptor(t,"__decorator_config")&&Object.defineProperty(t,"__decorator_config",{value:{}});var o=t.__decorator_config;if(null!=o[r])return o[r];o[r]={setters:[],getters:[]};var i=Object.getOwnPropertyDescriptor(t,e),a=null==i?void 0:i.set,s=null==i?void 0:i.get;return Object.defineProperty(t,e,{set:function(t){var i,l,u,c,p,d=null!==(c=null===(u=o[r])||void 0===u?void 0:u.setters)&&void 0!==c?c:[];d.some((function(t){return t.length>2}))&&(p=s?s.call(this):this[n]);try{for(var h=tu(d),f=h.next();!f.done;f=h.next()){if((t=(0,f.value)(this,e,t,p))===eu)return}}catch(t){i={error:t}}finally{try{f&&!f.done&&(l=h.return)&&l.call(h)}finally{if(i)throw i.error}}a?a.call(this,t):this[n]=t},get:function(){var t,i,a,l,u=s?s.call(this):this[n];try{for(var c=tu(null!==(l=null===(a=o[r])||void 0===a?void 0:a.getters)&&void 0!==l?l:[]),p=c.next();!p.done;p=c.next()){if((u=(0,p.value)(this,e,u))===eu)return}}catch(e){t={error:e}}finally{try{p&&!p.done&&(i=c.return)&&i.call(c)}finally{if(t)throw t.error}}return u},enumerable:!0,configurable:!1}),o[r]}(r,n,o,"__"+o),a=i.getters;i.setters.push(t),e&&a.splice(0,0,e)}}function nu(t){return ru((function(e,r,n){var o,i,a;if(t(n,{target:e}))return n;var s=r.toString().replace(/^_*/,""),l=null!==(i=null===(o=e.constructor)||void 0===o?void 0:o.className)&&void 0!==i?i:null===(a=e.constructor)||void 0===a?void 0:a.name;(null==l?void 0:l.length)<3&&(l=null);var u=l?"of ["+l+"] ":"";return t.message?sl.warn("Property ["+s+"] "+u+"cannot be set to ["+JSON.stringify(n)+"]; "+t.message+", ignoring."):sl.warn("Property ["+s+"] "+u+"cannot be set to ["+JSON.stringify(n)+"], ignoring."),eu}))}function ou(t,e){return t.message=e,t}var iu=function(t,e,r){return void 0===t||r(t,e)},au=function(t,e){return ou((function(r,n){return Array.isArray(r)&&(!t||r.length===t)&&(!e||r.every((function(t){return e(t,n)})))}),"expecting an Array")},su=function(t){return ou((function(e,r){return iu(e,r,au(t))}),"expecting an optional Array")},lu=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return ou((function(e,r){return t.every((function(t){return t(e,r)}))}),t.map((function(t){return t.message})).filter((function(t){return null!=t})).join(" AND "))},uu=function(t){return null!=t&&!isNaN(t)},cu=function(t){return ou((function(e,r){return!uu(e)||!uu(r.target[t])||e<r.target[t]}),"expected to be less than "+t)},pu=function(t){return ou((function(e,r){return!uu(e)||!uu(r.target[t])||e>r.target[t]}),"expected to be greater than "+t)},du=ou((function(t){return"function"==typeof t}),"expecting a Function"),hu=ou((function(t,e){return iu(t,e,du)}),"expecting an optional Function"),fu=ou((function(t){return!0===t||!1===t}),"expecting a Boolean"),vu=ou((function(t,e){return iu(t,e,fu)}),"expecting an optional Boolean"),yu=ou((function(t){return"string"==typeof t}),"expecting a String"),gu=ou((function(t,e){return iu(t,e,yu)}),"expecting an optional String"),mu=ou((function(t){return t instanceof Date&&!isNaN(+t)}),"expecting a Date object"),bu=ou((function(t,e){return iu(t,e,mu)}),"expecting an optional Date");ou(au(void 0,mu),"expecting an Array of Date objects");var Cu=Pu(0),Su=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return ou((function(e,r){return t.some((function(t){return t(e,r)}))}),t.map((function(t){return t.message})).filter((function(t){return null!=t})).join(" OR "))}(bu,ou((function(t,e){return iu(t,e,Cu)}),"expecting an optional number")),wu="A color string can be in one of the following formats to be valid: #rgb, #rrggbb, rgb(r, g, b), rgba(r, g, b, a) or a CSS color name such as 'white', 'orange', 'cyan', etc",xu=ou((function(t){return"string"==typeof t&&Ql.validColorString(t)}),"expecting a color String. "+wu),Ou=ou((function(t,e){return iu(t,e,xu)}),"expecting an optional color String. "+wu),Eu=ou(au(void 0,xu),"expecting an Array of color strings. "+wu),Tu=ou((function(t,e){return iu(t,e,Eu)}),"expecting an optional Array of color strings. "+wu);function Pu(t,e){return ou((function(r){return"number"==typeof r&&Number.isFinite(r)&&(void 0===t||r>=t)&&(void 0===e||r<=e)}),"expecting a finite Number"+(void 0!==t?", more than or equal to "+t:"")+(void 0!==e?", less than or equal to "+e:""))}function Du(t,e){return ou((function(r,n){return iu(r,n,Pu(t,e))}),"expecting an optional finite Number"+(void 0!==t?", more than or equal to "+t:"")+(void 0!==e?", less than or equal to "+e:""))}function Au(t,e){return ou((function(r){return"number"==typeof r&&(isNaN(r)||Number.isFinite(r)&&(void 0===t||r>=t)&&(void 0===e||r<=e))}),"expecting a finite Number"+(void 0!==t?", more than or equal to "+t:"")+(void 0!==e?", less than or equal to "+e:""))}var Mu=ou(au(void 0,Pu()),"expecting an Array of numbers"),_u=ou((function(t,e){return iu(t,e,Mu)}),"expecting an optional Array of numbers"),Ru=ou(au(void 0,yu),"expecting an Array of strings");function ku(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r="expecting one of: "+t.join(", ");return ou((function(e){return"string"==typeof e&&t.indexOf(e)>=0}),r)}ou((function(t,e){return iu(t,e,Ru)}),"expecting an optional Array of strings");var Fu=ou(au(void 0,fu),"expecting an Array of boolean values");ou((function(t,e){return iu(t,e,Fu)}),"expecting an optional Array of boolean values");var Iu=["normal","bold","bolder","lighter","100","200","300","400","500","600","700","800","900"],Lu=ou((function(t){return"normal"===t||"italic"===t||"oblique"===t}),"expecting a font style keyword such as 'normal', 'italic' or 'oblique'"),Nu=ou((function(t,e){return iu(t,e,Lu)}),"expecting an optional font style keyword such as 'normal', 'italic' or 'oblique'"),Gu=ou((function(t){return Iu.includes(t)}),"expecting a font weight keyword such as 'normal', 'bold' or 'bolder' or a numeric value such as 100, 300 or 600"),ju=ou((function(t,e){return iu(t,e,Gu)}),"expecting an optional font weight keyword such as 'normal', 'bold' or 'bolder' or a numeric value such as 100, 300 or 600"),Vu=ou(au(void 0,Pu(0)),"expecting an Array of numbers specifying the length in pixels of alternating dashes and gaps, for example, [6, 3] means dashes with a length of 6 pixels with gaps between of 3 pixels."),Bu=ou((function(t,e){return iu(t,e,Vu)}),"expecting an optional Array of numbers specifying the length in pixels of alternating dashes and gaps, for example, [6, 3] means dashes with a length of 6 pixels with gaps between of 3 pixels."),Uu=["butt","round","square"],Hu=ou((function(t){return Uu.includes(t)}),"expecting a line cap keyword such as 'butt', 'round' or 'square'");ou((function(t,e){return iu(t,e,Hu)}),"expecting an optional line cap keyword such as 'butt', 'round' or 'square'");var zu=["round","bevel","miter"],Wu=ou((function(t){return zu.includes(t)}),"expecting a line join keyword such as 'round', 'bevel' or 'miter'");ou((function(t,e){return iu(t,e,Wu)}),"expecting an optional line join keyword such as 'round', 'bevel' or 'miter'");var Ku,Xu,Yu=["top","right","bottom","left"],qu=ou((function(t){return Yu.includes(t)}),"expecting a position keyword such as 'top', 'right', 'bottom' or 'left"),Zu=["exact","nearest"],Ju=ou((function(t){return"number"==typeof t&&Number.isFinite(t)||Zu.includes(t)}),"expecting an interaction range of 'exact', 'nearest' or a number"),$u=["never","always","hyphenate","on-space"],Qu=ou((function(t){return $u.includes(t)}),"expecting a text wrap strategy keyword such as 'never', 'always', 'hyphenate', 'on-space'");!function(t){t[t.SERIES_BACKGROUND_ZINDEX=-10]="SERIES_BACKGROUND_ZINDEX",t[t.AXIS_GRID_ZINDEX=0]="AXIS_GRID_ZINDEX",t[t.AXIS_ZINDEX=20]="AXIS_ZINDEX",t[t.SERIES_CROSSLINE_RANGE_ZINDEX=30]="SERIES_CROSSLINE_RANGE_ZINDEX",t[t.SERIES_LAYER_ZINDEX=500]="SERIES_LAYER_ZINDEX",t[t.SERIES_CROSSHAIR_ZINDEX=1e3]="SERIES_CROSSHAIR_ZINDEX",t[t.SERIES_LABEL_ZINDEX=1500]="SERIES_LABEL_ZINDEX",t[t.SERIES_CROSSLINE_LINE_ZINDEX=2500]="SERIES_CROSSLINE_LINE_ZINDEX",t[t.LEGEND_ZINDEX=3e3]="LEGEND_ZINDEX"}(Ku||(Ku={})),function(t){t.X="x",t.Y="y"}(Xu||(Xu={}));var tc=function(){function t(t){this.type=t,this.continuousDomain=[1/0,-1/0],this.discreteDomain=new Set}return t.prototype.extend=function(t){"discrete"===this.type?this.discreteDomain.add(t):"continuous"===this.type&&(this.continuousDomain[0]>t&&(this.continuousDomain[0]=t),this.continuousDomain[1]<t&&(this.continuousDomain[1]=t))},t.prototype.getDomain=function(){if("discrete"===this.type)return this.discreteDomain;if("continuous"===this.type)return this.continuousDomain;throw new Error("AG Charts - Unsupported data domain type: "+this.type)},t}(),ec=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function rc(t,e){var r,n;void 0===e&&(e=[1/0,-1/0]);try{for(var o=ec(t),i=o.next();!i.done;i=o.next()){var a=i.value;"number"==typeof a&&(a<e[0]&&(e[0]=a),a>e[1]&&(e[1]=a))}}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return e}var nc=function(){return(nc=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},oc=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},ic=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ac=function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t};function sc(t){return t.map((function(t){return null==t||"number"==typeof t||"string"==typeof t||"boolean"==typeof t?t:"object"==typeof t?JSON.stringify(t):t})).join("-")}function lc(t){if(void 0===t)return[];var e=oc(t,2),r=e[0],n=e[1];return n=+n,0===(r=+r)&&0===n?[0,1]:r===1/0&&n===-1/0?[]:(r===1/0&&(r=0),n===-1/0&&(n=0),Jl(r)&&Jl(n)?[r,n]:[])}var uc=Symbol("invalid"),cc=function(){function t(t){var e,r,n,o,i,a,s=this,l=t.props,u=!0;try{for(var c=ic(l),p=c.next();!p.done;p=c.next()){var d=p.value;if("key"===d.type&&!u)throw new Error("AG Charts - internal config error: keys must come before values.");"value"===d.type&&u&&(u=!1)}}catch(t){e={error:t}}finally{try{p&&!p.done&&(r=c.return)&&r.call(c)}finally{if(e)throw e.error}}this.opts=nc({dataVisible:!0},t),this.keys=l.filter((function(t){return"key"===t.type})).map((function(t,e){return nc(nc({},t),{index:e,missing:0})})),this.values=l.filter((function(t){return"value"===t.type})).map((function(t,e){return nc(nc({},t),{index:e,missing:0})})),this.aggregates=l.filter((function(t){return"aggregate"===t.type})).map((function(t,e){return nc(nc({},t),{index:e})})),this.groupProcessors=l.filter((function(t){return"group-value-processor"===t.type})).map((function(t,e){return nc(nc({},t),{index:e})})),this.propertyProcessors=l.filter((function(t){return"property-value-processor"===t.type})).map((function(t,e){return nc(nc({},t),{index:e})})),this.reducers=l.filter((function(t){return"reducer"===t.type})).map((function(t,e){return nc(nc({},t),{index:e})})),this.processors=l.filter((function(t){return"processor"===t.type})).map((function(t,e){return nc(nc({},t),{index:e})}));try{for(var h=ic(this.values),f=h.next();!f.done;f=h.next()){if(null==(C=f.value).property)throw new Error("AG Charts - internal config error: no properties specified for value definitions: "+JSON.stringify(C))}}catch(t){n={error:t}}finally{try{f&&!f.done&&(o=h.return)&&o.call(h)}finally{if(n)throw n.error}}var v=function(t){var e,r,n=t.matchGroupIds,o=function(t){if(!s.values.some((function(e){return e.groupId===t})))throw new Error("AG Charts - internal config error: matchGroupIds properties must match defined groups ("+t+").")};try{for(var i=ic(null!=n?n:[]),a=i.next();!a.done;a=i.next()){o(a.value)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}},y=function(t){var e,r,n=t.matchScopes,o=function(t){if(!s.values.some((function(e){var r;return null===(r=e.scopes)||void 0===r?void 0:r.includes(t)})))throw new Error("AG Charts - internal config error: matchGroupIds properties must match defined groups ("+t+").")};try{for(var i=ic(null!=n?n:[]),a=i.next();!a.done;a=i.next()){o(a.value)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}},g=function(t){var e,r,n=t.matchIds,o=function(t){if(!s.values.some((function(e){return e.id===t})))throw new Error("AG Charts - internal config error: matchGroupIds properties must match defined groups ("+t+").")};try{for(var i=ic(null!=n?n:[]),a=i.next();!a.done;a=i.next()){o(a.value)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}};try{for(var m=ic(ac(ac([],oc(this.groupProcessors)),oc(this.aggregates))),b=m.next();!b.done;b=m.next()){var C;g(C=b.value),v(C),y(C)}}catch(t){i={error:t}}finally{try{b&&!b.done&&(a=m.return)&&a.call(m)}finally{if(i)throw i.error}}}return t.prototype.resolveProcessedDataIndexById=function(t,e,r){var n;void 0===r&&(r="value");var o=null!==(n=this.resolveProcessedDataDefById(t,e,r))&&void 0!==n?n:{};return{type:r,index:o.index,def:o.def}},t.prototype.resolveProcessedDataIndicesById=function(t,e,r){return void 0===r&&(r="value"),this.resolveProcessedDataDefsById(t,e,r).map((function(t){var e=t.index,n=t.def;return{type:r,index:e,def:n}}))},t.prototype.resolveProcessedDataDefById=function(t,e,r){return void 0===r&&(r="value"),this.resolveProcessedDataDefsById(t,e,r)[0]},t.prototype.resolveProcessedDataDefsById=function(t,e,r){var n,o;void 0===r&&(r="value");var i=this,a=function(r){var n=r.id,o=r.scopes;return null!=n&&(!(null!=t&&!(null==o?void 0:o.includes(t.id)))&&("string"==typeof e?n===e:e.test(n)))},s=[i.keys,i.values,i.aggregates,i.groupProcessors,i.reducers],l=[];try{for(var u=ic(s),c=u.next();!c.done;c=u.next()){var p=c.value;l.push.apply(l,ac([],oc(p.filter(a).map((function(t){return{index:t.index,def:t}})))))}}catch(t){n={error:t}}finally{try{c&&!c.done&&(o=u.return)&&o.call(u)}finally{if(n)throw n.error}}if(l.length>0)return l;throw new Error("AG Charts - didn't find property definition for ["+e+", "+t.id+", "+r+"]")},t.prototype.getDomain=function(t,e,r,n){var o,i,a,s,l,u,c,p;void 0===r&&(r="value");try{c=this.resolveProcessedDataIndicesById(t,e,r)}catch(t){if("string"!=typeof e&&/didn't find property definition/.test(t.message))return[];throw t}switch(r){case"key":p="keys";break;case"value":p="values";break;case"aggregate":p="aggValues";break;case"group-value-processor":p="groups";break;default:return[]}var d=null!==(s=null===(a=n.domain[p])||void 0===a?void 0:a[c[0].index])&&void 0!==s?s:[];if(1===c.length)return d;var h=ac([],oc(d));try{for(var f=ic(c.slice(1)),v=f.next();!v.done;v=f.next()){var y=v.value;rc(null!==(u=null===(l=n.domain[p])||void 0===l?void 0:l[y.index])&&void 0!==u?u:[],h)}}catch(t){o={error:t}}finally{try{v&&!v.done&&(i=f.return)&&i.call(f)}finally{if(o)throw o.error}}return h},t.prototype.processData=function(e){var r,n,o,i,a=this,s=a.opts,l=s.groupByKeys,u=s.groupByFn,c=a.aggregates,p=a.groupProcessors,d=a.reducers,h=a.processors,f=a.propertyProcessors,v=performance.now();try{for(var y=ic(ac(ac([],oc(this.keys)),oc(this.values))),g=y.next();!g.done;g=y.next()){(S=g.value).missing=0}}catch(t){r={error:t}}finally{try{g&&!g.done&&(n=y.return)&&n.call(y)}finally{if(r)throw r.error}}if(!l||0!==this.keys.length){var m=this.extractData(e);l?m=this.groupData(m):u&&(m=this.groupData(m,u(m))),p.length>0&&this.postProcessGroups(m),c.length>0&&this.aggregateData(m),f.length>0&&this.postProcessProperties(m),d.length>0&&this.reduceData(m),h.length>0&&this.postProcessData(m);try{for(var b=ic(ac(ac([],oc(this.keys)),oc(this.values))),C=b.next();!C.done;C=b.next()){var S=C.value;e.length>0&&S.missing>=e.length&&sl.warnOnce("the key '"+S.property+"' was not found in any data element.")}}catch(t){o={error:t}}finally{try{C&&!C.done&&(i=b.return)&&i.call(b)}finally{if(o)throw o.error}}var w=performance.now();return m.time=w-v,t.DEBUG()&&function(t){var e,r,n=function(t,e){e.length>0&&(console.log("DataModel.processData() - "+t),console.table(e))};if(console.log("DataModel.processData() - processedData",t),n("Key Domains",t.domain.keys),n("Group Domains",null!==(e=t.domain.groups)&&void 0!==e?e:[]),n("Value Domains",t.domain.values),n("Aggregate Domains",null!==(r=t.domain.aggValues)&&void 0!==r?r:[]),"grouped"===t.type){var o=t.data.reduce((function(t,e){var r,n,o=null!==(r=e.keys)&&void 0!==r?r:[],i=null!==(n=e.aggValues)&&void 0!==n?n:[],a=e.keys.map((function(){})),s=null==i?void 0:i.map((function(){}));return t.push.apply(t,ac([],oc(e.values.map((function(t,e){return ac(ac(ac([],oc(0===e?o:a)),oc(null!=t?t:[])),oc(0==e?i:s))}))))),t}),[]);n("Values",o)}else{o=t.data.reduce((function(t,e){var r,n=null!==(r=e.aggValues)&&void 0!==r?r:[];return t.push(ac(ac(ac([],oc(e.keys)),oc(e.values)),oc(n))),t}),[]);n("Values",o)}}(m),m}},t.prototype.valueGroupIdxLookup=function(t){var e=t.matchGroupIds,r=t.matchIds,n=t.matchScopes;return this.values.map((function(t,e){return{def:t,index:e}})).filter((function(t){var o=t.def;return!(e&&(null==o.groupId||!e.includes(o.groupId)))&&(!(r&&(null==o.id||!r.includes(o.id)))&&!(n&&(null==o.scopes||!n.some((function(t){var e;return null===(e=o.scopes)||void 0===e?void 0:e.includes(t)})))))})).map((function(t){return t.index}))},t.prototype.valueIdxLookup=function(t,e){var r,n=null==t||0===t.length,o=function(e){if(null==e)return!0;var r=null==e||0===e.length;return n===r||(null==e?void 0:e.some((function(e){return t.includes(e)})))};if((r="string"==typeof e?this.values.findIndex((function(t){return o(t.scopes)&&t.property===e})):this.values.findIndex((function(t){return o(t.scopes)&&t.id===e.id})))>=0)return r;throw new Error("AG Charts - configuration error, unknown property "+JSON.stringify(e)+" in scope(s) "+JSON.stringify(t))},t.prototype.extractData=function(t){var e,r,n,o,i,a,s,l,u,c=this.keys,p=this.values,d=this.opts.dataVisible,h=this.initDataDomainProcessor(),f=h.dataDomain,v=h.processValue,y=h.scopes,g=h.allScopesHaveSameDefs,m=new Array(d?t.length:0),b=0,C=0;try{for(var S=ic(t),w=S.next();!w.done;w=S.next()){var x=w.value,O=y.size>0?new Set(y):void 0,E=d?new Array(c.length):void 0,T=0,P=void 0;try{for(var D=(n=void 0,ic(c)),A=D.next();!A.done;A=D.next()){if((P=v(I=A.value,x,P))===uc)break;E&&(E[T++]=P)}}catch(t){n={error:t}}finally{try{A&&!A.done&&(o=D.return)&&o.call(D)}finally{if(n)throw n.error}}if(P!==uc){var M=d&&p.length>0?new Array(p.length):void 0,_=0,R=void 0;try{for(var k=(i=void 0,ic(p)),F=k.next();!F.done;F=k.next()){var I;if((R=v(I=F.value,x,R))===uc){if(g)break;try{for(var L=(s=void 0,ic(null!==(u=I.scopes)&&void 0!==u?u:y)),N=L.next();!N.done;N=L.next()){var G=N.value;null==O||O.delete(G)}}catch(t){s={error:t}}finally{try{N&&!N.done&&(l=L.return)&&l.call(L)}finally{if(s)throw s.error}}if(_++,0===(null==O?void 0:O.size))break}else M&&(M[_++]=R)}}catch(t){i={error:t}}finally{try{F&&!F.done&&(a=k.return)&&a.call(k)}finally{if(i)throw i.error}}if((R!==uc||!g)&&0!==(null==O?void 0:O.size)&&d){var j={datum:x,keys:E,values:M};!g&&O&&O.size<y.size&&(C++,j.validScopes=ac([],oc(O))),m[b++]=j}}}}catch(t){e={error:t}}finally{try{w&&!w.done&&(r=S.return)&&r.call(S)}finally{if(e)throw e.error}}m.length=b;var V=function(t){var e=f.get(t).getDomain();return Array.isArray(e)&&e[0]>e[1]?[]:ac([],oc(e))};return{type:"ungrouped",data:m,domain:{keys:c.map((function(t){return V(t)})),values:p.map((function(t){return V(t)}))},defs:{allScopesHaveSameDefs:g,keys:c,values:p},partialValidDataCount:C,time:0}},t.prototype.groupData=function(t,e){var r,n,o,i,a,s,l,u,c=new Map;try{for(var p=ic(t.data),d=p.next();!d.done;d=p.next()){var h=d.value,f=h.keys,v=h.values,y=h.datum,g=h.validScopes,m=e?e(h):f,b=sc(m);if(c.has(b)){var C=c.get(b);if(C.values.push(v),C.datum.push(y),null!=g)for(var S=function(t){var e=null===(l=C.validScopes)||void 0===l?void 0:l[t];if(g.some((function(t){return t===e})))return"continue";null===(u=C.validScopes)||void 0===u||u.splice(t,1)},w=0;w<(null!==(s=null===(a=C.validScopes)||void 0===a?void 0:a.length)&&void 0!==s?s:0);w++)S(w)}else c.set(b,{keys:m,values:[v],datum:[y],validScopes:g})}}catch(t){r={error:t}}finally{try{d&&!d.done&&(n=p.return)&&n.call(p)}finally{if(r)throw r.error}}var x=new Array(c.size),O=new Array(c.size),E=0;try{for(var T=ic(c.entries()),P=T.next();!P.done;P=T.next()){var D=oc(P.value,2)[1];f=D.keys,v=D.values,y=D.datum;0!==(null==(g=D.validScopes)?void 0:g.length)&&(O[E]=f,x[E++]={keys:f,values:v,datum:y,validScopes:g})}}catch(t){o={error:t}}finally{try{P&&!P.done&&(i=T.return)&&i.call(T)}finally{if(o)throw o.error}}return nc(nc({},t),{type:"grouped",data:x,domain:nc(nc({},t.domain),{groups:O})})},t.prototype.aggregateData=function(t){var e,r,n,o,i,a,s,l,u,c,p=this,d=this.aggregates;if(d){var h=d.map((function(){return[1/0,-1/0]})),f=d.map((function(t){return p.valueGroupIdxLookup(t)})),v=d.map((function(t){return t.aggregateFunction})),y=d.map((function(t){return t.groupAggregateFunction})),g=d.map((function(t){return t.finalFunction})),m=function(e){var r,p,m,b,C=e.values,S=e.validScopes;null!==(n=e.aggValues)&&void 0!==n||(e.aggValues=new Array(f.length)),"ungrouped"===t.type&&(C=[C]);var w=0;try{for(var x=(r=void 0,ic(f)),O=x.next();!O.done;O=x.next()){var E=O.value;if(null===(o=null==S?void 0:S.some((function(t){var e;return null===(e=d[w].matchScopes)||void 0===e?void 0:e.some((function(e){return t===e}))})))||void 0===o||o){var T=null!==(a=null===(i=y[w])||void 0===i?void 0:i.call(y))&&void 0!==a?a:rc([]),P=function(t){var r=E.map((function(e){return t[e]})),n=v[w](r,e.keys);n&&(T=null!==(l=null===(s=y[w])||void 0===s?void 0:s.call(y,n,T))&&void 0!==l?l:rc(n,T))};try{for(var D=(m=void 0,ic(C)),A=D.next();!A.done;A=D.next()){P(A.value)}}catch(t){m={error:t}}finally{try{A&&!A.done&&(b=D.return)&&b.call(D)}finally{if(m)throw m.error}}var M=(null!==(c=null===(u=g[w])||void 0===u?void 0:u.call(g,T))&&void 0!==c?c:T).map((function(t){return e=t,Number.isInteger(e)?e:Math.abs(e)>1e4?Math.trunc(e):Math.round(1e4*e)/1e4;var e}));rc(M,h[w]),e.aggValues[w++]=M}else w++}}catch(t){r={error:t}}finally{try{O&&!O.done&&(p=x.return)&&p.call(x)}finally{if(r)throw r.error}}};try{for(var b=ic(t.data),C=b.next();!C.done;C=b.next()){m(C.value)}}catch(t){e={error:t}}finally{try{C&&!C.done&&(r=b.return)&&r.call(b)}finally{if(e)throw e.error}}t.domain.aggValues=h}},t.prototype.postProcessGroups=function(t){var e,r,n,o,i,a,s,l,u,c,p,d,h,f,v,y,g,m=this.groupProcessors;if(m){var b=new Set,C=new Map,S=new Map,w=new Map;try{for(var x=ic(m),O=x.next();!O.done;O=x.next()){var E=O.value,T=this.valueGroupIdxLookup(E);S.set(E,T),w.set(E,E.adjust());try{for(var P=(n=void 0,ic(T)),D=P.next();!D.done;D=P.next()){var A=D.value,M=this.values[A];b.add(A),C.set(A,new tc("category"===M.valueType?"discrete":"continuous"))}}catch(t){n={error:t}}finally{try{D&&!D.done&&(o=P.return)&&o.call(P)}finally{if(n)throw n.error}}}}catch(t){e={error:t}}finally{try{O&&!O.done&&(r=x.return)&&r.call(x)}finally{if(e)throw e.error}}var _=function(t){var e,r,n;try{for(var o=ic(b),i=o.next();!i.done;i=o.next()){var a=i.value;null===(n=C.get(a))||void 0===n||n.extend(t[a])}}catch(t){e={error:t}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}};try{for(var R=ic(t.data),k=R.next();!k.done;k=R.next()){var F=k.value,I=function(e){var r,n;if(!(null===(f=null===(h=F.validScopes)||void 0===h?void 0:h.some((function(t){var r;return null===(r=e.matchScopes)||void 0===r?void 0:r.some((function(e){return t===e}))})))||void 0===f||f))return"continue";var o=null!==(v=S.get(e))&&void 0!==v?v:[],i=null!==(g=null===(y=w.get(e))||void 0===y?void 0:y())&&void 0!==g?g:function(){};if("grouped"===t.type){try{for(var a=(r=void 0,ic(F.values)),s=a.next();!s.done;s=a.next()){var l=s.value;l&&i(l,o)}}catch(t){r={error:t}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return"continue"}F.values&&i(F.values,o)};try{for(var L=(s=void 0,ic(m)),N=L.next();!N.done;N=L.next()){I(E=N.value)}}catch(t){s={error:t}}finally{try{N&&!N.done&&(l=L.return)&&l.call(L)}finally{if(s)throw s.error}}if("grouped"===t.type)try{for(var G=(u=void 0,ic(F.values)),j=G.next();!j.done;j=G.next()){_(j.value)}}catch(t){u={error:t}}finally{try{j&&!j.done&&(c=G.return)&&c.call(G)}finally{if(u)throw u.error}}else _(F.values)}}catch(t){i={error:t}}finally{try{k&&!k.done&&(a=R.return)&&a.call(R)}finally{if(i)throw i.error}}try{for(var V=ic(C),B=V.next();!B.done;B=V.next()){var U=oc(B.value,2),H=(A=U[0],U[1]);t.domain.values[A]=ac([],oc(H.getDomain()))}}catch(t){p={error:t}}finally{try{B&&!B.done&&(d=V.return)&&d.call(V)}finally{if(p)throw p.error}}}},t.prototype.postProcessProperties=function(t){var e,r,n=this.propertyProcessors;if(n)try{for(var o=ic(n),i=o.next();!i.done;i=o.next()){var a=i.value,s=a.adjust,l=a.property,u=a.scopes;s()(t,this.valueIdxLookup(null!=u?u:[],l))}}catch(t){e={error:t}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}},t.prototype.reduceData=function(t){var e,r,n,o,i,a=this.reducers,s=a.map((function(t){return t.scopes})),l=a.map((function(t){return t.reducer()})),u=a.map((function(t){return t.initialValue})),c=function(t){var e,r,i=0;try{for(var a=(e=void 0,ic(l)),c=a.next();!c.done;c=a.next()){var p=c.value;null===(o=null===(n=t.validScopes)||void 0===n?void 0:n.some((function(t){var e;return null===(e=s[i])||void 0===e?void 0:e.some((function(e){return t===e}))})))||void 0===o||o?(u[i]=p(u[i],t),i++):i++}}catch(t){e={error:t}}finally{try{c&&!c.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}};try{for(var p=ic(t.data),d=p.next();!d.done;d=p.next()){c(d.value)}}catch(t){e={error:t}}finally{try{d&&!d.done&&(r=p.return)&&r.call(p)}finally{if(e)throw e.error}}for(var h=0;h<u.length;h++)null!==(i=t.reduced)&&void 0!==i||(t.reduced={}),t.reduced[a[h].property]=u[h]},t.prototype.postProcessData=function(t){var e,r,n,o=this.processors;try{for(var i=ic(o),a=i.next();!a.done;a=i.next()){var s=a.value;null!==(n=t.reduced)&&void 0!==n||(t.reduced={}),t.reduced[s.property]=s.calculate(t)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}},t.prototype.initDataDomainProcessor=function(){var t,e,r,n,o,i=this.keys,a=this.values,s=new Set;try{for(var l=ic(a),u=l.next();!u.done;u=l.next()){var c=u.value;try{for(var p=(r=void 0,ic(null!==(o=c.scopes)&&void 0!==o?o:[])),d=p.next();!d.done;d=p.next()){var h=d.value;s.add(h)}}catch(t){r={error:t}}finally{try{d&&!d.done&&(n=p.return)&&n.call(p)}finally{if(r)throw r.error}}}}catch(e){t={error:e}}finally{try{u&&!u.done&&(e=l.return)&&e.call(l)}finally{if(t)throw t.error}}var f=s.size,v=new Map,y=new Map,g=!0,m=function(t,e,r){var n;void 0===r&&(r=v),"category"===e?r.set(t,new tc("discrete")):(r.set(t,new tc("continuous")),g&&(g=(null!==(n=t.scopes)&&void 0!==n?n:[]).length===f))},b=function(){i.forEach((function(t){return m(t,t.valueType)})),a.forEach((function(t){return m(t,t.valueType)}))};b();var C=this.buildAccessors.apply(this,ac(ac([],oc(i)),oc(a)));return{dataDomain:v,processValue:function(t,e,r){var n,o,i,a,s,l=!1;if(t.property in C){try{s=C[t.property](e)}catch(t){}l=void 0!==s}else s=(l=t.property in e)?e[t.property]:t.missingValue;if((l||"missingValue"in t||t.missing++,v.has(t)||b(),l)&&!(null===(o=null===(n=t.validation)||void 0===n?void 0:n.call(t,s,e))||void 0===o||o)){if(!("invalidValue"in t))return uc;s=t.invalidValue}return t.processor&&(y.has(t)||y.set(t,t.processor()),s=null===(i=y.get(t))||void 0===i?void 0:i(s,r!==uc?r:void 0)),null===(a=v.get(t))||void 0===a||a.extend(s),s},initDataDomain:b,scopes:s,allScopesHaveSameDefs:g}},t.prototype.buildAccessors=function(){for(var t,e,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var o={};try{for(var i=ic(r),a=i.next();!a.done;a=i.next()){var s=a.value,l=s.property.indexOf(".")>=0||s.property.indexOf("[")>=0;if(l){var u=void 0;u=s.property.startsWith("[")?"return datum"+s.property+";":"return datum."+s.property+";",o[s.property]=new Function("datum",u)}}}catch(e){t={error:e}}finally{try{a&&!a.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}return o},t.DEBUG=function(){var t;return null!==(t=[!0,"data-model"].includes(yl("agChartsDebug")))&&void 0!==t&&t},t}();function pc(){return function(t,e){var r=["Property ["+t+"] is deprecated.",e].filter((function(t){return null!=t})).join(" ");sl.warnOnce(r)}}var dc=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},hc=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function fc(t,e){var r,n,o,i;if("string"==typeof t)return t;e=null!=e?e:{};var a=t.content,s=void 0===a?null!==(r=e.content)&&void 0!==r?r:"":a,l=t.title,u=void 0===l?null!==(n=e.title)&&void 0!==n?n:void 0:l,c=t.color,p=void 0===c?null!==(o=e.color)&&void 0!==o?o:"white":c,d=t.backgroundColor,h=void 0===d?null!==(i=e.backgroundColor)&&void 0!==i?i:"#888":d;return(u?'<div class="ag-chart-tooltip-title"\n        style="color: '+p+"; background-color: "+h+'">'+u+"</div>":"")+'<div class="ag-chart-tooltip-content">'+s+"</div>"}var vc=["pointer","node"],yc=ou((function(t){return vc.includes(t)}),"expecting a position type keyword such as 'pointer' or 'node'"),gc=function(){function t(){this.type="pointer",this.xOffset=0,this.yOffset=0}return dc([nu(yc)],t.prototype,"type",void 0),dc([nu(Pu())],t.prototype,"xOffset",void 0),dc([nu(Pu())],t.prototype,"yOffset",void 0),t}(),mc=function(){function t(e,r,n){var o=this;this.enableInteraction=!1,this.enabled=!0,this.showArrow=void 0,this.class=void 0,this.lastClass=void 0,this.delay=0,this.range="nearest",this.position=new gc,this.showTimeout=0,this._showArrow=!0,this.tooltipRoot=n;var i=r.createElement("div");if(this.element=this.tooltipRoot.appendChild(i),this.element.classList.add("ag-chart-tooltip"),this.canvasElement=e,window.IntersectionObserver){var a=new IntersectionObserver((function(t){var e,r;try{for(var n=hc(t),i=n.next();!i.done;i=n.next()){var a=i.value;a.target===o.canvasElement&&0===a.intersectionRatio&&o.toggle(!1)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}}),{root:this.tooltipRoot});a.observe(this.canvasElement),this.observer=a}if(t.tooltipDocuments.indexOf(r)<0){var s=r.createElement("style");s.innerHTML='\n.ag-chart-tooltip {\n    transition: transform 0.1s ease;\n    display: table;\n    position: fixed;\n    left: 0px;\n    top: 0px;\n    white-space: nowrap;\n    z-index: 99999;\n    font: 12px Verdana, sans-serif;\n    color: black;\n    background: rgb(244, 244, 244);\n    border-radius: 5px;\n    box-shadow: 0 0 1px rgba(3, 3, 3, 0.7), 0.5vh 0.5vh 1vh rgba(3, 3, 3, 0.25);\n}\n\n.ag-chart-tooltip-no-interaction {\n    pointer-events: none;\n    user-select: none;\n}\n\n.ag-chart-tooltip-no-animation {\n    transition: none !important;\n}\n\n.ag-chart-tooltip-hidden {\n    visibility: hidden;\n}\n\n.ag-chart-tooltip-title {\n    font-weight: bold;\n    padding: 7px;\n    border-top-left-radius: 5px;\n    border-top-right-radius: 5px;\n    color: white;\n    background-color: #888888;\n    border-top-left-radius: 5px;\n    border-top-right-radius: 5px;\n}\n\n.ag-chart-tooltip-content {\n    padding: 7px;\n    line-height: 1.7em;\n    border-bottom-left-radius: 5px;\n    border-bottom-right-radius: 5px;\n    overflow: hidden;\n}\n\n.ag-chart-tooltip-content:empty {\n    padding: 0;\n    height: 7px;\n}\n\n.ag-chart-tooltip-arrow::before {\n    content: "";\n\n    position: absolute;\n    top: 100%;\n    left: 50%;\n    transform: translateX(-50%);\n\n    border: 6px solid #989898;\n\n    border-left-color: transparent;\n    border-right-color: transparent;\n    border-top-color: #989898;\n    border-bottom-color: transparent;\n\n    width: 0;\n    height: 0;\n\n    margin: 0 auto;\n}\n\n.ag-chart-tooltip-arrow::after {\n    content: "";\n\n    position: absolute;\n    top: 100%;\n    left: 50%;\n    transform: translateX(-50%);\n\n    border: 5px solid black;\n\n    border-left-color: transparent;\n    border-right-color: transparent;\n    border-top-color: rgb(244, 244, 244);\n    border-bottom-color: transparent;\n\n    width: 0;\n    height: 0;\n\n    margin: 0 auto;\n}\n\n.ag-chart-wrapper {\n    box-sizing: border-box;\n    overflow: hidden;\n}\n',r.head.insertBefore(s,r.head.querySelector("style")),t.tooltipDocuments.push(r)}}var e,r,n;return t.prototype.destroy=function(){var t=this.element.parentNode;t&&t.removeChild(this.element),this.observer&&this.observer.unobserve(this.canvasElement)},t.prototype.isVisible=function(){return!this.element.classList.contains("ag-chart-tooltip-hidden")},t.prototype.updateClass=function(t,e){var r=this.element,n=this.class,o=this.lastClass,i=this.enableInteraction,a=function(t,e){var n="ag-chart-tooltip-"+t;e?r.classList.add(n):r.classList.remove(n)};a("no-animation",!this.isVisible()&&!!t),a("no-interaction",!i),a("hidden",!t),a("arrow",!!e),n!==o&&(o&&r.classList.remove(o),n&&r.classList.add(n),this.lastClass=n)},t.prototype.show=function(t,e,r){var n,o,i,a,s,l,u,c=this;void 0===r&&(r=!1);var p=this.element,d=this.canvasElement;if(void 0!==e)p.innerHTML=e;else if(!p.innerHTML)return void this.toggle(!1);var h=function(t,e,r){return Math.max(Math.min(e,r),t)},f=null!==(o=null===(n=t.position)||void 0===n?void 0:n.xOffset)&&void 0!==o?o:0,v=null!==(a=null===(i=t.position)||void 0===i?void 0:i.yOffset)&&void 0!==a?a:0,y=d.getBoundingClientRect(),g=y.left+t.offsetX-p.clientWidth/2+f,m=y.top+t.offsetY-p.clientHeight-8+v,b=this.getWindowBoundingBox(),C=b.x+b.width-p.clientWidth-1,S=b.y+b.height-p.clientHeight,w=h(b.x,g,C),x=h(b.y,m,S),O=!(w!==g||x!==m)&&!f&&!v,E=null!==(l=null!==(s=t.showArrow)&&void 0!==s?s:this.showArrow)&&void 0!==l?l:O;if(this.updateShowArrow(E),p.style.transform="translate("+Math.round(w)+"px, "+Math.round(x)+"px)",this.enableInteraction=null!==(u=t.enableInteraction)&&void 0!==u&&u,this.delay>0&&!r)return this.toggle(!1),void(this.showTimeout=window.setTimeout((function(){c.toggle(!0)}),this.delay));this.toggle(!0)},t.prototype.getWindowBoundingBox=function(){return new Ns(0,0,window.innerWidth,window.innerHeight)},t.prototype.toggle=function(t){t||window.clearTimeout(this.showTimeout),this.updateClass(t,this._showArrow)},t.prototype.pointerLeftOntoTooltip=function(t){var e;if(!this.enableInteraction)return!1;var r=null===(e=t.sourceEvent.relatedTarget)||void 0===e?void 0:e.classList,n=Boolean(["","-title","-content"].filter((function(t){return null==r?void 0:r.contains("ag-chart-tooltip"+t)})));return void 0!==r&&n},t.prototype.updateShowArrow=function(t){this._showArrow=t},t.tooltipDocuments=[],dc([nu(fu)],t.prototype,"enabled",void 0),dc([nu(vu)],t.prototype,"showArrow",void 0),dc([nu(gu)],t.prototype,"class",void 0),dc([nu(Pu(0))],t.prototype,"delay",void 0),dc([(e="range",r=function(t){return t?"nearest":"exact"},n=pc(),ru((function(t,o,i){return i!==t[e]&&(n(o.toString(),"Use ["+e+"] instead."),t[e]=r?r(i):i),eu}),(function(t,r){return n(r.toString(),"Use ["+e+"] instead."),t[e]})))],t.prototype,"tracking",void 0),dc([nu(Ju)],t.prototype,"range",void 0),t}(),bc=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function Cc(t,e){var r,n;void 0===e&&(e=[0,0]);try{for(var o=bc(t),i=o.next();!i.done;i=o.next()){var a=i.value;"number"==typeof a&&(a<0&&(e[0]+=a),a>0&&(e[1]+=a))}}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return e}function Sc(t,e){return{id:e,scopes:[t.id],type:"aggregate",aggregateFunction:function(){return[0,1]},groupAggregateFunction:function(t,e){var r,n;return void 0===e&&(e=[0,0]),e[0]+=null!==(r=null==t?void 0:t[0])&&void 0!==r?r:0,e[1]+=null!==(n=null==t?void 0:t[1])&&void 0!==n?n:0,e}}}function wc(t,e,r,n){var o={id:e,scopes:[t.id],matchGroupIds:n?[n]:void 0,type:"aggregate",aggregateFunction:function(t,e){void 0===e&&(e=[]);var n=e[1]-e[0];return r.aggregateFunction(t).map((function(t){return t/n}))}};return r.groupAggregateFunction&&(o.groupAggregateFunction=r.groupAggregateFunction),o}var xc=new Map;function Oc(t,e){var r,n,o,i=JSON.stringify(t,null,0);return xc.has(e)||xc.set(e,new Map),(null===(r=xc.get(e))||void 0===r?void 0:r.has(i))||null===(n=xc.get(e))||void 0===n||n.set(i,e(t)),null===(o=xc.get(e))||void 0===o?void 0:o.get(i)}var Ec=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},Tc=function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t},Pc=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Dc={type:"reducer",property:"smallestKeyInterval",initialValue:1/0,reducer:function(){var t=NaN;return function(e,r){var n=r.keys[0],o=Math.abs(n-t);return t=n,!isNaN(o)&&o>0&&o<e?o:e}}},Ac={type:"processor",property:"sortedGroupDomain",calculate:function(t){var e=t.domain.groups;if(null!=e)return Tc([],Ec(e)).sort((function(t,e){for(var r=0;r<t.length;r++){var n=t[r]-e[r];if(0!==n)return n}return 0}))}};function Mc(t){var e=t.normaliseTo,r=t.mode,n=function(t,r){var n=t*e/r;return n>=0?Math.min(e,n):Math.max(-e,n)};return function(){return function(){return function(t,e){var o,i,a,s,l=[0,0];try{for(var u=Pc(e),c=u.next();!c.done;c=u.next()){var p=t[y=c.value],d=p<0?0:1;"sum"===r?l[d]+=p:l[d]=0===d?Math.min(l[d],p):Math.max(l[d],p)}}catch(t){o={error:t}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(o)throw o.error}}var h=Math.max(Math.abs(l[0]),l[1]);try{for(var f=Pc(e),v=f.next();!v.done;v=f.next()){var y;t[y=v.value]=n(t[y],h)}}catch(t){a={error:t}}finally{try{v&&!v.done&&(s=f.return)&&s.call(f)}finally{if(a)throw a.error}}}}}}function _c(t,e,r,n){return void 0===n&&(n="sum"),{scopes:[t.id],type:"group-value-processor",matchGroupIds:e,adjust:Oc({normaliseTo:r,mode:n},Mc)}}function Rc(t){var e=t.normaliseTo,r=t.rangeMin,n=t.rangeMax,o=e[1]-e[0],i=function(t,r,n){var i=e[0]+(t-r)/n*o;return 0===n||i>=e[1]?e[1]:i<e[0]?e[0]:i};return function(){return function(t,o){var a,s,l,u,c=Ec(t.domain.values[o],2),p=c[0],d=c[1];null!=r&&(p=r),null!=n&&(d=n);var h=d-p;t.domain.values[o]=[e[0],e[1]];try{for(var f=Pc(t.data),v=f.next();!v.done;v=f.next()){var y=v.value.values;"ungrouped"===t.type&&(y=[y]);try{for(var g=(l=void 0,Pc(y)),m=g.next();!m.done;m=g.next()){var b=m.value;b[o]=i(b[o],p,h)}}catch(t){l={error:t}}finally{try{m&&!m.done&&(u=g.return)&&u.call(g)}finally{if(l)throw l.error}}}}catch(t){a={error:t}}finally{try{v&&!v.done&&(s=f.return)&&s.call(f)}finally{if(a)throw a.error}}}}}function kc(t,e,r,n,o){return{scopes:[t.id],type:"property-value-processor",property:e,adjust:Oc({normaliseTo:r,rangeMin:n,rangeMax:o},Rc)}}function Fc(t){return function(){return function(){return function(e,r){var n,o,i=0;try{for(var a=Pc(r),s=a.next();!s.done;s=a.next()){var l=s.value,u=e[l];"number"!=typeof u||isNaN(u)||("normal"===t&&(i+=u),e[l]=i,"trailing"===t&&(i+=u))}}catch(t){n={error:t}}finally{try{s&&!s.done&&(o=a.return)&&o.call(a)}finally{if(n)throw n.error}}}}}}function Ic(t){var e=t.mode,r=t.sum;return function(){var t=[],n=!0;return function(){return function(o,i){var a,s,l=0;try{for(var u=Pc(i),c=u.next();!c.done;c=u.next()){var p=c.value,d=o[p],h=n&&"current"===r?0:t[p];t[p]=d;var f="current"===r?d:h;"number"!=typeof d||isNaN(d)?o[p]=f:"number"!=typeof h||isNaN(h)?o[p]=f:("normal"===e&&(l+=f),o[p]=l,"trailing"===e&&(l+=f))}}catch(t){a={error:t}}finally{try{c&&!c.done&&(s=u.return)&&s.call(u)}finally{if(a)throw a.error}}n=!1}}}}function Lc(t,e,r,n){var o;r.startsWith("window")?o=Oc({mode:r.endsWith("-trailing")?"trailing":"normal",sum:n},Ic):o=Oc(r,Fc);return{scopes:[t.id],type:"group-value-processor",matchGroupIds:[e],adjust:o}}function Nc(t,e){return void 0===e&&(e=!0),{type:"processor",property:"diff",calculate:function(r){for(var n={changed:!1,added:[],updated:[],removed:[]},o=new Map,i=new Map,a=new Map,s=0;s<Math.max(t.data.length,r.data.length);s++){var l=t.data[s],u=r.data[s],c=null==l?void 0:l.keys.join("___"),p=null==u?void 0:u.keys.join("___");c!==p?(a.has(p)?(!e&&Gc(a.get(p).values,u.values)||i.set(p,u),a.delete(p)):u&&o.set(p,u),o.has(c)?(!e&&Gc(o.get(c).values,l.values)||i.set(c,l),o.delete(c)):l&&a.set(c,l)):Gc(l.values,u.values)||i.set(p,u)}return n.added=Array.from(o.values()).map((function(t){return t.keys})),n.updated=Array.from(i.values()).map((function(t){return t.keys})),n.removed=Array.from(a.values()).map((function(t){return t.keys})),n.changed=n.added.length>0||n.updated.length>0||n.removed.length>0,n}}}function Gc(t,e){if(null==t||null==e)return!1;if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++){if(Array.isArray(t[r])&&Array.isArray(e[r]))return Gc(t[r],e[r]);if(t[r]!==e[r])return!1}return!0}function jc(t,e){return ru((function(r,n,o){return r[t][null!=e?e:n]=o,o}))}function Vc(t){var e=t.newValue,r=t.oldValue,n=t.changeValue;return ru((function(t,o,i,a){return i!==a&&(void 0!==a&&(null==r||r.call(t,a)),void 0!==i&&(null==e||e.call(t,i)),null==n||n.call(t,i,a)),i}))}var Bc,Uc=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Hc=function(){return(Hc=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},zc=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},Wc=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(t,n[o])&&(r[n[o]]=t[n[o]])}return r},Kc=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Xc=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},Yc=function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t};function qc(t){return null!=Zl(t,!0)}function Zc(t){return null!=Zl(t,!1)}function Jc(t,e,r,n){return void 0===n&&(n={}),Hc({scopes:[t.id],property:e,type:"key",valueType:r?"range":"category",validation:r?qc:Zc},n)}function $c(t,e,r,n){return void 0===n&&(n={}),Hc({scopes:[t.id],property:e,type:"value",valueType:r?"range":"category",validation:r?qc:Zc},n)}function Qc(t,e,r,n,o,i){return void 0===o&&(o="current"),[$c(t,e,r,i),Lc(t,i.groupId,n,o)]}!function(t){t[t.EXACT_SHAPE_MATCH=0]="EXACT_SHAPE_MATCH",t[t.NEAREST_BY_MAIN_AXIS_FIRST=1]="NEAREST_BY_MAIN_AXIS_FIRST",t[t.NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST=2]="NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST",t[t.NEAREST_NODE=3]="NEAREST_NODE"}(Bc||(Bc={}));var tp=function(t,e,r){this.type="nodeClick",this.event=t,this.datum=e.datum,this.seriesId=r.id},ep=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Uc(e,t),e}(tp),rp=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="nodeDoubleClick",e}return Uc(e,t),e}(tp),np=function(){function t(){this.fill="yellow",this.fillOpacity=void 0,this.stroke=void 0,this.strokeWidth=void 0}return zc([nu(Ou)],t.prototype,"fill",void 0),zc([nu(Du(0,1))],t.prototype,"fillOpacity",void 0),zc([nu(Ou)],t.prototype,"stroke",void 0),zc([nu(Du(0))],t.prototype,"strokeWidth",void 0),t}(),op=function(){function t(){this.strokeWidth=void 0,this.dimOpacity=void 0,this.enabled=void 0}return zc([nu(Du(0))],t.prototype,"strokeWidth",void 0),zc([nu(Du(0,1))],t.prototype,"dimOpacity",void 0),zc([nu(vu)],t.prototype,"enabled",void 0),t}(),ip=function(){function t(){this.color="black"}return zc([nu(Ou)],t.prototype,"color",void 0),t}(),ap=function(){this.item=new np,this.series=new op,this.text=new ip},sp=function(){function t(){this.enabled=!0,this.showArrow=void 0,this.interaction=new lp,this.position=new gc}return zc([nu(fu)],t.prototype,"enabled",void 0),zc([nu(vu)],t.prototype,"showArrow",void 0),t}(),lp=function(){function t(){this.enabled=!1}return zc([nu(fu)],t.prototype,"enabled",void 0),t}(),up=function(t){function e(e){var r,n=t.call(this)||this;n.id=Us(n),n.rootGroup=new fl({name:"seriesRoot",isVirtual:!0}),n.axes=((r={})[Xu.X]=void 0,r[Xu.Y]=void 0,r),n.directions=[Xu.X,Xu.Y],n.nodeDataRefresh=!0,n._data=void 0,n._visible=!0,n.showInLegend=!0,n.cursor="default",n.nodeClickRange="exact",n.seriesGrouping=void 0,n._declarationOrder=-1,n.highlightStyle=new ap,n.ctx=e.moduleCtx;var o=e.useLabelLayer,i=void 0!==o&&o,a=e.pickModes,s=void 0===a?[Bc.NEAREST_BY_MAIN_AXIS_FIRST]:a,l=e.directionKeys,u=void 0===l?{}:l,c=e.directionNames,p=void 0===c?{}:c,d=e.contentGroupVirtual,h=void 0===d||d,f=n.rootGroup;return n.directionKeys=u,n.directionNames=p,n.contentGroup=f.appendChild(new fl({name:n.id+"-content",layer:!h,isVirtual:h,zIndex:Ku.SERIES_LAYER_ZINDEX,zIndexSubOrder:n.getGroupZIndexSubOrder("data")})),n.highlightGroup=f.appendChild(new fl({name:n.id+"-highlight",layer:!0,zIndex:Ku.SERIES_LAYER_ZINDEX,zIndexSubOrder:n.getGroupZIndexSubOrder("highlight")})),n.highlightNode=n.highlightGroup.appendChild(new fl({name:"highlightNode"})),n.highlightLabel=n.highlightGroup.appendChild(new fl({name:"highlightLabel"})),n.highlightNode.zIndex=0,n.highlightLabel.zIndex=10,n.pickModes=s,i&&(n.labelGroup=f.appendChild(new fl({name:n.id+"-series-labels",layer:!0,zIndex:Ku.SERIES_LABEL_ZINDEX}))),n}return Uc(e,t),Object.defineProperty(e.prototype,"type",{get:function(){var t;return null!==(t=this.constructor.type)&&void 0!==t?t:""},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return this._data},set:function(t){this._data=t,this.nodeDataRefresh=!0},enumerable:!1,configurable:!0}),e.prototype.hasData=function(){var t=this.data;return t&&(!Array.isArray(t)||t.length>0)},Object.defineProperty(e.prototype,"visible",{get:function(){return this._visible},set:function(t){this._visible=t,this.visibleChanged()},enumerable:!1,configurable:!0}),e.prototype.onSeriesGroupingChange=function(t,e){var r=this,n=this.id,o=this.type,i=this.visible,a=this.rootGroup;t&&this.ctx.seriesStateManager.deregisterSeries({id:n,type:o}),e&&this.ctx.seriesStateManager.registerSeries({id:n,type:o,visible:i,seriesGrouping:e}),this.ctx.seriesLayerManager.changeGroup({id:n,type:o,rootGroup:a,getGroupZIndexSubOrder:function(t){return r.getGroupZIndexSubOrder(t)},seriesGrouping:e,oldGrouping:t})},e.prototype.getBandScalePadding=function(){return{inner:1,outer:0}},e.prototype.getGroupZIndexSubOrder=function(t,e){var r=this;void 0===e&&(e=0);var n=0;switch(t){case"data":case"paths":break;case"labels":n+=2e4;break;case"marker":n+=1e4;break;case"highlight":e+=15e3}return[function(){return r._declarationOrder+n},e]},e.prototype.addChartEventListeners=function(){},e.prototype.destroy=function(){this.ctx.seriesStateManager.deregisterSeries(this),this.ctx.seriesLayerManager.releaseGroup(this)},e.prototype.getDirectionValues=function(t,e){var r=this,n=this.resolveKeyDirection(t),o=null==e?void 0:e[n],i=[],a=function(){for(var t,e,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];try{for(var o=Kc(r),i=o.next();!i.done;i=o.next()){var a=i.value;s(a)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}},s=function(t){Array.isArray(t)?a.apply(void 0,Yc([],Xc(t))):"object"==typeof t?a(Object.values(t)):i.push(t)};return o?(o.forEach((function(t){var e=r[t];s(e)})),i):i},e.prototype.getKeys=function(t){return this.getDirectionValues(t,this.directionKeys)},e.prototype.getNames=function(t){return this.getDirectionValues(t,this.directionNames)},e.prototype.resolveKeyDirection=function(t){return t},e.prototype.markNodeDataDirty=function(){this.nodeDataRefresh=!0},e.prototype.visibleChanged=function(){this.ctx.seriesStateManager.registerSeries(this)},e.prototype.getOpacity=function(t){var e=this.highlightStyle.series,r=e.dimOpacity,n=void 0===r?1:r,o=e.enabled;if(!1===(void 0===o||o)||1===n)return 1;switch(this.isItemIdHighlighted(t)){case"no-highlight":case"highlighted":return 1;case"peer-highlighted":case"other-highlighted":return n}},e.prototype.getStrokeWidth=function(t,e){var r=this.highlightStyle.series,n=r.strokeWidth,o=r.enabled;if(!1===(void 0===o||o)||void 0===n)return t;switch(this.isItemIdHighlighted(e)){case"highlighted":return n;case"no-highlight":case"other-highlighted":case"peer-highlighted":return t}},e.prototype.isItemIdHighlighted=function(t){var e,r=null===(e=this.ctx.highlightManager)||void 0===e?void 0:e.getActiveHighlight(),n=null!=r?r:{},o=n.series,i=n.itemId;return null!=o?o!==this?"other-highlighted":void 0===i?"highlighted":t&&r!==t&&i!==t.itemId?"peer-highlighted":"highlighted":"no-highlight"},e.prototype.pickNode=function(t,e){var r,n,o=this.pickModes,i=this.visible,a=this.rootGroup;if(i&&a.visible)try{for(var s=Kc(o),l=s.next();!l.done;l=s.next()){var u=l.value;if(!e||e.includes(u)){var c=void 0;switch(u){case Bc.EXACT_SHAPE_MATCH:c=this.pickNodeExactShape(t);break;case Bc.NEAREST_BY_MAIN_AXIS_FIRST:case Bc.NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST:c=this.pickNodeMainAxisFirst(t,u===Bc.NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST);break;case Bc.NEAREST_NODE:c=this.pickNodeClosestDatum(t)}if(c)return{pickMode:u,match:c.datum,distance:c.distance}}}}catch(t){r={error:t}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}},e.prototype.pickNodeExactShape=function(t){var e=this.contentGroup.pickNode(t.x,t.y);if(e)return{datum:e.datum,distance:0}},e.prototype.pickNodeClosestDatum=function(t){throw new Error("AG Charts - Series.pickNodeClosestDatum() not implemented")},e.prototype.pickNodeMainAxisFirst=function(t,e){throw new Error("AG Charts - Series.pickNodeMainAxisFirst() not implemented")},e.prototype.fireNodeClickEvent=function(t,e){var r=this.getNodeClickEvent(t,e);this.fireEvent(r)},e.prototype.fireNodeDoubleClickEvent=function(t,e){var r=this.getNodeDoubleClickEvent(t,e);this.fireEvent(r)},e.prototype.getNodeClickEvent=function(t,e){return new ep(t,e,this)},e.prototype.getNodeDoubleClickEvent=function(t,e){return new rp(t,e,this)},e.prototype.toggleSeriesItem=function(t,e){this.visible=e,this.nodeDataRefresh=!0},e.prototype.isEnabled=function(){return this.visible},e.prototype.fixNumericExtent=function(t,e){var r,n=lc(t);if(0===n.length)return n;var o=Xc(n,2),i=o[0],a=o[1];if(i===a){var s=Xc(null!==(r=null==e?void 0:e.calculatePadding(i,a))&&void 0!==r?r:[1,1],2);i-=s[0],a+=s[1]}return[i,a]},e.highlightedZIndex=1e12,zc([nu(yu)],e.prototype,"id",void 0),zc([nu(fu)],e.prototype,"_visible",void 0),zc([nu(fu)],e.prototype,"showInLegend",void 0),zc([nu(yu)],e.prototype,"cursor",void 0),zc([nu(Ju)],e.prototype,"nodeClickRange",void 0),zc([Vc({changeValue:function(t,e){this.onSeriesGroupingChange(e,t)}})],e.prototype,"seriesGrouping",void 0),e}(Wl),cp=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},pp=function(){function t(t,e,r,n){void 0===t&&(t=0),void 0===e&&(e=t),void 0===r&&(r=t),void 0===n&&(n=e),this.top=t,this.right=e,this.bottom=r,this.left=n}return t.prototype.clear=function(){this.top=this.right=this.bottom=this.left=0},cp([nu(Pu(0))],t.prototype,"top",void 0),cp([nu(Pu(0))],t.prototype,"right",void 0),cp([nu(Pu(0))],t.prototype,"bottom",void 0),cp([nu(Pu(0))],t.prototype,"left",void 0),t}(),dp=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},hp=function(){function t(){}return t.init=function(){var t=this,e=window.ResizeObserver;if(e)this.resizeObserver=new e((function(e){var r,n;try{for(var o=dp(e),i=o.next();!i.done;i=o.next()){var a=i.value,s=a.contentRect,l=s.width,u=s.height;t.checkSize(t.elements.get(a.target),a.target,l,u)}}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}}));else{this.pollerHandler=window.setInterval((function(){t.elements.forEach((function(e,r){t.checkClientSize(r,e)}))}),100)}this.ready=!0},t.destroy=function(){var t;null!=this.pollerHandler&&(clearInterval(this.pollerHandler),this.pollerHandler=void 0),null===(t=this.resizeObserver)||void 0===t||t.disconnect(),this.resizeObserver=void 0,this.ready=!1},t.checkSize=function(t,e,r,n){t&&(t.size&&r===t.size.width&&n===t.size.height||(t.size={width:r,height:n},t.cb(t.size,e)))},t.observe=function(t,e){this.ready||this.init(),this.unobserve(t,!1),this.resizeObserver&&this.resizeObserver.observe(t),this.elements.set(t,{cb:e}),this.checkClientSize(t,{cb:e})},t.unobserve=function(t,e){void 0===e&&(e=!0),this.resizeObserver&&this.resizeObserver.unobserve(t),this.elements.delete(t),e&&0===this.elements.size&&this.destroy()},t.checkClientSize=function(t,e){var r=t.clientWidth?t.clientWidth:0,n=t.clientHeight?t.clientHeight:0;this.checkSize(e,t,r,n)},t.elements=new Map,t.ready=!1,t}();function fp(t,e,r,n,o){var i=t.x;t.x<e?i=e:t.x>e+n&&(i=e+n);var a=t.y;t.y<r?a=r:t.y>r+o&&(a=r+o);var s=t.x-i,l=t.y-a;return Math.sqrt(s*s+l*l)<=.5*t.size}function vp(t,e,r,n,o){var i=t.x+t.width>e&&t.x<e+n,a=t.y+t.height>r&&t.y<r+o;return i&&a}var yp=function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{l(n.next(t))}catch(t){i(t)}}function s(t){try{l(n.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}l((n=n.apply(t,e||[])).next())}))},gp=function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};function mp(t,e){var r,n,o=0,i=!1,a=function(){return i},s=function(){i=!1,null==n||n(),n=void 0,r=void 0,o>0&&t(l)},l=function(){var t=o;o=0,i=!0;var r=e({count:t});r?r.then(s).catch(s):s()};return{schedule:function(e){0!==o||a()||t(l,e),o++},await:function(){return yp(this,void 0,void 0,(function(){return gp(this,(function(t){switch(t.label){case 0:if(!a())return[2];null==r&&(r=new Promise((function(t){n=t}))),t.label=1;case 1:return a()?[4,r]:[3,3];case 2:return t.sent(),[3,1];case 3:return[2]}}))}))}}}function bp(t){return new Promise((function(e){setTimeout((function(){return e(void 0)}),t)}))}var Cp=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},Sp=function(){function t(t,e){this.renderer=void 0,this.text=void 0,this.className=t,this.parentElement=e}return t.prototype.show=function(t){var e,r,n=this.element;if(n||((n=document.createElement("div")).className=this.className,this.element=n),n.style.position="absolute",n.style.left=t.x+"px",n.style.top=t.y+"px",n.style.width=t.width+"px",n.style.height=t.height+"px",this.renderer)n.innerHTML=this.renderer();else{var o=document.createElement("div");o.style.alignItems="center",o.style.boxSizing="border-box",o.style.display="flex",o.style.justifyContent="center",o.style.margin="8px",o.style.height="100%",o.style.font="12px Verdana, sans-serif",o.innerText=null!==(e=this.text)&&void 0!==e?e:"No data to display",n.append(o)}null===(r=this.parentElement)||void 0===r||r.append(n)},t.prototype.hide=function(){var t;null===(t=this.element)||void 0===t||t.remove(),this.element=void 0},Cp([nu(hu)],t.prototype,"renderer",void 0),Cp([nu(gu)],t.prototype,"text",void 0),t}(),wp=function(t){this.noData=new Sp("ag-chart-no-data-overlay",t)},xp=function(){return(xp=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},Op=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},Ep=function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t},Tp=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function Pp(t,e){var r,n,o=Fp(t),i=Fp(e);if("array"===i){var a=e;return"array"!==o||t.length!==a.length||a.some((function(e,r){var n;return null!=Pp(null===(n=t)||void 0===n?void 0:n[r],e)}))?Ep([],Op(a)):null}if("primitive"===i)return"primitive"!==o?xp({},e):t!==e?e:null;var s=t||{},l=e||{},u=new Set(Ep(Ep([],Op(Object.keys(s))),Op(Object.keys(l)))),c=0,p={},d=function(t){if(s[t]===l[t])return"continue";var e=function(e){p[t]=e,c++},r=Fp(s[t]),n=Fp(l[t]);if(r!==n)return e(l[t]),"continue";if("primitive"===n||null===n)return e(l[t]),"continue";if("array"===n&&s[t].length!==l[t].length)return e(l[t]),"continue";if("class-instance"===n)return e(l[t]),"continue";if("function"===n&&s[t]!==l[t])return e(l[t]),"continue";var o=Pp(s[t],l[t]);null!==o&&e(o)};try{for(var h=Tp(u),f=h.next();!f.done;f=h.next()){d(f.value)}}catch(t){r={error:t}}finally{try{f&&!f.done&&(n=h.return)&&n.call(h)}finally{if(r)throw r.error}}return 0===c?null:p}var Dp=Symbol("<delete-property>"),Ap=Symbol("<unspecified-property>");function Mp(t,e){var r,n,o,i=null!==(o=null==e?void 0:e.avoidDeepClone)&&void 0!==o?o:[];if(t.map((function(t){return Fp(t)})).some((function(t){return"array"===t}))){var a=t[t.length-1];return a instanceof Array?a.map((function(t){var r=Fp(t);return"array"===r?Mp([[],t],e):"object"===r?Mp([{},t],e):t})):a}var s={},l=new Set(t.map((function(t){return null!=t?Object.keys(t):[]})).reduce((function(t,e){return t.concat(e)}),[])),u=function(r){var n=t.map((function(t){return null!=t&&"object"==typeof t&&r in t?t[r]:Ap})).filter((function(t){return t!==Ap}));if(0===n.length)return"continue";var o=n[n.length-1];if(o===Dp)return"continue";var a=n.map((function(t){return Fp(t)})),l=a[0];if(a.some((function(t){return t!==l})))return s[r]=o,"continue";"array"!==l&&"object"!==l||i.includes(r)?s[r]="array"===l?Ep([],Op(o)):o:s[r]=Mp(n,e)};try{for(var c=Tp(l),p=c.next();!p.done;p=c.next()){u(p.value)}}catch(t){r={error:t}}finally{try{p&&!p.done&&(n=c.return)&&n.call(c)}finally{if(r)throw r.error}}return s}function _p(t,e,r){var n,o,i;void 0===r&&(r={});var a=r.path,s=void 0===a?void 0:a,l=r.matcherPath,u=void 0===l?s?s.replace(/(\[[0-9+]+\])/i,"[]"):void 0:l,c=r.skip,p=void 0===c?[]:c,d=r.constructors,h=void 0===d?{}:d,f=r.constructedArrays,v=void 0===f?new WeakMap:f,y=r.allowedTypes,g=void 0===y?{}:y,m=r.idx;if(null==t)throw new Error("AG Charts - target is uninitialised: "+(null!=s?s:"<root>"));if(null==e)return t;var b=t;null!=m&&"_declarationOrder"in b&&(b._declarationOrder=m);var C=Fp(t),S=function(a){var l=(u?u+".":"")+a;if(p.indexOf(l)>=0)return"continue";var c=e[a],d=(s?s+".":"")+a,f=b.constructor,y=b[a],m=null!==(n=h[l])&&void 0!==n?n:h[a];try{var S=Fp(y),w=Fp(c);if("class-instance"===C&&!(a in t)&&!Object.prototype.hasOwnProperty.call(b,a))return sl.warn("unable to set ["+d+"] in "+(null==f?void 0:f.name)+" - property is unknown"),"continue";var x=null!==(o=g[l])&&void 0!==o?o:[S];if("class-instance"===S&&"object"===w);else if(null!=S&&null!=w&&!x.includes(w))return sl.warn("unable to set ["+d+"] in "+(null==f?void 0:f.name)+" - can't apply type of ["+w+"], allowed types are: ["+x+"]"),"continue";if("array"===w)if(null!=(m=null!==(i=null!=m?m:v.get(y))&&void 0!==i?i:h[l+"[]"])){var O=c;b[a]=O.map((function(t,e){return _p(new m,t,xp(xp({},r),{path:d,matcherPath:l+"[]",idx:e}))}))}else b[a]=c;else"class-instance"===w?b[a]=c:"object"===w?null!=y?_p(y,c,xp(xp({},r),{path:d,matcherPath:l,idx:void 0})):b[a]=null!=m?_p(new m,c,xp(xp({},r),{path:d,matcherPath:l,idx:void 0})):c:b[a]=c}catch(t){return sl.warn("unable to set ["+d+"] in ["+(null==f?void 0:f.name)+"]; nested error is: "+t.message),"continue"}};for(var w in e)S(w);return t}function Rp(t,e,r){for(var n,o=[],i=3;i<arguments.length;i++)o[i-3]=arguments[i];var a=Fp(t),s=null!==(n=r.skip)&&void 0!==n?n:[];if("array"!==a){if("object"===a){e.apply(void 0,Ep([a,t],Op(o)));var l=function(n){if(s.indexOf(n)>=0)return"continue";var i=t[n],a=null==o?void 0:o.map((function(t){return null==t?void 0:t[n]})),l=Fp(i);"object"!==l&&"array"!==l||Rp.apply(void 0,Ep([i,e,r],Op(a)))};for(var u in t)l(u)}}else t.forEach((function(t,n){Rp.apply(void 0,Ep([t,e,r],Op((null!=o?o:[]).map((function(t){return null==t?void 0:t[n]})))))}))}var kp="undefined"!=typeof window;function Fp(t){return null==t?null:kp&&t instanceof HTMLElement?"primitive":t instanceof Array?"array":t instanceof Date?"primitive":"object"==typeof t&&t.constructor===Object?"object":"function"==typeof t?"function":"object"==typeof t&&null!=t.constructor?"class-instance":"primitive"}var Ip=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Lp=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},Np=function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t},Gp=function(){function t(){this.registeredListeners={}}return t.prototype.addListener=function(t,e){var r,n=Symbol(t);return this.registeredListeners[t]||(this.registeredListeners[t]=[]),null===(r=this.registeredListeners[t])||void 0===r||r.push({symbol:n,handler:e}),n},t.prototype.dispatch=function(t){for(var e,r,n,o=[],i=1;i<arguments.length;i++)o[i-1]=arguments[i];var a=null!==(n=this.registeredListeners[t])&&void 0!==n?n:[],s=[];try{for(var l=Ip(a),u=l.next();!u.done;u=l.next()){var c=u.value;try{s.push(c.handler.apply(c,Np([],Lp(o))))}catch(t){sl.errorOnce(t),s.push(void 0)}}}catch(t){e={error:t}}finally{try{u&&!u.done&&(r=l.return)&&r.call(l)}finally{if(e)throw e.error}}return s},t.prototype.cancellableDispatch=function(t,e){for(var r,n,o,i=[],a=2;a<arguments.length;a++)i[a-2]=arguments[a];var s=null!==(o=this.registeredListeners[t])&&void 0!==o?o:[],l=[];try{for(var u=Ip(s),c=u.next();!c.done;c=u.next()){var p=c.value;if(e())break;l.push(p.handler.apply(p,Np([],Lp(i))))}}catch(t){r={error:t}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}return l},t.prototype.reduceDispatch=function(t,e){for(var r,n,o,i=[],a=2;a<arguments.length;a++)i[a-2]=arguments[a];var s=null!==(o=this.registeredListeners[t])&&void 0!==o?o:[],l=void 0;try{for(var u=Ip(s),c=u.next();!c.done;c=u.next()){var p=c.value;l=p.handler.apply(p,Np([],Lp(i))),i=e.apply(void 0,Np([l],Lp(i)))}}catch(t){r={error:t}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}return l},t.prototype.removeListener=function(t){for(var e in this.registeredListeners){var r=this.registeredListeners[e],n=null==r?void 0:r.findIndex((function(e){return e.symbol===t}));null!=n&&n>=0&&(null==r||r.splice(n,1)),null!=n&&0===(null==r?void 0:r.length)&&delete this.registeredListeners[e]}},t}(),jp=function(){function t(){this.listeners=new Gp}return t.prototype.addListener=function(t,e){return this.listeners.addListener(t,e)},t.prototype.removeListener=function(t){this.listeners.removeListener(t)},t}();function Vp(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}function Bp(t,e){if("string"==typeof t)try{t=Ql.fromString(t)}catch(e){t=Ql.fromArray([0,0,0])}if("string"==typeof e)try{e=Ql.fromString(e)}catch(t){e=Ql.fromArray([0,0,0])}var r=Vp(t.r,e.r),n=Vp(t.g,e.g),o=Vp(t.b,e.b),i=Vp(t.a,e.a);return function(t){return Ql.fromArray([r(t),n(t),o(t),i(t)]).toRgbaString()}}function Up(t,e){var r=typeof e;if("number"===r)return Vp(t,e);if("string"===r)try{return Bp(t,e=Ql.fromString(e))}catch(t){}throw new Error("Unable to interpolate values")}function Hp(t){return Up(t.from,t.to)}var zp,Wp,Kp=(zp=function(t){return Math.sin(t*Math.PI/2)},function(t){var e=Up(t.from,t.to);return function(t){return e(zp(t))}}),Xp=function(){return(Xp=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function Yp(t){var e,r=t.driver,n=t.duration,o=t.from,i=t.to,a=t.autoplay,s=void 0===a||a,l=t.delay,u=void 0===l?0:l,c=t.ease,p=void 0===c?Hp:c,d=t.repeat,h=void 0===d?0:d,f=t.repeatType,v=void 0===f?Wp.Loop:f,y=t.onComplete,g=t.onPlay,m=t.onRepeat,b=t.onStop,C=t.onUpdate,S=0,w=0,x=0,O=!0,E=!1,T=p({from:o,to:i}),P={isPlaying:!1,play:A,pause:function(){return P.isPlaying=!1,P},stop:M,reset:function(){return E=!1,w=0,x=0,D.reset(),P}},D=r((function(t){O||(t=-t);if(!(S>=u))return void(S+=t);w+=t;E||(e=T(Math.min(1,Math.max(0,w/n))),E=O?w>=n:w<=0);null==C||C(e),E&&(x<h?function(){x++,v===Wp.Reverse?w=(O=x%2==0)?w%n:n-w%n:w%=n;E=!1,null==m||m()}():(M(),null==y||y()))}));function A(){return P.isPlaying=!0,D.start(),null==g||g(),P}function M(){return P.isPlaying=!1,D.stop(),null==b||b(),P}return s&&A(),P}!function(t){t.Loop="loop",t.Reverse="reverse"}(Wp||(Wp={}));var qp=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Zp=function(){return(Zp=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},Jp=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(t,n[o])&&(r[n[o]]=t[n[o]])}return r},$p=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Qp=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},td=function(t){function e(e){var r=t.call(this)||this;return r.controllers={},r.throttles={},r.throttleGroups=new Set,r.updaters=[],r.isPlaying=!1,r.readyToPlay=!1,r.defaultOptions={},r.skipAnimations=!1,r.debug=!1,r.interactionManager=e,window.addEventListener("DOMContentLoaded",(function(){r.readyToPlay=!0})),setTimeout((function(){r.readyToPlay=!0}),10),r}return qp(e,t),e.prototype.play=function(){if(!this.isPlaying){for(var t in this.isPlaying=!0,this.debug&&sl.debug("AnimationManager.play()"),this.controllers)this.controllers[t].play();this.startAnimationCycle()}},e.prototype.pause=function(){if(this.isPlaying)for(var t in this.isPlaying=!1,this.cancelAnimationFrame(),this.debug&&sl.debug("AnimationManager.pause()"),this.controllers)this.controllers[t].pause()},e.prototype.stop=function(){for(var t in this.isPlaying=!1,this.cancelAnimationFrame(),this.debug&&sl.debug("AnimationManager.stop()"),this.controllers)this.controllers[t].stop()},e.prototype.reset=function(){this.isPlaying?(this.stop(),this.play()):this.stop()},e.prototype.animate=function(t,e){var r,n,o=e.disableInteractions,i=void 0===o||o,a=Jp(e,["disableInteractions"]);if(!this.skipAnimations){var s=Zp(Zp({},a),{autoplay:!!this.isPlaying&&a.autoplay,driver:this.createDriver(t,i)});this.controllers[t]&&this.controllers[t].stop();var l=Yp(s);return this.controllers[t]=l,null===(n=a.onUpdate)||void 0===n||n.call(a,a.from),l}null===(r=a.onUpdate)||void 0===r||r.call(a,a.to)},e.prototype.animateMany=function(t,e,r){var n,o,i;if(this.skipAnimations){var a=e.map((function(t){return t.to}));return r.onUpdate(a),void(null===(i=r.onComplete)||void 0===i||i.call(r))}var s=e.map((function(t){return t.from})),l=0,u=0,c=0,p=0,d=function(t){return function(n){var o;s[t]=n,++c>=e.length&&(null===(o=r.onUpdate)||void 0===o||o.call(r,s),c=0)}},h=function(){var t;++l>=e.length&&(null===(t=r.onPlay)||void 0===t||t.call(r))},f=function(){var t;++u>=e.length&&(null===(t=r.onStop)||void 0===t||t.call(r))},v=function(){var t;++p>=e.length&&(null===(t=r.onComplete)||void 0===t||t.call(r))},y=0;try{for(var g=$p(e),m=g.next();!m.done;m=g.next()){var b=m.value,C=t+"-"+y;this.animate(C,Zp(Zp(Zp({},r),b),{onUpdate:d(y),onPlay:h,onStop:f,onComplete:v})),y++}}catch(t){n={error:t}}finally{try{m&&!m.done&&(o=g.return)&&o.call(g)}finally{if(n)throw n.error}}},e.prototype.animateWithThrottle=function(t,e){var r,n=null!==(r=e.throttleId)&&void 0!==r?r:t;this.throttles[n]&&e.duration&&Date.now()-this.throttles[n]<e.duration&&(e.delay=0,e.duration=1),this.throttles[t]=Date.now(),this.animate(t,Zp({},e))},e.prototype.animateManyWithThrottle=function(t,e,r){var n,o=this,i=r.throttleGroup,a=null!==(n=r.throttleId)&&void 0!==n?n:t,s=Date.now(),l=this.throttles[a]&&r.duration&&s-this.throttles[a]<r.duration,u=i&&this.throttleGroups.has(i);l&&!u&&(r.delay=0,r.duration=1),!l&&i&&this.throttleGroups.add(i);return this.throttles[a]=s,this.animateMany(t,e,Zp(Zp({},r),{onStop:function(){var t;i&&o.throttleGroups.delete(i),null===(t=r.onStop)||void 0===t||t.call(r)}}))},e.prototype.tween=function(t){var e="tween-"+btoa(JSON.stringify(t));return function(t){var e,r=Yp(Xp(Xp({},t),{autoplay:!1,onUpdate:function(t){null==e||e(t)}})),n={start:function(t){return r.stop(),r.reset(),r.play(),e=t,n},stop:function(){return r.stop(),n}};return n}(Zp(Zp({},t),{driver:this.createDriver(e)}))},e.prototype.createDriver=function(t,e){var r=this;return function(n){return{start:function(){r.updaters.push([t,n]),null==r.requestId&&r.startAnimationCycle(),e&&r.interactionManager.pause("animation_"+t)},stop:function(){delete r.controllers[t],r.updaters=r.updaters.filter((function(e){return Qp(e,1)[0]!==t})),r.updaters.length<=0&&r.cancelAnimationFrame(),e&&r.interactionManager.resume("animation_"+t)},reset:function(){}}}},e.prototype.startAnimationCycle=function(){var t=this;if(0!==this.updaters.length){var e=function(r){if(t.requestId=requestAnimationFrame(e),t.readyToPlay){void 0===t.lastTime&&(t.lastTime=r);var n=r-t.lastTime;t.lastTime=r,t.debug&&sl.debug("AnimationManager - frame()",{updaterCount:t.updaters.length}),t.updaters.forEach((function(t){var e=Qp(t,2);return e[0],(0,e[1])(n)})),t.listeners.dispatch("animation-frame",{type:"animation-frame",deltaMs:n})}};this.requestId=requestAnimationFrame(e)}},e.prototype.cancelAnimationFrame=function(){this.requestId&&(cancelAnimationFrame(this.requestId),this.requestId=void 0,this.lastTime=void 0)},e}(jp),ed=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},rd=function(){function t(t){this.states={},this.element=t}return t.prototype.updateCursor=function(t,e){delete this.states[t],null!=e&&(this.states[t]={style:e}),this.applyStates()},t.prototype.applyStates=function(){var t="default";Object.entries(this.states).reverse().slice(0,1).forEach((function(e){var r=ed(e,2);r[0];var n=r[1].style;return t=n})),this.element.style.cursor=t},t}(),nd=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),od=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return nd(e,t),e.prototype.legendItemClick=function(t,e,r,n){var o={type:"legend-item-click",series:t,itemId:e,enabled:r,legendItemName:n};this.listeners.dispatch("legend-item-click",o)},e.prototype.legendItemDoubleClick=function(t,e,r,n,o){var i={type:"legend-item-double-click",series:t,itemId:e,enabled:r,legendItemName:o,numVisibleItems:n};this.listeners.dispatch("legend-item-double-click",i)},e.prototype.axisHover=function(t,e){var r={type:"axis-hover",axisId:t,direction:e};this.listeners.dispatch("axis-hover",r)},e}(jp),id=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ad=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a};var sd=function(t){function e(){var e=t.call(this)||this;return e.states={},e.activeHighlight=void 0,e}return id(e,t),e.prototype.updateHighlight=function(t,e){delete this.states[t],null!=e&&(this.states[t]={highlightedDatum:e}),this.applyStates()},e.prototype.getActiveHighlight=function(){return this.activeHighlight},e.prototype.applyStates=function(){var t,e,r=this.activeHighlight,n=void 0;if(Object.entries(this.states).reverse().slice(0,1).forEach((function(t){var e=ad(t,2);e[0];var r=e[1].highlightedDatum;return n=r})),this.activeHighlight=n,t=r,e=this.activeHighlight,!(t===e||(null==t?void 0:t.series)===(null==e?void 0:e.series)&&(null==t?void 0:t.itemId)===(null==e?void 0:e.itemId)&&(null==t?void 0:t.datum)===(null==e?void 0:e.datum))){var o={type:"highlight-change",previousHighlight:r,currentHighlight:this.activeHighlight};this.listeners.dispatch("highlight-change",o)}},e}(jp),ld=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ud=function(){return(ud=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},cd=function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{l(n.next(t))}catch(t){i(t)}}function s(t){try{l(n.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}l((n=n.apply(t,e||[])).next())}))},pd=function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},dd=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},hd=["pagehide","mousemove","mouseup","wheel"],fd=["click","dblclick","contextmenu","mousedown","mouseout","mouseenter","touchstart","touchmove","touchend","touchcancel"],vd=function(t){function e(r,n){var o,i,a,s;void 0===n&&(n=document);var l=t.call(this)||this;l.eventHandler=function(t){return l.processEvent(t)},l.mouseDown=!1,l.touchDown=!1,l.enabled=!0,l.pausers=[],l.rootElement=n.body,l.element=r;try{for(var u=dd(fd),c=u.next();!c.done;c=u.next()){(h=c.value).startsWith("touch")?r.addEventListener(h,l.eventHandler,{passive:!0}):r.addEventListener(h,l.eventHandler)}}catch(t){o={error:t}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(o)throw o.error}}try{for(var p=dd(hd),d=p.next();!d.done;d=p.next()){var h;"wheel"===(h=d.value)?window.addEventListener(h,l.eventHandler,{passive:!1}):window.addEventListener(h,l.eventHandler)}}catch(t){a={error:t}}finally{try{d&&!d.done&&(s=p.return)&&s.call(p)}finally{if(a)throw a.error}}if(e.interactionDocuments.indexOf(n)<0){var f=document.createElement("style");f.innerHTML="\n.ag-chart-wrapper {\n    touch-action: none;\n}\n",document.head.insertBefore(f,document.head.querySelector("style")),e.interactionDocuments.push(n)}return l}return ld(e,t),e.prototype.destroy=function(){var t,e,r,n;try{for(var o=dd(hd),i=o.next();!i.done;i=o.next()){var a=i.value;window.removeEventListener(a,this.eventHandler)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}try{for(var s=dd(fd),l=s.next();!l.done;l=s.next()){a=l.value;this.element.removeEventListener(a,this.eventHandler)}}catch(t){r={error:t}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}},e.prototype.resume=function(t){return this.pausers=this.pausers.filter((function(e){return e!==t})),this.enabled=this.pausers.length<=0,this.enabled},e.prototype.pause=function(t){this.enabled=!1,this.pausers.push(t)},e.prototype.processEvent=function(t){var e=this.decideInteractionEventTypes(t);e.length>0&&this.enabled&&this.dispatchEvent(t,e).catch((function(t){return sl.errorOnce(t)}))},e.prototype.dispatchEvent=function(t,e){return cd(this,void 0,void 0,(function(){var r,n,o,i,a,s,l,u;return pd(this,(function(c){if(null==(r=this.calculateCoordinates(t)))return[2];n=function(e){var n=o.buildEvent(ud(ud({event:t},r),{type:e}));o.listeners.cancellableDispatch(e,(function(){return n.consumed}),n)},o=this;try{for(i=dd(e),a=i.next();!a.done;a=i.next())s=a.value,n(s)}catch(t){l={error:t}}finally{try{a&&!a.done&&(u=i.return)&&u.call(i)}finally{if(l)throw l.error}}return[2]}))}))},e.prototype.decideInteractionEventTypes=function(t){switch(t.type){case"click":return["click"];case"dblclick":return["dblclick"];case"contextmenu":return["contextmenu"];case"mousedown":return this.mouseDown=!0,this.dragStartElement=t.target,["drag-start"];case"touchstart":return this.touchDown=!0,this.dragStartElement=t.target,["drag-start"];case"touchmove":case"mousemove":return this.mouseDown||this.touchDown||this.isEventOverElement(t)?this.mouseDown||this.touchDown?["drag"]:["hover"]:[];case"mouseup":return this.mouseDown||this.isEventOverElement(t)?(this.mouseDown=!1,this.dragStartElement=void 0,["drag-end"]):[];case"touchend":return this.touchDown||this.isEventOverElement(t)?(this.touchDown=!1,this.dragStartElement=void 0,["drag-end"]):[];case"mouseout":case"touchcancel":return["leave"];case"mouseenter":var e=t instanceof MouseEvent&&1==(1&t.buttons);return this.mouseDown!==e?(this.mouseDown=e,[e?"drag-start":"drag-end"]):[];case"pagehide":return["page-left"];case"wheel":return["wheel"]}return[]},e.prototype.isEventOverElement=function(t){var e;return t.target===this.element||(null===(e=t.target)||void 0===e?void 0:e.parentElement)===this.element},e.prototype.calculateCoordinates=function(t){var r;if(t instanceof MouseEvent){var n=t.clientX,o=t.clientY,i=t.pageX,a=t.pageY,s=t.offsetX,l=t.offsetY;return this.fixOffsets(t,{clientX:n,clientY:o,pageX:i,pageY:a,offsetX:s,offsetY:l})}if("undefined"!=typeof TouchEvent&&t instanceof TouchEvent){var u=null!==(r=t.touches[0])&&void 0!==r?r:t.changedTouches[0];n=u.clientX,o=u.clientY,i=u.pageX,a=u.pageY;return ud(ud({},e.NULL_COORDS),{clientX:n,clientY:o,pageX:i,pageY:a})}if(t instanceof PageTransitionEvent){if(t.persisted)return;return e.NULL_COORDS}},e.prototype.fixOffsets=function(t,e){var r=function(t){for(var e=0,r=0;t;)e+=t.offsetLeft,r+=t.offsetTop,t=t.offsetParent;return{x:e,y:r}};if(null!=this.dragStartElement&&t.target!==this.dragStartElement){var n=r(this.dragStartElement),o=r(t.target);e.offsetX-=n.x-o.x,e.offsetY-=n.y-o.y}return e},e.prototype.buildEvent=function(t){var e=t.type,r=t.event,n=t.clientX,o=t.clientY,i=t.offsetX,a=t.offsetY,s=t.pageX,l=t.pageY;if(!Jl(i)||!Jl(a)){var u=this.element.getBoundingClientRect();i=n-u.left,a=o-u.top}if(!Jl(s)||!Jl(l)){var c=this.rootElement.getBoundingClientRect();s=n-c.left,l=o-c.top}var p={type:e,offsetX:i,offsetY:a,pageX:s,pageY:l,sourceEvent:r,consumed:!1,consume:function(){return p.consumed=!0}};return p},e.interactionDocuments=[],e.NULL_COORDS={clientX:-1/0,clientY:-1/0,pageX:-1/0,pageY:-1/0,offsetX:-1/0,offsetY:-1/0},e}(jp),yd=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},gd=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},md=function(){function t(t,e){var r=this;this.states={},this.exclusiveAreas={},this.destroyFns=[],this.tooltip=t;var n=e.addListener("hover",(function(t){return r.checkExclusiveRects(t)}));this.destroyFns.push((function(){return e.removeListener(n)}))}return t.prototype.updateTooltip=function(t,e,r){var n;null==r&&(r=null===(n=this.states[t])||void 0===n?void 0:n.content),this.states[t]={content:r,meta:e},this.applyStates()},t.prototype.updateExclusiveRect=function(t,e){e?this.exclusiveAreas[t]=e:delete this.exclusiveAreas[t]},t.prototype.removeTooltip=function(t){delete this.states[t],this.applyStates()},t.prototype.getTooltipMeta=function(t){var e;return null===(e=this.states[t])||void 0===e?void 0:e.meta},t.prototype.destroy=function(){var t,e;try{for(var r=yd(this.destroyFns),n=r.next();!n.done;n=r.next()){(0,n.value)()}}catch(e){t={error:e}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}},t.prototype.checkExclusiveRects=function(t){var e,r,n;try{for(var o=yd(Object.entries(this.exclusiveAreas)),i=o.next();!i.done;i=o.next()){var a=gd(i.value,2),s=a[0];if(a[1].containsPoint(t.offsetX,t.offsetY)){n=s;break}}}catch(t){e={error:t}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}n!==this.appliedExclusiveArea&&(this.appliedExclusiveArea=n,this.applyStates())},t.prototype.applyStates=function(){var t,e=this,r=this.appliedExclusiveArea?[this.appliedExclusiveArea]:Object.keys(this.states),n=void 0,o=void 0;if(r.reverse(),r.slice(0,1).forEach((function(t){var r,i=null!==(r=e.states[t])&&void 0!==r?r:{},a=i.content,s=i.meta;n=a,o=s})),void 0===o||void 0===n)return this.appliedState=void 0,void this.tooltip.toggle(!1);if((null===(t=this.appliedState)||void 0===t?void 0:t.content)===n){var i=this.tooltip.isVisible();this.tooltip.show(o,void 0,i)}else this.tooltip.show(o,n);this.appliedState={content:n,meta:o}},t}(),bd=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Cd=function(){return(Cd=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},Sd=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},wd=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},xd=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.axes={},e}return bd(e,t),e.prototype.updateAxes=function(t){var e=this,r=new Set(Object.keys(this.axes));t.forEach((function(t){var n,o,i;r.delete(t.id),null!==(n=(o=e.axes)[i=t.id])&&void 0!==n||(o[i]=new Od(t))})),r.forEach((function(t){delete e.axes[t]})),this.initialZoom&&(this.updateZoom(this.initialZoom.callerId,this.initialZoom.newZoom),this.initialZoom=void 0)},e.prototype.updateZoom=function(t,e){0!==Object.keys(this.axes).length?(Object.values(this.axes).forEach((function(r){r.updateZoom(t,null==e?void 0:e[r.getDirection()])})),this.applyStates()):this.initialZoom={callerId:t,newZoom:e}},e.prototype.updateAxisZoom=function(t,e,r){var n;null===(n=this.axes[e])||void 0===n||n.updateZoom(t,r),this.applyStates()},e.prototype.getZoom=function(){var t,e;if(Object.values(this.axes).forEach((function(r){r.getDirection()===Xu.X?t=r.getZoom():r.getDirection()===Xu.Y&&(e=r.getZoom())})),t||e)return{x:t,y:e}},e.prototype.getAxisZoom=function(t){var e;return null===(e=this.axes[t])||void 0===e?void 0:e.getZoom()},e.prototype.getAxisZooms=function(){var t,e,r={};try{for(var n=Sd(Object.entries(this.axes)),o=n.next();!o.done;o=n.next()){var i=wd(o.value,2),a=i[0],s=i[1];r[a]={direction:s.getDirection(),zoom:s.getZoom()}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return r},e.prototype.applyStates=function(){var t,e;if(Object.values(this.axes).map((function(t){return t.applyStates()})).some(Boolean)){var r=this.getZoom(),n={};try{for(var o=Sd(Object.entries(this.axes)),i=o.next();!i.done;i=o.next()){var a=wd(i.value,2),s=a[0],l=a[1];n[s]=l.getZoom()}}catch(e){t={error:e}}finally{try{i&&!i.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}var u=Cd(Cd({type:"zoom-change"},null!=r?r:{}),{axes:n});this.listeners.dispatch("zoom-change",u)}},e}(jp),Od=function(){function t(t){this.states={},this.currentZoom=void 0,this.axis=t}return t.prototype.getDirection=function(){return this.axis.direction},t.prototype.updateZoom=function(t,e){delete this.states[t],null!=e&&(this.states[t]=Cd({},e))},t.prototype.getZoom=function(){return this.currentZoom},t.prototype.applyStates=function(){var t,e,r=this.currentZoom,n=Object.keys(this.states)[Object.keys(this.states).length-1];return this.currentZoom=Cd({},this.states[n]),(null==r?void 0:r.min)!==(null===(t=this.currentZoom)||void 0===t?void 0:t.min)||(null==r?void 0:r.max)!==(null===(e=this.currentZoom)||void 0===e?void 0:e.max)},t}(),Ed=function(){return(Ed=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};var Td,Pd=function(){function t(){this.layoutProcessors=new Gp,this.listeners=new Gp}return t.prototype.addListener=function(t,e){if("layout-complete"!==t)return this.layoutProcessors.addListener(t,e);if(function(t){return"layout-complete"===t}(t))return this.listeners.addListener(t,e);throw new Error("AG Charts - unsupported listener type: "+t)},t.prototype.removeListener=function(t){this.listeners.removeListener(t),this.layoutProcessors.removeListener(t)},t.prototype.dispatchPerformLayout=function(t,e){var r=this.layoutProcessors.reduceDispatch(t,(function(t,e){var r=t.shrinkRect;return[Ed(Ed({},e),{shrinkRect:r})]}),e);return null!=r?r:e},t.prototype.dispatchLayoutComplete=function(t){this.listeners.dispatch("layout-complete",t)},t}(),Dd=function(t){this.getSeries=t};!function(t){t[t.FULL=0]="FULL",t[t.PROCESS_DATA=1]="PROCESS_DATA",t[t.PERFORM_LAYOUT=2]="PERFORM_LAYOUT",t[t.SERIES_UPDATE=3]="SERIES_UPDATE",t[t.TOOLTIP_RECALCULATION=4]="TOOLTIP_RECALCULATION",t[t.SCENE_RENDER=5]="SCENE_RENDER",t[t.NONE=6]="NONE"}(Td||(Td={}));var Ad=function(){function t(t){this.updateCallback=t}return t.prototype.update=function(t,e){void 0===t&&(t=Td.FULL);var r=(void 0===e?{}:e).forceNodeDataRefresh,n=void 0!==r&&r;this.updateCallback(t,{forceNodeDataRefresh:n})},t}(),Md=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},_d=function(){function t(){this.range="tooltip"}return Md([nu(ku("tooltip","node"))],t.prototype,"range",void 0),t}(),Rd=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},kd=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},Fd=function(){function t(t,e,r){void 0===r&&(r=!0),this._nodes=[],this._data=[],this._datumNodeIndices=new Map,this._garbage=[],this._garbageCollection=!0,this._parent=t,this._factory=Object.prototype.isPrototypeOf.call(Qs,e)?function(){return new e}:e,this._garbageCollection=r}return t.select=function(e,r,n){return void 0===n&&(n=!0),new t(e,r,n)},t.prototype.each=function(t){return this._nodes.forEach((function(e,r){return t(e,e.datum,r)})),this},t.prototype.update=function(t,e,r){var n,o,i=this,a=this._data,s=this._parent,l=this._factory,u=new Map;if(r?t.forEach((function(t,n){var o=r(t);if(u.set(o,n),!i._datumNodeIndices.has(o)){var a=l(t);a.datum=t,null==e||e(a),s.appendChild(a),i._nodes.push(a),i._datumNodeIndices.set(o,i._nodes.length-1)}})):t.length>a.length?t.slice(a.length).forEach((function(t){var r=l(t);r.datum=t,null==e||e(r),s.appendChild(r),i._nodes.push(r)})):t.length<a.length&&this._nodes.splice(t.length).forEach((function(t){s.removeChild(t)})),this._data=t.slice(0),r){try{for(var c=Rd(this._datumNodeIndices),p=c.next();!p.done;p=c.next()){var d=kd(p.value,2),h=d[0],f=d[1],v=u.get(h);void 0!==v?this._nodes[f].datum=t[v]:this._garbage.push(h)}}catch(t){n={error:t}}finally{try{p&&!p.done&&(o=c.return)&&o.call(c)}finally{if(n)throw n.error}}this._garbageCollection&&this.cleanup()}else for(var y=0;y<t.length;y++)this._nodes[y].datum=this._data[y];return this},t.prototype.clear=function(){return this.update([]),this},t.prototype.cleanup=function(){var t,e,r=this;if(0!==this._garbage.length){this._garbage.forEach((function(t){var e=r._datumNodeIndices.get(t);if(void 0!==e){var n=r._nodes[e];delete r._nodes[e],r._datumNodeIndices.delete(t),n&&r._parent.removeChild(n)}}));var n=0,o=this._datumNodeIndices.entries(),i=new Map;try{for(var a=Rd(o),s=a.next();!s.done;s=a.next()){var l=kd(s.value,2),u=l[0],c=l[1];i.set(c,u)}}catch(e){t={error:e}}finally{try{s&&!s.done&&(e=a.return)&&e.call(a)}finally{if(t)throw t.error}}this._nodes=this._nodes.filter((function(t,e){if(void 0===t)return!1;var o=i.get(e);return r._datumNodeIndices.set(o,n),n++,!0})),this._garbage=[]}},t.selectAll=function(t,e){var r=[],n=function(t){e(t)&&r.push(t),t.children.forEach(n)};return n(t),r},t.selectByClass=function(e,r){return t.selectAll(e,(function(t){return t instanceof r}))},t.selectByTag=function(e,r){return t.selectAll(e,(function(t){return t.tag===r}))},t.prototype.select=function(e){return t.selectAll(this._parent,e)},t.prototype.selectByClass=function(t){return this.select((function(e){return e instanceof t}))},t.prototype.selectByTag=function(t){return this.select((function(e){return e.tag===t}))},t.prototype.nodes=function(){return this._nodes},t}();function Id(t,e,r,n){if(0===t)return function(t,e,r){if(0===t)return function(t,e){var r=-e/t;return 0!==t&&r>=0&&r<=1?[r]:[]}(e,r);var n=e*e-4*t*r,o=[];if(0===n){var i=-e/(2*t);i>=0&&i<=1&&o.push(i)}else if(n>0){var a=Math.sqrt(n),s=(-e-a)/(2*t),l=(-e+a)/(2*t);s>=0&&s<=1&&o.push(s),l>=0&&l<=1&&o.push(l)}return o}(e,r,n);var o=e/t,i=r/t,a=(3*i-o*o)/9,s=(9*o*i-27*(n/t)-2*o*o*o)/54,l=a*a*a+s*s,u=[];if(l>=0){var c=Math.sqrt(l),p=Math.sign(s+c)*Math.pow(Math.abs(s+c),1/3),d=Math.sign(s-c)*Math.pow(Math.abs(s-c),1/3),h=Math.abs(Math.sqrt(3)*(p-d)/2),f=-1/3*o+(p+d);if(f>=0&&f<=1&&u.push(f),0===h){var v=-1/3*o-(p+d)/2;v>=0&&v<=1&&u.push(v)}}else{var y=Math.acos(s/Math.sqrt(-a*a*a)),g=1/3*o,m=2*Math.sqrt(-a),b=m*Math.cos(1/3*y)-g,C=m*Math.cos(1/3*(y+2*Math.PI))-g,S=m*Math.cos(1/3*(y+4*Math.PI))-g;b>=0&&b<=1&&u.push(b),C>=0&&C<=1&&u.push(C),S>=0&&S<=1&&u.push(S)}return u}var Ld=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function Nd(t,e,r,n,o,i,a,s){var l=(r-t)*(s-i)-(n-e)*(a-o);if(0===l)return null;var u=((a-o)*(e-i)-(t-o)*(s-i))/l,c=((r-t)*(e-i)-(n-e)*(t-o))/l;return u>=0&&u<=1&&c>=0&&c<=1?{x:t+u*(r-t),y:e+u*(n-e)}:null}function Gd(t,e,r,n,o,i,a,s,l,u,c,p){var d,h,f=[],v=u-p,y=c-l,g=l*(p-u)-u*(c-l),m=jd(t,r,o,a),b=jd(e,n,i,s),C=Id(v*m[0]+y*b[0],v*m[1]+y*b[1],v*m[2]+y*b[2],v*m[3]+y*b[3]+g);try{for(var S=Ld(C),w=S.next();!w.done;w=S.next()){var x=w.value,O=x*x,E=x*O,T=m[0]*E+m[1]*O+m[2]*x+m[3],P=b[0]*E+b[1]*O+b[2]*x+b[3],D=void 0;(D=l!==c?(T-l)/(c-l):(P-u)/(p-u))>=0&&D<=1&&f.push({x:T,y:P})}}catch(t){d={error:t}}finally{try{w&&!w.done&&(h=S.return)&&h.call(S)}finally{if(d)throw d.error}}return f}function jd(t,e,r,n){return[3*e-t-3*r+n,3*t-6*e+3*r,-3*t+3*e,t]}function Vd(t,e,r,n,o,i,a,s,l,u){var c=(u-s)/(l-a),p=s-c*a,d=Math.pow(c,2)+1,h=2*(c*(p-e)-t),f=Math.pow(t,2)+Math.pow(p-e,2)-Math.pow(r,2),v=Math.pow(h,2)-4*d*f;if(v<0)return[];var y=(-h+Math.sqrt(v))/2/d,g=(-h-Math.sqrt(v))/2/d,m=[];return[y,g].forEach((function(t){if(t>=Math.min(a,l)&&t<=Math.max(a,l)){var e=c*t,r=Tl(i?o:n),s=Tl(i?n:o),u=Tl(Math.atan2(e,t));s<=r&&(s+=2*Math.PI),u<r&&(u+=2*Math.PI),u>=r&&u<=s&&m.push({x:t,y:e})}})),m}var Bd,Ud=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};!function(t){t[t.Move=0]="Move",t[t.Line=1]="Line",t[t.Arc=2]="Arc",t[t.Curve=3]="Curve",t[t.ClosePath=4]="ClosePath"}(Bd||(Bd={}));var Hd=function(){function t(){this.previousCommands=[],this.previousParams=[],this.previousClosedPath=!1,this.commands=[],this.params=[],this._closedPath=!1}return t.prototype.isDirty=function(){if(this._closedPath!==this.previousClosedPath)return!0;if(this.previousCommands.length!==this.commands.length)return!0;if(this.previousParams.length!==this.params.length)return!0;for(var t=0;t<this.commands.length;t++)if(this.commands[t]!==this.previousCommands[t])return!0;for(t=0;t<this.params.length;t++)if(this.params[t]!==this.previousParams[t])return!0;return!1},t.prototype.draw=function(t){var e,r,n=this.commands,o=this.params,i=0;t.beginPath();try{for(var a=Ud(n),s=a.next();!s.done;s=a.next()){switch(s.value){case Bd.Move:t.moveTo(o[i++],o[i++]);break;case Bd.Line:t.lineTo(o[i++],o[i++]);break;case Bd.Curve:t.bezierCurveTo(o[i++],o[i++],o[i++],o[i++],o[i++],o[i++]);break;case Bd.Arc:t.arc(o[i++],o[i++],o[i++],o[i++],o[i++],1===o[i++]);break;case Bd.ClosePath:t.closePath()}}}catch(t){e={error:t}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}0===n.length&&t.closePath()},t.prototype.moveTo=function(t,e){this.xy?(this.xy[0]=t,this.xy[1]=e):this.xy=[t,e],this.commands.push(Bd.Move),this.params.push(t,e)},t.prototype.lineTo=function(t,e){this.xy?(this.commands.push(Bd.Line),this.params.push(t,e),this.xy[0]=t,this.xy[1]=e):this.moveTo(t,e)},t.prototype.rect=function(t,e,r,n){this.moveTo(t,e),this.lineTo(t+r,e),this.lineTo(t+r,e+n),this.lineTo(t,e+n),this.closePath()},t.prototype.arc=function(t,e,r,n,o,i){void 0===i&&(i=!1);var a=t+r*Math.cos(o),s=e+r*Math.sin(o);this.xy?(this.xy[0]=a,this.xy[1]=s):this.xy=[a,s],this.commands.push(Bd.Arc),this.params.push(t,e,r,n,o,i?1:0)},t.prototype.cubicCurveTo=function(t,e,r,n,o,i){this.xy||this.moveTo(t,e),this.commands.push(Bd.Curve),this.params.push(t,e,r,n,o,i),this.xy&&(this.xy[0]=o,this.xy[1]=i)},Object.defineProperty(t.prototype,"closedPath",{get:function(){return this._closedPath},enumerable:!1,configurable:!0}),t.prototype.closePath=function(){this.xy&&(this.xy=void 0,this.commands.push(Bd.ClosePath),this._closedPath=!0)},t.prototype.clear=function(t){(void 0===t?{trackChanges:!1}:t).trackChanges?(this.previousCommands=this.commands,this.previousParams=this.params,this.previousClosedPath=this._closedPath,this.commands=[],this.params=[]):(this.commands.length=0,this.params.length=0),this.xy=void 0,this._closedPath=!1},t.prototype.isPointInPath=function(t,e){for(var r=this.commands,n=this.params,o=r.length,i=-1e4,a=-1e4,s=NaN,l=NaN,u=0,c=0,p=0,d=0,h=0;d<o;d++)switch(r[d]){case Bd.Move:isNaN(s)||Nd(s,l,u,c,i,a,t,e)&&p++,s=u=n[h++],l=c=n[h++];break;case Bd.Line:Nd(u,c,n[h++],n[h++],i,a,t,e)&&p++,u=n[h-2],c=n[h-1];break;case Bd.Curve:p+=Gd(u,c,n[h++],n[h++],n[h++],n[h++],n[h++],n[h++],i,a,t,e).length,u=n[h-2],c=n[h-1];break;case Bd.Arc:p+=Vd(n[h++],n[h++],n[h++],n[h++],n[h++],Boolean(n[h++]),i,a,t,e).length,u=n[h-2],c=n[h-1];break;case Bd.ClosePath:isNaN(s)||Nd(s,l,u,c,i,a,t,e)&&p++}return p%2==1},t}(),zd=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Wd=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a};function Kd(t){var e=null!=t?t:{},r=e.redraw,n=void 0===r?ks.MAJOR:r,o=e.changeCb;return zs({redraw:n,type:"path",convertor:e.convertor,changeCb:o})}var Xd=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.path=new Hd,e._dirtyPath=!0,e}return zd(e,t),Object.defineProperty(e.prototype,"dirtyPath",{get:function(){return this._dirtyPath},set:function(t){this._dirtyPath!==t&&(this._dirtyPath=t,t&&this.markDirty(this,ks.MAJOR))},enumerable:!1,configurable:!0}),e.prototype.checkPathDirty=function(){var t,e;this._dirtyPath||(this.dirtyPath=this.path.isDirty()||null!==(e=null===(t=this.fillShadow)||void 0===t?void 0:t.isDirty())&&void 0!==e&&e)},e.prototype.isPointInPath=function(t,e){var r=this.transformPoint(t,e);return this.path.closedPath&&this.path.isPointInPath(r.x,r.y)},e.prototype.isDirtyPath=function(){return!1},e.prototype.updatePath=function(){},e.prototype.render=function(e){var r,n,o=e.ctx,i=e.forceRender,a=e.stats;if(this.dirty!==ks.NONE||i){if(this.computeTransformMatrix(),this.matrix.toContext(o),(this.dirtyPath||this.isDirtyPath())&&(this.updatePath(),this.dirtyPath=!1),this.clipPath){if(o.save(),"normal"===this.clipMode&&(this.clipPath.draw(o),o.clip()),this.path.draw(o),this.fillStroke(o),"punch-out"===this.clipMode){this.clipPath.draw(o),o.clip();var s=null!==(r=this.computeBBox())&&void 0!==r?r:{},l=s.x,u=void 0===l?-1e4:l,c=s.y,p=void 0===c?-1e4:c,d=s.width,h=void 0===d?2e4:d,f=s.height,v=void 0===f?2e4:f;o.clearRect(u,p,h,v)}o.restore()}else this.path.draw(o),this.fillStroke(o);null===(n=this.fillShadow)||void 0===n||n.markClean(),t.prototype.render.call(this,e)}else a&&(a.nodesSkipped+=this.nodeCount.count)},e.className="Path",Wd([Kd()],e.prototype,"clipPath",void 0),Wd([Kd()],e.prototype,"clipMode",void 0),e}(kl),Yd=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),qd=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},Zd=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Jd=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.x=0,e.y=0,e.size=12,e}return Yd(e,t),e.prototype.computeBBox=function(){var t=this.x,e=this.y,r=this.size,n=r/2;return new Ns(t-n,e-n,r,r)},e.prototype.applyPath=function(t,e){var r,n,o=this.path,i=this.x,a=this.y;o.clear();try{for(var s=Zd(e),l=s.next();!l.done;l=s.next()){var u=l.value,c=u.x,p=u.y,d=u.t;i+=c*t,a+=p*t,"move"===d?o.moveTo(i,a):o.lineTo(i,a)}}catch(t){r={error:t}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}o.closePath()},qd([Kd()],e.prototype,"x",void 0),qd([Kd()],e.prototype,"y",void 0),qd([Kd({convertor:Math.abs})],e.prototype,"size",void 0),e}(Xd),$d=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Qd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return $d(e,t),e.prototype.updatePath=function(){var t=this.path,e=this.x,r=this.y,n=this.size/2;t.clear(),t.moveTo(this.align(e-n),this.align(r-n)),t.lineTo(this.align(e+n),this.align(r-n)),t.lineTo(this.align(e+n),this.align(r+n)),t.lineTo(this.align(e-n),this.align(r+n)),t.closePath()},e.className="Square",e}(Jd),th=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),eh=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},rh=function(t){function e(){var e=t.call(this,{name:"markerLabelGroup"})||this;e.label=new Gl,e._marker=new Qd,e._markerSize=15,e._spacing=8;var r=e.label;return r.textBaseline="middle",r.fontSize=12,r.fontFamily="Verdana, sans-serif",r.fill="black",r.y=Fs.has.textMetrics?1:0,e.append([e.marker,r]),e.update(),e}return th(e,t),Object.defineProperty(e.prototype,"marker",{get:function(){return this._marker},set:function(t){this._marker!==t&&(this.removeChild(this._marker),this._marker=t,this.appendChild(t),this.update())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"markerSize",{get:function(){return this._markerSize},set:function(t){this._markerSize!==t&&(this._markerSize=t,this.update())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"spacing",{get:function(){return this._spacing},set:function(t){this._spacing!==t&&(this._spacing=t,this.update())},enumerable:!1,configurable:!0}),e.prototype.update=function(){var t=this.marker,e=this.markerSize;t.size=e,this.label.x=e/2+this.spacing},e.prototype.render=function(e){this.marker.opacity=this.opacity,this.label.opacity=this.opacity,t.prototype.render.call(this,e)},e.className="MarkerLabel",eh([jc("label")],e.prototype,"text",void 0),eh([jc("label")],e.prototype,"fontStyle",void 0),eh([jc("label")],e.prototype,"fontWeight",void 0),eh([jc("label")],e.prototype,"fontSize",void 0),eh([jc("label")],e.prototype,"fontFamily",void 0),eh([jc("label","fill")],e.prototype,"color",void 0),eh([jc("marker","fill")],e.prototype,"markerFill",void 0),eh([jc("marker","stroke")],e.prototype,"markerStroke",void 0),eh([jc("marker","strokeWidth")],e.prototype,"markerStrokeWidth",void 0),eh([jc("marker","fillOpacity")],e.prototype,"markerFillOpacity",void 0),eh([jc("marker","strokeOpacity")],e.prototype,"markerStrokeOpacity",void 0),e}(fl),nh=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),oh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return nh(e,t),e.prototype.updatePath=function(){var t=this.x,e=this.y,r=this.path,n=this.size/2;r.clear(),r.arc(t,e,n,0,2*Math.PI),r.closePath()},e.className="Circle",e}(Jd),ih=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ah=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ih(e,t),e.prototype.updatePath=function(){var r=this.size/4.2;t.prototype.applyPath.call(this,r,e.moves)},e.className="Cross",e.moves=[{x:-1,y:0,t:"move"},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1},{x:1,y:1},{x:-1,y:1},{x:-1,y:-1},{x:-1,y:1},{x:-1,y:-1}],e}(Jd),sh=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),lh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return sh(e,t),e.prototype.updatePath=function(){var r=this.size/2;t.prototype.applyPath.call(this,r,e.moves)},e.className="Diamond",e.moves=[{x:0,y:-1,t:"move"},{x:1,y:1},{x:-1,y:1},{x:-1,y:-1},{x:1,y:-1}],e}(Jd),uh=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ch=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return uh(e,t),e.prototype.rad=function(t){return t/180*Math.PI},e.prototype.updatePath=function(){var t=this.x,e=this.path,r=this.size,n=this.rad,o=r/4,i=this.y+o/2;e.clear(),e.arc(t-o,i-o,o,n(130),n(330)),e.arc(t+o,i-o,o,n(220),n(50)),e.lineTo(t,i+o),e.closePath()},e.className="Heart",e}(Jd),ph=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),dh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ph(e,t),e.prototype.updatePath=function(){var r=this.size/3;t.prototype.applyPath.call(this,r,e.moves)},e.className="Plus",e.moves=[{x:-.5,y:-.5,t:"move"},{x:0,y:-1},{x:1,y:0},{x:0,y:1},{x:1,y:0},{x:0,y:1},{x:-1,y:0},{x:0,y:1},{x:-1,y:0},{x:0,y:-1},{x:-1,y:0},{x:0,y:-1}],e}(Jd),hh=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),fh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return hh(e,t),e.prototype.updatePath=function(){var r=1.1*this.size;t.prototype.applyPath.call(this,r,e.moves)},e.className="Triangle",e.moves=[{x:0,y:-.48,t:"move"},{x:.5,y:.87},{x:-1,y:0}],e}(Jd);function vh(t){if(void 0===t&&(t=Qd),"string"==typeof t)switch(t){case"circle":return oh;case"cross":return ah;case"diamond":return lh;case"heart":return ch;case"plus":return dh;case"triangle":return fh;default:return Qd}return"function"==typeof t?t:Qd}var yh=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function gh(t){for(var e=t.orientation,r=t.bboxes,n=t.maxHeight,o=t.maxWidth,i=t.itemPaddingY,a=void 0===i?0:i,s=t.itemPaddingX,l=void 0===s?0:s,u=t.forceResult,c=void 0!==u&&u,p="horizontal"===e,d={max:p?o:n,fn:p?function(t){return t.width}:function(t){return t.height},padding:p?l:a},h={max:p?n:o,fn:p?function(t){return t.height}:function(t){return t.width},padding:p?a:l},f=0,v=[];f<r.length;){var y=mh(r.slice(f),f,d,h,c);if(!y)return;f+=y.processedBBoxCount,v.push(y.pageIndices)}return function(t,e,r,n,o){var i=0,a=0;return{pages:t.map((function(t){"horizontal"===e&&(t=function(t){var e,r,n=[];try{for(var o=yh(t[0]),i=o.next();!i.done;i=o.next()){i.value;n.push([])}}catch(t){e={error:t}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}return t.forEach((function(t,e){t.forEach((function(t,r){n[r][e]=t}))})),n}(t));var s=0,l=t.map((function(t){var e=t.map((function(t){return s=Math.max(t,s),r[t]})),i=0,a=0;return e.forEach((function(t){i+=t.height+n,a=Math.max(a,t.width+o)})),{indices:t,bboxes:e,columnHeight:i,columnWidth:a}})),u=0,c=0;return l.forEach((function(t){u+=t.columnWidth,c=Math.max(c,t.columnHeight)})),i=Math.max(u,i),a=Math.max(c,a),{columns:l,startIndex:t[0][0],endIndex:s,pageWidth:u,pageHeight:c}})),maxPageWidth:i,maxPageHeight:a}}(v,e,r,a,l)}function mh(t,e,r,n,o){var i=function(t,e){for(var r=t.length,n=0,o=0;o<r;o++){if((n+=e.fn(t[o])+e.padding)>e.max)return r/o<2?Math.ceil(r/2):o}return r}(t,r);if(i<1){if(!o)return;i=1}for(var a=i;a>=1;a--){var s=bh(t,e,a,r,n,o);if(null==s&&a<=1)return;if(null!=s){if("number"!=typeof s)return{processedBBoxCount:s.length*s[0].length,pageIndices:s};if(s<=1)return;a=s<a&&s>1?s:a}}}function bh(t,e,r,n,o,i){for(var a,s=[],l=0,u=0,c=[],p=[],d=0;d<t.length;d++){var h=(d+r)%r;0===h&&(l+=u,u=0,c.length>0&&s.push(c),c=[]);var f=n.fn(t[d])+n.padding;p[h]=Math.max(null!==(a=p[h])&&void 0!==a?a:0,f);var v=l+(u=Math.max(u,o.fn(t[d])+o.padding)),y=!i||s.length>0;if(v>o.max&&y){c=[];break}if(p.reduce((function(t,e){return t+e}),0)>n.max&&!i)return p.length<r?p.length:void 0;c.push(d+e)}return c.length>0&&s.push(c),s.length>0?s:void 0}var Ch=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},Sh=function(){function t(){this.color="black",this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=12,this.fontFamily="Verdana, sans-serif"}return Ch([nu(xu)],t.prototype,"color",void 0),Ch([nu(Nu)],t.prototype,"fontStyle",void 0),Ch([nu(ju)],t.prototype,"fontWeight",void 0),Ch([nu(Pu(0))],t.prototype,"fontSize",void 0),Ch([nu(yu)],t.prototype,"fontFamily",void 0),t}(),wh=function(){function t(){this.size=15,this.fill=void 0,this.fillOpacity=void 0,this.stroke=void 0,this.strokeWidth=1,this.strokeOpacity=1}return Ch([nu(Pu(0))],t.prototype,"size",void 0),Ch([nu(Ou)],t.prototype,"fill",void 0),Ch([nu(Du(0,1))],t.prototype,"fillOpacity",void 0),Ch([nu(Ou)],t.prototype,"stroke",void 0),Ch([nu(Pu(0))],t.prototype,"strokeWidth",void 0),Ch([nu(Pu(0,1))],t.prototype,"strokeOpacity",void 0),t}(),xh=function(){function t(){this.size=15,this._shape=fh,this.padding=8}return Object.defineProperty(t.prototype,"shape",{get:function(){return this._shape},set:function(t){var e;this._shape=t,null===(e=this.parent)||void 0===e||e.onMarkerShapeChange()},enumerable:!1,configurable:!0}),Ch([nu(Pu(0))],t.prototype,"size",void 0),Ch([nu(Pu(0))],t.prototype,"padding",void 0),t}(),Oh=function(){function t(t,e,r,n){var o=this;this.chartUpdateCallback=t,this.pageUpdateCallback=e,this.interactionManager=r,this.cursorManager=n,this.id=Us(this),this.group=new fl({name:"pagination"}),this.labelNode=new Gl,this.marker=new xh,this.activeStyle=new wh,this.inactiveStyle=new wh,this.highlightStyle=new wh,this.label=new Sh,this.totalPages=0,this.currentPage=0,this.translationX=0,this.translationY=0,this.nextButtonDisabled=!1,this.previousButtonDisabled=!1,this._visible=!0,this._enabled=!0,this._orientation="vertical",this._nextButton=new fh,this._previousButton=new fh;var i=this.labelNode;i.textBaseline="middle",i.fontSize=12,i.fontFamily="Verdana, sans-serif",i.fill="black",i.y=Fs.has.textMetrics?1:0,this.group.append([this.nextButton,this.previousButton,i]),this.interactionManager.addListener("click",(function(t){return o.onPaginationClick(t)})),this.interactionManager.addListener("hover",(function(t){return o.onPaginationMouseMove(t)})),this.marker.parent=this,this.update(),this.updateMarkers()}return Object.defineProperty(t.prototype,"visible",{get:function(){return this._visible},set:function(t){this._visible=t,this.updateGroupVisibility()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"enabled",{get:function(){return this._enabled},set:function(t){this._enabled=t,this.updateGroupVisibility()},enumerable:!1,configurable:!0}),t.prototype.updateGroupVisibility=function(){this.group.visible=this.enabled&&this.visible},Object.defineProperty(t.prototype,"orientation",{get:function(){return this._orientation},set:function(t){switch(this._orientation=t,t){case"horizontal":this.previousButton.rotation=-Math.PI/2,this.nextButton.rotation=Math.PI/2;break;case"vertical":default:this.previousButton.rotation=0,this.nextButton.rotation=Math.PI}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextButton",{get:function(){return this._nextButton},set:function(t){this._nextButton!==t&&(this.group.removeChild(this._nextButton),this._nextButton=t,this.group.appendChild(t))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"previousButton",{get:function(){return this._previousButton},set:function(t){this._previousButton!==t&&(this.group.removeChild(this._previousButton),this._previousButton=t,this.group.appendChild(t))},enumerable:!1,configurable:!0}),t.prototype.update=function(){this.updateLabel(),this.updatePositions(),this.enableOrDisableButtons()},t.prototype.updatePositions=function(){this.group.translationX=this.translationX,this.group.translationY=this.translationY,this.updateLabelPosition(),this.updateNextButtonPosition()},t.prototype.updateLabelPosition=function(){var t=this.marker,e=t.size,r=t.padding;this.nextButton.size=e,this.previousButton.size=e,this.labelNode.x=e/2+r},t.prototype.updateNextButtonPosition=function(){var t=this.labelNode.computeBBox();this.nextButton.translationX=t.x+t.width+this.marker.size/2+this.marker.padding},t.prototype.updateLabel=function(){var t=this.currentPage,e=this.totalPages,r=this.labelNode,n=this.label,o=n.color,i=n.fontStyle,a=n.fontWeight,s=n.fontSize,l=n.fontFamily;r.text=t+1+" / "+e,r.fill=o,r.fontStyle=i,r.fontWeight=a,r.fontSize=s,r.fontFamily=l},t.prototype.updateMarkers=function(){var t=this,e=t.nextButton,r=t.previousButton,n=t.nextButtonDisabled,o=t.previousButtonDisabled,i=t.activeStyle,a=t.inactiveStyle,s=t.highlightStyle,l=t.highlightActive,u=function(t,e){return e?a:t===l?s:i};this.updateMarker(e,u("next",n)),this.updateMarker(r,u("previous",o))},t.prototype.updateMarker=function(t,e){var r,n=this.marker.size;t.size=n,t.fill=e.fill,t.fillOpacity=null!==(r=e.fillOpacity)&&void 0!==r?r:1,t.stroke=e.stroke,t.strokeWidth=e.strokeWidth,t.strokeOpacity=e.strokeOpacity},t.prototype.enableOrDisableButtons=function(){var t=this.currentPage,e=this.totalPages,r=0===e,n=t===e-1,o=0===t;this.nextButtonDisabled=n||r,this.previousButtonDisabled=o||r},t.prototype.nextButtonContainsPoint=function(t,e){return!this.nextButtonDisabled&&this.nextButton.containsPoint(t,e)},t.prototype.previousButtonContainsPoint=function(t,e){return!this.previousButtonDisabled&&this.previousButton.containsPoint(t,e)},t.prototype.onPaginationClick=function(t){var e=t.offsetX,r=t.offsetY;this.nextButtonContainsPoint(e,r)?(this.incrementPage(),this.onPaginationChanged(),t.consume()):this.previousButtonContainsPoint(e,r)&&(this.decrementPage(),this.onPaginationChanged(),t.consume())},t.prototype.onPaginationMouseMove=function(t){var e=t.offsetX,r=t.offsetY;this.nextButtonContainsPoint(e,r)?(this.cursorManager.updateCursor(this.id,"pointer"),this.highlightActive="next"):this.previousButtonContainsPoint(e,r)?(this.cursorManager.updateCursor(this.id,"pointer"),this.highlightActive="previous"):(this.cursorManager.updateCursor(this.id),this.highlightActive=void 0),this.updateMarkers(),this.chartUpdateCallback(Td.SCENE_RENDER)},t.prototype.onPaginationChanged=function(){this.pageUpdateCallback(this.currentPage)},t.prototype.incrementPage=function(){this.currentPage=Math.min(this.currentPage+1,this.totalPages-1)},t.prototype.decrementPage=function(){this.currentPage=Math.max(this.currentPage-1,0)},t.prototype.onMarkerShapeChange=function(){var t=vh(this.marker.shape||fh);this.previousButton=new t,this.nextButton=new t,this.updatePositions(),this.updateMarkers(),this.chartUpdateCallback(Td.SCENE_RENDER)},t.prototype.attachPagination=function(t){t.append(this.group)},t.prototype.computeBBox=function(){return this.group.computeBBox()},t.className="Pagination",t}(),Eh=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},Th=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},Ph=function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t},Dh=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ah=["horizontal","vertical"],Mh=ou((function(t,e){return iu(t,e,(function(t){return Ah.includes(t)}))}),"expecting an orientation keyword such as 'horizontal' or 'vertical'"),_h=function(){function t(){this.maxLength=void 0,this.color="black",this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=12,this.fontFamily="Verdana, sans-serif",this.formatter=void 0}return Eh([nu(Du(0))],t.prototype,"maxLength",void 0),Eh([nu(xu)],t.prototype,"color",void 0),Eh([nu(Nu)],t.prototype,"fontStyle",void 0),Eh([nu(ju)],t.prototype,"fontWeight",void 0),Eh([nu(Pu(0))],t.prototype,"fontSize",void 0),Eh([nu(yu)],t.prototype,"fontFamily",void 0),Eh([nu(hu)],t.prototype,"formatter",void 0),t}(),Rh=function(){function t(){this.size=15,this._shape=void 0,this.padding=8,this.strokeWidth=1}return Object.defineProperty(t.prototype,"shape",{get:function(){return this._shape},set:function(t){var e;this._shape=t,null===(e=this.parent)||void 0===e||e.onMarkerShapeChange()},enumerable:!1,configurable:!0}),Eh([nu(Pu(0))],t.prototype,"size",void 0),Eh([nu(Pu(0))],t.prototype,"padding",void 0),Eh([nu(Pu(0))],t.prototype,"strokeWidth",void 0),t}(),kh=function(){function t(){this.marker=new Rh,this.label=new _h,this.maxWidth=void 0,this.paddingX=16,this.paddingY=8,this.toggleSeriesVisible=!0}return Eh([nu(Du(0))],t.prototype,"maxWidth",void 0),Eh([nu(Pu(0))],t.prototype,"paddingX",void 0),Eh([nu(Pu(0))],t.prototype,"paddingY",void 0),Eh([nu(fu)],t.prototype,"toggleSeriesVisible",void 0),t}(),Fh=function(){function t(){this.legendItemClick=void 0,this.legendItemDoubleClick=void 0}return Eh([nu(hu)],t.prototype,"legendItemClick",void 0),t}(),Ih={category:function(){function t(t){var e,r=this;this.ctx=t,this.id=Us(this),this.group=new fl({name:"legend",layer:!0,zIndex:Ku.LEGEND_ZINDEX}),this.itemSelection=Fd.select(this.group,rh),this.oldSize=[0,0],this.pages=[],this.maxPageSize=[0,0],this.paginationTrackingIndex=0,this.item=new kh,this.listeners=new Fh,this.truncatedItems=new Set,this._data=[],this._enabled=!0,this.position="bottom",this.maxWidth=void 0,this.maxHeight=void 0,this.reverseOrder=void 0,this.destroyFns=[],this.spacing=20,this.characterWidths=new Map,this.size=[0,0],this._visible=!0,this.item.marker.parent=this,this.pagination=new Oh((function(e){return t.updateService.update(e)}),(function(t){return r.updatePageNumber(t)}),t.interactionManager,t.cursorManager),this.pagination.attachPagination(this.group),this.item.marker.parent=this;var n=[t.interactionManager.addListener("click",(function(t){return r.checkLegendClick(t)})),t.interactionManager.addListener("dblclick",(function(t){return r.checkLegendDoubleClick(t)})),t.interactionManager.addListener("hover",(function(t){return r.handleLegendMouseMove(t)}))],o=[t.layoutService.addListener("start-layout",(function(t){return r.positionLegend(t.shrinkRect)}))];(e=this.destroyFns).push.apply(e,Ph(Ph(Ph([],Th(n.map((function(e){return function(){return t.interactionManager.removeListener(e)}})))),Th(o.map((function(e){return function(){return t.layoutService.removeListener(e)}})))),[function(){return r.detachLegend()}]))}return Object.defineProperty(t.prototype,"data",{get:function(){return this._data},set:function(t){this._data=t,this.updateGroupVisibility()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"enabled",{get:function(){return this._enabled},set:function(t){this._enabled=t,this.updateGroupVisibility()},enumerable:!1,configurable:!0}),t.prototype.getOrientation=function(){if(void 0!==this.orientation)return this.orientation;switch(this.position){case"right":case"left":return"vertical";case"bottom":case"top":return"horizontal"}},t.prototype.destroy=function(){this.destroyFns.forEach((function(t){return t()}))},t.prototype.onMarkerShapeChange=function(){this.itemSelection.clear(),this.group.markDirty(this.group,ks.MINOR)},t.prototype.getCharacterWidths=function(t){var e=this.characterWidths;if(e.has(t))return e.get(t);var r={"...":Fs.getTextSize("...",t).width};return e.set(t,r),r},Object.defineProperty(t.prototype,"visible",{get:function(){return this._visible},set:function(t){this._visible=t,this.updateGroupVisibility()},enumerable:!1,configurable:!0}),t.prototype.updateGroupVisibility=function(){this.group.visible=this.enabled&&this.visible&&this.data.length>0},t.prototype.attachLegend=function(t){t.append(this.group)},t.prototype.detachLegend=function(){var t;null===(t=this.group.parent)||void 0===t||t.removeChild(this.group)},t.prototype.getItemLabel=function(t){var e=this.ctx.callbackCache,r=this.item.label.formatter;return r?e.call(r,{itemId:t.itemId,value:t.label.text,seriesId:t.seriesId}):t.label.text},t.prototype.performLayout=function(t,e){var r=this,n=this.item,o=n.paddingX,i=n.paddingY,a=n.label,s=n.maxWidth,l=n.marker,u=l.size,c=l.padding,p=l.shape,d=n.label,h=d.maxLength,f=void 0===h?1/0:h,v=d.fontStyle,y=d.fontWeight,g=d.fontSize,m=d.fontFamily,b=Ph([],Th(this.data));this.reverseOrder&&b.reverse(),this.itemSelection.update(b);var C=[],S=jl(a),w=null!=s?s:.8*t,x=u+c+o;if(this.itemSelection.each((function(t,e){var n,o=vh(null!=p?p:e.marker.shape);t.marker&&t.marker instanceof o||(t.marker=new o),t.markerSize=u,t.spacing=c,t.fontStyle=v,t.fontWeight=y,t.fontSize=g,t.fontFamily=m;var i=null!==(n=e.itemId)&&void 0!==n?n:e.id,a=r.getItemLabel(e),s=(null!=a?a:"<unknown>").replace(/\r?\n/g," ");t.text=r.truncate(s,f,w,x,S,i),C.push(t.computeBBox())})),t=Math.max(1,t),e=Math.max(1,e),!isFinite(t))return!1;var O=this.size,E=this.oldSize;O[0]=t,O[1]=e,O[0]===E[0]&&O[1]===E[1]||(E[0]=O[0],E[1]=O[1]);var T=this.updatePagination(C,t,e),P=T.pages,D=T.maxPageHeight,A=T.maxPageWidth;this.pages=P,this.maxPageSize=[A-o,D-i];var M=this.pagination.currentPage,_=this.pages[M];this.pages.length<1||!_?this.visible=!1:(this.visible=!0,this.updatePositions(M),this.update())},t.prototype.truncate=function(t,e,r,n,o,i){var a,s,l=t.split(""),u=!1;if(t.length>e&&(t=""+t.substring(0,e),u=!0),Math.floor(n+Fs.getTextSize(t,o).width)>r){var c="",p=this.getCharacterWidths(o),d=n+p["..."];try{for(var h=Dh(l),f=h.next();!f.done;f=h.next()){var v=f.value;if(p[v]||(p[v]=Fs.getTextSize(v,o).width),(d+=p[v])>r)break;c+=v}}catch(t){a={error:t}}finally{try{f&&!f.done&&(s=h.return)&&s.call(h)}finally{if(a)throw a.error}}t=c,u=!0}return u?(t+="...",this.truncatedItems.add(i)):this.truncatedItems.delete(i),t},t.prototype.updatePagination=function(t,e,r){var n=this.getOrientation(),o=Math.min(this.paginationTrackingIndex,t.length);this.pagination.orientation=n,this.pagination.translationX=0,this.pagination.translationY=0;var i=this.calculatePagination(t,e,r),a=i.pages,s=i.maxPageHeight,l=i.maxPageWidth,u=i.paginationBBox,c=i.paginationVertical,p=a.findIndex((function(t){return t.endIndex>=o}));this.pagination.currentPage=Math.min(Math.max(p,0),a.length-1);var d=this.item,h=l-d.paddingX,f=s-d.paddingY,v=0,y=-u.y-this.item.marker.size/2;return c?y+=f+8:(v+=-u.x+h+8,y+=(f-u.height)/2),this.pagination.translationX=v,this.pagination.translationY=y,this.pagination.update(),this.pagination.updateMarkers(),{maxPageHeight:s,maxPageWidth:l,pages:a}},t.prototype.calculatePagination=function(t,e,r){var n,o,i,a=this.item,s=a.paddingX,l=a.paddingY,u=this.getOrientation(),c=["left","right"].includes(this.position),p=this.pagination.computeBBox(),d=new Ns(0,0,0,0),h=[],f=0,v=0,y=0,g=function(t){var e=t.width,r=t.height;return e===p.width&&r===p.height},m=void 0!==this.maxWidth||void 0!==this.maxHeight;do{if(y++>10){sl.warn("unable to find stable legend layout.");break}p=d;var b=e-(c?0:p.width),C=gh({orientation:u,bboxes:t,maxHeight:r-(c?p.height:0),maxWidth:b,itemPaddingY:l,itemPaddingX:s,forceResult:m});h=null!==(n=null==C?void 0:C.pages)&&void 0!==n?n:[],f=null!==(o=null==C?void 0:C.maxPageWidth)&&void 0!==o?o:0,v=null!==(i=null==C?void 0:C.maxPageHeight)&&void 0!==i?i:0;var S=h.length;if(this.pagination.visible=S>1,this.pagination.totalPages=S,this.pagination.update(),d=this.pagination.computeBBox(),!this.pagination.visible)break}while(!g(d));return{maxPageWidth:f,maxPageHeight:v,pages:h,paginationBBox:p,paginationVertical:c}},t.prototype.updatePositions=function(t){void 0===t&&(t=0);var e=this.item.paddingY,r=this.itemSelection,n=this.pages;if(!(n.length<1)&&n[t]){var o=n[t],i=o.columns,a=o.startIndex,s=o.endIndex,l=0,u=0,c=i.length,p=i[0].indices.length,d="horizontal"===this.getOrientation(),h=i[0].bboxes[0].height+e,f=[];r.each((function(t,e,r){var n,o;if(r<a||r>s)t.visible=!1;else{var v=r-a,y=0,g=0;d?(y=v%c,g=Math.floor(v/c)):(y=Math.floor(v/p),g=v%p),t.visible=!0;var m=i[y];m&&(u=h*g,l=null!==(n=f[g])&&void 0!==n?n:0,f[g]=(null!==(o=f[g])&&void 0!==o?o:0)+m.columnWidth,t.translationX=Math.floor(l),t.translationY=Math.floor(u))}}))}},t.prototype.updatePageNumber=function(t){var e=this.pages,r=e[t],n=r.startIndex,o=r.endIndex;0===n?this.paginationTrackingIndex=0:t===e.length-1?this.paginationTrackingIndex=o:this.paginationTrackingIndex=Math.floor((n+o)/2),this.pagination.update(),this.pagination.updateMarkers(),this.updatePositions(t),this.ctx.updateService.update(Td.SCENE_RENDER)},t.prototype.update=function(){var t=this.item,e=t.marker.strokeWidth,r=t.label.color;this.itemSelection.each((function(t,n){var o=n.marker;t.markerFill=o.fill,t.markerStroke=o.stroke,t.markerStrokeWidth=e,t.markerFillOpacity=o.fillOpacity,t.markerStrokeOpacity=o.strokeOpacity,t.opacity=n.enabled?1:.5,t.color=r}))},t.prototype.getDatumForPoint=function(t,e){var r,n,o=[],i={dist:1/0,datum:void 0};try{for(var a=Dh(this.group.children),s=a.next();!s.done;s=a.next()){var l=s.value;if(l.visible&&l instanceof rh){var u=l.computeBBox();if(u.grow(this.item.paddingX/2,"horizontal"),u.grow(this.item.paddingY/2,"vertical"),u.containsPoint(t,e))return l.datum;var c=t-u.x-this.item.paddingX/2,p=e-u.y-this.item.paddingY/2,d=Math.pow(c,2)+Math.pow(p,2);c>=0&&p>=0&&d<i.dist&&(i.dist=d,i.datum=l.datum),o.push(u)}}}catch(t){r={error:t}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}if(Ns.merge(o).containsPoint(t,e))return i.datum},t.prototype.computeBBox=function(){return this.group.computeBBox()},t.prototype.computePagedBBox=function(){var t=this.group.computeBBox();if(this.pages.length<=1)return t;var e=Th(this.maxPageSize,2),r=e[0],n=e[1];return t.height=Math.max(n,t.height),t.width=Math.max(r,t.width),t},t.prototype.checkLegendClick=function(t){var e=this.listeners.legendItemClick,r=this.ctx,n=r.dataService,o=r.highlightManager,i=this.item.toggleSeriesVisible,a=t.offsetX,s=t.offsetY,l=this.computeBBox(),u=this.group.visible&&l.containsPoint(a,s),c=this.getDatumForPoint(a,s);if(u&&c){var p=c.id,d=c.itemId,h=c.enabled,f=n.getSeries().find((function(t){return t.id===p}));if(f){t.consume();var v=h;i&&(v=!h,this.ctx.chartEventManager.legendItemClick(f,d,v,c.legendItemName)),v?o.updateHighlight(this.id,{series:f,itemId:d,datum:void 0}):o.updateHighlight(this.id),this.ctx.updateService.update(Td.PROCESS_DATA,{forceNodeDataRefresh:!0}),null==e||e({type:"click",enabled:v,itemId:d,seriesId:f.id})}}},t.prototype.checkLegendDoubleClick=function(t){var e,r=this.listeners.legendItemDoubleClick,n=this.ctx.dataService,o=this.item.toggleSeriesVisible,i=t.offsetX,a=t.offsetY;if("integrated"!==this.ctx.mode){var s=this.computeBBox(),l=this.group.visible&&s.containsPoint(i,a),u=this.getDatumForPoint(i,a);if(l&&u){var c=u.id,p=u.itemId,d=u.seriesId,h=n.getSeries(),f=h.find((function(t){return t.id===c}));if(f){if(t.consume(),o){var v=h.reduce((function(t,e){return Ph(Ph([],Th(t)),Th(e.getLegendData().filter((function(t){return"category"===t.legendType}))))}),[]),y={};v.forEach((function(t){var e,r;null!==(e=y[r=t.seriesId])&&void 0!==e||(y[r]=0),t.enabled&&y[t.seriesId]++}));var g=v.find((function(t){return t.itemId===p&&t.seriesId===d}));this.ctx.chartEventManager.legendItemDoubleClick(f,p,null!==(e=null==g?void 0:g.enabled)&&void 0!==e&&e,y,null==g?void 0:g.legendItemName)}this.ctx.updateService.update(Td.PROCESS_DATA,{forceNodeDataRefresh:!0}),null==r||r({type:"dblclick",enabled:!0,itemId:p,seriesId:f.id})}}}},t.prototype.handleLegendMouseMove=function(t){var e,r=this.enabled,n=this.item.toggleSeriesVisible,o=this.listeners;if(r){var i=this.computeBBox(),a=t.pageX,s=t.pageY,l=t.offsetX,u=t.offsetY,c=this.group.visible&&i.containsPoint(l,u);if(!c)return this.ctx.cursorManager.updateCursor(this.id),this.ctx.highlightManager.updateHighlight(this.id),void this.ctx.tooltipManager.removeTooltip(this.id);t.consume();var p=this.getDatumForPoint(l,u);if(!(c&&void 0!==p))return this.ctx.cursorManager.updateCursor(this.id),void this.ctx.highlightManager.updateHighlight(this.id);var d=p?this.ctx.dataService.getSeries().find((function(t){return t.id===(null==p?void 0:p.id)})):void 0;if(p&&this.truncatedItems.has(null!==(e=p.itemId)&&void 0!==e?e:p.id)){var h=this.getItemLabel(p);this.ctx.tooltipManager.updateTooltip(this.id,{pageX:a,pageY:s,offsetX:l,offsetY:u,event:t,showArrow:!1},fc({content:h}))}else this.ctx.tooltipManager.removeTooltip(this.id);(n||null!=o.legendItemClick||null!=o.legendItemDoubleClick)&&this.ctx.cursorManager.updateCursor(this.id,"pointer"),(null==p?void 0:p.enabled)&&d?this.ctx.highlightManager.updateHighlight(this.id,{series:d,itemId:null==p?void 0:p.itemId,datum:void 0}):this.ctx.highlightManager.updateHighlight(this.id)}},t.prototype.positionLegend=function(t){var e=this,r=t.clone();if(!this.enabled||!this.data.length)return{shrinkRect:r};var n=Th(this.calculateLegendDimensions(t),2),o=n[0],i=n[1];this.group.translationX=0,this.group.translationY=0,this.performLayout(o,i);var a=this.computePagedBBox(),s=function(){switch(e.position){case"top":return 0;case"bottom":return t.height-a.height;case"left":return 0;case"right":default:return t.width-a.width}};if(this.visible){var l=void 0,u=void 0;switch(this.position){case"top":case"bottom":l=(t.width-a.width)/2,u=s(),r.shrink(a.height,this.position);break;case"left":case"right":default:l=s(),u=(t.height-a.height)/2,r.shrink(a.width,this.position)}this.group.translationX=Math.floor(-a.x+t.x+l),this.group.translationY=Math.floor(-a.y+t.y+u)}if(this.visible&&this.enabled&&this.data.length){var c=this.spacing;r.shrink(c,this.position);var p=a.clone();p.x+=this.group.translationX,p.y+=this.group.translationY,this.ctx.tooltipManager.updateExclusiveRect(this.id,p)}else this.ctx.tooltipManager.updateExclusiveRect(this.id);return{shrinkRect:r}},t.prototype.calculateLegendDimensions=function(t){var e=t.width,r=t.height,n=e/r,o=0,i=0;switch(this.position){case"top":case"bottom":var a=n<1?Math.min(.5,1/n*.2):.2;o=this.maxWidth?Math.min(this.maxWidth,e):e,i=this.maxHeight?Math.min(this.maxHeight,r):Math.round(r*a);break;case"left":case"right":default:var s=n>1?Math.min(.5,.25*n):.25;o=this.maxWidth?Math.min(this.maxWidth,e):Math.round(e*s),i=this.maxHeight?Math.min(this.maxHeight,r):r}return[o,i]},t.className="Legend",Eh([nu(fu)],t.prototype,"_enabled",void 0),Eh([nu(qu)],t.prototype,"position",void 0),Eh([nu(Du(0))],t.prototype,"maxWidth",void 0),Eh([nu(Du(0))],t.prototype,"maxHeight",void 0),Eh([nu(vu)],t.prototype,"reverseOrder",void 0),Eh([nu(Mh)],t.prototype,"orientation",void 0),Eh([nu(Pu(0))],t.prototype,"spacing",void 0),t}()};function Lh(t,e){if(Ih[t])throw new Error("AG Charts - already registered legend type: "+t);Ih[t]=e}var Nh=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},Gh=function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t},jh=function(){function t(){this.cache=new Map}return t.prototype.call=function(t){for(var e,r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var o=this.cache.get(t),i=function(){try{var n=t.apply(void 0,Gh([],Nh(r)));return o&&null!=e&&o.set(e,n),n}catch(t){return void sl.warnOnce("User callback errored, ignoring",t)}};try{e=JSON.stringify(r)}catch(t){return i()}return null==o&&(o=new Map,this.cache.set(t,o)),o.has(e)?o.get(e):i()},t.prototype.invalidateCache=function(){this.cache=new Map},t}(),Vh=function(){return(Vh=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},Bh=function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{l(n.next(t))}catch(t){i(t)}}function s(t){try{l(n.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}l((n=n.apply(t,e||[])).next())}))},Uh=function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Hh=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},zh=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},Wh=function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t},Kh=function(){function t(){this.requested=[],this.status="setup"}return t.prototype.request=function(t,e,r){return Bh(this,void 0,void 0,(function(){var n=this;return Uh(this,(function(o){if("setup"!==this.status)throw new Error("AG Charts - data request after data setup phase.");return[2,new Promise((function(o,i){n.requested.push({id:t,opts:r,data:e,resultCb:o,reject:i})}))]}))}))},t.prototype.execute=function(){return Bh(this,void 0,void 0,(function(){var e,r,n,o,i,a,s,l,u,c,p,d,h;return Uh(this,(function(f){if("setup"!==this.status)throw new Error("AG Charts - data request after data setup phase.");this.status="executed",t.DEBUG()&&sl.debug("DataController.execute() - requested",this.requested),e=this.mergeRequested(),t.DEBUG()&&sl.debug("DataController.execute() - merged",e),r=function(t,e,r,o,i){try{var a=new cc(t),s=a.processData(e);s&&0===s.partialValidDataCount?r.forEach((function(t){return t({dataModel:a,processedData:s})})):s?n.splitResult(a,s,i,r):o.forEach((function(t){return t(new Error("AG Charts - no processed data generated"))}))}catch(t){o.forEach((function(e){return e(t)}))}},n=this;try{for(o=Hh(e),i=o.next();!i.done;i=o.next())a=i.value,s=a.opts,l=a.data,u=a.resultCbs,c=a.rejects,p=a.ids,r(s,l,u,c,p)}catch(t){d={error:t}}finally{try{i&&!i.done&&(h=o.return)&&h.call(o)}finally{if(d)throw d.error}}return[2]}))}))},t.prototype.mergeRequested=function(){var t,e,r=[],n=function(t){return t.filter((function(t){return"key"===t.type})).map((function(t){return t.property})).join(";")},o=function(t){var e=t.opts,r=t.data;return function(t){return t[0].data===r&&t[0].opts.groupByKeys===e.groupByKeys&&t[0].opts.dataVisible===e.dataVisible&&t[0].opts.groupByFn===e.groupByFn&&n(t[0].opts.props)===n(e.props)}},i=function(t){return function(e){var r;if(e.type!==t.type)return!1;if(e.id!==t.id)return!1;var n=null!==(r=Pp(e,t))&&void 0!==r?r:{};return delete n.scopes,0===Object.keys(n).length}},a=function(t){return Vh(Vh({},t[0]),{props:t.reduce((function(t,e){var r,n,o,a,s,l;try{for(var u=Hh(e.props),c=u.next();!c.done;c=u.next()){var p=c.value,d=t.find(i(p));d?(null!==(a=d.scopes)&&void 0!==a||(d.scopes=[]),(o=d.scopes).push.apply(o,Wh(Wh([],zh(null!==(s=p.scopes)&&void 0!==s?s:[])),zh(null!==(l=e.scopes)&&void 0!==l?l:[])))):t.push(p)}}catch(t){r={error:t}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}return t}),[])})};try{for(var s=Hh(this.requested),l=s.next();!l.done;l=s.next()){var u=l.value,c=r.find(o(u));c?c.push(u):r.push([u])}}catch(e){t={error:e}}finally{try{l&&!l.done&&(e=s.return)&&e.call(s)}finally{if(t)throw t.error}}return r.map((function(t){return{ids:t.map((function(t){return t.id})),resultCbs:t.map((function(t){return t.resultCb})),rejects:t.map((function(t){return t.reject})),data:t[0].data,opts:a(t.map((function(t){return t.opts})))}}))},t.prototype.splitResult=function(t,e,r,n){for(var o=function(o){var i=r[o];(0,n[o])({dataModel:t,processedData:Vh(Vh({},e),{data:e.data.filter((function(t){var e=t.validScopes;return null==e||e.some((function(t){return t===i}))}))})})},i=0;i<r.length;i++)o(i)},t.DEBUG=function(){var t;return null!==(t=[!0,"data-model"].includes(yl("agChartsDebug")))&&void 0!==t&&t},t}(),Xh=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},Yh=function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t},qh=function(){function t(){this.groups={}}return t.prototype.registerSeries=function(t){var e,r,n=t.id,o=t.seriesGrouping,i=t.visible,a=t.type;o&&(null!==(e=(r=this.groups)[a])&&void 0!==e||(r[a]={}),this.groups[a][n]={grouping:o,visible:i})},t.prototype.deregisterSeries=function(t){var e=t.id,r=t.type;this.groups[r]&&delete this.groups[r][e],this.groups[r]&&0===Object.keys(this.groups[r]).length&&delete this.groups[r]},t.prototype.getVisiblePeerGroupIndex=function(t){var e,r=t.type,n=t.seriesGrouping;if(!n)return{visibleGroupCount:1,index:0};var o=Yh([],Xh(Object.entries(null!==(e=this.groups[r])&&void 0!==e?e:{}).filter((function(t){var e=Xh(t,2);return e[0],e[1].visible})).reduce((function(t,e){var r=Xh(e,2);r[0];var n=r[1];return n.visible&&t.add(n.grouping.groupIndex),t}),new Set).values()));return o.sort((function(t,e){return t-e})),{visibleGroupCount:o.length,index:o.indexOf(n.groupIndex)}},t}(),Zh=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Jh=function(){function t(t){this.groups={},this.series={},this.rootGroup=t}return t.prototype.requestGroup=function(t){var e,r,n,o,i=t.id,a=t.type,s=t.rootGroup,l=t.seriesGrouping,u=(null!=l?l:{}).groupIndex,c=void 0===u?i:u;if(null!=this.series[i])throw new Error("AG Charts - series already has an allocated layer: "+this.series[i]);null!==(e=(n=this.groups)[a])&&void 0!==e||(n[a]={});var p=this.groups[a][c];return p||(p=null!==(r=(o=this.groups[a])[c])&&void 0!==r?r:o[c]={seriesIds:[],group:this.rootGroup.appendChild(new fl({name:a+"-content",layer:!0,zIndex:Ku.SERIES_LAYER_ZINDEX,zIndexSubOrder:t.getGroupZIndexSubOrder("data")}))}),this.series[i]={layerState:p,seriesConfig:t},p.seriesIds.push(i),p.group.appendChild(s),p.group},t.prototype.changeGroup=function(t){var e,r,n=t.id,o=t.seriesGrouping,i=t.type,a=t.rootGroup,s=t.oldGrouping,l=(null!=o?o:{}).groupIndex,u=void 0===l?n:l;(null===(r=null===(e=this.groups[i])||void 0===e?void 0:e[u])||void 0===r?void 0:r.seriesIds.includes(n))||(null!=this.series[n]&&this.releaseGroup({id:n,seriesGrouping:s,type:i,rootGroup:a}),this.requestGroup(t))},t.prototype.releaseGroup=function(t){var e,r,n,o,i,a=t.id,s=t.seriesGrouping,l=t.rootGroup,u=t.type,c=(null!=s?s:{}).groupIndex,p=void 0===c?a:c;if(null==this.series[a])throw new Error("AG Charts - series doesn't have an allocated layer: "+a);var d=null!==(r=null===(e=this.groups[u])||void 0===e?void 0:e[p])&&void 0!==r?r:null===(n=this.series[a])||void 0===n?void 0:n.layerState;if(d&&(d.seriesIds=d.seriesIds.filter((function(t){return t!==a})),d.group.removeChild(l)),0===(null==d?void 0:d.seriesIds.length))this.rootGroup.removeChild(d.group),delete this.groups[u][p],delete this.groups[u][a];else if((null==d?void 0:d.seriesIds.length)>0){var h=null===(i=this.series[null===(o=null==d?void 0:d.seriesIds)||void 0===o?void 0:o[0]])||void 0===i?void 0:i.seriesConfig;d.group.zIndexSubOrder=null==h?void 0:h.getGroupZIndexSubOrder("data")}delete this.series[a]},t.prototype.destroy=function(){var t,e,r,n;try{for(var o=Zh(Object.values(this.groups)),i=o.next();!i.done;i=o.next()){var a=i.value;try{for(var s=(r=void 0,Zh(Object.values(a))),l=s.next();!l.done;l=s.next()){var u=l.value;this.rootGroup.removeChild(u.group)}}catch(t){r={error:t}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}}}catch(e){t={error:e}}finally{try{i&&!i.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}this.groups={},this.series={}},t}(),$h=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Qh=function(){return(Qh=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},tf=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},ef=function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{l(n.next(t))}catch(t){i(t)}}function s(t){try{l(n.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}l((n=n.apply(t,e||[])).next())}))},rf=function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},nf=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},of=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},af=function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t},sf=function(t){function e(e,r,n){var o;void 0===e&&(e=window.document);var i=t.call(this)||this;i.id=Us(i),i.processedOptions={},i.userOptions={},i.queuedUserOptions=[],i.seriesRoot=new fl({name:i.id+"-Series-root"}),i.extraDebugStats={},i.container=void 0,i.data=[],i.padding=new pp(20),i.seriesAreaPadding=new pp(0),i.title=void 0,i.subtitle=void 0,i.footnote=void 0,i.mode="standalone",i._destroyed=!1,i.modules={},i.legendModules={},i._pendingFactoryUpdates=[],i._performUpdateNoRenderCount=0,i._performUpdateType=Td.NONE,i.seriesToUpdate=new Set,i.performUpdateTrigger=mp((function(t,e){return void 0===e&&(e=0),setTimeout(t,e)}),(function(t){var e=t.count;return ef(i,void 0,void 0,(function(){var t;return rf(this,(function(r){switch(r.label){case 0:if(this._destroyed)return[2];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.performUpdate(e)];case 2:return r.sent(),[3,4];case 3:return t=r.sent(),this._lastPerformUpdateError=t,sl.error("update error",t),[3,4];case 4:return[2]}}))}))})),i._axes=[],i._series=[],i.applyLegendOptions=void 0,i.lastInteractionEvent=void 0,i.pointerScheduler=function(t){return mp((function(t,e){return requestAnimationFrame(t)}),t)}((function(){i.lastInteractionEvent&&i.handlePointer(i.lastInteractionEvent),i.lastInteractionEvent=void 0})),i.onSeriesNodeClick=function(t){var e=Qh(Qh({},t),{type:"seriesNodeClick"});Object.defineProperty(e,"series",{enumerable:!1,get:function(){return t.series}}),i.fireEvent(e)},i.onSeriesNodeDoubleClick=function(t){var e=Qh(Qh({},t),{type:"seriesNodeDoubleClick"});i.fireEvent(e)};var a=null==n?void 0:n.scene,s=null!==(o=null==n?void 0:n.element)&&void 0!==o?o:e.createElement("div"),l=null==n?void 0:n.container,u=new fl({name:"root"});return u.visible=!1,u.append(i.seriesRoot),i.axisGroup=new fl({name:"Axes",layer:!0,zIndex:Ku.AXIS_ZINDEX}),u.appendChild(i.axisGroup),i.element=s,s.classList.add("ag-chart-wrapper"),s.style.position="relative",i.scene=null!=a?a:new xl({document:e,overrideDevicePixelRatio:r}),i.scene.debug.consoleLog=!1,i.scene.root=u,i.scene.container=s,i.autoSize=!0,i.chartEventManager=new od,i.cursorManager=new rd(s),i.highlightManager=new sd,i.interactionManager=new vd(s),i.zoomManager=new xd,i.dataService=new Dd((function(){return i.series})),i.layoutService=new Pd,i.updateService=new Ad((function(t,e){void 0===t&&(t=Td.FULL);var r=e.forceNodeDataRefresh;return i.update(t,{forceNodeDataRefresh:r})})),i.seriesStateManager=new qh,i.seriesLayerManager=new Jh(i.seriesRoot),i.callbackCache=new jh,i.animationManager=new td(i.interactionManager),i.animationManager.skipAnimations=!0,i.animationManager.play(),i.tooltip=new mc(i.scene.canvas.element,e,e.body),i.tooltipManager=new md(i.tooltip,i.interactionManager),i.overlays=new wp(i.element),i.highlight=new _d,i.container=l,i.debug=!1,hp.observe(i.element,(function(t){var e,r=t.width,n=t.height;if(i.autoSize&&(0!==r||0!==n)){var o=nf(null!==(e=i._lastAutoSize)&&void 0!==e?e:[],2),a=o[0],s=void 0===a?0:a,l=o[1];s===r&&(void 0===l?0:l)===n||(i._lastAutoSize=[r,n],i.resize())}})),i.layoutService.addListener("start-layout",(function(t){return i.positionPadding(t.shrinkRect)})),i.layoutService.addListener("start-layout",(function(t){return i.positionCaptions(t.shrinkRect)})),i.interactionManager.addListener("click",(function(t){return i.onClick(t)})),i.interactionManager.addListener("dblclick",(function(t){return i.onDoubleClick(t)})),i.interactionManager.addListener("hover",(function(t){return i.onMouseMove(t)})),i.interactionManager.addListener("leave",(function(t){return i.onLeave(t)})),i.interactionManager.addListener("page-left",(function(){return i.destroy()})),i.interactionManager.addListener("wheel",(function(){return i.disablePointer()})),i.animationManager.addListener("animation-frame",(function(t){i.update(Td.SCENE_RENDER)})),i.highlightManager.addListener("highlight-change",(function(t){return i.changeHighlightDatum(t)})),i.zoomManager.addListener("zoom-change",(function(t){return i.update(Td.PROCESS_DATA,{forceNodeDataRefresh:!0})})),i.attachLegend("category"),i}return $h(e,t),e.prototype.getOptions=function(){var t,e=this.queuedUserOptions;return Mp([null!==(t=e[e.length-1])&&void 0!==t?t:this.userOptions])},e.prototype.autoSizeChanged=function(t){var e=this.element.style;if(t){if(e.display="block",e.width="100%",e.height="100%",!this._lastAutoSize)return;this.resize()}else e.display="inline-block",e.width="auto",e.height="auto"},e.prototype.download=function(t,e){this.scene.download(t,e)},Object.defineProperty(e.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!1,configurable:!0}),e.prototype.addModule=function(t){if(null!=this.modules[t.optionsKey])throw new Error("AG Charts - module already initialised: "+t.optionsKey);var e=new t.instanceConstructor(this.getModuleContext());this.modules[t.optionsKey]={instance:e},this[t.optionsKey]=e},e.prototype.removeModule=function(t){var e,r;null===(r=null===(e=this.modules[t.optionsKey])||void 0===e?void 0:e.instance)||void 0===r||r.destroy(),delete this.modules[t.optionsKey],delete this[t.optionsKey]},e.prototype.isModuleEnabled=function(t){return null!=this.modules[t.optionsKey]},e.prototype.getModuleContext=function(){var t=this,e=t.scene,r=t.animationManager,n=t.chartEventManager,o=t.cursorManager,i=t.highlightManager,a=t.interactionManager,s=t.tooltipManager,l=t.zoomManager,u=t.dataService,c=t.layoutService,p=t.updateService,d=t.seriesStateManager,h=t.seriesLayerManager;return{scene:e,animationManager:r,chartEventManager:n,cursorManager:o,highlightManager:i,interactionManager:a,tooltipManager:s,zoomManager:l,dataService:u,layoutService:c,updateService:p,mode:t.mode,seriesStateManager:d,seriesLayerManager:h,callbackCache:t.callbackCache}},e.prototype.destroy=function(t){var e,r,n;if(!this._destroyed){var o=null==t?void 0:t.keepTransferableResources,i=void 0;this._performUpdateType=Td.NONE,this._pendingFactoryUpdates.splice(0),this.tooltipManager.destroy(),this.tooltip.destroy(),null===(n=this.legend)||void 0===n||n.destroy(),this.overlays.noData.hide(),hp.unobserve(this.element);try{for(var a=of(Object.entries(this.modules)),s=a.next();!s.done;s=a.next()){var l=nf(s.value,2),u=l[0];l[1].instance.destroy(),delete this.modules[u],delete this[u]}}catch(t){e={error:t}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}return this.interactionManager.destroy(),this.animationManager.stop(),o?(this.scene.strip(),i={container:this.container,scene:this.scene,element:this.element}):(this.scene.destroy(),this.container=void 0),this.removeAllSeries(),this.seriesLayerManager.destroy(),this.axes.forEach((function(t){return t.destroy()})),this.axes=[],this.callbackCache.invalidateCache(),this._destroyed=!0,i}},e.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.debug&&sl.debug.apply(sl,af([],nf(t)))},e.prototype.disablePointer=function(t){void 0===t&&(t=!1),t||this.tooltipManager.removeTooltip(this.id),this.highlightManager.updateHighlight(this.id),this.lastInteractionEvent&&(this.lastInteractionEvent=void 0)},e.prototype.requestFactoryUpdate=function(t){var e=this._pendingFactoryUpdates,r=e.length;0===r?(e.push(t),this._processCallbacks().catch((function(t){return sl.errorOnce(t)}))):e.splice(1,r-1,t)},e.prototype._processCallbacks=function(){return ef(this,void 0,void 0,(function(){var t,e;return rf(this,(function(r){switch(r.label){case 0:t=this._pendingFactoryUpdates,r.label=1;case 1:return t.length>0?this.updatePending?[4,bp(1)]:[3,3]:[3,7];case 2:return r.sent(),[3,1];case 3:return r.trys.push([3,5,,6]),[4,t[0]()];case 4:return r.sent(),this.callbackCache.invalidateCache(),[3,6];case 5:return e=r.sent(),sl.error("update error",e),[3,6];case 6:return t.shift(),[3,1];case 7:return[2]}}))}))},Object.defineProperty(e.prototype,"performUpdateType",{get:function(){return this._performUpdateType},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"updatePending",{get:function(){return this._performUpdateType!==Td.NONE||null!=this.lastInteractionEvent},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastPerformUpdateError",{get:function(){return this._lastPerformUpdateError},enumerable:!1,configurable:!0}),e.prototype.awaitUpdateCompletion=function(){return ef(this,void 0,void 0,(function(){return rf(this,(function(t){switch(t.label){case 0:return[4,this.performUpdateTrigger.await()];case 1:return t.sent(),[2]}}))}))},e.prototype.update=function(t,e){var r,n;void 0===t&&(t=Td.FULL);var o=null!=e?e:{},i=o.forceNodeDataRefresh,a=void 0!==i&&i,s=o.seriesToUpdate,l=void 0===s?this.series:s;a&&this.series.forEach((function(t){return t.markNodeDataDirty()}));try{for(var u=of(l),c=u.next();!c.done;c=u.next()){var p=c.value;this.seriesToUpdate.add(p)}}catch(t){r={error:t}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}t<this._performUpdateType&&(this._performUpdateType=t,this.performUpdateTrigger.schedule())},e.prototype.performUpdate=function(t){var e;return ef(this,void 0,void 0,(function(){var r,n,o,i,a,s,l,u;return rf(this,(function(c){switch(c.label){case 0:switch(n=(r=this)._performUpdateType,o=r.extraDebugStats,this.log("Chart.performUpdate() - start",Td[n]),i=[performance.now()],n){case Td.FULL:case Td.PROCESS_DATA:return[3,1];case Td.PERFORM_LAYOUT:return[3,3];case Td.SERIES_UPDATE:return[3,5];case Td.TOOLTIP_RECALCULATION:return[3,7];case Td.SCENE_RENDER:return[3,8];case Td.NONE:return[3,10]}return[3,11];case 1:return[4,this.processData()];case 2:c.sent(),this.disablePointer(!0),i.push(performance.now()),c.label=3;case 3:return this.checkFirstAutoSize()?[4,this.performLayout()]:[3,11];case 4:c.sent(),this.handleOverlays(),this.log("Chart.performUpdate() - seriesRect",this.seriesRect),i.push(performance.now()),c.label=5;case 5:return a=this.seriesRect,s=af([],nf(this.seriesToUpdate)).map((function(t){return t.update({seriesRect:a})})),this.seriesToUpdate.clear(),[4,Promise.all(s)];case 6:c.sent(),i.push(performance.now()),c.label=7;case 7:l=this.tooltipManager.getTooltipMeta(this.id),n<Td.SERIES_UPDATE&&"hover"===(null===(e=null==l?void 0:l.event)||void 0===e?void 0:e.type)&&this.handlePointer(l.event),c.label=8;case 8:return[4,this.scene.render({debugSplitTimes:i,extraDebugStats:o})];case 9:c.sent(),this.extraDebugStats={},c.label=10;case 10:this._performUpdateType=Td.NONE,c.label=11;case 11:return u=performance.now(),this.log("Chart.performUpdate() - end",{chart:this,durationMs:Math.round(100*(u-i[0]))/100,count:t,performUpdateType:Td[n]}),[2]}}))}))},e.prototype.checkFirstAutoSize=function(){if(this.autoSize&&!this._lastAutoSize){var t=this._performUpdateNoRenderCount++,e=10*(2^t);if(t<5)return this._performUpdateType=Td.PERFORM_LAYOUT,this.performUpdateTrigger.schedule(e),this.log("Chart.checkFirstAutoSize() - backing off until first size update",e),!1;this.log("Chart.checkFirstAutoSize() - timeout for first size update.")}return this._performUpdateNoRenderCount=0,!0},Object.defineProperty(e.prototype,"axes",{get:function(){return this._axes},set:function(t){var e=this,r=new Set;this._axes.forEach((function(t){t.detachAxis(e.axisGroup),r.add(t)})),this._axes=t.filter((function(t){return!t.linkedTo})).concat(t.filter((function(t){return t.linkedTo}))),this._axes.forEach((function(t){t.attachAxis(e.axisGroup),r.delete(t)})),this.zoomManager.updateAxes(this._axes),r.forEach((function(t){return t.destroy()}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"series",{get:function(){return this._series},set:function(t){var e=this;this.removeAllSeries(),t.forEach((function(t){return e.addSeries(t)}))},enumerable:!1,configurable:!0}),e.prototype.addSeries=function(t){var e=this.series;return!!(e.indexOf(t)<0)&&(e.push(t),null==t.rootGroup.parent&&this.seriesLayerManager.requestGroup(t),this.initSeries(t),!0)},e.prototype.initSeries=function(t){t.chart=this,t.data||(t.data=this.data),this.addSeriesListeners(t),t.addChartEventListeners()},e.prototype.removeAllSeries=function(){var t=this;this.series.forEach((function(e){e.removeEventListener("nodeClick",t.onSeriesNodeClick),e.removeEventListener("nodeDoubleClick",t.onSeriesNodeDoubleClick),e.destroy(),e.chart=void 0})),this._series=[]},e.prototype.addSeriesListeners=function(t){this.hasEventListener("seriesNodeClick")&&t.addEventListener("nodeClick",this.onSeriesNodeClick),this.hasEventListener("seriesNodeDoubleClick")&&t.addEventListener("nodeDoubleClick",this.onSeriesNodeDoubleClick)},e.prototype.updateAllSeriesListeners=function(){var t=this;this.series.forEach((function(e){e.removeEventListener("nodeClick",t.onSeriesNodeClick),e.removeEventListener("nodeDoubleClick",t.onSeriesNodeDoubleClick),t.addSeriesListeners(e)}))},e.prototype.assignSeriesToAxes=function(){var t=this;this.axes.forEach((function(e){e.boundSeries=t.series.filter((function(t){return t.axes[e.direction]===e}))}))},e.prototype.assignAxesToSeries=function(){var t=this,e={};this.axes.forEach((function(t){var r,n=t.direction;(null!==(r=e[n])&&void 0!==r?r:e[n]=[]).push(t)})),this.series.forEach((function(r){r.directions.forEach((function(n){var o=e[n];if(o){var i=r.getKeys(n),a=t.findMatchingAxis(o,r.getKeys(n));a?r.axes[n]=a:sl.warn("no matching axis for direction ["+n+"] and keys ["+i+"]; check series and axes configuration.")}else sl.warn("no available axis for direction ["+n+"]; check series and axes configuration.")}))}))},e.prototype.findMatchingAxis=function(t,e){var r,n,o,i;try{for(var a=of(t),s=a.next();!s.done;s=a.next()){var l=s.value,u=l.keys;if(!u.length)return l;if(e)try{for(var c=(o=void 0,of(e)),p=c.next();!p.done;p=c.next()){var d=p.value;if(u.indexOf(d)>=0)return l}}catch(t){o={error:t}}finally{try{p&&!p.done&&(i=c.return)&&i.call(c)}finally{if(o)throw o.error}}}}catch(t){r={error:t}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}},e.prototype.resize=function(t,e){var r,n,o,i;null!=t||(t=null!==(r=this.width)&&void 0!==r?r:this.autoSize?null===(n=this._lastAutoSize)||void 0===n?void 0:n[0]:this.scene.canvas.width),null!=e||(e=null!==(o=this.height)&&void 0!==o?o:this.autoSize?null===(i=this._lastAutoSize)||void 0===i?void 0:i[1]:this.scene.canvas.height),this.log("Chart.resize()",{width:t,height:e}),t&&e&&Number.isFinite(t)&&Number.isFinite(e)&&this.scene.resize(t,e)&&(this.disablePointer(),this.update(Td.PERFORM_LAYOUT,{forceNodeDataRefresh:!0}))},e.prototype.processData=function(){return ef(this,void 0,void 0,(function(){var t,e;return rf(this,(function(r){switch(r.label){case 0:return this.axes.length>0&&(this.assignAxesToSeries(),this.assignSeriesToAxes()),t=new Kh,e=this.series.map((function(e){return e.processData(t)})),[4,t.execute()];case 1:return r.sent(),[4,Promise.all(e)];case 2:return r.sent(),[4,this.updateLegend()];case 3:return r.sent(),[2]}}))}))},e.prototype.placeLabels=function(){var t,e,r,n=[],o=[];try{for(var i=of(this.series),a=i.next();!a.done;a=i.next()){var s=a.value;if(s.visible){var l=s.getLabelData();l&&(null!=(r=l[0])&&"object"==typeof r.point&&"object"==typeof r.label)&&(o.push(l),n.push(s))}}}catch(e){t={error:e}}finally{try{a&&!a.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}var u=this.seriesRect,c=u&&o.length>0?function(t,e,r){void 0===r&&(r=5);var n=[];t=t.map((function(t){return t.slice().sort((function(t,e){return e.point.size-t.point.size}))}));for(var o=0;o<t.length;o++){var i=n[o]=[],a=t[o];if((null==a?void 0:a.length)&&a[0].label)for(var s=function(o,s){var l,u,c,p,d=a[o],h=d.label,f=.5*d.point.size,v=d.point.x-.5*h.width,y=d.point.y-f-h.height-r,g=h.width,m=h.height;return!e||(c=y,p=m,(u=v)+g<(l=e).x+l.width&&u>l.x&&c>l.y&&c+p<l.y+l.height)?t.some((function(t){return t.some((function(t){return fp(t.point,v,y,g,m)}))}))||n.some((function(t){return t.some((function(t){return vp(t,v,y,g,m)}))}))?"continue":void i.push({index:o,text:h.text,x:v,y:y,width:g,height:m,datum:d}):"continue"},l=0,u=a.length;l<u;l++)s(l)}return n}(o,{x:0,y:0,width:u.width,height:u.height}):[];return new Map(c.map((function(t,e){return[n[e],t]})))},e.prototype.attachLegend=function(t){var e;if(this.legendType===t&&this.legend)return this.legend;null===(e=this.legend)||void 0===e||e.destroy(),this.legend=void 0;var r=function(t,e){if(Ih[t])return new Ih[t](e);throw new Error("AG Charts - unknown legend type: "+t)}(t,this.getModuleContext());return r.attachLegend(this.scene.root),this.legend=r,this.legendType=t,r},e.prototype.setLegendInit=function(t){this.applyLegendOptions=t},e.prototype.updateLegend=function(){var t;return ef(this,void 0,void 0,(function(){var e,r,n;return rf(this,(function(o){return e=[],this.series.filter((function(t){return t.showInLegend})).forEach((function(t){var r=t.getLegendData();e.push.apply(e,af([],nf(r)))})),r=e.length>0?e[0].legendType:"category",n=this.attachLegend(r),null===(t=this.applyLegendOptions)||void 0===t||t.call(this,n),"category"===r&&this.validateLegendData(e),n.data=e,[2]}))}))},e.prototype.validateLegendData=function(t){var e=this,r={};t.forEach((function(t){var n,o,i,a,s,l,u=null===(o=e.series.find((function(e){return e.id===t.seriesId})))||void 0===o?void 0:o.type;if(u){var c=t;null!==(i=r[u])&&void 0!==i||(r[u]=((n={})[c.label.text]=new Set,n)),null!==(a=(s=r[u])[l=c.label.text])&&void 0!==a||(s[l]=new Set),null!=c.marker.fill&&r[u][c.label.text].add(c.marker.fill)}})),Object.keys(r).forEach((function(t){Object.keys(r[t]).forEach((function(e){r[t][e].size>1&&sl.warnOnce("legend item '"+e+"' has multiple fill colors, this may cause unexpected behaviour.")}))}))},e.prototype.performLayout=function(){return ef(this,void 0,void 0,(function(){var t,e,r,n;return rf(this,(function(o){return null!=this.scene.root&&(this.scene.root.visible=!0),t=this.scene,e=t.width,r=t.height,n=new Ns(0,0,e,r),n=this.layoutService.dispatchPerformLayout("start-layout",{shrinkRect:n}).shrinkRect,[2,n=this.layoutService.dispatchPerformLayout("before-series",{shrinkRect:n}).shrinkRect]}))}))},e.prototype.positionPadding=function(t){var e=this.padding;return t.shrink(e.left,"left"),t.shrink(e.top,"top"),t.shrink(e.right,"right"),t.shrink(e.bottom,"bottom"),{shrinkRect:t}},e.prototype.positionCaptions=function(t){var e,r=this.title,n=this.subtitle,o=this.footnote,i=t.clone(),a=function(e){var r,n=t.height/10,o=null!==(r=e.lineHeight)&&void 0!==r?r:e.fontSize*Gl.defaultLineHeightRatio,i=t.width,a=Math.max(o,n);e.computeTextWrap(i,a)},s=function(t){var e,r=i.y;t.node.x=i.x+i.width/2,t.node.y=r,t.node.textBaseline="top",a(t);var n=t.node.computeBBox(),o=Math.ceil(n.y-r+n.height+(null!==(e=t.spacing)&&void 0!==e?e:0));i.shrink(o,"top")};return r&&(r.node.visible=r.enabled,r.node.visible&&s(r)),n&&(n.node.visible=null!==(e=(null==r?void 0:r.enabled)&&n.enabled)&&void 0!==e&&e,n.node.visible&&s(n)),o&&(o.node.visible=o.enabled,o.node.visible&&function(t){var e,r=i.y+i.height;t.node.x=i.x+i.width/2,t.node.y=r,t.node.textBaseline="bottom",a(t);var n=t.node.computeBBox(),o=Math.ceil(r-n.y+(null!==(e=t.spacing)&&void 0!==e?e:0));i.shrink(o,"bottom")}(o)),{shrinkRect:i}},e.prototype.getSeriesRect=function(){return this.seriesRect},e.prototype.pickSeriesNode=function(t,e,r){var n,o,i,a,s=performance.now(),l=e?[Bc.EXACT_SHAPE_MATCH]:void 0,u=af([],nf(this.series)).reverse(),c=void 0;try{for(var p=of(u),d=p.next();!d.done;d=p.next()){var h=d.value;if(h.visible&&h.rootGroup.visible){var f=null!==(i=h.pickNode(t,l))&&void 0!==i?i:{},v=f.match,y=f.distance;if(v&&null!=y&&((!c||c.distance>y)&&y<=(null!=r?r:1/0)&&(c={series:h,distance:y,datum:v}),0===y))break}}}catch(t){n={error:t}}finally{try{d&&!d.done&&(o=p.return)&&o.call(p)}finally{if(n)throw n.error}}return this.extraDebugStats.pickSeriesNode=Math.round((null!==(a=this.extraDebugStats.pickSeriesNode)&&void 0!==a?a:0)+(performance.now()-s)),c},e.prototype.onMouseMove=function(t){this.lastInteractionEvent=t,this.pointerScheduler.schedule(),this.extraDebugStats.mouseX=t.offsetX,this.extraDebugStats.mouseY=t.offsetY,this.update(Td.SCENE_RENDER)},e.prototype.onLeave=function(t){this.tooltip.pointerLeftOntoTooltip(t)||this.disablePointer()},e.prototype.handlePointer=function(t){var e=this,r=this.lastPick,n=this.hoverRect,o=t.offsetX,i=t.offsetY,a=function(t){void 0===t&&(t=!1),r&&e.disablePointer(t)};(null==n?void 0:n.containsPoint(o,i))?(this.handlePointerTooltip(t,a),this.handlePointerNode(t)):a()},e.prototype.handlePointerTooltip=function(t,e){var r,n,o,i=this.lastPick,a=this.tooltip.range,s=t.pageX,l=t.pageY,u=t.offsetX,c=t.offsetY;"number"==typeof a&&Number.isFinite(a)&&(o=a);var p=this.pickSeriesNode({x:u,y:c},"exact"===a,o);if(!p)return this.tooltipManager.updateTooltip(this.id),void("tooltip"===this.highlight.range&&e(!0));var d,h="node"===this.highlight.range||!i||i.datum!==p.datum;h?(d=p.series.getTooltipHtml(p.datum),"tooltip"===this.highlight.range&&this.highlightManager.updateHighlight(this.id,p.datum)):i&&(i.event=t.sourceEvent);var f=null!=o,v=this.tooltip.enabled&&p.series.tooltip.enabled,y="exact"===a&&0===p.distance,g=v&&("nearest"===a||f||y)&&(!h||void 0!==d),m={xOffset:p.datum.series.tooltip.position.xOffset,yOffset:p.datum.series.tooltip.position.yOffset},b=this.mergePointerDatum({pageX:s,pageY:l,offsetX:u,offsetY:c,event:t,showArrow:p.series.tooltip.showArrow,position:m},p.datum);b.enableInteraction=null!==(n=null===(r=p.series.tooltip.interaction)||void 0===r?void 0:r.enabled)&&void 0!==n&&n,g&&this.tooltipManager.updateTooltip(this.id,b,d)},e.prototype.handlePointerNode=function(t){var e=this;this.checkSeriesNodeRange(t,(function(t,r){(t.hasEventListener("nodeClick")||t.hasEventListener("nodeDoubleClick"))&&e.cursorManager.updateCursor("chart","pointer"),"node"===e.highlight.range&&e.highlightManager.updateHighlight(e.id,r)}))||(this.cursorManager.updateCursor("chart"),"node"===this.highlight.range&&this.highlightManager.updateHighlight(this.id))},e.prototype.onClick=function(t){this.checkSeriesNodeClick(t)?this.update(Td.SERIES_UPDATE):this.fireEvent({type:"click",event:t.sourceEvent})},e.prototype.onDoubleClick=function(t){this.checkSeriesNodeDoubleClick(t)?this.update(Td.SERIES_UPDATE):this.fireEvent({type:"doubleClick",event:t.sourceEvent})},e.prototype.checkSeriesNodeClick=function(t){return this.checkSeriesNodeRange(t,(function(e,r){return e.fireNodeClickEvent(t.sourceEvent,r)}))},e.prototype.checkSeriesNodeDoubleClick=function(t){return this.checkSeriesNodeRange(t,(function(e,r){return e.fireNodeDoubleClickEvent(t.sourceEvent,r)}))},e.prototype.checkSeriesNodeRange=function(t,e){var r,n=this.pickSeriesNode({x:t.offsetX,y:t.offsetY},!1),o=null==n?void 0:n.datum,i=null==o?void 0:o.series.nodeClickRange;if(o&&"nearest"===i)return e(o.series,o),!0;"number"==typeof i&&Number.isFinite(i)&&(r=i);var a=this.pickSeriesNode({x:t.offsetX,y:t.offsetY},"exact"===i,r);if(!a)return!1;var s=null!=r,l="exact"===i&&0===a.distance;return!(!s&&!l)&&(e(a.series,a.datum),!0)},e.prototype.mergePointerDatum=function(t,e){if("node"===e.series.tooltip.position.type&&e.nodeMidPoint){var r=e.nodeMidPoint,n=r.x,o=r.y,i=this.scene.canvas,a=e.series.contentGroup.inverseTransformPoint(n,o),s=i.element.getBoundingClientRect();return Qh(Qh({},t),{pageX:Math.round(s.left+window.scrollX+a.x),pageY:Math.round(s.top+window.scrollY+a.y),offsetX:Math.round(a.x),offsetY:Math.round(a.y)})}return t},e.prototype.changeHighlightDatum=function(t){var e,r,n=new Set,o=null!==(e=t.currentHighlight)&&void 0!==e?e:{},i=o.series,a=void 0===i?void 0:i,s=o.datum,l=null!==(r=t.previousHighlight)&&void 0!==r?r:{},u=l.series,c=void 0===u?void 0:u,p=l.datum;c&&n.add(c),a&&n.add(a),(null==c?void 0:c.cursor)&&p&&this.cursorManager.updateCursor(c.id),(null==a?void 0:a.cursor)&&s&&this.cursorManager.updateCursor(a.id,a.cursor),this.lastPick=t.currentHighlight?{datum:t.currentHighlight}:void 0,null==a||null==c?this.update(Td.SERIES_UPDATE):this.update(Td.SERIES_UPDATE,{seriesToUpdate:n})},e.prototype.waitForUpdate=function(t){return void 0===t&&(t=5e3),ef(this,void 0,void 0,(function(){var e;return rf(this,(function(r){switch(r.label){case 0:e=performance.now(),r.label=1;case 1:if(!(this._pendingFactoryUpdates.length>0||this.updatePending))return[3,3];if(performance.now()-e>t)throw new Error("waitForUpdate() timeout reached.");return[4,bp(5)];case 2:return r.sent(),[3,1];case 3:return[4,this.awaitUpdateCompletion()];case 4:return r.sent(),[2]}}))}))},e.prototype.handleOverlays=function(){this.handleNoDataOverlay()},e.prototype.handleNoDataOverlay=function(){var t=!this.series.some((function(t){return t.hasData()})),e=this.getSeriesRect();t&&e?this.overlays.noData.show(e):this.overlays.noData.hide()},tf([Vc({newValue:function(t){this.scene.debug.consoleLog=t,this.animationManager&&(this.animationManager.debug=t)}})],e.prototype,"debug",void 0),tf([Vc({newValue:function(t){this.destroyed||t.appendChild(this.element)},oldValue:function(t){t.removeChild(this.element)}})],e.prototype,"container",void 0),tf([Vc({newValue:function(t){var e;null===(e=this.series)||void 0===e||e.forEach((function(e){return e.data=t}))}})],e.prototype,"data",void 0),tf([Vc({newValue:function(t){this.resize(t)}})],e.prototype,"width",void 0),tf([Vc({newValue:function(t){this.resize(void 0,t)}})],e.prototype,"height",void 0),tf([Vc({changeValue:function(t){this.autoSizeChanged(t)}}),nu(fu)],e.prototype,"autoSize",void 0),tf([Vc({newValue:function(t){var e;null===(e=this.scene.root)||void 0===e||e.appendChild(t.node)},oldValue:function(t){var e;null===(e=this.scene.root)||void 0===e||e.removeChild(t.node)}})],e.prototype,"title",void 0),tf([Vc({newValue:function(t){var e;null===(e=this.scene.root)||void 0===e||e.appendChild(t.node)},oldValue:function(t){var e;null===(e=this.scene.root)||void 0===e||e.removeChild(t.node)}})],e.prototype,"subtitle",void 0),tf([Vc({newValue:function(t){var e;null===(e=this.scene.root)||void 0===e||e.appendChild(t.node)},oldValue:function(t){var e;null===(e=this.scene.root)||void 0===e||e.removeChild(t.node)}})],e.prototype,"footnote",void 0),tf([nu(ku("standalone","integrated"))],e.prototype,"mode",void 0),e}(Wl),lf=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a};function uf(t,e,r){return Math.max(e,Math.min(r,t))}var cf=function(){function t(){this.type="band",this.cache=null,this.cacheProps=["_domain","range","_paddingInner","_paddingOuter","round","interval"],this.index=new Map,this.ordinalRange=[],this._domain=[],this.range=[0,1],this._bandwidth=1,this._rawBandwidth=1,this._paddingInner=0,this._paddingOuter=0,this.round=!1}return t.prototype.didChange=function(){var t=this,e=this.cache;return!(e&&!this.cacheProps.some((function(r){return t[r]!==e[r]})))&&(this.cache={},this.cacheProps.forEach((function(e){return t.cache[e]=t[e]})),!0)},t.prototype.refresh=function(){this.didChange()&&this.update()},Object.defineProperty(t.prototype,"domain",{get:function(){return this._domain},set:function(t){var e=[];this.index=new Map;var r=this.index;t.forEach((function(t){void 0===r.get(t)&&r.set(t,e.push(t)-1)})),this._domain=e},enumerable:!1,configurable:!0}),t.prototype.ticks=function(){this.refresh();var t=this.interval,e=void 0===t?1:t,r=Math.abs(Math.round(e));return this._domain.filter((function(t,e){return e%r==0}))},t.prototype.convert=function(t){this.refresh();var e=this.index.get(t);if(void 0===e)return NaN;var r=this.ordinalRange[e];return void 0===r?NaN:r},t.prototype.invert=function(t){this.refresh();var e=this.ordinalRange.findIndex((function(e){return e===t}));return this.domain[e]},Object.defineProperty(t.prototype,"bandwidth",{get:function(){return this.refresh(),this._bandwidth},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rawBandwidth",{get:function(){return this.refresh(),this._rawBandwidth},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"padding",{get:function(){return this._paddingInner},set:function(t){t=uf(t,0,1),this._paddingInner=t,this._paddingOuter=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"paddingInner",{get:function(){return this._paddingInner},set:function(t){this._paddingInner=uf(t,0,1)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"paddingOuter",{get:function(){return this._paddingOuter},set:function(t){this._paddingOuter=uf(t,0,1)},enumerable:!1,configurable:!0}),t.prototype.update=function(){var t=this._domain.length;if(0!==t){for(var e=this.round,r=this._paddingInner,n=this._paddingOuter,o=lf(this.range,2),i=o[0],a=o[1]-i,s=a/Math.max(1,t+2*n-r),l=e?Math.floor(s):s,u=i+(a-l*(t-r))/2,c=e?Math.round(u):u,p=l*(1-r),d=e?Math.round(p):p,h=s*(1-r),f=[],v=0;v<t;v++)f.push(c+l*v);this._bandwidth=d,this._rawBandwidth=h,this.ordinalRange=f}},t}(),pf=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),df=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},hf=function(t){function e(){var e=t.call(this)||this;return e.x1=0,e.y1=0,e.x2=0,e.y2=0,e.restoreOwnStyles(),e}return pf(e,t),e.prototype.computeBBox=function(){return new Ns(this.x1,this.y1,this.x2-this.x1,this.y2-this.y1)},e.prototype.isPointInPath=function(t,e){return!1},e.prototype.render=function(e){var r,n=e.ctx,o=e.forceRender,i=e.stats;if(this.dirty!==ks.NONE||o){this.computeTransformMatrix(),this.matrix.toContext(n);var a=this.x1,s=this.y1,l=this.x2,u=this.y2;if(a===l){var c=Math.round(a)+Math.floor(this.strokeWidth)%2/2;a=c,l=c}else if(s===u){var p=Math.round(s)+Math.floor(this.strokeWidth)%2/2;s=p,u=p}n.beginPath(),n.moveTo(a,s),n.lineTo(l,u),this.fillStroke(n),null===(r=this.fillShadow)||void 0===r||r.markClean(),t.prototype.render.call(this,e)}else i&&(i.nodesSkipped+=this.nodeCount.count)},e.className="Line",e.defaultStyles=Object.assign({},kl.defaultStyles,{fill:void 0,strokeWidth:1}),df([zs({redraw:ks.MAJOR})],e.prototype,"x1",void 0),df([zs({redraw:ks.MAJOR})],e.prototype,"y1",void 0),df([zs({redraw:ks.MAJOR})],e.prototype,"x2",void 0),df([zs({redraw:ks.MAJOR})],e.prototype,"y2",void 0),e}(kl),ff=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},vf=function(){function t(){this.node=new Gl,this.enabled=!1,this.text=void 0,this.fontSize=10,this.fontFamily="sans-serif",this.spacing=t.PADDING,this.lineHeight=void 0,this.maxWidth=void 0,this.maxHeight=void 0,this.wrapping="always";var e=this.node;e.textAlign="center",e.pointerEvents=Ws.None}return t.prototype.computeTextWrap=function(t,e){var r,n,o=this.text,i=this.wrapping,a=Math.min(null!==(r=this.maxWidth)&&void 0!==r?r:1/0,t),s=null!==(n=this.maxHeight)&&void 0!==n?n:e;if(isFinite(a)||isFinite(s)){var l=Gl.wrap(null!=o?o:"",a,s,this,i);this.node.text=l}else this.node.text=o},t.PADDING=10,ff([nu(fu)],t.prototype,"enabled",void 0),ff([nu(gu),jc("node")],t.prototype,"text",void 0),ff([nu(Nu),jc("node")],t.prototype,"fontStyle",void 0),ff([nu(ju),jc("node")],t.prototype,"fontWeight",void 0),ff([nu(Pu(0)),jc("node")],t.prototype,"fontSize",void 0),ff([nu(yu),jc("node")],t.prototype,"fontFamily",void 0),ff([nu(Ou),jc("node","fill")],t.prototype,"color",void 0),ff([nu(Du(0))],t.prototype,"spacing",void 0),ff([nu(Du(0))],t.prototype,"lineHeight",void 0),ff([nu(Du(0))],t.prototype,"maxWidth",void 0),ff([nu(Du(0))],t.prototype,"maxHeight",void 0),ff([nu(Qu)],t.prototype,"wrapping",void 0),t}();function yf(t,e){return t.length===e.length&&t.every((function(t,r){return Number(t)===Number(e[r])}))}var gf=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},mf=function(){function t(e,r){this.domain=e,this.range=r,this.nice=!1,this.tickCount=t.defaultTickCount,this.minTickCount=0,this.maxTickCount=1/0,this.niceDomain=null,this.strictClampByDefault=!1,this.cache=null,this.cacheProps=["domain","range","nice","tickCount","minTickCount","maxTickCount"]}return t.prototype.transform=function(t){return t},t.prototype.transformInvert=function(t){return t},t.prototype.fromDomain=function(t){return"number"==typeof t?t:t instanceof Date?t.getTime():NaN},t.prototype.getDomain=function(){return this.nice&&(this.refresh(),this.niceDomain)?this.niceDomain:this.domain},t.prototype.convert=function(t,e){var r,n=this;if(!this.domain||this.domain.length<2)return NaN;this.refresh();var o=null!==(r=null==e?void 0:e.strict)&&void 0!==r?r:this.strictClampByDefault,i=this.getDomain().map((function(t){return n.transform(t)})),a=gf(i,2),s=a[0],l=a[1],u=this.range,c=gf(u,2),p=c[0],d=c[1];return(t=this.transform(t))<s?o?NaN:p:t>l?o?NaN:d:s===l?(p+d)/2:t===s?p:t===l?d:p+(this.fromDomain(t)-this.fromDomain(s))/(this.fromDomain(l)-this.fromDomain(s))*(d-p)},t.prototype.invert=function(t){var e=this;this.refresh();var r,n=this.getDomain().map((function(t){return e.transform(t)})),o=gf(n,2),i=o[0],a=o[1],s=this.range,l=gf(s,2),u=l[0],c=l[1],p=u>c;return t<(p?c:u)?p?a:i:t>(p?u:c)?p?i:a:(r=u===c?this.toDomain((this.fromDomain(i)+this.fromDomain(a))/2):this.toDomain(this.fromDomain(i)+(t-u)/(c-u)*(this.fromDomain(a)-this.fromDomain(i))),this.transformInvert(r))},t.prototype.didChange=function(){var t=this,e=this.cache;return!(e&&!this.cacheProps.some((function(r){return t[r]!==e[r]})))&&(this.cache={},this.cacheProps.forEach((function(e){return t.cache[e]=t[e]})),!0)},t.prototype.refresh=function(){this.didChange()&&this.update()},t.prototype.isDenseInterval=function(t){var e=t.start,r=t.stop,n=t.interval,o=t.count,i=this.range,a=r-e,s=Math.min(i[0],i[1]);return null!=o||(o=a/("number"==typeof n?n:1)),o>=Math.max(i[0],i[1])-s&&(sl.warn("the configured tick interval results in more than 1 tick per pixel, ignoring. Supply a larger tick interval or omit this configuration."),!0)},t.defaultTickCount=5,t.defaultMaxTickCount=6,t}(),bf=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function Cf(t,e,r,n,o){if(r<2)return Of(t,e,e-t);var i=wf(t,e,r,n,o);return isNaN(i)?new xf(0):Of(t=Math.ceil(t/i)*i,e=Math.floor(e/i)*i,i)}var Sf=[1,2,5,10];function wf(t,e,r,n,o){void 0===n&&(n=0),void 0===o&&(o=1/0);var i=(e-t)/r,a=Math.floor(Math.log10(i)),s=Math.pow(10,a),l=Sf.map((function(i){var a=i*s,l=Math.ceil((e-t)/a);return{multiplier:i,isWithinBounds:l>=n&&l<=o,diffCount:Math.abs(l-r)}})).sort((function(t,e){return t.isWithinBounds!==e.isWithinBounds?t.isWithinBounds?-1:1:t.diffCount-e.diffCount}))[0].multiplier;return!l||isNaN(l)?NaN:l*s}var xf=function(t){function e(e,r){var n=t.call(this)||this;if(r)for(var o=0,i=r.length;o<i;o++)n[o]=r[o];return n.fractionDigits=e,n}return bf(e,t),e}(Array);function Of(t,e,r){for(var n=function(t){var e,r,n=t.split("e");return Math.max((null!==(r=null===(e=n[0].split(".")[1])||void 0===e?void 0:e.length)&&void 0!==r?r:0)-Number(n[1]),0)}((r%1).toExponential()),o=Math.pow(10,n),i=Math.ceil((e-t)/r),a=new xf(n),s=0;s<=i;s++){var l=t+r*s;a.push(Math.round(l*o)/o)}return a}var Ef={periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]};function Tf(t,e){void 0===e&&(e=new Date(t.getFullYear(),0,1));var r=t.getTimezoneOffset()-e.getTimezoneOffset(),n=t.getTime()-e.getTime()+6e4*r;return Math.floor(n/864e5)}function Pf(t,e){var r=(e-new Date(t.getFullYear(),0,1).getDay()+7)%7,n=new Date(t.getFullYear(),0,r+1);return n<=t?Math.floor(Tf(t,n)/7)+1:0}var Df={a:function(t){return Ef.shortDays[t.getDay()]},A:function(t){return Ef.days[t.getDay()]},b:function(t){return Ef.shortMonths[t.getMonth()]},B:function(t){return Ef.months[t.getMonth()]},c:"%x, %X",d:function(t,e){return Mf(t.getDate(),2,null!=e?e:"0")},e:"%_d",f:function(t,e){return Mf(1e3*t.getMilliseconds(),6,null!=e?e:"0")},H:function(t,e){return Mf(t.getHours(),2,null!=e?e:"0")},I:function(t,e){var r=t.getHours()%12;return 0===r?"12":Mf(r,2,null!=e?e:"0")},j:function(t,e){return Mf(Tf(t)+1,3,null!=e?e:"0")},m:function(t,e){return Mf(t.getMonth()+1,2,null!=e?e:"0")},M:function(t,e){return Mf(t.getMinutes(),2,null!=e?e:"0")},L:function(t,e){return Mf(t.getMilliseconds(),3,null!=e?e:"0")},p:function(t){return t.getHours()<12?"AM":"PM"},Q:function(t){return String(t.getTime())},s:function(t){return String(Math.floor(t.getTime()/1e3))},S:function(t,e){return Mf(t.getSeconds(),2,null!=e?e:"0")},u:function(t){var e=t.getDay();return e<1&&(e+=7),String(e%7)},U:function(t,e){return Mf(Pf(t,0),2,null!=e?e:"0")},V:function(t,e){return Mf(function t(e,r){void 0===r&&(r=e.getFullYear());var n=new Date(r,0,1).getDay(),o=new Date(r,0,(4-n+7)%7-3+1);return o<=e?Math.floor(Tf(e,o)/7)+1:t(e,r-1)}(t),2,null!=e?e:"0")},w:function(t,e){return Mf(t.getDay(),2,null!=e?e:"0")},W:function(t,e){return Mf(Pf(t,1),2,null!=e?e:"0")},x:"%-m/%-d/%Y",X:"%-I:%M:%S %p",y:function(t,e){return Mf(t.getFullYear()%100,2,null!=e?e:"0")},Y:function(t,e){return Mf(t.getFullYear(),4,null!=e?e:"0")},Z:function(t){return function(t){var e=t.getTimezoneOffset(),r=Math.abs(e);return""+(e>0?"-":"+")+Mf(Math.floor(r/60),2,"0")+Mf(Math.floor(r%60),2,"0")}(t)},"%":function(){return"%"}},Af={_:" ",0:"0","-":""};function Mf(t,e,r){var n=String(Math.floor(t));return n.length>=e?n:""+r.repeat(e-n.length)+n}function _f(t){for(var e=[];t.length>0;){var r=t.indexOf("%");if(0!==r){var n=r>0?t.substring(0,r):t;e.push(n)}if(r<0)break;var o=t[r+1],i=Af[o];null!=i&&r++;var a=t[r+1],s=Df[a];if("function"==typeof s)e.push([s,i]);else if("string"==typeof s){var l=_f(s);e.push([l,i])}else e.push(""+(null!=i?i:"")+a);t=t.substring(r+2)}return function(t){var r="number"==typeof t?new Date(t):t;return e.map((function(t){return"string"==typeof t?t:t[0](r,t[1])})).join("")}}var Rf,kf,Ff=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),If=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Lf=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},Nf=function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t};!function(t){t[t.MILLISECOND=0]="MILLISECOND",t[t.SECOND=1]="SECOND",t[t.MINUTE=2]="MINUTE",t[t.HOUR=3]="HOUR",t[t.WEEK_DAY=4]="WEEK_DAY",t[t.SHORT_MONTH=5]="SHORT_MONTH",t[t.MONTH=6]="MONTH",t[t.SHORT_YEAR=7]="SHORT_YEAR",t[t.YEAR=8]="YEAR"}(kf||(kf={}));var Gf=((Rf={})[kf.MILLISECOND]=".%L",Rf[kf.SECOND]=":%S",Rf[kf.MINUTE]="%I:%M",Rf[kf.HOUR]="%I %p",Rf[kf.WEEK_DAY]="%a",Rf[kf.SHORT_MONTH]="%b %d",Rf[kf.MONTH]="%B",Rf[kf.SHORT_YEAR]="%y",Rf[kf.YEAR]="%Y",Rf);function jf(t){return t instanceof Date?t.getTime():t}var Vf,Bf=function(t){function e(){var e=t.call(this,[new Date(2022,11,7),new Date(2022,11,8)],[0,1])||this;return e.type="time",e.cacheProps=["domain","range","nice","tickCount","interval","minTickCount","maxTickCount"],e.year=Os,e.month=xs,e.week=ys,e.day=fs,e.hour=hs,e.minute=ps,e.second=us,e.millisecond=ss,e.tickIntervals=[[e.second,1,1e3],[e.second,5,5e3],[e.second,15,15e3],[e.second,30,3e4],[e.minute,1,6e4],[e.minute,5,3e5],[e.minute,15,9e5],[e.minute,30,18e5],[e.hour,1,36e5],[e.hour,3,108e5],[e.hour,6,216e5],[e.hour,12,432e5],[e.day,1,864e5],[e.day,2,1728e5],[e.week,1,6048e5],[e.week,2,12096e5],[e.week,3,18144e5],[e.month,1,2592e6],[e.month,2,5184e6],[e.month,3,7776e6],[e.month,4,10368e6],[e.month,6,15552e6],[e.year,1,31536e6]],e}return Ff(e,t),e.prototype.toDomain=function(t){return new Date(t)},e.prototype.calculateDefaultTickFormat=function(t){var e,r;void 0===t&&(t=[]);var n=kf.YEAR,o=function(t){t<n&&(n=t)};try{for(var i=If(t),a=i.next();!a.done;a=i.next()){var s=a.value;o(this.getLowestGranularityFormat(s))}}catch(t){e={error:t}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}var l=jf(t[0]),u=jf(t[t.length-1]),c=new Date(l).getFullYear(),p=new Date(u).getFullYear()-c>0;return this.buildFormatString(n,p)},e.prototype.buildFormatString=function(t,e){var r=[Gf[t]],n=0,o=this.getDomain(),i=Math.min.apply(Math,Nf([],Lf(o.map(jf)))),a=Math.max.apply(Math,Nf([],Lf(o.map(jf))))-i;switch(t){case kf.SECOND:a/6e4>1&&r.push(Gf[kf.MINUTE]);case kf.MINUTE:a/36e5>1&&r.push(Gf[kf.HOUR]);case kf.HOUR:n=r.length,a/864e5>1&&r.push(Gf[kf.WEEK_DAY]);case kf.WEEK_DAY:if(a/6048e5>1||e){var s=r.indexOf(Gf[kf.WEEK_DAY]);s>-1&&r.splice(s,1,Gf[kf.SHORT_MONTH])}case kf.SHORT_MONTH:case kf.MONTH:(a/31536e6>1||e)&&r.push(Gf[kf.YEAR])}return n<r.length&&(r=Nf(Nf([],Lf(r.slice(0,n))),[r.slice(n).join(" ")])),n>0&&n<(r=Nf(Nf([],Lf(r.slice(0,n).reverse())),Lf(r.slice(n)))).length&&r.splice(n,0," "),r.join("")},e.prototype.getLowestGranularityFormat=function(t){return this.second.floor(t)<t?kf.MILLISECOND:this.minute.floor(t)<t?kf.SECOND:this.hour.floor(t)<t?kf.MINUTE:this.day.floor(t)<t?kf.HOUR:this.month.floor(t)<t?this.week.floor(t)<t?kf.WEEK_DAY:kf.SHORT_MONTH:this.year.floor(t)<t?kf.MONTH:kf.YEAR},e.prototype.defaultTickFormat=function(t){var e=this.calculateDefaultTickFormat(t);return function(t){return _f(e)(t)}},e.prototype.getTickInterval=function(t){for(var e,r,n,o=t.start,i=t.stop,a=t.count,s=t.minCount,l=t.maxCount,u=this.tickIntervals,c=null!=a?a:mf.defaultTickCount,p=Math.abs(i-o)/Math.max(c,1),d=0;d<u.length&&p>u[d][2];)d++;if(0===d)n=Math.max(wf(o,i,c,s,l),1),r=this.millisecond;else if(d===u.length){n=wf(o/31536e6,i/31536e6,c,s,l),r=this.year}else{var h=p-u[d-1][2],f=u[d][2]-p;r=(e=Lf(u[h<f?d-1:d],2))[0],n=e[1]}return r.every(n)},e.prototype.invert=function(e){return new Date(t.prototype.invert.call(this,e))},e.prototype.ticks=function(){if(!this.domain||this.domain.length<2)return[];this.refresh();var t=Lf(this.getDomain().map(jf),2),e=t[0],r=t[1];if(void 0!==this.interval)return this.getTicksForInterval({start:e,stop:r});if(this.nice){var n=this.tickCount;if(2===n)return this.niceDomain;if(1===n)return this.niceDomain.slice(0,1)}return this.getDefaultTicks({start:e,stop:r})},e.prototype.getDefaultTicks=function(t){var e=t.start,r=t.stop,n=this.getTickInterval({start:e,stop:r,count:this.tickCount,minCount:this.minTickCount,maxCount:this.maxTickCount});return n?n.range(new Date(e),new Date(r)):[]},e.prototype.getTicksForInterval=function(t){var e=t.start,r=t.stop,n=this.interval,o=this.tickIntervals;if(!n)return[];if(n instanceof is){var i=n.range(new Date(e),new Date(r));return this.isDenseInterval({start:e,stop:r,interval:n,count:i.length})?this.getDefaultTicks({start:e,stop:r}):i}var a=Math.abs(n);if(this.isDenseInterval({start:e,stop:r,interval:a}))return this.getDefaultTicks({start:e,stop:r});var s=Nf([],Lf(o));s.reverse();var l=s.find((function(t){return a%t[2]==0}));if(l)return l[0].every(a/(l[2]/l[1])).range(new Date(e),new Date(r));for(var u=new Date(e),c=new Date(r),p=[];u<=c;)p.push(u),(u=new Date(u)).setMilliseconds(u.getMilliseconds()+a);return p},e.prototype.tickFormat=function(t){var e=t.ticks,r=t.specifier;return null==r?this.defaultTickFormat(e):_f(r)},e.prototype.update=function(){!this.domain||this.domain.length<2||this.nice&&this.updateNiceDomain()},e.prototype.updateNiceDomain=function(){for(var t=Lf(this.domain,2),e=t[0],r=t[1],n=0;n<4;n++){this.updateNiceDomainIteration(e,r);var o=Lf(this.niceDomain,2),i=o[0],a=o[1];if(jf(e)===jf(i)&&jf(r)===jf(a))break;e=i,r=a}},e.prototype.updateNiceDomainIteration=function(t,e){var r,n=jf(t),o=jf(e),i=this.interval;if(i instanceof is)r=i;else{var a="number"==typeof i?(o-n)/Math.max(i,1):this.tickCount;r=this.getTickInterval({start:n,stop:o,count:a,minCount:this.minTickCount,maxCount:this.maxTickCount})}if(r){var s=r.range(t,e,!0),l=s[0],u=s[s.length-1];this.niceDomain=[l,u]}},e}(mf),Uf=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},Hf=function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t},zf=function(t){return"("+t+")"},Wf=function(t){return zf(t)+"?"},Kf=function(t){return Wf("?:"+t)},Xf=new RegExp(["^",Kf(""+Wf(".")+zf("[<>=^]")),Wf("[+\\-( ]"),Wf("[$\u20ac\xa3\xa5\u20a3\u20b9#]"),Wf("0"),Wf("\\d+"),Wf(","),Kf("\\."+zf("\\d+")),Wf("~"),Wf("[%a-z]"),"$"].join(""),"i"),Yf=new RegExp(["^",zf(".*?"),"#\\{"+zf(".+?")+"\\}",zf(".*?"),"$"].join(""));function qf(t){var e,r,n,o=Yf.exec(t);o&&(r=(e=Uf(o,4))[1],t=e[2],n=e[3]);var i=Xf.exec(t);if(!i)throw new Error("The number formatter is invalid: "+t);var a=Uf(i,11),s=a[1],l=a[2],u=a[3],c=a[4],p=a[5],d=a[6],h=a[7],f=a[8],v=a[9],y=a[10];return{fill:s,align:l,sign:u,symbol:c,zero:p,width:parseInt(d),comma:h,precision:parseInt(f),trim:Boolean(v),type:y,prefix:r,suffix:n}}function Zf(t){var e,r,n="string"==typeof t?qf(t):t,o=n.fill,i=n.align,a=n.sign,s=void 0===a?"-":a,l=n.symbol,u=n.zero,c=n.width,p=n.comma,d=n.type,h=n.prefix,f=void 0===h?"":h,v=n.suffix,y=void 0===v?"":v,g=n.precision,m=n.trim,b=void 0===g||isNaN(g);if(d)if(d in Qf&&d in $f)e=b?$f[d]:Qf[d];else if(d in Qf)e=Qf[d];else{if(!(d in $f))throw new Error("The number formatter type is invalid: "+d);e=$f[d]}else e=Qf.g,m=!0;return r=null==g||b?d?6:12:g,function(t){var n=e(t,r);return m&&(n=n.replace(/\.0+$/,"").replace(/(\.[1-9])0+$/,"$1")),p&&(n=function(t,e){var r=t.indexOf(".");r<0&&(r=t.length);for(var n=t.substring(0,r).split(""),o=t.substring(r),i=n.length-3;i>0;i-=3)n.splice(i,0,e);return""+n.join("")+o}(n,p)),n=function(t,e,r){void 0===r&&(r="");if("("===r)return t>=0?e:"("+e+")";var n="+"===r?"+":"";return""+(t>=0?n:"\u2212")+e}(t,n,s),l&&"#"!==l&&(n=""+l+n),"#"===l&&"x"===d&&(n="0x"+n),"s"===d&&(n=""+n+function(t){return nv[tv(t)]}(t)),"%"!==d&&"p"!==d||(n+="%"),null==c||isNaN(c)||(n=function(t,e,r,n){void 0===r&&(r=" ");void 0===n&&(n=">");var o=t;if(">"!==n&&n){if("<"===n)o=o.padEnd(e,r);else if("^"===n){var i=Math.max(0,e-o.length),a=Math.ceil(i/2),s=Math.floor(i/2);o=(o=o.padStart(a+o.length,r)).padEnd(s+o.length,r)}}else o=o.padStart(e,r);return o}(n,c,null!=o?o:u,i)),n=""+f+n+y}}var Jf=function(t){return Math.floor(Math.abs(t))},$f={b:function(t){return Jf(t).toString(2)},c:function(t){return String.fromCharCode(t)},d:function(t){return Math.round(Math.abs(t)).toFixed(0)},o:function(t){return Jf(t).toString(8)},x:function(t){return Jf(t).toString(16)},X:function(t){return $f.x(t).toUpperCase()},n:function(t){return $f.d(t)},"%":function(t){return""+Jf(100*t).toFixed(0)}},Qf={e:function(t,e){return Math.abs(t).toExponential(e)},E:function(t,e){return Qf.e(t,e).toUpperCase()},f:function(t,e){return Math.abs(t).toFixed(e)},F:function(t,e){return Qf.f(t,e).toUpperCase()},g:function(t,e){if(0===t)return"0";var r=Math.abs(t),n=Math.floor(Math.log10(r));return n>=-4&&n<e?r.toFixed(e-1-n):r.toExponential(e-1)},G:function(t,e){return Qf.g(t,e).toUpperCase()},n:function(t,e){return Qf.g(t,e)},p:function(t,e){return Qf.r(100*t,e)},r:function(t,e){if(0===t)return"0";var r=Math.abs(t),n=Math.floor(Math.log10(r))-(e-1);if(n<=0)return r.toFixed(-n);var o=Math.pow(10,n);return(Math.round(r/o)*o).toFixed()},s:function(t,e){var r=tv(t);return Qf.r(t/Math.pow(10,r),e)},"%":function(t,e){return Qf.f(100*t,e)}};function tv(t){var e=Math.log10(Math.abs(t)),r=3*Math.floor(e/3);return Math.max(ev,Math.min(rv,r))}var ev=-24,rv=24,nv=((Vf={})[ev]="y",Vf[-21]="z",Vf[-18]="a",Vf[-15]="f",Vf[-12]="p",Vf[-9]="n",Vf[-6]="\xb5",Vf[-3]="m",Vf[0]="",Vf[3]="k",Vf[6]="M",Vf[9]="G",Vf[12]="T",Vf[15]="P",Vf[18]="E",Vf[21]="Z",Vf[rv]="Y",Vf);var ov=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),iv=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},av=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},sv=function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t},lv=function(t){return t},uv=function(t){function e(){var e=t.call(this,[1,10],[0,1])||this;return e.type="log",e.base=10,e.cacheProps=["domain","range","nice","tickCount","base"],e.baseLog=lv,e.basePow=lv,e.log=function(t){return e.domain[0]>=0?e.baseLog(t):-e.baseLog(-t)},e.pow=function(t){return e.domain[0]>=0?e.basePow(t):-e.basePow(-t)},e}return ov(e,t),e.prototype.toDomain=function(t){return t},e.prototype.transform=function(t){return this.domain[0]>=0?Math.log(t):-Math.log(-t)},e.prototype.transformInvert=function(t){return this.domain[0]>=0?Math.exp(t):-Math.exp(-t)},e.prototype.update=function(){!this.domain||this.domain.length<2||(this.updateLogFn(),this.updatePowFn(),this.nice&&this.updateNiceDomain())},e.prototype.updateLogFn=function(){var t,e=this.base;if(10===e)t=Math.log10;else if(e===Math.E)t=Math.log;else if(2===e)t=Math.log2;else{var r=Math.log(e);t=function(t){return Math.log(t)/r}}this.baseLog=t},e.prototype.updatePowFn=function(){var t,r=this.base;t=10===r?e.pow10:r===Math.E?Math.exp:function(t){return Math.pow(r,t)},this.basePow=t},e.prototype.updateNiceDomain=function(){var t=av(this.domain,2),e=t[0],r=t[1],n=this.pow(Math.floor(this.log(e))),o=this.pow(Math.ceil(this.log(r)));this.niceDomain=[n,o]},e.pow10=function(t){return t>=0?Math.pow(10,t):1/Math.pow(10,-t)},e.prototype.ticks=function(){var t,e=this,r=null!==(t=this.tickCount)&&void 0!==t?t:10;if(!this.domain||this.domain.length<2||r<1)return[];this.refresh();var n=this.base,o=av(this.getDomain(),2),i=o[0],a=o[1],s=this.log(i),l=this.log(a);if(this.interval){var u=Math.abs(this.interval),c=Math.abs(l-s),p=Of(s,l,Math.min(c,u)).map((function(t){return e.pow(t)})).filter((function(t){return t>=i&&t<=a}));if(!this.isDenseInterval({start:i,stop:a,interval:u,count:p.length}))return p}if(!(n%1==0)||l-s>=r)return Cf(s,l,Math.min(l-s,r)).map((function(t){return e.pow(t)}));var d=[],h=i>0;s=Math.floor(s)-1,l=Math.round(l)+1;for(var f=Math.min.apply(Math,sv([],av(this.range))),v=(Math.max.apply(Math,sv([],av(this.range)))-f)/r,y=1/0,g=s;g<=l;g++)for(var m=this.convert(this.pow(g+1)),b=1;b<n;b++){var C=h?b:n-b+1,S=this.pow(g)*C,w=this.convert(S),x=Math.abs(y-w),O=Math.abs(w-m);S>=i&&S<=a&&(1===b||x>=v&&O>=v)&&(d.push(S),y=w)}return d},e.prototype.tickFormat=function(t){var e=t.count,r=t.ticks,n=t.specifier,o=this.base;return null==n&&(n=10===o?".0e":","),"string"==typeof n&&(n=Zf(n)),e===1/0?n:(null==r&&this.ticks(),function(t){return n(t)})},iv([nu(Pu(0))],e.prototype,"base",void 0),e}(mf);function cv(t){var e=t.length;if(0!==e){for(var r=1/0,n=-1/0,o=0;o<e;o++){var i=t[o];i instanceof Date&&(i=i.getTime()),"number"==typeof i&&(i<r&&(r=i),i>n&&(n=i))}var a=[r,n];if(!a.some((function(t){return!isFinite(t)})))return a}}var pv=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},dv=function(){function t(){this.enabled=!0,this.fontSize=12,this.fontFamily="Verdana, sans-serif",this.fontStyle=void 0,this.fontWeight=void 0,this.color="rgba(70, 70, 70, 1)"}return t.prototype.getFont=function(){return jl(this)},pv([nu(fu)],t.prototype,"enabled",void 0),pv([nu(Pu(0))],t.prototype,"fontSize",void 0),pv([nu(yu)],t.prototype,"fontFamily",void 0),pv([nu(Nu)],t.prototype,"fontStyle",void 0),pv([nu(ju)],t.prototype,"fontWeight",void 0),pv([nu(xu)],t.prototype,"color",void 0),t}();function hv(t){var e=t.parallelFlipRotation,r=void 0===e?0:e,n=t.regularFlipRotation,o=void 0===n?0:n,i=t.rotation?Tl(Pl(t.rotation)):0,a=!i&&r>=0&&r<=Math.PI?-1:1,s=!i&&o>=0&&o<=Math.PI?-1:1,l=0;return t.parallel?l=a*Math.PI/2:-1===s&&(l=Math.PI),{configuredRotation:i,defaultRotation:l,parallelFlipFlag:a,regularFlipFlag:s}}function fv(t,e,r,n,o){var i=e>0&&e<=Math.PI,a=r>0&&r<=Math.PI;if(t){if(!e&&!r)return"center";if(n*(i||a?-1:1)==-1)return"end"}else if(n*o==-1)return"end";return"start"}function vv(t,e,r,n,o){var i=e.width,a=e.height,s=new Ns(r,n,0,0);o.transformBBox(s,e);var l=e.x,u=void 0===l?0:l,c=e.y,p=void 0===c?0:c;return e.width=i,e.height=a,{point:{x:u,y:p,size:0},label:{width:i,height:a,text:t}}}function yv(t,e){return void 0===e&&(e=[void 0]),ru((function(r,n,o){return e.includes(o)?t:o}))}var gv,mv,bv=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},Cv=function(){function t(){this.enabled=!0,this.autoWrap=!1,this.maxWidth=void 0,this.maxHeight=void 0,this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=12,this.fontFamily="Verdana, sans-serif",this.padding=5,this.minSpacing=NaN,this.color="rgba(87, 87, 87, 1)",this.rotation=void 0,this.autoRotate=void 0,this.autoRotateAngle=335,this.avoidCollisions=!0,this.mirrored=!1,this.parallel=!1,this.formatter=void 0,this.format=void 0}return t.prototype.getSideFlag=function(){return this.mirrored?1:-1},t.prototype.getFont=function(){return jl(this)},bv([nu(fu)],t.prototype,"enabled",void 0),bv([nu(vu)],t.prototype,"autoWrap",void 0),bv([nu(Du(0))],t.prototype,"maxWidth",void 0),bv([nu(Du(0))],t.prototype,"maxHeight",void 0),bv([nu(Nu)],t.prototype,"fontStyle",void 0),bv([nu(ju)],t.prototype,"fontWeight",void 0),bv([nu(Pu(1))],t.prototype,"fontSize",void 0),bv([nu(yu)],t.prototype,"fontFamily",void 0),bv([nu(Pu(0))],t.prototype,"padding",void 0),bv([nu(Au()),yv(NaN)],t.prototype,"minSpacing",void 0),bv([nu(Ou)],t.prototype,"color",void 0),bv([nu(Du(-360,360))],t.prototype,"rotation",void 0),bv([nu(vu)],t.prototype,"autoRotate",void 0),bv([nu(Pu(-360,360))],t.prototype,"autoRotateAngle",void 0),bv([nu(fu)],t.prototype,"avoidCollisions",void 0),bv([nu(fu)],t.prototype,"mirrored",void 0),bv([nu(fu)],t.prototype,"parallel",void 0),bv([nu(gu)],t.prototype,"format",void 0),t}(),Sv=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},wv=function(){function t(){this.width=1,this.color="rgba(195, 195, 195, 1)"}return Sv([nu(Pu(0))],t.prototype,"width",void 0),Sv([nu(Ou)],t.prototype,"color",void 0),t}(),xv=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},Ov=ou((function(t,e){return Pu(0)(t,e)||t instanceof is}),"expecting a tick count Number value or, for a time axis, a Time Interval such as 'agCharts.time.month'"),Ev=ou((function(t,e){return iu(t,e,Ov)}),"expecting an optional tick count Number value or, for a time axis, a Time Interval such as 'agCharts.time.month'"),Tv=ou((function(t,e){return iu(t,e,(function(t,e){return 0!==t&&Pu(0)(t,e)||t instanceof is}))}),"expecting an optional non-zero positive Number value or, for a time axis, a Time Interval such as 'agCharts.time.month'"),Pv=function(){function t(){this.enabled=!0,this.width=1,this.size=6,this.color="rgba(195, 195, 195, 1)",this.count=void 0,this.interval=void 0,this.values=void 0,this.minSpacing=NaN}var e,r,n,o;return xv([nu(fu)],t.prototype,"enabled",void 0),xv([nu(Pu(0))],t.prototype,"width",void 0),xv([nu(Pu(0))],t.prototype,"size",void 0),xv([nu(Ou)],t.prototype,"color",void 0),xv([nu(Ev),(e="Use tick.interval or tick.minSpacing and tick.maxSpacing instead",n=null==r?void 0:r.default,o=pc(),ru((function(t,r,i){return i!==n&&o(r.toString(),e),i})))],t.prototype,"count",void 0),xv([nu(Tv)],t.prototype,"interval",void 0),xv([nu(su())],t.prototype,"values",void 0),xv([nu(lu(Au(1),cu("maxSpacing"))),yv(NaN)],t.prototype,"minSpacing",void 0),t}(),Dv=function(){function t(e,r){this.state=e,this.states=r,t.DEBUG()&&sl.debug("%c"+this.constructor.name+" | init -> "+e,"color: green")}return t.prototype.transition=function(e,r){var n,o,i,a,s,l=this.states[this.state],u=null===(n=null==l?void 0:l.on)||void 0===n?void 0:n[e];if(u){var c=u.target,p=this.states[c];return t.DEBUG()&&sl.debug("%c"+this.constructor.name+" | "+this.state+" -> "+e+" -> "+c,"color: green"),u.action(r),null===(i=null===(o=null==l?void 0:l.actions)||void 0===o?void 0:o.onExit)||void 0===i||i.call(o),null===(s=null===(a=null==p?void 0:p.actions)||void 0===a?void 0:a.onEnter)||void 0===s||s.call(a),this.state=c,this.state}t.DEBUG()&&sl.debug("%c"+this.constructor.name+" | "+this.state+" -> "+e+" -> "+this.state,"color: grey")},t.DEBUG=function(){var t;return null!==(t=[!0,"animation"].includes(yl("agChartsDebug")))&&void 0!==t&&t},t}(),Av=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Mv=function(){return(Mv=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},_v=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},Rv=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(t,n[o])&&(r[n[o]]=t[n[o]])}return r},kv=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Fv=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},Iv=function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t},Lv=["stroke","lineDash"],Nv=ou(au(void 0,(function(t){for(var e in t)if(!Lv.includes(e))return!1;return!0})),"expecting an Array of objects with gridline style properties such as 'stroke' and 'lineDash'");!function(t){t[t.TickLine=0]="TickLine",t[t.TickLabel=1]="TickLabel",t[t.GridLine=2]="GridLine",t[t.GridArc=3]="GridArc",t[t.AxisLine=4]="AxisLine"}(gv||(gv={})),function(t){t[t.CREATE=0]="CREATE",t[t.CREATE_SECONDARY=1]="CREATE_SECONDARY",t[t.FILTER=2]="FILTER",t[t.VALUES=3]="VALUES"}(mv||(mv={}));var Gv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Av(e,t),e}(Dv),jv=function(){function t(t,e){var r=this;this.moduleCtx=t,this.id=Us(this),this.nice=!0,this.dataDomain=[],this.keys=[],this.boundSeries=[],this.includeInvisibleDomains=!1,this.axisGroup=new fl({name:this.id+"-axis",zIndex:Ku.AXIS_ZINDEX}),this.lineNode=this.axisGroup.appendChild(new hf),this.tickLineGroup=this.axisGroup.appendChild(new fl({name:this.id+"-Axis-tick-lines",zIndex:Ku.AXIS_ZINDEX})),this.tickLabelGroup=this.axisGroup.appendChild(new fl({name:this.id+"-Axis-tick-labels",zIndex:Ku.AXIS_ZINDEX})),this.crossLineGroup=new fl({name:this.id+"-CrossLines"}),this.gridGroup=new fl({name:this.id+"-Axis-grid"}),this.gridLineGroup=this.gridGroup.appendChild(new fl({name:this.id+"-gridLines",zIndex:Ku.AXIS_GRID_ZINDEX})),this.tickLineGroupSelection=Fd.select(this.tickLineGroup,hf,!1),this.tickLabelGroupSelection=Fd.select(this.tickLabelGroup,Gl,!1),this.gridLineGroupSelection=Fd.select(this.gridLineGroup,hf,!1),this.line=new wv,this.tick=this.createTick(),this.label=new Cv,this.translation={x:0,y:0},this.rotation=0,this.layout={label:{fractionDigits:0,padding:this.label.padding,format:this.label.format}},this.modules={},this.destroyFns=[],this.range=[0,1],this.visibleRange=[0,1],this.title=void 0,this._titleCaption=new vf,this._gridLength=0,this.gridStyle=[{stroke:"rgba(219, 219, 219, 1)",lineDash:[4,2]}],this.fractionDigits=0,this.gridPadding=0,this.seriesAreaPadding=0,this.maxThickness=1/0,this._scale=e,this.refreshScale(),this._titleCaption.node.rotation=-Math.PI/2,this.axisGroup.appendChild(this._titleCaption.node);var n=t.interactionManager.addListener("hover",(function(t){return r.checkAxisHover(t)}));this.destroyFns.push((function(){return t.interactionManager.removeListener(n)})),this.animationManager=t.animationManager,this.animationState=new Gv("empty",{empty:{on:{update:{target:"align",action:function(){return r.resetSelectionNodes()}}}},align:{on:{update:{target:"ready",action:function(){return r.resetSelectionNodes()}}}},ready:{on:{update:{target:"ready",action:function(t){return r.animateReadyUpdate(t)}}}}}),this._crossLines=[],this.assignCrossLineArrayConstructor(this._crossLines)}return Object.defineProperty(t.prototype,"scale",{get:function(){return this._scale},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"type",{get:function(){var t;return null!==(t=this.constructor.type)&&void 0!==t?t:""},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"crossLines",{get:function(){return this._crossLines},set:function(t){var e,r,n=this;null===(e=this._crossLines)||void 0===e||e.forEach((function(t){return n.detachCrossLine(t)})),t&&this.assignCrossLineArrayConstructor(t),this._crossLines=t,null===(r=this._crossLines)||void 0===r||r.forEach((function(t){n.attachCrossLine(t),n.initCrossLine(t)}))},enumerable:!1,configurable:!0}),t.prototype.attachCrossLine=function(t){this.crossLineGroup.appendChild(t.group)},t.prototype.detachCrossLine=function(t){this.crossLineGroup.removeChild(t.group)},t.prototype.destroy=function(){var t,e;try{for(var r=kv(Object.entries(this.modules)),n=r.next();!n.done;n=r.next()){var o=Fv(n.value,2),i=o[0];o[1].instance.destroy(),delete this.modules[i],delete this[i]}}catch(e){t={error:e}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}this.destroyFns.forEach((function(t){return t()}))},t.prototype.refreshScale=function(){var t,e=this;this.range=this.scale.range.slice(),null===(t=this.crossLines)||void 0===t||t.forEach((function(t){e.initCrossLine(t)}))},t.prototype.updateRange=function(){var t,e=this.range,r=this.visibleRange,n=this.scale,o=(e[1]-e[0])/(r[1]-r[0]),i=o*r[0],a=e[0]-i;n.range=[a,a+o],null===(t=this.crossLines)||void 0===t||t.forEach((function(t){t.clippedRange=[e[0],e[1]]}))},t.prototype.setCrossLinesVisible=function(t){this.crossLineGroup.visible=t},t.prototype.attachAxis=function(t){t.appendChild(this.gridGroup),t.appendChild(this.axisGroup),t.appendChild(this.crossLineGroup)},t.prototype.detachAxis=function(t){t.removeChild(this.gridGroup),t.removeChild(this.axisGroup),t.removeChild(this.crossLineGroup)},t.prototype.inRange=function(t,e,r){return void 0===e&&(e=0),void 0===r&&(r=0),0===this.inRangeEx(t,e,r)},t.prototype.inRangeEx=function(t,e,r){void 0===e&&(e=0),void 0===r&&(r=0);var n=this.range,o=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return t+e<o-r?-1:t>i+r?1:0},t.prototype.onLabelFormatChange=function(t,e){var r=this.scale,n=this.fractionDigits,o=!(r instanceof uv)&&n>0?function(t){return"number"==typeof t?t.toFixed(n):String(t)}:function(t){return String(t)};if(e&&r&&r.tickFormat)try{this.labelFormatter=r.tickFormat({ticks:t,specifier:e})}catch(t){this.labelFormatter=o,sl.warnOnce("the axis label format string "+e+" is invalid. No formatting will be applied")}else this.labelFormatter=o},t.prototype.setDomain=function(){var t,e=this.scale,r=this.dataDomain,n=this.tick.values;if(n&&e instanceof mf){var o=Fv(null!==(t=cv(n))&&void 0!==t?t:[1/0,-1/0],2),i=o[0],a=o[1],s=Math.min(e.fromDomain(r[0]),i),l=Math.max(e.fromDomain(r[1]),a);e.domain=[e.toDomain(s),e.toDomain(l)]}else e.domain=r},t.prototype.setTickInterval=function(t){var e;this.scale.interval=null!==(e=this.tick.interval)&&void 0!==e?e:t},t.prototype.setTickCount=function(t,e,r){var n=this.scale;if(t&&n instanceof mf)return"number"==typeof t?(n.tickCount=t,n.minTickCount=null!=e?e:0,void(n.maxTickCount=null!=r?r:1/0)):void(n instanceof Bf&&this.setTickInterval(t))},Object.defineProperty(t.prototype,"gridLength",{get:function(){return this._gridLength},set:function(t){var e,r=this;(this._gridLength&&!t||!this._gridLength&&t)&&(this.gridLineGroupSelection=this.gridLineGroupSelection.clear()),this._gridLength=t,null===(e=this.crossLines)||void 0===e||e.forEach((function(t){r.initCrossLine(t)}))},enumerable:!1,configurable:!0}),t.prototype.createTick=function(){return new Pv},t.prototype.checkAxisHover=function(t){this.computeBBox().containsPoint(t.offsetX,t.offsetY)&&this.moduleCtx.chartEventManager.axisHover(this.id,this.direction)},t.prototype.update=function(t){var e=this.tickLabelGroupSelection.nodes().map((function(t){return t.datum.tickId})),r=this.calculateRotations(),n=r.rotation,o=r.parallelFlipRotation,i=r.regularFlipRotation,a=this.label.getSideFlag(),s=a*(this.tick.size+this.label.padding+this.seriesAreaPadding);this.updateScale(),this.updatePosition({rotation:n,sideFlag:a}),this.updateLine();var l=this.generateTicks({primaryTickCount:t,parallelFlipRotation:o,regularFlipRotation:i,labelX:s,sideFlag:a}),u=l.tickData,c=l.combinedRotation,p=l.textBaseline,d=l.textAlign,h=Rv(l,["tickData","combinedRotation","textBaseline","textAlign"]);if(this.updateSelections(u.ticks),this.animationManager.skipAnimations)this.resetSelectionNodes();else{var f=this.calculateUpdateDiff(e,u);this.animationState.transition("update",f)}return this.updateLabels({tickLabelGroupSelection:this.tickLabelGroupSelection,combinedRotation:c,textBaseline:p,textAlign:d,labelX:s}),this.updateVisibility(),this.updateGridLines(a),this.updateTickLines(a),this.updateTitle({anyTickVisible:u.ticks.length>0,sideFlag:a}),this.updateCrossLines({rotation:n,parallelFlipRotation:o,regularFlipRotation:i,sideFlag:a}),this.updateLayoutState(),t=h.primaryTickCount},t.prototype.updateLayoutState=function(){this.layout.label={fractionDigits:this.fractionDigits,padding:this.label.padding,format:this.label.format}},t.prototype.updateScale=function(){this.updateRange(),this.calculateDomain(),this.setDomain(),this.setTickInterval(this.tick.interval);var t=this.scale,e=this.nice;t instanceof mf&&(this.setTickCount(this.tick.count),t.nice=e,t.update())},t.prototype.calculateRotations=function(){var t=Pl(this.rotation);return{rotation:t,parallelFlipRotation:Tl(t),regularFlipRotation:Tl(t-Math.PI/2)}},t.prototype.generateTicks=function(t){for(var e,r,n,o,i=t.primaryTickCount,a=t.parallelFlipRotation,s=t.regularFlipRotation,l=t.labelX,u=t.sideFlag,c=this.scale,p=this.tick,d=this.label,h=d.parallel,f=d.rotation,v=d.fontFamily,y=d.fontSize,g=d.fontStyle,m=d.fontWeight,b=void 0!==i,C=hv({rotation:f,parallel:h,regularFlipRotation:s,parallelFlipRotation:a}),S=C.defaultRotation,w=C.configuredRotation,x=C.parallelFlipFlag,O=C.regularFlipFlag,E=w+S,T=new Vs,P=this.estimateTickCount({minSpacing:p.minSpacing,maxSpacing:null!==(o=p.maxSpacing)&&void 0!==o?o:NaN}).maxTickCount,D=c instanceof mf,A=p.count||!D||isNaN(P)?10:P,M=fv(h,w,0,u,O),_=function(t,e,r,n){return t&&!e?r*n==-1?"hanging":"bottom":"middle"}(h,w,u,x),R={fontFamily:v,fontSize:y,fontStyle:g,fontWeight:m,textBaseline:_,textAlign:M},k={rawTicks:[],ticks:[],labelCount:0},F=0,I=0,L=!0,N=!1;L&&F<=A&&!N;){I=0,M=fv(h,w,0,u,O);var G=this.getTickStrategies({secondaryAxis:b,index:F});try{for(var j=(e=void 0,kv(G)),V=j.next();!V.done;V=j.next()){k=(n=(0,V.value)({index:F,tickData:k,textProps:R,labelOverlap:L,terminate:N,primaryTickCount:i})).tickData,F=n.index,I=n.autoRotation,N=n.terminate;var B=k.ticks;M=fv(h,w,I,u,O);var U=0!==w||0!==I,H=E+I;L=this.checkLabelOverlap(H,U,T,B,l,Mv(Mv({},R),{textAlign:M}))}}catch(t){e={error:t}}finally{try{V&&!V.done&&(r=j.return)&&r.call(j)}finally{if(e)throw e.error}}}var z=S+w+I;return!b&&k.rawTicks.length>0&&(i=k.rawTicks.length),{tickData:k,primaryTickCount:i,combinedRotation:z,textBaseline:_,textAlign:M}},t.prototype.getTickStrategies=function(t){var e,r=this,n=t.index,o=t.secondaryAxis,i=this.scale,a=this.label,s=this.tick,l=i instanceof mf,u=a.enabled&&a.avoidCollisions,c=!(l&&void 0===this.tick.count)&&0!==n&&u,p=!0===a.autoRotate&&void 0===a.rotation,d=[];e=this.tick.values?mv.VALUES:o?mv.CREATE_SECONDARY:c?mv.FILTER:mv.CREATE;if(d.push((function(t){var n=t.index,o=t.tickData,i=t.primaryTickCount,a=t.terminate;return r.createTickData(e,n,o,a,i)})),!l&&!isNaN(s.minSpacing)){d.push((function(t){var e=t.index,n=t.tickData,o=t.primaryTickCount,i=t.terminate;return r.createTickData(mv.FILTER,e,n,i,o)}))}if(!u)return d;if(a.autoWrap){d.push((function(t){var e=t.index,n=t.tickData,o=t.textProps;return r.wrapLabels(n,e,o)}))}else if(p){d.push((function(t){var e=t.index,n=t.tickData,o=t.labelOverlap,i=t.terminate;return{index:e,tickData:n,autoRotation:r.getAutoRotation(o),terminate:i}}))}return d},t.prototype.createTickData=function(t,e,r,n,o){for(var i,a,s,l=this.scale,u=this.tick,c=this.estimateTickCount({minSpacing:u.minSpacing,maxSpacing:null!==(i=u.maxSpacing)&&void 0!==i?i:NaN}),p=c.maxTickCount,d=c.minTickCount,h=c.defaultTickCount,f=l instanceof mf,v=u.count||!f||isNaN(p)?10:p,y=null!==(a=u.count)&&void 0!==a?a:f?Math.max(h-e,d):p,g=void 0===u.interval&&void 0===u.values&&void 0===u.count&&y>d&&(f||t===mv.FILTER),m=!0;m&&e<=v;){var b=r.rawTicks;y=null!==(s=u.count)&&void 0!==s?s:f?Math.max(h-e,d):p;var C=this.getTicks({tickGenerationType:t,previousTicks:b,tickCount:y,minTickCount:d,maxTickCount:p,primaryTickCount:o}),S=C.rawTicks,w=C.ticks,x=C.labelCount;r.rawTicks=S,r.ticks=w,r.labelCount=x,m=!!g&&yf(S,b),e++}var O=void 0!==u.interval||void 0!==u.values;return n||(n=O),{tickData:r,index:e,autoRotation:0,terminate:n}},t.prototype.checkLabelOverlap=function(t,e,r,n,o,i){return Vs.updateTransformMatrix(r,1,1,t,0,0),function(t,e){for(var r=[],n=function(n){var o=t[n],i=o.point,a=i.x,s=i.y,l=o.label.text,u=o.label,c=u.width,p=u.height;if(c+=null!=e?e:0,p+=null!=e?e:0,r.some((function(t){return vp(t,a,s,c,p)})))return{value:!0};r.push({index:n,text:l,x:a,y:s,width:c,height:p,datum:o})},o=0;o<t.length;o++){var i=n(o);if("object"==typeof i)return i.value}return!1}(this.createLabelData(n,o,i,r),function(t,e){return isNaN(t)?e?0:10:t}(this.label.minSpacing,e))},t.prototype.createLabelData=function(t,e,r,n){var o,i,a=[];try{for(var s=kv(t),l=s.next();!l.done;l=s.next()){var u=l.value,c=u.tickLabel,p=u.translationY;if(""!==c&&null!=c){var d=Vl(zl(c),e,p,r),h=d.width,f=d.height,v=vv(c,new Ns(e,p,h,f),e,p,n);a.push(v)}}}catch(t){o={error:t}}finally{try{l&&!l.done&&(i=s.return)&&i.call(s)}finally{if(o)throw o.error}}return a},t.prototype.getAutoRotation=function(t){return t?Tl(Pl(this.label.autoRotateAngle)):0},t.prototype.getTicks=function(t){var e,r=t.tickGenerationType,n=t.previousTicks,o=t.tickCount,i=t.minTickCount,a=t.maxTickCount,s=t.primaryTickCount,l=this.scale,u=[];switch(r){case mv.VALUES:u=this.tick.values;break;case mv.CREATE_SECONDARY:u=this.updateSecondaryAxisTicks(s);break;case mv.FILTER:u=this.filterTicks(n,o);break;default:u=this.createTicks(o,i,a)}this.onLabelFormatChange(u,this.label.format),this.fractionDigits=u.fractionDigits>=0?u.fractionDigits:0;for(var c=(null!==(e=this.scale.bandwidth)&&void 0!==e?e:0)/2,p=[],d=0,h=new Map,f=0;f<u.length;f++){var v=u[f],y=l.convert(v)+c,g=this.formatTick(v,f),m=g;if(h.has(m)){var b=h.get(m);h.set(m,b+1),m=m+"_"+b}else h.set(m,1);p.push({tick:v,tickId:m,tickLabel:g,translationY:y}),""!==g&&null!=g&&d++}return{rawTicks:u,ticks:p,labelCount:d}},t.prototype.filterTicks=function(t,e){var r,n=!isNaN(this.tick.minSpacing)||!isNaN(null!==(r=this.tick.maxSpacing)&&void 0!==r?r:NaN)?Math.ceil(t.length/e):2;return t.filter((function(t,e){return e%n==0}))},t.prototype.createTicks=function(t,e,r){var n,o,i;return this.setTickCount(t,e,r),null!==(i=null===(o=(n=this.scale).ticks)||void 0===o?void 0:o.call(n))&&void 0!==i?i:[]},t.prototype.estimateTickCount=function(e){var r=e.minSpacing,n=e.maxSpacing,o=this.calculateAvailableRange(),i=Math.max(t.defaultTickMinSpacing,o/mf.defaultMaxTickCount);isNaN(r)&&isNaN(n)?(r=i)>(n=o)&&(n=r):isNaN(r)?(r=i)>n&&(r=n):isNaN(n)&&r>(n=o)&&(n=r);var a=Math.max(1,Math.floor(o/r)),s=Math.min(a,Math.ceil(o/n)),l=mf.defaultTickCount;return l>a?l=a:l<s&&(l=s),{minTickCount:s,maxTickCount:a,defaultTickCount:l}},t.prototype.updateVisibility=function(){var t=this.range,e=Math.min.apply(Math,Iv([],Fv(t))),r=Math.max.apply(Math,Iv([],Fv(t))),n=function(t){var n=Math.floor(e),o=Math.ceil(r);if(n!==o){t.translationY>=n-1&&t.translationY<n&&(t.translationY=n),t.translationY>o&&t.translationY<=o+1&&(t.translationY=o);var i=t.translationY>=n&&t.translationY<=o;t.visible=i}else t.visible=!1},o=this.gridLineGroupSelection,i=this.tickLineGroupSelection,a=this.tickLabelGroupSelection;o.each(n),i.each(n),a.each(n),this.tickLineGroup.visible=this.tick.enabled,this.tickLabelGroup.visible=this.label.enabled},t.prototype.updateCrossLines=function(t){var e,r=this,n=t.rotation,o=t.parallelFlipRotation,i=t.regularFlipRotation,a=t.sideFlag,s=this.isAnySeriesActive();null===(e=this.crossLines)||void 0===e||e.forEach((function(t){var e;t.sideFlag=-a,t.direction=n===-Math.PI/2?Xu.X:Xu.Y,t.label.parallel=null!==(e=t.label.parallel)&&void 0!==e?e:r.label.parallel,t.parallelFlipRotation=o,t.regularFlipRotation=i,t.update(s)}))},t.prototype.updateTickLines=function(t){var e=this.tick;this.tickLineGroupSelection.each((function(r){r.strokeWidth=e.width,r.stroke=e.color,r.x1=t*e.size,r.x2=0,r.y1=0,r.y2=0}))},t.prototype.calculateAvailableRange=function(){var t=this.range,e=Math.min.apply(Math,Iv([],Fv(t)));return Math.max.apply(Math,Iv([],Fv(t)))-e},t.prototype.calculateDomain=function(){var t,e,r,n=this.direction,o=this.boundSeries,i=this.includeInvisibleDomains;if(this.linkedTo)this.dataDomain=this.linkedTo.dataDomain;else{var a=[],s=o.filter((function(t){return i||t.isEnabled()}));try{for(var l=kv(s),u=l.next();!u.done;u=l.next()){var c=u.value;a.push(c.getDomain(n))}}catch(e){t={error:e}}finally{try{u&&!u.done&&(e=l.return)&&e.call(l)}finally{if(t)throw t.error}}var p=(r=new Array).concat.apply(r,Iv([],Fv(a)));this.dataDomain=this.normaliseDataDomain(p)}},t.prototype.updatePosition=function(t){var e=t.rotation,r=t.sideFlag,n=this,o=n.crossLineGroup,i=n.axisGroup,a=n.gridGroup,s=n.translation,l=n.gridLineGroupSelection,u=n.gridPadding,c=n.gridLength,p=Math.floor(s.x),d=Math.floor(s.y);o.translationX=p,o.translationY=d,o.rotation=e,i.translationX=p,i.translationY=d,i.rotation=e,a.translationX=p,a.translationY=d,a.rotation=e,l.each((function(t){t.x1=u,t.x2=-r*c+u,t.y1=0,t.y2=0}))},t.prototype.updateSecondaryAxisTicks=function(t){throw new Error("AG Charts - unexpected call to updateSecondaryAxisTicks() - check axes configuration.")},t.prototype.updateSelections=function(t){var e=this.gridLength?t:[],r=this.gridLineGroupSelection.update(e,(function(t){var e=new hf;e.tag=gv.GridLine,t.append(e)}),(function(t){return t.tickId})),n=this.tickLineGroupSelection.update(t,(function(t){var e=new hf;e.tag=gv.TickLine,t.appendChild(e)}),(function(t){return t.tickId})),o=this.tickLabelGroupSelection.update(t,(function(t){var e=new Gl;e.tag=gv.TickLabel,t.appendChild(e)}),(function(t){return t.tickId}));this.tickLineGroupSelection=n,this.tickLabelGroupSelection=o,this.gridLineGroupSelection=r},t.prototype.updateGridLines=function(t){var e=this.gridStyle,r=this.tick,n=this.gridPadding,o=this.gridLength;if(0!==o&&0!==e.length){var i=e.length;this.gridLineGroupSelection.each((function(a,s,l){var u=e[l%i];a.x1=n,a.x2=-t*o+n,a.y1=0,a.y2=0,a.stroke=u.stroke,a.strokeWidth=r.width,a.lineDash=u.lineDash,a.fill=void 0}))}},t.prototype.updateLabels=function(t){var e=t.tickLabelGroupSelection,r=t.combinedRotation,n=t.textBaseline,o=t.textAlign,i=t.labelX,a=this.label;this.label.enabled&&e.each((function(t,e){var s=e.tickLabel;t.fontStyle=a.fontStyle,t.fontWeight=a.fontWeight,t.fontSize=a.fontSize,t.fontFamily=a.fontFamily,t.fill=a.color,t.text=s,""===t.text||null==t.text?t.visible=!1:(t.textBaseline=n,t.textAlign=o,t.x=i,t.rotationCenterX=i,t.rotation=r,t.visible=!0)}))},t.prototype.wrapLabels=function(t,e,r){var n=this.label,o=n.parallel,i=n.maxWidth,a=n.maxHeight,s=o?Math.round(this.calculateAvailableRange()/t.labelCount):this.maxThickness,l=null!=i?i:s,u=o?this.maxThickness:Math.round(this.calculateAvailableRange()/t.labelCount),c=null!=a?a:u;return t.ticks.forEach((function(t){var e=t.tickLabel,n=Gl.wrap(e,l,c,r,"hyphenate");t.tickLabel=n})),{tickData:t,index:e,autoRotation:0,terminate:!0}},t.prototype.updateLine=function(){var t=this.lineNode,e=this.range;t.x1=0,t.x2=0,t.y1=e[0],t.y2=e[1],t.strokeWidth=this.line.width,t.stroke=this.line.color,t.visible=!0},t.prototype.updateTitle=function(t){var e,r=t.anyTickVisible,n=t.sideFlag,o=this,i=o.rotation,a=o.title,s=o._titleCaption,l=o.lineNode,u=o.range,c=o.tickLineGroup,p=o.tickLabelGroup,d=o.moduleCtx.callbackCache,h=(null!==(e=this.title)&&void 0!==e?e:{}).formatter,f=void 0===h?function(t){return t.defaultValue}:h;if(a){s.enabled=a.enabled,s.fontFamily=a.fontFamily,s.fontSize=a.fontSize,s.fontStyle=a.fontStyle,s.fontWeight=a.fontWeight,s.color=a.color,s.wrapping=a.wrapping;var v=!1,y=s.node;if(a.enabled&&l.visible){v=!0;var g=Tl(i),m=vf.PADDING,b=-1===n&&g>Math.PI&&g<2*Math.PI?-1:1;y.rotation=b*n*Math.PI/2,y.x=Math.floor(b*n*(u[0]+u[1])/2);var C=0;if(r){var S=fl.computeBBox([c,p]),w=0===i?S.width:S.height;Math.abs(w)<1/0&&(C+=w)}y.y=-1===n?Math.floor(b*(-m-C)):Math.floor(-m-C),y.textBaseline=1===b?"bottom":"top",y.text=d.call(f,this.getTitleFormatterParams())}y.visible=v}else s.enabled=!1},t.prototype.formatTick=function(t,e){var r,n,o=this.label,i=this.labelFormatter,a=this.fractionDigits,s=this.moduleCtx.callbackCache;if(o.formatter){var l=a>0?t:String(t);return null!==(r=s.call(o.formatter,{value:l,index:e,fractionDigits:a,formatter:i}))&&void 0!==r?r:l}return i&&null!==(n=s.call(i,t))&&void 0!==n?n:String(t)},t.prototype.formatDatum=function(t){return String(t)},t.prototype.computeBBox=function(){return this.axisGroup.computeBBox()},t.prototype.initCrossLine=function(t){t.scale=this.scale,t.gridLength=this.gridLength},t.prototype.isAnySeriesActive=function(){var t=this;return this.boundSeries.some((function(e){return t.includeInvisibleDomains||e.isEnabled()}))},t.prototype.clipTickLines=function(t,e,r,n){this.tickLineGroup.setClipRectInGroupCoordinateSpace(new Ns(t,e,r,n))},t.prototype.clipGrid=function(t,e,r,n){this.gridGroup.setClipRectInGroupCoordinateSpace(new Ns(t,e,r,n))},t.prototype.calculatePadding=function(t,e){return[Math.abs(.01*t),Math.abs(.01*t)]},t.prototype.getTitleFormatterParams=function(){var t,e=this,r=this.boundSeries.reduce((function(t,r){for(var n=r.getKeys(e.direction),o=r.getNames(e.direction),i=0;i<n.length;i++)t.push({key:n[i],name:o[i]});return t}),[]);return{direction:this.direction,boundSeries:r,defaultValue:null===(t=this.title)||void 0===t?void 0:t.text}},t.prototype.normaliseDataDomain=function(t){return t},t.prototype.getLayoutState=function(){return Mv({rect:this.computeBBox(),gridPadding:this.gridPadding,seriesAreaPadding:this.seriesAreaPadding,tickSize:this.tick.size},this.layout)},t.prototype.createAxisContext=function(){var t=this;return{axisId:this.id,direction:this.direction,continuous:this.scale instanceof mf,keys:function(){return t.boundSeries.map((function(e){return e.getKeys(t.direction)})).reduce((function(t,e){return t.push.apply(t,Iv([],Fv(e))),t}),[])},scaleValueFormatter:function(e){var r,n,o;return null!==(o=null===(n=(r=t.scale).tickFormat)||void 0===n?void 0:n.call(r,{specifier:e}))&&void 0!==o?o:void 0},scaleBandwidth:function(){var e;return null!==(e=t.scale.bandwidth)&&void 0!==e?e:0},scaleConvert:function(e){return t.scale.convert(e)},scaleInvert:function(e){var r,n,o;return null!==(o=null===(n=(r=t.scale).invert)||void 0===n?void 0:n.call(r,e))&&void 0!==o?o:void 0}}},t.prototype.addModule=function(t){if(null!=this.modules[t.optionsKey])throw new Error("AG Charts - module already initialised: "+t.optionsKey);null==this.axisContext&&(this.axisContext=this.createAxisContext());var e=new t.instanceConstructor(Mv(Mv({},this.moduleCtx),{parent:this.axisContext}));this.modules[t.optionsKey]={instance:e},this[t.optionsKey]=e},t.prototype.removeModule=function(t){var e,r;null===(r=null===(e=this.modules[t.optionsKey])||void 0===e?void 0:e.instance)||void 0===r||r.destroy(),delete this.modules[t.optionsKey],delete this[t.optionsKey]},t.prototype.isModuleEnabled=function(t){return null!=this.modules[t.optionsKey]},t.prototype.animateReadyUpdate=function(t){var e,r,n=this;if(t.changed){var o=this.gridLineGroupSelection,i=this.tickLineGroupSelection,a=this.tickLabelGroupSelection,s=Object.keys(t.added).length,l=Object.keys(t.removed).length;if(l!==t.tickCount){var u=null!==(r=null===(e=this.animationManager)||void 0===e?void 0:e.defaultOptions.duration)&&void 0!==r?r:1e3,c=Math.floor(u/2);s>0&&l>0&&(c=Math.floor(u/3));var p={delay:l>0?c:0,duration:c},d=this.id+"_"+Math.random();a.each((function(e,r){n.animateSelectionNode(a,t,p,e,r,d)})),o.each((function(e,r){n.animateSelectionNode(o,t,p,e,r,d)})),i.each((function(e,r){n.animateSelectionNode(i,t,p,e,r,d)}))}else this.resetSelectionNodes()}else this.resetSelectionNodes()},t.prototype.animateSelectionNode=function(t,e,r,n,o,i){var a=Math.round(o.translationY),s={from:n.translationY,to:a},l={from:1,to:1},u=r.duration,c=r.delay,p=o.tickLabel;e.added[p]?(s={from:a,to:a},l={from:0,to:1},c+=u):e.removed[p]&&(l={from:1,to:0},c=0);var d=[s,l];this.animationManager.animateManyWithThrottle(this.id+"_ready-update_"+n.id,d,{disableInteractions:!1,delay:c,duration:u,ease:Kp,throttleId:this.id,throttleGroup:i,onUpdate:function(t){var e=Fv(t,2),r=e[0],o=e[1];n.translationY=r,n.opacity=o},onComplete:function(){t.cleanup()}})},t.prototype.resetSelectionNodes=function(){var t=this.gridLineGroupSelection,e=this.tickLineGroupSelection,r=this.tickLabelGroupSelection;t.cleanup(),e.cleanup(),r.cleanup();var n=function(t){t.translationY=Math.round(t.datum.translationY),t.opacity=1};t.each(n),e.each(n),r.each(n)},t.prototype.calculateUpdateDiff=function(t,e){for(var r,n=new Set,o=new Set,i=Math.max(t.length,e.ticks.length),a=0;a<i;a++){var s=t[a],l=null===(r=e.ticks[a])||void 0===r?void 0:r.tickId;s!==l&&(o.has(l)?o.delete(l):l&&n.add(l),n.has(s)?n.delete(s):s&&o.add(s))}var u={},c={};return n.forEach((function(t){u[t]=!0})),o.forEach((function(t){c[t]=!0})),{changed:n.size>0||o.size>0,tickCount:i,added:u,removed:c}},t.defaultTickMinSpacing=50,_v([nu(fu)],t.prototype,"nice",void 0),_v([nu(Ru)],t.prototype,"keys",void 0),_v([nu(Nv)],t.prototype,"gridStyle",void 0),t}(),Vv=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},Bv=function(){function t(){this.enabled=!1,this.text=void 0,this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=10,this.fontFamily="sans-serif",this.color=void 0,this.wrapping="always",this.formatter=void 0}return Vv([nu(fu)],t.prototype,"enabled",void 0),Vv([nu(gu)],t.prototype,"text",void 0),Vv([nu(Nu)],t.prototype,"fontStyle",void 0),Vv([nu(ju)],t.prototype,"fontWeight",void 0),Vv([nu(Pu(0))],t.prototype,"fontSize",void 0),Vv([nu(yu)],t.prototype,"fontFamily",void 0),Vv([nu(Ou)],t.prototype,"color",void 0),Vv([nu(Qu)],t.prototype,"wrapping",void 0),Vv([nu(hu)],t.prototype,"formatter",void 0),t}(),Uv=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Hv=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},zv=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.enabled=!0,e.color="rgba(0, 0, 0, 0.5)",e.xOffset=0,e.yOffset=0,e.blur=5,e}return Uv(e,t),Hv([nu(fu),zs({redraw:ks.MAJOR})],e.prototype,"enabled",void 0),Hv([nu(xu),zs({redraw:ks.MAJOR})],e.prototype,"color",void 0),Hv([nu(Pu()),zs({redraw:ks.MAJOR})],e.prototype,"xOffset",void 0),Hv([nu(Pu()),zs({redraw:ks.MAJOR})],e.prototype,"yOffset",void 0),Hv([nu(Pu(0)),zs({redraw:ks.MAJOR})],e.prototype,"blur",void 0),e}(Ks),Wv=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Kv=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},Xv=function(t){function e(){var e=t.call(this,[0,1],[0,1])||this;return e.type="linear",e}return Wv(e,t),e.prototype.toDomain=function(t){return t},e.prototype.ticks=function(){var t,e=null!==(t=this.tickCount)&&void 0!==t?t:mf.defaultTickCount;if(!this.domain||this.domain.length<2||e<1||this.domain.some((function(t){return!isFinite(t)})))return[];this.refresh();var r=Kv(this.getDomain(),2),n=r[0],o=r[1],i=this.interval;if(i){var a=Math.abs(i);if(!this.isDenseInterval({start:n,stop:o,interval:a}))return Of(n,o,a)}return Cf(n,o,e,this.minTickCount,this.maxTickCount)},e.prototype.update=function(){!this.domain||this.domain.length<2||this.nice&&this.updateNiceDomain()},e.prototype.updateNiceDomain=function(){var t,e,r=null!==(t=this.tickCount)&&void 0!==t?t:mf.defaultTickCount,n=Kv(this.domain,2),o=n[0],i=n[1];if(r<1)this.niceDomain=[o,i];else if(1!==r){for(var a=o,s=i,l=0;l<4;l++){var u=null!==(e=this.interval)&&void 0!==e?e:wf(o,i,r,this.minTickCount,this.maxTickCount),c=Kv(this.domain,2),p=c[0],d=c[1];if(u>=1)o=Math.floor(p/u)*u,i=Math.ceil(d/u)*u;else{var h=1/u;o=Math.floor(p*h)/h,i=Math.ceil(d*h)/h}if(o===a&&i===s)break;a=o,s=i}this.niceDomain=[o,i]}else this.niceDomain=function(t,e){var r=Math.floor(Math.log10(e-t)),n=Math.pow(10,r);return Sf.map((function(r){var o=r*n,i=Math.floor(t/o)*o,a=Math.ceil(e/o)*o;return{error:1-(e-t)/(a-i),domain:[i,a]}})).sort((function(t,e){return t.error-e.error}))[0].domain}(o,i)},e.prototype.tickFormat=function(t){var e=t.ticks,r=t.specifier;return function(t,e){var r=qf(null!=e?e:",f"),n=r.precision;(null==n||isNaN(n))&&("f"===r.type||"%"===r.type?r.precision=Math.max.apply(Math,Hf([],Uf(t.map((function(t){if("number"!=typeof t||0===t)return 0;var e=Math.floor(Math.log10(Math.abs(t))),n=r.type?6:12,o=t.toExponential(n-1).replace(/\.?0+e/,"e"),i=o.indexOf(".");if(i<0)return e>=0?0:-e;var a=o.indexOf("e")-i;return Math.max(0,a-e-1)}))))):r.type&&!(r.type in Qf)||(r.precision=Math.max.apply(Math,Hf([],Uf(t.map((function(t){if("number"!=typeof t)return 0;var e=t.toExponential((r.type?6:12)-1).replace(/\.?0+e/,"e");return e.substring(0,e.indexOf("e")).replace(".","").length})))))));var o=Zf(r);return function(t){return o(Number(t))}}(null!=e?e:this.ticks(),r)},e}(mf);function Yv(t,e,r){return void 0===r&&(r=1e-10),Math.abs(t-e)<r}function qv(t,e){void 0===e&&(e=2);var r=Math.floor(Math.log(Math.abs(t))/Math.LN10);return r>=0||!isFinite(r)?t.toFixed(e):t.toFixed(Math.abs(r)-1+e)}function Zv(t,e,r){var n=Math.sqrt(Math.pow(t,2)+Math.pow(e,2)),o=r.innerRadius,i=r.outerRadius;if(n<Math.min(o,i)||n>Math.max(o,i))return!1;var a=Math.atan2(e,t);a<-Math.PI/2&&(a+=2*Math.PI);var s=r.startAngle,l=r.endAngle;return l===-Math.PI/2?a<s:s===3*Math.PI/2?a>l:a<=l&&a>=s}function Jv(t,e){var r=e.startAngle,n=e.endAngle,o=e.innerRadius,i=e.outerRadius,a={x:i*Math.cos(r),y:i*Math.sin(r)},s={x:i*Math.cos(n),y:i*Math.sin(n)},l=0===o?{x:0,y:0}:{x:o*Math.cos(r),y:o*Math.sin(r)},u=0===o?{x:0,y:0}:{x:o*Math.cos(n),y:o*Math.sin(n)};return null!=Nd(t.start.x,t.start.y,t.end.x,t.end.y,a.x,a.y,l.x,l.y)||null!=Nd(t.start.x,t.start.y,t.end.x,t.end.y,s.x,s.y,u.x,u.y)||Vd(0,0,i,r,n,!0,t.start.x,t.start.y,t.end.x,t.end.y).length>0}var $v,Qv=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ty=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},ey=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.centerX=0,e.centerY=0,e.innerRadius=10,e.outerRadius=20,e.startAngle=0,e.endAngle=2*Math.PI,e.angleOffset=0,e}return Qv(e,t),e.prototype.computeBBox=function(){var t=this.outerRadius;return new Ns(this.centerX-t,this.centerY-t,2*t,2*t)},e.prototype.updatePath=function(){var t=this.path,e=this.angleOffset,r=this.startAngle+e,n=this.endAngle+e,o=Math.min(this.innerRadius,this.outerRadius),i=Math.max(this.innerRadius,this.outerRadius),a=Yv(Tl(this.startAngle),Tl(this.endAngle)),s=this.centerX,l=this.centerY;t.clear(),a?(t.arc(s,l,i,r,n),o>0&&(t.moveTo(s+o*Math.cos(n),l+o*Math.sin(n)),t.arc(s,l,o,n,r,!0))):(t.moveTo(s+o*Math.cos(r),l+o*Math.sin(r)),t.arc(s,l,i,r,n),o>0?t.arc(s,l,o,n,r,!0):t.lineTo(s,l)),t.closePath(),this.dirtyPath=!1},e.prototype.isPointInPath=function(t,e){var r=this.angleOffset,n=this.startAngle+r,o=this.endAngle+r,i=Math.min(this.innerRadius,this.outerRadius),a=Math.max(this.innerRadius,this.outerRadius),s=this.transformPoint(t,e);return Zv(s.x,s.y,{startAngle:n,endAngle:o,innerRadius:i,outerRadius:a})},e.className="Sector",ty([Kd()],e.prototype,"centerX",void 0),ty([Kd()],e.prototype,"centerY",void 0),ty([Kd()],e.prototype,"innerRadius",void 0),ty([Kd()],e.prototype,"outerRadius",void 0),ty([Kd()],e.prototype,"startAngle",void 0),ty([Kd()],e.prototype,"endAngle",void 0),ty([Kd()],e.prototype,"angleOffset",void 0),e}(Xd),ry=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ny=function(t){function e(e){var r,n,o=e.moduleCtx,i=e.useLabelLayer,a=void 0!==i&&i,s=e.pickModes,l=void 0===s?[Bc.EXACT_SHAPE_MATCH]:s,u=t.call(this,{moduleCtx:o,useLabelLayer:a,pickModes:l,contentGroupVirtual:!1,directionKeys:(r={},r[Xu.X]=["angleKey"],r[Xu.Y]=["radiusKey"],r),directionNames:(n={},n[Xu.X]=["angleName"],n[Xu.Y]=["radiusName"],n)})||this;return u.centerX=0,u.centerY=0,u.radius=0,u}return ry(e,t),e.prototype.getLabelData=function(){return[]},e.prototype.computeLabelsBBox=function(t,e){return null},e}(up),oy=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),iy=function(){return(iy=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},ay=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},sy=function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{l(n.next(t))}catch(t){i(t)}}function s(t){try{l(n.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}l((n=n.apply(t,e||[])).next())}))},ly=function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},uy=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},cy=function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t},py=function(t){function e(e,r,n,o,i,a,s){var l=t.call(this,i,a,s)||this;return l.angleKey=e,l.calloutLabelKey=r,l.sectorLabelKey=n,l.radiusKey=o,l}return oy(e,t),e}(tp),dy=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="nodeClick",e}return oy(e,t),e}(py),hy=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="nodeDoubleClick",e}return oy(e,t),e}(py);!function(t){t[t.Sector=0]="Sector",t[t.Callout=1]="Callout",t[t.Label=2]="Label"}($v||($v={}));var fy=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.offset=3,e.minAngle=0,e.formatter=void 0,e.minSpacing=4,e.maxCollisionOffset=50,e.avoidCollisions=!0,e}return oy(e,t),ay([nu(Pu(0))],e.prototype,"offset",void 0),ay([nu(Pu(0))],e.prototype,"minAngle",void 0),ay([nu(hu)],e.prototype,"formatter",void 0),ay([nu(Pu(0))],e.prototype,"minSpacing",void 0),ay([nu(Pu(0))],e.prototype,"maxCollisionOffset",void 0),ay([nu(fu)],e.prototype,"avoidCollisions",void 0),e}(dv),vy=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.positionOffset=0,e.positionRatio=.5,e.formatter=void 0,e}return oy(e,t),ay([nu(Pu())],e.prototype,"positionOffset",void 0),ay([nu(Pu(0,1))],e.prototype,"positionRatio",void 0),ay([nu(hu)],e.prototype,"formatter",void 0),e}(dv),yy=function(){function t(){this.colors=void 0,this.length=10,this.strokeWidth=1}return ay([nu(Tu)],t.prototype,"colors",void 0),ay([nu(Pu(0))],t.prototype,"length",void 0),ay([nu(Pu(0))],t.prototype,"strokeWidth",void 0),t}(),gy=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.renderer=void 0,e}return oy(e,t),ay([nu(hu)],e.prototype,"renderer",void 0),e}(sp),my=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.showInLegend=!1,e}return oy(e,t),ay([nu(fu)],e.prototype,"showInLegend",void 0),e}(vf),by=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.text="",e.margin=2,e}return oy(e,t),ay([nu(yu)],e.prototype,"text",void 0),ay([nu(Pu())],e.prototype,"margin",void 0),e}(dv),Cy=function(){function t(){this.fill="transparent",this.fillOpacity=1}return ay([nu(xu)],t.prototype,"fill",void 0),ay([nu(Du(0,1))],t.prototype,"fillOpacity",void 0),t}(),Sy=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return oy(e,t),e}(Dv),wy=function(t){function e(e){var r,n,o,i=t.call(this,{moduleCtx:e,useLabelLayer:!0})||this;i.radiusScale=new Xv,i.groupSelection=Fd.select(i.contentGroup,fl),i.highlightSelection=Fd.select(i.highlightGroup,fl),i.nodeData=[],i.seriesItemEnabled=[],i.title=void 0,i.calloutLabel=new fy,i.sectorLabel=new vy,i.calloutLine=new yy,i.tooltip=new gy,i.angleKey="",i.angleName="",i.innerLabels=[],i.innerCircle=void 0,i.radiusKey=void 0,i.radiusName=void 0,i.radiusMin=void 0,i.radiusMax=void 0,i.calloutLabelKey=void 0,i.calloutLabelName=void 0,i.sectorLabelKey=void 0,i.sectorLabelName=void 0,i.legendItemKey=void 0,i.fills=["#c16068","#a2bf8a","#ebcc87","#80a0c3","#b58dae","#85c0d1"],i.strokes=["#874349","#718661","#a48f5f","#5a7088","#7f637a","#5d8692"],i.fillOpacity=1,i.strokeOpacity=1,i.lineDash=[0],i.lineDashOffset=0,i.formatter=void 0,i.rotation=0,i.outerRadiusOffset=0,i.outerRadiusRatio=1,i.innerRadiusOffset=0,i.innerRadiusRatio=1,i.strokeWidth=1,i.shadow=void 0,i.highlightStyle=new ap,i.surroundingRadius=void 0,i.angleScale=new Xv,i.angleScale.domain=[0,1],i.angleScale.range=[-Math.PI,Math.PI].map((function(t){return t+Math.PI/2})),i.backgroundGroup=i.rootGroup.appendChild(new fl({name:i.id+"-background",layer:!0,zIndex:Ku.SERIES_BACKGROUND_ZINDEX}));var a=new fl({name:"pieCalloutLabels"}),s=new fl({name:"pieSectorLabels"}),l=new fl({name:"innerLabels"});return null===(r=i.labelGroup)||void 0===r||r.append(a),null===(n=i.labelGroup)||void 0===n||n.append(s),null===(o=i.labelGroup)||void 0===o||o.append(l),i.calloutLabelSelection=Fd.select(a,fl),i.sectorLabelSelection=Fd.select(s,Gl),i.innerLabelsSelection=Fd.select(l,Gl),i.animationState=new Sy("empty",{empty:{on:{update:{target:"ready",action:function(){return i.animateEmptyUpdateReady()}}}},ready:{on:{update:{target:"ready",action:function(){return i.animateReadyUpdateReady()}}}}}),i}return oy(e,t),Object.defineProperty(e.prototype,"data",{get:function(){return this._data},set:function(t){this._data=t,this.processSeriesItemEnabled()},enumerable:!1,configurable:!0}),e.prototype.addChartEventListeners=function(){var t,e=this;null===(t=this.ctx.chartEventManager)||void 0===t||t.addListener("legend-item-click",(function(t){return e.onLegendItemClick(t)}))},e.prototype.visibleChanged=function(){this.processSeriesItemEnabled()},e.prototype.processSeriesItemEnabled=function(){var t,e=this.data,r=this.visible;this.seriesItemEnabled=null!==(t=null==e?void 0:e.map((function(){return r})))&&void 0!==t?t:[]},e.prototype.getDomain=function(t){return t===Xu.X?this.angleScale.domain:this.radiusScale.domain},e.prototype.processData=function(t){var e,r;return sy(this,void 0,void 0,(function(){var n,o,i,a,s,l,u,c,p,d,h,f,v;return ly(this,(function(y){switch(y.label){case 0:return n=this.data,o=void 0===n?[]:n,a=(i=this).angleKey,s=i.radiusKey,l=i.calloutLabelKey,u=i.sectorLabelKey,c=i.legendItemKey,p=i.seriesItemEnabled,a?(d=[],s&&(d.push(function(t,e,r){void 0===r&&(r={});var n=r.min,o=void 0===n?-1/0:n,i=r.max,a=void 0===i?1/0:i,s=Wc(r,["min","max"]);return Hc({scopes:[t.id],type:"value",property:e,valueType:"range",validation:qc,processor:function(){return function(t){return"number"!=typeof t||isNaN(t)?t:Math.min(Math.max(t,o),a)}}},s)}(this,s,{id:"radiusValue",min:null!==(e=this.radiusMin)&&void 0!==e?e:0,max:this.radiusMax}),$c(this,s,!0,{id:"radiusRaw"}),kc(this,{id:"radiusValue"},[0,1],null!==(r=this.radiusMin)&&void 0!==r?r:0,this.radiusMax)),d.push()),l&&d.push($c(this,l,!1,{id:"calloutLabelValue"})),u&&d.push($c(this,u,!1,{id:"sectorLabelValue"})),c&&d.push($c(this,c,!1,{id:"legendItemValue"})),o=o.map((function(t,e){var r;return p[e]?t:iy(iy({},t),((r={})[a]=0,r))})),[4,t.request(this.id,o,{props:cy([(g=this,m=a,b=!0,C={id:"angleValue"},void 0===C&&(C={}),Hc(Hc({},$c(g,m,b,C)),{processor:function(){var t=0;return function(e){return"number"!=typeof e||isNaN(e)?e:t+=e}}})),$c(this,a,!0,{id:"angleRaw"}),kc(this,{id:"angleValue"},[0,1],0)],uy(d))})]):[2];case 1:return h=y.sent(),f=h.dataModel,v=h.processedData,this.dataModel=f,this.processedData=v,[2]}var g,m,b,C}))}))},e.prototype.maybeRefreshNodeData=function(){if(this.nodeDataRefresh){var t=uy(this._createNodeData(),1)[0],e=(void 0===t?{}:t).nodeData,r=void 0===e?[]:e;this.nodeData=r,this.nodeDataRefresh=!1}},e.prototype.createNodeData=function(){return sy(this,void 0,void 0,(function(){return ly(this,(function(t){return[2,this._createNodeData()]}))}))},e.prototype.getProcessedDataIndexes=function(t){return{angleIdx:t.resolveProcessedDataIndexById(this,"angleValue").index,radiusIdx:this.radiusKey?t.resolveProcessedDataIndexById(this,"radiusValue").index:-1,calloutLabelIdx:this.calloutLabelKey?t.resolveProcessedDataIndexById(this,"calloutLabelValue").index:-1,sectorLabelIdx:this.sectorLabelKey?t.resolveProcessedDataIndexById(this,"sectorLabelValue").index:-1,legendItemIdx:this.legendItemKey?t.resolveProcessedDataIndexById(this,"legendItemValue").index:-1}},e.prototype._createNodeData=function(){var t=this,e=this,r=e.id,n=e.processedData,o=e.dataModel,i=e.rotation,a=e.angleScale;if(!n||!o||"ungrouped"!==n.type)return[];var s=this.getProcessedDataIndexes(o),l=s.angleIdx,u=s.radiusIdx,c=s.calloutLabelIdx,p=s.sectorLabelIdx,d=s.legendItemIdx,h=0,f=n.data.map((function(e,r){var n,o=e.datum,s=e.values,f=s[l],v=a.convert(h)+Pl(i);h=f;var y=a.convert(h)+Pl(i),g=Math.abs(y-v),m=v+g/2,b=s[l+1],C=u>=0&&null!==(n=s[u])&&void 0!==n?n:1,S=u>=0?s[u+1]:void 0,w=d>=0?s[d]:void 0,x=t.getLabels(o,m,g,!0,f,S,s[c],s[p],w),O=t.getSectorFormat(o,r,r,!1);return iy({itemId:r,series:t,datum:o,index:r,angleValue:b,midAngle:m,midCos:Math.cos(m),midSin:Math.sin(m),startAngle:v,endAngle:y,sectorFormat:O,radius:C,radiusValue:S,legendItemValue:w},x)}));return[{itemId:r,nodeData:f,labelData:f}]},e.prototype.getLabels=function(t,e,r,n,o,i,a,s,l){var u=this.calloutLabel,c=this.sectorLabel,p=this.legendItemKey,d=this.ctx.callbackCache,h=!n||u.enabled?this.calloutLabelKey:void 0,f=!n||c.enabled?this.sectorLabelKey:void 0;if(!h&&!f&&!p)return{};var v,y,g=this.getLabelFormatterParams(t,o,i,a,s);h&&(v=r>Pl(u.minAngle)?u.formatter?d.call(u.formatter,g):String(a):void 0);return f&&(y=c.formatter?d.call(c.formatter,g):String(s)),iy(iy(iy({},null!=v?{calloutLabel:iy(iy({},this.getTextAlignment(e)),{text:v,hidden:!1,collisionTextAlign:void 0,collisionOffsetY:0,box:void 0})}:{}),null!=y?{sectorLabel:{text:y}}:{}),null!=p&&null!=l?{legendItem:{key:p,text:l}}:{})},e.prototype.getLabelFormatterParams=function(t,e,r,n,o){var i=this,a=i.id,s=i.radiusKey,l=i.radiusName;return{datum:t,angleKey:i.angleKey,angleValue:e,angleName:i.angleName,radiusKey:s,radiusValue:r,radiusName:l,calloutLabelKey:i.calloutLabelKey,calloutLabelValue:n,calloutLabelName:i.calloutLabelName,sectorLabelKey:i.sectorLabelKey,sectorLabelValue:o,sectorLabelName:i.sectorLabelName,seriesId:a}},e.prototype.getTextAlignment=function(t){var e,r,n,o=[{textAlign:"center",textBaseline:"bottom"},{textAlign:"left",textBaseline:"middle"},{textAlign:"center",textBaseline:"hanging"},{textAlign:"right",textBaseline:"middle"}],i=(e=t,(e%=El)<-Math.PI?e+=El:e>=Math.PI&&(e-=El),e)- -3*Math.PI/4,a=Math.floor(i/(Math.PI/2));return o[(n=o.length,(r=a)>=0?Math.floor(r%n):Math.floor(r%n+n))]},e.prototype.getSectorFormat=function(t,e,r,n){var o,i,a,s,l,u,c,p,d,h=this,f=h.angleKey,v=h.radiusKey,y=h.fills,g=h.strokes,m=h.fillOpacity,b=h.formatter,C=h.id,S=h.ctx,w=S.callbackCache,x=S.highlightManager,O=null==x?void 0:x.getActiveHighlight(),E=n&&(null==O?void 0:O.series)===this&&e===O.itemId,T=E?this.highlightStyle.item:null,P=null!==(o=null==T?void 0:T.fill)&&void 0!==o?o:y[r%y.length],D=null!==(i=null==T?void 0:T.fillOpacity)&&void 0!==i?i:m,A=null!==(a=null==T?void 0:T.stroke)&&void 0!==a?a:g[r%g.length],M=null!==(s=null==T?void 0:T.strokeWidth)&&void 0!==s?s:this.getStrokeWidth(this.strokeWidth);return b&&(d=w.call(b,{datum:t,angleKey:f,radiusKey:v,fill:P,stroke:A,strokeWidth:M,highlighted:E,seriesId:C})),{fill:null!==(l=null==d?void 0:d.fill)&&void 0!==l?l:P,fillOpacity:null!==(u=null==d?void 0:d.fillOpacity)&&void 0!==u?u:D,stroke:null!==(c=null==d?void 0:d.stroke)&&void 0!==c?c:A,strokeWidth:null!==(p=null==d?void 0:d.strokeWidth)&&void 0!==p?p:M}},e.prototype.getInnerRadius=function(){var t=this.radius,e=this.innerRadiusRatio,r=this.innerRadiusOffset,n=t*(null!=e?e:1)+(r||0);return n===t||n<0?0:n},e.prototype.getOuterRadius=function(){var t=this.radius,e=this.outerRadiusRatio,r=this.outerRadiusOffset,n=t*(null!=e?e:1)+(r||0);return n<0?0:n},e.prototype.updateRadiusScale=function(){var t=this.getInnerRadius(),e=this.getOuterRadius();this.radiusScale.range=[t,e]},e.prototype.getTitleTranslationY=function(){var t,e,r=Math.max(0,this.radiusScale.range[1]);return 0===r?NaN:-r-(2+(null!==(e=null===(t=this.title)||void 0===t?void 0:t.spacing)&&void 0!==e?e:0))-Math.max(0,-r)},e.prototype.update=function(t){var e=t.seriesRect;return sy(this,void 0,void 0,(function(){var t,r,n;return ly(this,(function(o){switch(o.label){case 0:return t=this.title,this.maybeRefreshNodeData(),this.updateTitleNodes(),this.updateRadiusScale(),this.updateInnerCircleNodes(),this.contentGroup.translationX=this.centerX,this.contentGroup.translationY=this.centerY,this.highlightGroup.translationX=this.centerX,this.highlightGroup.translationY=this.centerY,this.backgroundGroup.translationX=this.centerX,this.backgroundGroup.translationY=this.centerY,this.labelGroup&&(this.labelGroup.translationX=this.centerX,this.labelGroup.translationY=this.centerY),t&&(r=this.getTitleTranslationY(),n=t.node.computeBBox(),t.node.visible=t.enabled&&isFinite(r)&&!this.bboxIntersectsSurroundingSeries(n,0,r),t.node.translationY=isFinite(r)?r:0),this.updateNodeMidPoint(),[4,this.updateSelections()];case 1:return o.sent(),[4,this.updateNodes(e)];case 2:return o.sent(),[2]}}))}))},e.prototype.updateTitleNodes=function(){var t,e,r=this.title,n=this.oldTitle;n!==r&&(n&&(null===(t=this.labelGroup)||void 0===t||t.removeChild(n.node)),r&&(r.node.textBaseline="bottom",null===(e=this.labelGroup)||void 0===e||e.appendChild(r.node)),this.oldTitle=r)},e.prototype.updateInnerCircleNodes=function(){var t,e=this.innerCircle,r=this.oldInnerCircle,n=this.innerCircleNode;if(r!==e){var o=void 0;n&&this.backgroundGroup.removeChild(n),e&&((o=new oh).fill=e.fill,o.fillOpacity=null!==(t=e.fillOpacity)&&void 0!==t?t:1,this.backgroundGroup.appendChild(o)),this.oldInnerCircle=e,this.innerCircleNode=o}},e.prototype.updateNodeMidPoint=function(){var t=this;this.nodeData.forEach((function(e){var r=t.radiusScale.convert(e.radius);e.nodeMidPoint={x:e.midCos*Math.max(0,r/2),y:e.midSin*Math.max(0,r/2)}}))},e.prototype.updateSelections=function(){return sy(this,void 0,void 0,(function(){return ly(this,(function(t){switch(t.label){case 0:return[4,this.updateGroupSelection()];case 1:return t.sent(),[2]}}))}))},e.prototype.updateGroupSelection=function(){return sy(this,void 0,void 0,(function(){var t,e,r,n,o,i,a,s=this;return ly(this,(function(l){return e=(t=this).groupSelection,r=t.highlightSelection,n=t.calloutLabelSelection,o=t.sectorLabelSelection,i=t.innerLabelsSelection,a=function(t){return t.update(s.nodeData,(function(t){var e=new ey;e.tag=$v.Sector,t.appendChild(e)}))},this.groupSelection=a(e),this.highlightSelection=a(r),n.update(this.nodeData,(function(t){var e=new hf;e.tag=$v.Callout,e.pointerEvents=Ws.None,t.appendChild(e);var r=new Gl;r.tag=$v.Label,r.pointerEvents=Ws.None,t.appendChild(r)})),o.update(this.nodeData,(function(t){t.pointerEvents=Ws.None})),i.update(this.innerLabels,(function(t){t.pointerEvents=Ws.None})),[2]}))}))},e.prototype.updateNodes=function(t){var e;return sy(this,void 0,void 0,(function(){var r,n,o,i,a,s=this;return ly(this,(function(l){return r=null===(e=this.ctx.highlightManager)||void 0===e?void 0:e.getActiveHighlight(),n=this.seriesItemEnabled.indexOf(!0)>=0,this.rootGroup.visible=n,this.backgroundGroup.visible=n,this.contentGroup.visible=n,this.highlightGroup.visible=n&&(null==r?void 0:r.series)===this,this.labelGroup&&(this.labelGroup.visible=n),this.contentGroup.opacity=this.getOpacity(),this.updateInnerCircle(),o=this.radiusScale,i=o.convert(0),a=function(t,e,r,n){var a=o.convert(e.radius),l=t.parent,u=null==l?void 0:l.parent;n&&l&&u&&(u.removeChild(l),u.appendChild(l)),t.innerRadius=Math.max(0,i),t.outerRadius=Math.max(0,a),n&&(t.startAngle=e.startAngle,t.endAngle=e.endAngle);var c=s.getSectorFormat(e.datum,e.itemId,r,n);t.fill=c.fill,t.stroke=c.stroke,t.strokeWidth=c.strokeWidth,t.fillOpacity=c.fillOpacity,t.strokeOpacity=s.strokeOpacity,t.lineDash=s.lineDash,t.lineDashOffset=s.lineDashOffset,t.fillShadow=s.shadow,t.lineJoin="round",t.visible=s.seriesItemEnabled[r]},this.groupSelection.selectByTag($v.Sector).forEach((function(t,e){return a(t,t.datum,e,!1)})),this.highlightSelection.selectByTag($v.Sector).forEach((function(t,e){var n=(null==r?void 0:r.series)===s&&t.datum.itemId===r.itemId;n?a(t,t.datum,e,n):t.visible=!1})),this.animationState.transition("update"),this.updateCalloutLineNodes(),this.updateCalloutLabelNodes(t),this.updateSectorLabelNodes(),this.updateInnerLabelNodes(),[2]}))}))},e.prototype.updateCalloutLineNodes=function(){var t,e=this.radiusScale,r=this.calloutLine,n=r.length,o=r.strokeWidth,i=null!==(t=r.colors)&&void 0!==t?t:this.strokes,a=this.calloutLabel.offset;this.calloutLabelSelection.selectByTag($v.Callout).forEach((function(t,r){var s=t.datum,l=e.convert(s.radius),u=Math.max(0,l),c=s.calloutLabel;if((null==c?void 0:c.text)&&!c.hidden&&0!==u){t.visible=!0,t.strokeWidth=o,t.stroke=i[r%i.length],t.fill=void 0;var p=s.midCos*u,d=s.midSin*u,h=s.midCos*(u+n),f=s.midSin*(u+n);if((c.collisionTextAlign||0!==c.collisionOffsetY)&&null!=c.box){var v=c.box,y=h,g=f;h<v.x?y=v.x:h>v.x+v.width&&(y=v.x+v.width),f<v.y?g=v.y:f>v.y+v.height&&(g=v.y+v.height);var m=y-h,b=g-f,C=Math.sqrt(Math.pow(m,2)+Math.pow(b,2)),S=C-a;S>0&&(h+=m*S/C,f+=b*S/C)}t.x1=p,t.y1=d,t.x2=h,t.y2=f}else t.visible=!1}))},e.prototype.getLabelOverflow=function(t,e,r){var n=r.x-this.centerX,o=r.x+r.width-this.centerX,i=r.y-this.centerY,a=r.y+r.height-this.centerY,s=1;e.x+1<n?s=(e.x+e.width-n)/e.width:e.x+e.width-1>o&&(s=(o-e.x)/e.width);var l=e.y+1<i||e.y+e.height-1>a;return{textLength:1===s?t.length:Math.floor(t.length*s)-1,hasVerticalOverflow:l,hasSurroundingSeriesOverflow:this.bboxIntersectsSurroundingSeries(e)}},e.prototype.bboxIntersectsSurroundingSeries=function(t,e,r){void 0===e&&(e=0),void 0===r&&(r=0);var n=this.surroundingRadius;if(null==n)return!1;var o=[{x:t.x+e,y:t.y+r},{x:t.x+t.width+e,y:t.y+r},{x:t.x+t.width+e,y:t.y+t.height+r},{x:t.x+e,y:t.y+t.height+r}],i=Math.pow(n,2);return o.some((function(t){return Math.pow(t.x,2)+Math.pow(t.y,2)>i}))},e.prototype.computeCalloutLabelCollisionOffsets=function(){var t=this,e=this.radiusScale,r=this.calloutLabel,n=this.calloutLine,o=r.offset,i=r.minSpacing,a=e.convert(0),s=this.nodeData,l=this.nodeData.filter((function(t){return n=(r=t).calloutLabel,o=e.convert(r.radius),i=Math.max(0,o),!(!n||0===i);var r,n,o,i}));if(l.forEach((function(t){var e=t.calloutLabel;null!=e&&(e.hidden=!1,e.collisionTextAlign=void 0,e.collisionOffsetY=0)})),!(l.length<=1)){var u=l.filter((function(t){return t.midCos<0})).sort((function(t,e){return t.midSin-e.midSin})),c=l.filter((function(t){return t.midCos>=0})).sort((function(t,e){return t.midSin-e.midSin})),p=l.filter((function(t){var e;return t.midSin<0&&"center"===(null===(e=t.calloutLabel)||void 0===e?void 0:e.textAlign)})).sort((function(t,e){return t.midCos-e.midCos})),d=l.filter((function(t){var e;return t.midSin>=0&&"center"===(null===(e=t.calloutLabel)||void 0===e?void 0:e.textAlign)})).sort((function(t,e){return t.midCos-e.midCos})),h=new Gl,f=function(r){var i,a=r.calloutLabel;if(null==a)return new Ns(0,0,0,0);var s=e.convert(r.radius),l=Math.max(0,s)+n.length+o,u=r.midCos*l,c=r.midSin*l+a.collisionOffsetY;return h.text=a.text,h.x=u,h.y=c,h.setFont(t.calloutLabel),h.setAlign({textAlign:null!==(i=a.collisionTextAlign)&&void 0!==i?i:a.textAlign,textBaseline:a.textBaseline}),h.computeBBox()},v=function(t,e,r){var n=f(t).grow(i/2),o=f(e).grow(i/2);if(n.x<o.x+o.width&&n.x+n.width>o.x&&("to-top"===r?n.y<o.y+o.height:n.y+n.height>o.y)){var a="to-top"===r?n.y-o.y-o.height:n.y+n.height-o.y;e.calloutLabel.collisionOffsetY=a}},y=function(t){for(var e=t.slice().sort((function(t,e){return Math.abs(t.midSin)-Math.abs(e.midSin)}))[0],r=t.indexOf(e),n=r-1;n>=0;n--){var o=t[n+1],i=t[n];v(o,i,"to-top")}for(n=r+1;n<t.length;n++){o=t[n-1],i=t[n];v(o,i,"to-bottom")}},g=function(t){for(var r=l.some((function(t){return 0!==t.calloutLabel.collisionOffsetY})),n=t.map((function(t){return f(t)})),o=n.map((function(t){return t.clone().grow(i/2)})),u=!1,c=0;c<o.length&&!u;c++)for(var p=o[c],d=c+1;d<t.length;d++){var h=o[d];if(p.collidesBBox(h)){u=!0;break}}var v=s.map((function(t){var r=t.startAngle,n=t.endAngle,o=e.convert(t.radius),i=Math.max(0,o);return{startAngle:r,endAngle:n,innerRadius:a,outerRadius:i}})),y=n.some((function(t){return v.some((function(e){return function(t,e){var r={x:t.x,y:t.y},n={x:t.x+t.width,y:t.y},o={x:t.x,y:t.y+t.height},i={x:t.x+t.width,y:t.y+t.height};return Jv({start:r,end:n},e)||Jv({start:o,end:i},e)}(t,e)}))}));(u||r||y)&&t.filter((function(t){return"center"===t.calloutLabel.textAlign})).forEach((function(t){var e=t.calloutLabel;t.midCos<0?e.collisionTextAlign="right":t.midCos>0?e.collisionTextAlign="left":e.collisionTextAlign="center"}))};y(u),y(c),g(p),g(d)}},e.prototype.updateCalloutLabelNodes=function(t){var e=this,r=this.radiusScale,n=this.calloutLabel,o=this.calloutLine.length,i=n.offset,a=n.color,s=new Gl;this.calloutLabelSelection.selectByTag($v.Label).forEach((function(l){var u,c=l.datum,p=c.calloutLabel,d=r.convert(c.radius),h=Math.max(0,d);if((null==p?void 0:p.text)&&0!==h&&!p.hidden){var f=h+o+i,v=c.midCos*f,y=c.midSin*f+p.collisionOffsetY,g={textAlign:null!==(u=p.collisionTextAlign)&&void 0!==u?u:p.textAlign,textBaseline:p.textBaseline};s.text=p.text,s.x=v,s.y=y,s.setFont(e.calloutLabel),s.setAlign(g);var m=s.computeBBox(),b=p.text,C=!0;if(n.avoidCollisions){var S=e.getLabelOverflow(p.text,m,t),w=S.textLength,x=S.hasVerticalOverflow;b=p.text.length===w?p.text:p.text.substring(0,w)+"\u2026",C=!x}l.text=b,l.x=v,l.y=y,l.setFont(e.calloutLabel),l.setAlign(g),l.fill=a,l.visible=C}else l.visible=!1}))},e.prototype.computeLabelsBBox=function(t,e){var r,n=this,o=this.radiusScale,i=this.calloutLabel,a=this.calloutLine.length,s=i.offset,l=i.maxCollisionOffset,u=i.minSpacing;if(!i.avoidCollisions)return null;this.maybeRefreshNodeData(),this.updateRadiusScale(),this.computeCalloutLabelCollisionOffsets();var c,p=[],d=new Gl;if((null===(r=this.title)||void 0===r?void 0:r.text)&&this.title.enabled){var h=this.getTitleTranslationY();isFinite(h)&&(d.text=this.title.text,d.x=0,d.y=h,d.setFont(this.title),d.setAlign({textBaseline:"bottom",textAlign:"center"}),c=d.computeBBox(),p.push(c))}return this.nodeData.forEach((function(r){var i,h=r.calloutLabel,f=o.convert(r.radius),v=Math.max(0,f);if(!h||0===v)return null;var y=v+a+s,g=r.midCos*y,m=r.midSin*y+h.collisionOffsetY;d.text=h.text,d.x=g,d.y=m,d.setFont(n.calloutLabel),d.setAlign({textAlign:null!==(i=h.collisionTextAlign)&&void 0!==i?i:h.textAlign,textBaseline:h.textBaseline});var b=d.computeBBox();if(h.box=b,Math.abs(h.collisionOffsetY)>l)h.hidden=!0;else{if(c){var C=e.y-n.centerY,S=new Ns(c.x-u,C,c.width+2*u,c.y+c.height+u-C);if(b.collidesBBox(S))return void(h.hidden=!0)}if(t.hideWhenNecessary){var w=n.getLabelOverflow(h.text,b,e),x=w.textLength,O=w.hasVerticalOverflow,E=w.hasSurroundingSeriesOverflow,T=h.text.length>2&&x<2;if(O||T||E)return void(h.hidden=!0)}h.hidden=!1,p.push(b)}})),0===p.length?null:Ns.merge(p)},e.prototype.updateSectorLabelNodes=function(){var t=this.radiusScale,e=t.convert(0),r=this.sectorLabel,n=r.fontSize,o=r.fontStyle,i=r.fontWeight,a=r.fontFamily,s=r.positionOffset,l=r.positionRatio,u=r.color,c=e>0,p=1===this.seriesItemEnabled.filter(Boolean).length;this.sectorLabelSelection.each((function(r,d){var h=d.sectorLabel,f=t.convert(d.radius),v=Math.max(0,f),y=!1;if(h&&0!==v){var g=e*(1-l)+f*l+s;r.fill=u,r.fontStyle=o,r.fontWeight=i,r.fontSize=n,r.fontFamily=a,r.text=h.text,!c&&p?(r.x=0,r.y=0):(r.x=d.midCos*g,r.y=d.midSin*g),r.textAlign="center",r.textBaseline="middle";var m=r.computeBBox(),b=[[m.x,m.y],[m.x+m.width,m.y],[m.x+m.width,m.y+m.height],[m.x,m.y+m.height]],C={startAngle:d.startAngle,endAngle:d.endAngle,innerRadius:e,outerRadius:v};b.every((function(t){var e=uy(t,2);return Zv(e[0],e[1],C)}))&&(y=!0)}r.visible=y}))},e.prototype.updateInnerCircle=function(){var t=this.innerCircleNode;if(t){var e=this.getInnerRadius();if(0===e)t.size=0;else{var r=Math.min(e,this.getOuterRadius());t.size=Math.ceil(2*r+1)}}},e.prototype.updateInnerLabelNodes=function(){var t=[],e=[];this.innerLabelsSelection.each((function(r,n){var o=n.fontStyle,i=n.fontWeight,a=n.fontSize,s=n.fontFamily,l=n.color;r.fontStyle=o,r.fontWeight=i,r.fontSize=a,r.fontFamily=s,r.text=n.text,r.x=0,r.y=0,r.fill=l,r.textAlign="center",r.textBaseline="alphabetic",t.push(r.computeBBox()),e.push(n.margin)}));for(var r=function(t){return 0===t?0:e[t]},n=function(t){return t===e.length-1?0:e[t]},o=t.reduce((function(t,e,o){return t+e.height+r(o)+n(o)}),0),i=Math.max.apply(Math,cy([],uy(t.map((function(t){return t.width}))))),a=this.getInnerRadius(),s=Math.sqrt(Math.pow(i/2,2)+Math.pow(o/2,2))<=(a>0?a:this.getOuterRadius()),l=[],u=0,c=-o/2;u<t.length;u++){var p=t[u].height+c+r(u);l.push(p),c=p+n(u)}this.innerLabelsSelection.each((function(t,e,r){t.y=l[r],t.visible=s}))},e.prototype.getNodeClickEvent=function(t,e){return new dy(this.angleKey,this.calloutLabelKey,this.sectorLabelKey,this.radiusKey,t,e,this)},e.prototype.getNodeDoubleClickEvent=function(t,e){return new hy(this.angleKey,this.calloutLabelKey,this.sectorLabelKey,this.radiusKey,t,e,this)},e.prototype.getTooltipHtml=function(t){var e,r=this.angleKey;if(!r)return"";var n=this,o=n.tooltip,i=n.angleName,a=n.radiusKey,s=n.radiusName,l=n.calloutLabelKey,u=n.sectorLabelKey,c=n.calloutLabelName,p=n.sectorLabelName,d=n.id,h=o.renderer,f=t.datum,v=t.angleValue,y=t.radiusValue,g=t.sectorFormat.fill,m=t.calloutLabel,b=(void 0===m?{}:m).text,C=void 0===b?"":b,S="number"==typeof v?qv(v):String(v),w=null===(e=this.title)||void 0===e?void 0:e.text,x={title:w,backgroundColor:g,content:(C?C+": ":"")+S};return h?fc(h({datum:f,angleKey:r,angleValue:v,angleName:i,radiusKey:a,radiusValue:y,radiusName:s,calloutLabelKey:l,calloutLabelName:c,sectorLabelKey:u,sectorLabelName:p,title:w,color:g,seriesId:d}),x):fc(x)},e.prototype.getLegendData=function(){var t,e,r,n=this,o=n.processedData,i=n.calloutLabelKey,a=n.legendItemKey,s=n.id,l=n.dataModel;if(!l||!o||0===o.data.length)return[];if(!a&&!i)return[];for(var u=this.getProcessedDataIndexes(l),c=u.angleIdx,p=u.radiusIdx,d=u.calloutLabelIdx,h=u.sectorLabelIdx,f=u.legendItemIdx,v=(null===(t=this.title)||void 0===t?void 0:t.showInLegend)&&this.title.text,y=[],g=0;g<o.data.length;g++){var m=o.data[g],b=m.datum,C=m.values,S=[];v&&S.push(v);var w=this.getLabels(b,2*Math.PI,2*Math.PI,!1,C[c],C[p],C[d],C[h],C[f]);if(a&&void 0!==w.legendItem?S.push(w.legendItem.text):i&&void 0!==(null===(e=w.calloutLabel)||void 0===e?void 0:e.text)&&S.push(null===(r=w.calloutLabel)||void 0===r?void 0:r.text),0!==S.length){var x=this.getSectorFormat(b,g,g,!1);y.push({legendType:"category",id:s,itemId:g,seriesId:s,enabled:this.seriesItemEnabled[g],label:{text:S.join(" - ")},marker:{fill:x.fill,stroke:x.stroke,fillOpacity:this.fillOpacity,strokeOpacity:this.strokeOpacity}})}}return y},e.prototype.onLegendItemClick=function(t){var e=t.enabled,r=t.itemId,n=t.series;n.id===this.id?this.toggleSeriesItem(r,e):"pie"===n.type&&this.toggleOtherSeriesItems(n,r,e)},e.prototype.toggleSeriesItem=function(t,e){this.seriesItemEnabled[t]=e,this.nodeDataRefresh=!0},e.prototype.toggleOtherSeriesItems=function(t,e,r){var n,o,i=this,a=this.legendItemKey,s=this.dataModel;if(a&&s){var l=t.legendItemKey&&(null===(n=t.data)||void 0===n?void 0:n.find((function(t,r){return r===e}))[t.legendItemKey]);if(l){var u=s.resolveProcessedDataIndexById(this,"legendItemValue").index;null===(o=this.processedData)||void 0===o||o.data.forEach((function(t,e){t.values[u]===l&&i.toggleSeriesItem(e,r)}))}}},e.prototype.animateEmptyUpdateReady=function(){var t,e,r=this,n=null!==(e=null===(t=this.ctx.animationManager)||void 0===t?void 0:t.defaultOptions.duration)&&void 0!==e?e:1e3,o=Math.PI/-2+Pl(this.rotation);this.groupSelection.selectByTag($v.Sector).forEach((function(t){var e,i=t.datum;null===(e=r.ctx.animationManager)||void 0===e||e.animateMany(r.id+"_empty-update-ready_"+t.id,[{from:o,to:i.startAngle},{from:o,to:i.endAngle}],{duration:n,ease:Kp,onUpdate:function(e){var r=uy(e,2),n=r[0],o=r[1];t.startAngle=n,t.endAngle=o}})}));var i={from:0,to:1,delay:n,duration:200};this.calloutLabelSelection.each((function(t){var e;null===(e=r.ctx.animationManager)||void 0===e||e.animate(r.id+"_empty-update-ready_"+t.id,iy(iy({},i),{onUpdate:function(e){t.opacity=e}}))})),this.sectorLabelSelection.each((function(t){var e;null===(e=r.ctx.animationManager)||void 0===e||e.animate(r.id+"_empty-update-ready_"+t.id,iy(iy({},i),{onUpdate:function(e){t.opacity=e}}))})),this.innerLabelsSelection.each((function(t){var e;null===(e=r.ctx.animationManager)||void 0===e||e.animate(r.id+"_empty-update-ready_"+t.id,iy(iy({},i),{onUpdate:function(e){t.opacity=e}}))}))},e.prototype.animateReadyUpdateReady=function(){this.groupSelection.selectByTag($v.Sector).forEach((function(t){var e=t.datum;t.startAngle=e.startAngle,t.endAngle=e.endAngle}))},e.className="PieSeries",e.type="pie",ay([nu(yu)],e.prototype,"angleKey",void 0),ay([nu(yu)],e.prototype,"angleName",void 0),ay([nu(gu)],e.prototype,"radiusKey",void 0),ay([nu(gu)],e.prototype,"radiusName",void 0),ay([nu(Du(0))],e.prototype,"radiusMin",void 0),ay([nu(Du(0))],e.prototype,"radiusMax",void 0),ay([nu(gu)],e.prototype,"calloutLabelKey",void 0),ay([nu(gu)],e.prototype,"calloutLabelName",void 0),ay([nu(gu)],e.prototype,"sectorLabelKey",void 0),ay([nu(gu)],e.prototype,"sectorLabelName",void 0),ay([nu(gu)],e.prototype,"legendItemKey",void 0),ay([nu(Eu)],e.prototype,"fills",void 0),ay([nu(Eu)],e.prototype,"strokes",void 0),ay([nu(Pu(0,1))],e.prototype,"fillOpacity",void 0),ay([nu(Pu(0,1))],e.prototype,"strokeOpacity",void 0),ay([nu(Bu)],e.prototype,"lineDash",void 0),ay([nu(Pu(0))],e.prototype,"lineDashOffset",void 0),ay([nu(hu)],e.prototype,"formatter",void 0),ay([nu(Pu(-360,360))],e.prototype,"rotation",void 0),ay([nu(Pu())],e.prototype,"outerRadiusOffset",void 0),ay([nu(Pu(0))],e.prototype,"outerRadiusRatio",void 0),ay([nu(Pu())],e.prototype,"innerRadiusOffset",void 0),ay([nu(Pu(0))],e.prototype,"innerRadiusRatio",void 0),ay([nu(Pu(0))],e.prototype,"strokeWidth",void 0),e}(ny),xy=function(){return(xy=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},Oy={constructors:{},constructedArrays:new WeakMap};var Ey={constructors:{title:vf,subtitle:vf,footnote:vf,shadow:zv,innerCircle:Cy,"axes[].title":Bv,"series[].innerLabels[]":by},allowedTypes:{"legend.pagination.marker.shape":["primitive","function"],"series[].marker.shape":["primitive","function"],"axis[].tick.count":["primitive","class-instance"]}};function Ty(){return{constructors:xy(xy({},Ey.constructors),Oy.constructors),constructedArrays:Oy.constructedArrays,allowedTypes:xy({},Ey.allowedTypes)}}var Py={top:{xTranslationDirection:0,yTranslationDirection:-1},bottom:{xTranslationDirection:0,yTranslationDirection:1},left:{xTranslationDirection:-1,yTranslationDirection:0},right:{xTranslationDirection:1,yTranslationDirection:0},topLeft:{xTranslationDirection:1,yTranslationDirection:-1},topRight:{xTranslationDirection:-1,yTranslationDirection:-1},bottomLeft:{xTranslationDirection:1,yTranslationDirection:1},bottomRight:{xTranslationDirection:-1,yTranslationDirection:1},inside:{xTranslationDirection:0,yTranslationDirection:0},insideLeft:{xTranslationDirection:1,yTranslationDirection:0},insideRight:{xTranslationDirection:-1,yTranslationDirection:0},insideTop:{xTranslationDirection:0,yTranslationDirection:1},insideBottom:{xTranslationDirection:0,yTranslationDirection:-1},insideTopLeft:{xTranslationDirection:1,yTranslationDirection:1},insideBottomLeft:{xTranslationDirection:1,yTranslationDirection:-1},insideTopRight:{xTranslationDirection:-1,yTranslationDirection:1},insideBottomRight:{xTranslationDirection:-1,yTranslationDirection:-1}},Dy={top:{xTranslationDirection:1,yTranslationDirection:0},bottom:{xTranslationDirection:-1,yTranslationDirection:0},left:{xTranslationDirection:0,yTranslationDirection:-1},right:{xTranslationDirection:0,yTranslationDirection:1},topLeft:{xTranslationDirection:-1,yTranslationDirection:-1},topRight:{xTranslationDirection:-1,yTranslationDirection:1},bottomLeft:{xTranslationDirection:1,yTranslationDirection:-1},bottomRight:{xTranslationDirection:1,yTranslationDirection:1},inside:{xTranslationDirection:0,yTranslationDirection:0},insideLeft:{xTranslationDirection:0,yTranslationDirection:1},insideRight:{xTranslationDirection:0,yTranslationDirection:-1},insideTop:{xTranslationDirection:-1,yTranslationDirection:0},insideBottom:{xTranslationDirection:1,yTranslationDirection:0},insideTopLeft:{xTranslationDirection:-1,yTranslationDirection:1},insideBottomLeft:{xTranslationDirection:1,yTranslationDirection:1},insideTopRight:{xTranslationDirection:-1,yTranslationDirection:-1},insideBottomRight:{xTranslationDirection:1,yTranslationDirection:-1}};var Ay=function(t){var e=t.yDirection,r=t.xEnd,n=t.yStart,o=t.yEnd;return e?{x:r/2,y:n}:{x:r,y:isNaN(o)?n:(n+o)/2}},My=function(t){var e=t.yDirection,r=t.xStart,n=t.xEnd,o=t.yStart,i=t.yEnd;return e?{x:r,y:isNaN(i)?o:(o+i)/2}:{x:n/2,y:o}},_y=function(t){var e=t.yDirection,r=t.xEnd,n=t.yStart,o=t.yEnd;return e?{x:r,y:isNaN(o)?n:(n+o)/2}:{x:r/2,y:isNaN(o)?n:o}},Ry=function(t){var e=t.yDirection,r=t.xStart,n=t.xEnd,o=t.yStart,i=t.yEnd;return e?{x:n/2,y:isNaN(i)?o:i}:{x:r,y:isNaN(i)?o:(o+i)/2}},ky=function(t){var e=t.yDirection,r=t.xStart,n=t.xEnd,o=t.yStart;return e?{x:r/2,y:o}:{x:n,y:o}},Fy=function(t){var e=t.yDirection,r=t.xStart,n=t.yStart,o=t.yEnd;return e?{x:r,y:isNaN(o)?n:o}:{x:r,y:n}},Iy=function(t){var e=t.yDirection,r=t.xEnd,n=t.yStart,o=t.yEnd;return e?{x:r,y:n}:{x:r,y:isNaN(o)?n:o}},Ly=function(t){var e=t.yDirection,r=t.xStart,n=t.xEnd,o=t.yStart,i=t.yEnd;return e?{x:n,y:isNaN(i)?o:i}:{x:r,y:isNaN(i)?o:i}},Ny={top:{c:Ay},bottom:{c:Ry},left:{c:My},right:{c:_y},topLeft:{c:ky},topRight:{c:Iy},bottomLeft:{c:Fy},bottomRight:{c:Ly},inside:{c:function(t){var e=t.xEnd,r=t.yStart,n=t.yEnd;return{x:e/2,y:isNaN(n)?r:(r+n)/2}}},insideLeft:{c:My},insideRight:{c:_y},insideTop:{c:Ay},insideBottom:{c:Ry},insideTopLeft:{c:ky},insideBottomLeft:{c:Fy},insideTopRight:{c:Iy},insideBottomRight:{c:Ly}},Gy=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),jy=function(){return(jy=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},Vy=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},By=function(t){function e(){var e=t.call(this)||this;return e.x1=0,e.y1=0,e.x2=0,e.y2=0,e.startLine=!1,e.endLine=!1,e.isRange=!1,e.restoreOwnStyles(),e}return Gy(e,t),e.prototype.computeBBox=function(){return new Ns(this.x1,this.y1,this.x2-this.x1,this.y2-this.y1)},e.prototype.isPointInPath=function(t,e){return!1},e.prototype.render=function(e){var r,n=e.ctx,o=e.forceRender,i=e.stats;if(this.dirty!==ks.NONE||o){this.computeTransformMatrix(),this.matrix.toContext(n);var a=this.x1,s=this.y1,l=this.x2,u=this.y2;a=this.align(a),s=this.align(s),l=this.align(l),u=this.align(u);var c=this.fill,p=this.opacity;if(!(!this.isRange||!c)){var d=this.fillOpacity;n.fillStyle=c,n.globalAlpha=p*d,n.beginPath(),n.moveTo(a,s),n.lineTo(l,s),n.lineTo(l,u),n.lineTo(a,u),n.closePath(),n.fill()}var h=this.stroke,f=this.strokeWidth,v=this.startLine,y=this.endLine;if(!(!v&&!y||!h||!f)){var g=this,m=g.strokeOpacity,b=g.lineDash,C=g.lineDashOffset,S=g.lineCap,w=g.lineJoin;n.strokeStyle=h,n.globalAlpha=p*m,n.lineWidth=f,b&&n.setLineDash(b),C&&(n.lineDashOffset=C),S&&(n.lineCap=S),w&&(n.lineJoin=w),n.beginPath(),v&&(n.moveTo(a,s),n.lineTo(l,s)),y&&(n.moveTo(l,u),n.lineTo(a,u)),n.stroke()}null===(r=this.fillShadow)||void 0===r||r.markClean(),t.prototype.render.call(this,e)}else i&&(i.nodesSkipped+=this.nodeCount.count)},e.className="Range",e.defaultStyles=jy(jy({},kl.defaultStyles),{strokeWidth:1}),Vy([zs({redraw:ks.MINOR})],e.prototype,"x1",void 0),Vy([zs({redraw:ks.MINOR})],e.prototype,"y1",void 0),Vy([zs({redraw:ks.MINOR})],e.prototype,"x2",void 0),Vy([zs({redraw:ks.MINOR})],e.prototype,"y2",void 0),Vy([zs({redraw:ks.MINOR})],e.prototype,"startLine",void 0),Vy([zs({redraw:ks.MINOR})],e.prototype,"endLine",void 0),Vy([zs({redraw:ks.MINOR})],e.prototype,"isRange",void 0),e}(kl),Uy=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},Hy=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},zy=function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t},Wy=["top","left","right","bottom","topLeft","topRight","bottomLeft","bottomRight","inside","insideLeft","insideRight","insideTop","insideBottom","insideTopLeft","insideBottomLeft","insideTopRight","insideBottomRight"],Ky=ou((function(t,e){return iu(t,e,(function(t){return Wy.includes(t)}))}),"expecting an optional crossLine label position keyword such as 'topLeft', 'topRight' or 'inside'"),Xy=ou((function(t,e){return iu(t,e,(function(t){return"range"===t||"line"===t}))}),"expecting a crossLine type keyword such as 'range' or 'line'"),Yy=function(){function t(){this.enabled=void 0,this.text=void 0,this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=14,this.fontFamily="Verdana, sans-serif",this.padding=5,this.color="rgba(87, 87, 87, 1)",this.position=void 0,this.rotation=void 0,this.parallel=void 0}return Uy([nu(vu)],t.prototype,"enabled",void 0),Uy([nu(gu)],t.prototype,"text",void 0),Uy([nu(Nu)],t.prototype,"fontStyle",void 0),Uy([nu(ju)],t.prototype,"fontWeight",void 0),Uy([nu(Pu(0))],t.prototype,"fontSize",void 0),Uy([nu(yu)],t.prototype,"fontFamily",void 0),Uy([nu(Pu(0))],t.prototype,"padding",void 0),Uy([nu(Ou)],t.prototype,"color",void 0),Uy([nu(Ky)],t.prototype,"position",void 0),Uy([nu(Du(-360,360))],t.prototype,"rotation",void 0),Uy([nu(vu)],t.prototype,"parallel",void 0),t}(),qy=function(){function t(){this.id=Us(this),this.enabled=void 0,this.type=void 0,this.range=void 0,this.value=void 0,this.fill=void 0,this.fillOpacity=void 0,this.stroke=void 0,this.strokeWidth=void 0,this.strokeOpacity=void 0,this.lineDash=void 0,this.label=new Yy,this.scale=void 0,this.clippedRange=[-1/0,1/0],this.gridLength=0,this.sideFlag=-1,this.parallelFlipRotation=0,this.regularFlipRotation=0,this.direction=Xu.X,this.group=new fl({name:""+this.id,layer:!0,zIndex:t.LINE_LAYER_ZINDEX}),this.crossLineRange=new By,this.crossLineLabel=new Gl,this.labelPoint=void 0,this.data=[],this.startLine=!1,this.endLine=!1,this.isRange=!1;var e=this.group,r=this.crossLineRange,n=this.crossLineLabel;e.append([r,n]),r.pointerEvents=Ws.None}return t.prototype.update=function(t){this.enabled&&(this.group.visible=t,t&&(this.createNodeData()?(this.updateNodes(),this.group.zIndex=this.getZIndex(this.isRange)):this.group.visible=!1))},t.prototype.updateNodes=function(){this.updateRangeNode(),this.label.enabled&&(this.updateLabel(),this.positionLabel())},t.prototype.createNodeData=function(){var t,e,r,n,o,i=this,a=i.scale,s=i.gridLength,l=i.sideFlag,u=i.direction,c=i.label.position,p=void 0===c?"top":c,d=i.clippedRange,h=i.strokeWidth,f=void 0===h?0:h;if(!a)return!1;var v=null!==(n=a.bandwidth)&&void 0!==n?n:0,y=function(t){return Math.max(Math.min.apply(Math,zy([],Hy(d))),Math.min(Math.max.apply(Math,zy([],Hy(d))),t))},g=Hy([0,l*s],2),m=g[0],b=g[1],C=Hy(this.getRange(),2),S=C[0],w=C[1],x=Hy([Number(a.convert(S,{strict:!1})),a.convert(w,{strict:!1})+v],2),O=x[0],E=x[1];O=y(O),E=y(E),S=(t=Hy([Number(a.convert(S)),a.convert(w)+v],2))[0],w=t[1];var T=!isNaN(O)&&!isNaN(E)&&(S===O||w===E||O!==E)&&Math.abs(E-O)>0;T&&(O!==Math.min(O,E)&&(O=(e=Hy([Math.min(O,E),Math.max(O,E)],2))[0],E=e[1],S=(r=Hy([w,S],2))[0],w=r[1]));if(this.isRange=T,this.startLine=!isNaN(S)&&f>0&&S===O,this.endLine=!isNaN(w)&&f>0&&w===E,!T&&!this.startLine&&!this.endLine)return!1;if(this.data=[O,E],this.label.enabled){var P=u===Xu.Y,D=(null!==(o=Ny[p])&&void 0!==o?o:{}).c,A=(void 0===D?Ay:D)({yDirection:P,xStart:m,xEnd:b,yStart:O,yEnd:E}),M=A.x,_=A.y;this.labelPoint={x:M,y:_}}return!0},t.prototype.updateRangeNode=function(){var t,e=this,r=e.crossLineRange,n=e.sideFlag,o=e.gridLength,i=e.data,a=e.startLine,s=e.endLine,l=e.isRange,u=e.fill,c=e.fillOpacity,p=e.stroke,d=e.strokeWidth,h=e.lineDash;r.x1=0,r.x2=n*o,r.y1=i[0],r.y2=i[1],r.startLine=a,r.endLine=s,r.isRange=l,r.fill=u,r.fillOpacity=null!=c?c:1,r.stroke=p,r.strokeWidth=null!=d?d:1,r.strokeOpacity=null!==(t=this.strokeOpacity)&&void 0!==t?t:1,r.lineDash=h},t.prototype.updateLabel=function(){var t=this.crossLineLabel,e=this.label;e.text&&(t.fontStyle=e.fontStyle,t.fontWeight=e.fontWeight,t.fontSize=e.fontSize,t.fontFamily=e.fontFamily,t.fill=e.color,t.text=e.text)},t.prototype.positionLabel=function(){var t=this,e=t.crossLineLabel,r=t.labelPoint,n=void 0===r?{}:r,o=n.x,i=void 0===o?void 0:o,a=n.y,s=void 0===a?void 0:a,l=t.label,u=l.parallel,c=l.rotation,p=l.position,d=void 0===p?"top":p,h=l.padding,f=void 0===h?0:h,v=t.direction,y=t.parallelFlipRotation,g=t.regularFlipRotation;if(void 0!==i&&void 0!==s){var m=hv({rotation:c,parallel:u,regularFlipRotation:g,parallelFlipRotation:y}),b=m.defaultRotation,C=m.configuredRotation;e.rotation=b+C,e.textBaseline="middle",e.textAlign="center";var S=this.computeLabelBBox();if(S){var w=function(t){var e=t.yDirection,r=t.padding,n=void 0===r?0:r,o=t.position,i=void 0===o?"top":o,a=t.bbox,s=(e?Py:Dy)[i],l=s.xTranslationDirection,u=s.yTranslationDirection;return{xTranslation:l*(n+(e?a.width:a.height)/2),yTranslation:u*(n+(e?a.height:a.width)/2)}}({yDirection:v===Xu.Y,padding:f,position:d,bbox:S}),x=w.xTranslation,O=w.yTranslation;e.translationX=i+x,e.translationY=s+O}}},t.prototype.getZIndex=function(e){return void 0===e&&(e=!1),e?t.RANGE_LAYER_ZINDEX:t.LINE_LAYER_ZINDEX},t.prototype.getRange=function(){var t=this.value,e=this.range,r=this.scale instanceof mf,n=Hy(null!=e?e:[t,void 0],2),o=n[0],i=n[1];return r||void 0!==i||(i=o),o=null!=Zl(o,r)?o:void 0,i=null!=Zl(i,r)?i:void 0,r&&o===i&&(i=void 0),void 0===o&&void 0!==i&&(o=i,i=void 0),[o,i]},t.prototype.computeLabelBBox=function(){return this.crossLineLabel.computeTransformedBBox()},t.prototype.calculatePadding=function(t){var e,r,n,o,i,a,s,l,u=this,c=u.isRange,p=u.startLine,d=u.endLine,h=u.direction,f=u.label,v=f.padding,y=void 0===v?0:v,g=f.position,m=void 0===g?"top":g;if(c||p||d){var b=this.computeLabelBBox(),C=null==b?void 0:b.x,S=null==b?void 0:b.y;if(b&&null!=C&&null!=S){var w=function(t){var e=t.yDirection,r=t.bbox,n=t.padding,o=void 0===n?0:n,i=t.position,a=void 0===i?"top":i,s={};return a.startsWith("inside")||("top"!==a||e?"bottom"!==a||e?"left"===a&&e?s.left=o+r.width:"right"===a&&e&&(s.right=o+r.width):s.bottom=o+r.height:s.top=o+r.height),s}({yDirection:h===Xu.Y,padding:y,position:m,bbox:b});t.left=Math.max(null!==(e=t.left)&&void 0!==e?e:0,null!==(r=w.left)&&void 0!==r?r:0),t.right=Math.max(null!==(n=t.right)&&void 0!==n?n:0,null!==(o=w.right)&&void 0!==o?o:0),t.top=Math.max(null!==(i=t.top)&&void 0!==i?i:0,null!==(a=w.top)&&void 0!==a?a:0),t.bottom=Math.max(null!==(s=t.bottom)&&void 0!==s?s:0,null!==(l=w.bottom)&&void 0!==l?l:0)}}},t.LINE_LAYER_ZINDEX=Ku.SERIES_CROSSLINE_LINE_ZINDEX,t.RANGE_LAYER_ZINDEX=Ku.SERIES_CROSSLINE_RANGE_ZINDEX,t.className="CrossLine",Uy([nu(vu)],t.prototype,"enabled",void 0),Uy([nu(Xy)],t.prototype,"type",void 0),Uy([nu(su(2))],t.prototype,"range",void 0),Uy([nu(Ou)],t.prototype,"fill",void 0),Uy([nu(Du(0,1))],t.prototype,"fillOpacity",void 0),Uy([nu(Ou)],t.prototype,"stroke",void 0),Uy([nu(Du())],t.prototype,"strokeWidth",void 0),Uy([nu(Du(0,1))],t.prototype,"strokeOpacity",void 0),Uy([nu(Bu)],t.prototype,"lineDash",void 0),t}(),Zy=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Jy=function(){return(Jy=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},$y=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},Qy=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.thickness=0,e.position="left",e}return Zy(e,t),Object.defineProperty(e.prototype,"direction",{get:function(){return["top","bottom"].includes(this.position)?Xu.X:Xu.Y},enumerable:!1,configurable:!0}),e.prototype.updateDirection=function(){switch(this.position){case"top":this.rotation=-90,this.label.mirrored=!0,this.label.parallel=!0;break;case"right":this.rotation=0,this.label.mirrored=!0,this.label.parallel=!1;break;case"bottom":this.rotation=-90,this.label.mirrored=!1,this.label.parallel=!0;break;case"left":this.rotation=0,this.label.mirrored=!1,this.label.parallel=!1}this.axisContext&&(this.axisContext.position=this.position,this.axisContext.direction=this.direction)},e.prototype.update=function(e){return this.updateDirection(),t.prototype.update.call(this,e)},e.prototype.createAxisContext=function(){return Jy(Jy({},t.prototype.createAxisContext.call(this)),{position:this.position})},e.prototype.assignCrossLineArrayConstructor=function(t){!function(t,e){var r;null===(r=Oy.constructedArrays)||void 0===r||r.set(t,e)}(t,qy)},$y([nu(Pu(0))],e.prototype,"thickness",void 0),$y([nu(qu)],e.prototype,"position",void 0),e}(jv),tg=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),eg=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},rg=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ng=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},og=function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t},ig=function(t){function e(e){var r=t.call(this,e,new cf)||this;return r._paddingOverrideEnabled=!1,r.groupPaddingInner=.1,r.includeInvisibleDomains=!0,r}return tg(e,t),Object.defineProperty(e.prototype,"paddingInner",{get:function(){return this._paddingOverrideEnabled=!0,this.scale.paddingInner},set:function(t){this._paddingOverrideEnabled=!0,this.scale.paddingInner=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"paddingOuter",{get:function(){return this.scale.paddingOuter},set:function(t){this.scale.paddingOuter=t},enumerable:!1,configurable:!0}),e.prototype.normaliseDataDomain=function(t){var e,r,n,o,i={};try{for(var a=rg(t),s=a.next();!s.done;s=a.next()){var l=s.value;null!==(n=i[o=String(l)])&&void 0!==n||(i[o]=l)}}catch(t){e={error:t}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}return Object.values(i)},e.prototype.calculateDomain=function(){if(!this._paddingOverrideEnabled){var e=this.boundSeries.map((function(t){var e;return null===(e=t.getBandScalePadding)||void 0===e?void 0:e.call(t)})).filter((function(t){return null!=t}));e.length>0&&(this.scale.paddingInner=Math.min.apply(Math,og([],ng(e.map((function(t){return t.inner}))))),this.scale.paddingOuter=Math.max.apply(Math,og([],ng(e.map((function(t){return t.outer}))))))}return t.prototype.calculateDomain.call(this)},e.className="CategoryAxis",e.type="category",eg([nu(Pu(0,1))],e.prototype,"groupPaddingInner",void 0),e}(Qy),ag=function(){function t(t,e,r){void 0===t&&(t=""),void 0===r&&(r=0),this.x=0,this.y=0,this.subtreeLeft=NaN,this.subtreeRight=NaN,this.screenX=0,this.screenY=0,this.children=[],this.leafCount=0,this.prelim=0,this.mod=0,this.ancestor=this,this.change=0,this.shift=0,this.label=t,this.parent=e,this.depth=e?e.depth+1:0,this.number=r}return t.prototype.getLeftSibling=function(){return this.number>0&&this.parent?this.parent.children[this.number-1]:void 0},t.prototype.getLeftmostSibling=function(){return this.number>0&&this.parent?this.parent.children[0]:void 0},t.prototype.nextLeft=function(){return this.children?this.children[0]:this.thread},t.prototype.nextRight=function(){return this.children?this.children[this.children.length-1]:this.thread},t.prototype.getSiblings=function(){var t=this;return this.parent?this.parent.children.filter((function(e,r){return r!==t.number})):[]},t}();function sg(t,e){void 0===e&&(e=!0);var r=new ag,n=0;return e&&t.forEach((function(t){return n=Math.max(n,t.labels.length)})),t.forEach((function(t){if(e)for(;t.labels.length<n;)t.labels.unshift("");!function(t,e){var r=e.labels.slice().reverse(),n=r.length-1;r.forEach((function(e,r){var o=t.children,i=o.find((function(t){return t.label===e})),a=r!==n;if(i&&a)t=i;else{var s=new ag(e,t);s.number=o.length,o.push(s),a&&(t=s)}}))}(r,t)})),r}function lg(t,e,r){var n=r/(e.number-t.number);e.change-=n,e.shift+=r,t.change+=n,e.prelim+=r,e.mod+=r}function ug(t,e,r){return e.getSiblings().indexOf(t.ancestor)>=0?t.ancestor:r}function cg(t,e){var r=t.children;if(r.length){var n=r[0];r.forEach((function(t){cg(t,e),n=function(t,e,r){var n=t.getLeftSibling();if(n){for(var o=t,i=t,a=n,s=i.getLeftmostSibling(),l=i.mod,u=o.mod,c=a.mod,p=s.mod;a.nextRight()&&i.nextLeft();){a=a.nextRight(),i=i.nextLeft(),s=s.nextLeft(),(o=o.nextRight()).ancestor=t;var d=a.prelim+c-(i.prelim+l)+r;d>0&&(lg(ug(a,t,e),t,d),l+=d,u+=d),c+=a.mod,l+=i.mod,p+=s.mod,u+=o.mod}a.nextRight()&&!o.nextRight()?(o.thread=a.nextRight(),o.mod+=c-u):(i.nextLeft()&&!s.nextLeft()&&(s.thread=i.nextLeft(),s.mod+=l-p),e=t)}return e}(t,n,e)})),function(t){var e=t.children;if(e)for(var r=0,n=0,o=e.length-1;o>=0;o--){var i=e[o];i.prelim+=r,i.mod+=r,n+=i.change,r+=i.shift+n}}(t);var o=(r[0].prelim+r[r.length-1].prelim)/2;(i=t.getLeftSibling())?(t.prelim=i.prelim+e,t.mod=t.prelim-o):t.prelim=o}else{var i=t.getLeftSibling();t.prelim=i?i.prelim+e:0}}var pg=function(){function t(){this.top=1/0,this.right=-1/0,this.bottom=-1/0,this.left=1/0}return t.prototype.update=function(t,e){var r=e(t),n=r.x,o=r.y;n>this.right&&(this.right=n),n<this.left&&(this.left=n),o>this.bottom&&(this.bottom=o),o<this.top&&(this.top=o)},t}();function dg(t){var e=new hg;return cg(t,1),function t(e,r,n){e.x=e.prelim+r,e.y=e.depth,n.update(e),e.children.forEach((function(o){return t(o,r+e.mod,n)}))}(t,-t.prelim,e),function t(e){var r=e.children,n=0;r.forEach((function(e){t(e),e.children.length?n+=e.leafCount:n++})),e.leafCount=n,r.length?(e.subtreeLeft=r[0].subtreeLeft,e.subtreeRight=r[e.children.length-1].subtreeRight,e.x=(e.subtreeLeft+e.subtreeRight)/2):(e.subtreeLeft=e.x,e.subtreeRight=e.x)}(t),e}var hg=function(){function t(){this.dimensions=new pg,this.leafCount=0,this.nodes=[],this.leafNodes=[],this.nonLeafNodes=[],this.depth=0}return t.prototype.update=function(t){this.dimensions.update(t,(function(t){return{x:t.x,y:t.y}})),t.children.length?this.nonLeafNodes.push(t):(this.leafCount++,this.leafNodes.push(t)),t.depth>this.depth&&(this.depth=t.depth),this.nodes.push(t)},t.prototype.resize=function(t,e,r,n,o){void 0===r&&(r=0),void 0===n&&(n=0),void 0===o&&(o=!1);var i=this.leafCount-1,a=this.depth,s=this.dimensions,l=1,u=1;if(t>0&&i){var c=(s.right-s.left)/i;l=t/i/c,o&&(l=-l)}if(e>0&&a){var p=(s.bottom-s.top)/a;u=e/a/p}var d=new pg;this.nodes.forEach((function(t){t.screenX=t.x*l,t.screenY=t.y*u,d.update(t,(function(t){return{x:t.screenX,y:t.screenY}}))}));var h=-d.left,f=-d.top;this.nodes.forEach((function(t){t.screenX+=h+r,t.screenY+=f+n}))},t}(),fg=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),vg=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},yg=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},gg=function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t},mg=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.grid=!1,e}return fg(e,t),vg([nu(fu)],e.prototype,"grid",void 0),e}(Cv),bg=function(t){function e(e){var r=t.call(this,e,new cf)||this;r.tickScale=new cf,r.translation={x:0,y:0},r.line=new wv,r.label=new mg,r.labelColor="rgba(87, 87, 87, 1)",r.includeInvisibleDomains=!0;var n=r,o=n.tickLineGroup,i=n.tickLabelGroup,a=n.gridLineGroup,s=n.tickScale,l=n.scale;return l.paddingOuter=.1,l.paddingInner=2*l.paddingOuter,r.range=l.range.slice(),r.refreshScale(),s.paddingInner=1,s.paddingOuter=0,r.gridLineSelection=Fd.select(a,hf),r.axisLineSelection=Fd.select(o,hf),r.separatorSelection=Fd.select(o,hf),r.labelSelection=Fd.select(i,Gl),r}return fg(e,t),e.prototype.updateRange=function(){var t=this.range,e=this.visibleRange,r=this.scale,n=(t[1]-t[0])/(e[1]-e[0]),o=n*e[0],i=t[0]-o;this.tickScale.range=r.range=[i,i+n],this.resizeTickTree()},e.prototype.resizeTickTree=function(){var t,e=this.scale,r=e.domain.length?[e.convert(e.domain[0]),e.convert(e.domain[e.domain.length-1])]:e.range,n=this.tickTreeLayout,o=this.lineHeight;n&&n.resize(Math.abs(r[1]-r[0]),n.depth*o,(Math.min(r[0],r[1])||0)+(null!==(t=e.bandwidth)&&void 0!==t?t:0)/2,-n.depth*o,r[1]-r[0]<0)},Object.defineProperty(e.prototype,"lineHeight",{get:function(){return 1.5*this.label.fontSize},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"gridLength",{get:function(){return this._gridLength},set:function(t){(this._gridLength&&!t||!this._gridLength&&t)&&(this.gridLineSelection.clear(),this.labelSelection.clear()),this._gridLength=t},enumerable:!1,configurable:!0}),e.prototype.calculateDomain=function(){var t,e,r=this.direction,n=this.boundSeries,o=[],i=void 0;n.filter((function(t){return t.visible})).forEach((function(t){if(r===Xu.X)if(void 0===i){var e=t.getDomain(r);o.push(e),i="number"==typeof e[0]}else i&&o.push(t.getDomain(r));else o.push(t.getDomain(r))}));var a=(t=new Array).concat.apply(t,gg([],yg(o))),s=null!==(e=cv(a))&&void 0!==e?e:a;this.dataDomain=this.normaliseDataDomain(s),this.scale.domain=this.dataDomain},e.prototype.normaliseDataDomain=function(t){var e=t.filter((function(t,e,r){return r.indexOf(t)===e})),r=sg(e);this.tickTreeLayout=dg(r);var n=e.slice();return n.push(""),this.tickScale.domain=n,this.resizeTickTree(),e},e.prototype.update=function(t){var e=this;this.updateDirection(),this.calculateDomain(),this.updateRange();var r=this,n=r.scale,o=r.label,i=r.label.parallel,a=r.moduleCtx.callbackCache,s=r.tickScale,l=r.range,u=r.title,c=r.title,p=(void 0===c?{}:c).formatter,d=void 0===p?function(t){return t.defaultValue}:p,h=r._titleCaption,f=n.range[0],v=n.range[1],y=Math.abs(v-f)/n.domain.length||0,g=Pl(this.rotation),m=Math.abs(Math.cos(g))<1e-8,b=o.getSideFlag();this.updatePosition({rotation:g,sideFlag:b}),h.node.visible=!1;var C=this.lineHeight,S=this.tickTreeLayout,w=n.ticks(),x=S?S.nodes:[],O=!!S&&S.depth>1,E=s.ticks(),T=hv({rotation:o.rotation,parallel:i,regularFlipRotation:Tl(g-Math.PI/2),parallelFlipRotation:Tl(g)}),P=T.defaultRotation,D=T.configuredRotation,A=T.parallelFlipFlag,M=this.gridLineSelection.update(this.gridLength?E:[]),_=this.labelSelection.update(x),R=o.formatter,k=new Map,F=0;_.each((function(t,r,n){var i;t.fontStyle=o.fontStyle,t.fontWeight=o.fontWeight,t.fontSize=o.fontSize,t.fontFamily=o.fontFamily,t.fill=o.color,t.textBaseline=-1===A?"bottom":"hanging",t.textAlign="center",t.translationX=r.screenY-.25*o.fontSize,t.translationY=r.screenX,0===n?(null==u?void 0:u.enabled)&&w.length>0?(t.visible=!0,t.text=a.call(d,e.getTitleFormatterParams()),t.fontSize=u.fontSize,t.fontStyle=u.fontStyle,t.fontWeight=u.fontWeight,t.fontFamily=u.fontFamily,t.textBaseline="hanging"):t.visible=!1:R?(t.text=null!==(i=a.call(R,{value:String(r.label),index:n}))&&void 0!==i?i:String(r.label),t.visible=r.screenX>=l[0]&&r.screenX<=l[1]):(t.text=String(r.label),t.visible=r.screenX>=l[0]&&r.screenX<=l[1]);var s=t.computeBBox();k.set(t.id,s),s.width>F&&(F=s.width)}));var I=b*o.padding,L=this.label.grid,N=[];_.each((function(t,r,n){if(t.x=I,t.rotationCenterX=I,r.children.length){t.translationX-=F-C+e.label.padding;var o=r.leafCount*y;(i=k.get(t.id))&&i.width>o?t.visible=!1:t.rotation=m?P:-Math.PI/2}else{var i;t.rotation=D,t.textAlign="end",t.textBaseline="middle",(i=k.get(t.id))&&i.height>y&&(t.visible=!1)}if(r.parent&&O){var a=r.children.length?r.screenX-r.leafCount*y/2:r.screenX-y/2;if(r.children.length){var s=-F-2*e.label.padding+r.screenY;N.push({y:a,x1:s+C,x2:s,toString:function(){return String(n)}})}else(r.number!==r.children.length-1||L)&&N.push({y:a,x1:0,x2:-F-2*e.label.padding,toString:function(){return String(n)}})}}));var G=0;N.forEach((function(t){return G=Math.min(G,t.x2)})),N.push({y:Math.max(f,v),x1:0,x2:G,toString:function(){return String(N.length)}});var j=this.separatorSelection.update(N);j.each((function(t,r){t.x1=r.x1,t.x2=r.x2,t.y1=r.y,t.y2=r.y,t.visible=r.y>=l[0]-1e-7&&r.y<=l[1]+1e-7,t.stroke=e.tick.color,t.fill=void 0,t.strokeWidth=1})),this.gridLineSelection=M,this.labelSelection=_;for(var V=S?S.depth+1:1,B=[],U=0;U<V;U++)B.push(U);if(this.axisLineSelection.update(B).each((function(t,r,n){var o=n>0?-F-2*e.label.padding-(n-1)*C:0;t.x1=o,t.x2=o,t.y1=l[0],t.y2=l[1],t.strokeWidth=e.line.width,t.stroke=e.line.color,t.visible=w.length>0&&(0===n||L&&O)})),this.gridLength){var H=this.gridStyle,z=H.length;M.each((function(t,r,n){var o=Math.round(s.convert(r));t.x1=0,t.x2=-b*e.gridLength,t.y1=o,t.y2=o,t.visible=o>=l[0]&&o<=l[1];var i=H[n%z];t.stroke=i.stroke,t.strokeWidth=e.tick.width,t.lineDash=i.lineDash,t.fill=void 0}))}return t},e.className="GroupedCategoryAxis",e.type="groupedCategory",vg([nu(Ou)],e.prototype,"labelColor",void 0),e}(Qy),Cg=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Sg=function(){return(Sg=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},wg=function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{l(n.next(t))}catch(t){i(t)}}function s(t){try{l(n.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}l((n=n.apply(t,e||[])).next())}))},xg=function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Og=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Eg=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},Tg=["top","right","bottom","left"],Pg=function(t){function e(e,r,n){void 0===e&&(e=window.document);var o=t.call(this,e,r,n)||this;return o.paired=!0,o._lastAxisWidths={top:0,bottom:0,left:0,right:0},o._lastVisibility={crossLines:!0,series:!0},o}return Cg(e,t),e.prototype.performLayout=function(){return wg(this,void 0,void 0,(function(){var e,r,n,o,i,a,s,l,u,c;return xg(this,(function(p){switch(p.label){case 0:return[4,t.prototype.performLayout.call(this)];case 1:return e=p.sent(),r=this.updateAxes(e),n=r.seriesRect,o=r.visibility,i=r.clipSeries,this.seriesRoot.visible=o.series,this.seriesRect=n,this.seriesRoot.translationX=Math.floor(n.x),this.seriesRoot.translationY=Math.floor(n.y),s=(a=this).seriesRoot,l=a.seriesAreaPadding,u=n.clone().grow({top:l.top,right:l.right,bottom:l.bottom,left:l.left}),20,c=u.clone().grow(20),this.hoverRect=c,this.layoutService.dispatchLayoutComplete({type:"layout-complete",chart:{width:this.scene.width,height:this.scene.height},series:{rect:n,paddedRect:u,hoverRect:c,visible:o.series},axes:this.axes.map((function(t){return Sg({id:t.id},t.getLayoutState())}))}),i?s.setClipRectInGroupCoordinateSpace(n):s.setClipRectInGroupCoordinateSpace(),[2,e]}}))}))},e.prototype.updateAxes=function(t){var e,r,n,o=Sg({},this._lastAxisWidths),i=Sg({},this._lastVisibility),a=new Set(this._axes.map((function(t){return t.position})));try{for(var s=Og(Object.keys(o)),l=s.next();!l.done;l=s.next()){var u=l.value;a.has(u)||delete o[u]}}catch(t){e={error:t}}finally{try{l&&!l.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}var c,p=function(t,e){return!Object.keys(t).some((function(t){return null==o[t]}))&&(i.crossLines===e.crossLines&&i.series===e.series&&Object.entries(o).every((function(e){var r=Eg(e,2),n=r[0],o=r[1],i=t[n];return null==o&&null==i||o===i})))},d={},h={},f=!1,v=null===(n=this.seriesRect)||void 0===n?void 0:n.clone(),y=0;do{Object.assign(o,d),Object.assign(i,h);var g=this.updateAxesPass(o,t.clone(),v);if(c=g.axisWidths,d=Object.entries(c).reduce((function(t,e){var r=Eg(e,2),n=r[0],o=r[1];return o&&Math.abs(o)===1/0&&(o=0),t[n]=null!=o?Math.ceil(o):o,t}),{}),h=g.visibility,f=g.clipSeries,v=g.seriesRect,y++>10){sl.warn("unable to find stable axis layout.");break}}while(!p(d,h));return this.axes.forEach((function(e){if(e.setCrossLinesVisible(i.crossLines),v)switch(e.clipGrid(v.x,v.y,v.width+5,v.height+5),e.position){case"left":case"right":e.clipTickLines(t.x,v.y,t.width+5,v.height+5);break;case"top":case"bottom":e.clipTickLines(v.x,t.y,v.width+5,t.height+5)}})),this._lastAxisWidths=o,this._lastVisibility=i,{seriesRect:v,visibility:i,clipSeries:f}},e.prototype.updateAxesPass=function(t,e,r){var n=this,o=this.axes,i={},a={},s={series:!0,crossLines:!0},l=!1,u={},c=this.applySeriesPadding(e),p=r?this.buildCrossLinePadding(t):{},d=this.buildAxisBound(c,t,p,s),h=this.buildSeriesRect(d,t);return o.forEach((function(e){var r,o,s=e.position,p=void 0===s?"left":s,f=n.calculateAxisDimensions({axis:e,seriesRect:h,paddedBounds:c,axisWidths:t,newAxisWidths:a,primaryTickCounts:u,clipSeries:l,addInterAxisPadding:(null!==(r=i[p])&&void 0!==r?r:0)>0}),v=f.clipSeries,y=f.axisThickness,g=f.axisOffset;i[p]=(null!==(o=i[p])&&void 0!==o?o:0)+1,l=l||v,n.positionAxis({axis:e,axisBound:d,axisOffset:g,axisThickness:y,axisWidths:t,primaryTickCounts:u,seriesRect:h})})),{clipSeries:l,seriesRect:h,axisWidths:a,visibility:s}},e.prototype.buildCrossLinePadding=function(t){var e,r,n,o={};this.axes.forEach((function(t){t.crossLines&&t.crossLines.forEach((function(t){t.calculatePadding(o)}))}));try{for(var i=Og(Object.entries(o)),a=i.next();!a.done;a=i.next()){var s=Eg(a.value,2),l=s[0],u=s[1],c=void 0===u?0:u;o[l]=Math.max(c-(null!==(n=t[l])&&void 0!==n?n:0),0)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}return o},e.prototype.applySeriesPadding=function(t){var e=this,r=t.clone(),n=this.axes.slice().reverse();return Tg.forEach((function(t){var o=e.seriesAreaPadding[t],i=n.find((function(e){return e.position===t}));i?i.seriesAreaPadding=o:r.shrink(o,t)})),r},e.prototype.buildAxisBound=function(t,e,r,n){var o,i,a,s,l=t.clone(),u=r.top,c=void 0===u?0:u,p=r.right,d=void 0===p?0:p,h=r.bottom,f=void 0===h?0:h,v=r.left,y=void 0===v?0:v,g=y+d,m=c+f,b=(null!==(o=e.left)&&void 0!==o?o:0)+(null!==(i=e.right)&&void 0!==i?i:0)+g,C=(null!==(a=e.top)&&void 0!==a?a:0)+(null!==(s=e.bottom)&&void 0!==s?s:0)+m;return l.width<=b||l.height<=C?(n.crossLines=!1,n.series=!1,l):(l.x+=y,l.y+=c,l.width-=g,l.height-=m,l)},e.prototype.buildSeriesRect=function(t,e){var r=t.clone(),n=e.top,o=e.bottom,i=e.left,a=e.right;return r.x+=null!=i?i:0,r.y+=null!=n?n:0,r.width-=(null!=i?i:0)+(null!=a?a:0),r.height-=(null!=n?n:0)+(null!=o?o:0),r.width=Math.max(0,r.width),r.height=Math.max(0,r.height),r},e.prototype.clampToOutsideSeriesRect=function(t,e,r,n){var o=t.x,i=t.y,a=[o,i,o+t.width,i+t.height];return(1===n?Math.min:Math.max)(e,a[("x"===r?0:1)+(1===n?0:2)])},e.prototype.calculateAxisDimensions=function(t){var e,r,n,o,i,a=t.axis,s=t.seriesRect,l=t.paddedBounds,u=t.axisWidths,c=t.newAxisWidths,p=t.primaryTickCounts,d=t.addInterAxisPadding,h=t.clipSeries,f=a.position,v=void 0===f?"left":f,y=a.direction,g=null!==(e=c[v])&&void 0!==e?e:0;switch(v){case"top":case"bottom":a.range=[0,s.width],a.gridLength=s.height;break;case"right":case"left":a.range=function(t){return t instanceof ig||t instanceof bg?[0,s.height]:[s.height,0]}(a),a.gridLength=s.width}var m=this.zoomManager.getAxisZoom(a.id),b=null!=m?m:{},C=b.min,S=void 0===C?0:C,w=b.max,x=void 0===w?1:w;a.visibleRange=[S,x],!h&&(a.visibleRange[0]>0||a.visibleRange[1]<1)&&(h=!0);var O=a.nice?p[y]:void 0;null!=a.thickness&&a.thickness>0?a.maxThickness=a.thickness:y===Xu.Y?a.maxThickness=.3*l.width:a.maxThickness=.3*l.height,O=a.update(O),p[y]=null!==(r=p[y])&&void 0!==r?r:O;var E=0;if(null!=a.thickness&&a.thickness>0)E=a.thickness;else{var T=a.computeBBox();E=y===Xu.X?T.height:T.width}return d&&(E+=15),E=Math.ceil(E),c[v]=(null!==(n=c[v])&&void 0!==n?n:0)+E,a.gridPadding=(null!==(o=u[v])&&void 0!==o?o:0)-(null!==(i=c[v])&&void 0!==i?i:0),{clipSeries:h,axisThickness:E,axisOffset:g}},e.prototype.positionAxis=function(t){var e,r,n,o,i=t.axis,a=t.axisBound,s=t.axisWidths,l=t.seriesRect,u=t.axisOffset,c=t.axisThickness;switch(i.position){case"top":i.translation.x=a.x+(null!==(e=s.left)&&void 0!==e?e:0),i.translation.y=this.clampToOutsideSeriesRect(l,a.y+1+u+c,"y",1);break;case"bottom":i.translation.x=a.x+(null!==(r=s.left)&&void 0!==r?r:0),i.translation.y=this.clampToOutsideSeriesRect(l,a.y+a.height+1-c-u,"y",-1);break;case"left":i.translation.y=a.y+(null!==(n=s.top)&&void 0!==n?n:0),i.translation.x=this.clampToOutsideSeriesRect(l,a.x+u+c,"x",1);break;case"right":i.translation.y=a.y+(null!==(o=s.top)&&void 0!==o?o:0),i.translation.x=this.clampToOutsideSeriesRect(l,a.x+a.width-c-u,"x",-1)}i.updatePosition({rotation:Pl(i.rotation),sideFlag:i.label.getSideFlag()})},e.className="CartesianChart",e.type="cartesian",e}(sf),Dg=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ag=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.shape="polygon",e}return Dg(e,t),e.prototype.computeLabelsBBox=function(t,e){return null},e}(jv),Mg=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),_g=function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{l(n.next(t))}catch(t){i(t)}}function s(t){try{l(n.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}l((n=n.apply(t,e||[])).next())}))},Rg=function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},kg=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},Fg=function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t},Ig=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Lg=function(t){function e(e,r,n){void 0===e&&(e=window.document);var o=t.call(this,e,r,n)||this;return o.padding=new pp(40),o}return Mg(e,t),e.prototype.performLayout=function(){return _g(this,void 0,void 0,(function(){var e,r,n;return Rg(this,(function(o){switch(o.label){case 0:return[4,t.prototype.performLayout.call(this)];case 1:return e=o.sent(),r=e.clone(),this.computeSeriesRect(e),this.computeCircle(e),this.axes.forEach((function(t){return t.update()})),20,n=e.clone().grow(20),this.hoverRect=n,this.layoutService.dispatchLayoutComplete({type:"layout-complete",chart:{width:this.scene.width,height:this.scene.height},series:{rect:r,paddedRect:e,hoverRect:n,visible:!0},axes:[]}),[2,e]}}))}))},e.prototype.updateAxes=function(t,e,r){var n;this.axes.forEach((function(n){var o;if(n.direction===Xu.X){var i=Pl(null!==(o=n.rotation)&&void 0!==o?o:0);n.range=[-Math.PI/2+i,3*Math.PI/2+i],n.gridLength=r,n.translation.x=t,n.translation.y=e}else n.direction===Xu.Y&&(n.range=[r,0],n.translation.x=t,n.translation.y=e-r);n.updateScale()}));var o=this.axes.find((function(t){return t.direction===Xu.X})),i=null==o?void 0:o.scale,a=null===(n=null==i?void 0:i.ticks)||void 0===n?void 0:n.call(i).map((function(t){return i.convert(t)}));this.axes.filter((function(t){return t instanceof Ag})).forEach((function(t){return t.gridAngles=a}))},e.prototype.computeSeriesRect=function(t){var e=this.seriesAreaPadding;t.shrink(e.left,"left"),t.shrink(e.top,"top"),t.shrink(e.right,"right"),t.shrink(e.bottom,"bottom"),this.seriesRect=t},e.prototype.computeCircle=function(t){var e=this,r=this.series.filter((function(t){return t instanceof ny})),n=this.axes.filter((function(t){return t instanceof Ag})),o=function(t,n,o){e.updateAxes(t,n,o),r.forEach((function(e){e.centerX=t,e.centerY=n,e.radius=o}));var i=r.filter((function(t){return t instanceof wy}));if(i.length>1){var a=i.map((function(t){var e=t.getInnerRadius();return{series:t,innerRadius:e}})).sort((function(t,e){return t.innerRadius-e.innerRadius}));a[a.length-1].series.surroundingRadius=void 0;for(var s=0;s<a.length-1;s++)a[s].series.surroundingRadius=a[s+1].innerRadius}},i=t.x+t.width/2,a=t.y+t.height/2,s=Math.max(0,Math.min(t.width,t.height)/2),l=s;o(i,a,l);var u=function(u){var c,p,d=(void 0===u?{}:u).hideWhenNecessary,h=void 0!==d&&d,f=[];try{for(var v=Ig(Fg(Fg([],kg(n)),kg(r))),y=v.next();!y.done;y=v.next()){var g=y.value.computeLabelsBBox({hideWhenNecessary:h},t);g&&f.push(g)}}catch(t){c={error:t}}finally{try{y&&!y.done&&(p=v.return)&&p.call(v)}finally{if(c)throw c.error}}if(0!==f.length){var m=Ns.merge(f),b=e.refineCircle(m,l,t);o(b.centerX,b.centerY,b.radius),b.radius!==l&&(l=b.radius)}else o(i,a,s)};return u(),u(),u(),u({hideWhenNecessary:!0}),u({hideWhenNecessary:!0}),{radius:l,centerX:i,centerY:a}},e.prototype.refineCircle=function(t,e,r){var n=-e,o=-e,i=e,a=e,s=Math.max(0,n-t.x),l=Math.max(0,o-t.y),u=Math.max(0,t.x+t.width-i),c=Math.max(0,t.y+t.height-a),p=r.width-s-u,d=r.height-l-c,h=Math.min(p,d)/2,f=.5*r.width/2,v=.5*r.height/2,y=Math.min(f,v);if(h<y){var g=s+u;if(2*(h=y)+(l+c)>r.height){var m=r.height-2*h;2*Math.min(l,c)>m?(l=m/2,c=m/2):l>c?l=m-c:c=m-l}if(2*h+g>r.width){var b=r.width-2*h;2*Math.min(s,u)>b?(s=b/2,u=b/2):s>u?s=b-u:u=b-s}}var C=s+2*h+u,S=l+2*h+c;return{centerX:r.x+(r.width-C)/2+s+h,centerY:r.y+(r.height-S)/2+l+h,radius:h}},e.className="PolarChart",e.type="polar",e}(sf),Ng=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Gg=function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{l(n.next(t))}catch(t){i(t)}}function s(t){try{l(n.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}l((n=n.apply(t,e||[])).next())}))},jg=function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Vg=function(t){function e(e,r,n){void 0===e&&(e=window.document);var o=t.call(this,e,r,n)||this;return o._data={},o}return Ng(e,t),e.prototype.performLayout=function(){return Gg(this,void 0,void 0,(function(){var e,r,n,o,i=this;return jg(this,(function(a){switch(a.label){case 0:return[4,t.prototype.performLayout.call(this)];case 1:return e=a.sent(),r=this.seriesAreaPadding,n=e.clone(),e.shrink(r.left,"left"),e.shrink(r.top,"top"),e.shrink(r.right,"right"),e.shrink(r.bottom,"bottom"),this.seriesRect=e,20,o=e.clone().grow(20),this.hoverRect=o,this.seriesRoot.translationX=Math.floor(e.x),this.seriesRoot.translationY=Math.floor(e.y),[4,Promise.all(this.series.map((function(t){return Gg(i,void 0,void 0,(function(){return jg(this,(function(r){switch(r.label){case 0:return[4,t.update({seriesRect:e})];case 1:return r.sent(),[2]}}))}))})))];case 2:return a.sent(),this.seriesRoot.setClipRectInGroupCoordinateSpace(new Ns(e.x,e.y,e.width,e.height)),this.layoutService.dispatchLayoutComplete({type:"layout-complete",chart:{width:this.scene.width,height:this.scene.height},series:{rect:n,paddedRect:e,hoverRect:o,visible:!0},axes:[]}),[2,e]}}))}))},e.className="HierarchyChart",e.type="hierarchy",e}(sf);function Bg(t,e){var r,n,o,i,a,s,l=Math.floor(t[0]),u=t[1];r=l,n=u,o=e,i=Math.abs(n-r)/(o-1),a=Math.floor(Math.log10(i)),s=Math.pow(10,a);var c=function(t,e,r){return function(t){var e=Math.floor(Math.log10(t)),r=Math.pow(10,e),n=t/r*10;if(n>0&&n<=1)return r/10;if(n>1&&n<=2)return 2*r/10;if(n>1&&n<=5)return 5*r/10;if(n>5&&n<=10)return 10*r/10;if(n>10&&n<=20)return 20*r/10;if(n>20&&n<=40)return 40*r/10;if(n>40&&n<=50)return 50*r/10;if(n>50&&n<=100)return 100*r/10;return n}((e-t)/(r-1))}(l=Math.floor(r/s)*s,u,e);return[[l,u=l+(e-1)*c],function(t,e,r){for(var n=Math.floor(Math.log10(e)),o=e>0&&e<1?Math.abs(n):0,i=Math.pow(10,o),a=new xf(o),s=0;s<r;s++){var l=t+e*s;a[s]=Math.round(l*i)/i}return a}(l,c,e)]}var Ug=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Hg=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},zg=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},Wg=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.maxSpacing=NaN,e}return Ug(e,t),Hg([nu(lu(Au(1),pu("minSpacing"))),yv(NaN)],e.prototype,"maxSpacing",void 0),e}(Pv),Kg=function(t){function e(e,r){void 0===r&&(r=new Xv);var n=t.call(this,e,r)||this;return n.min=NaN,n.max=NaN,r.strictClampByDefault=!0,n}return Ug(e,t),e.prototype.normaliseDataDomain=function(t){return function(t,e,r){var n;return t.length>2&&(t=null!==(n=cv(t))&&void 0!==n?n:[NaN,NaN]),isNaN(e)||(t=[e,t[1]]),isNaN(r)||(t=[t[0],r]),t[0]>t[1]&&(t=[]),t}(t,this.min,this.max)},e.prototype.formatDatum=function(t){return"number"==typeof t?t.toFixed(2):(sl.warnOnce("data contains Date objects which are being plotted against a number axis, please only use a number axis for numbers."),String(t))},e.prototype.createTick=function(){return new Wg},e.prototype.updateSecondaryAxisTicks=function(t){if(null==this.dataDomain)throw new Error("AG Charts - dataDomain not calculated, cannot perform tick calculation.");var e=zg(Bg(this.dataDomain,null!=t?t:0),2),r=e[0],n=e[1];return this.scale.nice=!1,this.scale.domain=r,this.scale.update(),n},e.className="NumberAxis",e.type="number",Hg([nu(lu(Au(),cu("max"))),yv(NaN)],e.prototype,"min",void 0),Hg([nu(lu(Au(),pu("min"))),yv(NaN)],e.prototype,"max",void 0),e}(Qy),Xg=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Yg=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a};function qg(){return ou((function(t){return"number"==typeof t&&0!==t}),"expecting a non-zero Number")}var Zg,Jg=function(t){function e(e){var r=t.call(this,e,new uv)||this;return r.min=NaN,r.max=NaN,r.scale.strictClampByDefault=!0,r}return Xg(e,t),e.prototype.normaliseDataDomain=function(t){var e,r=this.min,n=this.max;t.length>2&&(t=null!==(e=cv(t))&&void 0!==e?e:[NaN,NaN]),isNaN(r)||(t=[r,t[1]]),isNaN(n)||(t=[t[0],n]);var o=t[0]>t[1],i=t[0]<0&&t[1]>0,a=0===t[0]&&0===t[1];return(o||i||a)&&(t=[],i?sl.warn("the data domain crosses zero, the chart data cannot be rendered. See log axis documentation for more information."):a&&sl.warn("the data domain has 0 extent, no data is rendered.")),0===t[0]&&(t[0]=1),0===t[1]&&(t[1]=-1),t},Object.defineProperty(e.prototype,"base",{get:function(){return this.scale.base},set:function(t){this.scale.base=t},enumerable:!1,configurable:!0}),e.className="LogAxis",e.type="log",Yg([nu(lu(Au(),cu("max"),qg())),yv(NaN)],e.prototype,"min",void 0),Yg([nu(lu(Au(),pu("min"),qg())),yv(NaN)],e.prototype,"max",void 0),e}(Kg),$g=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Qg=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},tm=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.maxSpacing=NaN,e}return $g(e,t),Qg([nu(lu(Au(1),pu("minSpacing"))),yv(NaN)],e.prototype,"maxSpacing",void 0),e}(Pv),em=function(t){function e(e){var r=t.call(this,e,new Bf)||this;r.datumFormat="%m/%d/%y, %H:%M:%S",r.min=void 0,r.max=void 0;var n=r.scale;return n.strictClampByDefault=!0,r.refreshScale(),r.datumFormatter=n.tickFormat({specifier:r.datumFormat}),r}return $g(e,t),e.prototype.normaliseDataDomain=function(t){var e,r=this.min,n=this.max;return"number"==typeof r&&(r=new Date(r)),"number"==typeof n&&(n=new Date(n)),t.length>2&&(t=(null!==(e=cv(t))&&void 0!==e?e:[0,1e3]).map((function(t){return new Date(t)}))),r instanceof Date&&(t=[r,t[1]]),n instanceof Date&&(t=[t[0],n]),t[0]>t[1]&&(t=[]),t},e.prototype.createTick=function(){return new tm},e.prototype.onLabelFormatChange=function(e,r){r?t.prototype.onLabelFormatChange.call(this,e,r):this.labelFormatter=this.scale.tickFormat({ticks:e})},e.prototype.formatDatum=function(t){var e;return null!==(e=this.moduleCtx.callbackCache.call(this.datumFormatter,t))&&void 0!==e?e:String(t)},e.prototype.calculatePadding=function(t,e){return[0,1]},e.className="TimeAxis",e.type="time",Qg([nu(lu(Su,cu("max")))],e.prototype,"min",void 0),Qg([nu(lu(Su,pu("min")))],e.prototype,"max",void 0),e}(Qy),rm=((Zg={})[Kg.type]=Kg,Zg[ig.type]=ig,Zg[em.type]=em,Zg[bg.type]=bg,Zg[Jg.type]=Jg,Zg);function nm(t,e){rm[t]=e}function om(t,e){var r=rm[t];if(r)return new r(e);throw new Error("AG Charts - unknown axis type: "+t)}var im={has:function(t){return Object.prototype.hasOwnProperty.call(rm,t)},get axesTypes(){return Object.keys(rm)}},am={};function sm(t,e){am[t]=e}var lm,um,cm=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),pm=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},dm=["circle","cross","diamond","heart","plus","square","triangle"],hm=ou((function(t){return dm.includes(t)||Object.getPrototypeOf(t)===Jd}),"expecting a marker shape keyword such as 'circle', 'diamond' or 'square' or an object extending the Marker class"),fm=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.enabled=!0,e.shape=oh,e.size=6,e.maxSize=30,e.domain=void 0,e.fill=void 0,e.stroke=void 0,e.strokeWidth=1,e.fillOpacity=void 0,e.strokeOpacity=void 0,e}return cm(e,t),pm([nu(fu),zs({redraw:ks.MAJOR})],e.prototype,"enabled",void 0),pm([nu(hm),zs({redraw:ks.MAJOR})],e.prototype,"shape",void 0),pm([nu(Pu(0)),zs({redraw:ks.MAJOR})],e.prototype,"size",void 0),pm([nu(Pu(0)),zs({redraw:ks.MAJOR})],e.prototype,"maxSize",void 0),pm([nu(_u),zs({redraw:ks.MAJOR})],e.prototype,"domain",void 0),pm([nu(Ou),zs({redraw:ks.MAJOR})],e.prototype,"fill",void 0),pm([nu(Ou),zs({redraw:ks.MAJOR})],e.prototype,"stroke",void 0),pm([nu(Du(0)),zs({redraw:ks.MAJOR})],e.prototype,"strokeWidth",void 0),pm([nu(Du(0,1)),zs({redraw:ks.MAJOR})],e.prototype,"fillOpacity",void 0),pm([nu(Du(0,1)),zs({redraw:ks.MAJOR})],e.prototype,"strokeOpacity",void 0),e}(Ks),vm=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ym=function(){return(ym=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},gm=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},mm=function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{l(n.next(t))}catch(t){i(t)}}function s(t){try{l(n.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}l((n=n.apply(t,e||[])).next())}))},bm=function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Cm=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Sm=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},wm=((lm={})[Xu.X]=["xKey"],lm[Xu.Y]=["yKey"],lm),xm=((um={})[Xu.X]=["xName"],um[Xu.Y]=["yName"],um),Om=function(t){function e(e,r,n,o,i){var a=t.call(this,n,o,i)||this;return a.xKey=e,a.yKey=r,a}return vm(e,t),e}(tp),Em=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="nodeClick",e}return vm(e,t),e}(Om),Tm=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="nodeDoubleClick",e}return vm(e,t),e}(Om),Pm=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return vm(e,t),e}(Dv),Dm=function(t){function e(e){var r=t.call(this,ym(ym({},e),{useSeriesGroupLayer:!0,directionKeys:wm,directionNames:xm}))||this;r.legendItemName=void 0,r._contextNodeData=[],r.nodeDataDependencies={},r.highlightSelection=Fd.select(r.highlightNode,(function(){return r.opts.hasMarkers?r.markerFactory():r.nodeFactory()})),r.highlightLabelSelection=Fd.select(r.highlightLabel,Gl),r.subGroups=[],r.subGroupId=0,r.datumSelectionGarbageCollection=!0;var n=e.pathsPerSeries,o=void 0===n?1:n,i=e.hasMarkers,a=void 0!==i&&i,s=e.hasHighlightedLabels,l=void 0!==s&&s,u=e.pathsZIndexSubOrderOffset,c=void 0===u?[]:u;return r.opts={pathsPerSeries:o,hasMarkers:a,hasHighlightedLabels:l,pathsZIndexSubOrderOffset:c},r.animationState=new Pm("empty",{empty:{on:{update:{target:"ready",action:function(t){return r.animateEmptyUpdateReady(t)}}}},ready:{on:{updateData:{target:"waiting",action:function(){}},update:{target:"ready",action:function(t){return r.animateReadyUpdate(t)}},highlight:{target:"ready",action:function(t){return r.animateReadyHighlight(t)}},highlightMarkers:{target:"ready",action:function(t){return r.animateReadyHighlightMarkers(t)}},resize:{target:"ready",action:function(t){return r.animateReadyResize(t)}}}},waiting:{on:{update:{target:"ready",action:function(t){return r.animateWaitingUpdateReady(t)}}}}}),r}return vm(e,t),Object.defineProperty(e.prototype,"contextNodeData",{get:function(){var t;return null===(t=this._contextNodeData)||void 0===t?void 0:t.slice()},enumerable:!1,configurable:!0}),e.prototype.addChartEventListeners=function(){var t,e,r=this;null===(t=this.ctx.chartEventManager)||void 0===t||t.addListener("legend-item-click",(function(t){return r.onLegendItemClick(t)})),null===(e=this.ctx.chartEventManager)||void 0===e||e.addListener("legend-item-double-click",(function(t){return r.onLegendItemDoubleClick(t)}))},e.prototype.destroy=function(){t.prototype.destroy.call(this),this._contextNodeData.splice(0,this._contextNodeData.length),this.subGroups.splice(0,this.subGroups.length)},e.prototype.checkDomainXY=function(t,e,r,n){return(r&&ql(t)||!r&&Yl(t))&&(n&&ql(e)||!n&&Yl(e))?[t,e]:void 0},e.prototype.checkRangeXY=function(t,e,r,n){return!isNaN(t)&&!isNaN(e)&&r.inRange(t)&&n.inRange(e)},e.prototype.update=function(t){var e,r,n=t.seriesRect;return mm(this,void 0,void 0,(function(){var t,o,i,a,s;return bm(this,(function(l){switch(l.label){case 0:return t=this.visible,o=(null!==(r=null===(e=this.ctx.highlightManager)||void 0===e?void 0:e.getActiveHighlight())&&void 0!==r?r:{}).series,i=o?o===this:void 0,a={seriesRectWidth:null==n?void 0:n.width,seriesRectHeight:null==n?void 0:n.height},(s=null!=Pp(this.nodeDataDependencies,a))&&(this.nodeDataDependencies=a,this.markNodeDataDirty()),[4,this.updateSelections(i,t)];case 1:return l.sent(),[4,this.updateNodes(i,t)];case 2:return l.sent(),s&&this.animationState.transition("resize",{datumSelections:this.subGroups.map((function(t){return t.datumSelection})),markerSelections:this.subGroups.map((function(t){return t.markerSelection})),contextData:this._contextNodeData,paths:this.subGroups.map((function(t){return t.paths}))}),this.animationState.transition("update",{datumSelections:this.subGroups.map((function(t){return t.datumSelection})),markerSelections:this.subGroups.map((function(t){return t.markerSelection})),labelSelections:this.subGroups.map((function(t){return t.labelSelection})),contextData:this._contextNodeData,paths:this.subGroups.map((function(t){return t.paths})),seriesRect:n}),[2]}}))}))},e.prototype.updateSelections=function(t,e){var r;return mm(this,void 0,void 0,(function(){var n,o=this;return bm(this,(function(i){switch(i.label){case 0:return[4,this.updateHighlightSelection(t)];case 1:return i.sent(),e?this.nodeDataRefresh||this.isPathOrSelectionDirty()?this.nodeDataRefresh?(this.nodeDataRefresh=!1,(null===(r=this.chart)||void 0===r?void 0:r.debug)&&sl.debug("CartesianSeries.updateSelections() - calling createNodeData() for",this.id),n=this,[4,this.createNodeData()]):[3,4]:[2]:[2];case 2:return n._contextNodeData=i.sent(),[4,this.updateSeriesGroups()];case 3:i.sent(),i.label=4;case 4:return[4,Promise.all(this.subGroups.map((function(t,e){return o.updateSeriesGroupSelections(t,e)})))];case 5:return i.sent(),[2]}}))}))},e.prototype.updateSeriesGroupSelections=function(t,e){return mm(this,void 0,void 0,(function(){var r,n,o,i,a,s,l,u,c;return bm(this,(function(p){switch(p.label){case 0:return r=t.datumSelection,n=t.labelSelection,o=t.markerSelection,i=this._contextNodeData[e],a=i.nodeData,s=i.labelData,l=t,[4,this.updateDatumSelection({nodeData:a,datumSelection:r,seriesIdx:e})];case 1:return l.datumSelection=p.sent(),u=t,[4,this.updateLabelSelection({labelData:s,labelSelection:n,seriesIdx:e})];case 2:return u.labelSelection=p.sent(),o?(c=t,[4,this.updateMarkerSelection({nodeData:a,markerSelection:o,seriesIdx:e})]):[3,4];case 3:c.markerSelection=p.sent(),p.label=4;case 4:return[2]}}))}))},e.prototype.nodeFactory=function(){return new fl},e.prototype.markerFactory=function(){return new(vh())},e.prototype.updateSeriesGroups=function(){return mm(this,void 0,void 0,(function(){var t,e,r,n,o,i,a,s,l,u,c,p,d,h,f=this;return bm(this,(function(v){if(e=(t=this)._contextNodeData,r=t.contentGroup,n=t.subGroups,o=t.opts,i=o.pathsPerSeries,a=o.hasMarkers,e.length===n.length)return[2];for(e.length<n.length&&n.splice(e.length).forEach((function(t){var e,n,o=t.dataNodeGroup,i=t.markerGroup,a=t.labelGroup,s=t.paths;r.removeChild(o),i&&r.removeChild(i),a&&r.removeChild(a);try{for(var l=Cm(s),u=l.next();!u.done;u=l.next()){var c=u.value;r.removeChild(c)}}catch(t){e={error:t}}finally{try{u&&!u.done&&(n=l.return)&&n.call(l)}finally{if(e)throw e.error}}})),s=e.length;s>n.length;){for(!1,l=this.subGroupId++,u=new fl({name:this.id+"-series-sub"+l+"-dataNodes",layer:!1,zIndex:Ku.SERIES_LAYER_ZINDEX,zIndexSubOrder:this.getGroupZIndexSubOrder("data",l)}),c=a?new fl({name:this.id+"-series-sub"+this.subGroupId+++"-markers",layer:!1,zIndex:Ku.SERIES_LAYER_ZINDEX,zIndexSubOrder:this.getGroupZIndexSubOrder("marker",l)}):void 0,p=new fl({name:this.id+"-series-sub"+this.subGroupId+++"-labels",layer:!1,zIndex:Ku.SERIES_LABEL_ZINDEX,zIndexSubOrder:this.getGroupZIndexSubOrder("labels",l)}),r.appendChild(u),r.appendChild(p),c&&r.appendChild(c),d=[],h=0;h<i;h++)d[h]=new Xd,d[h].zIndex=Ku.SERIES_LAYER_ZINDEX,d[h].zIndexSubOrder=this.getGroupZIndexSubOrder("paths",h),r.appendChild(d[h]);n.push({paths:d,dataNodeGroup:u,markerGroup:c,labelGroup:p,labelSelection:Fd.select(p,Gl),datumSelection:Fd.select(u,(function(){return f.nodeFactory()}),this.datumSelectionGarbageCollection),markerSelection:c?Fd.select(c,(function(){return f.markerFactory()})):void 0})}return[2]}))}))},e.prototype.getGroupZIndexSubOrder=function(e,r){var n;void 0===r&&(r=0);var o=t.prototype.getGroupZIndexSubOrder.call(this,e,r);if("paths"===e){var i=null!==(n=this.opts.pathsZIndexSubOrderOffset[r])&&void 0!==n?n:0,a=o[0];o[0]="function"==typeof a?function(){return+a()+i}:+a+i}return o},e.prototype.updateNodes=function(t,e){var r;return mm(this,void 0,void 0,(function(){var n,o,i,a,s,l,u,c,p,d=this;return bm(this,(function(h){switch(h.label){case 0:return o=(n=this).highlightSelection,i=n.highlightLabelSelection,a=n._contextNodeData,s=n.opts,l=s.hasMarkers,u=s.hasHighlightedLabels,c=this.visible&&(null===(r=this._contextNodeData)||void 0===r?void 0:r.length)>0&&e,this.rootGroup.visible=c,this.contentGroup.visible=c,this.highlightGroup.visible=c&&!!t,p=this.subGroups.map((function(t,e){var r=a[e].itemId;return d.getOpacity({itemId:r})})),l?[4,this.updateMarkerNodes({markerSelection:o,isHighlight:!0,seriesIdx:-1})]:[3,2];case 1:return h.sent(),this.animationState.transition("highlightMarkers",o),[3,4];case 2:return[4,this.updateDatumNodes({datumSelection:o,isHighlight:!0,seriesIdx:-1})];case 3:h.sent(),this.animationState.transition("highlight",o),h.label=4;case 4:return u?[4,this.updateLabelNodes({labelSelection:i,seriesIdx:-1})]:[3,6];case 5:h.sent(),h.label=6;case 6:return[4,Promise.all(this.subGroups.map((function(t,e){return mm(d,void 0,void 0,(function(){var r,n,o,i,a,s,u,d,h,f,v,y,g,m;return bm(this,(function(b){switch(b.label){case 0:r=t.dataNodeGroup,n=t.markerGroup,o=t.datumSelection,i=t.labelSelection,a=t.markerSelection,s=t.paths,u=t.labelGroup,d=c,h=p[e],r.opacity=h,r.visible=d,u.visible=d,n&&(n.opacity=h,n.zIndex=r.zIndex>=Ku.SERIES_LAYER_ZINDEX?r.zIndex:r.zIndex+1,n.visible=d),u&&(u.opacity=h);try{for(f=Cm(s),v=f.next();!v.done;v=f.next())(y=v.value).opacity=h,y.visible=d}catch(t){g={error:t}}finally{try{v&&!v.done&&(m=f.return)&&m.call(f)}finally{if(g)throw g.error}}return r.visible?[4,this.updateDatumNodes({datumSelection:o,isHighlight:!1,seriesIdx:e})]:[2];case 1:return b.sent(),[4,this.updateLabelNodes({labelSelection:i,seriesIdx:e})];case 2:return b.sent(),l&&a?[4,this.updateMarkerNodes({markerSelection:a,isHighlight:!1,seriesIdx:e})]:[3,4];case 3:b.sent(),b.label=4;case 4:return[2]}}))}))})))];case 7:return h.sent(),[2]}}))}))},e.prototype.updateHighlightSelection=function(t){var e;return mm(this,void 0,void 0,(function(){var r,n,o,i,a,s,l,u,c,p,d,h,f,v,y,g;return bm(this,(function(m){switch(m.label){case 0:return n=(r=this).highlightSelection,o=r.highlightLabelSelection,i=r._contextNodeData,a=null===(e=this.ctx.highlightManager)||void 0===e?void 0:e.getActiveHighlight(),s=t&&(null==a?void 0:a.datum)?a:void 0,l=this,[4,this.updateHighlightSelectionItem({item:s,highlightSelection:n})];case 1:if(l.highlightSelection=m.sent(),this.isLabelEnabled()&&null!=s){c=s.itemId,p=void 0===c?void 0:c;try{for(d=Cm(i),h=d.next();!h.done&&(f=h.value.labelData,null==(u=f.find((function(t){return t.datum===s.datum&&t.itemId===p}))));h=d.next());}catch(t){y={error:t}}finally{try{h&&!h.done&&(g=d.return)&&g.call(d)}finally{if(y)throw y.error}}}return v=this,[4,this.updateHighlightSelectionLabel({item:u,highlightLabelSelection:o})];case 2:return v.highlightLabelSelection=m.sent(),[2]}}))}))},e.prototype.pickNodeExactShape=function(e){var r,n,o=t.prototype.pickNodeExactShape.call(this,e);if(o)return o;var i=e.x,a=e.y,s=this.opts.hasMarkers;try{for(var l=Cm(this.subGroups),u=l.next();!u.done;u=l.next()){var c=u.value,p=c.dataNodeGroup,d=c.markerGroup,h=p.pickNode(i,a);if(!h&&s&&(h=null==d?void 0:d.pickNode(i,a)),h)return{datum:h.datum,distance:0}}}catch(t){r={error:t}}finally{try{u&&!u.done&&(n=l.return)&&n.call(l)}finally{if(r)throw r.error}}},e.prototype.pickNodeClosestDatum=function(t){var e,r,n,o,i,a,s,l=t.x,u=t.y,c=this.axes,p=this.rootGroup,d=this._contextNodeData,h=c[Xu.X],f=c[Xu.Y],v=p.transformPoint(l,u),y=1/0;try{for(var g=Cm(d),m=g.next();!m.done;m=g.next()){var b=m.value;try{for(var C=(n=void 0,Cm(b.nodeData)),S=C.next();!S.done;S=C.next()){var w,x=S.value,O=x.point,E=void 0===O?{}:O,T=E.x,P=void 0===T?NaN:T,D=E.y,A=void 0===D?NaN:D;if(!isNaN(P)&&!isNaN(A))if((null==h?void 0:h.inRange(P))&&(null==f?void 0:f.inRange(A)))(w=Math.max(Math.pow(v.x-P,2)+Math.pow(v.y-A,2),0))<y&&(y=w,s=x)}}catch(t){n={error:t}}finally{try{S&&!S.done&&(o=C.return)&&o.call(C)}finally{if(n)throw n.error}}}}catch(t){e={error:t}}finally{try{m&&!m.done&&(r=g.return)&&r.call(g)}finally{if(e)throw e.error}}if(s)return{datum:s,distance:w=Math.max(Math.sqrt(y)-(null!==(a=null===(i=s.point)||void 0===i?void 0:i.size)&&void 0!==a?a:0),0)}},e.prototype.pickNodeMainAxisFirst=function(t,e){var r,n,o,i,a,s,l=t.x,u=t.y,c=this.axes,p=this.rootGroup,d=this._contextNodeData,h=c[Xu.X],f=c[Xu.Y],v=[h,f].filter((function(t){return t instanceof ig})).map((function(t){return t.direction}));if(!e||0!==v.length){var y=Sm(v,1)[0],g=void 0===y?Xu.X:y,m=p.transformPoint(l,u),b=g===Xu.X?[m.x,m.y]:[m.y,m.x],C=[1/0,1/0],S=void 0;try{for(var w=Cm(d),x=w.next();!x.done;x=w.next()){var O=x.value;try{for(var E=(o=void 0,Cm(O.nodeData)),T=E.next();!T.done;T=E.next()){var P=T.value,D=P.point,A=void 0===D?{}:D,M=A.x,_=void 0===M?NaN:M,R=A.y,k=void 0===R?NaN:R;if(!isNaN(_)&&!isNaN(k))if((null==h?void 0:h.inRange(_))&&(null==f?void 0:f.inRange(k))){for(var F=g===Xu.X?[_,k]:[k,_],I=!0,L=0;L<F.length;L++){var N=Math.abs(F[L]-b[L]);if(N>C[L]){I=!1;break}N<C[L]&&(C[L]=N,C.fill(1/0,L+1,C.length))}I&&(S=P)}}}catch(t){o={error:t}}finally{try{T&&!T.done&&(i=E.return)&&i.call(E)}finally{if(o)throw o.error}}}}catch(t){r={error:t}}finally{try{x&&!x.done&&(n=w.return)&&n.call(w)}finally{if(r)throw r.error}}if(S)return{datum:S,distance:Math.max(Math.sqrt(Math.pow(C[0],2)+Math.pow(C[1],2))-(null!==(s=null===(a=S.point)||void 0===a?void 0:a.size)&&void 0!==s?s:0),0)}}},e.prototype.onLegendItemClick=function(t){var e=t.enabled,r=t.itemId,n=t.series,o=t.legendItemName,i=null!=this.legendItemName&&this.legendItemName===o;(n.id===this.id||i)&&this.toggleSeriesItem(r,e)},e.prototype.onLegendItemDoubleClick=function(t){var e=t.enabled,r=t.itemId,n=t.series,o=t.numVisibleItems,i=t.legendItemName,a=Object.values(o).reduce((function(t,e){return t+e}),0),s=null!=this.legendItemName&&this.legendItemName===i;n.id===this.id||s||e&&1===a?this.toggleSeriesItem(r,!0):this.toggleSeriesItem(r,!1)},e.prototype.isPathOrSelectionDirty=function(){return!1},e.prototype.getLabelData=function(){return[]},e.prototype.updateHighlightSelectionItem=function(t){return mm(this,void 0,void 0,(function(){var e,r,n,o,i;return bm(this,(function(a){return e=this.opts.hasMarkers,r=t.item,n=t.highlightSelection,o=r?[r]:[],e?(i=n,[2,this.updateMarkerSelection({nodeData:o,markerSelection:i,seriesIdx:-1})]):[2,this.updateDatumSelection({nodeData:o,datumSelection:n,seriesIdx:-1})]}))}))},e.prototype.updateHighlightSelectionLabel=function(t){return mm(this,void 0,void 0,(function(){var e,r,n;return bm(this,(function(o){return e=t.item,r=t.highlightLabelSelection,n=e?[e]:[],[2,this.updateLabelSelection({labelData:n,labelSelection:r,seriesIdx:-1})]}))}))},e.prototype.updateDatumSelection=function(t){return mm(this,void 0,void 0,(function(){return bm(this,(function(e){return[2,t.datumSelection]}))}))},e.prototype.updateDatumNodes=function(t){return mm(this,void 0,void 0,(function(){return bm(this,(function(t){return[2]}))}))},e.prototype.updateMarkerSelection=function(t){return mm(this,void 0,void 0,(function(){return bm(this,(function(e){return[2,t.markerSelection]}))}))},e.prototype.updateMarkerNodes=function(t){return mm(this,void 0,void 0,(function(){return bm(this,(function(t){return[2]}))}))},e.prototype.animateEmptyUpdateReady=function(t){},e.prototype.animateReadyUpdate=function(t){},e.prototype.animateWaitingUpdateReady=function(t){},e.prototype.animateReadyHighlight=function(t){},e.prototype.animateReadyHighlightMarkers=function(t){},e.prototype.animateReadyResize=function(t){},gm([nu(gu)],e.prototype,"legendItemName",void 0),e}(up),Am=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.formatter=void 0,e}return vm(e,t),gm([nu(hu),zs({redraw:ks.MAJOR})],e.prototype,"formatter",void 0),e}(fm),Mm=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},_m=/(#\{(.*?)\})/g;function Rm(t,e,r){return t.replace(_m,(function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var o=t[2],i=Mm(o.split(":"),2),a=i[0],s=i[1],l=e[a];if("number"==typeof l){if(d=s&&r&&r[s]){var u=d,c=u.locales,p=u.options;return l.toLocaleString(c,p)}return String(l)}if(l instanceof Date){var d;if("string"==typeof(d=s&&r&&r[s])){var h=_f(d);return h(l)}return l.toDateString()}return"string"==typeof l||(null==l?void 0:l.toString)?String(l):""}))}var km=null;function Fm(t){return km=null!=km?km:document.createElement("div"),t?(km.textContent=t,km.innerHTML):""}var Im,Lm=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Nm=function(){return(Nm=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},Gm=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},jm=function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{l(n.next(t))}catch(t){i(t)}}function s(t){try{l(n.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}l((n=n.apply(t,e||[])).next())}))},Vm=function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Bm=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},Um=function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t},Hm=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.formatter=void 0,e}return Lm(e,t),Gm([nu(hu)],e.prototype,"formatter",void 0),e}(dv),zm=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.renderer=void 0,e.format=void 0,e}return Lm(e,t),Gm([nu(hu)],e.prototype,"renderer",void 0),Gm([nu(gu)],e.prototype,"format",void 0),e}(sp);!function(t){t[t.Fill=0]="Fill",t[t.Stroke=1]="Stroke",t[t.Marker=2]="Marker",t[t.Label=3]="Label"}(Im||(Im={}));var Wm=function(t){function e(e){var r=t.call(this,{moduleCtx:e,pathsPerSeries:2,pathsZIndexSubOrderOffset:[0,1e3],hasMarkers:!0})||this;r.tooltip=new zm,r.marker=new Am,r.label=new Hm,r.fill="#c16068",r.stroke="#874349",r.fillOpacity=1,r.strokeOpacity=1,r.lineDash=[0],r.lineDashOffset=0,r.xKey=void 0,r.xName=void 0,r.strokeWidth=2,r.shadow=void 0;var n=r,o=n.marker,i=n.label;return o.enabled=!1,i.enabled=!1,r}return Lm(e,t),e.prototype.processData=function(t){return jm(this,void 0,void 0,(function(){var e,r,n,o,i,a,s,l,u,c,p,d,h,f,v,y,g,m,b,C;return Vm(this,(function(S){switch(S.label){case 0:return r=(e=this).xKey,n=e.yKey,o=e.axes,i=e.normalizedTo,a=e.data,s=e.visible,l=e.seriesGrouping,u=(void 0===l?{}:l).groupIndex,c=void 0===u?this.id:u,r&&n&&a?(p=o[Xu.X],d=o[Xu.Y],h=(null==p?void 0:p.scale)instanceof mf,f=(null==d?void 0:d.scale)instanceof mf,v=["area-stack-"+c+"-yValues","area-stack-"+c+"-yValues-trailing","area-stack-"+c+"-yValues-prev","area-stack-"+c+"-yValues-trailing-prev","area-stack-"+c+"-yValues-marker"],y=[],(g=i&&isFinite(i)?i:void 0)&&(y.push(_c(this,[v[0],v[1],v[4]],g,"range")),y.push(_c(this,[v[2],v[3]],g,"range"))),[4,t.request(this.id,a,{props:Um(Um(Um(Um(Um(Um([Jc(this,r,h,{id:"xValue"}),$c(this,n,f,{id:"yValue-raw",invalidValue:null})],Bm(Qc(this,n,f,"window","current",{id:"yValue-end",invalidValue:null,groupId:v[0]}))),Bm(Qc(this,n,f,"window-trailing","current",{id:"yValue-start",invalidValue:null,groupId:v[1]}))),Bm(Qc(this,n,f,"window","last",{id:"yValue-previous-end",invalidValue:null,groupId:v[2]}))),Bm(Qc(this,n,f,"window-trailing","last",{id:"yValue-previous-start",invalidValue:null,groupId:v[3]}))),Bm(Qc(this,n,f,"normal","current",{id:"yValue-cumulative",invalidValue:null,groupId:v[4]}))),Bm(y)),groupByKeys:!0,dataVisible:s})]):[2];case 1:return m=S.sent(),b=m.dataModel,C=m.processedData,this.dataModel=b,this.processedData=C,[2]}}))}))},e.prototype.getDomain=function(t){var e=this.processedData,r=this.dataModel,n=this.axes;if(!e||!r)return[];var o=n[Xu.X],i=n[Xu.Y],a=r.resolveProcessedDataDefById(this,"xValue"),s=r.getDomain(this,"xValue","key",e),l=r.getDomain(this,/yValue-(previous-)?end/,"value",e);if(t===Xu.X)return"key"===(null==a?void 0:a.def.type)&&"category"===a.def.valueType?s:this.fixNumericExtent(cv(s),o);if(i instanceof Jg||i instanceof em)return this.fixNumericExtent(l,i);var u=[l[0]>0?0:l[0],l[1]<0?0:l[1]];return this.fixNumericExtent(u,i)},e.prototype.createNodeData=function(){var t;return jm(this,void 0,void 0,(function(){var e,r,n,o,i,a,s,l,u,c,p,d,h,f,v,y,g,m,b,C,S,w,x,O,E,T,P,D,A,M,_,R,k,F,I,L,N,G,j,V,B,U,H,z=this;return Vm(this,(function(W){if(r=(e=this).axes,n=e.data,o=e.processedData,i=(void 0===o?{}:o).data,a=e.dataModel,s=e.ctx.callbackCache,l=r[Xu.X],u=r[Xu.Y],!(l&&u&&n&&a))return[2,[]];for(p=(c=this).yKey,d=void 0===p?"":p,h=c.xKey,f=void 0===h?"":h,v=c.marker,y=c.label,g=c.fill,m=c.stroke,b=c.id,C=l.scale,S=u.scale,w=S instanceof mf,x=(null!==(t=C.bandwidth)&&void 0!==t?t:0)/2,O=a.resolveProcessedDataIndexById(this,"yValue-start").index,E=a.resolveProcessedDataIndexById(this,"yValue-end").index,T=a.resolveProcessedDataIndexById(this,"yValue-raw").index,P=a.resolveProcessedDataIndexById(this,"yValue-previous-start").index,D=a.resolveProcessedDataIndexById(this,"yValue-previous-end").index,A=a.resolveProcessedDataIndexById(this,"yValue-cumulative").index,M=function(t,e,r){var n=C.convert(t)+x,o=S.convert(e,{strict:!1});return[{x:n,y:S.convert(r,{strict:!1}),size:v.size},{x:n,y:o,size:v.size}]},_=function(t,e,r){var n,o=z.normalizedTo&&isFinite(z.normalizedTo),i=o&&w&&ql(r);return(!o&&!isNaN(r)||i)&&(n=e),{x:C.convert(t)+x,y:S.convert(n,{strict:!1}),size:v.size}},L={itemId:d,fillSelectionData:I={itemId:d,points:[]},labelData:R=[],nodeData:k=[],strokeSelectionData:F={itemId:d,points:[],yValues:[]}},N=I.points,G=[],j=F.points,V=F.yValues,B=-1,null==i||i.forEach((function(t){var e=Bm(t.keys,1)[0],r=t.datum;t.values.forEach((function(t,n){var o;B++;var i=r[n],a=t[T],l=t[O],u=t[E],c=t[P],p=t[D],h=t[A],C=null!=a,S=_(e,+h,a);if(C&&v&&k.push({index:B,series:z,itemId:d,datum:i,nodeMidPoint:{x:S.x,y:S.y},cumulativeValue:u,yValue:a,xValue:e,yKey:d,xKey:f,point:S,fill:g,stroke:m}),C&&y){var w=void 0;w=y.formatter?null!==(o=s.call(y.formatter,{value:a,seriesId:b}))&&void 0!==o?o:"":Jl(a)?Number(a).toFixed(2):String(a),R.push({index:B,itemId:d,point:S,label:w?{text:w,fontStyle:y.fontStyle,fontWeight:y.fontWeight,fontSize:y.fontSize,fontFamily:y.fontFamily,textAlign:"center",textBaseline:"bottom",fill:y.color}:void 0})}var x=[c,l],F=[p,u];if([U,e].some((function(t){return null==t})))U=e;else{x.some((function(t){return null==t}))&&(x[0]=0,x[1]=0),F.some((function(t){return null==t}))&&(F[0]=0,F[1]=0);var I=M(U,+x[0],+F[0]);N.push(I[0]),G.push(I[1]);var L=M(e,+x[1],+F[1]);N.push(L[0]),G.push(L[1]),j.push({x:NaN,y:NaN}),V.push(void 0),null!=p&&(j.push(I[0]),V.push(p)),null!=u&&(j.push(L[0]),V.push(u)),U=e}}))})),H=G.length-1;H>=0;H--)N.push(G[H]);return[2,[L]]}))}))},e.prototype.isPathOrSelectionDirty=function(){return this.marker.isDirty()},e.prototype.markerFactory=function(){return new(vh(this.marker.shape))},e.prototype.updateMarkerSelection=function(t){return jm(this,void 0,void 0,(function(){var e,r,n,o;return Vm(this,(function(i){return e=t.nodeData,r=t.markerSelection,n=this.marker.enabled,o=n&&e?e:[],this.marker.isDirty()&&r.clear(),[2,r.update(o,(function(t){t.tag=Im.Marker}))]}))}))},e.prototype.updateMarkerNodes=function(t){var e;return jm(this,void 0,void 0,(function(){var r,n,o,i,a,s,l,u,c,p,d,h,f,v,y,g,m,b,C,S,w,x,O,E,T;return Vm(this,(function(P){return r=t.markerSelection,n=t.isHighlight,i=(o=this).id,a=o.xKey,s=void 0===a?"":a,l=o.marker,u=o.fill,c=o.stroke,p=o.fillOpacity,d=o.marker.fillOpacity,h=void 0===d?p:d,f=o.strokeOpacity,v=o.highlightStyle.item,y=v.fill,g=v.fillOpacity,m=void 0===g?h:g,b=v.stroke,C=v.strokeWidth,S=o.visible,w=o.ctx.callbackCache,x=l.size,O=l.formatter,E=null!==(e=l.strokeWidth)&&void 0!==e?e:this.strokeWidth,T="function"==typeof l.shape,r.each((function(t,e){var r,o,a,p,d,v,g,P,D=n&&void 0!==y?y:null!==(r=l.fill)&&void 0!==r?r:u,A=n?m:h,M=n&&void 0!==b?b:null!==(o=l.stroke)&&void 0!==o?o:c,_=n&&void 0!==C?C:E,R=void 0;O&&(R=w.call(O,{datum:e.datum,xKey:s,yKey:e.yKey,fill:D,stroke:M,strokeWidth:_,size:x,highlighted:n,seriesId:i})),t.fill=null!==(a=null==R?void 0:R.fill)&&void 0!==a?a:D,t.stroke=null!==(p=null==R?void 0:R.stroke)&&void 0!==p?p:M,t.strokeWidth=null!==(d=null==R?void 0:R.strokeWidth)&&void 0!==d?d:_,t.fillOpacity=null!=A?A:1,t.strokeOpacity=null!==(g=null!==(v=l.strokeOpacity)&&void 0!==v?v:f)&&void 0!==g?g:1,t.size=null!==(P=null==R?void 0:R.size)&&void 0!==P?P:x,t.translationX=e.point.x,t.translationY=e.point.y,t.visible=t.size>0&&S&&!isNaN(e.point.x)&&!isNaN(e.point.y),T&&!t.dirtyPath&&(t.path.clear({trackChanges:!0}),t.updatePath(),t.checkPathDirty())})),n||this.marker.markClean(),[2]}))}))},e.prototype.updateLabelSelection=function(t){return jm(this,void 0,void 0,(function(){var e;return Vm(this,(function(r){return e=t.labelData,[2,t.labelSelection.update(e,(function(t){t.tag=Im.Label}))]}))}))},e.prototype.updateLabelNodes=function(t){return jm(this,void 0,void 0,(function(){var e,r,n,o,i,a,s,l;return Vm(this,(function(u){return e=t.labelSelection,r=this.label,n=r.enabled,o=r.fontStyle,i=r.fontWeight,a=r.fontSize,s=r.fontFamily,l=r.color,e.each((function(t,e){var r=e.point,u=e.label;u&&n?(t.fontStyle=o,t.fontWeight=i,t.fontSize=a,t.fontFamily=s,t.textAlign=u.textAlign,t.textBaseline=u.textBaseline,t.text=u.text,t.x=r.x,t.y=r.y-10,t.fill=l,t.visible=!0):t.visible=!1})),[2]}))}))},e.prototype.getNodeClickEvent=function(t,e){var r;return new Em(null!==(r=this.xKey)&&void 0!==r?r:"",e.yKey,t,e,this)},e.prototype.getNodeDoubleClickEvent=function(t,e){var r;return new Tm(null!==(r=this.xKey)&&void 0!==r?r:"",e.yKey,t,e,this)},e.prototype.getTooltipHtml=function(t){var e,r,n,o=this,i=o.xKey,a=o.id,s=o.axes,l=o.xName,u=o.yName,c=o.fill,p=o.stroke,d=o.tooltip,h=o.marker,f=o.dataModel,v=t.yKey,y=t.xValue,g=t.yValue,m=t.datum,b=s[Xu.X],C=s[Xu.Y];if(!(i&&v&&b&&C&&Jl(g)&&f))return"";var S=f.resolveProcessedDataIndexById(this,"yValue-raw").index,w=h.size,x=h.formatter,O=h.strokeWidth,E=h.fill,T=h.stroke,P=b.formatDatum(y),D=C.formatDatum(g),A=null===(r=null===(e=this.processedData)||void 0===e?void 0:e.data[t.index])||void 0===r?void 0:r.values[0][S],M=Fm(u),_=Fm(P+": "+D),R=null!=O?O:this.strokeWidth,k=null!=E?E:c,F=void 0;x&&(F=x({datum:m,xKey:i,yKey:v,fill:k,stroke:null!=T?T:p,strokeWidth:R,size:w,highlighted:!1,seriesId:a}));var I=null!==(n=null==F?void 0:F.fill)&&void 0!==n?n:k,L={title:M,backgroundColor:I,content:_},N=d.renderer,G=d.format;if(G||N){var j={datum:m,xKey:i,xName:l,xValue:y,yKey:v,yValue:g,processedYValue:A,yName:u,color:I,title:M,seriesId:a};if(G)return fc({content:Rm(G,j)},L);if(N)return fc(N(j),L)}return fc(L)},e.prototype.getLegendData=function(){var t,e,r,n,o=this,i=o.data,a=o.id,s=o.xKey,l=o.yKey,u=o.yName,c=o.marker,p=o.fill,d=o.stroke,h=o.fillOpacity,f=o.strokeOpacity,v=o.visible;return(null==i?void 0:i.length)&&s&&l?[{legendType:"category",id:a,itemId:l,seriesId:a,enabled:v,label:{text:null!=u?u:l},marker:{shape:c.shape,fill:null!==(t=c.fill)&&void 0!==t?t:p,stroke:null!==(e=c.stroke)&&void 0!==e?e:d,fillOpacity:null!==(r=c.fillOpacity)&&void 0!==r?r:h,strokeOpacity:null!==(n=c.strokeOpacity)&&void 0!==n?n:f}}]:[]},e.prototype.animateEmptyUpdateReady=function(t){var e=this,r=t.markerSelections,n=t.labelSelections,o=t.contextData,i=t.paths,a=t.seriesRect,s=this,l=s.stroke,u=s.fill,c=s.fillOpacity,p=s.lineDash,d=s.lineDashOffset,h=s.strokeOpacity,f=s.strokeWidth,v=s.shadow;o.forEach((function(t,o){var s,y,g,m,b,C=t.fillSelectionData,S=t.strokeSelectionData,w=t.itemId,x=Bm(i[o],2),O=x[0],E=x[1],T=null!==(y=null===(s=e.ctx.animationManager)||void 0===s?void 0:s.defaultOptions.duration)&&void 0!==y?y:1e3,P={from:0,to:null!==(g=null==a?void 0:a.width)&&void 0!==g?g:0,duration:T},D=S.points,A=S.yValues;E.tag=Im.Stroke,E.fill=void 0,E.lineJoin=E.lineCap="round",E.pointerEvents=Ws.None,E.stroke=l,E.strokeWidth=e.getStrokeWidth(e.strokeWidth,{itemId:w}),E.strokeOpacity=h,E.lineDash=p,E.lineDashOffset=d,null===(m=e.ctx.animationManager)||void 0===m||m.animate(e.id+"_empty-update-ready_stroke_"+o,Nm(Nm({},P),{onUpdate:function(t){E.path.clear({trackChanges:!0});var e=!0;D.forEach((function(r,n){if(void 0===A[n]||isNaN(r.x)||isNaN(r.y))e=!0;else if(r.x<=t)e?(E.path.moveTo(r.x,r.y),e=!1):E.path.lineTo(r.x,r.y);else if(n>0&&void 0!==A[n]&&void 0!==A[n-1]&&D[n-1].x<=t){var o=D[n-1],i=r,a=t,s=o.y+(a-o.x)*(i.y-o.y)/(i.x-o.x);E.path.lineTo(a,s)}})),E.checkPathDirty()}}));var M=C.points,_=M.slice(0,M.length/2),R=M.slice(M.length/2);O.tag=Im.Fill,O.stroke=void 0,O.lineJoin="round",O.pointerEvents=Ws.None,O.fill=u,O.fillOpacity=c,O.strokeOpacity=h,O.strokeWidth=f,O.lineDash=p,O.lineDashOffset=d,O.fillShadow=v,null===(b=e.ctx.animationManager)||void 0===b||b.animate(e.id+"_empty-update-ready_fill_"+o,Nm(Nm({},P),{onUpdate:function(t){O.path.clear({trackChanges:!0});var e=0,r=0;_.forEach((function(n,o){if(n.x<=t)e=n.x,r=n.y,O.path.lineTo(n.x,n.y);else if(o>0&&_[o-1].x<t){var i=_[o-1],a=n;e=t,r=i.y+(e-i.x)*(a.y-i.y)/(a.x-i.x),O.path.lineTo(e,r)}})),R.forEach((function(r,n){var o=R.length-n-1;if(r.x<=t)O.path.lineTo(r.x,r.y);else if(o>0&&_[o-1].x<t){var i=r,a=R[n+1],s=i.y+(e-i.x)*(a.y-i.y)/(a.x-i.x);O.path.lineTo(e,s)}})),R.length>0&&O.path.lineTo(R[R.length-1].x,R[R.length-1].y),O.path.closePath(),O.checkPathDirty()}})),r[o].each((function(t,r){var n,o,i,s,l=(null==a?void 0:a.width)?r.point.x/a.width*T:0,u=e.animateFormatter(r),c=null!==(o=null===(n=r.point)||void 0===n?void 0:n.size)&&void 0!==o?o:0;null===(i=e.ctx.animationManager)||void 0===i||i.animate(e.id+"_empty-update-ready_"+t.id,Nm(Nm({},P),{to:null!==(s=null==u?void 0:u.size)&&void 0!==s?s:c,delay:l,duration:200,onUpdate:function(e){t.size=e}}))})),n[o].each((function(t,r){var n,o=(null==a?void 0:a.width)?r.point.x/a.width*T:0;null===(n=e.ctx.animationManager)||void 0===n||n.animate(e.id+"_empty-update-ready_"+t.id,{from:0,to:1,delay:o,duration:200,onUpdate:function(e){t.opacity=e}})}))}))},e.prototype.animateReadyUpdate=function(t){var e=this,r=t.contextData,n=t.paths,o=this,i=o.stroke,a=o.fill,s=o.fillOpacity,l=o.lineDash,u=o.lineDashOffset,c=o.strokeOpacity,p=o.strokeWidth,d=o.shadow;r.forEach((function(t,r){var o=t.strokeSelectionData,h=t.fillSelectionData,f=t.itemId,v=Bm(n[r],2),y=v[0],g=v[1];g.stroke=i,g.strokeWidth=e.getStrokeWidth(e.strokeWidth,{itemId:f}),g.strokeOpacity=c,g.lineDash=l,g.lineDashOffset=u,g.path.clear({trackChanges:!0});var m=!0;o.points.forEach((function(t,e){void 0===o.yValues[e]||isNaN(t.x)||isNaN(t.y)?m=!0:m?(g.path.moveTo(t.x,t.y),m=!1):g.path.lineTo(t.x,t.y)})),g.checkPathDirty(),y.fill=a,y.fillOpacity=s,y.strokeOpacity=c,y.strokeWidth=p,y.lineDash=l,y.lineDashOffset=u,y.fillShadow=d,y.path.clear({trackChanges:!0}),h.points.forEach((function(t){y.path.lineTo(t.x,t.y)})),y.path.closePath(),y.checkPathDirty()}))},e.prototype.animateFormatter=function(t){var e,r,n,o=this,i=o.marker,a=o.fill,s=o.stroke,l=o.xKey,u=void 0===l?"":l,c=o.id,p=o.ctx.callbackCache,d=i.size,h=i.formatter,f=null!==(e=i.fill)&&void 0!==e?e:a,v=null!==(r=i.stroke)&&void 0!==r?r:s,y=null!==(n=i.strokeWidth)&&void 0!==n?n:this.strokeWidth,g=void 0;return h&&(g=p.call(h,{datum:t.datum,xKey:u,yKey:t.yKey,fill:f,stroke:v,strokeWidth:y,size:d,highlighted:!1,seriesId:c})),g},e.prototype.isLabelEnabled=function(){return this.label.enabled},e.className="AreaSeries",e.type="area",Gm([nu(xu)],e.prototype,"fill",void 0),Gm([nu(xu)],e.prototype,"stroke",void 0),Gm([nu(Pu(0,1))],e.prototype,"fillOpacity",void 0),Gm([nu(Pu(0,1))],e.prototype,"strokeOpacity",void 0),Gm([nu(Bu)],e.prototype,"lineDash",void 0),Gm([nu(Pu(0))],e.prototype,"lineDashOffset",void 0),Gm([nu(gu)],e.prototype,"xKey",void 0),Gm([nu(gu)],e.prototype,"xName",void 0),Gm([nu(gu)],e.prototype,"yKey",void 0),Gm([nu(gu)],e.prototype,"yName",void 0),Gm([nu(Du(0))],e.prototype,"normalizedTo",void 0),Gm([nu(Pu(0))],e.prototype,"strokeWidth",void 0),e}(Dm),Km=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Xm=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},Ym=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.borderPath=new Hd,e.x=0,e.y=0,e.width=10,e.height=10,e.radius=0,e.crisp=!1,e.lastUpdatePathStrokeWidth=kl.defaultStyles.strokeWidth,e.effectiveStrokeWidth=kl.defaultStyles.strokeWidth,e.microPixelEffectOpacity=1,e}return Km(e,t),e.prototype.isDirtyPath=function(){var t;return this.lastUpdatePathStrokeWidth!==this.strokeWidth||!!(this.path.isDirty()||this.borderPath.isDirty()||(null===(t=this.clipPath)||void 0===t?void 0:t.isDirty()))},e.prototype.updatePath=function(){var t,e,r,n=this.path,o=this.borderPath,i=this.crisp,a=this,s=a.x,l=a.y,u=a.width,c=a.height,p=a.strokeWidth,d=1/(null!==(e=null===(t=this.layerManager)||void 0===t?void 0:t.canvas.pixelRatio)&&void 0!==e?e:1),h=1;if(n.clear({trackChanges:!0}),o.clear({trackChanges:!0}),i&&(u<=d&&(h*=u/d),c<=d&&(h*=c/d),u=this.align(s,u),c=this.align(l,c),s=this.align(s),l=this.align(l)),p)if(u<d){var f=s+d/2;o.moveTo(f,l),o.lineTo(f,l+c),p=d,this.borderClipPath=void 0}else if(c<d){var v=l+d/2;o.moveTo(s,v),o.lineTo(s+u,v),p=d,this.borderClipPath=void 0}else if(p<u&&p<c){var y=p/2;s+=y,l+=y,u-=p,c-=p,this.borderClipPath=void 0,n.rect(s,l,u,c),o.rect(s,l,u,c)}else this.borderClipPath=null!==(r=this.borderClipPath)&&void 0!==r?r:new Hd,this.borderClipPath.clear({trackChanges:!0}),this.borderClipPath.rect(s,l,u,c),o.rect(s,l,u,c);else this.borderClipPath=void 0,n.rect(s,l,u,c);this.effectiveStrokeWidth=p,this.lastUpdatePathStrokeWidth=p,this.microPixelEffectOpacity=h},e.prototype.computeBBox=function(){var t=this.x,e=this.y,r=this.width,n=this.height;return new Ns(t,e,r,n)},e.prototype.isPointInPath=function(t,e){var r=this.transformPoint(t,e);return this.computeBBox().containsPoint(r.x,r.y)},e.prototype.applyFillAlpha=function(t){var e=this.fillOpacity,r=this.microPixelEffectOpacity,n=this.opacity,o=t.globalAlpha;t.globalAlpha=o*n*e*r},e.prototype.renderStroke=function(t){var e=this,r=e.stroke,n=e.effectiveStrokeWidth,o=e.borderPath,i=e.borderClipPath,a=e.opacity,s=e.microPixelEffectOpacity;if(!!r&&!!n){var l=this,u=l.strokeOpacity,c=l.lineDash,p=l.lineDashOffset,d=l.lineCap,h=l.lineJoin;i&&(i.draw(t),t.clip()),o.draw(t);var f=t.globalAlpha;t.strokeStyle=r,t.globalAlpha=f*a*u*s,t.lineWidth=n,c&&t.setLineDash(c),p&&(t.lineDashOffset=p),d&&(t.lineCap=d),h&&(t.lineJoin=h),t.stroke(),t.globalAlpha=f}},e.className="Rect",Xm([Kd()],e.prototype,"x",void 0),Xm([Kd()],e.prototype,"y",void 0),Xm([Kd()],e.prototype,"width",void 0),Xm([Kd()],e.prototype,"height",void 0),Xm([Kd()],e.prototype,"radius",void 0),Xm([Kd()],e.prototype,"crisp",void 0),e}(Xd),qm=function(){return(qm=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},Zm=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(t,n[o])&&(r[n[o]]=t[n[o]])}return r},Jm=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a};var $m,Qm=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),tb=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},eb=function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{l(n.next(t))}catch(t){i(t)}}function s(t){try{l(n.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}l((n=n.apply(t,e||[])).next())}))},rb=function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},nb=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},ob=function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t},ib=["inside","outside"],ab=function(t,e){return iu(t,e,(function(t){return ib.includes(t)}))};!function(t){t[t.Bar=0]="Bar",t[t.Label=1]="Label"}($m||($m={}));var sb,lb=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.formatter=void 0,e.placement="inside",e}return Qm(e,t),tb([nu(hu)],e.prototype,"formatter",void 0),tb([nu(ab)],e.prototype,"placement",void 0),e}(dv),ub=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.renderer=void 0,e}return Qm(e,t),tb([nu(hu)],e.prototype,"renderer",void 0),e}(sp),cb=function(t){function e(e){var r=t.call(this,{moduleCtx:e,pickModes:[Bc.EXACT_SHAPE_MATCH],pathsPerSeries:0,hasHighlightedLabels:!0})||this;return r.label=new lb,r.tooltip=new ub,r.fill="#c16068",r.stroke="#874349",r.fillOpacity=1,r.strokeOpacity=1,r.lineDash=[0],r.lineDashOffset=0,r.formatter=void 0,r.xKey=void 0,r.xName=void 0,r.yKey=void 0,r.yName=void 0,r.groupScale=new cf,r.stackGroup=void 0,r.strokeWidth=1,r.shadow=void 0,r.smallestDataInterval=void 0,r.datumSelectionGarbageCollection=!1,r.label.enabled=!1,r}return Qm(e,t),e.prototype.resolveKeyDirection=function(t){return this.getBarDirection()===Xu.X?t===Xu.X?Xu.Y:Xu.X:t},e.prototype.processData=function(t){var e,r,n,o,i;return eb(this,void 0,void 0,(function(){var a,s,l,u,c,p,d,h,f,v,y,g,m,b,C,S,w,x,O;return rb(this,(function(E){switch(E.label){case 0:return s=(a=this).xKey,l=a.yKey,u=a.normalizedTo,c=a.seriesGrouping,p=(void 0===c?{}:c).groupIndex,d=void 0===p?this.id:p,h=a.data,f=void 0===h?[]:h,v=Math.abs(null!=u?u:NaN),y=(null===(e=this.getCategoryAxis())||void 0===e?void 0:e.scale)instanceof mf,g=(null===(r=this.getValueAxis())||void 0===r?void 0:r.scale)instanceof mf,b=(m="bar-stack-"+d+"-yValues")+"-trailing",C=v&&isFinite(v)?v:void 0,S=[],C&&S.push(_c(this,[m,b],C,"range")),!(null===(n=this.ctx.animationManager)||void 0===n?void 0:n.skipAnimations)&&this.processedData&&S.push(Nc(this.processedData)),[4,t.request(this.id,f,{props:ob(ob(ob(ob([Jc(this,s,y,{id:"xValue"}),$c(this,l,g,{id:"yValue-raw",invalidValue:null})],nb(Qc(this,l,g,"normal","current",{id:"yValue-end",invalidValue:null,groupId:m}))),nb(Qc(this,l,g,"trailing","current",{id:"yValue-start",invalidValue:null,groupId:b}))),nb(y?[Dc]:[])),nb(S)),groupByKeys:!0,dataVisible:this.visible})];case 1:return w=E.sent(),x=w.dataModel,O=w.processedData,this.dataModel=x,this.processedData=O,this.smallestDataInterval={x:null!==(i=null===(o=O.reduced)||void 0===o?void 0:o[Dc.property])&&void 0!==i?i:1/0,y:1/0},this.animationState.transition("updateData"),[2]}}))}))},e.prototype.getDomain=function(t){var e,r=this.processedData,n=this.dataModel;if(!r||!n)return[];var o=r.reduced,i=(void 0===o?{}:o)[Dc.property],a=this.getCategoryAxis(),s=this.getValueAxis(),l=n.resolveProcessedDataDefById(this,"xValue"),u=n.getDomain(this,"xValue","key",r),c=n.getDomain(this,"yValue-end","value",r);if(t===this.getCategoryDirection()){if("key"===(null==l?void 0:l.def.type)&&"category"===(null==l?void 0:l.def.valueType))return u;var p=isFinite(i)?i:0,d=null!==(e=cv(u))&&void 0!==e?e:[NaN,NaN];return t===Xu.Y?this.fixNumericExtent([d[0]+-p,d[1]],a):this.fixNumericExtent([d[0],d[1]+p],a)}if(this.getValueAxis()instanceof Jg)return this.fixNumericExtent(c,s);var h=[c[0]>0?0:c[0],c[1]<0?0:c[1]];return this.fixNumericExtent(h,s)},e.prototype.getNodeClickEvent=function(t,e){var r;return new Em(null!==(r=this.xKey)&&void 0!==r?r:"",e.yKey,t,e,this)},e.prototype.getNodeDoubleClickEvent=function(t,e){var r;return new Tm(null!==(r=this.xKey)&&void 0!==r?r:"",e.yKey,t,e,this)},e.prototype.getCategoryAxis=function(){var t=this.getCategoryDirection();return this.axes[t]},e.prototype.getValueAxis=function(){var t=this.getBarDirection();return this.axes[t]},e.prototype.calculateStep=function(t){var e,r=this.smallestDataInterval,n=this.getCategoryAxis();if(n){var o=(n.dataDomain[1]-n.dataDomain[0])/(null!==(e=null==r?void 0:r.x)&&void 0!==e?e:1)+1,i=Math.floor(t),a=Math.min(o,i);return t/Math.max(1,a)}},e.prototype.createNodeData=function(){return eb(this,void 0,void 0,(function(){var t,e,r,n,o,i,a,s,l,u,c,p,d,h,f,v,y,g,m,b,C,S,w,x,O,E,T,P,D,A,M,_,R,k,F,I=this;return rb(this,(function(L){if(e=(t=this).visible,r=t.dataModel,n=this.getCategoryAxis(),o=this.getValueAxis(),!(r&&e&&n&&o))return[2,[]];for(i=n.scale,a=o.scale,l=(s=this).groupScale,u=s.yKey,c=void 0===u?"":u,p=s.xKey,d=void 0===p?"":p,h=s.fill,f=s.stroke,v=s.strokeWidth,y=s.label,g=s.id,m=s.processedData,b=s.ctx,C=s.ctx.seriesStateManager,S=i.bandwidth,i instanceof mf&&(w=Math.max(n.range[0],n.range[1]),x=this.calculateStep(w),S=x),O=[],E=C.getVisiblePeerGroupIndex(this),T=E.index,P=E.visibleGroupCount,D=0;D<P;D++)O.push(String(D));return l.domain=O,l.range=[0,null!=S?S:0],l.padding=n instanceof ig?n.groupPaddingInner:n instanceof bg?.1:0,0===l.padding?l.round=!1:l.round=!0,A=l.bandwidth>=1?l.bandwidth:l.rawBandwidth,M=r.resolveProcessedDataIndexById(this,"xValue","key").index,_=r.resolveProcessedDataIndexById(this,"yValue-raw").index,R=r.resolveProcessedDataIndexById(this,"yValue-start").index,k=r.resolveProcessedDataIndexById(this,"yValue-end").index,F={itemId:c,nodeData:[],labelData:[]},null==m||m.data.forEach((function(t,e){var r=t.keys,o=t.datum,s=t.values,u=r[M],p=i.convert(u),m=+s[0][k],C=+s[0][R],S=s[0][_],w=p+l.convert(String(T));if(n.inRange(w,A)&&!isNaN(m)){var x=a.convert(m,{strict:!1}),O=a.convert(C,{strict:!1}),E=I.getBarDirection()===Xu.X,P={x:E?Math.min(x,O):w,y:E?w:Math.min(x,O),width:E?Math.abs(O-x):A,height:E?A:Math.abs(O-x)},D={x:P.x+P.width/2,y:P.y+P.height/2},L=y.fontStyle,N=y.fontWeight,G=y.fontSize,j=y.fontFamily,V=y.color,B=function(t){var e,r=t.value,n=t.rect,o=t.placement,i=t.seriesId,a=t.padding,s=void 0===a?0:a,l=t.formatter,u=t.barAlongX,c=t.ctx.callbackCache;l&&(e=c.call(l,{value:Jl(r)?r:void 0,seriesId:i})),void 0===e&&(e=Jl(r)?r.toFixed(2):"");var p=n.x+n.width/2,d=n.y+n.height/2,h="center",f="middle",v=r>=0;switch(o){case"start":u?(p=v?n.x-s:n.x+n.width+s,h=v?"start":"end"):(d=v?n.y+n.height+s:n.y-s,f=v?"top":"bottom");break;case"outside":case"end":u?(p=v?n.x+n.width+s:n.x-s,h=v?"start":"end"):(d=v?n.y-s:n.y+n.height+s,f=v?"bottom":"top");break;case"inside":default:f="middle"}return{text:e,textAlign:h,textBaseline:f,x:p,y:d}}({value:S,rect:P,formatter:y.formatter,placement:y.placement,seriesId:g,barAlongX:E,ctx:b}),U=B.text,H=B.textAlign,z=B.textBaseline,W=B.x,K=B.y,X={index:e,series:I,itemId:c,datum:o[0],cumulativeValue:C+m,xValue:u,yValue:S,yKey:c,xKey:d,x:P.x,y:P.y,width:P.width,height:P.height,nodeMidPoint:D,fill:h,stroke:f,strokeWidth:v,label:U?{text:U,fontStyle:L,fontWeight:N,fontSize:G,fontFamily:j,textAlign:H,textBaseline:z,fill:V,x:W,y:K}:void 0};F.nodeData.push(X),F.labelData.push(X)}})),[2,[F]]}))}))},e.prototype.nodeFactory=function(){return new Ym},e.prototype.updateDatumSelection=function(t){return eb(this,void 0,void 0,(function(){var e,r,n;return rb(this,(function(o){return e=t.nodeData,r=t.datumSelection,n=function(t){return t.xValue},[2,r.update(e,(function(t){return t.tag=$m.Bar}),n)]}))}))},e.prototype.updateDatumNodes=function(t){return eb(this,void 0,void 0,(function(){var e,r,n,o,i,a,s,l,u,c,p,d,h,f,v,y,g,m,b=this;return rb(this,(function(C){return e=t.datumSelection,r=t.isHighlight,o=(n=this).fill,i=n.stroke,a=n.fillOpacity,s=n.strokeOpacity,l=n.lineDash,u=n.lineDashOffset,c=n.shadow,p=n.formatter,d=n.id,h=n.highlightStyle.item,f=n.ctx,v=n.stackGroup,y=this.axes[Xu.X],g=function(t){void 0===t&&(t=[]);var e=Jm(t,2),r=e[0],n=e[1];return!(0!==r||1!==n)}(null==y?void 0:y.visibleRange),m=this.getCategoryDirection()===Xu.X,e.each((function(t,e){var n={fill:o,stroke:i,fillOpacity:a,strokeOpacity:s,lineDash:l,lineDashOffset:u,fillShadow:c,strokeWidth:b.getStrokeWidth(b.strokeWidth,e)},y=m?e.width>0:e.height>0,C=function(t){var e,r,n,o,i,a,s,l=t.datum,u=t.isHighlighted,c=t.style,p=t.highlightStyle,d=t.formatter,h=t.seriesId,f=t.stackGroup,v=t.ctx.callbackCache,y=Zm(t,["datum","isHighlighted","style","highlightStyle","formatter","seriesId","stackGroup","ctx"]),g=u&&null!==(e=p.fill)&&void 0!==e?e:c.fill,m=u&&null!==(r=p.stroke)&&void 0!==r?r:c.stroke,b=u&&null!==(n=p.strokeWidth)&&void 0!==n?n:c.strokeWidth,C=u&&null!==(o=p.fillOpacity)&&void 0!==o?o:c.fillOpacity,S=c.strokeOpacity,w=c.fillShadow,x=c.lineDash,O=c.lineDashOffset,E=void 0;return d&&(E=v.call(d,qm({datum:l.datum,xKey:l.xKey,yKey:l.yKey,fill:g,stroke:m,strokeWidth:b,highlighted:u,seriesId:h,stackGroup:f},y))),{fill:null!==(i=null==E?void 0:E.fill)&&void 0!==i?i:g,stroke:null!==(a=null==E?void 0:E.stroke)&&void 0!==a?a:m,strokeWidth:null!==(s=null==E?void 0:E.strokeWidth)&&void 0!==s?s:b,fillOpacity:C,strokeOpacity:S,lineDash:x,lineDashOffset:O,fillShadow:w}}({datum:e,isHighlighted:r,style:n,highlightStyle:h,formatter:p,seriesId:d,stackGroup:v,ctx:f});C.crisp=g,C.visible=y,function(t){var e=t.rect,r=t.config,n=r.crisp,o=void 0===n||n,i=r.fill,a=r.stroke,s=r.strokeWidth,l=r.fillOpacity,u=r.strokeOpacity,c=r.lineDash,p=r.lineDashOffset,d=r.fillShadow,h=r.visible,f=void 0===h||h;e.crisp=o,e.fill=i,e.stroke=a,e.strokeWidth=s,e.fillOpacity=l,e.strokeOpacity=u,e.lineDash=c,e.lineDashOffset=p,e.fillShadow=d,e.visible=f}({rect:t,config:C})})),[2]}))}))},e.prototype.updateLabelSelection=function(t){return eb(this,void 0,void 0,(function(){var e,r,n,o;return rb(this,(function(i){return e=t.labelData,r=t.labelSelection,n=this.label.enabled,o=n?e:[],[2,r.update(o,(function(t){t.tag=$m.Label,t.pointerEvents=Ws.None}))]}))}))},e.prototype.updateLabelNodes=function(t){return eb(this,void 0,void 0,(function(){var e=this;return rb(this,(function(r){return t.labelSelection.each((function(t,r){!function(t){var e=t.labelNode,r=t.labelDatum,n=t.config,o=t.visible;if(r&&n&&n.enabled){var i=r.x,a=r.y,s=r.text,l=r.textAlign,u=r.textBaseline,c=n.fontStyle,p=n.fontWeight,d=n.fontSize,h=n.fontFamily,f=n.color;e.fontStyle=c,e.fontWeight=p,e.fontSize=d,e.fontFamily=h,e.textAlign=l,e.textBaseline=u,e.text=s,e.x=i,e.y=a,e.fill=f,e.visible=o}else e.visible=!1}({labelNode:t,labelDatum:r.label,config:e.label,visible:!0})})),[2]}))}))},e.prototype.getTooltipHtml=function(t){var e,r=this.xKey,n=this.yKey,o=this.processedData,i=this.ctx.callbackCache,a=this.getCategoryAxis(),s=this.getValueAxis(),l=t.xValue,u=t.yValue,c=t.datum;if(!(o&&r&&n&&a&&s))return"";var p=this,d=p.xName,h=p.yName,f=p.fill,v=p.stroke,y=p.tooltip,g=p.formatter,m=p.id,b=p.stackGroup,C=y.renderer,S=this.getStrokeWidth(this.strokeWidth),w=Fm(a.formatDatum(l)),x=Fm(s.formatDatum(u)),O=Fm(h),E=w+": "+x,T=void 0;g&&(T=i.call(g,{datum:c,fill:f,stroke:v,strokeWidth:S,highlighted:!1,xKey:r,yKey:n,seriesId:m,stackGroup:b}));var P=null!==(e=null==T?void 0:T.fill)&&void 0!==e?e:f,D={title:O,backgroundColor:P,content:E};return C?fc(C({datum:c,xKey:r,xValue:l,xName:d,yKey:n,yValue:u,yName:h,color:P,title:O,seriesId:m,stackGroup:b}),D):fc(D)},e.prototype.getLegendData=function(){var t,e=this,r=e.id,n=e.data,o=e.xKey,i=e.yKey,a=e.yName,s=e.legendItemName,l=e.fill,u=e.stroke,c=e.fillOpacity,p=e.strokeOpacity,d=e.visible;if(!(e.showInLegend&&(null==n?void 0:n.length)&&o&&i))return[];var h=[];return h.push({legendType:"category",id:r,itemId:i,seriesId:r,enabled:d,label:{text:null!==(t=null!=s?s:a)&&void 0!==t?t:i},legendItemName:s,marker:{fill:l,stroke:u,fillOpacity:c,strokeOpacity:p}}),h},e.prototype.animateEmptyUpdateReady=function(t){var e,r,n=this,o=t.datumSelections,i=t.labelSelections,a=null!==(r=null===(e=this.ctx.animationManager)||void 0===e?void 0:e.defaultOptions.duration)&&void 0!==r?r:1e3,s=this.getDirectionStartingValues(o),l=s.startingX,u=s.startingY;o.forEach((function(t){t.each((function(t,e){var r,o=l,i=0,s=e.y,c=e.height;n.getBarDirection()===Xu.Y&&(o=e.x,i=e.width,s=u,c=0);var p=[{from:o,to:e.x},{from:i,to:e.width},{from:s,to:e.y},{from:c,to:e.height}];null===(r=n.ctx.animationManager)||void 0===r||r.animateMany(n.id+"_empty-update-ready_"+t.id,p,{duration:a,ease:Kp,onUpdate:function(e){var r=nb(e,4),n=r[0],o=r[1],i=r[2],a=r[3];t.x=n,t.width=o,t.y=i,t.height=a}})}))})),i.forEach((function(t){t.each((function(t){var e;null===(e=n.ctx.animationManager)||void 0===e||e.animate(n.id+"_empty-update-ready_"+t.id,{from:0,to:1,delay:a,duration:200,onUpdate:function(e){t.opacity=e}})}))}))},e.prototype.animateReadyHighlight=function(t){this.resetSelectionRects(t)},e.prototype.animateReadyResize=function(t){var e,r=this,n=t.datumSelections;null===(e=this.ctx.animationManager)||void 0===e||e.reset(),n.forEach((function(t){r.resetSelectionRects(t)}))},e.prototype.animateWaitingUpdateReady=function(t){var e,r,n,o,i,a=this,s=t.datumSelections,l=t.labelSelections,u=this.processedData,c=null===(e=null==u?void 0:u.reduced)||void 0===e?void 0:e.diff;if(null==c?void 0:c.changed){var p=null!==(n=null===(r=this.ctx.animationManager)||void 0===r?void 0:r.defaultOptions.duration)&&void 0!==n?n:1e3,d=p;(c.added.length>0||c.removed.length>0)&&(d=Math.floor(p/2));var h=this.getDirectionStartingValues(s),f=h.startingX,v=h.startingY,y=null===(i=null===(o=this.processedData)||void 0===o?void 0:o.defs.keys)||void 0===i?void 0:i[0],g={};c.added.forEach((function(t){g[t[0]]=!0}));var m={};c.removed.forEach((function(t){m[t[0]]=!0}));var b=this.id+"_"+Math.random(),C=this.id+"_"+Math.random();s.forEach((function(t){t.each((function(e,r){var n,o=[{from:e.x,to:r.x},{from:e.width,to:r.width},{from:e.y,to:r.y},{from:e.height,to:r.height}],i=c.removed.length>0?d:0,s=d,l=!1,u=y?r.xValue:"",p=f,h=0,C=r.y,S=r.height;a.getBarDirection()===Xu.Y&&(p=r.x,h=r.width,C=v,S=0);var w=void 0!==u&&void 0!==g[u],x=void 0!==u&&void 0!==m[u];w?(o=[{from:p,to:r.x},{from:h,to:r.width},{from:C,to:r.y},{from:S,to:r.height}],s=d):x&&(o=[{from:r.x,to:p},{from:r.width,to:h},{from:r.y,to:C},{from:r.height,to:S}],i=0,s=d,l=!0),null===(n=a.ctx.animationManager)||void 0===n||n.animateManyWithThrottle(a.id+"_waiting-update-ready_"+e.id,o,{delay:i,duration:s,ease:Kp,throttleId:a.id+"_rects",throttleGroup:b,onUpdate:function(t){var r=nb(t,4),n=r[0],o=r[1],i=r[2],a=r[3];e.x=n,e.width=o,e.y=i,e.height=a},onComplete:function(){l&&t.cleanup()}})}))})),l.forEach((function(t){t.each((function(t){var e;t.opacity=0,null===(e=a.ctx.animationManager)||void 0===e||e.animateWithThrottle(a.id+"_waiting-update-ready_"+t.id,{from:0,to:1,delay:p,duration:200,throttleId:a.id+"_labels",throttleGroup:C,onUpdate:function(e){t.opacity=e}})}))}))}else s.forEach((function(t){a.resetSelectionRects(t)}))},e.prototype.resetSelectionRects=function(t){t.each((function(t,e){t.x=e.x,t.y=e.y,t.width=e.width,t.height=e.height})),t.cleanup()},e.prototype.getDirectionStartingValues=function(t){var e=this.getBarDirection()===Xu.Y,r=this.axes[Xu.X],n=this.axes[Xu.Y],o=(null==r?void 0:r.scale)instanceof mf,i=(null==n?void 0:n.scale)instanceof mf,a=1/0,s=0;return n&&e&&(i?s=n.scale.convert(0):t.forEach((function(t){return t.each((function(t,e){e.yValue>=0&&(s=Math.max(s,e.height+e.y))}))}))),r&&!e&&(o?a=r.scale.convert(0):t.forEach((function(t){return t.each((function(t,e){e.yValue>=0&&(a=Math.min(a,e.x))}))}))),{startingX:a,startingY:s}},e.prototype.isLabelEnabled=function(){return this.label.enabled},e.prototype.getBandScalePadding=function(){return{inner:.2,outer:.3}},e.prototype.getBarDirection=function(){return Xu.X},e.prototype.getCategoryDirection=function(){return Xu.Y},e.className="BarSeries",e.type="bar",tb([nu(Ou)],e.prototype,"fill",void 0),tb([nu(Ou)],e.prototype,"stroke",void 0),tb([nu(Pu(0,1))],e.prototype,"fillOpacity",void 0),tb([nu(Pu(0,1))],e.prototype,"strokeOpacity",void 0),tb([nu(Bu)],e.prototype,"lineDash",void 0),tb([nu(Pu(0))],e.prototype,"lineDashOffset",void 0),tb([nu(hu)],e.prototype,"formatter",void 0),tb([nu(gu)],e.prototype,"xKey",void 0),tb([nu(gu)],e.prototype,"xName",void 0),tb([nu(gu)],e.prototype,"yKey",void 0),tb([nu(gu)],e.prototype,"yName",void 0),tb([nu(gu)],e.prototype,"stackGroup",void 0),tb([nu(Du())],e.prototype,"normalizedTo",void 0),tb([nu(Pu(0))],e.prototype,"strokeWidth",void 0),e}(Dm),pb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Qm(e,t),e.prototype.getBarDirection=function(){return Xu.Y},e.prototype.getCategoryDirection=function(){return Xu.X},e.type="column",e.className="ColumnSeries",e}(cb),db=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),hb=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},fb=function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{l(n.next(t))}catch(t){i(t)}}function s(t){try{l(n.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}l((n=n.apply(t,e||[])).next())}))},vb=function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},yb=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},gb=function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t},mb=["count","sum","mean"],bb=ou((function(t){return mb.includes(t)}),"expecting a histogram aggregation keyword such as 'count', 'sum' or 'mean");!function(t){t[t.Bin=0]="Bin",t[t.Label=1]="Label"}(sb||(sb={}));var Cb,Sb=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.formatter=void 0,e}return db(e,t),hb([nu(hu)],e.prototype,"formatter",void 0),e}(dv),wb=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.renderer=void 0,e}return db(e,t),hb([nu(hu)],e.prototype,"renderer",void 0),e}(sp),xb=function(t){function e(e){var r=t.call(this,{moduleCtx:e,pickModes:[Bc.EXACT_SHAPE_MATCH]})||this;return r.label=new Sb,r.tooltip=new wb,r.fill=void 0,r.stroke=void 0,r.fillOpacity=1,r.strokeOpacity=1,r.lineDash=[0],r.lineDashOffset=0,r.xKey=void 0,r.areaPlot=!1,r.bins=void 0,r.aggregation="count",r.binCount=void 0,r.xName=void 0,r.yKey=void 0,r.yName=void 0,r.strokeWidth=1,r.shadow=void 0,r.calculatedBins=[],r.datumSelectionGarbageCollection=!1,r.label.enabled=!1,r}return db(e,t),e.prototype.deriveBins=function(t){if(void 0===this.binCount){var e=Cf(t[0],t[1],10),r=wf(t[0],t[1],10),n=e[0];return gb([[n-r,n]],yb(e.map((function(t){return[t,t+r]}))))}return this.calculateNiceBins(t,this.binCount)},e.prototype.calculateNiceBins=function(t,e){var r=Math.floor(t[0]),n=t[1],o=e||1,i=this.calculateNiceStart(r,n,o),a=i.start,s=i.binSize;return this.getBins(a,n,s,o)},e.prototype.getBins=function(t,e,r,n){for(var o=[],i=0;i<n;i++){var a=Math.round(10*(t+i*r))/10,s=Math.round(10*(t+(i+1)*r))/10;i===n-1&&(s=Math.max(s,e)),o[i]=[a,s]}return o},e.prototype.calculateNiceStart=function(t,e,r){var n=Math.abs(e-t)/r,o=Math.floor(Math.log10(n)),i=Math.pow(10,o);return{start:Math.floor(t/i)*i,binSize:n}},e.prototype.processData=function(t){var e;return fb(this,void 0,void 0,(function(){var r,n,o,i,a,s,l,u,c,p,d,h,f=this;return vb(this,(function(v){switch(v.label){case 0:return n=(r=this).xKey,o=r.yKey,i=r.data,a=r.areaPlot,s=r.aggregation,l=[Jc(this,n,!0),Ac],o?(u=Sc(this,"groupCount"),"count"===s||("sum"===s?u={id:"groupAgg",scopes:[this.id],type:"aggregate",matchGroupIds:y?[y]:void 0,aggregateFunction:function(t){return Cc(t)},groupAggregateFunction:function(t,e){var r,n;return void 0===e&&(e=[0,0]),e[0]+=null!==(r=null==t?void 0:t[0])&&void 0!==r?r:0,e[1]+=null!==(n=null==t?void 0:t[1])&&void 0!==n?n:0,e}}:"mean"===s&&(u=function(t,e,r){return{id:e,scopes:[t.id],matchGroupIds:r?[r]:void 0,type:"aggregate",aggregateFunction:function(t){return Cc(t)},groupAggregateFunction:function(t,e){var r,n;return void 0===e&&(e=[0,0,-1]),e[0]+=null!==(r=null==t?void 0:t[0])&&void 0!==r?r:0,e[1]+=null!==(n=null==t?void 0:t[1])&&void 0!==n?n:0,e[2]++,e},finalFunction:function(t){void 0===t&&(t=[0,0,0]);var e=t[0]+t[1];return e>=0?[0,e/t[2]]:[e/t[2],0]}}}(this,"groupAgg"))),a&&(u=wc(this,"groupAgg",u)),l.push($c(this,o,!0,{invalidValue:void 0}),u)):(u=Sc(this,"groupAgg"),a&&(u=wc(this,"groupAgg",u)),l.push(u)),c=function(t){var e,r=lc(t.domain.keys[0]);if(0===r.length)return t.domain.groups=[],function(){return[]};var n=null!==(e=f.bins)&&void 0!==e?e:f.deriveBins(r),o=n.length;return f.calculatedBins=gb([],yb(n)),function(t){for(var e=t.keys[0],r=0;r<o;r++){var i=n[r];if(e>=i[0]&&e<i[1])return i;if(r===o-1&&e<=i[1])return i}return[]}},!(null===(e=this.ctx.animationManager)||void 0===e?void 0:e.skipAnimations)&&this.processedData&&l.push(Nc(this.processedData,!1)),[4,t.request(this.id,null!=i?i:[],{props:l,dataVisible:this.visible,groupByFn:c})];case 1:return p=v.sent(),d=p.dataModel,h=p.processedData,this.dataModel=d,this.processedData=h,this.animationState.transition("updateData"),[2]}var y}))}))},e.prototype.getDomain=function(t){var e,r,n,o,i=this.processedData,a=this.dataModel;if(!i||!a)return[];var s=a.getDomain(this,"groupAgg","aggregate",i),l=null===(e=this.calculatedBins)||void 0===e?void 0:e[0][0],u=null===(r=this.calculatedBins)||void 0===r?void 0:r[(null!==(o=null===(n=this.calculatedBins)||void 0===n?void 0:n.length)&&void 0!==o?o:0)-1][1];return t===Xu.X?lc([l,u]):lc(s)},e.prototype.getNodeClickEvent=function(t,e){var r,n;return new Em(null!==(r=this.xKey)&&void 0!==r?r:"",null!==(n=this.yKey)&&void 0!==n?n:"",t,e,this)},e.prototype.getNodeDoubleClickEvent=function(t,e){var r,n;return new Tm(null!==(r=this.xKey)&&void 0!==r?r:"",null!==(n=this.yKey)&&void 0!==n?n:"",t,e,this)},e.prototype.createNodeData=function(){var t;return fb(this,void 0,void 0,(function(){var e,r,n,o,i,a,s,l,u,c,p,d,h,f,v,y,g,m,b,C,S,w,x,O,E,T,P,D=this;return vb(this,(function(A){return r=(e=this).axes,n=e.processedData,o=e.ctx.callbackCache,i=r[Xu.X],a=r[Xu.Y],this.visible&&i&&a&&n&&"grouped"===n.type?(s=i.scale,l=a.scale,c=(u=this).fill,p=u.stroke,d=u.strokeWidth,h=u.id,f=u.yKey,v=void 0===f?"":f,y=u.xKey,g=void 0===y?"":y,m=[],b=function(t){return String(t.value)},C=this.label,S=C.formatter,w=void 0===S?b:S,x=C.fontStyle,O=C.fontWeight,E=C.fontSize,T=C.fontFamily,P=C.color,n.data.forEach((function(t){var e,r=t.aggValues,n=yb(void 0===r?[[0,0]]:r,1),i=yb(n[0],2),a=i[0],u=i[1],f=t.datum,y=t.datum.length,b=t.keys,C=yb(t.keys,2),S=C[0],A=C[1],M=s.convert(S),_=s.convert(A),R=a+u,k=l.convert(0),F=l.convert(R),I=_-M,L=Math.abs(F-k),N=0!==R?{text:null!==(e=o.call(w,{value:R,seriesId:h}))&&void 0!==e?e:String(R),fontStyle:x,fontWeight:O,fontSize:E,fontFamily:T,fill:P,x:M+I/2,y:F+L/2}:void 0,G={x:M+I/2,y:F+L/2};m.push({series:D,datum:f,aggregatedValue:R,frequency:y,domain:b,yKey:v,xKey:g,x:M,y:F,xValue:M,yValue:F,width:I,height:L,nodeMidPoint:G,fill:c,stroke:p,strokeWidth:d,label:N})})),[2,[{itemId:null!==(t=this.yKey)&&void 0!==t?t:this.id,nodeData:m,labelData:m}]]):[2,[]]}))}))},e.prototype.nodeFactory=function(){return new Ym},e.prototype.updateDatumSelection=function(t){return fb(this,void 0,void 0,(function(){var e;return vb(this,(function(r){return e=t.nodeData,[2,t.datumSelection.update(e,(function(t){t.tag=sb.Bin,t.crisp=!0}),(function(t){return t.domain.join("_")}))]}))}))},e.prototype.updateDatumNodes=function(t){return fb(this,void 0,void 0,(function(){var e,r,n,o,i,a,s,l,u,c,p,d,h=this;return vb(this,(function(f){return e=t.datumSelection,r=t.isHighlight,o=(n=this).fillOpacity,i=n.strokeOpacity,a=n.shadow,s=n.highlightStyle.item,l=s.fill,u=s.fillOpacity,c=void 0===u?o:u,p=s.stroke,d=s.strokeWidth,e.each((function(t,e,n){var s,u,f=r&&void 0!==d?d:e.strokeWidth,v=r?c:o;t.fill=null!==(s=r?l:void 0)&&void 0!==s?s:e.fill,t.stroke=null!==(u=r?p:void 0)&&void 0!==u?u:e.stroke,t.fillOpacity=v,t.strokeOpacity=i,t.strokeWidth=f,t.lineDash=h.lineDash,t.lineDashOffset=h.lineDashOffset,t.fillShadow=a,t.zIndex=r?up.highlightedZIndex:n,t.visible=e.height>0})),[2]}))}))},e.prototype.updateLabelSelection=function(t){return fb(this,void 0,void 0,(function(){var e;return vb(this,(function(r){return e=t.labelData,[2,t.labelSelection.update(e,(function(t){t.tag=sb.Label,t.pointerEvents=Ws.None,t.textAlign="center",t.textBaseline="middle"}))]}))}))},e.prototype.updateLabelNodes=function(t){return fb(this,void 0,void 0,(function(){var e,r;return vb(this,(function(n){return e=t.labelSelection,r=this.label.enabled,e.each((function(t,e){var n=e.label;n&&r?(t.text=n.text,t.x=n.x,t.y=n.y,t.fontStyle=n.fontStyle,t.fontWeight=n.fontWeight,t.fontSize=n.fontSize,t.fontFamily=n.fontFamily,t.fill=n.fill,t.visible=!0):t.visible=!1})),[2]}))}))},e.prototype.getTooltipHtml=function(t){var e=this.xKey,r=this.yKey,n=void 0===r?"":r,o=this.axes,i=o[Xu.X],a=o[Xu.Y];if(!e||!i||!a)return"";var s=this,l=s.xName,u=s.yName,c=s.fill,p=s.tooltip,d=s.aggregation,h=s.id,f=p.renderer,v=t.aggregatedValue,y=t.frequency,g=t.domain,m=yb(t.domain,2),b=m[0],C=m[1],S=Fm(null!=l?l:e)+": "+i.formatDatum(b)+" - "+i.formatDatum(C),w=n?"<b>"+Fm(null!=u?u:n)+" ("+d+")</b>: "+a.formatDatum(v)+"<br>":"",x={title:S,backgroundColor:c,content:w+="<b>Frequency</b>: "+y};return f?fc(f({datum:{data:t.datum,aggregatedValue:t.aggregatedValue,domain:t.domain,frequency:t.frequency},xKey:e,xValue:g,xName:l,yKey:n,yValue:v,yName:u,color:c,title:S,seriesId:h}),x):fc(x)},e.prototype.getLegendData=function(){var t,e=this,r=e.id,n=e.data,o=e.xKey,i=e.yName,a=e.visible,s=e.fill,l=e.stroke,u=e.fillOpacity,c=e.strokeOpacity;return n&&0!==n.length?[{legendType:"category",id:r,itemId:o,seriesId:r,enabled:a,label:{text:null!==(t=null!=i?i:o)&&void 0!==t?t:"Frequency"},marker:{fill:null!=s?s:"rgba(0, 0, 0, 0)",stroke:null!=l?l:"rgba(0, 0, 0, 0)",fillOpacity:u,strokeOpacity:c}}]:[]},e.prototype.animateEmptyUpdateReady=function(t){var e,r,n=this,o=t.datumSelections,i=t.labelSelections,a=null!==(r=null===(e=this.ctx.animationManager)||void 0===e?void 0:e.defaultOptions.duration)&&void 0!==r?r:1e3,s=0;o.forEach((function(t){return t.each((function(t,e){s=Math.max(s,e.height+e.y)}))})),o.forEach((function(t){t.each((function(t,e){var r;null===(r=n.ctx.animationManager)||void 0===r||r.animateMany(n.id+"_empty-update-ready_"+t.id,[{from:s,to:e.y},{from:0,to:e.height}],{duration:a,ease:Kp,onUpdate:function(r){var n=yb(r,2),o=n[0],i=n[1];t.y=o,t.height=i,t.x=e.x,t.width=e.width}})}))})),i.forEach((function(t){t.each((function(t){var e;null===(e=n.ctx.animationManager)||void 0===e||e.animate(n.id+"_empty-update-ready_"+t.id,{from:0,to:1,delay:a,duration:200,onUpdate:function(e){t.opacity=e}})}))}))},e.prototype.animateReadyUpdate=function(t){var e=this;t.datumSelections.forEach((function(t){e.resetSelectionRects(t)}))},e.prototype.animateReadyHighlight=function(t){this.resetSelectionRects(t)},e.prototype.animateReadyResize=function(t){var e,r=this,n=t.datumSelections;null===(e=this.ctx.animationManager)||void 0===e||e.reset(),n.forEach((function(t){r.resetSelectionRects(t)}))},e.prototype.animateWaitingUpdateReady=function(t){var e,r,n,o=this,i=t.datumSelections,a=t.labelSelections,s=this.processedData,l=null===(e=null==s?void 0:s.reduced)||void 0===e?void 0:e.diff;if(null==l?void 0:l.changed){var u=null!==(n=null===(r=this.ctx.animationManager)||void 0===r?void 0:r.defaultOptions.duration)&&void 0!==n?n:1e3,c=u;l.added.length>0&&l.removed.length>0?c=Math.floor(u/3):(l.added.length>0||l.removed.length>0)&&(c=Math.floor(u/2));var p=0;i.forEach((function(t){return t.each((function(t,e){p=Math.max(p,e.height+e.y)}))}));var d={};l.added.forEach((function(t){d[t.join("_")]=!0}));var h={};l.removed.forEach((function(t){h[t.join("_")]=!0})),i.forEach((function(t){t.each((function(e,r){var n,i=[{from:e.x,to:r.x},{from:e.width,to:r.width},{from:e.y,to:r.y},{from:e.height,to:r.height}],a=l.removed.length>0?c:0,s=!1,u=r.domain.join("_"),f=p;void 0!==u&&void 0!==d[u]?(i=[{from:r.x,to:r.x},{from:r.width,to:r.width},{from:f,to:r.y},{from:0,to:r.height}],a+=c):void 0!==u&&void 0!==h[u]&&(i=[{from:e.x,to:r.x},{from:e.width,to:r.width},{from:r.y,to:f},{from:r.height,to:0}],a=0,s=!0),null===(n=o.ctx.animationManager)||void 0===n||n.animateMany(o.id+"_waiting-update-ready_"+e.id,i,{disableInteractions:!0,delay:a,duration:c,ease:Kp,repeat:0,onUpdate:function(t){var r=yb(t,4),n=r[0],o=r[1],i=r[2],a=r[3];e.x=n,e.width=o,e.y=i,e.height=a},onComplete:function(){s&&t.cleanup()}})}))})),a.forEach((function(t){t.each((function(t){var e;t.opacity=0,null===(e=o.ctx.animationManager)||void 0===e||e.animate(o.id+"_waiting-update-ready_"+t.id,{from:0,to:1,delay:u,duration:200,ease:Hp,repeat:0,onUpdate:function(e){t.opacity=e}})}))}))}else i.forEach((function(t){o.resetSelectionRects(t)}))},e.prototype.resetSelectionRects=function(t){t.each((function(t,e){t.x=e.x,t.y=e.y,t.width=e.width,t.height=e.height}))},e.prototype.isLabelEnabled=function(){return this.label.enabled},e.className="HistogramSeries",e.type="histogram",hb([nu(Ou)],e.prototype,"fill",void 0),hb([nu(Ou)],e.prototype,"stroke",void 0),hb([nu(Pu(0,1))],e.prototype,"fillOpacity",void 0),hb([nu(Pu(0,1))],e.prototype,"strokeOpacity",void 0),hb([nu(Bu)],e.prototype,"lineDash",void 0),hb([nu(Pu(0))],e.prototype,"lineDashOffset",void 0),hb([nu(gu)],e.prototype,"xKey",void 0),hb([nu(fu)],e.prototype,"areaPlot",void 0),hb([nu(su())],e.prototype,"bins",void 0),hb([nu(bb)],e.prototype,"aggregation",void 0),hb([nu(Du(0))],e.prototype,"binCount",void 0),hb([nu(gu)],e.prototype,"xName",void 0),hb([nu(gu)],e.prototype,"yKey",void 0),hb([nu(gu)],e.prototype,"yName",void 0),hb([nu(Pu(0))],e.prototype,"strokeWidth",void 0),e}(Dm),Ob=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Eb=function(){return(Eb=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},Tb=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},Pb=function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{l(n.next(t))}catch(t){i(t)}}function s(t){try{l(n.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}l((n=n.apply(t,e||[])).next())}))},Db=function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Ab=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},Mb=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.formatter=void 0,e}return Ob(e,t),Tb([nu(hu)],e.prototype,"formatter",void 0),e}(dv),_b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.renderer=void 0,e.format=void 0,e}return Ob(e,t),Tb([nu(hu)],e.prototype,"renderer",void 0),Tb([nu(gu)],e.prototype,"format",void 0),e}(sp),Rb=function(t){function e(e){var r=t.call(this,{moduleCtx:e,hasMarkers:!0,pickModes:[Bc.NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST,Bc.NEAREST_NODE,Bc.EXACT_SHAPE_MATCH]})||this;r.marker=new Am,r.label=new Mb,r.title=void 0,r.stroke="#874349",r.lineDash=[0],r.lineDashOffset=0,r.strokeWidth=2,r.strokeOpacity=1,r.tooltip=new _b,r.xKey=void 0,r.xName=void 0,r.yKey=void 0,r.yName=void 0;var n=r,o=n.marker,i=n.label;return o.fill="#c16068",o.stroke="#874349",i.enabled=!1,r}return Ob(e,t),e.prototype.processData=function(t){return Pb(this,void 0,void 0,(function(){var e,r,n,o,i,a,s,l,u,c,p,d,h,f;return Db(this,(function(v){switch(v.label){case 0:return r=(e=this).axes,n=e.xKey,o=void 0===n?"":n,i=e.yKey,a=void 0===i?"":i,s=o&&a&&this.data?this.data:[],l=r[Xu.X],u=r[Xu.Y],c=(null==l?void 0:l.scale)instanceof mf,p=(null==u?void 0:u.scale)instanceof mf,[4,t.request(this.id,null!=s?s:[],{props:[$c(this,o,c,{id:"xValue"}),$c(this,a,p,{id:"yValue",invalidValue:void 0})],dataVisible:this.visible})];case 1:return d=v.sent(),h=d.dataModel,f=d.processedData,this.dataModel=h,this.processedData=f,[2]}}))}))},e.prototype.getDomain=function(t){var e=this.axes,r=this.dataModel,n=this.processedData;if(!n||!r)return[];var o=e[Xu.X],i=e[Xu.Y],a=r.resolveProcessedDataDefById(this,"xValue");if(t===Xu.X){var s=r.getDomain(this,"xValue","value",n);return"value"===(null==a?void 0:a.def.type)&&"category"===a.def.valueType?s:this.fixNumericExtent(cv(s),o)}s=r.getDomain(this,"yValue","value",n);return this.fixNumericExtent(s,i)},e.prototype.createNodeData=function(){var t,e,r,n,o;return Pb(this,void 0,void 0,(function(){var i,a,s,l,u,c,p,d,h,f,v,y,g,m,b,C,S,w,x,O,E,T,P,D,A,M,_,R,k,F,I,L,N,G,j,V,B,U,H,z,W,K,X;return Db(this,(function(Y){if(a=(i=this).processedData,s=i.dataModel,l=i.axes,u=i.marker,c=u.enabled,p=u.size,d=u.strokeWidth,h=i.ctx.callbackCache,f=l[Xu.X],v=l[Xu.Y],!(a&&s&&f&&v))return[2,[]];for(g=(y=this).label,m=y.yKey,b=void 0===m?"":m,C=y.xKey,S=void 0===C?"":C,w=y.id,x=f.scale,O=v.scale,E=(null!==(t=x.bandwidth)&&void 0!==t?t:0)/2,T=(null!==(e=O.bandwidth)&&void 0!==e?e:0)/2,P=new Array(a.data.length),D=c?p:0,A=s.resolveProcessedDataIndexById(this,"xValue").index,M=s.resolveProcessedDataIndexById(this,"yValue").index,_=!0,R=void 0,k=void 0,F=0,I=0;I<a.data.length;I++)if(L=null!=k?k:a.data[I],N=L.datum,G=L.values,j=G[A],void 0===(V=G[M]))R=void 0,_=!0;else{if(B=x.convert(j)+E,isNaN(B)){R=void 0,_=!0,k=void 0;continue}if(U=(null!==(r=x.bandwidth)&&void 0!==r?r:.5*p+(null!=d?d:0))+1,k=void 0===(null===(n=a.data[I+1])||void 0===n?void 0:n.values[M])?void 0:a.data[I+1],H=null===(o=a.data[I+1])||void 0===o?void 0:o.values[A],z=f.inRangeEx(B,0,U),W=k&&f.inRangeEx(x.convert(H)+E,0,U),-1===z&&-1===W){_=!0;continue}if(1===z&&1===R){_=!0;continue}R=z,K=O.convert(V)+T,X=void 0,g.formatter&&(X=h.call(g.formatter,{value:V,seriesId:w})),void 0!==X||("number"==typeof V&&isFinite(V)?X=V.toFixed(2):V&&(X=String(V))),P[F++]={series:this,datum:N,yKey:b,xKey:S,point:{x:B,y:K,moveTo:_,size:D},nodeMidPoint:{x:B,y:K},yValue:V,xValue:j,label:X?{text:X,fontStyle:g.fontStyle,fontWeight:g.fontWeight,fontSize:g.fontSize,fontFamily:g.fontFamily,textAlign:"center",textBaseline:"bottom",fill:g.color}:void 0},_=!1}return P.length=F,[2,[{itemId:b,nodeData:P,labelData:P}]]}))}))},e.prototype.isPathOrSelectionDirty=function(){return this.marker.isDirty()},e.prototype.markerFactory=function(){return new(vh(this.marker.shape))},e.prototype.updateMarkerSelection=function(t){return Pb(this,void 0,void 0,(function(){var e,r,n,o,i;return Db(this,(function(a){return e=t.nodeData,r=t.markerSelection,n=this.marker,o=n.shape,i=n.enabled,e=o&&i?e:[],this.marker.isDirty()&&r.clear(),[2,r.update(e)]}))}))},e.prototype.updateMarkerNodes=function(t){var e;return Pb(this,void 0,void 0,(function(){var r,n,o,i,a,s,l,u,c,p,d,h,f,v,y,g,m,b,C,S,w,x,O;return Db(this,(function(E){return r=t.markerSelection,n=t.isHighlight,i=(o=this).marker,a=o.marker.fillOpacity,s=o.xKey,l=void 0===s?"":s,u=o.yKey,c=void 0===u?"":u,p=o.stroke,d=o.strokeOpacity,h=o.highlightStyle.item,f=h.fill,v=h.fillOpacity,y=void 0===v?a:v,g=h.stroke,m=h.strokeWidth,b=o.id,C=o.ctx.callbackCache,S=i.size,w=i.formatter,x=null!==(e=i.strokeWidth)&&void 0!==e?e:this.strokeWidth,O="function"==typeof i.shape,r.each((function(t,e){var r,o,s,u,h,v,E,T=n&&void 0!==f?f:i.fill,P=n?y:a,D=n&&void 0!==g?g:null!==(r=i.stroke)&&void 0!==r?r:p,A=n&&void 0!==m?m:x,M=void 0;w&&(M=C.call(w,{datum:e.datum,xKey:l,yKey:c,fill:T,stroke:D,strokeWidth:A,size:S,highlighted:n,seriesId:b})),t.fill=null!==(o=null==M?void 0:M.fill)&&void 0!==o?o:T,t.stroke=null!==(s=null==M?void 0:M.stroke)&&void 0!==s?s:D,t.strokeWidth=null!==(u=null==M?void 0:M.strokeWidth)&&void 0!==u?u:A,t.fillOpacity=null!=P?P:1,t.strokeOpacity=null!==(v=null!==(h=i.strokeOpacity)&&void 0!==h?h:d)&&void 0!==v?v:1,t.size=null!==(E=null==M?void 0:M.size)&&void 0!==E?E:S,t.translationX=e.point.x,t.translationY=e.point.y,t.visible=t.size>0&&!isNaN(e.point.x)&&!isNaN(e.point.y),O&&!t.dirtyPath&&(t.path.clear({trackChanges:!0}),t.updatePath(),t.checkPathDirty())})),n||this.marker.markClean(),[2]}))}))},e.prototype.updateLabelSelection=function(t){return Pb(this,void 0,void 0,(function(){var e,r,n,o,i;return Db(this,(function(a){return e=t.labelData,r=t.labelSelection,n=this.marker,o=n.shape,i=n.enabled,e=o&&i?e:[],[2,r.update(e)]}))}))},e.prototype.updateLabelNodes=function(t){return Pb(this,void 0,void 0,(function(){var e,r,n,o,i,a,s,l;return Db(this,(function(u){return e=t.labelSelection,r=this.label,n=r.enabled,o=r.fontStyle,i=r.fontWeight,a=r.fontSize,s=r.fontFamily,l=r.color,e.each((function(t,e){var r=e.point,u=e.label;e&&u&&n?(t.fontStyle=o,t.fontWeight=i,t.fontSize=a,t.fontFamily=s,t.textAlign=u.textAlign,t.textBaseline=u.textBaseline,t.text=u.text,t.x=r.x,t.y=r.y-10,t.fill=l,t.visible=!0):t.visible=!1})),[2]}))}))},e.prototype.getNodeClickEvent=function(t,e){var r,n;return new Em(null!==(r=this.xKey)&&void 0!==r?r:"",null!==(n=this.yKey)&&void 0!==n?n:"",t,e,this)},e.prototype.getNodeDoubleClickEvent=function(t,e){var r,n;return new Tm(null!==(r=this.xKey)&&void 0!==r?r:"",null!==(n=this.yKey)&&void 0!==n?n:"",t,e,this)},e.prototype.getTooltipHtml=function(t){var e,r,n=this.xKey,o=this.yKey,i=this.axes,a=i[Xu.X],s=i[Xu.Y];if(!(n&&o&&a&&s))return"";var l=this,u=l.xName,c=l.yName,p=l.tooltip,d=l.marker,h=l.id,f=p.renderer,v=p.format,y=t.datum,g=t.xValue,m=t.yValue,b=a.formatDatum(g),C=s.formatDatum(m),S=Fm(null!==(e=this.title)&&void 0!==e?e:c),w=Fm(b+": "+C),x=d.formatter,O=d.fill,E=d.stroke,T=d.strokeWidth,P=d.size,D=null!=T?T:this.strokeWidth,A=void 0;x&&(A=x({datum:y,xKey:n,yKey:o,fill:O,stroke:E,strokeWidth:D,size:P,highlighted:!1,seriesId:h}));var M=null!==(r=null==A?void 0:A.fill)&&void 0!==r?r:O,_={title:S,backgroundColor:M,content:w};if(v||f){var R={datum:y,xKey:n,xValue:g,xName:u,yKey:o,yValue:m,yName:c,title:S,color:M,seriesId:h};if(v)return fc({content:Rm(v,R)},_);if(f)return fc(f(R),_)}return fc(_)},e.prototype.getLegendData=function(){var t,e,r,n,o,i,a,s=this,l=s.id,u=s.data,c=s.xKey,p=s.yKey,d=s.yName,h=s.visible,f=s.title,v=s.marker,y=s.stroke,g=s.strokeOpacity;return(null==u?void 0:u.length)&&c&&p?[{legendType:"category",id:l,itemId:p,seriesId:l,enabled:h,label:{text:null!==(t=null!=f?f:d)&&void 0!==t?t:p},marker:{shape:v.shape,fill:null!==(e=v.fill)&&void 0!==e?e:"rgba(0, 0, 0, 0)",stroke:null!==(n=null!==(r=v.stroke)&&void 0!==r?r:y)&&void 0!==n?n:"rgba(0, 0, 0, 0)",fillOpacity:null!==(o=v.fillOpacity)&&void 0!==o?o:1,strokeOpacity:null!==(a=null!==(i=v.strokeOpacity)&&void 0!==i?i:g)&&void 0!==a?a:1}}]:[]},e.prototype.animateEmptyUpdateReady=function(t){var e=this,r=t.markerSelections,n=t.labelSelections,o=t.contextData,i=t.paths;o.forEach((function(t,o){var a,s,l,u=t.nodeData,c=Ab(i[o],1)[0],p=c.path,d=[0],h=u.reduce((function(t,e,r){if(0===r)return t;var n=u[r-1];if(isNaN(e.point.x)||isNaN(e.point.y)||isNaN(n.point.x)||isNaN(n.point.y))return d.push(t),t;var o=Math.sqrt(Math.pow(e.point.x-n.point.x,2)+Math.pow(e.point.y-n.point.y,2));return d.push(t+o),t+o}),0);c.fill=void 0,c.lineJoin="round",c.pointerEvents=Ws.None,c.stroke=e.stroke,c.strokeWidth=e.getStrokeWidth(e.strokeWidth),c.strokeOpacity=e.strokeOpacity,c.lineDash=e.lineDash,c.lineDashOffset=e.lineDashOffset;var f=null!==(s=null===(a=e.ctx.animationManager)||void 0===a?void 0:a.defaultOptions.duration)&&void 0!==s?s:1e3,v={from:0,to:h};null===(l=e.ctx.animationManager)||void 0===l||l.animate(e.id+"_empty-update-ready",Eb(Eb({},v),{duration:f,onUpdate:function(t){p.clear({trackChanges:!0}),u.forEach((function(e,r){if(d[r]<=t)e.point.moveTo?p.moveTo(e.point.x,e.point.y):p.lineTo(e.point.x,e.point.y);else if(r>0&&d[r-1]<t){var n=u[r-1].point,o=e.point,i=d[r]-d[r-1],a=(i-(d[r]-t))/i,s=(1-a)*n.x+a*o.x,l=(1-a)*n.y+a*o.y;e.point.moveTo?p.moveTo(s,l):p.lineTo(s,l)}})),c.checkPathDirty()}})),r[o].each((function(t,r,n){var o,i,a,s,l=h>0?d[n]/h*f:0,u=e.animateFormatter(r),c=null!==(i=null===(o=r.point)||void 0===o?void 0:o.size)&&void 0!==i?i:0;null===(a=e.ctx.animationManager)||void 0===a||a.animate(e.id+"_empty-update-ready_"+t.id,Eb(Eb({},v),{to:null!==(s=null==u?void 0:u.size)&&void 0!==s?s:c,delay:l,duration:200,onUpdate:function(e){t.size=e}}))})),n[o].each((function(t,r,n){var o,i=d[n]/h*f;null===(o=e.ctx.animationManager)||void 0===o||o.animate(e.id+"_empty-update-ready_"+t.id,{from:0,to:1,delay:i,duration:200,onUpdate:function(e){t.opacity=e}})}))}))},e.prototype.animateReadyUpdate=function(t){this.resetMarkersAndPaths(t)},e.prototype.animateReadyResize=function(t){var e;null===(e=this.ctx.animationManager)||void 0===e||e.reset(),this.resetMarkersAndPaths(t)},e.prototype.resetMarkersAndPaths=function(t){var e=this,r=t.markerSelections,n=t.contextData,o=t.paths;n.forEach((function(t,n){var i=t.nodeData,a=Ab(o[n],1)[0],s=a.path;a.stroke=e.stroke,a.strokeWidth=e.getStrokeWidth(e.strokeWidth),a.strokeOpacity=e.strokeOpacity,a.lineDash=e.lineDash,a.lineDashOffset=e.lineDashOffset,s.clear({trackChanges:!0}),i.forEach((function(t){t.point.moveTo?s.moveTo(t.point.x,t.point.y):s.lineTo(t.point.x,t.point.y)})),a.checkPathDirty(),r[n].each((function(t,r){var n,o,i,a=e.animateFormatter(r),s=null!==(o=null===(n=r.point)||void 0===n?void 0:n.size)&&void 0!==o?o:0;t.size=null!==(i=null==a?void 0:a.size)&&void 0!==i?i:s}))}))},e.prototype.animateFormatter=function(t){var e,r,n=this,o=n.marker,i=n.xKey,a=void 0===i?"":i,s=n.yKey,l=void 0===s?"":s,u=n.stroke,c=n.id,p=n.ctx.callbackCache,d=o.size,h=o.formatter,f=o.fill,v=null!==(e=o.stroke)&&void 0!==e?e:u,y=null!==(r=o.strokeWidth)&&void 0!==r?r:this.strokeWidth,g=void 0;return h&&(g=p.call(h,{datum:t.datum,xKey:a,yKey:l,fill:f,stroke:v,strokeWidth:y,size:d,highlighted:!1,seriesId:c})),g},e.prototype.isLabelEnabled=function(){return this.label.enabled},e.className="LineSeries",e.type="line",Tb([nu(gu)],e.prototype,"title",void 0),Tb([nu(Ou)],e.prototype,"stroke",void 0),Tb([nu(Bu)],e.prototype,"lineDash",void 0),Tb([nu(Pu(0))],e.prototype,"lineDashOffset",void 0),Tb([nu(Pu(0))],e.prototype,"strokeWidth",void 0),Tb([nu(Pu(0,1))],e.prototype,"strokeOpacity",void 0),Tb([nu(gu)],e.prototype,"xKey",void 0),Tb([nu(gu)],e.prototype,"xName",void 0),Tb([nu(gu)],e.prototype,"yKey",void 0),Tb([nu(gu)],e.prototype,"yName",void 0),e}(Dm),kb=function(){function t(){this.domain=[0,1],this.range=["red","blue"],this.parsedRange=this.range.map((function(t){return Ql.fromString(t)}))}return t.prototype.update=function(){var t=this.domain,e=this.range;t.length<2&&(sl.warnOnce("`colorDomain` should have at least 2 values."),0===t.length?t.push(0,1):1===t.length&&t.push(t[0]+1));for(var r=1;r<t.length;r++){if(t[r-1]>=t[r]){sl.warnOnce("`colorDomain` values should be supplied in ascending order."),t.sort((function(t,e){return t-e}));break}}var n=e.length<t.length;if(n||t.length>2&&e.length>t.length)if(sl.warnOnce("Number of elements in `colorRange` needs to match the number of elements in `colorDomain`."),n)for(r=e.length;r<t.length;r++)e.push("black");else e.splice(t.length);this.parsedRange=this.range.map((function(t){return Ql.fromString(t)}))},t.prototype.convert=function(t){var e,r,n=this.domain,o=this.range,i=this.parsedRange,a=n[0],s=n[n.length-1],l=o[0],u=o[o.length-1];if(t<=a)return l;if(t>=s)return u;if(2===n.length){var c=(t-a)/(s-a),p=1/(o.length-1);r=(c-(e=o.length<=2?0:Math.min(Math.floor(c*(o.length-1)),o.length-2))*p)/p}else{for(e=0;e<n.length-2&&!(t<n[e+1]);e++);var d=n[e];r=(t-d)/(n[e+1]-d)}return Bp(i[e],i[e+1])(r)},t}(),Fb=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ib=function(){return(Ib=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},Lb=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},Nb=function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{l(n.next(t))}catch(t){i(t)}}function s(t){try{l(n.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}l((n=n.apply(t,e||[])).next())}))},Gb=function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},jb=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},Vb=function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t},Bb=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ub=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.formatter=void 0,e}return Fb(e,t),Lb([nu(hu)],e.prototype,"formatter",void 0),e}(dv),Hb=function(t){function e(e,r,n,o,i,a){var s=t.call(this,r,n,o,i,a)||this;return s.sizeKey=e,s}return Fb(e,t),e}(Om),zb=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="nodeClick",e}return Fb(e,t),e}(Hb),Wb=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="nodeDoubleClick",e}return Fb(e,t),e}(Hb),Kb=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.renderer=void 0,e}return Fb(e,t),Lb([nu(hu)],e.prototype,"renderer",void 0),e}(sp),Xb=function(t){function e(e){var r=t.call(this,{moduleCtx:e,pickModes:[Bc.NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST,Bc.NEAREST_NODE,Bc.EXACT_SHAPE_MATCH],pathsPerSeries:0,hasMarkers:!0})||this;return r.sizeScale=new Xv,r.marker=new Am,r.label=new Ub,r.title=void 0,r.labelKey=void 0,r.xName=void 0,r.yName=void 0,r.sizeName="Size",r.labelName="Label",r.xKey=void 0,r.yKey=void 0,r.sizeKey=void 0,r.colorKey=void 0,r.colorName="Color",r.colorDomain=void 0,r.colorRange=["#ffff00","#00ff00","#0000ff"],r.colorScale=new kb,r.tooltip=new Kb,r.label.enabled=!1,r}return Fb(e,t),e.prototype.processData=function(t){var e,r;return Nb(this,void 0,void 0,(function(){var n,o,i,a,s,l,u,c,p,d,h,f,v,y,g,m,b,C,S,w,x,O,E,T,P;return Gb(this,(function(D){switch(D.label){case 0:return o=(n=this).xKey,i=void 0===o?"":o,a=n.yKey,s=void 0===a?"":a,l=n.sizeKey,u=n.labelKey,c=n.axes,p=n.marker,d=n.data,h=c[Xu.X],f=c[Xu.Y],v=(null==h?void 0:h.scale)instanceof mf,y=(null==f?void 0:f.scale)instanceof mf,m=(g=this).colorScale,b=g.colorDomain,C=g.colorRange,S=g.colorKey,[4,t.request(this.id,null!=d?d:[],{props:Vb(Vb(Vb([$c(this,i,v,{id:"xValue"}),$c(this,s,y,{id:"yValue"})],jb(l?[$c(this,l,!0,{id:"sizeValue"})]:[])),jb(S?[$c(this,S,!0,{id:"colorValue"})]:[])),jb(u?[$c(this,u,!1,{id:"labelValue"})]:[])),dataVisible:this.visible})];case 1:return w=D.sent(),x=w.dataModel,O=w.processedData,this.dataModel=x,this.processedData=O,l&&(E=x.resolveProcessedDataIndexById(this,"sizeValue").index,T=null!==(e=O.domain.values[E])&&void 0!==e?e:[],this.sizeScale.domain=p.domain?p.domain:T),S&&(P=x.resolveProcessedDataIndexById(this,"colorValue").index,m.domain=null!==(r=null!=b?b:O.domain.values[P])&&void 0!==r?r:[],m.range=C,m.update()),[2]}}))}))},e.prototype.getDomain=function(t){var e=this.dataModel,r=this.processedData;if(!r||!e)return[];var n=t===Xu.X?"xValue":"yValue",o=e.resolveProcessedDataDefById(this,n,"value"),i=e.getDomain(this,n,"value",r);if("value"===(null==o?void 0:o.def.type)&&"category"===(null==o?void 0:o.def.valueType))return i;var a=this.axes[t];return this.fixNumericExtent(cv(i),a)},e.prototype.getNodeClickEvent=function(t,e){var r,n;return new zb(this.sizeKey,null!==(r=this.xKey)&&void 0!==r?r:"",null!==(n=this.yKey)&&void 0!==n?n:"",t,e,this)},e.prototype.getNodeDoubleClickEvent=function(t,e){var r,n;return new Wb(this.sizeKey,null!==(r=this.xKey)&&void 0!==r?r:"",null!==(n=this.yKey)&&void 0!==n?n:"",t,e,this)},e.prototype.createNodeData=function(){var t,e,r,n,o,i;return Nb(this,void 0,void 0,(function(){var a,s,l,u,c,p,d,h,f,v,y,g,m,b,C,S,w,x,O,E,T,P,D,A,M,_,R,k,F,I,L,N,G,j,V,B,U,H,z,W,K,X,Y,q,Z,J,$,Q,tt;return Gb(this,(function(et){if(s=(a=this).visible,l=a.axes,u=a.yKey,c=void 0===u?"":u,p=a.xKey,d=void 0===p?"":p,h=a.label,f=a.labelKey,v=a.ctx.callbackCache,y=a.dataModel,g=a.processedData,m=l[Xu.X],b=l[Xu.Y],!(y&&g&&s&&m&&b))return[2,[]];C=y.resolveProcessedDataIndexById(this,"xValue").index,S=y.resolveProcessedDataIndexById(this,"yValue").index,w=this.sizeKey?y.resolveProcessedDataIndexById(this,"sizeValue").index:-1,x=this.colorKey?y.resolveProcessedDataIndexById(this,"colorValue").index:-1,O=this.labelKey?y.resolveProcessedDataIndexById(this,"labelValue").index:-1,T=(E=this).colorScale,P=E.sizeKey,D=E.colorKey,A=E.id,M=m.scale,_=b.scale,R=(null!==(t=M.bandwidth)&&void 0!==t?t:0)/2,k=(null!==(e=_.bandwidth)&&void 0!==e?e:0)/2,I=(F=this).sizeScale,L=F.marker,N=new Array(null!==(n=null===(r=this.processedData)||void 0===r?void 0:r.data.length)&&void 0!==n?n:0),I.range=[L.size,L.maxSize],G=h.getFont(),j=0;try{for(V=Bb(null!==(o=g.data)&&void 0!==o?o:[]),B=V.next();!B.done;B=V.next())U=B.value,H=U.values,z=U.datum,W=H[C],K=H[S],X=M.convert(W)+R,Y=_.convert(K)+k,this.checkRangeXY(X,Y,m,b)&&(q=void 0,h.formatter&&(q=v.call(h.formatter,{value:K,seriesId:A,datum:z})),void 0===q&&(q=f?String(H[O]):""),Z=Fs.getTextSize(q,G),J=P?I.convert(H[w]):L.size,$=D?T.convert(H[x]):void 0,N[j++]={series:this,itemId:c,yKey:c,xKey:d,datum:z,xValue:W,yValue:K,sizeValue:H[w],point:{x:X,y:Y,size:J},nodeMidPoint:{x:X,y:Y},fill:$,label:Ib({text:q},Z)})}catch(t){Q={error:t}}finally{try{B&&!B.done&&(tt=V.return)&&tt.call(V)}finally{if(Q)throw Q.error}}return N.length=j,[2,[{itemId:null!==(i=this.yKey)&&void 0!==i?i:this.id,nodeData:N,labelData:N}]]}))}))},e.prototype.isPathOrSelectionDirty=function(){return this.marker.isDirty()},e.prototype.getLabelData=function(){var t;return null===(t=this.contextNodeData)||void 0===t?void 0:t.reduce((function(t,e){return t.concat(e.labelData)}),[])},e.prototype.markerFactory=function(){return new(vh(this.marker.shape))},e.prototype.updateMarkerSelection=function(t){return Nb(this,void 0,void 0,(function(){var e,r,n,o;return Gb(this,(function(i){return e=t.nodeData,r=t.markerSelection,n=this.marker.enabled,this.marker.isDirty()&&r.clear(),o=n?e:[],[2,r.update(o)]}))}))},e.prototype.updateMarkerNodes=function(t){return Nb(this,void 0,void 0,(function(){var e,r,n,o,i,a,s,l,u,c,p,d,h,f,v,y,g,m,b,C,S,w,x;return Gb(this,(function(O){return e=t.markerSelection,r=t.isHighlight,o=(n=this).marker,i=n.xKey,a=void 0===i?"":i,s=n.yKey,l=void 0===s?"":s,u=n.sizeScale,c=n.marker,p=c.fillOpacity,d=c.strokeOpacity,h=c.strokeWidth,f=n.highlightStyle.item,v=f.fill,y=f.fillOpacity,g=void 0===y?p:y,m=f.stroke,b=f.strokeWidth,C=n.id,S=n.ctx.callbackCache,w=o.formatter,u.range=[o.size,o.maxSize],x="function"==typeof o.shape,e.each((function(t,e){var n,i,s,u,c,f,y,O,E,T,P=r&&void 0!==v?v:null!==(n=e.fill)&&void 0!==n?n:o.fill,D=r?g:p,A=r&&void 0!==m?m:o.stroke,M=d,_=r&&void 0!==b?b:null!=h?h:1,R=null!==(s=null===(i=e.point)||void 0===i?void 0:i.size)&&void 0!==s?s:0,k=void 0;w&&(k=S.call(w,{datum:e.datum,xKey:a,yKey:l,fill:P,stroke:A,strokeWidth:_,size:R,highlighted:r,seriesId:C})),t.fill=null!==(u=null==k?void 0:k.fill)&&void 0!==u?u:P,t.stroke=null!==(c=null==k?void 0:k.stroke)&&void 0!==c?c:A,t.strokeWidth=null!==(f=null==k?void 0:k.strokeWidth)&&void 0!==f?f:_,t.fillOpacity=null!=D?D:1,t.strokeOpacity=null!=M?M:1,t.translationX=null!==(O=null===(y=e.point)||void 0===y?void 0:y.x)&&void 0!==O?O:0,t.translationY=null!==(T=null===(E=e.point)||void 0===E?void 0:E.y)&&void 0!==T?T:0,t.visible=t.size>0,x&&!t.dirtyPath&&(t.path.clear({trackChanges:!0}),t.updatePath(),t.checkPathDirty())})),r||this.marker.markClean(),[2]}))}))},e.prototype.updateLabelSelection=function(t){var e,r;return Nb(this,void 0,void 0,(function(){var n,o,i,a;return Gb(this,(function(s){return n=t.labelSelection,o=this.label.enabled,i=o&&null!==(r=null===(e=this.chart)||void 0===e?void 0:e.placeLabels().get(this))&&void 0!==r?r:[],a=i.map((function(t){return Ib(Ib({},t.datum),{point:{x:t.x,y:t.y,size:t.datum.point.size}})})),[2,n.update(a)]}))}))},e.prototype.updateLabelNodes=function(t){return Nb(this,void 0,void 0,(function(){var e,r;return Gb(this,(function(n){return e=t.labelSelection,r=this.label,e.each((function(t,e){var n,o,i,a;t.text=e.label.text,t.fill=r.color,t.x=null!==(o=null===(n=e.point)||void 0===n?void 0:n.x)&&void 0!==o?o:0,t.y=null!==(a=null===(i=e.point)||void 0===i?void 0:i.y)&&void 0!==a?a:0,t.fontStyle=r.fontStyle,t.fontWeight=r.fontWeight,t.fontSize=r.fontSize,t.fontFamily=r.fontFamily,t.textAlign="left",t.textBaseline="top"})),[2]}))}))},e.prototype.getTooltipHtml=function(t){var e,r,n,o,i,a,s,l=this.xKey,u=this.yKey,c=this.axes,p=c[Xu.X],d=c[Xu.Y];if(!(l&&u&&p&&d))return"";var h=this,f=h.marker,v=h.tooltip,y=h.xName,g=h.yName,m=h.sizeKey,b=h.sizeName,C=h.labelKey,S=h.labelName,w=h.id,x=h.ctx.callbackCache,O=f.stroke,E=null!==(e=t.fill)&&void 0!==e?e:f.fill,T=this.getStrokeWidth(null!==(r=f.strokeWidth)&&void 0!==r?r:1),P=this.marker.formatter,D=void 0;P&&(D=x.call(P,{datum:t,xKey:l,yKey:u,fill:E,stroke:O,strokeWidth:T,size:null!==(o=null===(n=t.point)||void 0===n?void 0:n.size)&&void 0!==o?o:0,highlighted:!1,seriesId:w}));var A=null!==(a=null!==(i=null==D?void 0:D.fill)&&void 0!==i?i:E)&&void 0!==a?a:"gray",M=null!==(s=this.title)&&void 0!==s?s:g,_=t.datum,R=t.xValue,k=t.yValue,F=t.sizeValue,I=t.label.text,L=Fm(p.formatDatum(R)),N=Fm(d.formatDatum(k)),G="<b>"+Fm(null!=y?y:l)+"</b>: "+L+"<br><b>"+Fm(null!=g?g:u)+"</b>: "+N;m&&(G+="<br><b>"+Fm(null!=b?b:m)+"</b>: "+Fm(F)),C&&(G="<b>"+Fm(null!=S?S:C)+"</b>: "+Fm(I)+"<br>"+G);var j={title:M,backgroundColor:A,content:G},V=v.renderer;return V?fc(V({datum:_,xKey:l,xValue:R,xName:y,yKey:u,yValue:k,yName:g,sizeKey:m,sizeName:b,labelKey:C,labelName:S,title:M,color:A,seriesId:w}),j):fc(j)},e.prototype.getLegendData=function(){var t,e,r,n,o,i=this,a=i.id,s=i.data,l=i.xKey,u=i.yKey,c=i.yName,p=i.title,d=i.visible,h=i.marker,f=h.fill,v=h.stroke,y=h.fillOpacity,g=h.strokeOpacity;return(null==s?void 0:s.length)&&l&&u?[{legendType:"category",id:a,itemId:u,seriesId:a,enabled:d,label:{text:null!==(t=null!=p?p:c)&&void 0!==t?t:u},marker:{shape:h.shape,fill:null!==(r=null!==(e=h.fill)&&void 0!==e?e:f)&&void 0!==r?r:"rgba(0, 0, 0, 0)",stroke:null!==(o=null!==(n=h.stroke)&&void 0!==n?n:v)&&void 0!==o?o:"rgba(0, 0, 0, 0)",fillOpacity:null!=y?y:1,strokeOpacity:null!=g?g:1}}]:[]},e.prototype.animateEmptyUpdateReady=function(t){var e,r,n=this,o=t.markerSelections,i=t.labelSelections,a=null!==(r=null===(e=this.ctx.animationManager)||void 0===e?void 0:e.defaultOptions.duration)&&void 0!==r?r:1e3;o.forEach((function(t){t.each((function(t,e){var r,o,i,s,l=n.animateFormatter(t,e),u=null!==(o=null===(r=e.point)||void 0===r?void 0:r.size)&&void 0!==o?o:0,c=null!==(i=null==l?void 0:l.size)&&void 0!==i?i:u;null===(s=n.ctx.animationManager)||void 0===s||s.animate(n.id+"_empty-update-ready_"+t.id,{from:0,to:c,duration:a,onUpdate:function(e){t.size=e}})}))})),i.forEach((function(t){t.each((function(t){var e;null===(e=n.ctx.animationManager)||void 0===e||e.animate(n.id+"_empty-update-ready_"+t.id,{from:0,to:1,delay:a,duration:200,onUpdate:function(e){t.opacity=e}})}))}))},e.prototype.animateReadyUpdate=function(t){var e=this;t.markerSelections.forEach((function(t){e.resetMarkers(t)}))},e.prototype.animateReadyHighlightMarkers=function(t){this.resetMarkers(t)},e.prototype.resetMarkers=function(t){var e=this;t.each((function(t,r){var n,o,i,a=e.animateFormatter(t,r),s=null!==(o=null===(n=r.point)||void 0===n?void 0:n.size)&&void 0!==o?o:0;t.size=null!==(i=null==a?void 0:a.size)&&void 0!==i?i:s}))},e.prototype.animateFormatter=function(t,e){var r,n,o,i=this,a=i.xKey,s=void 0===a?"":a,l=i.yKey,u=void 0===l?"":l,c=i.marker.strokeWidth,p=i.id,d=i.ctx.callbackCache,h=this.marker.formatter,f=null!==(r=e.fill)&&void 0!==r?r:t.fill,v=t.stroke,y=null!=c?c:1,g=null!==(o=null===(n=e.point)||void 0===n?void 0:n.size)&&void 0!==o?o:0,m=void 0;return h&&(m=d.call(h,{datum:e.datum,xKey:s,yKey:u,fill:f,stroke:v,strokeWidth:y,size:g,highlighted:!1,seriesId:p})),m},e.prototype.isLabelEnabled=function(){return this.label.enabled},e.className="ScatterSeries",e.type="scatter",Lb([nu(gu)],e.prototype,"title",void 0),Lb([nu(gu)],e.prototype,"labelKey",void 0),Lb([nu(gu)],e.prototype,"xName",void 0),Lb([nu(gu)],e.prototype,"yName",void 0),Lb([nu(gu)],e.prototype,"sizeName",void 0),Lb([nu(gu)],e.prototype,"labelName",void 0),Lb([nu(gu)],e.prototype,"xKey",void 0),Lb([nu(gu)],e.prototype,"yKey",void 0),Lb([nu(gu)],e.prototype,"sizeKey",void 0),Lb([nu(gu)],e.prototype,"colorKey",void 0),Lb([nu(gu)],e.prototype,"colorName",void 0),Lb([nu(_u)],e.prototype,"colorDomain",void 0),Lb([nu(Eu)],e.prototype,"colorRange",void 0),e}(Dm),Yb=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),qb=function(t){function e(e){return t.call(this,{moduleCtx:e,pickModes:[Bc.EXACT_SHAPE_MATCH]})||this}return Yb(e,t),e.prototype.getLabelData=function(){return[]},e}(up),Zb=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Jb=function(){return(Jb=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},$b=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},Qb=function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{l(n.next(t))}catch(t){i(t)}}function s(t){try{l(n.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}l((n=n.apply(t,e||[])).next())}))},tC=function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},eC=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},rC=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.renderer=void 0,e}return Zb(e,t),$b([nu(hu)],e.prototype,"renderer",void 0),e}(sp),nC=function(t){function e(e,r,n,o,i,a){var s=t.call(this,o,i,a)||this;return s.labelKey=e,s.sizeKey=r,s.colorKey=n,s}return Zb(e,t),e}(tp),oC=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="nodeClick",e}return Zb(e,t),e}(nC),iC=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="nodeDoubleClick",e}return Zb(e,t),e}(nC),aC=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.padding=10,e}return Zb(e,t),$b([nu(Pu(0))],e.prototype,"padding",void 0),e}(dv),sC=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.wrapping="on-space",e}return Zb(e,t),$b([nu(Qu)],e.prototype,"wrapping",void 0),e}(dv),lC=function(){function t(){var t;this.style=((t=new dv).color="white",t)}return $b([nu(gu)],t.prototype,"key",void 0),$b([nu(gu)],t.prototype,"name",void 0),$b([nu(hu)],t.prototype,"formatter",void 0),t}();!function(t){t[t.Name=0]="Name",t[t.Value=1]="Value"}(Cb||(Cb={}));var uC=new Gl;function cC(t,e){var r=e.fontStyle,n=e.fontWeight,o=e.fontSize,i=e.fontFamily;uC.fontStyle=r,uC.fontWeight=n,uC.fontSize=o,uC.fontFamily=i,uC.text=t,uC.x=0,uC.y=0,uC.textAlign="left",uC.textBaseline="top";var a=uC.computeBBox();return{width:a.width,height:a.height}}function pC(t){if("string"==typeof t&&!Ql.validColorString(t)){return sl.warnOnce('invalid Treemap tile colour string "'+t+'". Affected treemap tiles will be coloured black.'),"black"}return t}var dC=function(){function t(){this.color="black"}return $b([nu(Ou)],t.prototype,"color",void 0),t}(),hC=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.text=new dC,e}return Zb(e,t),e}(ap),fC=function(t){function e(){var e,r=null!==t&&t.apply(this,arguments)||this;return r.groupSelection=Fd.select(r.contentGroup,fl),r.highlightSelection=Fd.select(r.highlightGroup,fl),r.title=((e=new aC).color="white",e.fontWeight="bold",e.fontSize=12,e.fontFamily="Verdana, sans-serif",e.padding=15,e),r.subtitle=function(){var t=new aC;return t.color="white",t.fontSize=9,t.fontFamily="Verdana, sans-serif",t.padding=13,t}(),r.labels={large:function(){var t=new sC;return t.color="white",t.fontWeight="bold",t.fontSize=18,t}(),medium:function(){var t=new sC;return t.color="white",t.fontWeight="bold",t.fontSize=14,t}(),small:function(){var t=new sC;return t.color="white",t.fontWeight="bold",t.fontSize=10,t}(),formatter:void 0,value:new lC},r.nodePadding=2,r.nodeGap=0,r.labelKey="label",r.sizeKey="size",r.colorKey="color",r.colorDomain=[-5,5],r.colorRange=["#cb4b3f","#6acb64"],r.groupFill="#272931",r.groupStroke="black",r.groupStrokeWidth=1,r.tileStroke="black",r.tileStrokeWidth=1,r.gradient=!0,r.formatter=void 0,r.colorName="Change",r.rootName="Root",r.highlightGroups=!0,r.tileShadow=new zv,r.labelShadow=new zv,r.tooltip=new rC,r.highlightStyle=new hC,r}return Zb(e,t),e.prototype.getNodePaddingTop=function(t,e){var r,n=this.title,o=this.subtitle,i=this.nodePadding,a=t.label;if(t.isLeaf||!a||0===t.depth)return i;var s=t.depth>1?o:n,l=cC(a,s);return s.fontSize>e.width/3||s.fontSize>e.height/3||l.height>=e.height?i:l.height+i+(null!==(r=s.padding)&&void 0!==r?r:0)},e.prototype.getNodePadding=function(t,e){var r=this.nodePadding;return{top:this.getNodePaddingTop(t,e),right:r,bottom:r,left:r}},e.prototype.squarify=function(t,e,r){if(void 0===r&&(r=new Map),e.width<=0||e.height<=0)return r;r.set(t,e);var n=this.getNodePadding(t,e),o=e.width-n.left-n.right,i=e.height-n.top-n.bottom;if(o<=0||i<=0||t.value<=0)return r;for(var a=0,s=0,l=1/0,u=t.value,c=t.children,p=new Ns(e.x+n.left,e.y+n.top,o,i),d=p.clone(),h=0;h<c.length;h++){var f=c[h].value,v=c[s].value,y=d.width<d.height;a+=f;var g=y?d.height:d.width,m=y?d.width:d.height,b=m*v/a,C=g*a/u,S=Math.max(b,C)/Math.min(b,C),w=Math.abs(1-S);if(w<l)l=w;else{C=g*(a-=f)/u;for(var x=y?d.x:d.y,O=s;O<h;O++){var E=c[O],T=y?x:d.x,P=y?d.y:x,D=m*E.value/a,A=new Ns(T,P,y?D:C,y?C:D);this.applyGap(p,A),this.squarify(E,A,r),u-=E.value,x+=D}y?(d.y+=C,d.height-=C):(d.x+=C,d.width-=C),s=h,a=0,l=1/0,h--}}var M=d.width<d.height,_=M?d.x:d.y;for(h=s;h<c.length;h++){T=M?_:d.x,P=M?d.y:_;var R=c[h].value/u,k=d.width*(M?R:1),F=d.height*(M?1:R);A=new Ns(T,P,k,F);this.applyGap(p,A),this.squarify(c[h],A,r),_+=M?k:F}return r},e.prototype.applyGap=function(t,e){var r=this.nodeGap/2,n=function(t){return{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height}},o=n(t),i=n(e);Object.keys(o).forEach((function(t){Yv(o[t],i[t])||e.shrink(r,t)}))},e.prototype.processData=function(){return Qb(this,void 0,void 0,(function(){var t,e,r,n,o,i,a,s,l,u,c,p=this;return tC(this,(function(d){return this.data?(e=(t=this).data,r=t.sizeKey,n=t.labelKey,o=t.colorKey,i=t.colorDomain,a=t.colorRange,s=t.groupFill,l=this.labels.formatter,(u=new kb).domain=i,u.range=a,u.update(),c=function(t,e,i){var a,d,h,f,v;void 0===e&&(e=0),l&&(v=p.ctx.callbackCache.call(l,{datum:t})),void 0!==v||(v=n&&null!==(a=t[n])&&void 0!==a?a:"");var y=o&&null!==(d=t[o])&&void 0!==d?d:e;y=pC(y);var g=!t.children,m=s;"string"==typeof y?m=y:!g&&s||(m=u.convert(y));var b={datum:t,depth:e,parent:i,value:0,label:v,fill:m,series:p,isLeaf:g,children:[]};return g?b.value=r&&null!==(h=t[r])&&void 0!==h?h:1:(null===(f=t.children)||void 0===f||f.forEach((function(t){var r=c(t,e+1,b),n=r.value;!isNaN(n)&&isFinite(n)&&0!==n&&(b.value+=n,b.children.push(r))})),b.children.sort((function(t,e){return e.value-t.value}))),b},this.dataRoot=c(e),[2]):[2]}))}))},e.prototype.createNodeData=function(){return Qb(this,void 0,void 0,(function(){return tC(this,(function(t){return[2,[]]}))}))},e.prototype.update=function(){return Qb(this,void 0,void 0,(function(){return tC(this,(function(t){switch(t.label){case 0:return[4,this.updateSelections()];case 1:return t.sent(),[4,this.updateNodes()];case 2:return t.sent(),[2]}}))}))},e.prototype.updateSelections=function(){return Qb(this,void 0,void 0,(function(){var t,e,r,n,o,i,a,s,l;return tC(this,(function(u){return this.nodeDataRefresh?(this.nodeDataRefresh=!1,e=(t=this).chart,r=t.dataRoot,e&&r&&e.getSeriesRect()?(n=[],(o=function(t){var e;n.push(t),null===(e=t.children)||void 0===e||e.forEach(o)})(r),a=(i=this).groupSelection,s=i.highlightSelection,l=function(t){return t.update(n,(function(t){var e=new Ym,r=new Gl;r.tag=Cb.Name;var n=new Gl;n.tag=Cb.Value,t.append([e,r,n])}))},this.groupSelection=l(a),this.highlightSelection=l(s),[2]):[2]):[2]}))}))},e.prototype.isDatumHighlighted=function(t){var e;return t===(null===(e=this.ctx.highlightManager)||void 0===e?void 0:e.getActiveHighlight())&&(t.isLeaf||this.highlightGroups)},e.prototype.getTileFormat=function(t,e){var r,n=this.formatter,o=this.ctx.callbackCache;if(!n)return{};var i=this,a=i.gradient,s=i.colorKey,l=i.labelKey,u=i.sizeKey,c=i.tileStroke,p=i.tileStrokeWidth,d=i.groupStroke,h=i.groupStrokeWidth,f=t.isLeaf?c:d,v=t.isLeaf?p:h,y=o.call(n,{seriesId:this.id,datum:t.datum,depth:t.depth,parent:null===(r=t.parent)||void 0===r?void 0:r.datum,colorKey:s,sizeKey:u,labelKey:l,fill:t.fill,stroke:f,strokeWidth:v,gradient:a,highlighted:e});return null!=y?y:{}},e.prototype.updateNodes=function(){return Qb(this,void 0,void 0,(function(){var t,e,r,n,o,i,a,s,l,u,c,p,d,h,f,v,y,g,m,b,C,S,w=this;return tC(this,(function(x){return this.chart?(e=(t=this).gradient,r=t.highlightStyle,n=r.item,o=n.fill,i=n.fillOpacity,a=n.stroke,s=n.strokeWidth,l=r.text.color,u=t.tileStroke,c=t.tileStrokeWidth,p=t.groupStroke,d=t.groupStrokeWidth,h=t.tileShadow,f=t.labelShadow,(v=t.dataRoot)?(y=this.chart.getSeriesRect(),g=this.squarify(v,new Ns(0,0,y.width,y.height)),m=this.buildLabelMeta(g),b=this.getHighlightedSubtree(v),this.updateNodeMidPoint(g),C=function(t,r,n){var l,f,v,y,m,b,C=g.get(r);if(C){var S=n&&void 0!==o?o:r.fill,x=null!==(l=n?i:1)&&void 0!==l?l:1,O=p;n&&void 0!==a?O=a:r.isLeaf&&(O=u);var E=d;n&&void 0!==s?E=s:r.isLeaf&&(E=c);var T=w.getTileFormat(r,n),P=pC(null!==(f=null==T?void 0:T.fill)&&void 0!==f?f:S);if(null!==(v=null==T?void 0:T.gradient)&&void 0!==v?v:e){var D=Ql.tryParseFromString(S).brighter().toString(),A=Ql.tryParseFromString(S).darker().toString();t.fill="linear-gradient(180deg, "+D+", "+A+")"}else t.fill=P;t.fillOpacity=null!==(y=null==T?void 0:T.fillOpacity)&&void 0!==y?y:x,t.stroke=pC(null!==(m=null==T?void 0:T.stroke)&&void 0!==m?m:O),t.strokeWidth=null!==(b=null==T?void 0:T.strokeWidth)&&void 0!==b?b:E,t.fillShadow=h,t.crisp=!0,t.x=C.x,t.y=C.y,t.width=C.width,t.height=C.height,t.visible=!0}else t.visible=!1},this.groupSelection.selectByClass(Ym).forEach((function(t){return C(t,t.datum,!1)})),this.highlightSelection.selectByClass(Ym).forEach((function(t){var e=w.isDatumHighlighted(t.datum);t.visible=e||b.has(t.datum),t.visible&&C(t,t.datum,e)})),S=function(t,e,r,n){var o=m.get(e),i=null==o?void 0:o[n];i?(t.text=i.text,t.fontFamily=i.style.fontFamily,t.fontSize=i.style.fontSize,t.fontWeight=i.style.fontWeight,t.fill=r&&null!=l?l:i.style.color,t.fillShadow=r?void 0:f,t.textAlign=i.hAlign,t.textBaseline=i.vAlign,t.x=i.x,t.y=i.y,t.visible=!0):t.visible=!1},this.groupSelection.selectByTag(Cb.Name).forEach((function(t){return S(t,t.datum,!1,"label")})),this.highlightSelection.selectByTag(Cb.Name).forEach((function(t){var e=w.isDatumHighlighted(t.datum);t.visible=e||b.has(t.datum),t.visible&&S(t,t.datum,e,"label")})),this.groupSelection.selectByTag(Cb.Value).forEach((function(t){return S(t,t.datum,!1,"value")})),this.highlightSelection.selectByTag(Cb.Value).forEach((function(t){var e=w.isDatumHighlighted(t.datum);t.visible=e||b.has(t.datum),t.visible&&S(t,t.datum,e,"value")})),[2]):[2]):[2]}))}))},e.prototype.updateNodeMidPoint=function(t){t.forEach((function(t,e){e.nodeMidPoint={x:t.x+t.width/2,y:t.y}}))},e.prototype.getHighlightedSubtree=function(t){var e=this,r=new Set,n=function(t){var o;(e.isDatumHighlighted(t)||t.parent&&r.has(t.parent))&&r.add(t),null===(o=t.children)||void 0===o||o.forEach(n)};return n(t),r},e.prototype.buildLabelMeta=function(t){var e=this,r=e.labels,n=e.title,o=e.subtitle,i=e.nodePadding,a=e.labelKey,s=e.ctx.callbackCache,l=/-$/m,u=new Map;return t.forEach((function(t,e){var c,p,d;if(a&&0!==e.depth){var h=t.width-2*i,f=t.height-2*i,v=function(e){return e.fontSize>t.width/3||e.fontSize>t.height/3},y=e.isLeaf?e.label:e.label.toUpperCase(),g="",m=r.value,b=m.style,C=Math.ceil(2*b.fontSize*(Gl.defaultLineHeightRatio-1));e.isLeaf&&(m.formatter?g=null!==(c=s.call(m.formatter,{datum:e.datum}))&&void 0!==c?c:"":m.key&&(g=e.datum[m.key]));var S,w=cC(g,b);g&&w.width>h&&(g="");var x="";if(e.isLeaf){var O=function(){var t,e,n=f-(g?b.fontSize+C:0),o=[r.large,r.medium,r.small];try{for(var i=eC(o),a=i.next();!a.done;a=i.next()){var s=a.value,u=cC(y,s),c=u.width;if(!(u.height>n||v(s))){if(c<=h)return{style:s,wrappedText:void 0};var p=Gl.wrap(y,h,n,s,s.wrapping);if(p&&"\u2026"!==p&&(s===r.small||!l.exec(p)&&!p.endsWith("\u2026")))return{style:s,wrappedText:p}}}}catch(e){t={error:e}}finally{try{a&&!a.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}return cC(y,r.small).height<=n&&!v(r.small)?{style:r.small,wrappedText:void 0}:{style:void 0,wrappedText:void 0}},E=O();!E.style&&g&&(g="",E=O()),S=null!==(p=E.style)&&void 0!==p?p:r.small,x=null!==(d=E.wrappedText)&&void 0!==d?d:""}else S=1===e.depth?n:o;var T=cC(x||y,S);if(!v(S)){if(T.width>h){var P=Math.floor(y.length*h/T.width)-1;y=y.substring(0,P).trim()+"\u2026"}w=cC(g,b);var D=g&&w.width<h&&w.height+T.height+C<f;u.set(e,{label:Jb({text:x||y,style:S},e.isLeaf?{hAlign:"center",vAlign:"middle",x:t.x+t.width/2,y:t.y+t.height/2-(D?w.height/2+C/2:0)}:{hAlign:"left",vAlign:"top",x:t.x+i,y:t.y+i}),value:D?{text:g,style:b,hAlign:"center",vAlign:"middle",x:t.x+t.width/2,y:t.y+t.height/2+T.height/2+C/2}:void 0})}}})),u},e.prototype.getDomain=function(t){return[0,1]},e.prototype.getNodeClickEvent=function(t,e){return new oC(this.labelKey,this.sizeKey,this.colorKey,t,e,this)},e.prototype.getNodeDoubleClickEvent=function(t,e){return new iC(this.labelKey,this.sizeKey,this.colorKey,t,e,this)},e.prototype.getTooltipHtml=function(t){var e,r,n,o;if(!this.highlightGroups&&!t.isLeaf)return"";var i=this,a=i.tooltip,s=i.sizeKey,l=i.labelKey,u=i.colorKey,c=i.rootName,p=i.id,d=i.labels,h=i.ctx.callbackCache,f=t.datum,v=a.renderer,y=t.depth?f[l]:null!==(e=f[l])&&void 0!==e?e:c,g="",m=this.getTileFormat(t,!1),b=null!==(n=null!==(r=null==m?void 0:m.fill)&&void 0!==r?r:t.fill)&&void 0!==n?n:"gray",C=d.value.key,S=d.value.formatter;if(C||S){var w="";if(S)w=h.call(S,{datum:f});else if(null!=C){var x=f[C];"number"==typeof x&&isFinite(x)&&(w=qv(x))}w&&(d.value.name&&(g+="<b>"+d.value.name+":</b> "),g+=w)}var O={title:y,backgroundColor:b,content:g};return v?fc(v({datum:t.datum,parent:null===(o=t.parent)||void 0===o?void 0:o.datum,depth:t.depth,sizeKey:s,labelKey:l,colorKey:u,title:y,color:b,seriesId:p}),O):y||g?fc(O):""},e.prototype.getLegendData=function(){return[]},e.className="TreemapSeries",e.type="treemap",$b([nu(Pu(0))],e.prototype,"nodePadding",void 0),$b([nu(Pu(0))],e.prototype,"nodeGap",void 0),$b([nu(yu)],e.prototype,"labelKey",void 0),$b([nu(gu)],e.prototype,"sizeKey",void 0),$b([nu(gu)],e.prototype,"colorKey",void 0),$b([nu(Mu)],e.prototype,"colorDomain",void 0),$b([nu(Eu)],e.prototype,"colorRange",void 0),$b([nu(gu)],e.prototype,"groupFill",void 0),$b([nu(Ou)],e.prototype,"groupStroke",void 0),$b([nu(Du(0))],e.prototype,"groupStrokeWidth",void 0),$b([nu(Ou)],e.prototype,"tileStroke",void 0),$b([nu(Du(0))],e.prototype,"tileStrokeWidth",void 0),$b([nu(fu)],e.prototype,"gradient",void 0),$b([nu(hu)],e.prototype,"formatter",void 0),$b([nu(yu)],e.prototype,"colorName",void 0),$b([nu(yu)],e.prototype,"rootName",void 0),$b([nu(vu)],e.prototype,"highlightGroups",void 0),e}(qb),vC={area:"cartesian",bar:"cartesian",column:"cartesian",histogram:"cartesian",line:"cartesian",scatter:"cartesian",treemap:"hierarchy",pie:"polar"},yC={},gC={has:function(t){return Object.prototype.hasOwnProperty.call(vC,t)},isCartesian:function(t){return"cartesian"===vC[t]},isPolar:function(t){return"polar"===vC[t]},isHierarchy:function(t){return"hierarchy"===vC[t]},get seriesTypes(){return Object.keys(vC)},get cartesianTypes(){var t=this;return this.seriesTypes.filter((function(e){return t.isCartesian(e)}))},get polarTypes(){var t=this;return this.seriesTypes.filter((function(e){return t.isPolar(e)}))},get hierarchyTypes(){var t=this;return this.seriesTypes.filter((function(e){return t.isHierarchy(e)}))}};function mC(t,e){var r;yC[t]=Mp([null!==(r=yC[t])&&void 0!==r?r:{},e])}function bC(t){var e;return null!==(e=yC[t])&&void 0!==e?e:{}}var CC={area:Wm,bar:cb,column:pb,histogram:xb,line:Rb,pie:wy,scatter:Xb,treemap:fC},SC={},wC={},xC={},OC={};function EC(t,e,r,n,o,i){SC[t]=r,wC[t]=n,xC[t]=o,i&&AC(t,i),function(t,e){vC[t]=e}(t,e)}function TC(t,e){var r,n=null!==(r=SC[t])&&void 0!==r?r:CC[t];if(n)return new n(e);throw new Error("AG Charts - unknown series type: "+t)}function PC(t){return wC[t]}function DC(t){return xC[t]}function AC(t,e){OC[t]=e}var MC={axes:[{type:Kg.type,position:"left"},{type:ig.type,position:"bottom"}]},_C={axes:[{type:"number",position:"bottom"},{type:"category",position:"left"}]},RC={axes:[{type:"number",position:"bottom"},{type:"number",position:"left"}]};function kC(t,e){if(IC(t)&&IC(e)){var r={};return Object.keys(t).forEach((function(n){r[n]=n in e?kC(t[n],e[n]):t[n]})),Object.keys(e).forEach((function(n){n in t||(r[n]=e[n])})),r}return Array.isArray(t)&&!Array.isArray(e)||FC(t)&&!FC(e)?t:e}function FC(t){return t&&"object"==typeof t}function IC(t){return FC(t)&&t.constructor===Object}var LC=function(){return(LC=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},NC=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},GC=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},jC={fills:["#f3622d","#fba71b","#57b757","#41a9c9","#4258c9","#9a42c8","#c84164","#888888"],strokes:["#aa4520","#b07513","#3d803d","#2d768d","#2e3e8d","#6c2e8c","#8c2d46","#5f5f5f"]},VC=Symbol("extends-axes-defaults"),BC=Symbol("extends-axes-label-defaults"),UC=Symbol("extends-axes-line-defaults"),HC=Symbol("extends-series-defaults"),zC=Symbol("override-series-label-defaults"),WC=Symbol("default-font"),KC=function(){function t(t){var e=(t=kC({},null!=t?t:{})).overrides,r=void 0===e?null:e,n=t.palette,o=void 0===n?null:n,i=this.createChartConfigPerChartType(this.getDefaults());if(r){var a=r.common,s=r.cartesian,l=r.polar,u=r.hierarchy,c=function(t,e,r){r&&(i[t]=kC(i[t],r),e.forEach((function(t){var e=t;i[e]=kC(i[e],r)})))};c("common",Object.keys(i),a),c("cartesian",gC.cartesianTypes,s),c("polar",gC.polarTypes,l),c("hierarchy",gC.hierarchyTypes,u),gC.seriesTypes.forEach((function(t){var e,n=t,o=r[n];o&&(o.series&&(o.series=((e={})[n]=o.series,e)),i[n]=kC(i[n],o))}))}this.palette=null!=o?o:this.getPalette(),this.config=Object.freeze(i)}return t.prototype.getPalette=function(){return jC},t.getAxisDefaults=function(){return{top:{},right:{},bottom:{},left:{},title:{enabled:!1,text:"Axis Title",fontStyle:void 0,fontWeight:"bold",fontSize:12,fontFamily:this.fontFamily,color:"rgb(70, 70, 70)"},label:{fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:this.fontFamily,padding:5,rotation:void 0,color:"rgb(87, 87, 87)",formatter:void 0,autoRotate:!1,avoidCollisions:!0},line:{width:1,color:"rgb(195, 195, 195)"},tick:{width:1,size:6,color:"rgb(195, 195, 195)"},gridStyle:[{stroke:"rgb(219, 219, 219)",lineDash:[4,2]}],crossLines:{enabled:!1,fill:"rgb(187,221,232)",stroke:"rgb(70,162,192)",strokeWidth:1,label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:this.fontFamily,padding:5,color:"rgb(87, 87, 87)",rotation:void 0}}}},t.getSeriesDefaults=function(){return{tooltip:{enabled:!0,renderer:void 0},visible:!0,showInLegend:!0,highlightStyle:{item:{fill:"yellow",fillOpacity:1},series:{dimOpacity:1},text:{color:"black"}},nodeClickRange:"exact"}},t.getBarSeriesDefaults=function(){return LC(LC({},this.getSeriesDefaults()),{fillOpacity:1,strokeOpacity:1,normalizedTo:void 0,strokeWidth:1,lineDash:[0],lineDashOffset:0,label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:this.fontFamily,color:"rgb(70, 70, 70)",formatter:void 0,placement:"inside"},shadow:{enabled:!1,color:"rgba(0, 0, 0, 0.5)",xOffset:3,yOffset:3,blur:5}})},t.getLineSeriesDefaults=function(){var t=this.getSeriesDefaults();return LC(LC({},t),{tooltip:LC(LC({},t.tooltip),{format:void 0,position:{type:"node"}})})},t.getAreaSeriesDefaults=function(){var t=this.getSeriesDefaults();return LC(LC({},t),{nodeClickRange:"nearest",tooltip:LC(LC({},t.tooltip),{position:{type:"node"}})})},t.getScatterSeriesDefaults=function(){var t=this.getSeriesDefaults();return LC(LC({},t),{tooltip:LC(LC({},t.tooltip),{position:{type:"node"}})})},t.getCartesianSeriesMarkerDefaults=function(){return{enabled:!0,shape:"circle",size:6,maxSize:30,strokeWidth:1,formatter:void 0}},t.getCaptionWrappingDefaults=function(){return"hyphenate"},t.getChartDefaults=function(){return{background:{visible:!0,fill:"white"},padding:{top:20,right:20,bottom:20,left:20},title:{enabled:!1,text:"Title",fontStyle:void 0,fontWeight:"bold",fontSize:16,fontFamily:this.fontFamily,color:"rgb(70, 70, 70)",wrapping:t.getCaptionWrappingDefaults()},subtitle:{enabled:!1,text:"Subtitle",fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:this.fontFamily,color:"rgb(140, 140, 140)",wrapping:t.getCaptionWrappingDefaults()},footnote:{enabled:!1,text:"Footnote",fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:this.fontFamily,color:"rgb(140, 140, 140)",spacing:30,wrapping:t.getCaptionWrappingDefaults()},legend:{position:"bottom",spacing:20,listeners:{},item:{paddingX:16,paddingY:8,marker:{shape:void 0,size:15,strokeWidth:1,padding:8},label:{color:"black",fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:this.fontFamily,formatter:void 0}},reverseOrder:!1,pagination:{marker:{size:12},activeStyle:{fill:"rgb(70, 70, 70)"},inactiveStyle:{fill:"rgb(219, 219, 219)"},highlightStyle:{fill:"rgb(70, 70, 70)"},label:{color:"rgb(70, 70, 70)"}}},tooltip:{enabled:!0,range:"nearest",delay:0},listeners:{}}},t.prototype.createChartConfigPerChartType=function(t){var e=this,r={cartesian:gC.cartesianTypes,polar:gC.polarTypes,hierarchy:gC.hierarchyTypes,groupedCategory:[]};return Object.entries(r).forEach((function(r){var n=NC(r,2),o=n[0],i=n[1],a=o,s=e.templateTheme(bC(a));i.forEach((function(e){var r=e;t[r]||(t[r]=kC({},t[a]),kC(t[r],s))}))})),t},t.prototype.getDefaults=function(){var e=this,r=kC({},t.defaults),n=function(t,r){var n=e.templateTheme(bC(t));return n.series=r.reduce((function(t,r){var n=DC(r);return n&&(t[r]=e.templateTheme(n)),t}),{}),"cartesian"!==t&&"polar"!==t||(n.axes=im.axesTypes.reduce((function(t,r){var n=function(t){var e;return null!==(e=am[t])&&void 0!==e?e:{}}(r);return n&&(t[r]=e.templateTheme(n)),t}),{})),n};return kC(r,{cartesian:n("cartesian",gC.cartesianTypes),groupedCategory:n("cartesian",gC.cartesianTypes),polar:n("polar",gC.polarTypes),hierarchy:n("hierarchy",gC.hierarchyTypes)})},t.prototype.templateTheme=function(t){var e=Mp([t]),r=this.getTemplateParameters(),n=r.extensions,o=r.properties;return Rp(e,(function(t,e){var r,i;if(e.__extends__){var a=e.__extends__,s=n.get(a);if(null==s)throw new Error("AG Charts - no template variable provided for: "+a);Object.keys(s).forEach((function(t){t in e||(e[t]=s[t])})),delete e.__extends__}if(e.__overrides__){a=e.__overrides__;var l=n.get(a);if(null==l)throw new Error("AG Charts - no template variable provided for: "+a);Object.assign(e,l),delete e.__overrides__}try{for(var u=GC(Object.entries(e)),c=u.next();!c.done;c=u.next()){var p=NC(c.value,2),d=p[0],h=p[1];o.has(h)&&(e[d]=o.get(h))}}catch(t){r={error:t}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}}),{}),e},t.prototype.getTemplateParameters=function(){var e=new Map;e.set(VC,t.getAxisDefaults()),e.set(BC,t.getAxisDefaults().label),e.set(UC,t.getAxisDefaults().line),e.set(HC,t.getSeriesDefaults()),e.set(zC,{});var r=new Map;return r.set(WC,t.fontFamily),{extensions:e,properties:r}},t.prototype.mergeWithParentDefaults=function(t,e){return kC(t,e)},t.fontFamily="Verdana, sans-serif",t.cartesianDefaults=LC(LC({},t.getChartDefaults()),{axes:{number:LC({},t.getAxisDefaults()),log:LC(LC({},t.getAxisDefaults()),{base:10}),category:LC(LC({},t.getAxisDefaults()),{groupPaddingInner:.1,label:LC(LC({},t.getAxisDefaults().label),{autoRotate:!0})}),groupedCategory:LC({},t.getAxisDefaults()),time:LC({},t.getAxisDefaults())},series:{column:LC({},t.getBarSeriesDefaults()),bar:LC({},t.getBarSeriesDefaults()),line:LC(LC({},t.getLineSeriesDefaults()),{title:void 0,strokeWidth:2,strokeOpacity:1,lineDash:[0],lineDashOffset:0,marker:LC(LC({},t.getCartesianSeriesMarkerDefaults()),{fillOpacity:1,strokeOpacity:1}),label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:t.fontFamily,color:"rgb(70, 70, 70)",formatter:void 0}}),scatter:LC(LC({},t.getScatterSeriesDefaults()),{sizeName:"Size",labelName:"Label",marker:LC({},t.getCartesianSeriesMarkerDefaults()),label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:t.fontFamily,color:"rgb(70, 70, 70)"}}),area:LC(LC({},t.getAreaSeriesDefaults()),{normalizedTo:void 0,fillOpacity:.8,strokeOpacity:1,strokeWidth:2,lineDash:[0],lineDashOffset:0,shadow:{enabled:!1,color:"rgba(0, 0, 0, 0.5)",xOffset:3,yOffset:3,blur:5},marker:LC(LC({},t.getCartesianSeriesMarkerDefaults()),{fillOpacity:1,strokeOpacity:1,enabled:!1}),label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:t.fontFamily,color:"rgb(70, 70, 70)",formatter:void 0}}),histogram:LC(LC({},t.getSeriesDefaults()),{strokeWidth:1,fillOpacity:1,strokeOpacity:1,lineDash:[0],lineDashOffset:0,areaPlot:!1,bins:void 0,aggregation:"sum",label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:t.fontFamily,color:"rgb(70, 70, 70)",formatter:void 0},shadow:{enabled:!0,color:"rgba(0, 0, 0, 0.5)",xOffset:0,yOffset:0,blur:5}})}}),t.polarDefaults=LC(LC({},t.getChartDefaults()),{series:{pie:LC(LC({},t.getSeriesDefaults()),{title:{enabled:!0,fontStyle:void 0,fontWeight:"bold",fontSize:14,fontFamily:t.fontFamily,color:"rgb(70, 70, 70)",spacing:0},radiusKey:void 0,radiusName:void 0,calloutLabelKey:void 0,calloutLabelName:void 0,sectorLabelKey:void 0,sectorLabelName:void 0,calloutLabel:{enabled:!0,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:t.fontFamily,color:"rgb(70, 70, 70)",offset:3,minAngle:0},sectorLabel:{enabled:!0,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:t.fontFamily,color:"rgb(70, 70, 70)",positionOffset:0,positionRatio:.5},calloutLine:{length:10,strokeWidth:2},fillOpacity:1,strokeOpacity:1,strokeWidth:1,lineDash:[0],lineDashOffset:0,rotation:0,outerRadiusOffset:0,innerRadiusOffset:0,shadow:{enabled:!1,color:"rgba(0, 0, 0, 0.5)",xOffset:3,yOffset:3,blur:5},innerLabels:{fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:t.fontFamily,color:"rgb(70, 70, 70)",margin:2}})}}),t.hierarchyDefaults=LC(LC({},t.getChartDefaults()),{series:{treemap:LC(LC({},t.getSeriesDefaults()),{showInLegend:!1,labelKey:"label",sizeKey:"size",colorKey:"color",colorDomain:[-5,5],colorRange:["#cb4b3f","#6acb64"],groupFill:"#272931",groupStroke:"black",groupStrokeWidth:1,tileStroke:"black",tileStrokeWidth:1,gradient:!0,tileShadow:{enabled:!1,color:"rgba(0, 0, 0, 0.5)",xOffset:3,yOffset:3,blur:5},labelShadow:{enabled:!0,color:"rgba(0, 0, 0, 0.4)",xOffset:1.5,yOffset:1.5,blur:5},highlightGroups:!0,nodePadding:2,nodeGap:0,title:{enabled:!0,color:"white",fontStyle:void 0,fontWeight:"bold",fontSize:12,fontFamily:"Verdana, sans-serif",padding:2},subtitle:{enabled:!0,color:"white",fontStyle:void 0,fontWeight:void 0,fontSize:9,fontFamily:"Verdana, sans-serif",padding:2},labels:{large:{enabled:!0,fontStyle:void 0,fontWeight:"bold",fontSize:18,fontFamily:"Verdana, sans-serif",color:"white",wrapping:"on-space"},medium:{enabled:!0,fontStyle:void 0,fontWeight:"bold",fontSize:14,fontFamily:"Verdana, sans-serif",color:"white",wrapping:"on-space"},small:{enabled:!0,fontStyle:void 0,fontWeight:"bold",fontSize:10,fontFamily:"Verdana, sans-serif",color:"white",wrapping:"on-space"},value:{style:{enabled:!0,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:"Verdana, sans-serif",color:"white"}}}})}}),t.defaults={cartesian:t.cartesianDefaults,groupedCategory:t.cartesianDefaults,polar:t.polarDefaults,hierarchy:t.hierarchyDefaults},t}(),XC=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),YC=function(){return(YC=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},qC=function(t){function e(e){return t.call(this,e)||this}return XC(e,t),e.prototype.getDefaults=function(){var r=this,n=e.fontColor,o=e.mutedFontColor,i={title:{color:n},label:{color:n},gridStyle:[{stroke:"rgb(88, 88, 88)",lineDash:[4,2]}]},a={label:{color:n}},s={axes:{number:YC({},i),category:YC({},i),time:YC({},i)}},l={background:{fill:"rgb(34, 38, 41)"},title:{color:n},subtitle:{color:o},legend:{item:{label:{color:n}},pagination:{activeStyle:{fill:n},inactiveStyle:{fill:o},highlightStyle:{fill:n},label:{color:n}}}},u=function(t){return t.reduce((function(t,e){var n=DC(e);return n&&(t[e]=r.templateTheme(n)),t}),{})};return this.mergeWithParentDefaults(t.prototype.getDefaults.call(this),{cartesian:YC(YC(YC({},l),s),{series:YC({line:YC({},a),bar:YC({},a),column:YC({},a),histogram:YC({},a)},u(gC.cartesianTypes))}),groupedCategory:YC(YC(YC({},l),s),{series:YC({bar:YC({},a),column:YC({},a),histogram:YC({},a)},u(gC.cartesianTypes))}),polar:YC(YC({},l),{series:YC({pie:{calloutLabel:{color:n},sectorLabel:{color:n},title:{color:n},innerLabels:{color:n}}},u(gC.polarTypes))}),hierarchy:YC(YC({},l),{series:YC({treemap:{tileStroke:"white",groupStroke:"white",title:{color:n},subtitle:{color:o},labels:{large:{color:n},medium:{color:n},small:{color:n},value:{style:{color:n}}}}},u(gC.hierarchyTypes))})})},e.prototype.getTemplateParameters=function(){var r=t.prototype.getTemplateParameters.call(this);return r.extensions.set(zC,e.seriesLabelDefaults.label),r},e.fontColor="rgb(200, 200, 200)",e.mutedFontColor="rgb(150, 150, 150)",e.seriesLabelDefaults={label:{color:e.fontColor}},e}(KC),ZC=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),JC={fills:["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4caf50","#8bc34a","#cddc39","#ffeb3b","#ffc107","#ff9800","#ff5722"],strokes:["#ab2f26","#a31545","#6d1b7b","#482980","#2c397f","#1769aa","#0276ab","#008494","#00695f","#357a38","#618834","#909a28","#b3a429","#b38705","#b36a00","#b33d18"]},$C=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ZC(e,t),e.prototype.getPalette=function(){return JC},e}(KC),QC=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),tS={fills:["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4caf50","#8bc34a","#cddc39","#ffeb3b","#ffc107","#ff9800","#ff5722"],strokes:["#ab2f26","#a31545","#6d1b7b","#482980","#2c397f","#1769aa","#0276ab","#008494","#00695f","#357a38","#618834","#909a28","#b3a429","#b38705","#b36a00","#b33d18"]},eS=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return QC(e,t),e.prototype.getPalette=function(){return tS},e}(qC),rS=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),nS={fills:["#c16068","#a2bf8a","#ebcc87","#80a0c3","#b58dae","#85c0d1"],strokes:["#874349","#718661","#a48f5f","#5a7088","#7f637a","#5d8692"]},oS=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return rS(e,t),e.prototype.getPalette=function(){return nS},e}(KC),iS=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),aS={fills:["#c16068","#a2bf8a","#ebcc87","#80a0c3","#b58dae","#85c0d1"],strokes:["#874349","#718661","#a48f5f","#5a7088","#7f637a","#5d8692"]},sS=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return iS(e,t),e.prototype.getPalette=function(){return aS},e}(qC),lS=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),uS={fills:["#febe76","#ff7979","#badc58","#f9ca23","#f0932b","#eb4c4b","#6ab04c","#7ed6df","#e056fd","#686de0"],strokes:["#b28553","#b35555","#829a3e","#ae8d19","#a8671e","#a43535","#4a7b35","#58969c","#9d3cb1","#494c9d"]},cS=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return lS(e,t),e.prototype.getPalette=function(){return uS},e}(KC),pS=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),dS={fills:["#febe76","#ff7979","#badc58","#f9ca23","#f0932b","#eb4c4b","#6ab04c","#7ed6df","#e056fd","#686de0"],strokes:["#b28553","#b35555","#829a3e","#ae8d19","#a8671e","#a43535","#4a7b35","#58969c","#9d3cb1","#494c9d"]},hS=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return pS(e,t),e.prototype.getPalette=function(){return dS},e}(qC),fS=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),vS={fills:["#5BC0EB","#FDE74C","#9BC53D","#E55934","#FA7921","#fa3081"],strokes:["#4086a4","#b1a235","#6c8a2b","#a03e24","#af5517","#af225a"]},yS=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return fS(e,t),e.prototype.getPalette=function(){return vS},e}(KC),gS=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),mS={fills:["#5BC0EB","#FDE74C","#9BC53D","#E55934","#FA7921","#fa3081"],strokes:["#4086a4","#b1a235","#6c8a2b","#a03e24","#af5517","#af225a"]},bS=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return gS(e,t),e.prototype.getPalette=function(){return mS},e}(qC),CS=function(){return(CS=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},SS=function(){return new KC},wS=function(){return new qC},xS={undefined:SS,null:SS,"ag-default":SS,"ag-material":function(){return new $C},"ag-pastel":function(){return new oS},"ag-solar":function(){return new cS},"ag-vivid":function(){return new yS}},OS=CS(CS({},{undefined:wS,null:wS,"ag-default-dark":wS,"ag-material-dark":function(){return new eS},"ag-pastel-dark":function(){return new sS},"ag-solar-dark":function(){return new hS},"ag-vivid-dark":function(){return new bS}}),xS);function ES(t){var e;if(t instanceof KC)return t;var r=OS[t];if(r)return r();t=t;for(var n,o=[];"object"==typeof t;)o.push(null!==(e=t.overrides)&&void 0!==e?e:{}),t.palette&&null==n&&(n=t.palette),t=t.baseTheme;o.reverse();var i=CS({baseTheme:t,overrides:Mp(o)},n?{palette:n}:{});return i.baseTheme||i.overrides?new(ES(i.baseTheme).constructor)(i):SS()}var TS=function(){return(TS=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},PS=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},DS=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},AS=function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t},MS=["bar","column","area"],_S=["bar","column"];function RS(t,e){var r,n,o=[],i=function(t){var e,r,n,o,i,a,s,l,u,c,p={},d={},h={},f=[];try{for(var v=PS(t),y=v.next();!y.done;y=v.next()){var g=y.value,m=null!==(i=g.type)&&void 0!==i?i:"line",b=MS.includes(m),C=_S.includes(m);if(b||C){var S=g,w=S.stacked,x=S.stackGroup,O=S.grouped,E=void 0===O?void 0:O,T=S.xKey,P=null!=x||!0===w;null!==(a=h[m])&&void 0!==a||(h[m]=!1),h[m]||(h[m]=P);var D=!0===E,A=[null!=x?x:!0===w?"stacked":void 0,D?"grouped":void 0].filter((function(t){return null!=t})).join("-");A||(A="default-ag-charts-group");var M=m+"-"+T+"-"+A;if(P&&b)0===(_=null!==(s=d[M])&&void 0!==s?s:d[M]={type:"stack",opts:[]}).opts.length&&f.push(_),_.opts.push(g);else if(D&&C){var _;0===(_=null!==(l=p[M])&&void 0!==l?l:p[M]={type:"group",opts:[]}).opts.length&&f.push(_),_.opts.push(g)}else f.push({type:"ungrouped",opts:[g]})}else f.push({type:"ungrouped",opts:[g]})}}catch(t){e={error:t}}finally{try{y&&!y.done&&(r=v.return)&&r.call(v)}finally{if(e)throw e.error}}if(!Object.values(h).some((function(t){return t})))return f;try{for(var R=PS(Object.entries(p)),k=R.next();!k.done;k=R.next()){var F=DS(k.value,2)[1];!0===h[m=null!==(c=null===(u=F.opts[0])||void 0===u?void 0:u.type)&&void 0!==c?c:"line"]&&(F.type="stack")}}catch(t){n={error:t}}finally{try{k&&!k.done&&(o=R.return)&&o.call(R)}finally{if(n)throw n.error}}return f}(e.map((function(t){var e;return"bar"!==t.type&&"column"!==t.type||null==t.yKey||t.stacked?t:TS(TS({},t),{grouped:null===(e=t.grouped)||void 0===e||e})}))),a=i.reduce((function(t,e){var r,n;if("ungrouped"===e.type)return t;var o=null!==(r=e.opts[0].type)&&void 0!==r?r:"line";return null!==(n=t[o])&&void 0!==n||(t[o]=0),t[o]+="stack"===e.type?1:e.opts.length,t}),{}),s={},l=function(t){var e,r,n,o,i,l,u,c,p=0,d=null!==(u=t.opts[0].type)&&void 0!==u?u:"line";if(null!==(c=s[d])&&void 0!==c||(s[d]=0),"stack"===t.type){try{for(var h=PS(t.opts),f=h.next();!f.done;f=h.next()){f.value.seriesGrouping={groupIndex:s[d],groupCount:a[d],stackIndex:p++,stackCount:t.opts.length}}}catch(t){e={error:t}}finally{try{f&&!f.done&&(r=h.return)&&r.call(h)}finally{if(e)throw e.error}}s[d]++}else if("group"===t.type)try{for(var v=PS(t.opts),y=v.next();!y.done;y=v.next()){y.value.seriesGrouping={groupIndex:s[d],groupCount:a[d],stackIndex:0,stackCount:0},s[d]++}}catch(t){n={error:t}}finally{try{y&&!y.done&&(o=v.return)&&o.call(v)}finally{if(n)throw n.error}}else try{for(var g=PS(t.opts),m=g.next();!m.done;m=g.next()){m.value.seriesGrouping=void 0}}catch(t){i={error:t}}finally{try{m&&!m.done&&(l=g.return)&&l.call(g)}finally{if(i)throw i.error}}return t.opts};[!0,"opts"].includes(yl("agChartsDebug"))&&sl.debug("processSeriesOptions() - series grouping: ",i);try{for(var u=PS(i),c=u.next();!c.done;c=u.next()){var p=c.value;switch(p.opts[0].type){case"column":case"bar":case"area":o.push.apply(o,AS([],DS(l(p))));break;case"line":default:p.opts.length>1&&sl.warn("unexpected grouping of series type: "+p.opts[0].type),o.push.apply(o,AS([],DS(p.opts)))}}}catch(t){r={error:t}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}return o}var kS=function(){return(kS=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},FS=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},IS=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},LS=function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t};function NS(t){var e,r,n,o;return null!==(o=null!==(e=t.type)&&void 0!==e?e:null===(n=null===(r=t.series)||void 0===r?void 0:r[0])||void 0===n?void 0:n.type)&&void 0!==o?o:"line"}function GS(t){var e=NS(t);return null==e||("cartesian"===e?(sl.warnOnce("type '"+e+"' is deprecated, use a series type instead"),!0):gC.isCartesian(e))}function jS(t){var e=NS(t);return null!=e&&("hierarchy"===e?(sl.warnOnce("type '"+e+"' is deprecated, use a series type instead"),!0):gC.isHierarchy(e))}function VS(t){var e=NS(t);return null!=e&&("polar"===e?(sl.warnOnce("type '"+e+"' is deprecated, use a series type instead"),!0):gC.isPolar(e))}function BS(t){return null!=t&&gC.has(t)}function US(t,e,r){for(var n=[],o=0;o<r;o++)n.push(e[(o+t.colourIndex)%e.length]);return n}var HS={avoidDeepClone:["data"]};function zS(t,e){var r,n,o,i,a,s,l,u,c,p,d=Mp([e,t],HS);!function(t){Object.entries({yKeys:"yKey",yNames:"yName"}).forEach((function(e){var r,n=IS(e,2),o=n[0],i=n[1];(null===(r=t.series)||void 0===r?void 0:r.some((function(t){return null!=t[o]})))&&sl.warnOnce("property [series."+o+"] is deprecated, please use [series."+i+"] and multiple series instead.")}))}(d);var h=d.type,f=NS(d),v=null!==(s=null===(a=d.tooltip)||void 0===a?void 0:a.position)&&void 0!==s?s:{},y=function(t){if(null!=t&&!BS(t)&&!PC(t))throw new Error("AG Charts - unknown series type: "+t+"; expected one of: "+gC.seriesTypes)};y(f);try{for(var g=FS(null!==(l=d.series)&&void 0!==l?l:[]),m=g.next();!m.done;m=g.next()){var b=m.value.type;null!=b&&y(b)}}catch(t){r={error:t}}finally{try{m&&!m.done&&(n=g.return)&&n.call(g)}finally{if(r)throw r.error}}d=kS(kS({},d),{type:f});var C="line";GS(d)?C="line":jS(d)?C="treemap":VS(d)&&(C="pie");var S={},w=PC(f);w?S=w:"bar"===f?S=_C:"scatter"===f||"histogram"===f?S=RC:GS(d)&&(S=MC),function(t){Rp(t,(function(t,e){"enabled"in e&&!1===e.enabled&&Object.entries(e).forEach((function(t){var r=IS(t,1)[0];"enabled"!==r&&delete e[r]}))}),{skip:["data","theme"]})}(d);var x=function(t,e){var r=function(t){var e,r,n=ES(t.theme),o=n.config[null!==(e=NS(t))&&void 0!==e?e:"cartesian"],i=Object.entries(n.config).reduce((function(t,e){var r=IS(e,2),n=r[0],o=r[1].series;return t[n]=null==o?void 0:o[n],t}),{});return{theme:n,axesThemes:null!==(r=o.axes)&&void 0!==r?r:{},seriesThemes:i,cleanedTheme:Mp([o,{axes:Dp,series:Dp}])}}(e),n=r.theme,o=r.cleanedTheme,i=r.axesThemes,a=r.seriesThemes,s={colourIndex:0,palette:n.palette},l=Mp([t,o,e],HS);return{context:s,mergedOptions:l,axesThemes:i,seriesThemes:a}}(S,d),O=x.context,E=x.mergedOptions,T=x.axesThemes,P=x.seriesThemes;E.series=RS(0,(null!==(u=E.series)&&void 0!==u?u:[]).map((function(t){var e=C;t.type?e=t.type:BS(h)&&(e=h);var r=function(t,e,r,n){var o,i,a=Mp([kS({},n),null===(o=t.tooltip)||void 0===o?void 0:o.position],HS);return Mp([null!==(i=r[e])&&void 0!==i?i:{},kS(kS({},t),{type:e,tooltip:kS(kS({},t.tooltip),{position:a})})],HS)}(t,e,P,v);return"pie"===e&&function(t,e,r){Array.isArray(e.innerLabels)?r.innerLabels=e.innerLabels.map((function(e){return Mp([t.innerLabels,e])})):r.innerLabels=Dp}(P.pie,t,r),r}))).map((function(t){return function(t,e){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var o=KS(t,e),i={stacked:Dp,grouped:Dp};return Mp(LS(LS([],IS(r)),[o,e,i]),HS)}(O,t)}));var D=function(t){var e,r=null!=(e=t)&&im.has(e);return r||sl.warnOnce("AG Charts - unknown axis type: "+t+"; expected one of: "+im.axesTypes+", ignoring."),r};if("axes"in E){var A=!0;try{for(var M=FS(null!==(c=E.axes)&&void 0!==c?c:[]),_=M.next();!_.done;_=M.next()){D(_.value.type)||(A=!1)}}catch(t){o={error:t}}finally{try{_&&!_.done&&(i=M.return)&&i.call(M)}finally{if(o)throw o.error}}E.axes=A?null===(p=E.axes)||void 0===p?void 0:p.map((function(t){var e,r,n=t.type;return function(t,e){var r={top:Dp,bottom:Dp,left:Dp,right:Dp};if(t.crossLines){Array.isArray(t.crossLines)||(sl.warn("axis[].crossLines should be an array."),t.crossLines=[]);var n=e.crossLines;t.crossLines=t.crossLines.map((function(t){return Mp([n,t])}))}return Mp([e,{crossLines:Dp},t,r],HS)}(t,Mp([T[n],null!==(r=T[n][null!==(e=t.position)&&void 0!==e?e:"unknown"])&&void 0!==r?r:{}]))})):S.axes,function(t,e){var r,n,o,i;if(void 0!==(null===(r=t.legend)||void 0===r?void 0:r.enabled)||void 0!==(null===(n=e.legend)||void 0===n?void 0:n.enabled))return;if(null!==(o=e.legend)&&void 0!==o||(e.legend={}),(null!==(i=t.series)&&void 0!==i?i:[]).length>1)return void(e.legend.enabled=!0);e.legend.enabled=!1}(d,E)}return function(t,e){Rp(t,(function(t,e,r){if(r){var n=r._enabledFromTheme;null!=n&&delete r._enabledFromTheme,"enabled"in r&&(n||null==e.enabled&&(r.enabled=!0))}}),{skip:["data","theme"]},e),Rp(e,(function(t,e){null!=e._enabledFromTheme&&delete e._enabledFromTheme}),{skip:["data","theme"]})}(d,E),E}AC("pie",(function(t){return(0,t.takeColors)(t.colorsCount)}));var WS=function(t){var e=(0,t.takeColors)(1);return{fill:IS(e.fills,1)[0],stroke:IS(e.strokes,1)[0]}};function KS(t,e){var r,n,o=(n=e.type,OC[n]);if(!o)return{};var i=t.palette,a=i.fills,s=i.strokes;return o({seriesCount:function t(e){var r,n,o=0;try{for(var i=FS(e),a=i.next();!a.done;a=i.next()){var s=a.value;s instanceof Array&&(o+=t(s)),null!=s&&o++}}catch(t){r={error:t}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return o}(null!==(r=e.yKeys)&&void 0!==r?r:[])||1,colorsCount:Math.max(a.length,s.length),takeColors:function(e){var r={fills:US(t,a,e),strokes:US(t,s,e)};return t.colourIndex+=e,r}})}AC("area",WS),AC("bar",WS),AC("column",WS),AC("histogram",WS),AC("scatter",(function(t){var e=WS(t);return{marker:{fill:e.fill,stroke:e.stroke}}})),AC("line",(function(t){var e=WS(t),r=e.fill;return{stroke:r,marker:{fill:r,stroke:e.stroke}}}));var XS=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},YS=function(){function t(){this.destroyFns=[]}return t.prototype.destroy=function(){var t,e;try{for(var r=XS(this.destroyFns),n=r.next();!n.done;n=r.next()){(0,n.value)()}}catch(e){t={error:e}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}},t}(),qS=[];function ZS(t){var e=qS.find((function(e){return t.type===e.type&&t.optionsKey===e.optionsKey&&t.identifier===e.identifier}));if(e){if("enterprise"===t.packageType&&"community"===e.packageType){var r=qS.indexOf(e);qS.splice(r,1,t)}}else qS.push(t)}var JS=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),$S=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},QS=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._fill="#f2f2f2",e._stroke="#999999",e._strokeWidth=1,e._lineCap="square",e._centerX=0,e._centerY=0,e._width=8,e._gripLineGap=2,e._gripLineLength=8,e._height=16,e}return JS(e,t),Object.defineProperty(e.prototype,"centerX",{get:function(){return this._centerX},set:function(t){this._centerX!==t&&(this._centerX=t,this.dirtyPath=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"centerY",{get:function(){return this._centerY},set:function(t){this._centerY!==t&&(this._centerY=t,this.dirtyPath=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){this._width!==t&&(this._width=t,this.dirtyPath=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"gripLineGap",{get:function(){return this._gripLineGap},set:function(t){this._gripLineGap!==t&&(this._gripLineGap=t,this.dirtyPath=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"gripLineLength",{get:function(){return this._gripLineLength},set:function(t){this._gripLineLength!==t&&(this._gripLineLength=t,this.dirtyPath=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){this._height!==t&&(this._height=t,this.dirtyPath=!0)},enumerable:!1,configurable:!0}),e.prototype.computeBBox=function(){var t=this.centerX,e=this.centerY,r=this.width,n=this.height;return new Ns(t-r/2,e-n/2,r,n)},e.prototype.isPointInPath=function(t,e){var r=this.transformPoint(t,e);return this.computeBBox().containsPoint(r.x,r.y)},e.prototype.updatePath=function(){var t=this,e=t.path,r=t.centerX,n=t.centerY,o=t.width,i=t.height;e.clear();var a=r-o/2,s=n-i/2,l=this.align(a),u=this.align(s),c=l+this.align(a,o),p=u+this.align(s,i);e.moveTo(l,u),e.lineTo(c,u),e.lineTo(c,p),e.lineTo(l,p),e.lineTo(l,u);var d=this.gripLineGap/2,h=this.gripLineLength/2;e.moveTo(this.align(r-d),this.align(n-h)),e.lineTo(this.align(r-d),this.align(n+h)),e.moveTo(this.align(r+d),this.align(n-h)),e.lineTo(this.align(r+d),this.align(n+h))},e.className="RangeHandle",$S([nu(xu)],e.prototype,"_fill",void 0),$S([nu(xu)],e.prototype,"_stroke",void 0),$S([nu(Pu(0))],e.prototype,"_strokeWidth",void 0),$S([nu(Hu)],e.prototype,"_lineCap",void 0),$S([nu(Pu(0))],e.prototype,"_width",void 0),$S([nu(Pu(0))],e.prototype,"_gripLineGap",void 0),$S([nu(Pu(0))],e.prototype,"_gripLineLength",void 0),$S([nu(Pu(0))],e.prototype,"_height",void 0),e}(Xd),tw=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ew=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},rw=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._stroke="#999999",e._strokeWidth=1,e._fill="#999999",e._fillOpacity=.2,e._lineCap="square",e._x=0,e._y=0,e._width=200,e._height=30,e.minRange=.05,e._min=0,e._max=1,e}return tw(e,t),Object.defineProperty(e.prototype,"x",{get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.dirtyPath=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.dirtyPath=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){this._width!==t&&(this._width=t,this.dirtyPath=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){this._height!==t&&(this._height=t,this.dirtyPath=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"min",{get:function(){return this._min},set:function(t){var e;t=Math.min(Math.max(t,0),this.max-this.minRange),isNaN(t)||this._min!==t&&(this._min=t,this.dirtyPath=!0,null===(e=this.onRangeChange)||void 0===e||e.call(this))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"max",{get:function(){return this._max},set:function(t){var e;t=Math.max(Math.min(t,1),this.min+this.minRange),isNaN(t)||this._max!==t&&(this._max=t,this.dirtyPath=!0,null===(e=this.onRangeChange)||void 0===e||e.call(this))},enumerable:!1,configurable:!0}),e.prototype.computeBBox=function(){var t=this.x,e=this.y,r=this.width,n=this.height;return new Ns(t,e,r,n)},e.prototype.computeVisibleRangeBBox=function(){var t=this,e=t.x,r=t.y,n=t.width,o=t.height,i=t.min,a=t.max,s=e+n*i;return new Ns(s,r,e+n*a-s,o)},e.prototype.updatePath=function(){var t=this,e=t.path,r=t.x,n=t.y,o=t.width,i=t.height,a=t.min,s=t.max;e.clear();var l=this.align(r),u=this.align(n),c=l+this.align(r,o),p=u+this.align(n,i);e.moveTo(l,u),e.lineTo(c,u),e.lineTo(c,p),e.lineTo(l,p),e.lineTo(l,u);var d=this.align(r+o*a),h=this.align(r+o*s);e.moveTo(d,u),e.lineTo(d,p),e.lineTo(h,p),e.lineTo(h,u),e.lineTo(d,u)},e.className="RangeMask",ew([nu(xu)],e.prototype,"_stroke",void 0),ew([nu(Pu(0))],e.prototype,"_strokeWidth",void 0),ew([nu(xu)],e.prototype,"_fill",void 0),ew([nu(Pu(0,1))],e.prototype,"_fillOpacity",void 0),ew([nu(Hu)],e.prototype,"_lineCap",void 0),ew([nu(Pu(0))],e.prototype,"_width",void 0),ew([nu(Pu(0))],e.prototype,"_height",void 0),ew([nu(Pu())],e.prototype,"_min",void 0),ew([nu(Pu())],e.prototype,"_max",void 0),e}(Xd),nw=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ow=function(){return(ow=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},iw=function(t){function e(){var r=t.call(this,{name:"rangeSelectorGroup"})||this;return r.minHandle=new QS,r.maxHandle=new QS,r.mask=function(){var t=e.defaults,n=t.x,o=t.y,i=t.width,a=t.height,s=t.min,l=t.max,u=new rw;u.x=n,u.y=o,u.width=i,u.height=a,u.min=s,u.max=l;var c=r,p=c.minHandle,d=c.maxHandle;return p.centerX=n,d.centerX=n+i,p.centerY=d.centerY=o+a/2,r.append([u,p,d]),u.onRangeChange=function(){var t;r.updateHandles(),null===(t=r.onRangeChange)||void 0===t||t.call(r)},u}(),r._x=e.defaults.x,r._y=e.defaults.y,r._width=e.defaults.width,r._height=e.defaults.height,r._min=e.defaults.min,r._max=e.defaults.max,r.isContainerNode=!0,r}return nw(e,t),Object.defineProperty(e.prototype,"x",{get:function(){return this.mask.x},set:function(t){this.mask.x=t,this.updateHandles()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.mask.y},set:function(t){this.mask.y=t,this.updateHandles()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.mask.width},set:function(t){this.mask.width=t,this.updateHandles()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.mask.height},set:function(t){this.mask.height=t,this.updateHandles()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"min",{get:function(){return this.mask.min},set:function(t){this.mask.min=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"max",{get:function(){return this.mask.max},set:function(t){this.mask.max=t},enumerable:!1,configurable:!0}),e.prototype.updateHandles=function(){var t=this,e=t.minHandle,r=t.maxHandle,n=t.x,o=t.y,i=t.width,a=t.height,s=t.mask;e.centerX=n+i*s.min,r.centerX=n+i*s.max,e.centerY=r.centerY=o+a/2},e.prototype.computeBBox=function(){return this.mask.computeBBox()},e.prototype.computeVisibleRangeBBox=function(){return this.mask.computeVisibleRangeBBox()},e.prototype.render=function(t){var e=t.ctx,r=t.forceRender,n=t.stats;if(this.dirty!==ks.NONE||r){this.computeTransformMatrix(),this.matrix.toContext(e);[this.mask,this.minHandle,this.maxHandle].forEach((function(n){n.visible&&(r||n.dirty>ks.NONE)&&(e.save(),n.render(ow(ow({},t),{ctx:e,forceRender:r})),e.restore())})),this.markClean({force:!0}),n&&n.nodesRendered++}else n&&n.nodesSkipped++},e.className="Range",e.defaults={x:0,y:0,width:200,height:30,min:0,max:1},e}(fl),aw=function(){function t(t){this.rm=t}return Object.defineProperty(t.prototype,"fill",{get:function(){return this.rm.fill},set:function(t){this.rm.fill=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stroke",{get:function(){return this.rm.stroke},set:function(t){this.rm.stroke=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"strokeWidth",{get:function(){return this.rm.strokeWidth},set:function(t){this.rm.strokeWidth=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fillOpacity",{get:function(){return this.rm.fillOpacity},set:function(t){this.rm.fillOpacity=t},enumerable:!1,configurable:!0}),t}(),sw=function(){function t(t){this.rh=t}return Object.defineProperty(t.prototype,"fill",{get:function(){return this.rh.fill},set:function(t){this.rh.fill=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stroke",{get:function(){return this.rh.stroke},set:function(t){this.rh.stroke=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"strokeWidth",{get:function(){return this.rh.strokeWidth},set:function(t){this.rh.strokeWidth=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.rh.width},set:function(t){this.rh.width=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.rh.height},set:function(t){this.rh.height=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"gripLineGap",{get:function(){return this.rh.gripLineGap},set:function(t){this.rh.gripLineGap=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"gripLineLength",{get:function(){return this.rh.gripLineLength},set:function(t){this.rh.gripLineLength=t},enumerable:!1,configurable:!0}),t}(),lw=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),uw=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a};ZS({type:"root",optionsKey:"navigator",packageType:"community",chartTypes:["cartesian"],instanceConstructor:function(t){function e(e){var r,n=t.call(this)||this;return n.ctx=e,n.rs=new iw,n.mask=new aw(n.rs.mask),n.minHandle=new sw(n.rs.minHandle),n.maxHandle=new sw(n.rs.maxHandle),n.minHandleDragging=!1,n.maxHandleDragging=!1,n.panHandleOffset=NaN,n._enabled=!1,n.margin=10,n._visible=!0,n.rs.onRangeChange=function(){return n.ctx.zoomManager.updateZoom("navigator",{x:{min:n.rs.min,max:n.rs.max}})},[e.interactionManager.addListener("drag-start",(function(t){return n.onDragStart(t)})),e.interactionManager.addListener("drag",(function(t){return n.onDrag(t)})),e.interactionManager.addListener("hover",(function(t){return n.onDrag(t)})),e.interactionManager.addListener("drag-end",(function(){return n.onDragStop()}))].forEach((function(t){return n.destroyFns.push((function(){return e.interactionManager.removeListener(t)}))})),[e.layoutService.addListener("before-series",(function(t){return n.layout(t)})),e.layoutService.addListener("layout-complete",(function(t){return n.layoutComplete(t)}))].forEach((function(t){return n.destroyFns.push((function(){return e.layoutService.removeListener(t)}))})),null===(r=e.scene.root)||void 0===r||r.appendChild(n.rs),n.destroyFns.push((function(){var t;return null===(t=e.scene.root)||void 0===t?void 0:t.removeChild(n.rs)})),n.destroyFns.push((function(){return n.ctx.zoomManager.updateZoom("navigator")})),n.updateGroupVisibility(),n}return lw(e,t),Object.defineProperty(e.prototype,"enabled",{get:function(){return this._enabled},set:function(t){this._enabled=t,this.updateGroupVisibility()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.rs.width},set:function(t){this.rs.width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.rs.height},set:function(t){this.rs.height=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"min",{get:function(){return this.rs.min},set:function(t){this.rs.min=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"max",{get:function(){return this.rs.max},set:function(t){this.rs.max=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"visible",{get:function(){return this._visible},set:function(t){this._visible=t,this.updateGroupVisibility()},enumerable:!1,configurable:!0}),e.prototype.updateGroupVisibility=function(){var t=this.enabled&&this.visible;this.rs.visible=t,t?this.ctx.zoomManager.updateZoom("navigator",{x:{min:this.rs.min,max:this.rs.max}}):this.ctx.zoomManager.updateZoom("navigator")},e.prototype.layout=function(t){var e=t.shrinkRect;if(this.enabled){var r=this.rs.height+this.margin;e.shrink(r,"bottom"),this.rs.y=e.y+e.height+this.margin}return{shrinkRect:e}},e.prototype.layoutComplete=function(t){var e=t.series,r=e.rect,n=e.visible;this.enabled&&n&&(this.rs.x=r.x,this.rs.width=r.width),this.visible=n},e.prototype.onDragStart=function(t){if(this.enabled){var e=t.offsetX,r=t.offsetY,n=this.rs,o=n.minHandle,i=n.maxHandle,a=n.x,s=n.width,l=n.min,u=n.computeVisibleRangeBBox();this.minHandleDragging||this.maxHandleDragging||(o.containsPoint(e,r)?this.minHandleDragging=!0:i.containsPoint(e,r)?this.maxHandleDragging=!0:u.containsPoint(e,r)&&(this.panHandleOffset=(e-a)/s-l))}},e.prototype.onDrag=function(t){if(this.enabled){var e=this.rs,r=this.panHandleOffset,n=e.x,o=e.y,i=e.width,a=e.height,s=e.minHandle,l=e.maxHandle,u=t.offsetX,c=t.offsetY,p=n+i*e.min,d=n+i*e.max,h=new Ns(p,o,d-p,a),f=function(){return Math.min(Math.max((u-n)/i,0),1)};if(s.containsPoint(u,c)||l.containsPoint(u,c)?this.ctx.cursorManager.updateCursor("navigator","ew-resize"):h.containsPoint(u,c)?this.ctx.cursorManager.updateCursor("navigator","grab"):this.ctx.cursorManager.updateCursor("navigator"),this.minHandleDragging)e.min=f();else if(this.maxHandleDragging)e.max=f();else if(!isNaN(r)){var v=e.max-e.min,y=Math.min(f()-r,1-v);y<=e.min?(e.min=y,e.max=e.min+v):(e.max=y+v,e.min=e.max-v)}}},e.prototype.onDragStop=function(){this.stopHandleDragging()},e.prototype.stopHandleDragging=function(){this.minHandleDragging=this.maxHandleDragging=!1,this.panHandleOffset=NaN},uw([nu(fu)],e.prototype,"_enabled",void 0),uw([nu(Pu(0))],e.prototype,"margin",void 0),e}(YS),themeTemplate:{navigator:{enabled:!1,height:30,mask:{fill:"#999999",stroke:"#999999",strokeWidth:1,fillOpacity:.2},minHandle:{fill:"#f2f2f2",stroke:"#999999",strokeWidth:1,width:8,height:16,gripLineGap:2,gripLineLength:8},maxHandle:{fill:"#f2f2f2",stroke:"#999999",strokeWidth:1,width:8,height:16,gripLineGap:2,gripLineLength:8}}}});var cw=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),pw=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a};ZS({type:"root",optionsKey:"background",packageType:"community",chartTypes:["cartesian","polar","hierarchy"],instanceConstructor:function(t){function e(e){var r,n=t.call(this)||this;n.onLayoutComplete=function(t){var e=t.chart,r=e.width,o=e.height;n.rectNode.width=r,n.rectNode.height=o},n.node=new fl({name:"background"}),n.node.zIndex=Ku.SERIES_BACKGROUND_ZINDEX,n.rectNode=new Ym,n.node.appendChild(n.rectNode),n.fill="white",n.visible=!0,null===(r=e.scene.root)||void 0===r||r.appendChild(n.node),n.destroyFns.push((function(){var t;return null===(t=e.scene.root)||void 0===t?void 0:t.removeChild(n.node)}));var o=e.layoutService.addListener("layout-complete",n.onLayoutComplete);return n.destroyFns.push((function(){return e.layoutService.removeListener(o)})),n}return cw(e,t),pw([nu(fu),jc("node","visible")],e.prototype,"visible",void 0),pw([nu(Ou),jc("rectNode","fill")],e.prototype,"fill",void 0),e}(YS)});var dw=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};var hw=function(){return(hw=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},fw=function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{l(n.next(t))}catch(t){i(t)}}function s(t){try{l(n.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}l((n=n.apply(t,e||[])).next())}))},vw=function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},yw=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},gw=function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t},mw=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function bw(t){if(GS(t))return"cartesian";if(VS(t))return"polar";if(jS(t))return"hierarchy";throw new Error("AG Chart - unknown type of chart for options with type: "+t.type)}var Cw=function(){function t(){}return t.create=function(t){return ww.createOrUpdate(t)},t.update=function(t,e){if(!Sw.isInstance(t))throw new Error("AG Charts - invalid chart reference passed");ww.createOrUpdate(e,t)},t.updateDelta=function(t,e){if(!Sw.isInstance(t))throw new Error("AG Charts - invalid chart reference passed");return ww.updateUserDelta(t,e)},t.download=function(t,e){if(!(t instanceof Sw))throw new Error("AG Charts - invalid chart reference passed");return ww.download(t,e)},t.getImageDataURL=function(t,e){if(!(t instanceof Sw))throw new Error("AG Charts - invalid chart reference passed");return ww.getImageDataURL(t,e)},t}(),Sw=function(){function t(t){this.chart=t}return t.isInstance=function(e){var r,n;if(e instanceof t)return!0;if("AgChartInstanceProxy"===(null===(r=e.constructor)||void 0===r?void 0:r.name)&&null!=e.chart)return!0;var o=Object.keys(null===(n=e.constructor)||void 0===n?void 0:n.prototype);return!(!Object.keys(t.prototype).every((function(t){return o.includes(t)}))||null==e.chart)},t.prototype.getOptions=function(){return this.chart.getOptions()},t.prototype.destroy=function(){this.chart.destroy()},t}(),ww=function(){function t(){}return t.initialiseModules=function(){t.initialised||(!function(){var t,e,r,n,o,i;try{for(var a=dw(qS),s=a.next();!s.done;s=a.next()){var l=s.value;if(null!=Oy.constructors&&null!=l.optionConstructors&&Object.assign(Oy.constructors,l.optionConstructors),"root"===l.type&&l.themeTemplate)try{for(var u=(r=void 0,dw(l.chartTypes)),c=u.next();!c.done;c=u.next()){mC(c.value,l.themeTemplate)}}catch(t){r={error:t}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}if("series"===l.type){if(l.chartTypes.length>1)throw new Error("AG Charts - Module definition error: "+l.identifier);EC(l.identifier,l.chartTypes[0],l.instanceConstructor,l.seriesDefaults,l.themeTemplate,l.paletteFactory)}if("axis-option"===l.type&&l.themeTemplate)try{for(var p=(o=void 0,dw(l.axisTypes)),d=p.next();!d.done;d=p.next()){sm(d.value,l.themeTemplate)}}catch(t){o={error:t}}finally{try{d&&!d.done&&(i=p.return)&&i.call(p)}finally{if(o)throw o.error}}"axis"===l.type&&(nm(l.identifier,l.instanceConstructor),l.themeTemplate&&sm(l.identifier,l.themeTemplate)),"legend"===l.type&&Lh(l.identifier,l.instanceConstructor)}}catch(e){t={error:e}}finally{try{s&&!s.done&&(e=a.return)&&e.call(a)}finally{if(t)throw t.error}}}(),t.initialised=!0)},t.createOrUpdate=function(e,r){var n=this;t.initialiseModules(),xw(">>> AgChartV2.createOrUpdate() user options",e);var o={};!0===t.DEBUG()&&(o.debug=!0);var i=e.overrideDevicePixelRatio;delete e.overrideDevicePixelRatio;var a=zS(e,o),s=null==r?void 0:r.chart;null!=s&&bw(e)===bw(s.processedOptions)||(s=t.createChartInstance(a,i,s)),null==r?r=new Sw(s):r.chart=s;var l=s;l.queuedUserOptions.push(e);var u=function(){var t=l.queuedUserOptions.indexOf(e);l.queuedUserOptions.splice(0,t)};return l.requestFactoryUpdate((function(){return fw(n,void 0,void 0,(function(){var r;return vw(this,(function(n){switch(n.label){case 0:return l.destroyed?[2]:null==(r=Pp(l.processedOptions,a))?(u(),[2]):[4,t.updateDelta(l,r,e)];case 1:return n.sent(),u(),[2]}}))}))})),r},t.updateUserDelta=function(e,r){var n,o=e.chart,i=e.chart.queuedUserOptions,a=null!==(n=i[i.length-1])&&void 0!==n?n:o.userOptions,s=Mp([a,r]);xw(">>> AgChartV2.updateUserDelta() user delta",r),xw("AgChartV2.updateUserDelta() - base options",a),t.createOrUpdate(s,e)},t.download=function(e,r){fw(this,void 0,void 0,(function(){var n;return vw(this,(function(o){switch(o.label){case 0:return[4,t.prepareResizedChart(e,r)];case 1:return(n=o.sent()).chart.scene.download(null==r?void 0:r.fileName,null==r?void 0:r.fileFormat),n!==e&&n.destroy(),[2]}}))})).catch((function(t){return sl.errorOnce(t)}))},t.getImageDataURL=function(e,r){return fw(this,void 0,void 0,(function(){var n,o,i;return vw(this,(function(a){switch(a.label){case 0:return[4,t.prepareResizedChart(e,r)];case 1:return n=a.sent(),o=n.chart,i=o.scene.canvas.getDataURL(null==r?void 0:r.fileFormat),n!==e&&n.destroy(),[2,i]}}))}))},t.prepareResizedChart=function(e,r){return fw(this,void 0,void 0,(function(){var n,o,i,a,s,l,u,c;return vw(this,(function(p){switch(p.label){case 0:return n=e.chart,i=(o=null!=r?r:{}).width,a=o.height,s=n.width,l=n.height,void 0===i&&void 0===a||1===n.scene.canvas.pixelRatio&&s===i&&l===a?[2,e]:(i=null!=i?i:s,a=null!=a?a:l,u=hw(hw({},n.userOptions),{container:document.createElement("div"),width:i,height:a,autoSize:!1,overrideDevicePixelRatio:1}),[4,(c=t.createOrUpdate(u)).chart.waitForUpdate()]);case 1:return p.sent(),[2,c]}}))}))},t.createChartInstance=function(t,e,r){var n=null==r?void 0:r.destroy({keepTransferableResources:!0});if(GS(t))return new Pg(document,e,n);if(jS(t))return new Vg(document,e,n);if(VS(t))return new Lg(document,e,n);throw new Error("AG Charts - couldn't apply configuration, check type of options: "+t.type)},t.updateDelta=function(t,e,r){var n;return fw(this,void 0,void 0,(function(){return vw(this,(function(o){switch(o.label){case 0:return null==e.type&&(e=hw(hw({},e),{type:null!==(n=t.processedOptions.type)&&void 0!==n?n:NS(e)})),[4,t.awaitUpdateCompletion()];case 1:return o.sent(),t.destroyed?[2]:(xw("AgChartV2.updateDelta() - applying delta",e),function(t,e,r){var n,o,i,a,s=Mp([null!==(n=t.processedOptions)&&void 0!==n?n:{},e],HS),l=function(t,e){var r,n,o=!1,i=qS.filter((function(t){return"root"===t.type}));try{for(var a=mw(i),s=a.next();!s.done;s=a.next()){var l=s.value,u=(p=l,(t instanceof Pg&&p.chartTypes.includes("cartesian")||t instanceof Lg&&p.chartTypes.includes("polar")||t instanceof Vg&&p.chartTypes.includes("hierarchy"))&&null!=e[l.optionsKey]),c=t.isModuleEnabled(l);u!==c&&(o=!0,u?t.addModule(l):t.removeModule(l))}}catch(t){r={error:t}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}var p;return o}(t,s),u=["type","data","series","listeners","theme","legend"];if(GS(e)||VS(e))u.push("axes");else if(!jS(e))throw new Error("AG Charts - couldn't apply configuration, check type of options and chart: "+e.type);e.listeners&&Ew(t,e.listeners);Tw(t,e,{skip:u});var c=!1;e.series&&e.series.length>0&&(!function(t,e){var r=e.series;if(!r)return;if(t.series.length===r.length&&t.series.every((function(t,e){var n;return t.type===(null===(n=r[e])||void 0===n?void 0:n.type)})))return void t.series.forEach((function(e,n){var o,i,a,s,l=Pp(null!==(a=null===(i=null===(o=t.processedOptions)||void 0===o?void 0:o.series)||void 0===i?void 0:i[n])&&void 0!==a?a:{},null!==(s=r[n])&&void 0!==s?s:{});l&&(xw("AgChartV2.applySeries() - applying series diff idx "+n,l),Pw(e,l,{path:"series["+n+"]",index:n}),e.markNodeDataDirty())}));t.series=function(t,e){var r,n,o,i=[],a=t.getModuleContext(),s=0;try{for(var l=mw(null!=e?e:[]),u=l.next();!u.done;u=l.next()){var c=u.value,p="series["+s+++"]",d=TC(null!==(o=c.type)&&void 0!==o?o:"unknown",a);Pw(d,c,{path:p,index:s}),i.push(d)}}catch(t){r={error:t}}finally{try{u&&!u.done&&(n=l.return)&&n.call(l)}finally{if(r)throw r.error}}return i}(t,r)}(t,e),c=!0);if("axes"in e&&Array.isArray(e.axes)){(function(t,e){var r=e.axes;if(!r)return!1;if(t.axes.length===r.length&&t.axes.every((function(t,e){return t.type===r[e].type}))){var n=t.processedOptions;if(GS(n))return t.axes.forEach((function(t,e){var o,i,a=Pp(null!==(i=null===(o=n.axes)||void 0===o?void 0:o[e])&&void 0!==i?i:{},r[e]);xw("AgChartV2.applyAxes() - applying axis diff idx "+e,a);Tw(t,a,{path:"axes["+e+"]",skip:["axes[].type"]})})),!0}return t.axes=function(t,e){var r,n,o=[],i=["axes[].type"],a=t.getModuleContext(),s=0;try{for(var l=mw(null!=e?e:[]),u=l.next();!u.done;u=l.next()){var c=u.value,p=om(c.type,a),d="axes["+s+++"]";Ow(p,c),Tw(p,c,{path:d,skip:i}),o.push(p)}}catch(t){r={error:t}}finally{try{u&&!u.done&&(n=l.return)&&n.call(l)}finally{if(r)throw r.error}}return o}(t,r),!0})(t,e)&&(c=!0)}!function(t,e){var r=["listeners"];t.setLegendInit((function(n){var o,i,a,s;Tw(n,null!==(o=e.legend)&&void 0!==o?o:{},{skip:r}),(null===(i=e.legend)||void 0===i?void 0:i.listeners)&&Object.assign(null===(a=t.legend)||void 0===a?void 0:a.listeners,null!==(s=e.legend.listeners)&&void 0!==s?s:{})}))}(t,e);var p=e.series,d=!!e.data||(null==p?void 0:p.some((function(t){return null!=t.data}))),h=null!==(i=null!==(o=e.legend)&&void 0!==o?o:e.title)&&void 0!==i?i:e.subtitle;c=c||d||!!h,e.data&&(t.data=e.data);e.listeners&&t.updateAllSeriesListeners();t.processedOptions=s,t.userOptions=Mp([null!==(a=t.userOptions)&&void 0!==a?a:{},r],HS);var f=c||l?Td.PROCESS_DATA:Td.PERFORM_LAYOUT;xw("AgChartV2.applyChartOptions() - update type",Td[f]),t.update(f,{forceNodeDataRefresh:c})}(t,e,r),[2])}}))}))},t.DEBUG=function(){var t;return null!==(t=yl("agChartsDebug"))&&void 0!==t&&t},t.initialised=!1,t}();function xw(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];[!0,"opts"].includes(ww.DEBUG())&&sl.debug.apply(sl,gw([t],yw(e)))}function Ow(t,e){var r,n,o=!1,i=qS.filter((function(t){return"axis-option"===t.type}));try{for(var a=mw(i),s=a.next();!s.done;s=a.next()){var l=s.value,u=null!=e[l.optionsKey];u!==t.isModuleEnabled(l)&&(o=!0,u?t.addModule(l):t.removeModule(l))}}catch(t){r={error:t}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return o}function Ew(t,e){for(var r in t.clearEventListeners(),e){var n=e[r];"function"==typeof n&&t.addEventListener(r,n)}}function Tw(t,e,r){var n=void 0===r?{}:r,o=n.skip,i=n.path;return _p(t,e,hw(hw(hw({},Ty()),{skip:o}),i?{path:i}:{}))}function Pw(t,e,r){var n,o,i=void 0===r?{}:r,a=i.path,s=i.index,l=["series[].listeners","series[].seriesGrouping"],u=Ty(),c=null!==(n=u.constructors)&&void 0!==n?n:{},p={constructors:hw(hw({},c),{title:"pie"===t.type?my:c.title})},d=_p(t,e,hw(hw(hw(hw(hw({},u),p),{skip:gw(["series[].type"],yw(null!=l?l:[]))}),a?{path:a}:{}),{idx:null!=s?s:-1})),h=null==e?void 0:e.listeners;null!=h&&Ew(t,h);var f=e.seriesGrouping;if("seriesGrouping"in(null!=e?e:{}))if(f){var v=Object.freeze(hw(hw({},null!==(o=t.seriesGrouping)&&void 0!==o?o:{}),f));t.seriesGrouping=v}else t.seriesGrouping=f;return d}var Dw,Aw=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Mw=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a};!function(t){t[t.Open=0]="Open",t[t.Chord=1]="Chord",t[t.Round=2]="Round"}(Dw||(Dw={}));var _w=function(t){function e(){var e=t.call(this)||this;return e.centerX=0,e.centerY=0,e.radius=10,e.startAngle=0,e.endAngle=2*Math.PI,e.counterClockwise=!1,e.type=Dw.Open,e.restoreOwnStyles(),e}return Aw(e,t),Object.defineProperty(e.prototype,"fullPie",{get:function(){return Yv(Tl(this.startAngle),Tl(this.endAngle))},enumerable:!1,configurable:!0}),e.prototype.updatePath=function(){var t=this.path;t.clear(),t.arc(this.centerX,this.centerY,this.radius,this.startAngle,this.endAngle,this.counterClockwise),this.type===Dw.Chord?t.closePath():this.type!==Dw.Round||this.fullPie||(t.lineTo(this.centerX,this.centerY),t.closePath())},e.prototype.computeBBox=function(){return new Ns(this.centerX-this.radius,this.centerY-this.radius,2*this.radius,2*this.radius)},e.prototype.isPointInPath=function(t,e){var r=this.transformPoint(t,e),n=this.computeBBox();return this.type!==Dw.Open&&n.containsPoint(r.x,r.y)&&this.path.isPointInPath(r.x,r.y)},e.className="Arc",e.defaultStyles=Object.assign({},kl.defaultStyles,{lineWidth:1,fillStyle:null}),Mw([Kd()],e.prototype,"centerX",void 0),Mw([Kd()],e.prototype,"centerY",void 0),Mw([Kd()],e.prototype,"radius",void 0),Mw([Kd()],e.prototype,"startAngle",void 0),Mw([Kd()],e.prototype,"endAngle",void 0),Mw([Kd()],e.prototype,"counterClockwise",void 0),Mw([Kd()],e.prototype,"type",void 0),e}(Xd),Rw=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),kw=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a};!function(t){function e(e){var r=t.call(this)||this;return r.x=0,r.y=0,r.width=0,r.height=0,r.opacity=1,r.sourceImage=e,r}Rw(e,t),e.prototype.render=function(e){var r=e.ctx,n=e.forceRender,o=e.stats;if(this.dirty!==ks.NONE||n){this.computeTransformMatrix(),this.matrix.toContext(r);var i=this.sourceImage;r.globalAlpha=this.opacity,r.drawImage(i,0,0,i.width,i.height,this.x,this.y,this.width,this.height),t.prototype.render.call(this,e)}else o&&o.nodesSkipped++},kw([zs({redraw:ks.MAJOR})],e.prototype,"x",void 0),kw([zs({redraw:ks.MAJOR})],e.prototype,"y",void 0),kw([zs({redraw:ks.MAJOR})],e.prototype,"width",void 0),kw([zs({redraw:ks.MAJOR})],e.prototype,"height",void 0),kw([zs({redraw:ks.MAJOR})],e.prototype,"opacity",void 0)}(Qs);var Fw=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},Iw=Object.entries(OS).reduce((function(t,e){var r=Fw(e,2),n=r[0],o=r[1];return t[n]=o(),t}),{}),Lw=["area","bar","column","histogram","line","pie","scatter"];function Nw(t){switch(t){case"bar":case"groupedBar":case"stackedBar":case"normalizedBar":return"bar";case"column":case"groupedColumn":case"stackedColumn":case"normalizedColumn":return"column";case"line":return"line";case"area":case"stackedArea":case"normalizedArea":return"area";case"scatter":case"bubble":return"scatter";case"histogram":return"histogram";case"pie":case"doughnut":return"pie";default:return"cartesian"}}var Gw=["number","category","groupedCategory","log","time"];var jw=function(){return(jw=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function Vw(t,e){var r,n,o,i,a,s,l,c=t.chartOptionsToRestore,p=t.chartPaletteToRestore,d=t.chartThemeToRestore,h=function(t){var e=t.getChartThemeName(),r=t.getChartThemes();u.includes(r,e)||(e=r[0]);return e}(t),f=Bw(h),v=f?{baseTheme:h}:null!==(r=Hw(t,h))&&void 0!==r?r:{},y=t.getGridOptionsChartThemeOverrides(),g=t.apiChartThemeOverrides,m="pie"===Nw(t.chartType)?"polar":"cartesian",b=t.crossFiltering?function(t,e,r){var n,o={listeners:{legendItemClick:function(e){t.getChart().series.forEach((function(t){t.toggleSeriesItem(e.itemId,e.enabled),t.toggleSeriesItem(e.itemId+"-filtered-out",e.enabled)}))}}},i={};"polar"===r&&(i.pie={tooltip:{renderer:function(t){var e=t.angleName,r=t.datum,n=t.calloutLabelKey,o=t.radiusKey,i=t.angleValue;return{title:e,content:r[n]+": "+i*r[o]}}}});return(n={})[r]={tooltip:{delay:500},legend:o,listeners:{click:function(t){return e.crossFilterCallback(t,!0)}},series:i},n}(e,t,m):void 0,C=jw({},null!=c?c:{}),S=[f?(n=t,o=function(){var t=function(t){return!!t&&Object.keys(t).some((function(e){return u.get(t[e],"title.enabled",!1)}))};return t(y)||t(g)}(),i=n.getExtraPaddingDirections(),{common:{axes:Uw,padding:{top:!o&&i.includes("top")?40:20,right:i.includes("right")?30:20,bottom:i.includes("bottom")?40:20,left:i.includes("left")?30:20}},pie:{series:{title:{_enabledFromTheme:!0},calloutLabel:{_enabledFromTheme:!0},sectorLabel:{enabled:!1,_enabledFromTheme:!0}}}}):void 0,b,y,g,C].filter((function(t){return!!t})).reduce((function(t,e){return{baseTheme:t,overrides:e}}),v);if(p&&h===d){var w=ES(v).palette;s=w,(l=function(t,e){return t.length===e.length&&t.every((function(t,r){return t===e[r]}))})((a=p).fills,s.fills)&&l(a.strokes,s.strokes)||(S.palette=p)}return S}function Bw(t){return u.includes(Object.keys(Iw),t)}var Uw=Gw.reduce((function(t,e){var r;return jw(jw({},t),((r={})[e]={title:{_enabledFromTheme:!0}},r))}),{});function Hw(t,e){var r=t.customChartThemes,n=r&&r[e];return n||console.warn("AG Grid: no stock theme exists with the name '"+e+"' and no custom chart theme with that name was supplied to 'customChartThemes'"),n}var zw=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},Ww=function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t},Kw=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Xw=function(t){return function(e){return void 0===e||t(e)}},Yw=function(t){return"string"==typeof t},qw=function(t){return"boolean"==typeof t},Zw=function(t){return"object"==typeof t},Jw=function(t,e){return function(r){return"AG Grid - unable to update chart as invalid params supplied:  `"+t+": "+r+"`, expected "+e+"."}},$w=function(){function t(){}return t.validateChartParams=function(e){switch(e.type){case"rangeChartUpdate":return t.validateUpdateRangeChartParams(e);case"pivotChartUpdate":return t.validateUpdatePivotChartParams(e);case"crossFilterChartUpdate":return t.validateUpdateCrossFilterChartParams(e);default:return console.warn("AG Grid - Invalid value supplied for 'type': "+e.type+". It must be either 'rangeChartUpdate', 'pivotChartUpdate', or 'crossFilterChartUpdate'."),!1}},t.validateUpdateRangeChartParams=function(e){var r=Ww(Ww(Ww([],zw(t.commonValidations)),zw(t.cellRangeValidations)),[{property:"seriesChartTypes",validationFn:function(t){return void 0===t||Array.isArray(t)&&t.every(Zw)},warnMessage:Jw("seriesChartTypes","Array of SeriesChartType")}]);return t.validateProperties(e,r,["type","chartId","chartType","chartThemeName","chartThemeOverrides","unlinkChart","cellRange","suppressChartRanges","aggFunc","seriesChartTypes"],"UpdateRangeChartParams")},t.validateUpdatePivotChartParams=function(e){var r=Ww([],zw(t.commonValidations));return t.validateProperties(e,r,["type","chartId","chartType","chartThemeName","chartThemeOverrides","unlinkChart"],"UpdatePivotChartParams")},t.validateUpdateCrossFilterChartParams=function(e){var r=Ww(Ww([],zw(t.commonValidations)),zw(t.cellRangeValidations));return t.validateProperties(e,r,["type","chartId","chartType","chartThemeName","chartThemeOverrides","unlinkChart","cellRange","suppressChartRanges","aggFunc"],"UpdateCrossFilterChartParams")},t.validateProperties=function(t,e,r,n){var o,i;try{for(var a=Kw(e),s=a.next();!s.done;s=a.next()){var l=s.value,u=l.property,c=l.validationFn,p=l.warnMessage;if(u in t){var d=t[u];if(!c(d))return console.warn(p(d)),!1}}}catch(t){o={error:t}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(o)throw o.error}}for(var u in t)if(!r.includes(u))return console.warn("AG Grid - Unexpected property supplied. "+n+" does not contain: `"+u+"`."),!1;return!0},t.validChartTypes=["column","groupedColumn","stackedColumn","normalizedColumn","bar","groupedBar","stackedBar","normalizedBar","line","scatter","bubble","pie","doughnut","area","stackedArea","normalizedArea","histogram","columnLineCombo","areaColumnCombo","customCombo"],t.validateChartType=Xw((function(e){return t.validChartTypes.includes(e)})),t.validateAgChartThemeOverrides=Xw((function(t){return"object"==typeof t})),t.validateChartParamsCellRange=Xw((function(t){return"object"==typeof t})),t.validateAggFunc=Xw((function(t){return"string"==typeof t||"function"==typeof t})),t.commonValidations=[{property:"chartId",validationFn:Yw,warnMessage:Jw("chartId","string")},{property:"chartType",validationFn:t.validateChartType,warnMessage:Jw("chartType",t.validChartTypes.join(", "))},{property:"chartThemeName",validationFn:Yw,warnMessage:Jw("chartThemeName","string")},{property:"chartThemeOverrides",validationFn:t.validateAgChartThemeOverrides,warnMessage:Jw("chartThemeOverrides","AgChartThemeOverrides")},{property:"unlinkChart",validationFn:qw,warnMessage:Jw("unlinkChart","boolean")}],t.cellRangeValidations=[{property:"cellRange",validationFn:t.validateChartParamsCellRange,warnMessage:Jw("cellRange","ChartParamsCellRange")},{property:"suppressChartRanges",validationFn:qw,warnMessage:Jw("suppressChartRanges","boolean")},{property:"aggFunc",validationFn:t.validateAggFunc,warnMessage:Jw("aggFunc","string or IAggFunc")}],t}(),Qw=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),tx=function(){return(tx=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},ex=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},rx=["ag-default","ag-material","ag-pastel","ag-vivid","ag-solar"],nx=function(t){function e(e){var r=t.call(this)||this;return r.model=e,r}return Qw(e,t),e.prototype.init=function(){var t=this;this.setChartRange(),this.addManagedListener(this.eventService,l.EVENT_RANGE_SELECTION_CHANGED,(function(e){e.id&&e.id===t.model.chartId&&t.updateForRangeChange()})),this.model.unlinked&&this.rangeService&&this.rangeService.setCellRanges([]),this.addManagedListener(this.eventService,l.EVENT_COLUMN_MOVED,this.updateForGridChange.bind(this)),this.addManagedListener(this.eventService,l.EVENT_COLUMN_PINNED,this.updateForGridChange.bind(this)),this.addManagedListener(this.eventService,l.EVENT_COLUMN_VISIBLE,this.updateForGridChange.bind(this)),this.addManagedListener(this.eventService,l.EVENT_COLUMN_ROW_GROUP_CHANGED,this.updateForGridChange.bind(this)),this.addManagedListener(this.eventService,l.EVENT_MODEL_UPDATED,this.updateForGridChange.bind(this)),this.addManagedListener(this.eventService,l.EVENT_CELL_VALUE_CHANGED,this.updateForDataChange.bind(this))},e.prototype.update=function(t){var e,r,n,o,i,a,s;if(!this.validUpdateType(t)||!$w.validateChartParams(t))return!1;var l=t.chartId,u=t.chartType,c=t.chartThemeName,p=t.unlinkChart,d={chartId:l,pivotChart:this.model.pivotChart,chartType:null!=u?u:this.model.chartType,chartThemeName:null!=c?c:this.model.chartThemeName,unlinkChart:null!=p?p:this.model.unlinked,cellRange:this.model.suppliedCellRange,aggFunc:this.model.aggFunc,seriesChartTypes:void 0,suppressChartRanges:!1,crossFiltering:!1},h=tx({},d);switch(t.type){case"rangeChartUpdate":h.cellRange=null!==(e=this.createCellRange(t))&&void 0!==e?e:this.model.suppliedCellRange,h.aggFunc=null!==(r=t.aggFunc)&&void 0!==r?r:this.model.aggFunc,h.seriesChartTypes=t.seriesChartTypes,h.suppressChartRanges=null!==(n=t.suppressChartRanges)&&void 0!==n?n:this.model.suppressChartRanges;break;case"crossFilterChartUpdate":h.cellRange=null!==(o=this.createCellRange(t))&&void 0!==o?o:this.model.suppliedCellRange,h.aggFunc=null!==(i=t.aggFunc)&&void 0!==i?i:this.model.aggFunc,h.crossFiltering=!0,h.suppressChartRanges=null!==(a=t.suppressChartRanges)&&void 0!==a?a:this.model.suppressChartRanges}return this.model.updateModel(h),h.unlinkChart||h.suppressChartRanges?null===(s=this.rangeService)||void 0===s||s.setCellRanges([]):this.setChartRange(),!0},e.prototype.updateForGridChange=function(){this.model.unlinked||(this.model.updateCellRanges(),this.model.updateData(),this.setChartRange())},e.prototype.updateForDataChange=function(){this.model.unlinked||(this.model.updateData(),this.raiseChartModelUpdateEvent())},e.prototype.updateForRangeChange=function(){this.updateForGridChange(),this.raiseChartRangeSelectionChangedEvent()},e.prototype.updateForPanelChange=function(t){this.model.updateCellRanges(t),this.model.updateData(),this.setChartRange(),this.raiseChartRangeSelectionChangedEvent()},e.prototype.getChartUpdateParams=function(t){var e=this.getSelectedValueColState().map((function(t){return{colId:t.colId,displayName:t.displayName}})),r=this.getChartData(),n=this.getSelectedDimension();return{data:r,grouping:this.isGrouping(),category:{id:n.colId,name:n.displayName,chartDataType:this.model.getChartDataType(n.colId)},fields:e,chartId:this.getChartId(),getCrossFilteringContext:function(){return{lastSelectedChartId:"xxx"}},seriesChartTypes:this.getSeriesChartTypes(),updatedOverrides:t}},e.prototype.getChartModel=function(){var t=this.model.pivotChart?"pivot":"range",e=this.isComboChart()?this.model.comboChartModel.seriesChartTypes:void 0;return{modelType:t,chartId:this.model.chartId,chartType:this.model.chartType,chartThemeName:this.getChartThemeName(),chartOptions:this.chartProxy.getChartThemeOverrides(),chartPalette:this.chartProxy.getChartPalette(),cellRange:this.getCellRangeParams(),suppressChartRanges:this.model.suppressChartRanges,aggFunc:this.model.aggFunc,unlinkChart:this.model.unlinked,seriesChartTypes:e}},e.prototype.getChartId=function(){return this.model.chartId},e.prototype.getChartData=function(){return this.model.chartData},e.prototype.getChartType=function(){return this.model.chartType},e.prototype.setChartType=function(t){this.model.chartType=t,this.model.comboChartModel.updateSeriesChartTypes(),this.raiseChartModelUpdateEvent(),this.raiseChartOptionsChangedEvent()},e.prototype.setChartThemeName=function(t){this.model.chartThemeName=t,this.raiseChartModelUpdateEvent(),this.raiseChartOptionsChangedEvent()},e.prototype.getChartThemeName=function(){return this.model.chartThemeName},e.prototype.isPivotChart=function(){return this.model.pivotChart},e.prototype.isPivotMode=function(){return this.model.isPivotMode()},e.prototype.isGrouping=function(){return this.model.isGrouping()},e.prototype.isCrossFilterChart=function(){return this.model.crossFiltering},e.prototype.getThemes=function(){return this.gridOptionsService.get("chartThemes")||rx},e.prototype.getPalettes=function(){var t=this;return this.getThemes().map((function(e){return ES(Bw(e)?e:t.chartProxy.lookupCustomChartTheme(e)).palette}))},e.prototype.getValueColState=function(){return this.model.valueColState.map(this.displayNameMapper.bind(this))},e.prototype.getSelectedValueColState=function(){return this.getValueColState().filter((function(t){return t.selected}))},e.prototype.getSelectedDimension=function(){return this.model.getSelectedDimension()},e.prototype.displayNameMapper=function(t){var e=this.model.columnNames[t.colId];return t.displayName=e?e.join(" - "):this.model.getColDisplayName(t.column),t},e.prototype.getColStateForMenu=function(){return{dimensionCols:this.model.dimensionColState,valueCols:this.getValueColState()}},e.prototype.setChartRange=function(t){void 0===t&&(t=!1),!this.rangeService||this.model.suppressChartRanges||this.model.unlinked||this.rangeService.setCellRanges(this.getCellRanges()),t||this.raiseChartModelUpdateEvent()},e.prototype.detachChartRange=function(){this.model.unlinked=!this.model.unlinked,this.model.unlinked?this.rangeService&&this.rangeService.setCellRanges([]):this.updateForGridChange()},e.prototype.setChartProxy=function(t){this.chartProxy=t},e.prototype.getChartProxy=function(){return this.chartProxy},e.prototype.isActiveXYChart=function(){return u.includes(["scatter","bubble"],this.getChartType())},e.prototype.isChartLinked=function(){return!this.model.unlinked},e.prototype.customComboExists=function(){var t=this.model.comboChartModel.savedCustomSeriesChartTypes;return t&&t.length>0},e.prototype.getSeriesChartTypes=function(){return this.model.comboChartModel.seriesChartTypes},e.prototype.isComboChart=function(){return this.model.isComboChart()},e.prototype.updateSeriesChartType=function(t,r,n){var o=this.model.comboChartModel.seriesChartTypes.find((function(e){return e.colId===t}));if(o){var i="customCombo"!==this.model.chartType;i&&(this.model.chartType="customCombo");var a=o.chartType;null!=r&&(o.chartType=r),null!=n&&(o.secondaryAxis=n),this.model.comboChartModel.savedCustomSeriesChartTypes=this.model.comboChartModel.seriesChartTypes,this.model.comboChartModel.updateSeriesChartTypes(),this.updateForDataChange(),i&&this.dispatchEvent({type:e.EVENT_CHART_TYPE_CHANGED}),a!==r&&this.dispatchEvent({type:e.EVENT_CHART_SERIES_CHART_TYPE_CHANGED}),this.raiseChartOptionsChangedEvent()}},e.prototype.getActiveSeriesChartTypes=function(){var t=this.getSelectedValueColState().map((function(t){return t.colId}));return this.getSeriesChartTypes().filter((function(e){return t.includes(e.colId)}))},e.prototype.getChartSeriesTypes=function(){return this.isComboChart()?["line","column","area"]:[Nw(this.getChartType())]},e.prototype.getCellRanges=function(){return[this.model.dimensionCellRange,this.model.valueCellRange].filter((function(t){return t}))},e.prototype.createCellRange=function(t){var e;return t.cellRange&&(null===(e=this.rangeService)||void 0===e?void 0:e.createCellRangeFromCellRangeParams(t.cellRange))},e.prototype.validUpdateType=function(t){var e,r=this;if(!t.type)return console.warn("AG Grid - Unable to update chart as the 'type' is missing. It must be either 'rangeChartUpdate', 'pivotChartUpdate', or 'crossFilterChartUpdate'."),!1;var n={"Range Chart":function(){return!r.isPivotChart()&&!r.isCrossFilterChart()},"Pivot Chart":function(){return r.isPivotChart()},"Cross Filter Chart":function(){return r.isCrossFilterChart()}},o=null!==(e=Object.keys(n).find((function(t){return n[t]()})))&&void 0!==e?e:"Range Chart",i=t.type===""+o[0].toLowerCase()+o.slice(1).replace(/ /g,"")+"Update";return i||console.warn("AG Grid - Unable to update chart as a '"+t.type+"' update type is not permitted on a "+o+"."),i},e.prototype.getCellRangeParams=function(){var t=this.getCellRanges(),e=t[0],r=e&&e.startRow||null,n=e&&e.endRow||null;return{rowStartIndex:r&&r.rowIndex,rowStartPinned:r&&r.rowPinned,rowEndIndex:n&&n.rowIndex,rowEndPinned:n&&n.rowPinned,columns:t.reduce((function(t,e){return t.concat(e.columns.map((function(t){return t.getId()})))}),[])}},e.prototype.raiseChartModelUpdateEvent=function(){var t={type:e.EVENT_CHART_MODEL_UPDATE};this.dispatchEvent(t)},e.prototype.raiseChartUpdatedEvent=function(){var t={type:e.EVENT_CHART_UPDATED};this.dispatchEvent(t)},e.prototype.raiseChartApiUpdateEvent=function(){var t={type:e.EVENT_CHART_API_UPDATE};this.dispatchEvent(t)},e.prototype.raiseChartOptionsChangedEvent=function(){var t=this.getChartModel(),e=t.chartId,r=t.chartType,n={type:l.EVENT_CHART_OPTIONS_CHANGED,chartId:e,chartType:r,chartThemeName:this.getChartThemeName(),chartOptions:this.chartProxy.getChartThemeOverrides()};this.eventService.dispatchEvent(n)},e.prototype.raiseChartRangeSelectionChangedEvent=function(){var t={type:l.EVENT_CHART_RANGE_SELECTION_CHANGED,id:this.model.chartId,chartId:this.model.chartId,cellRange:this.getCellRangeParams()};this.eventService.dispatchEvent(t)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.rangeService&&this.rangeService.setCellRanges([])},e.EVENT_CHART_UPDATED="chartUpdated",e.EVENT_CHART_API_UPDATE="chartApiUpdate",e.EVENT_CHART_MODEL_UPDATE="chartModelUpdate",e.EVENT_CHART_TYPE_CHANGED="chartTypeChanged",e.EVENT_CHART_SERIES_CHART_TYPE_CHANGED="chartSeriesChartTypeChanged",ex([n("rangeService")],e.prototype,"rangeService",void 0),ex([i],e.prototype,"init",null),e}(r),ox=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ix=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},ax=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},sx=function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t},lx=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ux={groups:[{type:"categories",isOpen:!0},{type:"series",isOpen:!0},{type:"seriesChartType",isOpen:!0}]},cx=function(t){function e(r,n){var o=t.call(this,e.TEMPLATE)||this;return o.chartController=r,o.chartOptionsService=n,o.columnComps=new Map,o}return ox(e,t),e.prototype.init=function(){this.updatePanels(),this.addManagedListener(this.chartController,nx.EVENT_CHART_MODEL_UPDATE,this.updatePanels.bind(this)),this.addManagedListener(this.chartController,nx.EVENT_CHART_API_UPDATE,this.updatePanels.bind(this)),this.createAutoScrollService()},e.prototype.destroy=function(){this.clearComponents(),t.prototype.destroy.call(this)},e.prototype.updatePanels=function(){var t,e,r=this,n=this.chartType,o=this.chartController.getColStateForMenu(),i=o.dimensionCols,a=o.valueCols,s=i.map((function(t){return t.colId})).concat(a.map((function(t){return t.colId})));this.chartType=this.chartController.getChartType();var l=this.getGroupExpandedState();if(u.areEqual(u.keys(this.columnComps),s)&&this.chartType===n){if(sx(sx([],ax(i)),ax(a)).forEach((function(t){r.columnComps.get(t.colId).setValue(t.selected,!0)})),this.chartController.isActiveXYChart()){var c=this.generateGetSeriesLabel();a.forEach((function(t){r.columnComps.get(t.colId).setLabel(c(t))}))}u.removeFromParent(this.getGui().querySelector("#seriesChartTypeGroup")),this.seriesChartTypeGroupComp=this.destroyBean(this.seriesChartTypeGroupComp);var p=null===(t=this.getDataPanelDef().groups)||void 0===t?void 0:t.reduce((function(t,e,r){return"seriesChartType"===e.type?r:t}),-1);-1!==p&&this.createSeriesChartTypeGroup(a,p)}else this.clearComponents(),null===(e=this.getDataPanelDef().groups)||void 0===e||e.forEach((function(t){var e=t.type;"categories"===e?r.createCategoriesGroup(i):"series"===e?r.createSeriesGroup(a):"seriesChartType"===e?r.createSeriesChartTypeGroup(a):console.warn("AG Grid: invalid charts data panel group name supplied: '"+e+"'")}));this.restoreGroupExpandedState(l)},e.prototype.getGroupExpandedState=function(){var t=this;return[{groupType:"categories",comp:this.categoriesGroupComp},{groupType:"series",comp:this.seriesGroupComp},{groupType:"seriesChartType",comp:this.seriesChartTypeGroupComp}].map((function(e){var r,n,o=e.groupType,i=e.comp,a=Boolean(null===(n=null===(r=t.getDataPanelDef().groups)||void 0===r?void 0:r.find((function(t){return t.type===o})))||void 0===n?void 0:n.isOpen);return i?i.isExpanded():a}))},e.prototype.restoreGroupExpandedState=function(t){[this.categoriesGroupComp,this.seriesGroupComp,this.seriesChartTypeGroupComp].forEach((function(e,r){e&&e.toggleGroupExpand(t[r])}))},e.prototype.createAutoScrollService=function(){var t=this.getGui();this.autoScrollService=new $({scrollContainer:t,scrollAxis:"y",getVerticalPosition:function(){return t.scrollTop},setVerticalPosition:function(e){return t.scrollTop=e}})},e.prototype.createComponent=function(t,e){var r=document.createElement("div");return r.id=e,r.className="ag-chart-data-section",r.appendChild(t.getGui()),r},e.prototype.addComponent=function(t,e,r){var n=this.createComponent(e,r);t.appendChild(n)},e.prototype.addComponentAtIndex=function(t,e,r,n){var o=this.createComponent(e,r);t.insertBefore(o,t.children[n])},e.prototype.addChangeListener=function(t,e){var r=this;this.addManagedListener(t,l.EVENT_FIELD_VALUE_CHANGED,(function(){e.selected=t.getValue(),r.chartController.updateForPanelChange(e)}))},e.prototype.createCategoriesGroup=function(t){var e=this;this.categoriesGroupComp=this.createBean(new J({title:this.getCategoryGroupTitle(),enabled:!0,suppressEnabledCheckbox:!0,suppressOpenCloseIcons:!1,cssIdentifier:"charts-data"}));var r="chartDimension"+this.getCompId();t.forEach((function(t){var n=e.categoriesGroupComp.createManagedBean(new Q);n.setLabel(u.escapeString(t.displayName)),n.setValue(t.selected),n.setInputName(r),e.addChangeListener(n,t),e.categoriesGroupComp.addItem(n),e.columnComps.set(t.colId,n)})),this.addComponent(this.getGui(),this.categoriesGroupComp,"categoriesGroup")},e.prototype.createSeriesGroup=function(t){var e=this;if(this.seriesGroupComp=this.createManagedBean(new J({title:this.getSeriesGroupTitle(),enabled:!0,suppressEnabledCheckbox:!0,suppressOpenCloseIcons:!1,cssIdentifier:"charts-data"})),this.chartController.isActiveXYChart()){var r=this.seriesGroupComp.createManagedBean(new tt);r.setLabel(this.chartTranslationService.translate("paired")).setLabelAlignment("left").setLabelWidth("flex").setInputWidth(45).setValue(this.chartOptionsService.getPairedMode()).onValueChange((function(t){e.chartOptionsService.setPairedMode(!!t),e.chartController.updateForGridChange()})),this.seriesGroupComp.addItem(r)}var n=this.generateGetSeriesLabel();t.forEach((function(t){var r=e.seriesGroupComp.createManagedBean(new et);r.addCssClass("ag-data-select-checkbox");var o=n(t);r.setLabel(o),r.setValue(t.selected),e.addChangeListener(r,t),e.seriesGroupComp.addItem(r),e.columnComps.set(t.colId,r),e.addDragHandle(r,t)}));var o=this.getGui(),i=this.seriesGroupComp.getGui();this.addComponent(o,this.seriesGroupComp,"seriesGroup");var a={getIconName:function(){return m.ICON_MOVE},getContainer:function(){return i},onDragging:function(t){return e.onDragging(t)},onDragLeave:function(){return e.onDragLeave()},isInterestedIn:this.isInterestedIn.bind(this),targetContainsSource:!0};this.dragAndDropService.addDropTarget(a),this.addDestroyFunc((function(){return e.dragAndDropService.removeDropTarget(a)}))},e.prototype.createSeriesChartTypeGroup=function(t,e){var r=this;if(this.chartController.isComboChart()){this.seriesChartTypeGroupComp=this.createManagedBean(new J({title:this.chartTranslationService.translate("seriesChartType"),enabled:!0,suppressEnabledCheckbox:!0,suppressOpenCloseIcons:!1,cssIdentifier:"charts-data"}));var n=this.chartController.getSeriesChartTypes();t.forEach((function(t){if(t.selected){var e=n.filter((function(e){return e.colId===t.colId}))[0];if(e){var o=r.seriesChartTypeGroupComp.createManagedBean(new J({title:t.displayName,enabled:!0,suppressEnabledCheckbox:!0,suppressOpenCloseIcons:!0,cssIdentifier:"charts-format-sub-level"})),i=r.seriesChartTypeGroupComp.createManagedBean(new et).setLabel(r.chartTranslationService.translate("secondaryAxis")).setLabelWidth("flex").setDisabled(["groupedColumn","stackedColumn","stackedArea"].includes(e.chartType)).setValue(!!e.secondaryAxis).onValueChange((function(e){return r.chartController.updateSeriesChartType(t.colId,void 0,e)}));o.addItem(i);var a=function(t,e){return r.chartTranslationService.translate(t,e)},s=[{value:"line",text:a("line","Line")},{value:"area",text:a("area","Area")},{value:"stackedArea",text:a("stackedArea","StackedArea")},{value:"groupedColumn",text:a("groupedColumn","Grouped Column")},{value:"stackedColumn",text:a("stackedColumn","Stacked Column")}],l=o.createManagedBean(new j);l.setLabelAlignment("left").setLabelWidth("flex").addOptions(s).setValue(e.chartType).onValueChange((function(e){return r.chartController.updateSeriesChartType(t.colId,e)})),o.addItem(l),r.seriesChartTypeGroupComp.addItem(o)}}})),void 0===e?this.addComponent(this.getGui(),this.seriesChartTypeGroupComp,"seriesChartTypeGroup"):this.addComponentAtIndex(this.getGui(),this.seriesChartTypeGroupComp,"seriesChartTypeGroup",e)}},e.prototype.addDragHandle=function(t,e){var r=this,n=u.createIconNoSpan("columnDrag",this.gridOptionsService);n.classList.add("ag-drag-handle","ag-chart-data-column-drag-handle"),t.getGui().insertAdjacentElement("beforeend",n);var o={type:h.ChartPanel,eElement:n,dragItemName:e.displayName,getDragItem:function(){return{columns:[e.column]}},onDragStopped:function(){return r.onDragStop()}};this.dragAndDropService.addDragSource(o,!0),this.addDestroyFunc((function(){return r.dragAndDropService.removeDragSource(o)}))},e.prototype.generateGetSeriesLabel=function(){if(!this.chartController.isActiveXYChart())return function(t){return u.escapeString(t.displayName)};var t="bubble"===this.chartType,e=this.isInPairedMode(),r=0,n=new Map;return n.set(0,"X"),n.set(1,"Y"),n.set(2,"size"),function(o){var i,a=u.escapeString(o.displayName);return o.selected?(i=e?n.get(r%(t?3:2)):0===r?"X":t&&r%2==0?"size":"Y",r++,a+" ("+i+")"):a}},e.prototype.getCategoryGroupTitle=function(){return this.chartTranslationService.translate(this.chartController.isActiveXYChart()?"labels":"categories")},e.prototype.getSeriesGroupTitle=function(){return this.chartTranslationService.translate(this.chartController.isActiveXYChart()?"xyValues":"series")},e.prototype.getDataPanelDef=function(){var t,e=null===(t=this.gridOptionsService.get("chartToolPanelsDef"))||void 0===t?void 0:t.dataPanel;return e||ux},e.prototype.isInPairedMode=function(){return this.chartController.isActiveXYChart()&&this.chartOptionsService.getSeriesOption("paired","scatter")},e.prototype.clearComponents=function(){u.clearElement(this.getGui()),this.categoriesGroupComp=this.destroyBean(this.categoriesGroupComp),this.seriesGroupComp=this.destroyBean(this.seriesGroupComp),this.seriesChartTypeGroupComp=this.destroyBean(this.seriesChartTypeGroupComp),this.columnComps.clear()},e.prototype.onDragging=function(t){var e=this.checkHoveredItem(t);if(e){this.lastDraggedColumn=t.dragItem.columns[0];var r=e.comp,n=e.position,o=this.lastHoveredItem||{},i=o.comp,a=o.position;if(r!==i||n!==a)this.autoScrollService.check(t.event),this.clearHoveredItems(),this.lastHoveredItem={comp:r,position:n},r.getGui().classList.add("ag-list-item-hovered","ag-item-highlight-"+n)}},e.prototype.checkHoveredItem=function(t){var e,r;if(u.missing(t.vDirection))return null;var n=t.event;try{for(var o=lx(this.columnComps.values()),i=o.next();!i.done;i=o.next()){var a=i.value,s=a.getGui();if(s.querySelector(".ag-chart-data-column-drag-handle")){var l=s.getBoundingClientRect();if(n.clientY>=l.top&&n.clientY<=l.bottom){var c=s.clientHeight;return{comp:a,position:n.clientY>l.top+c/2?"bottom":"top"}}}}}catch(t){e={error:t}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}return null},e.prototype.onDragLeave=function(){this.clearHoveredItems()},e.prototype.onDragStop=function(){var t=this;if(this.lastHoveredItem){var e=this.chartController.getColStateForMenu(),r=e.dimensionCols,n=e.valueCols,o=sx(sx([],ax(r)),ax(n)).find((function(e){return e.column===t.lastDraggedColumn}));if(o){var i=Array.from(this.columnComps.values()).indexOf(this.lastHoveredItem.comp);"bottom"===this.lastHoveredItem.position&&i++,o.order=i,this.chartController.updateForPanelChange(o)}}this.clearHoveredItems(),this.lastDraggedColumn=void 0,this.autoScrollService.ensureCleared()},e.prototype.clearHoveredItems=function(){this.columnComps.forEach((function(t){t.getGui().classList.remove("ag-list-item-hovered","ag-item-highlight-top","ag-item-highlight-bottom")})),this.lastHoveredItem=void 0},e.prototype.isInterestedIn=function(t){return t===h.ChartPanel},e.TEMPLATE='<div class="ag-chart-data-wrapper ag-scrollable-container"></div>',ix([n("dragAndDropService")],e.prototype,"dragAndDropService",void 0),ix([n("chartTranslationService")],e.prototype,"chartTranslationService",void 0),ix([i],e.prototype,"init",null),e}(a),px=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),dx=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},hx=function(t){function e(e){var r=t.call(this)||this;return r.activeComps=[],r.params=e,r}return px(e,t),e.prototype.init=function(){this.setTemplate(e.TEMPLATE,{fontGroup:{cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0}}),this.initGroup(),this.initFontFamilySelect(),this.initFontWeightStyleSelect(),this.initFontSizeSelect(),this.initFontColorPicker()},e.prototype.addCompToPanel=function(t){this.fontGroup.addItem(t),this.activeComps.push(t)},e.prototype.setEnabled=function(t){this.fontGroup.setEnabled(t)},e.prototype.initGroup=function(){var t=this;this.fontGroup.setTitle(this.params.name||this.chartTranslationService.translate("font")).setEnabled(this.params.enabled).hideEnabledCheckbox(!!this.params.suppressEnabledCheckbox).hideOpenCloseIcons(!0).onEnableChange((function(e){t.params.setEnabled&&t.params.setEnabled(e)}))},e.prototype.initFontFamilySelect=function(){var t=this,e=["Arial, sans-serif","Aria Black, sans-serif","Book Antiqua,  serif","Charcoal, sans-serif","Comic Sans MS, cursive","Courier, monospace","Courier New, monospace","Gadget, sans-serif","Geneva, sans-serif","Helvetica, sans-serif","Impact, sans-serif","Lucida Console, monospace","Lucida Grande, sans-serif","Lucida Sans Unicode,  sans-serif","Monaco, monospace","Palatino Linotype, serif","Palatino, serif","Times New Roman, serif","Times, serif","Verdana, sans-serif"],r=this.params.initialFont.family,n=e[0];if(r){var o=e.map((function(t){return t.toLowerCase()})).indexOf(r.toLowerCase());if(o>=0)n=e[o];else{var i=u.capitalise(r);e.push(i),n=i}}var a=e.sort().map((function(t){return{value:t,text:t}}));this.familySelect.addOptions(a).setInputWidth("flex").setValue(""+n).onValueChange((function(e){return t.params.setFont({family:e})}))},e.prototype.initFontSizeSelect=function(){var t=this,e=[8,10,12,14,16,18,20,22,24,26,28,30,32,34,36],r=this.params.initialFont.size;u.includes(e,r)||e.push(r);var n=e.sort((function(t,e){return t-e})).map((function(t){return{value:""+t,text:""+t}}));this.sizeSelect.addOptions(n).setInputWidth("flex").setValue(""+r).onValueChange((function(e){return t.params.setFont({size:parseInt(e,10)})})),this.sizeSelect.setLabel(this.chartTranslationService.translate("size"))},e.prototype.initFontWeightStyleSelect=function(){var t=this,e=this.params.initialFont,r=e.weight,n=void 0===r?"normal":r,o=e.style,i=void 0===o?"normal":o,a=[{name:"normal",weight:"normal",style:"normal"},{name:"bold",weight:"bold",style:"normal"},{name:"italic",weight:"normal",style:"italic"},{name:"boldItalic",weight:"bold",style:"italic"}],s=a.find((function(t){return t.weight===n&&t.style===i}));s||(s={name:"predefined",weight:n,style:i},a.unshift(s));var l=a.map((function(e){return{value:e.name,text:t.chartTranslationService.translate(e.name)}}));this.weightStyleSelect.addOptions(l).setInputWidth("flex").setValue(s.name).onValueChange((function(e){var r=a.find((function(t){return t.name===e}));t.params.setFont({weight:r.weight,style:r.style})}))},e.prototype.initFontColorPicker=function(){var t=this;this.colorPicker.setLabel(this.chartTranslationService.translate("color")).setInputWidth(45).setValue(""+this.params.initialFont.color).onValueChange((function(e){return t.params.setFont({color:e})}))},e.prototype.addItemToPanel=function(t){this.fontGroup.addItem(t),this.activeComps.push(t)},e.prototype.destroyActiveComps=function(){var t=this;this.activeComps.forEach((function(e){u.removeFromParent(e.getGui()),t.destroyBean(e)}))},e.prototype.destroy=function(){this.destroyActiveComps(),t.prototype.destroy.call(this)},e.TEMPLATE='<div class="ag-font-panel">\n            <ag-group-component ref="fontGroup">\n                <ag-select ref="familySelect"></ag-select>\n                <ag-select ref="weightStyleSelect"></ag-select>\n                <div class="ag-charts-font-size-color">\n                    <ag-select ref="sizeSelect"></ag-select>\n                    <ag-color-picker ref="colorPicker"></ag-color-picker>\n                </div>\n            </ag-group-component>\n        </div>',dx([o("fontGroup")],e.prototype,"fontGroup",void 0),dx([o("familySelect")],e.prototype,"familySelect",void 0),dx([o("weightStyleSelect")],e.prototype,"weightStyleSelect",void 0),dx([o("sizeSelect")],e.prototype,"sizeSelect",void 0),dx([o("colorPicker")],e.prototype,"colorPicker",void 0),dx([n("chartTranslationService")],e.prototype,"chartTranslationService",void 0),dx([i],e.prototype,"init",null),e}(a),fx=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),vx=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},yx=function(t){function e(e){var r=e.chartOptionsService,n=e.isExpandedOnInit,o=void 0!==n&&n,i=t.call(this)||this;return i.activePanels=[],i.chartOptionsService=r,i.isExpandedOnInit=o,i}return fx(e,t),e.prototype.init=function(){this.setTemplate(e.TEMPLATE,{legendGroup:{cssIdentifier:"charts-format-top-level",direction:"vertical"}}),this.initLegendGroup(),this.initLegendPosition(),this.initLegendPadding(),this.initLegendItems(),this.initLabelPanel()},e.prototype.initLegendGroup=function(){var t=this;this.legendGroup.setTitle(this.chartTranslationService.translate("legend")).hideEnabledCheckbox(!1).setEnabled(this.chartOptionsService.getChartOption("legend.enabled")||!1).toggleGroupExpand(this.isExpandedOnInit).onEnableChange((function(e){t.chartOptionsService.setChartOption("legend.enabled",e),t.legendGroup.toggleGroupExpand(!0)}))},e.prototype.initLegendPosition=function(){var t=this;this.legendPositionSelect.setLabel(this.chartTranslationService.translate("position")).setLabelWidth("flex").setInputWidth(80).addOptions(["top","right","bottom","left"].map((function(e){return{value:e,text:t.chartTranslationService.translate(e)}}))).setValue(this.chartOptionsService.getChartOption("legend.position")).onValueChange((function(e){return t.chartOptionsService.setChartOption("legend.position",e)}))},e.prototype.initLegendPadding=function(){var t=this,e=this.chartOptionsService.getChartOption("legend.spacing");this.legendPaddingSlider.setLabel(this.chartTranslationService.translate("spacing")).setMaxValue(rO(e,200)).setValue(""+e).setTextFieldWidth(45).onValueChange((function(e){return t.chartOptionsService.setChartOption("legend.spacing",e)}))},e.prototype.initLegendItems=function(){var t=this,e=function(e,r,n,o){var i=t.chartOptionsService.getChartOption("legend."+e);n.setLabel(t.chartTranslationService.translate(r)).setMaxValue(rO(i,o)).setValue(""+i).setTextFieldWidth(45).onValueChange((function(r){t.chartOptionsService.setChartOption("legend."+e,r)}))};e("item.marker.size","markerSize",this.markerSizeSlider,40),e("item.marker.strokeWidth","markerStroke",this.markerStrokeSlider,10),e("item.marker.padding","itemSpacing",this.markerPaddingSlider,20),e("item.paddingX","layoutHorizontalSpacing",this.itemPaddingXSlider,50),e("item.paddingY","layoutVerticalSpacing",this.itemPaddingYSlider,50)},e.prototype.initLabelPanel=function(){var t=this,e=this.chartOptionsService,r={enabled:!0,suppressEnabledCheckbox:!0,initialFont:{family:e.getChartOption("legend.item.label.fontFamily"),style:e.getChartOption("legend.item.label.fontStyle"),weight:e.getChartOption("legend.item.label.fontWeight"),size:e.getChartOption("legend.item.label.fontSize"),color:e.getChartOption("legend.item.label.color")},setFont:function(e){var r=t.chartOptionsService;e.family&&r.setChartOption("legend.item.label.fontFamily",e.family),e.weight&&r.setChartOption("legend.item.label.fontWeight",e.weight),e.style&&r.setChartOption("legend.item.label.fontStyle",e.style),e.size&&r.setChartOption("legend.item.label.fontSize",e.size),e.color&&r.setChartOption("legend.item.label.color",e.color)}},n=this.createBean(new hx(r));this.legendGroup.addItem(n),this.activePanels.push(n)},e.prototype.destroyActivePanels=function(){var t=this;this.activePanels.forEach((function(e){u.removeFromParent(e.getGui()),t.destroyBean(e)}))},e.prototype.destroy=function(){this.destroyActivePanels(),t.prototype.destroy.call(this)},e.TEMPLATE='<div>\n            <ag-group-component ref="legendGroup">\n                <ag-select ref="legendPositionSelect"></ag-select>\n                <ag-slider ref="legendPaddingSlider"></ag-slider>\n                <ag-slider ref="markerSizeSlider"></ag-slider>\n                <ag-slider ref="markerStrokeSlider"></ag-slider>\n                <ag-slider ref="markerPaddingSlider"></ag-slider>\n                <ag-slider ref="itemPaddingXSlider"></ag-slider>\n                <ag-slider ref="itemPaddingYSlider"></ag-slider>\n            </ag-group-component>\n        </div>',vx([o("legendGroup")],e.prototype,"legendGroup",void 0),vx([o("legendPositionSelect")],e.prototype,"legendPositionSelect",void 0),vx([o("legendPaddingSlider")],e.prototype,"legendPaddingSlider",void 0),vx([o("markerSizeSlider")],e.prototype,"markerSizeSlider",void 0),vx([o("markerStrokeSlider")],e.prototype,"markerStrokeSlider",void 0),vx([o("markerPaddingSlider")],e.prototype,"markerPaddingSlider",void 0),vx([o("itemPaddingXSlider")],e.prototype,"itemPaddingXSlider",void 0),vx([o("itemPaddingYSlider")],e.prototype,"itemPaddingYSlider",void 0),vx([n("chartTranslationService")],e.prototype,"chartTranslationService",void 0),vx([i],e.prototype,"init",null),e}(a),gx=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),mx=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},bx=function(t){function e(e){var r=t.call(this)||this;return r.chartOptionsService=e,r}return gx(e,t),e.prototype.init=function(){this.setTemplate(e.TEMPLATE,{axisTicksGroup:{cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0}}),this.initAxisTicks()},e.prototype.initAxisTicks=function(){var t=this;this.axisTicksGroup.setTitle(this.chartTranslationService.translate("ticks")).hideOpenCloseIcons(!0).hideEnabledCheckbox(!0),this.axisTicksColorPicker.setLabel(this.chartTranslationService.translate("color")).setLabelWidth("flex").setInputWidth(45).setValue(this.chartOptionsService.getAxisProperty("tick.color")).onValueChange((function(e){return t.chartOptionsService.setAxisProperty("tick.color",e)}));var e=function(e,r,n,o){var i=t.chartOptionsService.getAxisProperty(e);r.setLabel(n).setMaxValue(rO(i,o)).setValue(""+i).setTextFieldWidth(45).onValueChange((function(r){return t.chartOptionsService.setAxisProperty(e,r)}))};e("tick.width",this.axisTicksWidthSlider,this.chartTranslationService.translate("width"),10),e("tick.size",this.axisTicksSizeSlider,this.chartTranslationService.translate("length"),30)},e.TEMPLATE='<div>\n            <ag-group-component ref="axisTicksGroup">\n                <ag-color-picker ref="axisTicksColorPicker"></ag-color-picker>\n                <ag-slider ref="axisTicksWidthSlider"></ag-slider>\n                <ag-slider ref="axisTicksSizeSlider"></ag-slider>\n            </ag-group-component>\n        </div>',mx([o("axisTicksGroup")],e.prototype,"axisTicksGroup",void 0),mx([o("axisTicksColorPicker")],e.prototype,"axisTicksColorPicker",void 0),mx([o("axisTicksWidthSlider")],e.prototype,"axisTicksWidthSlider",void 0),mx([o("axisTicksSizeSlider")],e.prototype,"axisTicksSizeSlider",void 0),mx([n("chartTranslationService")],e.prototype,"chartTranslationService",void 0),mx([i],e.prototype,"init",null),e}(a),Cx=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Sx=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},wx=function(t){function e(r){var n=t.call(this,r,e.TEMPLATE)||this;return n.radius=0,n.offsetX=0,n.offsetY=0,n}return Cx(e,t),e.prototype.postConstruct=function(){var e=this;t.prototype.postConstruct.call(this),this.dragListener={eElement:this.eParentCircle,dragStartPixels:0,onDragStart:function(t){e.parentCircleRect=e.eParentCircle.getBoundingClientRect()},onDragging:function(t){return e.calculateAngleDrag(t)},onDragStop:function(){}},this.dragService.addDragSource(this.dragListener),this.eAngleValue.setLabel("").setLabelWidth(5).setInputWidth(45).setMin(0).setMax(360).setValue(""+this.degrees).onValueChange((function(t){null!=t&&""!==t||(t="0"),t=e.eAngleValue.normalizeValue(t);var r=parseFloat(t);r>180&&(r-=360),e.setValue(r)})),this.updateNumberInput(),u.exists(this.getValue())&&this.eAngleValue.setValue(this.normalizeNegativeValue(this.getValue()).toString()),this.addManagedListener(this,l.EVENT_FIELD_VALUE_CHANGED,(function(){var t=e.gridOptionsService.getDocument();e.eAngleValue.getInputElement().contains(t.activeElement)||e.updateNumberInput()}))},e.prototype.updateNumberInput=function(){var t=this.normalizeNegativeValue(this.getValue());this.eAngleValue.setValue(t.toString())},e.prototype.positionChildCircle=function(t){var e=this.parentCircleRect||{width:24,height:24},r=this.eChildCircle,n=e.width/2,o=e.height/2;r.style.left=n+8*Math.cos(t)+"px",r.style.top=o+8*Math.sin(t)+"px"},e.prototype.calculatePolar=function(){var t=this.offsetX,e=this.offsetY,r=Math.atan2(e,t);this.degrees=this.toDegrees(r),this.radius=Math.sqrt(t*t+e*e),this.positionChildCircle(r)},e.prototype.calculateCartesian=function(){var t=this.toRadians(this.getValue()),e=this.getRadius();this.setOffsetX(Math.cos(t)*e).setOffsetY(Math.sin(t)*e)},e.prototype.setOffsetX=function(t){return this.offsetX!==t&&(this.offsetX=t,this.calculatePolar()),this},e.prototype.setOffsetY=function(t){return this.offsetY!==t&&(this.offsetY=t,this.calculatePolar()),this},e.prototype.calculateAngleDrag=function(t){var e=this.parentCircleRect,r=e.width/2,n=e.height/2,o=t.clientX-e.left-r,i=t.clientY-e.top-n,a=Math.atan2(i,o);this.setValue(a,!0)},e.prototype.toDegrees=function(t){return t/Math.PI*180},e.prototype.toRadians=function(t){return t/180*Math.PI},e.prototype.normalizeNegativeValue=function(t){return t<0?360+t:t},e.prototype.normalizeAngle180=function(t){return(t%=2*Math.PI)<-Math.PI?t+=2*Math.PI:t>=Math.PI&&(t-=2*Math.PI),t},e.prototype.getRadius=function(){return this.radius},e.prototype.setRadius=function(t){return this.radius===t||(this.radius=t,this.calculateCartesian()),this},e.prototype.onValueChange=function(t){var e=this;return this.addManagedListener(this,l.EVENT_FIELD_VALUE_CHANGED,(function(){t(e.degrees)})),this},e.prototype.getValue=function(t){return t?this.toRadians(this.degrees):this.degrees},e.prototype.setValue=function(t,e){var r;return r=e?t:this.normalizeAngle180(this.toRadians(t)),t=this.toDegrees(r),this.degrees!==t&&(this.degrees=Math.floor(t),this.calculateCartesian(),this.positionChildCircle(r),this.dispatchEvent({type:l.EVENT_FIELD_VALUE_CHANGED})),this},e.prototype.setWidth=function(t){return u.setFixedWidth(this.getGui(),t),this},e.prototype.setDisabled=function(e){return t.prototype.setDisabled.call(this,e),this.eAngleValue.setDisabled(e),this},e.prototype.destroy=function(){this.dragService.removeDragSource(this.dragListener),t.prototype.destroy.call(this)},e.TEMPLATE='<div class="ag-angle-select">\n            <div ref="eLabel"></div>\n            <div class="ag-wrapper ag-angle-select-wrapper">\n                <div ref="eAngleSelectField" class="ag-angle-select-field">\n                    <div ref="eParentCircle" class="ag-angle-select-parent-circle">\n                        <div ref="eChildCircle" class="ag-angle-select-child-circle"></div>\n                    </div>\n                </div>\n                <ag-input-number-field ref="eAngleValue"></ag-input-number-field>\n            </div>\n        </div>',Sx([o("eLabel")],e.prototype,"eLabel",void 0),Sx([o("eParentCircle")],e.prototype,"eParentCircle",void 0),Sx([o("eChildCircle")],e.prototype,"eChildCircle",void 0),Sx([o("eAngleValue")],e.prototype,"eAngleValue",void 0),Sx([n("dragService")],e.prototype,"dragService",void 0),e}(rt),xx=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ox=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},Ex=function(t){function e(e){var r=e.chartController,n=e.chartOptionsService,o=e.isExpandedOnInit,i=void 0!==o&&o,a=t.call(this)||this;return a.activePanels=[],a.axisLabelUpdateFuncs=[],a.prevXRotation=0,a.prevYRotation=0,a.chartController=r,a.chartOptionsService=n,a.isExpandedOnInit=i,a}return xx(e,t),e.prototype.init=function(){var t=this;this.setTemplate(e.TEMPLATE,{axisGroup:{cssIdentifier:"charts-format-top-level",direction:"vertical"}}),this.initAxis(),this.initAxisTicks(),this.initAxisLabels();this.addManagedListener(this.chartController,nx.EVENT_CHART_UPDATED,(function(){return t.axisLabelUpdateFuncs.forEach((function(t){return t()}))}))},e.prototype.initAxis=function(){var t=this;this.axisGroup.setTitle(this.translate("axis")).toggleGroupExpand(this.isExpandedOnInit).hideEnabledCheckbox(!0),this.axisColorInput.setLabel(this.translate("color")).setLabelWidth("flex").setInputWidth(45).setValue(this.chartOptionsService.getAxisProperty("line.color")).onValueChange((function(e){return t.chartOptionsService.setAxisProperty("line.color",e)}));var e=this.chartOptionsService.getAxisProperty("line.width");this.axisLineWidthSlider.setMaxValue(rO(e,10)).setLabel(this.translate("thickness")).setTextFieldWidth(45).setValue(""+e).onValueChange((function(e){return t.chartOptionsService.setAxisProperty("line.width",e)}))},e.prototype.initAxisTicks=function(){var t=this.createBean(new bx(this.chartOptionsService));this.axisGroup.addItem(t),this.activePanels.push(t)},e.prototype.initAxisLabels=function(){var t=this,e={family:this.chartOptionsService.getAxisProperty("label.fontFamily"),style:this.chartOptionsService.getAxisProperty("label.fontStyle"),weight:this.chartOptionsService.getAxisProperty("label.fontWeight"),size:this.chartOptionsService.getAxisProperty("label.fontSize"),color:this.chartOptionsService.getAxisProperty("label.color")},r={name:this.translate("labels"),enabled:!0,suppressEnabledCheckbox:!0,initialFont:e,setFont:function(e){e.family&&t.chartOptionsService.setAxisProperty("label.fontFamily",e.family),e.weight&&t.chartOptionsService.setAxisProperty("label.fontWeight",e.weight),e.style&&t.chartOptionsService.setAxisProperty("label.fontStyle",e.style),e.size&&t.chartOptionsService.setAxisProperty("label.fontSize",e.size),e.color&&t.chartOptionsService.setAxisProperty("label.color",e.color)}},n=this.createBean(new hx(r));this.axisGroup.addItem(n),this.activePanels.push(n),this.addAdditionalLabelComps(n)},e.prototype.addAdditionalLabelComps=function(t){this.addLabelPadding(t);var e=this.createRotationWidgets(),r=e.xRotationComp,n=e.yRotationComp,o=this.initLabelRotations(r,n);t.addCompToPanel(o),t.addCompToPanel(r),t.addCompToPanel(n)},e.prototype.initLabelRotations=function(t,e){var r,n,o=this,i=function(t){return o.chartOptionsService.getLabelRotation(t)},a=function(t,e){o.chartOptionsService.setLabelRotation(t,e)},s=(r=i("xAxis"),n=i("yAxis"),null==r&&null==n&&o.chartOptionsService.getAxisProperty("label.autoRotate")),l=this.createBean(new et).setLabel(this.translate("autoRotate")).setValue(s).onValueChange((function(r){o.chartOptionsService.setAxisProperty("label.autoRotate",r),r?(o.prevXRotation=i("xAxis"),o.prevYRotation=i("yAxis"),a("xAxis",void 0),a("yAxis",void 0)):(a("xAxis",o.prevXRotation),a("yAxis",o.prevYRotation)),t.setDisabled(r),e.setDisabled(r)}));return t.setDisabled(s),e.setDisabled(s),l},e.prototype.createRotationWidgets=function(){var t=this,e=String.fromCharCode(176),r=function(r,n){var o=t.chartTranslationService.translate(r)+" "+e,i=t.chartOptionsService.getLabelRotation(n),a=(new wx).setLabel(o).setLabelWidth("flex").setValue(i||0).onValueChange((function(e){return t.chartOptionsService.setLabelRotation(n,e)}));return t.axisLabelUpdateFuncs.push((function(){var e=t.chartOptionsService.getLabelRotation(n);a.setValue(e||0)})),t.createBean(a)};return{xRotationComp:r("xRotation","xAxis"),yRotationComp:r("yRotation","yAxis")}},e.prototype.addLabelPadding=function(t){var e=this,r=this.createBean(new nt),n=this.chartOptionsService.getAxisProperty("label.padding");r.setLabel(this.chartTranslationService.translate("padding")).setMaxValue(rO(n,30)).setValue(""+n).setTextFieldWidth(45).onValueChange((function(t){return e.chartOptionsService.setAxisProperty("label.padding",t)})),t.addCompToPanel(r)},e.prototype.translate=function(t,e){return this.chartTranslationService.translate(t,e)},e.prototype.destroyActivePanels=function(){var t=this;this.activePanels.forEach((function(e){u.removeFromParent(e.getGui()),t.destroyBean(e)}))},e.prototype.destroy=function(){this.destroyActivePanels(),t.prototype.destroy.call(this)},e.TEMPLATE='<div>\n            <ag-group-component ref="axisGroup">\n                <ag-color-picker ref="axisColorInput"></ag-color-picker>\n                <ag-slider ref="axisLineWidthSlider"></ag-slider>\n            </ag-group-component>\n        </div>',Ox([o("axisGroup")],e.prototype,"axisGroup",void 0),Ox([o("axisColorInput")],e.prototype,"axisColorInput",void 0),Ox([o("axisLineWidthSlider")],e.prototype,"axisLineWidthSlider",void 0),Ox([n("chartTranslationService")],e.prototype,"chartTranslationService",void 0),Ox([i],e.prototype,"init",null),e}(a),Tx=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Px=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},Dx=function(t){function e(e){var r=e.chartOptionsService,n=e.isExpandedOnInit,o=void 0!==n&&n,i=t.call(this)||this;return i.chartOptionsService=r,i.isExpandedOnInit=o,i}return Tx(e,t),e.prototype.init=function(){this.setTemplate(e.TEMPLATE,{navigatorGroup:{cssIdentifier:"charts-format-top-level",direction:"vertical"}}),this.initNavigator()},e.prototype.initNavigator=function(){var t=this,e=this.chartTranslationService;this.navigatorGroup.setTitle(e.translate("navigator")).hideEnabledCheckbox(!1).setEnabled(this.chartOptionsService.getChartOption("navigator.enabled")||!1).onEnableChange((function(e){t.chartOptionsService.setChartOption("navigator.enabled",e),t.navigatorGroup.toggleGroupExpand(!0)})).toggleGroupExpand(this.isExpandedOnInit);var r=this.chartOptionsService.getChartOption("navigator.height");this.navigatorHeightSlider.setLabel(e.translate("height")).setMinValue(10).setMaxValue(rO(r,60)).setTextFieldWidth(45).setValue(""+(r||30)).onValueChange((function(e){return t.chartOptionsService.setChartOption("navigator.height",e)}))},e.prototype.destroy=function(){t.prototype.destroy.call(this)},e.TEMPLATE='<div>\n            <ag-group-component ref="navigatorGroup">\n                <ag-slider ref="navigatorHeightSlider"></ag-slider>\n            </ag-group-component>\n        </div>',Px([o("navigatorGroup")],e.prototype,"navigatorGroup",void 0),Px([o("navigatorHeightSlider")],e.prototype,"navigatorHeightSlider",void 0),Px([n("chartTranslationService")],e.prototype,"chartTranslationService",void 0),Px([i],e.prototype,"init",null),e}(a),Ax=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Mx=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},_x=function(t){function e(e,r){var n=t.call(this)||this;return n.chartOptionsService=e,n.chartController=r,n}return Ax(e,t),e.prototype.init=function(){var t=this;this.setTemplate(e.TEMPLATE,{chartPaddingGroup:{cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0}}),this.addManagedListener(this.eventService,l.EVENT_CHART_OPTIONS_CHANGED,(function(e){t.updateTopPadding(e.chartOptions)})),this.initGroup(),this.initChartPaddingItems()},e.prototype.initGroup=function(){this.chartPaddingGroup.setTitle(this.chartTranslationService.translate("padding")).hideOpenCloseIcons(!0).hideEnabledCheckbox(!0)},e.prototype.initChartPaddingItems=function(){var t=this,e=function(e,r){var n=t.chartOptionsService.getChartOption("padding."+e);r.setLabel(t.chartTranslationService.translate(e)).setMaxValue(rO(n,200)).setValue(""+n).setTextFieldWidth(45).onValueChange((function(r){return t.chartOptionsService.setChartOption("padding."+e,r)}))};e("top",this.paddingTopSlider),e("right",this.paddingRightSlider),e("bottom",this.paddingBottomSlider),e("left",this.paddingLeftSlider)},e.prototype.updateTopPadding=function(t){var e,r,n=null===(r=null===(e=t[this.chartController.getChartSeriesTypes()[0]])||void 0===e?void 0:e.padding)||void 0===r?void 0:r.top;null!=n&&this.paddingTopSlider.setValue(n)},e.TEMPLATE='<div>\n            <ag-group-component ref="chartPaddingGroup">\n                <ag-slider ref="paddingTopSlider"></ag-slider>\n                <ag-slider ref="paddingRightSlider"></ag-slider>\n                <ag-slider ref="paddingBottomSlider"></ag-slider>\n                <ag-slider ref="paddingLeftSlider"></ag-slider>\n            </ag-group-component>\n        <div>',Mx([o("chartPaddingGroup")],e.prototype,"chartPaddingGroup",void 0),Mx([o("paddingTopSlider")],e.prototype,"paddingTopSlider",void 0),Mx([o("paddingRightSlider")],e.prototype,"paddingRightSlider",void 0),Mx([o("paddingBottomSlider")],e.prototype,"paddingBottomSlider",void 0),Mx([o("paddingLeftSlider")],e.prototype,"paddingLeftSlider",void 0),Mx([n("chartTranslationService")],e.prototype,"chartTranslationService",void 0),Mx([i],e.prototype,"init",null),e}(a),Rx=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),kx=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},Fx=function(t){function e(e){var r=t.call(this)||this;return r.chartOptionsService=e,r}return Rx(e,t),e.prototype.init=function(){this.setTemplate(e.TEMPLATE,{chartBackgroundGroup:{cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0}}),this.initGroup(),this.initColorPicker()},e.prototype.initGroup=function(){var t=this;this.group.setTitle(this.chartTranslationService.translate("background")).setEnabled(this.chartOptionsService.getChartOption("background.visible")).hideOpenCloseIcons(!0).hideEnabledCheckbox(!1).onEnableChange((function(e){return t.chartOptionsService.setChartOption("background.visible",e)}))},e.prototype.initColorPicker=function(){var t=this;this.colorPicker.setLabel(this.chartTranslationService.translate("color")).setLabelWidth("flex").setInputWidth(45).setValue(this.chartOptionsService.getChartOption("background.fill")).onValueChange((function(e){return t.chartOptionsService.setChartOption("background.fill",e)}))},e.TEMPLATE='<div>\n            <ag-group-component ref="chartBackgroundGroup">\n                <ag-color-picker ref="colorPicker"></ag-color-picker>\n            </ag-group-component>\n        <div>',kx([o("chartBackgroundGroup")],e.prototype,"group",void 0),kx([o("colorPicker")],e.prototype,"colorPicker",void 0),kx([n("chartTranslationService")],e.prototype,"chartTranslationService",void 0),kx([i],e.prototype,"init",null),e}(a),Ix=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Lx=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},Nx=function(t){function e(r){var n=t.call(this,e.TEMPLATE)||this;return n.chartOptionsService=r,n.activePanels=[],n}return Ix(e,t),e.prototype.init=function(){this.initFontPanel(),this.titlePlaceholder=this.chartTranslationService.translate("titlePlaceholder")},e.prototype.hasTitle=function(){var t=this.getOption("title");return t&&t.enabled&&t.text&&t.text.length>0},e.prototype.initFontPanel=function(){var t=this,e=this.hasTitle(),r=function(e,r){e.family&&t.setOption("title.fontFamily",e.family,r),e.weight&&t.setOption("title.fontWeight",e.weight,r),e.style&&t.setOption("title.fontStyle",e.style,r),e.size&&t.setOption("title.fontSize",e.size,r),e.color&&t.setOption("title.color",e.color,r)},n={family:this.getOption("title.fontFamily"),style:this.getOption("title.fontStyle"),weight:this.getOption("title.fontWeight"),size:this.getOption("title.fontSize"),color:this.getOption("title.color")};e||r(n,!0);var o={name:this.chartTranslationService.translate("title"),enabled:e,suppressEnabledCheckbox:!1,initialFont:n,setFont:r,setEnabled:function(e){if(t.toolbarExists()){var r=t.getOption("padding.top");t.setOption("padding.top",e?r-20:r+20)}t.setOption("title.enabled",e);var n=t.getOption("title.text"),o="Title"===n||0===(null==n?void 0:n.trim().length);e&&o&&t.setOption("title.text",t.titlePlaceholder)}},i=this.createBean(new hx(o));i.addItemToPanel(this.createSpacingSlicer()),this.getGui().appendChild(i.getGui()),this.activePanels.push(i),this.addManagedListener(this.eventService,"chartTitleEdit",(function(){i.setEnabled(t.hasTitle())}))},e.prototype.createSpacingSlicer=function(){var t=this,e=this.createBean(new nt),r=this.chartOptionsService.getChartOption("title.spacing");return e.setLabel(this.chartTranslationService.translate("spacing")).setMaxValue(Math.max(r,100)).setValue(""+r).setTextFieldWidth(45).onValueChange((function(e){return t.chartOptionsService.setChartOption("title.spacing",e)})),e},e.prototype.toolbarExists=function(){var t=this.gridOptionsService.getCallback("getChartToolbarItems");if(!t)return!0;var e={defaultItems:["chartUnlink","chartDownload"]};return["chartLink","chartUnlink","chartDownload"].some((function(r){var n;return null===(n=t&&t(e))||void 0===n?void 0:n.includes(r)}))},e.prototype.getOption=function(t){return this.chartOptionsService.getChartOption(t)},e.prototype.setOption=function(t,e,r){this.chartOptionsService.setChartOption(t,e,r)},e.prototype.destroyActivePanels=function(){var t=this;this.activePanels.forEach((function(e){u.removeFromParent(e.getGui()),t.destroyBean(e)}))},e.prototype.destroy=function(){this.destroyActivePanels(),t.prototype.destroy.call(this)},e.TEMPLATE="<div></div>",Lx([n("chartTranslationService")],e.prototype,"chartTranslationService",void 0),Lx([i],e.prototype,"init",null),e}(a),Gx=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),jx=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},Vx=function(t){function e(e){var r=e.chartController,n=e.chartOptionsService,o=e.isExpandedOnInit,i=void 0!==o&&o,a=t.call(this)||this;return a.activePanels=[],a.chartController=r,a.chartOptionsService=n,a.isExpandedOnInit=i,a}return Gx(e,t),e.prototype.init=function(){this.setTemplate(e.TEMPLATE,{chartGroup:{cssIdentifier:"charts-format-top-level",direction:"vertical"}}),this.initGroup(),this.initTitles(),this.initPaddingPanel(),this.initBackgroundPanel()},e.prototype.initGroup=function(){this.chartGroup.setTitle(this.chartTranslationService.translate("chart")).toggleGroupExpand(this.isExpandedOnInit).hideEnabledCheckbox(!0)},e.prototype.initTitles=function(){var t=this.createBean(new Nx(this.chartOptionsService));this.chartGroup.addItem(t),this.activePanels.push(t)},e.prototype.initPaddingPanel=function(){var t=this.createBean(new _x(this.chartOptionsService,this.chartController));this.chartGroup.addItem(t),this.activePanels.push(t)},e.prototype.initBackgroundPanel=function(){var t=this.createBean(new Fx(this.chartOptionsService));this.chartGroup.addItem(t),this.activePanels.push(t)},e.prototype.destroyActivePanels=function(){var t=this;this.activePanels.forEach((function(e){u.removeFromParent(e.getGui()),t.destroyBean(e)}))},e.prototype.destroy=function(){this.destroyActivePanels(),t.prototype.destroy.call(this)},e.TEMPLATE='<div>\n            <ag-group-component ref="chartGroup"></ag-group-component>\n        </div>',jx([o("chartGroup")],e.prototype,"chartGroup",void 0),jx([n("chartTranslationService")],e.prototype,"chartTranslationService",void 0),jx([i],e.prototype,"init",null),e}(a),Bx=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ux=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},Hx=function(t){function e(e,r){var n=t.call(this)||this;return n.chartOptionsService=e,n.getSelectedSeries=r,n}return Bx(e,t),e.prototype.init=function(){this.setTemplate(e.TEMPLATE,{shadowGroup:{cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0}}),this.shadowBlurSlider.setTextFieldWidth(45),this.shadowXOffsetSlider.setTextFieldWidth(45),this.shadowYOffsetSlider.setTextFieldWidth(45),this.initSeriesShadow()},e.prototype.initSeriesShadow=function(){var t=this;this.shadowGroup.setTitle(this.chartTranslationService.translate("shadow")).setEnabled(this.chartOptionsService.getSeriesOption("shadow.enabled",this.getSelectedSeries())).hideOpenCloseIcons(!0).hideEnabledCheckbox(!1).onEnableChange((function(e){return t.chartOptionsService.setSeriesOption("shadow.enabled",e,t.getSelectedSeries())})),this.shadowColorPicker.setLabel(this.chartTranslationService.translate("color")).setLabelWidth("flex").setInputWidth(45).setValue(this.chartOptionsService.getSeriesOption("shadow.color",this.getSelectedSeries())).onValueChange((function(e){return t.chartOptionsService.setSeriesOption("shadow.color",e,t.getSelectedSeries())}));var e=function(e,r,n,o){var i=t.chartOptionsService.getSeriesOption("shadow."+r,t.getSelectedSeries());e.setLabel(t.chartTranslationService.translate(r)).setMinValue(n).setMaxValue(rO(i,o)).setValue(""+i).onValueChange((function(e){return t.chartOptionsService.setSeriesOption("shadow."+r,e,t.getSelectedSeries())}))};e(this.shadowBlurSlider,"blur",0,20),e(this.shadowXOffsetSlider,"xOffset",-10,10),e(this.shadowYOffsetSlider,"yOffset",-10,10)},e.TEMPLATE='<div>\n            <ag-group-component ref="shadowGroup">\n                <ag-color-picker ref="shadowColorPicker"></ag-color-picker>\n                <ag-slider ref="shadowBlurSlider"></ag-slider>\n                <ag-slider ref="shadowXOffsetSlider"></ag-slider>\n                <ag-slider ref="shadowYOffsetSlider"></ag-slider>\n            </ag-group-component>\n        </div>',Ux([o("shadowGroup")],e.prototype,"shadowGroup",void 0),Ux([o("shadowColorPicker")],e.prototype,"shadowColorPicker",void 0),Ux([o("shadowBlurSlider")],e.prototype,"shadowBlurSlider",void 0),Ux([o("shadowXOffsetSlider")],e.prototype,"shadowXOffsetSlider",void 0),Ux([o("shadowYOffsetSlider")],e.prototype,"shadowYOffsetSlider",void 0),Ux([n("chartTranslationService")],e.prototype,"chartTranslationService",void 0),Ux([i],e.prototype,"init",null),e}(a);function zx(t){var e=t.labelName,r=t.chartOptionsService,n=t.getSelectedSeries,o=t.seriesOptionLabelProperty,i=function(t){return o+"."+t},a=function(t){var e=i(t);return r.getSeriesOption(e,n())},s=function(t,e){var o=i(t);r.setSeriesOption(o,e,n())},l={family:a("fontFamily"),style:a("fontStyle"),weight:a("fontWeight"),size:a("fontSize"),color:a("color")};return{name:e,enabled:a("enabled")||!1,setEnabled:function(t){return s("enabled",t)},suppressEnabledCheckbox:!1,initialFont:l,setFont:function(t){t.family&&s("fontFamily",t.family),t.weight&&s("fontWeight",t.weight),t.style&&s("fontStyle",t.style),t.size&&s("fontSize",t.size),t.color&&s("color",t.color)}}}var Wx=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Kx=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},Xx=function(t){function e(e,r){var n=t.call(this)||this;return n.chartOptionsService=e,n.getSelectedSeries=r,n}return Wx(e,t),e.prototype.init=function(){this.setTemplate(e.TEMPLATE,{seriesMarkersGroup:{cssIdentifier:"charts-format-sub-level",direction:"vertical"}}),this.initMarkers()},e.prototype.initMarkers=function(){var t=this;this.seriesMarkerShapeSelect.addOptions([{value:"square",text:"Square"},{value:"circle",text:"Circle"},{value:"cross",text:"Cross"},{value:"diamond",text:"Diamond"},{value:"plus",text:"Plus"},{value:"triangle",text:"Triangle"},{value:"heart",text:"Heart"}]).setLabel(this.chartTranslationService.translate("shape")).setValue(this.getSeriesOption("marker.shape")).onValueChange((function(e){return t.setSeriesOption("marker.shape",e)}));var e=this.chartOptionsService.getChartType(),r=u.includes(["scatter","bubble"],e);this.seriesMarkersGroup.setTitle(this.chartTranslationService.translate("markers")).hideEnabledCheckbox(r).setEnabled(this.getSeriesOption("marker.enabled")||!1).hideOpenCloseIcons(!0).onEnableChange((function(e){return t.setSeriesOption("marker.enabled",e)}));var n=function(e,r,n,o){var i=t.getSeriesOption(e);r.setLabel(t.chartTranslationService.translate(n)).setMaxValue(rO(i,o)).setValue(""+i).setTextFieldWidth(45).onValueChange((function(r){return t.setSeriesOption(e,r)}))};"bubble"===e?(n("marker.maxSize",this.seriesMarkerMinSizeSlider,"maxSize",60),n("marker.size",this.seriesMarkerSizeSlider,"minSize",60)):(this.seriesMarkerMinSizeSlider.setDisplayed(!1),n("marker.size",this.seriesMarkerSizeSlider,"size",60)),n("marker.strokeWidth",this.seriesMarkerStrokeWidthSlider,"strokeWidth",10)},e.prototype.getSeriesOption=function(t){return this.chartOptionsService.getSeriesOption(t,this.getSelectedSeries())},e.prototype.setSeriesOption=function(t,e){this.chartOptionsService.setSeriesOption(t,e,this.getSelectedSeries())},e.TEMPLATE='<div>\n            <ag-group-component ref="seriesMarkersGroup">\n                <ag-select ref="seriesMarkerShapeSelect"></ag-select>\n                <ag-slider ref="seriesMarkerMinSizeSlider"></ag-slider>\n                <ag-slider ref="seriesMarkerSizeSlider"></ag-slider>\n                <ag-slider ref="seriesMarkerStrokeWidthSlider"></ag-slider>\n            </ag-group-component>\n        </div>',Kx([o("seriesMarkersGroup")],e.prototype,"seriesMarkersGroup",void 0),Kx([o("seriesMarkerShapeSelect")],e.prototype,"seriesMarkerShapeSelect",void 0),Kx([o("seriesMarkerSizeSlider")],e.prototype,"seriesMarkerSizeSlider",void 0),Kx([o("seriesMarkerMinSizeSlider")],e.prototype,"seriesMarkerMinSizeSlider",void 0),Kx([o("seriesMarkerStrokeWidthSlider")],e.prototype,"seriesMarkerStrokeWidthSlider",void 0),Kx([n("chartTranslationService")],e.prototype,"chartTranslationService",void 0),Kx([i],e.prototype,"init",null),e}(a),Yx=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),qx=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},Zx=function(t){function e(e,r){var n=t.call(this)||this;return n.chartOptionsService=e,n.getSelectedSeries=r,n}return Yx(e,t),e.prototype.init=function(){this.setTemplate(e.TEMPLATE,{calloutGroup:{cssIdentifier:"charts-format-sub-level",direction:"vertical"}}),this.initCalloutOptions()},e.prototype.initCalloutOptions=function(){var t=this;this.calloutGroup.setTitle(this.chartTranslationService.translate("callout")).setEnabled(!0).hideOpenCloseIcons(!0).hideEnabledCheckbox(!0);var e=function(e,r,n,o){var i=t.chartOptionsService.getSeriesOption(e,t.getSelectedSeries());r.setLabel(t.chartTranslationService.translate(n)).setMaxValue(rO(i,o)).setValue(""+i).setTextFieldWidth(45).onValueChange((function(r){return t.chartOptionsService.setSeriesOption(e,r,t.getSelectedSeries())}))};e("calloutLine.length",this.calloutLengthSlider,"length",40),e("calloutLine.strokeWidth",this.calloutStrokeWidthSlider,"strokeWidth",10),e("calloutLabel.offset",this.labelOffsetSlider,"offset",30)},e.TEMPLATE='<div>\n            <ag-group-component ref="calloutGroup">\n                <ag-slider ref="calloutLengthSlider"></ag-slider>\n                <ag-slider ref="calloutStrokeWidthSlider"></ag-slider>\n                <ag-slider ref="labelOffsetSlider"></ag-slider>\n            </ag-group-component>\n        </div>',qx([o("calloutGroup")],e.prototype,"calloutGroup",void 0),qx([o("calloutLengthSlider")],e.prototype,"calloutLengthSlider",void 0),qx([o("calloutStrokeWidthSlider")],e.prototype,"calloutStrokeWidthSlider",void 0),qx([o("labelOffsetSlider")],e.prototype,"labelOffsetSlider",void 0),qx([n("chartTranslationService")],e.prototype,"chartTranslationService",void 0),qx([i],e.prototype,"init",null),e}(a),Jx=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),$x=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},Qx=function(t){function e(e){var r=e.chartController,n=e.chartOptionsService,o=e.seriesType,i=e.isExpandedOnInit,a=void 0!==i&&i,s=t.call(this)||this;return s.activePanels=[],s.widgetFuncs={lineWidth:function(){return s.initLineWidth()},strokeWidth:function(){return s.initStrokeWidth()},lineDash:function(){return s.initLineDash()},lineOpacity:function(){return s.initLineOpacity()},fillOpacity:function(){return s.initFillOpacity()},markers:function(){return s.initMarkers()},labels:function(){return s.initLabels()},shadow:function(){return s.initShadow()},tooltips:function(){return s.initTooltips()},bins:function(){return s.initBins()}},s.seriesWidgetMappings={area:["tooltips","lineWidth","lineDash","lineOpacity","fillOpacity","markers","labels","shadow"],bar:["tooltips","strokeWidth","lineDash","lineOpacity","fillOpacity","labels","shadow"],column:["tooltips","strokeWidth","lineDash","lineOpacity","fillOpacity","labels","shadow"],line:["tooltips","lineWidth","lineDash","lineOpacity","markers","labels"],histogram:["tooltips","bins","strokeWidth","lineDash","lineOpacity","fillOpacity","labels","shadow"],scatter:["tooltips","markers","labels"],pie:["tooltips","strokeWidth","lineOpacity","fillOpacity","labels","shadow"]},s.chartController=r,s.chartOptionsService=n,s.seriesType=o||s.getChartSeriesType(),s.isExpandedOnInit=a,s}return Jx(e,t),e.prototype.init=function(){this.setTemplate(e.TEMPLATE,{seriesGroup:{cssIdentifier:"charts-format-top-level",direction:"vertical"}}),this.seriesGroup.setTitle(this.translate("series")).toggleGroupExpand(this.isExpandedOnInit).hideEnabledCheckbox(!0),this.addManagedListener(this.chartController,nx.EVENT_CHART_SERIES_CHART_TYPE_CHANGED,this.refreshWidgets.bind(this)),this.refreshWidgets()},e.prototype.refreshWidgets=function(){var t=this;this.destroyActivePanels(),this.chartController.getChartProxy().getChart().waitForUpdate().then((function(){t.chartController.isComboChart()&&(t.updateSeriesType(),t.initSeriesSelect()),t.seriesWidgetMappings[t.seriesType].forEach((function(e){return t.widgetFuncs[e]()}))})).catch((function(t){return console.error("AG Grid - chart rendering failed",t)}))},e.prototype.initSeriesSelect=function(){var t=this,e=this.seriesGroup.createManagedBean(new j);e.setLabel(this.translate("seriesType")).setLabelAlignment("left").setLabelWidth("flex").setInputWidth(100).addOptions(this.getSeriesSelectOptions()).setValue(""+this.seriesType).onValueChange((function(e){t.seriesType=e,t.refreshWidgets()})),this.seriesGroup.addItem(e),this.activePanels.push(e)},e.prototype.initTooltips=function(){var t=this,e=this.createBean(new tt);e.setLabel(this.translate("tooltips")).setLabelAlignment("left").setLabelWidth("flex").setInputWidth(45).setValue(this.getSeriesOption("tooltip.enabled")||!1).onValueChange((function(e){return t.setSeriesOption("tooltip.enabled",e)})),this.addWidget(e)},e.prototype.initStrokeWidth=function(){var t=this,e=this.getSeriesOption("strokeWidth"),r=this.createBean(new nt);r.setLabel(this.translate("strokeWidth")).setMaxValue(rO(e,10)).setTextFieldWidth(45).setValue(""+e).onValueChange((function(e){return t.setSeriesOption("strokeWidth",e)})),this.addWidget(r)},e.prototype.initLineWidth=function(){var t=this,e=this.getSeriesOption("strokeWidth"),r=this.createBean(new nt);r.setLabel(this.translate("lineWidth")).setMaxValue(rO(e,10)).setTextFieldWidth(45).setValue(""+e).onValueChange((function(e){return t.setSeriesOption("strokeWidth",e)})),this.addWidget(r)},e.prototype.initLineDash=function(){var t=this,e=this.getSeriesOption("lineDash"),r=e?e[0]:0,n=this.createBean(new nt);n.setLabel(this.translate("lineDash")).setMaxValue(rO(r,30)).setTextFieldWidth(45).setValue(""+r).onValueChange((function(e){return t.setSeriesOption("lineDash",[e])})),this.addWidget(n)},e.prototype.initLineOpacity=function(){var t=this,e=this.getSeriesOption("strokeOpacity"),r=this.createBean(new nt);r.setLabel(this.translate("strokeOpacity")).setStep(.05).setMaxValue(rO(e,1)).setTextFieldWidth(45).setValue(""+e).onValueChange((function(e){return t.setSeriesOption("strokeOpacity",e)})),this.addWidget(r)},e.prototype.initFillOpacity=function(){var t=this,e=this.getSeriesOption("fillOpacity"),r=this.createBean(new nt);r.setLabel(this.translate("fillOpacity")).setStep(.05).setMaxValue(rO(e,1)).setTextFieldWidth(45).setValue(""+e).onValueChange((function(e){return t.setSeriesOption("fillOpacity",e)})),this.addWidget(r)},e.prototype.initLabels=function(){var t=this,e="pie"===this.seriesType?"calloutLabel":"label",r=zx({labelName:"pie"===this.seriesType?this.chartTranslationService.translate("calloutLabels"):this.chartTranslationService.translate("labels"),chartOptionsService:this.chartOptionsService,getSelectedSeries:function(){return t.seriesType},seriesOptionLabelProperty:e}),n=this.createBean(new hx(r));if("pie"===this.seriesType){var o=this.createBean(new Zx(this.chartOptionsService,(function(){return t.seriesType})));n.addCompToPanel(o),this.activePanels.push(o)}if(this.addWidget(n),"pie"===this.seriesType){var i=zx({labelName:this.chartTranslationService.translate("sectorLabels"),chartOptionsService:this.chartOptionsService,getSelectedSeries:function(){return t.seriesType},seriesOptionLabelProperty:"sectorLabel"}),a=this.createBean(new hx(i)),s=this.getSectorLabelPositionRatio();a.addCompToPanel(s),this.addWidget(a)}},e.prototype.getSectorLabelPositionRatio=function(){var t=this,e=this.chartOptionsService.getSeriesOption("sectorLabel.positionRatio",this.seriesType);return this.createBean(new nt).setLabel(this.translate("positionRatio")).setStep(.05).setMaxValue(rO(e,1)).setTextFieldWidth(45).setValue(""+e).onValueChange((function(e){return t.chartOptionsService.setSeriesOption("sectorLabel.positionRatio",e,t.seriesType)}))},e.prototype.initShadow=function(){var t=this,e=this.createBean(new Hx(this.chartOptionsService,(function(){return t.seriesType})));this.addWidget(e)},e.prototype.initMarkers=function(){var t=this,e=this.createBean(new Xx(this.chartOptionsService,(function(){return t.seriesType})));this.addWidget(e)},e.prototype.initBins=function(){var t,e=this,r=(null!==(t=this.getSeriesOption("bins"))&&void 0!==t?t:this.getSeriesOption("calculatedBins")).length,n=this.createBean(new nt);n.setLabel(this.translate("histogramBinCount")).setMinValue(0).setMaxValue(rO(r,20)).setTextFieldWidth(45).setValue(""+r).onValueChange((function(t){return e.setSeriesOption("binCount",t)})),this.addWidget(n)},e.prototype.addWidget=function(t){this.seriesGroup.addItem(t),this.activePanels.push(t)},e.prototype.getSeriesOption=function(t){return this.chartOptionsService.getSeriesOption(t,this.seriesType)},e.prototype.setSeriesOption=function(t,e){this.chartOptionsService.setSeriesOption(t,e,this.seriesType)},e.prototype.getChartSeriesType=function(){if(0===this.chartController.getSeriesChartTypes().length)return"column";var t=this.chartController.getSeriesChartTypes()[0].chartType;return"columnLineCombo"===t?"column":"areaColumnCombo"===t?"area":Nw(t)},e.prototype.getSeriesSelectOptions=function(){var t=this;this.seriesSelectOptions||(this.seriesSelectOptions=new Map([["area",{value:"area",text:this.translate("area","Area")}],["bar",{value:"bar",text:this.translate("bar","Bar")}],["column",{value:"column",text:this.translate("column","Column")}],["line",{value:"line",text:this.translate("line","Line")}],["scatter",{value:"scatter",text:this.translate("scatter","Scatter")}],["histogram",{value:"histogram",text:this.translate("histogram","Histogram")}],["pie",{value:"pie",text:this.translate("pie","Pie")}]]));var e=new Set;return this.chartController.getActiveSeriesChartTypes().forEach((function(r){var n=Nw(r.chartType);e.add(t.seriesSelectOptions.get(n))})),Array.from(e)},e.prototype.updateSeriesType=function(){var t=this.chartController.getActiveSeriesChartTypes().map((function(t){return Nw(t.chartType)}));!t.includes(this.seriesType)&&t.length>0&&(this.seriesType=t[0])},e.prototype.translate=function(t,e){return this.chartTranslationService.translate(t,e)},e.prototype.destroyActivePanels=function(){var t=this;this.activePanels.forEach((function(e){u.removeFromParent(e.getGui()),t.destroyBean(e)}))},e.prototype.destroy=function(){this.destroyActivePanels(),t.prototype.destroy.call(this)},e.TEMPLATE='<div>\n            <ag-group-component ref="seriesGroup">\n            </ag-group-component>\n        </div>',$x([o("seriesGroup")],e.prototype,"seriesGroup",void 0),$x([n("chartTranslationService")],e.prototype,"chartTranslationService",void 0),$x([i],e.prototype,"init",null),e}(a),tO=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),eO=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a};function rO(t,e){return Math.max(t,e)}var nO={groups:[{type:"chart"},{type:"legend"},{type:"series"},{type:"axis"},{type:"navigator"}]},oO=function(t){function e(r,n){var o=t.call(this,e.TEMPLATE)||this;return o.chartController=r,o.chartOptionsService=n,o.panels=[],o.isGroupPanelShownInSeries=function(t,e){if(["chart","legend","series"].includes(t))return!0;return!(!["axis","navigator"].includes(t)||!["bar","column","line","area","scatter","histogram","cartesian"].includes(e))},o}return tO(e,t),e.prototype.init=function(){var t=this;this.createPanels(),this.addManagedListener(this.chartController,nx.EVENT_CHART_UPDATED,(function(){return t.createPanels(!0)})),this.addManagedListener(this.chartController,nx.EVENT_CHART_API_UPDATE,(function(){return t.createPanels(!1)}))},e.prototype.createPanels=function(t){var e,r=this,n=this.chartController.getChartType(),o=this.chartController.isGrouping(),i=Nw(n);t&&n===this.chartType&&o===this.isGrouping||(this.destroyPanels(),null===(e=this.getFormatPanelDef().groups)||void 0===e||e.forEach((function(t){var e=t.type;if(r.isGroupPanelShownInSeries(e,i)){var n={chartController:r.chartController,chartOptionsService:r.chartOptionsService,isExpandedOnInit:t.isOpen,seriesType:i};"chart"===e?r.addComponent(new Vx(n)):"legend"===e?r.addComponent(new yx(n)):"axis"===e?r.addComponent(new Ex(n)):"series"===e?r.addComponent(new Qx(n)):"navigator"===e?r.addComponent(new Dx(n)):console.warn("AG Grid: invalid charts format panel group name supplied: '"+t.type+"'")}})),this.chartType=n,this.isGrouping=o)},e.prototype.getFormatPanelDef=function(){var t,e=null===(t=this.gridOptionsService.get("chartToolPanelsDef"))||void 0===t?void 0:t.formatPanel;return e||nO},e.prototype.addComponent=function(t){this.createBean(t),this.panels.push(t),t.addCssClass("ag-chart-format-section"),this.getGui().appendChild(t.getGui())},e.prototype.destroyPanels=function(){var t=this;this.panels.forEach((function(e){u.removeFromParent(e.getGui()),t.destroyBean(e)}))},e.prototype.destroy=function(){this.destroyPanels(),t.prototype.destroy.call(this)},e.TEMPLATE='<div class="ag-chart-format-wrapper"></div>',eO([i],e.prototype,"init",null),e}(a),iO=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),aO=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},sO=function(t){function e(e,r){var n=t.call(this)||this;n.size=58,n.padding=5,n.root=new fl;var o=new xl({document:window.document,width:n.size,height:n.size});return o.canvas.element.classList.add("ag-chart-mini-thumbnail-canvas"),o.root=n.root,o.container=e,n.scene=o,n.tooltipName=r,n}return iO(e,t),e.prototype.init=function(){this.scene.canvas.element.title=this.chartTranslationService.translate(this.tooltipName),this.scene.render().catch((function(t){return console.error("AG Grid - chart update failed",t)}))},aO([n("chartTranslationService")],e.prototype,"chartTranslationService",void 0),aO([i],e.prototype,"init",null),e}(a),lO=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),uO=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},cO=function(t){function e(e,r){var n=t.call(this,e,r)||this;return n.stroke="gray",n.axisOvershoot=3,n}return lO(e,t),e.prototype.addAxes=function(){var t=this.size,e=this.padding,r=new hf;r.x1=e,r.y1=e,r.x2=e,r.y2=t-e+this.axisOvershoot,r.stroke=this.stroke;var n=new hf;n.x1=e-this.axisOvershoot+1,n.y1=t-e,n.x2=t-e+1,n.y2=t-e,n.stroke=this.stroke;var o=this.root;o.append(r),o.append(n)},uO([i],e.prototype,"addAxes",null),e}(sO);function pO(t){var e=t.stacked,r=t.size,n=t.padding,o=t.xScalePadding,i=t.xScaleDomain,a=t.yScaleDomain,s=new cf;s.domain=i,s.range=[n,r-n],s.paddingInner=o,s.paddingOuter=o;var l=new Xv;l.domain=a,l.range=[r-n,n];var u=function(t,e,r){return t.map((function(t,n){var o=r.convert(t),i=new Ym;return i.x=e.convert(n),i.y=o,i.width=e.bandwidth,i.height=r.convert(0)-o,i.strokeWidth=1,i.crisp=!0,i}))};return e?t.data.map((function(t){return u(t,s,l)})):u(t.data,s,l)}function dO(t,e,r,n){var o=new Xv;o.domain=[0,4],o.range=[n,r-n];var i=new Xv;i.domain=[0,10],i.range=[r-n,n];var a=e.map((function(t){var e=new Xd;return e.strokeWidth=3,e.lineCap="round",e.fill=void 0,t.forEach((function(t,r){e.path[r>0?"lineTo":"moveTo"](o.convert(r),i.convert(t))})),e})),s=new fl;return s.setClipRectInGroupCoordinateSpace(new Ns(n,n,r-2*n,r-2*n)),s.append(a),t.append(s),a}var hO=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),fO=function(t){function e(e,r,n){var o=t.call(this,e,"groupedColumnTooltip")||this;o.columnData=[2,3,4];var i=o,a=i.root,s=i.columnData,l=i.size,u=i.padding;return o.columns=pO({stacked:!1,root:a,data:s,size:l,padding:u,xScaleDomain:[0,1,2],yScaleDomain:[0,4],xScalePadding:.3}),a.append(o.columns),o.updateColors(r,n),o}return hO(e,t),e.prototype.updateColors=function(t,e){this.columns.forEach((function(r,n){r.fill=t[n],r.stroke=e[n]}))},e.chartType="groupedColumn",e}(cO),vO=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),yO=function(t){function e(r,n,o,i,a,s){void 0===i&&(i=e.data),void 0===a&&(a=[0,16]),void 0===s&&(s="stackedColumnTooltip");var l=t.call(this,r,s)||this,u=l,c=u.root,p=u.size,d=u.padding;return l.stackedColumns=pO({stacked:!0,root:c,data:i,size:p,padding:d,xScaleDomain:[0,1,2],yScaleDomain:a,xScalePadding:.3}),c.append([].concat.apply([],l.stackedColumns)),l.updateColors(n,o),l}return vO(e,t),e.prototype.updateColors=function(t,e){this.stackedColumns.forEach((function(r,n){return r.forEach((function(r){r.fill=t[n],r.stroke=e[n]}))}))},e.chartType="stackedColumn",e.data=[[8,12,16],[6,9,12],[2,3,4]],e}(cO),gO=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),mO=function(t){function e(r,n,o){return t.call(this,r,n,o,e.data,[0,10],"normalizedColumnTooltip")||this}return gO(e,t),e.chartType="normalizedColumn",e.data=[[10,10,10],[6,7,8],[2,4,6]],e}(yO),bO=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),CO=function(t){function e(e,r,n){var o=t.call(this,e,"groupedBarTooltip")||this,i=o.padding,a=o.size,s=new cf;s.domain=[0,1,2],s.range=[i,a-i],s.paddingInner=.3,s.paddingOuter=.3;var l=new Xv;l.domain=[0,4],l.range=[a-i,i];var u=l.convert(0),c=s.bandwidth;return o.bars=[2,3,4].map((function(t,e){var r=new Ym;return r.x=i,r.y=s.convert(e),r.width=u-l.convert(t),r.height=c,r.strokeWidth=1,r.crisp=!0,r})),o.updateColors(r,n),o.root.append(o.bars),o}return bO(e,t),e.prototype.updateColors=function(t,e){this.bars.forEach((function(r,n){r.fill=t[n],r.stroke=e[n]}))},e.chartType="groupedBar",e}(cO),SO=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),wO=function(t){function e(r,n,o,i,a,s){void 0===i&&(i=e.data),void 0===a&&(a=[0,16]),void 0===s&&(s="stackedBarTooltip");var l=t.call(this,r,s)||this,u=l.size,c=l.padding,p=new cf;p.domain=[0,1,2],p.range=[c,u-c],p.paddingInner=.3,p.paddingOuter=.3;var d=new Xv;d.domain=a,d.range=[u-c,c];var h=d.convert(0),f=p.bandwidth;return l.bars=i.map((function(t){return t.map((function(t,e){var r=new Ym;return r.x=c,r.y=p.convert(e),r.width=h-d.convert(t),r.height=f,r.strokeWidth=1,r.crisp=!0,r}))})),l.updateColors(n,o),l.root.append([].concat.apply([],l.bars)),l}return SO(e,t),e.prototype.updateColors=function(t,e){this.bars.forEach((function(r,n){return r.forEach((function(r){r.fill=t[n],r.stroke=e[n]}))}))},e.chartType="stackedBar",e.data=[[8,12,16],[6,9,12],[2,3,4]],e}(cO),xO=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),OO=function(t){function e(r,n,o){return t.call(this,r,n,o,e.data,[0,10],"normalizedBarTooltip")||this}return xO(e,t),e.chartType="normalizedBar",e.data=[[10,10,10],[6,7,8],[2,4,6]],e}(wO),EO=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),TO=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},PO=Pl,DO=function(t){function e(e,r,n,o,i){void 0===o&&(o=.6),void 0===i&&(i="doughnutTooltip");var a=t.call(this,e,i)||this,s=(a.size-2*a.padding)/2,l=s+a.padding,u=[[PO(-90),PO(30)],[PO(30),PO(120)],[PO(120),PO(180)],[PO(180),PO(210)],[PO(210),PO(240)],[PO(240),PO(270)]];return a.sectors=u.map((function(t){var e=TO(t,2),r=e[0],n=e[1],i=new ey;return i.centerX=l,i.centerY=l,i.innerRadius=s*o,i.outerRadius=s,i.startAngle=r,i.endAngle=n,i.stroke=void 0,i.strokeWidth=1,i})),a.updateColors(r,n),a.root.append(a.sectors),a}return EO(e,t),e.prototype.updateColors=function(t,e){this.sectors.forEach((function(r,n){r.fill=t[n%t.length],r.stroke=e[n%e.length]}))},e.chartType="doughnut",e}(sO),AO=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),MO=function(t){function e(e,r,n){return t.call(this,e,r,n,0,"pieTooltip")||this}return AO(e,t),e.chartType="pie",e}(DO),_O=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),RO=function(t){function e(e,r,n){var o=t.call(this,e,"lineTooltip")||this;return o.data=[[9,7,8,5,6],[5,6,3,4,1],[1,3,4,8,7]],o.lines=dO(o.root,o.data,o.size,o.padding),o.updateColors(r,n),o}return _O(e,t),e.prototype.updateColors=function(t,e){this.lines.forEach((function(e,r){e.stroke=t[r]}))},e.chartType="line",e}(cO),kO=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),FO=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},IO=function(t){function e(e,r,n){var o=t.call(this,e,"scatterTooltip")||this,i=o.size,a=o.padding,s=new Xv;s.domain=[-.5,4],s.range=[2*a,i-a];var l=new Xv;l.domain=[-.5,3.5],l.range=[i-a,a];var u=[];[[[.3,3],[1.1,.9],[2,.4],[3.4,2.4]],[[0,.3],[1,2],[2.4,1.4],[3,0]]].forEach((function(t){t.forEach((function(t){var e=FO(t,2),r=e[0],n=e[1],o=new _w;o.strokeWidth=1,o.centerX=s.convert(r),o.centerY=l.convert(n),o.radius=2.5,u.push(o)}))})),o.points=u,o.updateColors(r,n);var c=new fl;return c.setClipRectInGroupCoordinateSpace(new Ns(a,a,i-2*a,i-2*a)),c.append(o.points),o.root.append(c),o}return kO(e,t),e.prototype.updateColors=function(t,e){this.points.forEach((function(r,n){r.stroke=e[n%e.length],r.fill=t[n%t.length]}))},e.chartType="scatter",e}(cO),LO=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),NO=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},GO=function(t){function e(e,r,n){var o=t.call(this,e,"bubbleTooltip")||this,i=o.size,a=o.padding,s=new Xv;s.domain=[0,1],s.range=[2*a,i-a];var l=new Xv;l.domain=[0,1],l.range=[i-a,a];var u=[];[[[.1,.3,5],[.5,.4,7],[.2,.8,7]],[[.8,.7,5],[.7,.3,9]]].forEach((function(t){t.forEach((function(t){var e=NO(t,3),r=e[0],n=e[1],o=e[2],i=new _w;i.strokeWidth=1,i.centerX=s.convert(r),i.centerY=l.convert(n),i.radius=o,i.fillOpacity=.7,u.push(i)}))})),o.points=u,o.updateColors(r,n);var c=new fl;return c.setClipRectInGroupCoordinateSpace(new Ns(a,a,i-2*a,i-2*a)),c.append(o.points),o.root.append(c),o}return LO(e,t),e.prototype.updateColors=function(t,e){this.points.forEach((function(r,n){r.stroke=e[n%e.length],r.fill=t[n%t.length]}))},e.chartType="bubble",e}(cO),jO=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),VO=function(t){function e(r,n,o,i){void 0===i&&(i=e.data);var a=t.call(this,r,"groupedAreaTooltip")||this,s=a.size,l=a.padding,u=new cf;u.domain=[0,1,2],u.paddingInner=1,u.paddingOuter=0,u.range=[l+.5,s-l-.5];var c=new Xv;c.domain=[0,6],c.range=[s-l+.5,l];var p=2*i.length-1,d=[],h=c.convert(0);return i.forEach((function(t,e){var r=u.convert(e);t.forEach((function(t,n){var o=c.convert(t),i=d[n]||(d[n]=[]);i[e]={x:r,y:o},i[p-e]={x:r,y:h}}))})),a.areas=d.reverse().map((function(t){var e=new Xd;e.strokeWidth=1,e.fillOpacity=.7;var r=e.path;return r.clear(),t.forEach((function(t,e){return r[e>0?"lineTo":"moveTo"](t.x,t.y)})),r.closePath(),e})),a.updateColors(n,o),a.root.append(a.areas),a}return jO(e,t),e.prototype.updateColors=function(t,e){this.areas.forEach((function(r,n){r.fill=t[n],r.stroke=e[n]}))},e.chartType="area",e.data=[[1,3,5],[2,6,4],[5,3,1]],e}(cO),BO=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),UO=function(t){function e(r,n,o,i,a){void 0===i&&(i=e.data),void 0===a&&(a="stackedAreaTooltip");var s=t.call(this,r,a)||this,l=s.size,u=s.padding,c=new cf;c.domain=[0,1,2],c.paddingInner=1,c.paddingOuter=0,c.range=[u+.5,l-u-.5];var p=new Xv;p.domain=[0,16],p.range=[l-u+.5,u+.5];var d=2*i.length-1,h=[];return i.forEach((function(t,e){var r=c.convert(e),n=0;t.forEach((function(t,o){var i=p.convert(n+t),a=h[o]||(h[o]=[]);a[e]={x:r,y:i},a[d-e]={x:r,y:p.convert(n)},n+=t}))})),s.areas=h.map((function(t){var e=new Xd;e.strokeWidth=1;var r=e.path;return r.clear(),t.forEach((function(t,e){return r[e>0?"lineTo":"moveTo"](t.x,t.y)})),r.closePath(),e})),s.updateColors(n,o),s.root.append(s.areas),s}return BO(e,t),e.prototype.updateColors=function(t,e){this.areas.forEach((function(r,n){r.fill=t[n],r.stroke=e[n]}))},e.chartType="stackedArea",e.data=[[2,3,2],[3,6,5],[6,2,2]],e}(cO),HO=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),zO=function(t){function e(r,n,o,i){return void 0===i&&(i=e.data),t.call(this,r,n,o,i,"normalizedAreaTooltip")||this}return HO(e,t),e.chartType="normalizedArea",e.data=UO.data.map((function(t){var e=t.reduce((function(t,e){return t+e}),0);return t.map((function(t){return t/e*16}))})),e}(UO),WO=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),KO=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},XO=function(t){function e(e,r,n){var o=t.call(this,e,"histogramTooltip")||this,i=o.padding,a=o.size,s=[2,5,11,13,10,6,1],l=new Xv;l.domain=[0,s.length],l.range=[i,a-i];var u=new Xv;u.domain=[0,s.reduce((function(t,e){return Math.max(t,e)}),0)],u.range=[a-i,i];var c=u.convert(0);return o.bars=s.map((function(t,e){var r=u.convert(t),n=l.convert(e),o=l.convert(e+1),i=new Ym;return i.x=n,i.y=r,i.width=o-n,i.height=c-r,i.strokeWidth=1,i.crisp=!0,i})),o.updateColors(r,n),o.root.append(o.bars),o}return WO(e,t),e.prototype.updateColors=function(t,e){var r=KO(t,1)[0],n=KO(e,1)[0];this.bars.forEach((function(t){t.fill=r,t.stroke=n}))},e.chartType="histogram",e}(cO),YO=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),qO=function(t){function e(e,r,n){var o=t.call(this,e,"columnLineComboTooltip")||this;o.columnData=[3,4],o.lineData=[[5,4,6,5,4]];var i=o,a=i.root,s=i.columnData,l=i.lineData,u=i.size,c=i.padding;return o.columns=pO({stacked:!1,root:a,data:s,size:u,padding:c,xScaleDomain:[0,1],yScaleDomain:[0,4],xScalePadding:.5}),a.append(o.columns),o.lines=dO(a,l,u,c),o.updateColors(r,n),o}return YO(e,t),e.prototype.updateColors=function(t,e){this.columns.forEach((function(r,n){r.fill=t[n],r.stroke=e[n]})),this.lines.forEach((function(e,r){e.stroke=t[r+2]}))},e.chartType="columnLineCombo",e}(cO),ZO=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),JO=function(t){function e(e,r,n){var o=t.call(this,e,"areaColumnComboTooltip")||this;o.columnData=[3,4.5],o.areaData=[[5,4,6,5,4]];var i=o,a=i.root,s=i.columnData,l=i.areaData,u=i.size,c=i.padding;o.columns=pO({stacked:!1,root:a,data:s,size:u,padding:c,xScaleDomain:[0,1],yScaleDomain:[0,6],xScalePadding:.5});var p=new cf;p.range=[c,u-c],p.domain=[0,1,2,3,4],p.paddingInner=1,p.paddingOuter=0;var d=new Xv;d.range=[u-c,c],d.domain=[0,6];var h=[],f=d.convert(0),v=p.convert(0);return l.forEach((function(t,e){var r=h[e]||(h[e]=[]);t.forEach((function(t,e){var n=t,o=e,i=p.convert(o),a=d.convert(n);r[e]={x:i,y:a}}));var n=p.convert(t.length-1);h[e].push({x:n,y:f},{x:v,y:f})})),o.areas=h.map((function(t){var e=new Xd;e.strokeWidth=1,e.fillOpacity=.8;var r=e.path;return t.forEach((function(t,e){return r[e>0?"lineTo":"moveTo"](t.x,t.y)})),e})),a.append(o.areas),a.append([].concat.apply([],o.columns)),o.updateColors(r,n),o}return ZO(e,t),e.prototype.updateColors=function(t,e){this.areas.forEach((function(r,n){r.fill=t[n],r.stroke=e[n]})),this.columns.forEach((function(r,n){r.fill=t[n+1],r.stroke=e[n+1]}))},e.chartType="areaColumnCombo",e}(cO),$O=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),QO=function(t){function e(e,r,n){var o=t.call(this,e,"customComboTooltip")||this;o.columnData=[3,4],o.lineData=[[5,4,6,5,4]];var i=o,a=i.root,s=i.columnData,l=i.lineData,u=i.size,c=i.padding;o.columns=pO({stacked:!1,root:a,data:s,size:u,padding:c,xScaleDomain:[0,1],yScaleDomain:[0,4],xScalePadding:.5}),a.append(o.columns),o.lines=dO(a,l,u,c);var p=new hf;p.x1=c,p.y1=c,p.x2=c,p.y2=u-c+3,p.stroke="grey";var d=new hf;d.x1=c-3+1,d.y1=u-c,d.x2=u-c+1,d.y2=u-c,d.stroke="grey";var h=new Xd;return o.buildPenIconPath(h),h.fill="whitesmoke",h.stroke="darkslategrey",h.strokeWidth=1,a.append([d,p,h]),o.updateColors(r,n),o}return $O(e,t),e.prototype.updateColors=function(t,e){this.columns.forEach((function(r,n){r.fill=t[n],r.stroke=e[n]})),this.lines.forEach((function(e,r){e.stroke=t[r+2]}))},e.prototype.buildPenIconPath=function(t){var e=t.path;e.moveTo(25.76,43.46),e.lineTo(31.27,48.53),e.moveTo(49.86,22),e.lineTo(49.86,22),e.cubicCurveTo(49.01994659053345,21.317514933510974,47.89593834348529,21.09645997825817,46.86,21.41),e.lineTo(46.86,21.41),e.cubicCurveTo(45.55460035985361,21.77260167850787,44.38777081121966,22.517979360321792,43.51,23.55),e.lineTo(25.51,43.8),e.lineTo(25.43,43.89),e.lineTo(23.01,51.89),e.lineTo(22.83,52.46),e.lineTo(31.02,48.86),e.lineTo(49.02,28.52),e.lineTo(49.02,28.52),e.cubicCurveTo(49.940716461596224,27.521914221246085,50.54302631059587,26.2720342455763,50.75,24.93),e.lineTo(50.75,24.93),e.cubicCurveTo(50.95363374988308,23.866379846512814,50.62080640232334,22.77066734274871,49.86,22),e.closePath(),e.moveTo(41.76,25.5),e.lineTo(47.34,30.5),e.moveTo(40.74,26.65),e.lineTo(46.25,31.71)},e.chartType="customCombo",e}(sO),tE=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),eE=function(){return(eE=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},rE=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},nE={columnGroup:{column:fO,stackedColumn:yO,normalizedColumn:mO},barGroup:{bar:CO,stackedBar:wO,normalizedBar:OO},pieGroup:{pie:MO,doughnut:DO},lineGroup:{line:RO},scatterGroup:{scatter:IO,bubble:GO},areaGroup:{area:VO,stackedArea:UO,normalizedArea:zO},histogramGroup:{histogram:XO},combinationGroup:{columnLineCombo:qO,areaColumnCombo:JO,customCombo:QO}},oE=function(t){function e(r,n,o,i){void 0===i&&(i=ot);var a=t.call(this,e.TEMPLATE)||this;return a.wrappers={},a.chartController=r,a.fills=n,a.strokes=o,a.chartGroups=eE({},i),a}return tE(e,t),e.prototype.init=function(){var t=this;!this.chartController.customComboExists()&&this.chartGroups.combinationGroup&&(this.chartGroups.combinationGroup=this.chartGroups.combinationGroup.filter((function(t){return"customCombo"!==t})));var e=this.getGui();Object.keys(this.chartGroups).forEach((function(r){var n=t.chartGroups[r],o=t.createBean(new J({title:t.chartTranslationService.translate(r),suppressEnabledCheckbox:!0,enabled:!0,suppressOpenCloseIcons:!0,cssIdentifier:"charts-settings",direction:"horizontal"}));n.forEach((function(e){var n,i=null===(n=nE[r])||void 0===n?void 0:n[e];if(i){var a=document.createElement("div");a.classList.add("ag-chart-mini-thumbnail");var s=i.chartType;t.addManagedListener(a,"click",(function(){t.chartController.setChartType(s),t.updateSelectedMiniChart()})),t.wrappers[s]=a,t.createBean(new i(a,t.fills,t.strokes)),o.addItem(a)}else nE[r]?u.doOnce((function(){return console.warn("AG Grid - invalid chartGroupsDef config '"+r+"."+e+"'")}),"invalid_chartGroupsDef"+e+"_"+r):u.doOnce((function(){return console.warn("AG Grid - invalid chartGroupsDef config '"+r+"'")}),"invalid_chartGroupsDef"+r)})),e.appendChild(o.getGui())})),this.updateSelectedMiniChart()},e.prototype.updateSelectedMiniChart=function(){var t=this.chartController.getChartType();for(var e in this.wrappers){var r=e===t;this.wrappers[e].classList.toggle("ag-selected",r)}},e.TEMPLATE='<div class="ag-chart-settings-mini-wrapper"></div>',rE([n("chartTranslationService")],e.prototype,"chartTranslationService",void 0),rE([i],e.prototype,"init",null),e}(a),iE=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),aE=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},sE=function(t){function e(r){var n=t.call(this,e.TEMPLATE)||this;return n.miniChartsContainers=[],n.cardItems=[],n.activePaletteIndex=0,n.palettes=[],n.themes=[],n.chartController=r,n}return iE(e,t),e.prototype.postConstruct=function(){var t=this;this.resetPalettes(),this.ePrevBtn.insertAdjacentElement("afterbegin",u.createIconNoSpan("previous",this.gridOptionsService)),this.eNextBtn.insertAdjacentElement("afterbegin",u.createIconNoSpan("next",this.gridOptionsService)),this.addManagedListener(this.ePrevBtn,"click",(function(){return t.setActivePalette(t.getPrev(),"left")})),this.addManagedListener(this.eNextBtn,"click",(function(){return t.setActivePalette(t.getNext(),"right")})),this.addManagedListener(this.chartController,nx.EVENT_CHART_TYPE_CHANGED,(function(){return t.resetPalettes(!0)})),this.addManagedListener(this.chartController,nx.EVENT_CHART_API_UPDATE,(function(){return t.resetPalettes(!0)})),this.scrollSelectedIntoView()},e.prototype.scrollSelectedIntoView=function(){var t=this;setTimeout((function(){var e=t.miniChartsContainers.find((function(t){return!t.getGui().classList.contains("ag-hidden")})).getGui().querySelector(".ag-selected");if(e){var r=e.offsetParent;r&&t.eMiniChartsContainer.scrollTo(0,r.offsetTop)}}),250)},e.prototype.resetPalettes=function(t){var e,r,n=this,o=this.chartController.getPalettes(),i=null===(r=null===(e=this.gridOptionsService.get("chartToolPanelsDef"))||void 0===e?void 0:e.settingsPanel)||void 0===r?void 0:r.chartGroupsDef;u.shallowCompare(o,this.palettes)&&!t||this.isAnimating||(this.palettes=o,this.themes=this.chartController.getThemes(),this.activePaletteIndex=this.themes.findIndex((function(t){return t===n.chartController.getChartThemeName()})),this.cardItems=[],u.clearElement(this.eCardSelector),this.destroyMiniCharts(),this.palettes.forEach((function(t,e){var r=n.activePaletteIndex===e,o=t.fills,a=t.strokes,s=n.createBean(new oE(n.chartController,o,a,i));n.miniChartsContainers.push(s),n.eMiniChartsContainer.appendChild(s.getGui()),n.addCardLink(e),r?s.updateSelectedMiniChart():s.setDisplayed(!1)})),u.setDisplayed(this.eNavBar,this.palettes.length>1),u.radioCssClass(this.cardItems[this.activePaletteIndex],"ag-selected","ag-not-selected"))},e.prototype.addCardLink=function(t){var e=this,r=document.createElement("div");r.classList.add("ag-chart-settings-card-item"),this.addManagedListener(r,"click",(function(){e.setActivePalette(t,t<e.activePaletteIndex?"left":"right")})),this.eCardSelector.appendChild(r),this.cardItems.push(r)},e.prototype.getPrev=function(){var t=this.activePaletteIndex-1;return t<0&&(t=this.palettes.length-1),t},e.prototype.getNext=function(){var t=this.activePaletteIndex+1;return t>=this.palettes.length&&(t=0),t},e.prototype.setActivePalette=function(t,e){var r=this;if(!this.isAnimating&&this.activePaletteIndex!==t){u.radioCssClass(this.cardItems[t],"ag-selected","ag-not-selected");var n=this.miniChartsContainers[this.activePaletteIndex],o=n.getGui(),i=this.miniChartsContainers[t],a=i.getGui();n.updateSelectedMiniChart(),i.updateSelectedMiniChart();var s="left"===e?-1:1,l=a.style.left=u.getAbsoluteWidth(this.getGui())*s+"px";this.activePaletteIndex=t,this.isAnimating=!0;i.setDisplayed(!0),n.addCssClass("ag-animating"),i.addCssClass("ag-animating"),this.chartController.setChartThemeName(this.themes[t]),window.setTimeout((function(){o.style.left=-parseFloat(l)+"px",a.style.left="0px"}),0),window.setTimeout((function(){r.isAnimating=!1,n.removeCssClass("ag-animating"),i.removeCssClass("ag-animating"),n.setDisplayed(!1)}),300)}},e.prototype.destroyMiniCharts=function(){u.clearElement(this.eMiniChartsContainer),this.miniChartsContainers=this.destroyBeans(this.miniChartsContainers)},e.prototype.destroy=function(){this.destroyMiniCharts(),t.prototype.destroy.call(this)},e.TEMPLATE='<div class="ag-chart-settings-wrapper">\n            <div ref="eMiniChartsContainer" class="ag-chart-settings-mini-charts-container ag-scrollable-container"></div>\n            <div ref="eNavBar" class="ag-chart-settings-nav-bar">\n                <div ref="ePrevBtn" class="ag-chart-settings-prev">\n                    <button type="button" class="ag-button ag-chart-settings-prev-button"></button>\n                </div>\n                <div ref="eCardSelector" class="ag-chart-settings-card-selector"></div>\n                <div ref="eNextBtn" class="ag-chart-settings-next">\n                    <button type="button" class="ag-button ag-chart-settings-next-button"></button>\n                </div>\n            </div>\n        </div>',aE([n("resizeObserverService")],e.prototype,"resizeObserverService",void 0),aE([o("eMiniChartsContainer")],e.prototype,"eMiniChartsContainer",void 0),aE([o("eNavBar")],e.prototype,"eNavBar",void 0),aE([o("eCardSelector")],e.prototype,"eCardSelector",void 0),aE([o("ePrevBtn")],e.prototype,"ePrevBtn",void 0),aE([o("eNextBtn")],e.prototype,"eNextBtn",void 0),aE([i],e.prototype,"postConstruct",null),e}(a),lE=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),uE=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},cE=function(t){function e(e){var r=t.call(this)||this;r.tabs=[];var n=e.controller,o=e.panels,i=e.chartOptionsService;return r.chartController=n,r.chartOptionsService=i,r.panels=o,r}return lE(e,t),e.prototype.init=function(){var t=this;this.panels.forEach((function(e){var r=e.replace("chart","").toLowerCase(),n=t.createTab(e,r,t.getPanelClass(r)),o=n.comp,i=n.tab;t.tabs.push(i),t.addDestroyFunc((function(){return t.destroyBean(o)}))})),this.tabbedLayout=new it({items:this.tabs,cssClass:"ag-chart-tabbed-menu",keepScrollPosition:!0}),this.getContext().createBean(this.tabbedLayout)},e.prototype.createTab=function(t,e,r){var n=document.createElement("div");n.classList.add("ag-chart-tab","ag-chart-"+e);var o=new r(this.chartController,this.chartOptionsService);this.getContext().createBean(o),n.appendChild(o.getGui());var i=document.createElement("div"),a=this.chartTranslationService.translate(e);return i.innerText=a,{comp:o,tab:{title:i,titleLabel:a,bodyPromise:V.resolve(n),getScrollableContainer:function(){return n.querySelector(".ag-scrollable-container")||n},name:t}}},e.prototype.showTab=function(t){var e=this.tabs[t];this.tabbedLayout.showItem(e)},e.prototype.getGui=function(){return this.tabbedLayout&&this.tabbedLayout.getGui()},e.prototype.destroy=function(){this.parentComponent&&this.parentComponent.isAlive()&&this.destroyBean(this.parentComponent),t.prototype.destroy.call(this)},e.prototype.getPanelClass=function(t){switch(t){case e.TAB_DATA:return cx;case e.TAB_FORMAT:return oO;default:return sE}},e.TAB_DATA="data",e.TAB_FORMAT="format",uE([n("chartTranslationService")],e.prototype,"chartTranslationService",void 0),uE([i],e.prototype,"init",null),e}(a),pE=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),dE=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},hE=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},fE=function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t},vE=function(t){function e(r,n,o,i){var a=t.call(this,e.TEMPLATE)||this;return a.eChartContainer=r,a.eMenuPanelContainer=n,a.chartController=o,a.chartOptionsService=i,a.buttons={chartSettings:["menu",function(){return a.showMenu(a.defaultPanel)}],chartData:["menu",function(){return a.showMenu("chartData")}],chartFormat:["menu",function(){return a.showMenu("chartFormat")}],chartLink:["linked",function(t){return a.toggleDetached(t)}],chartUnlink:["unlinked",function(t){return a.toggleDetached(t)}],chartDownload:["save",function(){return a.saveChart()}]},a.panels=[],a.buttonListenersDestroyFuncs=[],a.menuVisible=!1,a}return pE(e,t),e.prototype.postConstruct=function(){var t=this;this.createButtons(),this.addManagedListener(this.eventService,l.EVENT_CHART_CREATED,(function(e){var r;e.chartId===t.chartController.getChartId()&&(Boolean(null===(r=t.gridOptionsService.get("chartToolPanelsDef"))||void 0===r?void 0:r.defaultToolPanel)&&t.showMenu(t.defaultPanel,!1))})),this.refreshMenuClasses(),!this.gridOptionsService.is("suppressChartToolPanelsButton")&&this.panels.length>0&&(this.getGui().classList.add("ag-chart-tool-panel-button-enable"),this.addManagedListener(this.eHideButton,"click",this.toggleMenu.bind(this))),this.addManagedListener(this.chartController,nx.EVENT_CHART_API_UPDATE,this.createButtons.bind(this))},e.prototype.isVisible=function(){return this.menuVisible},e.prototype.getExtraPaddingDirections=function(){var t=this,e=[];return["chartLink","chartUnlink","chartDownload"].some((function(e){return t.chartToolbarOptions.includes(e)}))&&e.push("top"),["chartSettings","chartData","chartFormat"].some((function(e){return t.chartToolbarOptions.includes(e)}))&&e.push(this.gridOptionsService.is("enableRtl")?"left":"right"),e},e.prototype.getToolbarOptions=function(){var t,e,r,n=this;if(Boolean(this.gridOptionsService.get("chartToolPanelsDef"))){var o=[this.chartController.isChartLinked()?"chartLink":"chartUnlink","chartDownload"],i={defaultItems:o},a=(u=this.gridOptionsService.getCallback("getChartToolbarItems"))?u(i).filter((function(t){if(!at.includes(t)){var e=st.includes(t)?"AG Grid: '"+t+"' is a Chart Tool Panel option and will be ignored since 'chartToolPanelsDef' is used. Please use 'chartToolPanelsDef.panels' grid option instead":"AG Grid: '"+t+"' is not a valid Chart Toolbar Option";return console.warn(e),!1}return!0})):o,s=null===(e=null===(t=this.gridOptionsService.get("chartToolPanelsDef"))||void 0===t?void 0:t.panels)||void 0===e?void 0:e.map((function(t){var e=lt[t];return e||console.warn("AG Grid - invalid panel in chartToolPanelsDef.panels: '"+t+"'"),e})).filter((function(t){return Boolean(t)}));this.panels=s||Object.values(lt),this.chartController.isPivotChart()&&(this.panels=this.panels.filter((function(t){return"chartData"!==t})));var l=null===(r=this.gridOptionsService.get("chartToolPanelsDef"))||void 0===r?void 0:r.defaultToolPanel;return this.defaultPanel=l&&lt[l]||this.panels[0],this.panels.length>0?fE([this.panels[0]],hE(a)):a}var u,c=["chartSettings","chartData","chartFormat",this.chartController.isChartLinked()?"chartLink":"chartUnlink","chartDownload"];if(u=this.gridOptionsService.getCallback("getChartToolbarItems")){var p=this.gridOptionsService.is("suppressChartToolPanelsButton");c=u(i={defaultItems:p?c:at}).filter((function(t){if(!n.buttons[t])return console.warn("AG Grid: '"+t+"' is not a valid Chart Toolbar Option"),!1;if(!p&&st.includes(t)){var e="AG Grid: '"+t+"' is a Chart Tool Panel option and will be ignored. Please use 'chartToolPanelsDef.panels' grid option instead";return console.warn(e),!1}return!0})),p||(c=c.concat(st))}this.chartController.isPivotChart()&&(c=c.filter((function(t){return"chartData"!==t})));var d=["chartUnlink","chartLink","chartDownload"];return this.panels=c.filter((function(t){return-1===d.indexOf(t)})),this.defaultPanel=this.panels[0],c.filter((function(t){return-1!==d.indexOf(t)||n.panels.length&&t===n.panels[0]}))},e.prototype.toggleDetached=function(t){var e=t.target,r=e.classList.contains("ag-icon-linked");e.classList.toggle("ag-icon-linked",!r),e.classList.toggle("ag-icon-unlinked",r);var n=r?"chartUnlinkToolbarTooltip":"chartLinkToolbarTooltip",o=this.chartTranslationService.translate(n);o&&(e.title=o),this.chartController.detachChartRange()},e.prototype.createButtons=function(){var t=this;this.buttonListenersDestroyFuncs.forEach((function(t){return t()})),this.buttonListenersDestroyFuncs=[],this.chartToolbarOptions=this.getToolbarOptions();var e=this.eMenu;u.clearElement(e),this.chartToolbarOptions.forEach((function(r){var n=t.buttons[r],o=hE(n,2),i=o[0],a=o[1],s=u.createIconNoSpan(i,t.gridOptionsService,void 0,!0);s.classList.add("ag-chart-menu-icon");var l=t.chartTranslationService.translate(r+"ToolbarTooltip");l&&s instanceof HTMLElement&&(s.title=l),t.buttonListenersDestroyFuncs.push(t.addManagedListener(s,"click",a)),e.appendChild(s)}))},e.prototype.saveChart=function(){var t={type:e.EVENT_DOWNLOAD_CHART};this.dispatchEvent(t)},e.prototype.createMenuPanel=function(t){var e=this,r=this.environment.chartMenuPanelWidth(),n=this.menuPanel=this.createBean(new ut({minWidth:r,width:r,height:"100%",closable:!0,hideTitleBar:!0,cssIdentifier:"chart-menu"}));return n.setParentComponent(this),this.eMenuPanelContainer.appendChild(n.getGui()),this.tabbedMenu=this.createBean(new cE({controller:this.chartController,type:this.chartController.getChartType(),panels:this.panels,chartOptionsService:this.chartOptionsService})),this.addManagedListener(n,a.EVENT_DESTROYED,(function(){return e.destroyBean(e.tabbedMenu)})),new V((function(r){window.setTimeout((function(){n.setBodyComponent(e.tabbedMenu),e.tabbedMenu.showTab(t),r(n),e.addManagedListener(e.eChartContainer,"click",(function(t){e.getGui().contains(t.target)||e.menuVisible&&e.hideMenu()}))}),100)}))},e.prototype.showContainer=function(){this.menuPanel&&(this.menuVisible=!0,this.showParent(this.menuPanel.getWidth()),this.refreshMenuClasses())},e.prototype.toggleMenu=function(){this.menuVisible?this.hideMenu():this.showMenu()},e.prototype.showMenu=function(t,e){var r=this;if(void 0===e&&(e=!0),e||this.eMenuPanelContainer.classList.add("ag-no-transition"),this.menuPanel&&!t)this.showContainer();else{var n=t||this.defaultPanel,o=this.panels.indexOf(n);o<0&&(console.warn("AG Grid: '"+t+"' is not a valid Chart Tool Panel name"),o=this.panels.indexOf(this.defaultPanel)),this.menuPanel?(this.tabbedMenu.showTab(o),this.showContainer()):this.createMenuPanel(o).then(this.showContainer.bind(this))}e||setTimeout((function(){r.isAlive()&&r.eMenuPanelContainer.classList.remove("ag-no-transition")}),500)},e.prototype.hideMenu=function(){var t=this;this.hideParent(),window.setTimeout((function(){t.menuVisible=!1,t.refreshMenuClasses()}),500)},e.prototype.refreshMenuClasses=function(){this.eChartContainer.classList.toggle("ag-chart-menu-visible",this.menuVisible),this.eChartContainer.classList.toggle("ag-chart-menu-hidden",!this.menuVisible),this.gridOptionsService.is("suppressChartToolPanelsButton")||(this.eHideButtonIcon.classList.toggle("ag-icon-contracted",this.menuVisible),this.eHideButtonIcon.classList.toggle("ag-icon-expanded",!this.menuVisible))},e.prototype.showParent=function(t){this.eMenuPanelContainer.style.minWidth=t+"px"},e.prototype.hideParent=function(){this.eMenuPanelContainer.style.minWidth="0"},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.menuPanel&&this.menuPanel.isAlive()&&this.destroyBean(this.menuPanel),this.tabbedMenu&&this.tabbedMenu.isAlive()&&this.destroyBean(this.tabbedMenu)},e.EVENT_DOWNLOAD_CHART="downloadChart",e.TEMPLATE='<div>\n        <div class="ag-chart-menu" ref="eMenu"></div>\n        <button class="ag-button ag-chart-menu-close" ref="eHideButton">\n            <span class="ag-icon ag-icon-contracted" ref="eHideButtonIcon"></span>\n        </button>\n    </div>',dE([n("chartTranslationService")],e.prototype,"chartTranslationService",void 0),dE([o("eMenu")],e.prototype,"eMenu",void 0),dE([o("eHideButton")],e.prototype,"eHideButton",void 0),dE([o("eHideButtonIcon")],e.prototype,"eHideButtonIcon",void 0),dE([i],e.prototype,"postConstruct",null),e}(a),yE=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),gE=function(){return(gE=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},mE=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},bE=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},CE=function(t){function e(r){var n=t.call(this,e.TEMPLATE)||this;return n.chartMenu=r,n.destroyableChartListeners=[],n.editing=!1,n}return yE(e,t),e.prototype.init=function(){var t=this;this.addManagedListener(this.getGui(),"keydown",(function(e){t.editing&&"Enter"===e.key&&!e.shiftKey&&(t.handleEndEditing(),e.preventDefault())})),this.addManagedListener(this.getGui(),"input",(function(){t.editing&&t.updateHeight()})),this.addManagedListener(this.getGui(),"blur",(function(){return t.endEditing()}))},e.prototype.refreshTitle=function(t,e){var r,n,o=this;this.chartController=t,this.chartOptionsService=e;try{for(var i=bE(this.destroyableChartListeners),a=i.next();!a.done;a=i.next()){(0,a.value)()}}catch(t){r={error:t}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}this.destroyableChartListeners=[];var s=this.chartController.getChartProxy().getChart(),l=s.scene.canvas.element,u=this.addManagedListener(l,"dblclick",(function(t){var e=s.title;if(e&&e.node.containsPoint(t.offsetX,t.offsetY)){var r=e.node.computeBBox(),n=e.node.inverseTransformPoint(r.x,r.y);o.startEditing(gE(gE({},r),n),l.width)}})),c=!1,p=this.addManagedListener(l,"mousemove",(function(t){var e=s.title,r=!!(e&&e.enabled&&e.node.containsPoint(t.offsetX,t.offsetY));c!==r&&(l.style.cursor=r?"pointer":""),c=r}));this.destroyableChartListeners=[u,p]},e.prototype.startEditing=function(t,e){if(!(this.chartMenu&&this.chartMenu.isVisible()||this.editing)){this.editing=!0;var r=Math.max(Math.min(t.width+20,e),300),n=this.getGui();n.classList.add("currently-editing");var o=n.style;o.fontFamily=this.chartOptionsService.getChartOption("title.fontFamily"),o.fontWeight=this.chartOptionsService.getChartOption("title.fontWeight"),o.fontStyle=this.chartOptionsService.getChartOption("title.fontStyle"),o.fontSize=this.chartOptionsService.getChartOption("title.fontSize")+"px",o.color=this.chartOptionsService.getChartOption("title.color");var i=this.chartOptionsService.getChartOption("title.text"),a=i===this.chartTranslationService.translate("titlePlaceholder");n.value=a?"":i;var s=i.split(/\r?\n/g).length;o.left=Math.round(t.x+t.width/2-r/2-1)+"px",o.top=Math.round(t.y+t.height/2-s*this.getLineHeight()/2-2)+"px",o.width=Math.round(r)+"px",o.lineHeight=this.getLineHeight()+"px",this.updateHeight(),n.focus()}},e.prototype.updateHeight=function(){var t=this.getGui(),e=this.chartOptionsService.getChartOption("title.text").split(/\r?\n/g).length,r=t.value.split(/\r?\n/g).length;t.style.height=Math.round(Math.max(e,r)*this.getLineHeight())+4+"px"},e.prototype.getLineHeight=function(){var t=this.chartOptionsService.getChartOption("title.lineHeight");return t?parseInt(t):Math.round(1.2*parseInt(this.chartOptionsService.getChartOption("title.fontSize")))},e.prototype.handleEndEditing=function(){var t=this,e=this.chartOptionsService.getChartOption("title.color");this.chartOptionsService.setChartOption("title.color","rgba(0, 0, 0, 0)"),this.chartOptionsService.awaitChartOptionUpdate((function(){return t.endEditing()})),this.chartOptionsService.awaitChartOptionUpdate((function(){t.chartOptionsService.setChartOption("title.color",e)}))},e.prototype.endEditing=function(){var t=this;if(this.editing){this.editing=!1;var e=this.getGui().value;e&&""!==e.trim()?(this.chartOptionsService.setChartOption("title.text",e),this.chartOptionsService.setChartOption("title.enabled",!0)):(this.chartOptionsService.setChartOption("title.text",""),this.chartOptionsService.setChartOption("title.enabled",!1)),this.getGui().classList.remove("currently-editing"),this.chartOptionsService.awaitChartOptionUpdate((function(){t.eventService.dispatchEvent({type:"chartTitleEdit"})}))}},e.TEMPLATE='<textarea\n             class="ag-chart-title-edit"\n             style="padding:0; border:none; border-radius: 0; min-height: 0; text-align: center; resize: none;" />\n        ',mE([n("chartTranslationService")],e.prototype,"chartTranslationService",void 0),mE([i],e.prototype,"init",null),e}(a),SE=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),wE=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},xE=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return SE(e,t),e.prototype.getData=function(t){if(t.crossFiltering){if(t.grouping)return console.warn("AG Grid: crossing filtering with row grouping is not supported."),{chartData:[],columnNames:{}};if(!this.gridOptionsService.isRowModelType("clientSide"))return console.warn("AG Grid: crossing filtering is only supported in the client side row model."),{chartData:[],columnNames:{}}}this.gridOptionsService.isRowModelType("serverSide")&&t.pivoting&&this.updatePivotKeysForSSRM();var e=this.extractRowsFromGridRowModel(t);return e.chartData=this.aggregateRowsByDimension(t,e.chartData),e},e.prototype.extractRowsFromGridRowModel=function(t){var r,n=this,o=[],i={},a={},s={},l={},c=[];if(t.crossFiltering)l=this.getFilteredRowNodes(),r=(c=this.getAllRowNodes()).length;else{var p=this.gridRowModel.getRowCount()-1;r=(t.endRow>=0?Math.min(t.endRow,p):p)-t.startRow+1}for(var d=function(r){var u={},p=t.crossFiltering?c[r]:h.gridRowModel.getRow(r+t.startRow);t.dimensionCols.forEach((function(o){var i=o.colId,l=n.columnModel.getGridColumn(i);if(l){var c=n.valueService.getValue(l,p);if(t.grouping){var d=c&&c.toString?String(c.toString()):"",h=e.getGroupLabels(p,d);u[i]={labels:h,toString:function(){return this.labels.filter((function(t){return!!t})).reverse().join(" - ")}},p.group&&(a[h.toString()]=r);var f=h.slice(1,h.length).toString();f&&(s[f]=a[f])}else u[i]=c}else u[IE.DEFAULT_CATEGORY]=r+1})),t.valueCols.forEach((function(e){var r=[],o=e.getColDef().pivotKeys;o&&(r=o.slice());var a=e.getColDef().headerName;a&&r.push(a),r.length>0&&(i[e.getId()]=r);var s=e.getColId();if(t.crossFiltering){var c=s+"-filtered-out",d=null!=(h=n.valueService.getValue(e,p))&&"function"==typeof h.toNumber?h.toNumber():h;l[p.id]?(u[s]=d,u[c]=t.aggFunc||t.isScatter?void 0:0):(u[s]=t.aggFunc||t.isScatter?void 0:0,u[c]=d)}else{var h;(h=n.valueService.getValue(e,p))&&h.hasOwnProperty("toString")&&(h=parseFloat(h.toString())),u[s]=null!=h&&"function"==typeof h.toNumber?h.toNumber():h}})),p.footer&&(u.footer=!0),o.push(u)},h=this,f=0;f<r;f++)d(f);if(t.grouping){var v=u.values(s);o=o.filter((function(t,e){return!t.footer&&!u.includes(v,e)}))}return{chartData:o,columnNames:i}},e.prototype.aggregateRowsByDimension=function(t,e){var r=this,n=t.dimensionCols;if(!t.aggFunc||0===n.length)return e;var o=u.last(n),i=o&&o.colId,a={},l=[];return e.forEach((function(t){var e=a;n.forEach((function(r){var o=r.colId,a=t[o];if(o===i){var s=e[a];s||(s={__children:[]},n.forEach((function(e){var r=e.colId;s[r]=t[r]})),e[a]=s,l.push(s)),s.__children.push(t)}else e[a]||(e[a]={}),e=e[a]}))})),B.__assertRegistered(s.RowGroupingModule,"Charting Aggregation",this.context.getGridId())&&l.forEach((function(e){return t.valueCols.forEach((function(n){if(t.crossFiltering)t.valueCols.forEach((function(n){var o=n.getColId(),i=e.__children.filter((function(t){return void 0!==t[o]})).map((function(t){return t[o]})),a=r.aggregationStage.aggregateValues(i,t.aggFunc);e[n.getId()]=a&&void 0!==a.value?a.value:a;var s=o+"-filtered-out",l=e.__children.filter((function(t){return void 0!==t[s]})).map((function(t){return t[s]})),u=r.aggregationStage.aggregateValues(l,t.aggFunc);e[s]=u&&void 0!==u.value?u.value:u}));else{var o=e.__children.map((function(t){return t[n.getId()]})),i=0;B.__assertRegistered(s.RowGroupingModule,"Charting Aggregation",r.context.getGridId())&&(i=r.aggregationStage.aggregateValues(o,t.aggFunc)),e[n.getId()]=i&&void 0!==i.value?i.value:i}}))})),l},e.prototype.updatePivotKeysForSSRM=function(){var t=this.columnModel.getSecondaryColumns();if(t){var e=this.extractPivotKeySeparator(t);t.forEach((function(t){if(""===e)t.getColDef().pivotKeys=[];else{var r=t.getColId().split(e);t.getColDef().pivotKeys=r.slice(0,r.length-1)}}))}},e.prototype.extractPivotKeySeparator=function(t){if(0===t.length)return"";var e=function(t,r){var n=t.getGroupId();return t.getParent()?e(t.getParent(),n):r.split(n)[1][0]},r=t[0];return null==r.getParent()?"":e(r.getParent(),r.getColId())},e.getGroupLabels=function(t,e){for(var r=[e];t&&0!==t.level;)(t=t.parent)&&r.push(t.key);return r},e.prototype.getFilteredRowNodes=function(){var t={};return this.gridRowModel.forEachNodeAfterFilterAndSort((function(e){t[e.id]=e})),t},e.prototype.getAllRowNodes=function(){var t=[];return this.gridRowModel.forEachNode((function(e){t.push(e)})),this.sortRowNodes(t)},e.prototype.sortRowNodes=function(t){var e=this.sortController.getSortOptions();return!e||0==e.length?t:this.rowNodeSorter.doFullSort(t,e)},wE([n("rowModel")],e.prototype,"gridRowModel",void 0),wE([n("valueService")],e.prototype,"valueService",void 0),wE([n("columnModel")],e.prototype,"columnModel",void 0),wE([n("rowNodeSorter")],e.prototype,"rowNodeSorter",void 0),wE([n("sortController")],e.prototype,"sortController",void 0),wE([E("aggregationStage")],e.prototype,"aggregationStage",void 0),e}(r),OE=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),EE=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},TE=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return OE(r,t),r.prototype.getColumn=function(t){return this.columnModel.getPrimaryColumn(t)},r.prototype.getAllDisplayedColumns=function(){return this.columnModel.getAllDisplayedColumns()},r.prototype.getColDisplayName=function(t){return this.columnModel.getDisplayNameForColumn(t,"chart")},r.prototype.getRowGroupColumns=function(){return this.columnModel.getRowGroupColumns()},r.prototype.getGroupDisplayColumns=function(){return this.columnModel.getGroupDisplayColumns()},r.prototype.isPivotMode=function(){return this.columnModel.isPivotMode()},r.prototype.isPivotActive=function(){return this.columnModel.isPivotActive()},r.prototype.getChartColumns=function(){var t=this,e=this.columnModel.getAllDisplayedColumns(),r=new Set,n=new Set;return e.forEach((function(e){var o=e.getColDef(),i=o.chartDataType;if(i)switch(i){case"category":case"time":return void r.add(e);case"series":return void n.add(e);case"excluded":return;default:console.warn("AG Grid: unexpected chartDataType value '"+i+"' supplied, instead use 'category', 'series' or 'excluded'")}"ag-Grid-AutoColumn"!==o.colId?e.isPrimary()?(t.isNumberCol(e)?n:r).add(e):n.add(e):r.add(e)})),{dimensionCols:r,valueCols:n}},r.prototype.isNumberCol=function(t){if("ag-Grid-AutoColumn"===t.getColId())return!1;var e=this.rowRenderer.getRowNode({rowIndex:0,rowPinned:null});if(!e)return!1;var r=this.valueService.getValue(t,e);return null==r&&(r=this.extractLeafData(e,t)),null!=r&&"function"==typeof r.toNumber&&(r=r.toNumber()),"number"==typeof r},r.prototype.extractLeafData=function(t,e){if(!t.allLeafChildren)return null;for(var r=0;r<t.allLeafChildren.length;r++){var n=t.allLeafChildren[r],o=this.valueService.getValue(e,n);if(null!=o)return o}return null},EE([n("columnModel")],r.prototype,"columnModel",void 0),EE([n("valueService")],r.prototype,"valueService",void 0),EE([n("rowRenderer")],r.prototype,"rowRenderer",void 0),r=EE([e("chartColumnService")],r)}(r),PE=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),DE=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},AE=function(t){function e(e){var r,n=t.call(this)||this;return n.suppressComboChartWarnings=!1,n.chartDataModel=e,n.seriesChartTypes=null!==(r=e.params.seriesChartTypes)&&void 0!==r?r:[],n}return PE(e,t),e.prototype.init=function(){this.initComboCharts()},e.prototype.update=function(t){this.seriesChartTypes=null!=t?t:this.seriesChartTypes,this.initComboCharts(),this.updateSeriesChartTypes()},e.prototype.initComboCharts=function(){var t=this.seriesChartTypes&&this.seriesChartTypes.length>0;("customCombo"===this.chartDataModel.chartType||t)&&(this.chartDataModel.chartType="customCombo",this.savedCustomSeriesChartTypes=this.seriesChartTypes||[])},e.prototype.updateSeriesChartTypes=function(){this.chartDataModel.isComboChart()&&(this.seriesChartTypes=this.seriesChartTypes.map((function(t){var e=["groupedColumn","stackedColumn","stackedArea"].includes(t.chartType);return t.secondaryAxis=!e&&t.secondaryAxis,t})),"customCombo"!==this.chartDataModel.chartType?this.updateChartSeriesTypesForBuiltInCombos():this.updateSeriesChartTypesForCustomCombo())},e.prototype.updateSeriesChartTypesForCustomCombo=function(){var t=this;this.seriesChartTypes&&this.seriesChartTypes.length>0||this.suppressComboChartWarnings||console.warn("AG Grid: 'seriesChartTypes' are required when the 'customCombo' chart type is specified."),this.seriesChartTypes=this.seriesChartTypes.map((function(t){return e.SUPPORTED_COMBO_CHART_TYPES.includes(t.chartType)||(console.warn("AG Grid: invalid chartType '"+t.chartType+"' supplied in 'seriesChartTypes', converting to 'line' instead."),t.chartType="line"),t}));var r=this.chartDataModel.valueColState.map((function(e){t.savedCustomSeriesChartTypes&&0!==t.savedCustomSeriesChartTypes.length||(t.savedCustomSeriesChartTypes=t.seriesChartTypes);var r=t.savedCustomSeriesChartTypes.find((function(t){return t.colId===e.colId}));return r||(e.selected&&!t.suppressComboChartWarnings&&console.warn("AG Grid: no 'seriesChartType' found for colId = '"+e.colId+"', defaulting to 'line'."),{colId:e.colId,chartType:"line",secondaryAxis:!1})}));this.seriesChartTypes=r,this.savedCustomSeriesChartTypes=r,this.suppressComboChartWarnings=!0},e.prototype.updateChartSeriesTypesForBuiltInCombos=function(){var t=this.chartDataModel,e=t.chartType,r=t.valueColState,n="columnLineCombo"===e?"groupedColumn":"stackedArea",o="columnLineCombo"===e?"line":"groupedColumn",i=r.filter((function(t){return t.selected})),a=Math.ceil(i.length/2);this.seriesChartTypes=i.map((function(t,e){var r=e>=a?o:n;return{colId:t.colId,chartType:r,secondaryAxis:!1}}))},e.SUPPORTED_COMBO_CHART_TYPES=["line","groupedColumn","stackedColumn","area","stackedArea"],DE([i],e.prototype,"init",null),e}(r),ME=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),_E=function(){return(_E=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},RE=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},kE=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},FE=function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t},IE=function(t){function e(e){var r=t.call(this)||this;return r.unlinked=!1,r.chartData=[],r.valueColState=[],r.dimensionColState=[],r.columnNames={},r.crossFiltering=!1,r.grouping=!1,r.params=e,r.chartId=e.chartId,r.chartType=e.chartType,r.pivotChart=e.pivotChart,r.chartThemeName=e.chartThemeName,r.aggFunc=e.aggFunc,r.referenceCellRange=e.cellRange,r.suppliedCellRange=e.cellRange,r.suppressChartRanges=e.suppressChartRanges,r.unlinked=!!e.unlinkChart,r.crossFiltering=!!e.crossFiltering,r}return ME(e,t),e.prototype.init=function(){this.datasource=this.createManagedBean(new xE),this.chartColumnService=this.createManagedBean(new TE),this.comboChartModel=this.createManagedBean(new AE(this)),this.updateCellRanges(),this.updateData()},e.prototype.updateModel=function(t){var e=t.cellRange,r=t.chartType,n=t.pivotChart,o=t.chartThemeName,i=t.aggFunc,a=t.suppressChartRanges,s=t.unlinkChart,l=t.crossFiltering,u=t.seriesChartTypes;e!==this.suppliedCellRange&&(this.dimensionCellRange=void 0,this.valueCellRange=void 0),this.chartType=r,this.pivotChart=n,this.chartThemeName=o,this.aggFunc=i,this.referenceCellRange=e,this.suppliedCellRange=e,this.suppressChartRanges=a,this.unlinked=!!s,this.crossFiltering=!!l,this.updateSelectedDimension(null==e?void 0:e.columns),this.updateCellRanges(),(this.isComboChart()||u)&&this.comboChartModel.update(u),this.unlinked||this.updateData()},e.prototype.updateCellRanges=function(t){this.valueCellRange&&(this.referenceCellRange=this.valueCellRange);var e=this.chartColumnService.getChartColumns(),r=e.dimensionCols,n=e.valueCols,o=this.getAllColumnsFromRanges();t&&this.updateColumnState(t),this.setDimensionCellRange(r,o,t),this.setValueCellRange(n,o,t),t||(this.resetColumnState(),this.syncDimensionCellRange()),this.comboChartModel.updateSeriesChartTypes()},e.prototype.updateData=function(){var t=this.getRowIndexes(),e=t.startRow,r=t.endRow;this.pivotChart&&this.resetColumnState(),this.grouping=this.isGrouping();var n={aggFunc:this.aggFunc,dimensionCols:[this.getSelectedDimension()],grouping:this.grouping,pivoting:this.isPivotActive(),crossFiltering:this.crossFiltering,valueCols:this.getSelectedValueCols(),startRow:e,endRow:r,isScatter:u.includes(["scatter","bubble"],this.chartType)},o=this.datasource.getData(n),i=o.chartData,a=o.columnNames;this.chartData=i,this.columnNames=a},e.prototype.isGrouping=function(){var t=this.gridOptionsService.is("treeData"),e=t?null:this.chartColumnService.getRowGroupColumns(),r=t||e&&e.length>0,n=this.getSelectedDimension().colId,o=this.chartColumnService.getGroupDisplayColumns().map((function(t){return t.getColId()})).some((function(t){return t===n}));return!!r&&o},e.prototype.getSelectedValueCols=function(){return this.valueColState.filter((function(t){return t.selected})).map((function(t){return t.column}))},e.prototype.getSelectedDimension=function(){return this.dimensionColState.filter((function(t){return t.selected}))[0]},e.prototype.getColDisplayName=function(t){return this.chartColumnService.getColDisplayName(t)},e.prototype.isPivotMode=function(){return this.chartColumnService.isPivotMode()},e.prototype.getChartDataType=function(t){var e=this.chartColumnService.getColumn(t);return e?e.getColDef().chartDataType:void 0},e.prototype.isPivotActive=function(){return this.chartColumnService.isPivotActive()},e.prototype.createCellRange=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];return{id:this.chartId,startRow:this.referenceCellRange.startRow,endRow:this.referenceCellRange.endRow,columns:e,startColumn:t===ct.DIMENSION?e[0]:this.referenceCellRange.startColumn,type:t}},e.prototype.getAllColumnsFromRanges=function(){if(this.pivotChart)return u.convertToSet(this.chartColumnService.getAllDisplayedColumns());var t=this.dimensionCellRange||this.valueCellRange?[]:this.referenceCellRange.columns;return this.dimensionCellRange&&t.push.apply(t,FE([],kE(this.dimensionCellRange.columns))),this.valueCellRange&&t.push.apply(t,FE([],kE(this.valueCellRange.columns))),u.convertToSet(t)},e.prototype.getRowIndexes=function(){var t=0,e=0,r=this.rangeService,n=this.valueCellRange;if(r&&n){t=r.getRangeStartRow(n).rowIndex;var o=r.getRangeEndRow(n);e="bottom"===o.rowPinned?-1:o.rowIndex}return{startRow:t,endRow:e}},e.prototype.resetColumnState=function(){var t=this,r=this.chartColumnService.getChartColumns(),n=r.dimensionCols,o=r.valueCols,i=this.getAllColumnsFromRanges(),a=this.valueColState.length<1;this.dimensionColState=[],this.valueColState=[];var s=!1,l=1,c=this.suppliedCellRange.columns[0];n.forEach((function(e){var r="ag-Grid-AutoColumn"===e.getColId(),n=!1;t.crossFiltering&&t.aggFunc?c.getColId()===e.getColId()&&(n=!0):n=!!r||!s&&i.has(e),t.dimensionColState.push({column:e,colId:e.getColId(),displayName:t.getColDisplayName(e),selected:n,order:l++}),n&&(s=!0)}));var p={colId:e.DEFAULT_CATEGORY,displayName:this.chartTranslationService.translate("defaultCategory"),selected:!s,order:0};this.dimensionColState.unshift(p);var d=this.referenceCellRange.columns.filter((function(t){return o.has(t)}));o.forEach((function(e){a&&u.includes(t.referenceCellRange.columns,e)&&(e=d.shift()),t.valueColState.push({column:e,colId:e.getColId(),displayName:t.getColDisplayName(e),selected:i.has(e),order:l++})}))},e.prototype.updateColumnState=function(t){var e=function(e){return e.colId===t.colId},r=this.dimensionColState,n=this.valueColState;r.filter(e).length>0?r.forEach((function(t){return t.selected=e(t)})):n.filter(e).forEach((function(e){return e.selected=t.selected}));var o=FE(FE([],kE(r)),kE(n)),i=[];o.forEach((function(e,r){r===t.order&&i.push(t.colId),e.colId!==t.colId&&i.push(e.colId)})),o.forEach((function(t){var e=i.indexOf(t.colId);t.order=e>=0?i.indexOf(t.colId):o.length-1})),this.reorderColState()},e.prototype.reorderColState=function(){var t=function(t,e){return t.order-e.order};this.dimensionColState.sort(t),this.valueColState.sort(t)},e.prototype.setDimensionCellRange=function(t,r,n){var o=this;if(this.dimensionCellRange=void 0,n||this.dimensionColState.length){var i=n;if(this.crossFiltering&&this.aggFunc){var a=this.suppliedCellRange.columns[0];i=this.dimensionColState.filter((function(t){return t.colId===a.getColId()}))[0]}else i&&t.has(i.column)||(i=this.dimensionColState.filter((function(t){return t.selected}))[0]);i&&i.colId!==e.DEFAULT_CATEGORY&&(this.dimensionCellRange=this.createCellRange(ct.DIMENSION,i.column))}else t.forEach((function(t){!o.dimensionCellRange&&r.has(t)&&(o.dimensionCellRange=o.createCellRange(ct.DIMENSION,t))}))},e.prototype.setValueCellRange=function(t,e,r){this.valueCellRange=void 0;var n=[];if(t.forEach((function(t){r&&r.colId===t.getColId()?r.selected&&n.push(r.column):e.has(t)&&n.push(t)})),n.length>0){var o=[];this.valueColState.length>0?o=this.valueColState.map((function(t){return t.colId})):e.forEach((function(t){return o.push(t.getColId())})),n.sort((function(t,e){return o.indexOf(t.getColId())-o.indexOf(e.getColId())})),this.valueCellRange=this.createCellRange.apply(this,FE([ct.VALUE],kE(n)))}},e.prototype.updateSelectedDimension=function(t){var e=new Set(t.map((function(t){return t.getColId()}))),r=this.dimensionColState.find((function(t){return e.has(t.colId)}))||this.dimensionColState[0];this.dimensionColState=this.dimensionColState.map((function(t){return _E(_E({},t),{selected:t.colId===r.colId})}))},e.prototype.syncDimensionCellRange=function(){var t=this.getSelectedDimension();t&&t.column&&(this.dimensionCellRange=this.createCellRange(ct.DIMENSION,t.column))},e.prototype.isComboChart=function(){return["columnLineCombo","areaColumnCombo","customCombo"].includes(this.chartType)},e.DEFAULT_CATEGORY="AG-GRID-DEFAULT-CATEGORY",RE([n("rangeService")],e.prototype,"rangeService",void 0),RE([n("chartTranslationService")],e.prototype,"chartTranslationService",void 0),RE([i],e.prototype,"init",null),e}(r);function LE(t){return null!=t.chart?t.chart:t}var NE=function(){return(NE=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},GE=function(){function t(t){this.chartProxyParams=t,this.clearThemeOverrides=!1,this.chart=t.chartInstance,this.chartType=t.chartType,this.crossFiltering=t.crossFiltering,this.crossFilterCallback=t.crossFilterCallback,this.standaloneChartType=Nw(this.chartType),null==this.chart?this.chart=Cw.create(this.getCommonChartOptions()):this.clearThemeOverrides=!0}return t.prototype.getChart=function(){return LE(this.chart)},t.prototype.getChartRef=function(){return this.chart},t.prototype.downloadChart=function(t,e,r){var n=this.chart,o=LE(n),i=e||(o.title?o.title.text:"chart"),a=t||{},s=a.width,l=a.height;Cw.download(n,{width:s,height:l,fileName:i,fileFormat:r})},t.prototype.getChartImageDataURL=function(t){return this.getChart().scene.getDataURL(t)},t.prototype.getChartOptions=function(){return this.chart.getOptions()},t.prototype.getChartThemeOverrides=function(){var t;return null!==(t=this.getChartOptions().theme.overrides)&&void 0!==t?t:{}},t.prototype.getChartPalette=function(){return ES(this.getChartOptions().theme).palette},t.prototype.setPaired=function(t){var e,r=Nw(this.chartProxyParams.chartType);Cw.updateDelta(this.chart,{theme:{overrides:(e={},e[r]={paired:t},e)}})},t.prototype.isPaired=function(){var t=Nw(this.chartProxyParams.chartType);return u.get(this.getChartThemeOverrides(),t+".paired",!0)},t.prototype.lookupCustomChartTheme=function(t){return Hw(this.chartProxyParams,t)},t.prototype.transformData=function(t,e,r){return r?t.map((function(t,r){var n=t[e],o=n&&n.toString?n.toString():"",i=NE({},t);return i[e]={id:r,value:n,toString:function(){return o}},i})):t},t.prototype.getCommonChartOptions=function(t){var e,r,n=this.clearThemeOverrides?{}:null!==(r=null===(e=this.chart)||void 0===e?void 0:e.getOptions())&&void 0!==r?r:{},o=null!=this.chart?{overrides:this.getActiveFormattingPanelOverrides()}:{};return this.clearThemeOverrides=!1,NE(NE({},n),{theme:NE(NE({},Vw(this.chartProxyParams,this)),t?{overrides:t}:o),container:this.chartProxyParams.parentElement,mode:"integrated"})},t.prototype.getActiveFormattingPanelOverrides=function(){var t,e;if(this.clearThemeOverrides)return{};var r=null===(t=this.chart)||void 0===t?void 0:t.getOptions().theme;return null!==(e=null==r?void 0:r.overrides)&&void 0!==e?e:{}},t.prototype.destroy=function(t){var e=(void 0===t?{}:t).keepChartInstance;if(void 0!==e&&e)return this.chart;this.destroyChart()},t.prototype.destroyChart=function(){this.chart&&(this.chart.destroy(),this.chart=void 0)},t}(),jE=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),VE=function(){return(VE=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},BE=function(t){function e(e){var r=t.call(this,e)||this;return r.crossFilteringAllPoints=new Set,r.crossFilteringSelectedPoints=[],r}return jE(e,t),e.prototype.update=function(t){var e=this.getAxes(t),r=VE(VE({},this.getCommonChartOptions(t.updatedOverrides)),{data:this.getData(t,e),axes:e,series:this.getSeries(t)});Cw.update(this.getChartRef(),r)},e.prototype.getData=function(t,e){var r,n=["area","line"].includes(this.standaloneChartType),o="bar"===this.standaloneChartType?"left":"bottom",i="category"===(null===(r=e.find((function(t){return t.position===o})))||void 0===r?void 0:r.type);return this.crossFiltering&&n?this.getCrossFilterData(t):this.getDataTransformedData(t,i)},e.prototype.getDataTransformedData=function(t,e){return this.transformData(t.data,t.category.id,e)},e.prototype.getXAxisType=function(t){return t.grouping?"groupedCategory":e.isTimeAxis(t)?"time":"category"},e.isTimeAxis=function(t){if(t.category&&t.category.chartDataType)return"time"===t.category.chartDataType;var e=t.data[0];return(e&&e[t.category.id])instanceof Date},e.prototype.crossFilteringReset=function(){this.crossFilteringSelectedPoints=[],this.crossFilteringAllPoints.clear()},e.prototype.crossFilteringPointSelected=function(t){return 0==this.crossFilteringSelectedPoints.length||this.crossFilteringSelectedPoints.includes(t)},e.prototype.crossFilteringDeselectedPoints=function(){return this.crossFilteringSelectedPoints.length>0&&this.crossFilteringAllPoints.size!==this.crossFilteringSelectedPoints.length},e.prototype.extractLineAreaCrossFilterSeries=function(t,e){var r=this;return t.map((function(t){var n;return t.yKey=(n=t.yKey,"area"===r.standaloneChartType?e.getCrossFilteringContext().lastSelectedChartId===e.chartId?n+"-total":n:n+"-total"),t.listeners={nodeClick:function(e){var n=e.datum[t.xKey],o=e.event.metaKey||e.event.ctrlKey;r.crossFilteringAddSelectedPoint(o,n),r.crossFilterCallback(e)}},t.marker={formatter:function(t){var n=t.datum[e.category.id];return{fill:t.highlighted?"yellow":t.fill,size:t.highlighted?14:r.crossFilteringPointSelected(n)?8:0}}},"area"===r.standaloneChartType&&(t.fillOpacity=r.crossFilteringDeselectedPoints()?.3:1),"line"===r.standaloneChartType&&(t.strokeOpacity=r.crossFilteringDeselectedPoints()?.3:1),t}))},e.prototype.getCrossFilterData=function(t){var e=this;this.crossFilteringAllPoints.clear();var r=t.fields[0].colId,n=r+"-filtered-out",o=t.getCrossFilteringContext().lastSelectedChartId;return t.data.map((function(i){var a=i[t.category.id];e.crossFilteringAllPoints.add(a);var s=e.crossFilteringPointSelected(a);return"area"===e.standaloneChartType&&o===t.chartId&&(i[r+"-total"]=s?i[r]:i[r]+i[n]),"line"===e.standaloneChartType&&(i[r+"-total"]=s?i[r]:i[r]+i[n]),i}))},e.prototype.crossFilteringAddSelectedPoint=function(t,e){t?this.crossFilteringSelectedPoints.push(e):this.crossFilteringSelectedPoints=[e]},e}(GE);function UE(t,e){return!1!==e.clone&&e.isMergeableObject(t)?YE(function(t){return Array.isArray(t)?[]:{}}(t),t,e):t}function HE(t,e,r){return t.concat(e).map((function(t){return UE(t,r)}))}function zE(t){return Object.keys(t).concat(function(t){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t).filter((function(e){return t.propertyIsEnumerable(e)})):[]}(t))}function WE(t,e){try{return e in t}catch(t){return!1}}function KE(t,e,r){void 0===t&&(t={}),void 0===e&&(e={});var n={};return r.isMergeableObject(t)&&zE(t).forEach((function(e){n[e]=UE(t[e],r)})),zE(e).forEach((function(o){(function(t,e){return WE(t,e)&&!(Object.hasOwnProperty.call(t,e)&&Object.propertyIsEnumerable.call(t,e))})(t,o)||(WE(t,o)&&r.isMergeableObject(e[o])?n[o]=function(t,e){if(!e.customMerge)return YE;var r=e.customMerge(t);return"function"==typeof r?r:YE}(o,r)(t[o],e[o],r):n[o]=UE(e[o],r))})),n}function XE(t){return function(t){return!!t&&"object"==typeof t}(t)&&!function(t){var e=Object.prototype.toString.call(t);return"[object RegExp]"===e||"[object Date]"===e}(t)}function YE(t,e,r){(r=r||{}).arrayMerge=r.arrayMerge||HE,r.isMergeableObject=r.isMergeableObject||XE,r.cloneUnlessOtherwiseSpecified=UE;var n=Array.isArray(e);return n===Array.isArray(t)?n?r.arrayMerge(t,e,r):KE(t,e,r):UE(e,r)}function qE(t,e){var r=parseInt(t.slice(1,3),16),n=parseInt(t.slice(3,5),16),o=parseInt(t.slice(5,7),16);return e?"rgba("+r+", "+n+", "+o+", "+e+")":"rgba("+r+", "+n+", "+o+")"}function ZE(t,e){return t.map((function(t){var r=Ql.fromString(t);return new Ql(r.r,r.g,r.b,e).toHexString()}))}var JE=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),$E=function(){return($E=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},QE=function(t){function e(e){return t.call(this,e)||this}return JE(e,t),e.prototype.getAxes=function(t){var e="bar"===this.standaloneChartType,r=[{type:this.getXAxisType(t),position:e?"left":"bottom"},{type:"number",position:e?"bottom":"left"}];if(this.isNormalised()){var n=r[1];n.label=$E($E({},n.label),{formatter:function(t){return Math.round(t.value)+"%"}})}return r},e.prototype.getSeries=function(t){var e=this,r=!this.crossFiltering&&u.includes(["groupedColumn","groupedBar"],this.chartType),n=t.fields.map((function(n){return{type:e.standaloneChartType,grouped:r,stacked:["stackedColumn","normalizedColumn","stackedBar","normalizedBar"].includes(e.chartType),normalizedTo:e.isNormalised()?100:void 0,xKey:t.category.id,xName:t.category.name,yKey:n.colId,yName:n.displayName}}));return this.crossFiltering?this.extractCrossFilterSeries(n):n},e.prototype.extractCrossFilterSeries=function(t){for(var e,r,n=this,o=this.getChartPalette(),i=function(t){var e=t.yKey+"-filtered-out";return $E($E({},YE({},t)),{yKey:e,fill:qE(t.fill,"0.3"),stroke:qE(t.stroke,"0.3"),showInLegend:!1})},a=[],s=0;s<t.length;s++){var l=(e=t[s],r=s,$E($E({},e),{highlightStyle:{item:{fill:void 0}},fill:null==o?void 0:o.fills[r],stroke:null==o?void 0:o.strokes[r],listeners:{nodeClick:n.crossFilterCallback}}));a.push(l),a.push(i(l))}return a},e.prototype.isNormalised=function(){return!this.crossFiltering&&u.includes(["normalizedColumn","normalizedBar"],this.chartType)},e}(BE),tT=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),eT=function(){return(eT=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},rT=function(t){function e(e){return t.call(this,e)||this}return tT(e,t),e.prototype.getAxes=function(t){var e=[{type:this.getXAxisType(t),position:"bottom"},{type:"number",position:"left"}];if(this.isNormalised()){var r=e[1];r.label=eT(eT({},r.label),{formatter:function(t){return Math.round(t.value)+"%"}})}return e},e.prototype.getSeries=function(t){var e=this,r=t.fields.map((function(r){return{type:e.standaloneChartType,xKey:t.category.id,xName:t.category.name,yKey:r.colId,yName:r.displayName,normalizedTo:"normalizedArea"===e.chartType?100:void 0,stacked:["normalizedArea","stackedArea"].includes(e.chartType)}}));return this.crossFiltering?this.extractLineAreaCrossFilterSeries(r,t):r},e.prototype.isNormalised=function(){return!this.crossFiltering&&"normalizedArea"===this.chartType},e}(BE),nT=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),oT=function(t){function e(e){return t.call(this,e)||this}return nT(e,t),e.prototype.getAxes=function(t){return[{type:this.getXAxisType(t),position:"bottom"},{type:"number",position:"left"}]},e.prototype.getSeries=function(t){var e=this,r=t.fields.map((function(r){return{type:e.standaloneChartType,xKey:t.category.id,xName:t.category.name,yKey:r.colId,yName:r.displayName}}));return this.crossFiltering?this.extractLineAreaCrossFilterSeries(r,t):r},e}(BE),iT=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),aT=function(){return(aT=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},sT=function(t){function e(e){return t.call(this,e)||this}return iT(e,t),e.prototype.update=function(t){var e=t.data,r=t.category,n=aT(aT({},this.getCommonChartOptions(t.updatedOverrides)),{data:this.crossFiltering?this.getCrossFilterData(t):this.transformData(e,r.id),series:this.getSeries(t)});Cw.update(this.getChartRef(),n)},e.prototype.getSeries=function(t){var r=this,n=t.fields.length,o={currentOffset:0,offsetAmount:n>1?20:40},i=this.getFields(t).map((function(i){var a,s={type:r.standaloneChartType,angleKey:i.colId,angleName:i.displayName,sectorLabelKey:i.colId,calloutLabelKey:t.category.id,calloutLabelName:t.category.name};if("doughnut"===r.chartType){var l=e.calculateOffsets(o),u=l.outerRadiusOffset,c=l.innerRadiusOffset,p=i.displayName?{title:{text:i.displayName,showInLegend:n>1}}:void 0;return aT(aT(aT(aT({},s),{outerRadiusOffset:u,innerRadiusOffset:c}),p),{calloutLine:{colors:null===(a=r.getChartPalette())||void 0===a?void 0:a.strokes}})}return s}));return this.crossFiltering?this.extractCrossFilterSeries(i):i},e.prototype.getCrossFilterData=function(t){var e=t.fields[0].colId,r=e+"-filtered-out";return t.data.map((function(t){var n=t[e]+t[r];return t[e+"-total"]=n,t[r]=1,t[e]=t[e]/n,t}))},e.prototype.extractCrossFilterSeries=function(t){var e,r=this,n=this.getChartPalette(),o=t[0],i=o.angleKey,a=aT(aT({},e=o),{calloutLabel:{enabled:!1},highlightStyle:{item:{fill:void 0}},radiusKey:e.angleKey,angleKey:e.angleKey+"-total",radiusMin:0,radiusMax:1,listeners:{nodeClick:r.crossFilterCallback}});return[function(t,e){var r,o;return aT(aT({},YE({},a)),{radiusKey:e+"-filtered-out",fills:ZE(null!==(r=t.fills)&&void 0!==r?r:n.fills,.3),strokes:ZE(null!==(o=t.strokes)&&void 0!==o?o:n.strokes,.3),showInLegend:!1})}(o,i),a]},e.calculateOffsets=function(t){var e=t.currentOffset;t.currentOffset-=t.offsetAmount;var r=t.currentOffset;return t.currentOffset-=t.offsetAmount,{outerRadiusOffset:e,innerRadiusOffset:r}},e.prototype.getFields=function(t){return"pie"===this.chartType?t.fields.slice(0,1):t.fields},e.prototype.crossFilteringReset=function(){},e}(GE),lT=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),uT=function(){return(uT=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},cT=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},pT=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},dT=function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t},hT=function(t){function e(e){return t.call(this,e)||this}return lT(e,t),e.prototype.getAxes=function(t){return[{type:"number",position:"bottom"},{type:"number",position:"left"}]},e.prototype.getSeries=function(t){var e=this,r=this.isPaired(),n=this.getSeriesDefinitions(t.fields,r),o=t.category.id===IE.DEFAULT_CATEGORY?void 0:t.category,i=n.map((function(t){return{type:e.standaloneChartType,xKey:t.xField.colId,xName:t.xField.displayName,yKey:t.yField.colId,yName:t.yField.displayName,title:t.yField.displayName+" vs "+t.xField.displayName,sizeKey:t.sizeField?t.sizeField.colId:void 0,sizeName:t.sizeField?t.sizeField.displayName:void 0,labelKey:o?o.id:t.yField.colId,labelName:o?o.name:void 0}}));return this.crossFiltering?this.extractCrossFilterSeries(i,t):i},e.prototype.extractCrossFilterSeries=function(t,e){var r=this,n=e.data,o=this.getChartPalette(),i=function(t){return t+"-filtered-out"},a=t.map((function(t,e){var a=t.sizeKey,s=null==o?void 0:o.fills[e],l=null==o?void 0:o.strokes[e],u=function(t,e){var r,n,o,a=[1/0,-1/0];if(null!=e)try{for(var s=cT(t),l=s.next();!l.done;l=s.next()){var u=l.value,c=null!==(o=u[e])&&void 0!==o?o:u[i(e)];c<a[0]&&(a[0]=c),c>a[1]&&(a[1]=c)}}catch(t){r={error:t}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}if(a[0]<=a[1])return a}(n,a),c=uT(uT({},t.marker),{fill:s,stroke:l,domain:u});return uT(uT({},t),{marker:c,highlightStyle:{item:{fill:"yellow"}},listeners:uT(uT({},t.listeners),{nodeClick:r.crossFilterCallback})})}));return dT(dT([],pT(a)),pT(a.map((function(t){var e=t.sizeKey,n=t.yKey,o=t.xKey;return null!=e&&(e=i(e)),uT(uT({},t),{yKey:i(n),xKey:i(o),marker:uT(uT({},t.marker),{fillOpacity:.3,strokeOpacity:.3}),sizeKey:e,showInLegend:!1,listeners:uT(uT({},t.listeners),{nodeClick:function(t){var e,n=t.datum[i(o)],a=uT(uT({},t),{xKey:o,datum:uT(uT({},t.datum),(e={},e[o]=n,e))});r.crossFilterCallback(a)}})})}))))},e.prototype.getSeriesDefinitions=function(t,e){if(t.length<2)return[];var r="bubble"===this.chartType;if(e)return r?t.map((function(e,r){return r%3==0?{xField:e,yField:t[r+1],sizeField:t[r+2]}:null})).filter((function(t){return t&&t.yField&&t.sizeField})):t.map((function(e,r){return r%2==0?{xField:e,yField:t[r+1]}:null})).filter((function(t){return t&&t.yField}));var n=t[0];return r?t.map((function(e,r){return r%2==1?{xField:n,yField:e,sizeField:t[r+1]}:null})).filter((function(t){return t&&t.sizeField})):t.filter((function(t,e){return e>0})).map((function(t){return{xField:n,yField:t}}))},e}(BE),fT=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),vT=function(t){function e(e){return t.call(this,e)||this}return fT(e,t),e.prototype.getSeries=function(t){var e=t.fields[0];return[{type:this.standaloneChartType,xKey:e.colId,xName:e.displayName,yName:this.chartProxyParams.translate("histogramFrequency"),areaPlot:!1}]},e.prototype.getAxes=function(t){return[{type:"number",position:"bottom"},{type:"number",position:"left"}]},e}(BE),yT=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),gT=function(t){function e(e){var r=t.call(this)||this;return r.chartController=e,r}return yT(e,t),e.prototype.getChartOption=function(t){return u.get(this.getChart(),t,void 0)},e.prototype.setChartOption=function(t,e,r){var n=this,o=this.chartController.getChartSeriesTypes();this.chartController.isComboChart()&&o.push("cartesian");var i={};o.forEach((function(r){i=YE(i,n.createChartOptions({seriesType:r,expression:t,value:e}))})),this.updateChart(i),r||this.raiseChartOptionsChangedEvent()},e.prototype.awaitChartOptionUpdate=function(t){this.chartController.getChartProxy().getChart().waitForUpdate().then((function(){return t()})).catch((function(t){return console.error("AG Grid - chart update failed",t)}))},e.prototype.getAxisProperty=function(t){var e;return u.get(null===(e=this.getChart().axes)||void 0===e?void 0:e[0],t,void 0)},e.prototype.setAxisProperty=function(t,e){var r,n=this,o=this.getChart(),i={};null===(r=o.axes)||void 0===r||r.forEach((function(r){i=YE(i,n.getUpdateAxisOptions(r,t,e))})),this.updateChart(i),this.raiseChartOptionsChangedEvent()},e.prototype.getLabelRotation=function(t){var e=this.getAxis(t);return u.get(e,"label.rotation",void 0)},e.prototype.setLabelRotation=function(t,e){var r=this.getAxis(t);if(r){var n=this.getUpdateAxisOptions(r,"label.rotation",e);this.updateChart(n),this.raiseChartOptionsChangedEvent()}},e.prototype.getSeriesOption=function(t,r){var n=this.getChart().series.find((function(t){return e.isMatchingSeries(r,t)}));return u.get(n,t,void 0)},e.prototype.setSeriesOption=function(t,e,r){var n=this.createChartOptions({seriesType:r,expression:"series."+t,value:e});this.updateChart(n),this.raiseChartOptionsChangedEvent()},e.prototype.getPairedMode=function(){return this.chartController.getChartProxy().isPaired()},e.prototype.setPairedMode=function(t){this.chartController.getChartProxy().setPaired(t)},e.prototype.getAxis=function(t){var e=this.getChart();if(e.axes&&!(e.axes.length<1))return"xAxis"===t?e.axes&&"x"===e.axes[0].direction?e.axes[0]:e.axes[1]:e.axes&&"y"===e.axes[1].direction?e.axes[1]:e.axes[0]},e.prototype.getUpdateAxisOptions=function(t,e,r){var n=Nw(this.getChartType());return["number","category","time","groupedCategory"].includes(t.type)?this.createChartOptions({seriesType:n,expression:"axes."+t.type+"."+e,value:r}):{}},e.prototype.getChartType=function(){return this.chartController.getChartType()},e.prototype.getChart=function(){return this.chartController.getChartProxy().getChart()},e.prototype.updateChart=function(t){var e=this.chartController.getChartProxy().getChartRef();Cw.updateDelta(e,t)},e.prototype.createChartOptions=function(t){var e=t.seriesType,r=t.expression,n=t.value,o={},i={theme:{overrides:o}};return u.set(o,e+"."+r,n),i},e.prototype.raiseChartOptionsChangedEvent=function(){var t=this.chartController.getChartModel(),e={type:l.EVENT_CHART_OPTIONS_CHANGED,chartId:t.chartId,chartType:t.chartType,chartThemeName:this.chartController.getChartThemeName(),chartOptions:t.chartOptions};this.eventService.dispatchEvent(e)},e.isMatchingSeries=function(t,e){return Lw.includes(t)&&e.type===t},e.prototype.destroy=function(){t.prototype.destroy.call(this)},e}(r),mT=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),bT=function(){return(bT=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},CT=function(t){function e(e){return t.call(this,e)||this}return mT(e,t),e.prototype.getAxes=function(t){var e=t?t.fields:[],r=new Map(e.map((function(t){return[t.colId,t]}))),n=this.getYKeys(e,t.seriesChartTypes),o=n.primaryYKeys,i=n.secondaryYKeys,a=[{type:this.getXAxisType(t),position:"bottom",gridStyle:[{stroke:void 0}]}];return o.length>0&&a.push({type:"number",keys:o,position:"left"}),i.length>0&&i.forEach((function(t,e){var n=r.get(t);if(n&&n.colId===t){var s={type:"number",keys:[t],position:"right"},l=o.some((function(t){return!!r.get(t)})),u=e===i.length-1;!l&&u||(s.gridStyle=[{stroke:void 0}]),a.push(s)}})),a},e.prototype.getSeries=function(t){var e=t.fields,r=t.category,n=t.seriesChartTypes;return e.map((function(t){var e=n.find((function(e){return e.colId===t.colId}));if(e){var o=e.chartType,i=["groupedColumn","groupedBar"].includes(o)?{grouped:!0}:{};return bT({type:Nw(o),xKey:r.id,yKey:t.colId,yName:t.displayName,stacked:["stackedArea","stackedColumn"].includes(o)},i)}}))},e.prototype.getYKeys=function(t,e){var r=[],n=[];return t.forEach((function(t){var o=t.colId,i=e.find((function(t){return t.colId===o}));i&&(i.secondaryAxis?n.push(o):r.push(o))})),{primaryYKeys:r,secondaryYKeys:n}},e}(BE),ST=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),wT=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},xT=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},OT=function(t){function e(r){var n=t.call(this,e.TEMPLATE)||this;return n.params=r,n}return ST(e,t),e.prototype.init=function(){var t=this,e=this.gridOptionsService.get("chartThemes")||rx;if(e.length<1)throw new Error("Cannot create chart: no chart themes are available to be used.");var r=this.params.chartThemeName;u.includes(e,r)||(r=e[0]);var n={chartId:this.params.chartId,pivotChart:this.params.pivotChart,chartType:this.params.chartType,chartThemeName:r,aggFunc:this.params.aggFunc,cellRange:this.params.cellRange,suppressChartRanges:this.params.suppressChartRanges,unlinkChart:this.params.unlinkChart,crossFiltering:this.params.crossFiltering,seriesChartTypes:this.params.seriesChartTypes},o=this.gridOptionsService.is("enableRtl");this.addCssClass(o?"ag-rtl":"ag-ltr");var i=this.createBean(new IE(n));this.chartController=this.createManagedBean(new nx(i)),this.validateCustomThemes(),this.createChart(),this.params.insideDialog&&this.addDialog(),this.addMenu(),this.addTitleEditComp(),this.addManagedListener(this.getGui(),"focusin",this.setActiveChartCellRange.bind(this)),this.addManagedListener(this.chartController,nx.EVENT_CHART_MODEL_UPDATE,this.update.bind(this)),this.chartMenu&&this.addManagedListener(this.chartMenu,vE.EVENT_DOWNLOAD_CHART,(function(){return t.downloadChart()})),this.update(),this.raiseChartCreatedEvent()},e.prototype.validateCustomThemes=function(){var t=this.getChartThemes(),e=this.gridOptionsService.get("customChartThemes");e&&u.getAllKeysInObjects([e]).forEach((function(e){u.includes(t,e)||console.warn("AG Grid: a custom chart theme with the name '"+e+"' has been supplied but not added to the 'chartThemes' list")}))},e.prototype.createChart=function(){var t=this,r=void 0;this.chartProxy&&(r=this.chartProxy.destroy({keepChartInstance:!0}));var n=this.chartController.getChartType(),o={chartType:n,chartInstance:r,getChartThemeName:this.getChartThemeName.bind(this),getChartThemes:this.getChartThemes.bind(this),customChartThemes:this.gridOptionsService.get("customChartThemes"),getGridOptionsChartThemeOverrides:function(){return t.getGridOptionsChartThemeOverrides()},getExtraPaddingDirections:function(){var e,r;return null!==(r=null===(e=t.chartMenu)||void 0===e?void 0:e.getExtraPaddingDirections())&&void 0!==r?r:[]},apiChartThemeOverrides:this.params.chartThemeOverrides,crossFiltering:this.params.crossFiltering,crossFilterCallback:function(e,r){t.params.crossFilteringContext.lastSelectedChartId=r?"":t.chartController.getChartId(),r&&t.params.crossFilteringResetCallback(),t.crossFilterService.filter(e,r)},parentElement:this.eChart,grouping:this.chartController.isGrouping(),chartThemeToRestore:this.params.chartThemeName,chartOptionsToRestore:this.params.chartOptionsToRestore,chartPaletteToRestore:this.params.chartPaletteToRestore,seriesChartTypes:this.chartController.getSeriesChartTypes(),translate:function(e,r){return t.chartTranslationService.translate(e,r)}};if(this.params.chartOptionsToRestore=void 0,this.chartType=n,this.chartThemeName=this.chartController.getChartThemeName(),this.chartProxy=e.createChartProxy(o),this.chartProxy){var i=this.eChart.querySelector("canvas");i&&i.classList.add("ag-charts-canvas"),this.chartController.setChartProxy(this.chartProxy),this.chartOptionsService=this.createBean(new gT(this.chartController)),this.titleEdit&&this.titleEdit.refreshTitle(this.chartController,this.chartOptionsService)}else console.warn("AG Grid: invalid chart type supplied: ",o.chartType)},e.prototype.getChartThemeName=function(){return this.chartController.getChartThemeName()},e.prototype.getChartThemes=function(){return this.chartController.getThemes()},e.prototype.getGridOptionsChartThemeOverrides=function(){return this.gridOptionsService.get("chartThemeOverrides")},e.createChartProxy=function(t){switch(t.chartType){case"column":case"bar":case"groupedColumn":case"stackedColumn":case"normalizedColumn":case"groupedBar":case"stackedBar":case"normalizedBar":return new QE(t);case"pie":case"doughnut":return new sT(t);case"area":case"stackedArea":case"normalizedArea":return new rT(t);case"line":return new oT(t);case"scatter":case"bubble":return new hT(t);case"histogram":return new vT(t);case"columnLineCombo":case"areaColumnCombo":case"customCombo":return new CT(t);default:throw"AG Grid: Unable to create chart as an invalid chartType = '"+t.chartType+"' was supplied."}},e.prototype.addDialog=function(){var t=this,e=this.chartTranslationService.translate(this.params.pivotChart?"pivotChartTitle":"rangeChartTitle"),r=this.getBestDialogSize(),n=r.width,o=r.height;this.chartDialog=new S({resizable:!0,movable:!0,maximizable:!0,title:e,width:n,height:o,component:this,centered:!0,closable:!0}),this.getContext().createBean(this.chartDialog),this.chartDialog.addEventListener(S.EVENT_DESTROYED,(function(){return t.destroy()}))},e.prototype.getBestDialogSize=function(){var t=this.popupService.getPopupParent(),e=.75*u.getAbsoluteWidth(t),r=.75*u.getAbsoluteHeight(t),n=this.chartProxy.getChart(),o=this.params.insideDialog?850:n.width,i=this.params.insideDialog?470:n.height;return(o>e||i>r)&&(o=Math.min(o,e),(i=Math.round(.553*o))>r&&(i=r,o=Math.min(o,Math.round(i/.553)))),{width:o,height:i}},e.prototype.addMenu=function(){this.params.crossFiltering||(this.chartMenu=this.createBean(new vE(this.eChartContainer,this.eMenuContainer,this.chartController,this.chartOptionsService)),this.eChartContainer.appendChild(this.chartMenu.getGui()))},e.prototype.addTitleEditComp=function(){this.titleEdit=this.createBean(new CE(this.chartMenu)),this.eTitleEditContainer.appendChild(this.titleEdit.getGui()),this.chartProxy&&this.titleEdit.refreshTitle(this.chartController,this.chartOptionsService)},e.prototype.update=function(t){var e=this;if((null==t?void 0:t.chartId)&&!this.chartController.update(t))return;this.chartTypeChanged(t)&&this.createChart(),this.updateChart(null==t?void 0:t.chartThemeOverrides),(null==t?void 0:t.chartId)&&this.chartProxy.getChart().waitForUpdate().then((function(){e.chartController.raiseChartApiUpdateEvent()}))},e.prototype.updateChart=function(t){var e=this,r=this.chartProxy,n=this.chartController.getSelectedValueColState().map((function(t){return{colId:t.colId,displayName:t.displayName}})),o=this.chartController.getChartData();if(!this.handleEmptyChart(o,n)){var i=this.chartController.getChartUpdateParams(t);r.update(i),this.chartProxy.getChart().waitForUpdate().then((function(){e.chartController.raiseChartUpdatedEvent()})),this.titleEdit.refreshTitle(this.chartController,this.chartOptionsService)}},e.prototype.chartTypeChanged=function(t){var e=xT([this.chartController.getChartType(),null==t?void 0:t.chartType],2),r=e[0],n=e[1];return this.chartType!==r||!!n&&this.chartType!==n},e.prototype.getChartModel=function(){return this.chartController.getChartModel()},e.prototype.getChartImageDataURL=function(t){return this.chartProxy.getChartImageDataURL(t)},e.prototype.handleEmptyChart=function(t,e){var r=this.chartController.isPivotChart()&&!this.chartController.isPivotMode(),n=1;this.chartController.isActiveXYChart()&&(n="bubble"===this.chartController.getChartType()?3:2);var o=e.length<n||0===t.length;if(this.eChart){var i=r||o;u.setDisplayed(this.eChart,!i),u.setDisplayed(this.eEmpty,i)}return r?(this.eEmpty.innerText=this.chartTranslationService.translate("pivotChartRequiresPivotMode"),!0):!!o&&(this.eEmpty.innerText=this.chartTranslationService.translate("noDataToChart"),!0)},e.prototype.downloadChart=function(t,e,r){this.chartProxy.downloadChart(t,e,r)},e.prototype.openChartToolPanel=function(t){var e=t?lt[t]:t;this.chartMenu.showMenu(e)},e.prototype.closeChartToolPanel=function(){this.chartMenu.hideMenu()},e.prototype.getChartId=function(){return this.chartController.getChartId()},e.prototype.getUnderlyingChart=function(){return this.chartProxy.getChartRef()},e.prototype.crossFilteringReset=function(){this.chartProxy.crossFilteringReset()},e.prototype.setActiveChartCellRange=function(t){this.getGui().contains(t.relatedTarget)||(this.chartController.setChartRange(!0),this.gridApi.focusService.clearFocusedCell())},e.prototype.raiseChartCreatedEvent=function(){var t=this,e={type:l.EVENT_CHART_CREATED,chartId:this.chartController.getChartId()};this.chartProxy.getChart().waitForUpdate().then((function(){t.eventService.dispatchEvent(e)}))},e.prototype.raiseChartDestroyedEvent=function(){var t={type:l.EVENT_CHART_DESTROYED,chartId:this.chartController.getChartId()};this.eventService.dispatchEvent(t)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.chartProxy&&this.chartProxy.destroy(),this.destroyBean(this.chartMenu),this.destroyBean(this.titleEdit),this.chartDialog&&this.chartDialog.isAlive()&&this.destroyBean(this.chartDialog);var e=this.getGui();u.clearElement(e),u.removeFromParent(e),this.raiseChartDestroyedEvent()},e.TEMPLATE='<div class="ag-chart" tabindex="-1">\n            <div ref="eChartContainer" tabindex="-1" class="ag-chart-components-wrapper">\n                <div ref="eChart" class="ag-chart-canvas-wrapper"></div>\n                <div ref="eEmpty" class="ag-chart-empty-text ag-unselectable"></div>\n            </div>\n            <div ref="eTitleEditContainer"></div>\n            <div ref="eMenuContainer" class="ag-chart-docked-container"></div>\n        </div>',wT([o("eChart")],e.prototype,"eChart",void 0),wT([o("eChartContainer")],e.prototype,"eChartContainer",void 0),wT([o("eMenuContainer")],e.prototype,"eMenuContainer",void 0),wT([o("eEmpty")],e.prototype,"eEmpty",void 0),wT([o("eTitleEditContainer")],e.prototype,"eTitleEditContainer",void 0),wT([n("chartCrossFilterService")],e.prototype,"crossFilterService",void 0),wT([n("chartTranslationService")],e.prototype,"chartTranslationService",void 0),wT([n("gridApi")],e.prototype,"gridApi",void 0),wT([n("popupService")],e.prototype,"popupService",void 0),wT([i],e.prototype,"init",null),e}(a),ET=function(){return(ET=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},TT=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(t,n[o])&&(r[n[o]]=t[n[o]])}return r},PT=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},DT=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function AT(t){return t.version,null==t.version&&(t.version=function(t){var e,r,n=t;if(null!=t.version)return t.version;var o=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];return Object.keys(t||{}).some((function(t){return e.includes(t)}))},i=n.chartOptions,a=o(i,"seriesDefaults")?null==i?void 0:i.seriesDefaults:null==i?void 0:i[Object.keys(i)[0]],s={"27.0.0":o(n,"seriesChartTypes"),"26.2.0":!o(i,"seriesDefaults"),"26.1.0":o(null==a?void 0:a.highlightStyle,"item"),"26.0.0":o(null==a?void 0:a.highlightStyle,"series"),"25.1.0":o(null==a?void 0:a.label,"minAngle"),"25.0.0":o(n,"modelType","aggFunc","unlinkChart","suppressChartRanges")||o(a,"lineDash","lineDashOffset"),"24.0.0":o(n,"chartThemeName","chart")||o(i,"series"),"23.2.0":o(i,"navigator"),"23.0.0":o(null===(r=null===(e=null==i?void 0:i.legend)||void 0===e?void 0:e.item)||void 0===r?void 0:r.marker,"shape"),"22.1.0":o(n,"chartPalette","chartType")},l=Object.entries(s).filter((function(t){var e=PT(t,2);return e[0],e[1]})),u=PT(l[0],1)[0];return void 0===u?"27.1.0":u}(t)),t=UT("23.0.0",t,MT),t=UT("24.0.0",t,_T),t=UT("25.1.0",t,RT),t=UT("26.0.0",t,kT),t=UT("26.1.0",t,FT),t=UT("26.2.0",t,IT),t=UT("28.0.0",t,LT),t=UT("28.2.0",t,NT),t=UT("29.0.0",t,GT),t=UT("29.1.0",t,jT),t=UT("29.2.0",t,VT),t=UT("30.0.0",t,BT),t=UT("30.2.0",t=function(t){return t=qT("chartOptions.*.width",t),t=WT("chartOptions.*.axes.category.label.autoRotate",!0,t=qT("chartOptions.*.height",t))}(t),(function(t){return t}))}function MT(t){return t=YT("chartOptions.legend.item.marker.type","shape",t),t=YT("chartOptions.seriesDefaults.marker.type","shape",t),t=YT("chartOptions.legend.padding","spacing",t)}function _T(t){var e,r=t=qT("chartOptions.seriesDefaults.marker.minSize",t),n=r.chartType,o=r.chartPalette,i=r.chartOptions,a=i.xAxis,s=i.yAxis,l=TT(i,["xAxis","yAxis"]),u=TT(r,["chartType","chartPalette","chartOptions"]),c=function(t){switch(t){case"bar":case"stackedBar":case"normalizedBar":return["number","category"];case"groupedBar":return["number","groupedCategory"];case"column":case"stackedColumn":case"normalizedColumn":case"line":case"area":case"stackedArea":case"normalizedArea":case"histogram":return["category","number"];case"groupedColumn":return["groupedCategory","number"];case"scatter":case"bubble":return["number","number"];default:return}}(n),p=null==c?void 0:c.map((function(t,e){return ET({type:t},0===e?a:s)}));return ET({chartType:n,chartThemeName:null!==(e=QT[o])&&void 0!==e?e:"ag-default",chartOptions:ET(ET({},l),{axes:p,xAxis:a,yAxis:s})},u)}function RT(t){return t=YT("chartOptions.seriesDefaults.label.minRequiredAngle","minAngle",t)}function kT(t){return t=qT("chart",t=JT("chartOptions.seriesDefaults.highlightStyle",t,(function(t){var e=t.dimOpacity,r=TT(t,["dimOpacity"]);return ET(ET({},r),null!=e?{series:{dimOpacity:e}}:{})}))),t=qT("chartOptions.seriesDefaults.tooltipClass",t),t=zT("chartOptions.axes[].label.rotation",0,t=qT("chartOptions.seriesDefaults.tooltipTracking",t)),t=zT("chartOptions.axes[].label.rotation",335,t)}function FT(t){var e=function(t){var e=t.item,r=t.series,n=TT(t,["item","series"]);return ET({item:ET(ET({},n),e)},r?{series:r}:{})};return t=JT("chartOptions.seriesDefaults.highlightStyle",t,e),t=JT("chartOptions.series[].highlightStyle",t,e)}function IT(t){t=KT("chartOptions.seriesDefaults.fill.opacity","chartOptions.seriesDefaults.fillOpacity",t),t=KT("chartOptions.seriesDefaults.stroke.opacity","chartOptions.seriesDefaults.strokeOpacity",t),t=qT("chartOptions.seriesDefaults.fill",t=KT("chartOptions.seriesDefaults.stroke.width","chartOptions.seriesDefaults.strokeWidth",t)),t=qT("chartOptions.seriesDefaults.stroke",t),t=qT("chartOptions.seriesDefaults.callout.colors",t),t=qT("chartOptions.xAxis",t);var e=t=qT("chartOptions.yAxis",t),r=e.chartType,n=e.chartOptions,o=n.axes;n.series;var i=n.seriesDefaults,a=TT(n,["axes","series","seriesDefaults"]),s=TT(e,["chartType","chartOptions"]),l=[Nw(r)],u={};if(!l.includes("pie")){var c={top:{},bottom:{},left:{},right:{}},p=o.map((function(t){var e,r=t.type,n=TT(t,["type"]);return(e={})[r]=ET(ET({},c),n),e})).reduce($T,{});Gw.filter((function(t){return null==p[t]})).forEach((function(t){p[t]=ET({},c)})),u.axes=p}var d=l.map((function(t){var e;return(e={})[t]=ET(ET(ET({},u),{series:i}),a),e})).reduce($T,{});return t=ET(ET({},s),{chartType:r,chartOptions:d})}function LT(t){return t=qT("chartOptions.*.title.padding",t),t=qT("chartOptions.*.subtitle.padding",t),t=WT("chartOptions.*.axes.*.title.enabled",!1,t=qT("chartOptions.*.axes.*.title.padding",t))}function NT(t){return t=YT("chartOptions.pie.series.callout","calloutLine",t),t=YT("chartOptions.pie.series.label","calloutLabel",t),t=YT("chartOptions.pie.series.labelKey","sectorLabelKey",t),t=YT("chartOptions.pie.series.labelName","sectorLabelName",t)}function GT(t){return t=XT("chartOptions.scatter.series.fill","chartOptions.scatter.series.marker.fill",t),t=XT("chartOptions.scatter.series.fillOpacity","chartOptions.scatter.series.marker.fillOpacity",t),t=XT("chartOptions.scatter.series.stroke","chartOptions.scatter.series.marker.stroke",t),t=XT("chartOptions.scatter.series.strokeOpacity","chartOptions.scatter.series.marker.strokeOpacity",t),t=KT("chartOptions.scatter.series.paired","chartOptions.scatter.paired",t=XT("chartOptions.scatter.series.strokeWidth","chartOptions.scatter.series.marker.strokeWidth",t))}function jT(t){return t=qT("chartOptions.axes[].tick.count",t)}function VT(t){return t=JT("chartOptions.*.tooltip",t,(function(t){var e,r,n,o,i=t.tracking,a=TT(t,["tracking"]),s=ET({},a);return!1===i?(null!==(e=s.position)&&void 0!==e||(s.position={type:"pointer"}),null!==(r=s.range)&&void 0!==r||(s.range="nearest")):!0===i&&(null!==(n=s.position)&&void 0!==n||(s.position={type:"node"}),null!==(o=s.range)&&void 0!==o||(s.range="nearest")),s}))}function BT(t){return t=YT("chartOptions.pie.series.labelKey","sectorLabelKey",t),t=WT("chartOptions.common.legend.position","right",t=function t(e,r,n){var o;"string"==typeof e&&(e=e.split("."));var i=e[0];e.length>1&&(n[i]=t(e.slice(1),r,null!==(o=n[i])&&void 0!==o?o:{}));Object.keys(n).includes(i)||(n[i]=r);return n}("chartOptions.common.legend.enabled",!0,t=qT("chartOptions.*.series.flipXY",t=VT(t=jT(t=YT("chartOptions.pie.series.labelName","sectorLabelName",t))))))}function UT(t,e,r){if(HT(t)>HT(e.version)){var n=r(e);return n.version=t,n}return e}function HT(t){var e=function(t){var e="string"==typeof t?t.split(".").map((function(t){return Number(t)})):[];if(3!==e.length||e.some((function(t){return isNaN(t)})))throw new Error("AG Grid - Illegal version string: "+t);return{major:e[0],minor:e[1],patch:e[2]}}(t);return 1e4*e.major+100*e.minor+e.patch}function zT(t,e,r){return ZT(t,!0,r,(function(t,r){t[r]===e&&delete t[r]}))}function WT(t,e,r){return ZT(t,!1,r,(function(t,r){null==t[r]&&(t[r]=e)}))}function KT(t,e,r){var n=void 0,o=!1;return r=ZT(t,!0,r,(function(t,e){o=!0,n=t[e],delete t[e]})),o?ZT(e,!1,r,(function(t,e){t[e]=n})):r}function XT(t,e,r){var n=void 0,o=!1;return r=ZT(t,!0,r,(function(t,e){o=!0,n=t[e],delete t[e]})),o?ZT(e,!1,r,(function(t,e){void 0===t[e]&&(t[e]=n)})):r}function YT(t,e,r){return ZT(t,!0,r,(function(t,r){t[e]=t[r],delete t[r]}))}function qT(t,e){return ZT(t,!0,e,(function(t,e){return delete t[e]}))}function ZT(t,e,r,n){var o=t instanceof Array?t:t.split("."),i=o.slice(0,o.length-1),a=o[o.length-1];return JT(i,r,(function(t){var r=Object.keys(t).includes(a);if(e&&!r)return t;var o=ET({},t);return n(o,a),o}))}function JT(t,e,r){var n,o,i=t instanceof Array?t:t.split(".");if(e=ET({},e),0===i.length)return r(e);if(i[0].startsWith("{")){var a=i[0].substring(1,i[0].lastIndexOf("}")).split(",");try{for(var s=DT(a),l=s.next();!l.done;l=s.next()){var u=l.value;null!=e[u]&&(e[u]=JT(i.slice(1),e[u],r))}}catch(t){n={error:t}}finally{try{l&&!l.done&&(o=s.return)&&o.call(s)}finally{if(n)throw n.error}}}else if(i[0].endsWith("[]")){var c=i[0].substring(0,t[0].indexOf("["));e[c]instanceof Array&&(e[c]=e[c].map((function(t){return JT(i.slice(1),t,r)})))}else if("*"===i[0])for(var p in e)e[p]=JT(i.slice(1),e[p],r);else null!=e[i[0]]&&(e[i[0]]=JT(i.slice(1),e[i[0]],r));return e}var $T=function(t,e){return ET(ET({},t),e)},QT={borneo:"ag-default",material:"ag-material",pastel:"ag-pastel",bright:"ag-vivid",flat:"ag-solar"},tP=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),eP=function(){return(eP=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},rP=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},nP=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},oP=function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t},iP=function(t){function r(){var e=null!==t&&t.apply(this,arguments)||this;return e.activeCharts=new Set,e.activeChartComps=new Set,e.crossFilteringContext={lastSelectedChartId:""},e}return tP(r,t),r.prototype.updateChart=function(t){if(0!==this.activeChartComps.size){var e=oP([],nP(this.activeChartComps)).find((function(e){return e.getChartId()===t.chartId}));e?e.update(t):console.warn("AG Grid - Unable to update chart. No active chart found with ID: "+t.chartId+".")}else console.warn("AG Grid - No active charts to update.")},r.prototype.getChartModels=function(){var t=[];return this.activeChartComps.forEach((function(e){return t.push(function(t){return eP(eP({},t),{version:"30.2.0"})}(e.getChartModel()))})),t},r.prototype.getChartRef=function(t){var e;return this.activeCharts.forEach((function(r){r.chartId===t&&(e=r)})),e},r.prototype.getChartComp=function(t){var e;return this.activeChartComps.forEach((function(r){r.getChartId()===t&&(e=r)})),e},r.prototype.getChartImageDataURL=function(t){var e;return this.activeChartComps.forEach((function(r){r.getChartId()===t.chartId&&(e=r.getChartImageDataURL(t.fileFormat))})),e},r.prototype.downloadChart=function(t){var e=Array.from(this.activeChartComps).find((function(e){return e.getChartId()===t.chartId}));null==e||e.downloadChart(t.dimensions,t.fileName,t.fileFormat)},r.prototype.openChartToolPanel=function(t){var e=Array.from(this.activeChartComps).find((function(e){return e.getChartId()===t.chartId}));null==e||e.openChartToolPanel(t.panel)},r.prototype.closeChartToolPanel=function(t){var e=Array.from(this.activeChartComps).find((function(e){return e.getChartId()===t}));null==e||e.closeChartToolPanel()},r.prototype.createChartFromCurrentRange=function(t){void 0===t&&(t="groupedColumn");var e=this.getSelectedRange();return this.createChart(e,t)},r.prototype.restoreChart=function(t,e){var r=this;if(t){"30.2.0"!==t.version&&(t=AT(t));var n={cellRange:t.cellRange,chartType:t.chartType,chartThemeName:t.chartThemeName,chartContainer:e,suppressChartRanges:t.suppressChartRanges,aggFunc:t.aggFunc,unlinkChart:t.unlinkChart,seriesChartTypes:t.seriesChartTypes},o=function(t){return r.rangeService?r.rangeService.createCellRangeFromCellRangeParams(t):void 0};if("pivot"===t.modelType){this.columnModel.isPivotMode()||this.columnModel.setPivotMode(!0,"pivotChart");var i=o({rowStartIndex:null,rowStartPinned:void 0,rowEndIndex:null,rowEndPinned:void 0,columns:this.columnModel.getAllDisplayedColumns().map((function(t){return t.getColId()}))});return i?this.createChart(i,n.chartType,n.chartThemeName,!0,!0,n.chartContainer,void 0,void 0,n.unlinkChart,!1,t.chartOptions):void console.warn("AG Grid - unable to create chart as there are no columns in the grid.")}var a=o(n.cellRange);if(a)return this.createChart(a,n.chartType,n.chartThemeName,!1,n.suppressChartRanges,n.chartContainer,n.aggFunc,void 0,n.unlinkChart,!1,t.chartOptions,t.chartPalette,n.seriesChartTypes);console.warn("AG Grid - unable to create chart as no range is selected")}else console.warn("AG Grid - unable to restore chart as no chart model is provided")},r.prototype.createRangeChart=function(t){var e,r=null===(e=this.rangeService)||void 0===e?void 0:e.createCellRangeFromCellRangeParams(t.cellRange);if(r)return this.createChart(r,t.chartType,t.chartThemeName,!1,t.suppressChartRanges,t.chartContainer,t.aggFunc,t.chartThemeOverrides,t.unlinkChart,void 0,void 0,void 0,t.seriesChartTypes);console.warn("AG Grid - unable to create chart as no range is selected")},r.prototype.createPivotChart=function(t){this.columnModel.isPivotMode()||this.columnModel.setPivotMode(!0,"pivotChart");var e={rowStartIndex:null,rowStartPinned:void 0,rowEndIndex:null,rowEndPinned:void 0,columns:this.columnModel.getAllDisplayedColumns().map((function(t){return t.getColId()}))},r=this.rangeService?this.rangeService.createCellRangeFromCellRangeParams(e):void 0;if(r)return this.createChart(r,t.chartType,t.chartThemeName,!0,!0,t.chartContainer,void 0,t.chartThemeOverrides,t.unlinkChart);console.warn("AG Grid - unable to create chart as there are no columns in the grid.")},r.prototype.createCrossFilterChart=function(t){var e,r=null===(e=this.rangeService)||void 0===e?void 0:e.createCellRangeFromCellRangeParams(t.cellRange);if(r){var n=!(void 0!==t.suppressChartRanges&&null!==t.suppressChartRanges)||t.suppressChartRanges;return this.createChart(r,t.chartType,t.chartThemeName,!1,n,t.chartContainer,t.aggFunc,t.chartThemeOverrides,t.unlinkChart,!0)}console.warn("AG Grid - unable to create chart as no range is selected")},r.prototype.createChart=function(t,e,r,n,o,i,a,s,l,u,c,p,d){var h=this;void 0===n&&(n=!1),void 0===o&&(o=!1),void 0===l&&(l=!1),void 0===u&&(u=!1);var f=this.gridOptionsService.getCallback("createChartContainer"),v={chartId:this.generateId(),pivotChart:n,cellRange:t,chartType:e,chartThemeName:r,insideDialog:!(i||f),suppressChartRanges:o,aggFunc:a,chartThemeOverrides:s,unlinkChart:l,crossFiltering:u,crossFilteringContext:this.crossFilteringContext,chartOptionsToRestore:c,chartPaletteToRestore:p,seriesChartTypes:d,crossFilteringResetCallback:function(){return h.activeChartComps.forEach((function(t){return t.crossFilteringReset()}))}},y=new OT(v);this.context.createBean(y);var g=this.createChartRef(y);if(i){i.appendChild(y.getGui());var m=this.environment.getTheme();m.el&&!m.el.contains(i)&&i.classList.add(m.theme)}else f?f(g):y.addEventListener(OT.EVENT_DESTROYED,(function(){h.activeChartComps.delete(y),h.activeCharts.delete(g)}));return g},r.prototype.createChartRef=function(t){var e=this,r={destroyChart:function(){e.activeCharts.has(r)&&(e.context.destroyBean(t),e.activeChartComps.delete(t),e.activeCharts.delete(r))},chartElement:t.getGui(),chart:t.getUnderlyingChart(),chartId:t.getChartModel().chartId};return this.activeCharts.add(r),this.activeChartComps.add(t),r},r.prototype.getSelectedRange=function(){var t=this.rangeService.getCellRanges();return t.length>0?t[0]:{}},r.prototype.generateId=function(){return"id-"+Math.random().toString(36).substring(2,18)},r.prototype.destroyAllActiveCharts=function(){this.activeCharts.forEach((function(t){return t.destroyChart()}))},r.CHARTS_VERSION="8.2.0",rP([E("rangeService")],r.prototype,"rangeService",void 0),rP([n("columnModel")],r.prototype,"columnModel",void 0),rP([F],r.prototype,"destroyAllActiveCharts",null),r=rP([e("chartService")],r)}(r),aP=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),sP=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},lP=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}var n;return aP(r,t),n=r,r.prototype.translate=function(t,e){return this.localeService.getLocaleTextFunc()(t,n.DEFAULT_TRANSLATIONS[t]||e)},r.DEFAULT_TRANSLATIONS={pivotChartTitle:"Pivot Chart",rangeChartTitle:"Range Chart",settings:"Settings",data:"Data",format:"Format",categories:"Categories",defaultCategory:"(None)",series:"Series",xyValues:"X Y Values",paired:"Paired Mode",axis:"Axis",navigator:"Navigator",color:"Color",thickness:"Thickness",xType:"X Type",automatic:"Automatic",category:"Category",number:"Number",time:"Time",autoRotate:"Auto Rotate",xRotation:"X Rotation",yRotation:"Y Rotation",ticks:"Ticks",width:"Width",height:"Height",length:"Length",padding:"Padding",spacing:"Spacing",chart:"Chart",title:"Title",titlePlaceholder:"Chart title - double click to edit",background:"Background",font:"Font",top:"Top",right:"Right",bottom:"Bottom",left:"Left",labels:"Labels",calloutLabels:"Callout Labels",sectorLabels:"Sector Labels",positionRatio:"Position Ratio",size:"Size",shape:"Shape",minSize:"Minimum Size",maxSize:"Maximum Size",legend:"Legend",position:"Position",markerSize:"Marker Size",markerStroke:"Marker Stroke",markerPadding:"Marker Padding",itemSpacing:"Item Spacing",itemPaddingX:"Item Padding X",itemPaddingY:"Item Padding Y",layoutHorizontalSpacing:"Horizontal Spacing",layoutVerticalSpacing:"Vertical Spacing",strokeWidth:"Stroke Width",offset:"Offset",offsets:"Offsets",tooltips:"Tooltips",callout:"Callout",markers:"Markers",shadow:"Shadow",blur:"Blur",xOffset:"X Offset",yOffset:"Y Offset",lineWidth:"Line Width",lineDash:"Line Dash",normal:"Normal",bold:"Bold",italic:"Italic",boldItalic:"Bold Italic",predefined:"Predefined",fillOpacity:"Fill Opacity",strokeOpacity:"Line Opacity",histogramBinCount:"Bin count",columnGroup:"Column",barGroup:"Bar",pieGroup:"Pie",lineGroup:"Line",scatterGroup:"X Y (Scatter)",areaGroup:"Area",histogramGroup:"Histogram",combinationGroup:"Combination",groupedColumnTooltip:"Grouped",stackedColumnTooltip:"Stacked",normalizedColumnTooltip:"100% Stacked",groupedBarTooltip:"Grouped",stackedBarTooltip:"Stacked",normalizedBarTooltip:"100% Stacked",pieTooltip:"Pie",doughnutTooltip:"Doughnut",lineTooltip:"Line",groupedAreaTooltip:"Area",stackedAreaTooltip:"Stacked",normalizedAreaTooltip:"100% Stacked",scatterTooltip:"Scatter",bubbleTooltip:"Bubble",histogramTooltip:"Histogram",columnLineComboTooltip:"Column & Line",areaColumnComboTooltip:"Area & Column",customComboTooltip:"Custom Combination",noDataToChart:"No data available to be charted.",pivotChartRequiresPivotMode:"Pivot Chart requires Pivot Mode enabled.",chartSettingsToolbarTooltip:"Menu",chartLinkToolbarTooltip:"Linked to Grid",chartUnlinkToolbarTooltip:"Unlinked from Grid",chartDownloadToolbarTooltip:"Download Chart",histogramFrequency:"Frequency",seriesChartType:"Series Chart Type",seriesType:"Series Type",secondaryAxis:"Secondary Axis"},r=n=sP([e("chartTranslationService")],r)}(r),uP=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),cP=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},pP=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}var o;return uP(r,t),o=r,r.prototype.filter=function(t,e){void 0===e&&(e=!1);var r=this.gridApi.getFilterModel();if(e)this.resetFilters(r);else{var n=o.extractFilterColId(t);this.isValidColumnFilter(n)?this.updateFilters(r,t,n):console.warn("AG Grid: cross filtering requires a 'agSetColumnFilter' or 'agMultiColumnFilter' to be defined on the column with id: '"+n+"'")}},r.prototype.resetFilters=function(t){Object.keys(t).length>0&&(this.gridApi.setFilterModel(null),this.gridApi.onFilterChanged())},r.prototype.updateFilters=function(t,e,r){var n,i=o.extractFilterColId(e),a=e.datum[i];if(void 0!==a){var s=a.toString();if(e.event.metaKey||e.event.ctrlKey){var l=this.getCurrentGridValuesForCategory(r),c=void 0;u.includes(l,s)?c=l.filter((function(t){return t!==s})):(c=l).push(s),t[r]=this.getUpdatedFilterModel(r,c)}else{c=[s];(n={})[r]=this.getUpdatedFilterModel(r,c),t=n}this.gridApi.setFilterModel(t)}},r.prototype.getUpdatedFilterModel=function(t,e){return"agMultiColumnFilter"===this.getColumnFilterType(t)?{filterType:"multi",filterModels:[null,{filterType:"set",values:e}]}:{filterType:"set",values:e}},r.prototype.getCurrentGridValuesForCategory=function(t){var e=this,r=[],n=this.getColumnById(t);return this.gridApi.forEachNodeAfterFilter((function(t){if(n&&!t.group){var o=e.valueService.getValue(n,t)+"";r.includes(o)||r.push(o)}})),r},r.extractFilterColId=function(t){return t.xKey||t.calloutLabelKey},r.prototype.isValidColumnFilter=function(t){t.indexOf("-filtered-out")&&(t=t.replace("-filtered-out",""));var e=this.getColumnFilterType(t);return"boolean"==typeof e?e:u.includes(["agSetColumnFilter","agMultiColumnFilter"],e)},r.prototype.getColumnFilterType=function(t){var e=this.getColumnById(t);if(e)return e.getColDef().filter},r.prototype.getColumnById=function(t){return this.columnModel.getGridColumn(t)},cP([n("gridApi")],r.prototype,"gridApi",void 0),cP([n("columnModel")],r.prototype,"columnModel",void 0),cP([n("valueService")],r.prototype,"valueService",void 0),r=o=cP([e("chartCrossFilterService")],r)}(r),dP=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),hP=function(){return(hP=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},fP=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},vP=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},yP=function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t},gP=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},mP=function(t){function r(){var e=null!==t&&t.apply(this,arguments)||this;return e.cellRanges=[],e.bodyScrollListener=e.onBodyScroll.bind(e),e.dragging=!1,e.intersectionRange=!1,e}return dP(r,t),r.prototype.init=function(){var t=this;this.addManagedListener(this.eventService,l.EVENT_NEW_COLUMNS_LOADED,(function(){return t.onColumnsChanged()})),this.addManagedListener(this.eventService,l.EVENT_COLUMN_VISIBLE,this.onColumnsChanged.bind(this)),this.addManagedListener(this.eventService,l.EVENT_COLUMN_VALUE_CHANGED,this.onColumnsChanged.bind(this)),this.addManagedListener(this.eventService,l.EVENT_COLUMN_PIVOT_MODE_CHANGED,(function(){return t.removeAllCellRanges()})),this.addManagedListener(this.eventService,l.EVENT_COLUMN_ROW_GROUP_CHANGED,(function(){return t.removeAllCellRanges()})),this.addManagedListener(this.eventService,l.EVENT_COLUMN_PIVOT_CHANGED,(function(){return t.removeAllCellRanges()})),this.addManagedListener(this.eventService,l.EVENT_COLUMN_GROUP_OPENED,this.refreshLastRangeStart.bind(this)),this.addManagedListener(this.eventService,l.EVENT_COLUMN_MOVED,this.refreshLastRangeStart.bind(this)),this.addManagedListener(this.eventService,l.EVENT_COLUMN_PINNED,this.refreshLastRangeStart.bind(this)),this.ctrlsService.whenReady((function(){var e=t.ctrlsService.getGridBodyCtrl();t.autoScrollService=new $({scrollContainer:e.getBodyViewportElement(),scrollAxis:"xy",getVerticalPosition:function(){return e.getScrollFeature().getVScrollPosition().top},setVerticalPosition:function(t){return e.getScrollFeature().setVerticalScrollPosition(t)},getHorizontalPosition:function(){return e.getScrollFeature().getHScrollPosition().left},setHorizontalPosition:function(t){return e.getScrollFeature().setHorizontalScrollPosition(t)},shouldSkipVerticalScroll:function(){return!t.gridOptionsService.isDomLayout("normal")},shouldSkipHorizontalScroll:function(){return!e.getScrollFeature().isHorizontalScrollShowing()}})}))},r.prototype.onColumnsChanged=function(){var t=this;this.refreshLastRangeStart();var e=this.columnModel.getAllDisplayedColumns();this.cellRanges.forEach((function(r){var n=r.columns;r.columns=r.columns.filter((function(t){return t.isVisible()&&-1!==e.indexOf(t)})),!u.areEqual(n,r.columns)&&t.dispatchChangedEvent(!1,!0,r.id)}));var r=this.cellRanges.length;this.cellRanges=this.cellRanges.filter((function(t){return t.columns.length>0})),r>this.cellRanges.length&&this.dispatchChangedEvent(!1,!0)},r.prototype.refreshLastRangeStart=function(){var t=u.last(this.cellRanges);t&&this.refreshRangeStart(t)},r.prototype.isContiguousRange=function(t){var e=t.columns;if(!e.length)return!1;var r=this.columnModel.getAllDisplayedColumns(),n=e.map((function(t){return r.indexOf(t)})).sort((function(t,e){return t-e}));return u.last(n)-n[0]+1===e.length},r.prototype.getRangeStartRow=function(t){return t.startRow&&t.endRow?this.rowPositionUtils.before(t.startRow,t.endRow)?t.startRow:t.endRow:{rowIndex:0,rowPinned:this.pinnedRowModel.getPinnedTopRowCount()>0?"top":null}},r.prototype.getRangeEndRow=function(t){if(t.startRow&&t.endRow)return this.rowPositionUtils.before(t.startRow,t.endRow)?t.endRow:t.startRow;var e=this.pinnedRowModel.getPinnedBottomRowCount();return e>0?{rowIndex:e-1,rowPinned:"bottom"}:{rowIndex:this.rowModel.getRowCount()-1,rowPinned:null}},r.prototype.setRangeToCell=function(t,e){if(void 0===e&&(e=!1),this.gridOptionsService.is("enableRangeSelection")){var r=this.calculateColumnsBetween(t.column,t.column);if(r){(this.gridOptionsService.is("suppressMultiRangeSelection")||!e||u.missing(this.cellRanges))&&this.removeAllCellRanges(!0);var n={rowIndex:t.rowIndex,rowPinned:t.rowPinned},o={startRow:n,endRow:n,columns:r,startColumn:t.column};this.cellRanges.push(o),this.setNewestRangeStartCell(t),this.onDragStop(),this.dispatchChangedEvent(!0,!0)}}},r.prototype.extendLatestRangeToCell=function(t){if(!this.isEmpty()&&this.newestRangeStartCell){var e=u.last(this.cellRanges);this.updateRangeEnd(e,t)}},r.prototype.updateRangeEnd=function(t,e,r){void 0===r&&(r=!1);var n=e.column,o=this.calculateColumnsBetween(t.startColumn,n);o&&!this.isLastCellOfRange(t,e)&&(t.columns=o,t.endRow={rowIndex:e.rowIndex,rowPinned:e.rowPinned},r||this.dispatchChangedEvent(!0,!0,t.id))},r.prototype.refreshRangeStart=function(t){var e=t.startColumn,r=t.columns,n=function(e,r){var n=t.columns.filter((function(t){return t!==e}));e?(t.startColumn=e,t.columns=r?yP([e],vP(n)):yP(yP([],vP(n)),[e])):t.columns=n},o=this.getRangeEdgeColumns(t),i=o.left,a=o.right;e===r[0]&&e!==i?n(i,!0):e===u.last(r)&&e===a&&n(a,!1)},r.prototype.getRangeEdgeColumns=function(t){var e=this.columnModel.getAllDisplayedColumns(),r=t.columns.map((function(t){return e.indexOf(t)})).filter((function(t){return t>-1})).sort((function(t,e){return t-e}));return{left:e[r[0]],right:e[u.last(r)]}},r.prototype.extendLatestRangeInDirection=function(t){if(!this.isEmpty()&&this.newestRangeStartCell){var e=t.key,r=t.ctrlKey||t.metaKey,n=u.last(this.cellRanges),o=this.newestRangeStartCell,i=n.columns[0],a=u.last(n.columns),s=n.endRow.rowIndex,l=n.endRow.rowPinned,c={column:o.column===i?a:i,rowIndex:s,rowPinned:l},p=this.cellNavigationService.getNextCellToFocus(e,c,r);if(p)return this.setCellRange({rowStartIndex:o.rowIndex,rowStartPinned:o.rowPinned,rowEndIndex:p.rowIndex,rowEndPinned:p.rowPinned,columnStart:o.column,columnEnd:p.column}),p}},r.prototype.setCellRange=function(t){this.gridOptionsService.is("enableRangeSelection")&&(this.removeAllCellRanges(!0),this.addCellRange(t))},r.prototype.setCellRanges=function(t){var e=this;u.shallowCompare(this.cellRanges,t)||(this.removeAllCellRanges(!0),t.forEach((function(t){t.columns&&t.startRow&&e.setNewestRangeStartCell({rowIndex:t.startRow.rowIndex,rowPinned:t.startRow.rowPinned,column:t.columns[0]}),e.cellRanges.push(t)})),this.dispatchChangedEvent(!1,!0))},r.prototype.setNewestRangeStartCell=function(t){this.newestRangeStartCell=t},r.prototype.clearCellRangeCellValues=function(t){var e=this,r=t.cellRanges,n=t.cellEventSource,o=void 0===n?"rangeService":n,i=t.dispatchWrapperEvents,a=t.wrapperEventSource,s=void 0===a?"deleteKey":a;if(i){var u={type:l.EVENT_RANGE_DELETE_START,source:s};this.eventService.dispatchEvent(u)}if(r||(r=this.cellRanges),r.forEach((function(t){e.forEachRowInRange(t,(function(r){var n=e.rowPositionUtils.getRowNode(r);if(n)for(var i=0;i<t.columns.length;i++){var a=e.columnModel.getGridColumn(t.columns[i]);if(!a||!a.isCellEditable(n))return;n.setDataValue(a,null,o)}}))})),i){var c={type:l.EVENT_RANGE_DELETE_END,source:s};this.eventService.dispatchEvent(c)}},r.prototype.createCellRangeFromCellRangeParams=function(t){var e,r=this,n=!1;if(t.columns)e=t.columns.map((function(t){return r.columnModel.getColumnWithValidation(t)})).filter((function(t){return t}));else{var o=this.columnModel.getColumnWithValidation(t.columnStart),i=this.columnModel.getColumnWithValidation(t.columnEnd);if(!o||!i)return;(e=this.calculateColumnsBetween(o,i))&&e.length&&(n=e[0]!==o)}if(e)return{startRow:null!=t.rowStartIndex?{rowIndex:t.rowStartIndex,rowPinned:t.rowStartPinned||null}:void 0,endRow:null!=t.rowEndIndex?{rowIndex:t.rowEndIndex,rowPinned:t.rowEndPinned||null}:void 0,columns:e,startColumn:n?u.last(e):e[0]}},r.prototype.addCellRange=function(t){if(this.gridOptionsService.is("enableRangeSelection")){var e=this.createCellRangeFromCellRangeParams(t);e&&(e.startRow&&this.setNewestRangeStartCell({rowIndex:e.startRow.rowIndex,rowPinned:e.startRow.rowPinned,column:e.startColumn}),this.cellRanges.push(e),this.dispatchChangedEvent(!1,!0,e.id))}},r.prototype.getCellRanges=function(){return this.cellRanges},r.prototype.isEmpty=function(){return 0===this.cellRanges.length},r.prototype.isMoreThanOneCell=function(){var t=this.cellRanges.length;if(0===t)return!1;if(t>1)return!0;var e=this.cellRanges[0],r=this.getRangeStartRow(e),n=this.getRangeEndRow(e);return r.rowPinned!==n.rowPinned||r.rowIndex!==n.rowIndex||1!==e.columns.length},r.prototype.areAllRangesAbleToMerge=function(){var t,e,r,n=this,o=new Map;if(this.cellRanges.length<=1)return!0;this.cellRanges.forEach((function(t){n.forEachRowInRange(t,(function(e){var r=(e.rowPinned||"normal")+"_"+e.rowIndex,n=o.get(r),i=t.columns.map((function(t){return t.getId()}));if(n){var a=i.filter((function(t){return-1===n.indexOf(t)}));n.push.apply(n,yP([],vP(a)))}else o.set(r,i)}))}));try{for(var i=gP(o.values()),a=i.next();!a.done;a=i.next()){var s=a.value.sort().join();if(void 0!==r){if(r!==s)return!1}else r=s}}catch(e){t={error:e}}finally{try{a&&!a.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}return!0},r.prototype.forEachRowInRange=function(t,e){for(var r=this.getRangeStartRow(t),n=this.getRangeEndRow(t),o=r;o&&(e(o),!this.rowPositionUtils.sameRow(o,n));)o=this.cellNavigationService.getRowBelow(o)},r.prototype.removeAllCellRanges=function(t){this.isEmpty()||(this.onDragStop(),this.cellRanges.length=0,t||this.dispatchChangedEvent(!1,!0))},r.prototype.onBodyScroll=function(){this.dragging&&this.lastMouseEvent&&this.onDragging(this.lastMouseEvent)},r.prototype.isCellInAnyRange=function(t){return this.getCellRangeCount(t)>0},r.prototype.isCellInSpecificRange=function(t,e){var r=null!==e.columns&&u.includes(e.columns,t.column),n=this.isRowInRange(t.rowIndex,t.rowPinned,e);return r&&n},r.prototype.isLastCellOfRange=function(t,e){var r=t.startRow,n=t.endRow,o=this.rowPositionUtils.before(r,n)?n:r,i=e.rowIndex===o.rowIndex&&e.rowPinned===o.rowPinned,a=t.columns[0],s=u.last(t.columns),l=t.startColumn===a?s:a;return e.column===l&&i},r.prototype.isBottomRightCell=function(t,e){var r=this.columnModel.getAllDisplayedColumns(),n=t.columns.map((function(t){return r.indexOf(t)})).sort((function(t,e){return t-e})),o=t.startRow,i=t.endRow,a=this.rowPositionUtils.before(o,i)?i:o,s=r.indexOf(e.column)===u.last(n),l=e.rowIndex===a.rowIndex&&u.makeNull(e.rowPinned)===u.makeNull(a.rowPinned);return s&&l},r.prototype.getCellRangeCount=function(t){var e=this;return this.isEmpty()?0:this.cellRanges.filter((function(r){return e.isCellInSpecificRange(t,r)})).length},r.prototype.isRowInRange=function(t,e,r){var n=this.getRangeStartRow(r),o=this.getRangeEndRow(r),i={rowIndex:t,rowPinned:e||null},a=i.rowIndex===n.rowIndex&&i.rowPinned==n.rowPinned,s=i.rowIndex===o.rowIndex&&i.rowPinned==o.rowPinned;if(a||s)return!0;var l=!this.rowPositionUtils.before(i,n),u=this.rowPositionUtils.before(i,o);return l&&u},r.prototype.getDraggingRange=function(){return this.draggingRange},r.prototype.onDragStart=function(t){if(this.gridOptionsService.is("enableRangeSelection")){var e=t.ctrlKey,r=t.metaKey,n=t.shiftKey,o=e||r,i=!!!this.gridOptionsService.is("suppressMultiRangeSelection")&&o,a=n&&u.existsAndNotEmpty(this.cellRanges);i||a&&!u.exists(u.last(this.cellRanges).type)||this.removeAllCellRanges(!0);var s=this.dragService.getStartTarget();if(s&&this.updateValuesOnMove(s),this.lastCellHovered){if(this.dragging=!0,this.lastMouseEvent=t,this.intersectionRange=i&&this.getCellRangeCount(this.lastCellHovered)>1,a||this.setNewestRangeStartCell(this.lastCellHovered),this.cellRanges.length>0)this.draggingRange=u.last(this.cellRanges);else{var l={rowIndex:this.lastCellHovered.rowIndex,rowPinned:this.lastCellHovered.rowPinned};this.draggingRange={startRow:l,endRow:l,columns:[this.lastCellHovered.column],startColumn:this.newestRangeStartCell.column},this.cellRanges.push(this.draggingRange)}this.ctrlsService.getGridBodyCtrl().addScrollEventListener(this.bodyScrollListener),this.dispatchChangedEvent(!0,!1,this.draggingRange.id)}}},r.prototype.intersectLastRange=function(t){var e=this;if(!(t&&this.dragging||this.gridOptionsService.is("suppressMultiRangeSelection")||this.isEmpty())){var r=u.last(this.cellRanges),n=this.getRangeStartRow(r),o=this.getRangeEndRow(r),i=[];this.cellRanges.slice(0,-1).forEach((function(t){var a=e.getRangeStartRow(t),s=e.getRangeEndRow(t),l=t.columns,c=l.filter((function(t){return-1===r.columns.indexOf(t)}));if(c.length!==l.length)if(e.rowPositionUtils.before(o,a)||e.rowPositionUtils.before(s,n))i.push(t);else{var p=i.length;if(e.rowPositionUtils.before(a,n)){var d={columns:yP([],vP(l)),startColumn:r.startColumn,startRow:hP({},a),endRow:e.cellNavigationService.getRowAbove(n)};i.push(d)}if(c.length>0){var h={columns:c,startColumn:u.includes(c,r.startColumn)?r.startColumn:c[0],startRow:e.rowPositionUtils.rowMax([hP({},n),hP({},a)]),endRow:e.rowPositionUtils.rowMin([hP({},o),hP({},s)])};i.push(h)}e.rowPositionUtils.before(o,s)&&i.push({columns:yP([],vP(l)),startColumn:r.startColumn,startRow:e.cellNavigationService.getRowBelow(o),endRow:hP({},s)}),i.length-p==1&&(i[i.length-1].id=t.id)}else i.push(t)})),this.cellRanges=i,t&&this.dispatchChangedEvent(!1,!0)}},r.prototype.updateValuesOnMove=function(t){var e=u.getCtrlForEventTarget(this.gridOptionsService,t,pt.DOM_DATA_KEY_CELL_CTRL),r=null==e?void 0:e.getCellPosition();this.cellHasChanged=!1,!r||this.lastCellHovered&&this.cellPositionUtils.equals(r,this.lastCellHovered)||(this.lastCellHovered&&(this.cellHasChanged=!0),this.lastCellHovered=r)},r.prototype.onDragging=function(t){var e=this;if(this.dragging&&t){this.updateValuesOnMove(t.target),this.lastMouseEvent=t;var r=this.lastCellHovered,n=function(t){return r&&r.rowPinned===t&&e.newestRangeStartCell.rowPinned===t},o=n("top")||n("bottom");if(this.autoScrollService.check(t,o),this.cellHasChanged){var i=this.calculateColumnsBetween(this.newestRangeStartCell.column,r.column);i&&(this.draggingRange.endRow={rowIndex:r.rowIndex,rowPinned:r.rowPinned},this.draggingRange.columns=i,this.dispatchChangedEvent(!1,!1,this.draggingRange.id))}}},r.prototype.onDragStop=function(){if(this.dragging){var t=this.draggingRange.id;this.autoScrollService.ensureCleared(),this.ctrlsService.getGridBodyCtrl().removeScrollEventListener(this.bodyScrollListener),this.lastMouseEvent=null,this.dragging=!1,this.draggingRange=void 0,this.lastCellHovered=void 0,this.intersectionRange&&(this.intersectionRange=!1,this.intersectLastRange()),this.dispatchChangedEvent(!1,!0,t)}},r.prototype.dispatchChangedEvent=function(t,e,r){var n={type:l.EVENT_RANGE_SELECTION_CHANGED,started:t,finished:e,id:r};this.eventService.dispatchEvent(n)},r.prototype.calculateColumnsBetween=function(t,e){var r=this.columnModel.getAllDisplayedColumns(),n=t===e,o=r.indexOf(t);if(o<0)console.warn("AG Grid: column "+t.getId()+" is not visible");else{var i=n?o:r.indexOf(e);if(!(i<0)){if(n)return[t];for(var a=Math.min(o,i),s=a===o?i:o,l=[],u=a;u<=s;u++)l.push(r[u]);return l}console.warn("AG Grid: column "+e.getId()+" is not visible")}},fP([n("rowModel")],r.prototype,"rowModel",void 0),fP([n("dragService")],r.prototype,"dragService",void 0),fP([n("columnModel")],r.prototype,"columnModel",void 0),fP([n("cellNavigationService")],r.prototype,"cellNavigationService",void 0),fP([n("pinnedRowModel")],r.prototype,"pinnedRowModel",void 0),fP([n("rowPositionUtils")],r.prototype,"rowPositionUtils",void 0),fP([n("cellPositionUtils")],r.prototype,"cellPositionUtils",void 0),fP([n("ctrlsService")],r.prototype,"ctrlsService",void 0),fP([i],r.prototype,"init",null),r=fP([e("rangeService")],r)}(r),bP=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),CP=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},SP=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.changedCalculatedValues=!1,e.dragging=!1,e.shouldDestroyOnEndDragging=!1,e}return bP(e,t),e.prototype.init=function(){var t=this;this.dragService.addDragSource({dragStartPixels:0,eElement:this.getGui(),onDragStart:this.onDragStart.bind(this),onDragging:function(e){t.dragging=!0,t.rangeService.autoScrollService.check(e),t.changedCalculatedValues&&(t.onDrag(e),t.changedCalculatedValues=!1)},onDragStop:function(e){t.dragging=!1,t.onDragEnd(e),t.clearValues(),t.rangeService.autoScrollService.ensureCleared(),document.body.classList.remove(t.getDraggingCssClass()),t.shouldDestroyOnEndDragging&&t.destroy()}}),this.addManagedListener(this.getGui(),"mousedown",this.preventRangeExtension.bind(this))},e.prototype.isDragging=function(){return this.dragging},e.prototype.getCellCtrl=function(){return this.cellCtrl},e.prototype.setCellCtrl=function(t){this.cellCtrl=t},e.prototype.getCellRange=function(){return this.cellRange},e.prototype.setCellRange=function(t){this.cellRange=t},e.prototype.getRangeStartRow=function(){return this.rangeStartRow},e.prototype.setRangeStartRow=function(t){this.rangeStartRow=t},e.prototype.getRangeEndRow=function(){return this.rangeEndRow},e.prototype.setRangeEndRow=function(t){this.rangeEndRow=t},e.prototype.getLastCellHovered=function(){return this.lastCellHovered},e.prototype.preventRangeExtension=function(t){t.stopPropagation()},e.prototype.onDragStart=function(t){this.cellHoverListener=this.addManagedListener(this.ctrlsService.getGridCtrl().getGui(),"mousemove",this.updateValuesOnMove.bind(this)),document.body.classList.add(this.getDraggingCssClass())},e.prototype.getDraggingCssClass=function(){return"ag-dragging-"+(this.type===dt.FILL?"fill":"range")+"-handle"},e.prototype.updateValuesOnMove=function(t){var e=this.mouseEventService.getCellPositionForEvent(t);!e||this.lastCellHovered&&this.cellPositionUtils.equals(e,this.lastCellHovered)||(this.lastCellHovered=e,this.changedCalculatedValues=!0)},e.prototype.getType=function(){return this.type},e.prototype.refresh=function(t){var e=this.getCellCtrl(),r=this.getGui(),n=u.last(this.rangeService.getCellRanges()),o=n.startRow,i=n.endRow;o&&i&&(this.rowPositionUtils.before(i,o)?(this.setRangeStartRow(i),this.setRangeEndRow(o)):(this.setRangeStartRow(o),this.setRangeEndRow(i)));if(e!==t||!u.isVisible(r)){this.setCellCtrl(t);var a=t.getComp().getParentOfValue();a&&a.appendChild(r)}this.setCellRange(n)},e.prototype.clearValues=function(){this.lastCellHovered=void 0,this.removeListeners()},e.prototype.removeListeners=function(){this.cellHoverListener&&(this.cellHoverListener(),this.cellHoverListener=void 0)},e.prototype.destroy=function(){if(!this.shouldDestroyOnEndDragging&&this.isDragging())return u.setDisplayed(this.getGui(),!1),void(this.shouldDestroyOnEndDragging=!0);this.shouldDestroyOnEndDragging=!1,t.prototype.destroy.call(this),this.removeListeners();var e=this.getGui();e.parentElement&&e.parentElement.removeChild(e)},CP([n("rowRenderer")],e.prototype,"rowRenderer",void 0),CP([n("dragService")],e.prototype,"dragService",void 0),CP([n("rangeService")],e.prototype,"rangeService",void 0),CP([n("mouseEventService")],e.prototype,"mouseEventService",void 0),CP([n("columnModel")],e.prototype,"columnModel",void 0),CP([n("cellNavigationService")],e.prototype,"cellNavigationService",void 0),CP([n("navigationService")],e.prototype,"navigationService",void 0),CP([n("rowPositionUtils")],e.prototype,"rowPositionUtils",void 0),CP([n("cellPositionUtils")],e.prototype,"cellPositionUtils",void 0),CP([n("ctrlsService")],e.prototype,"ctrlsService",void 0),CP([i],e.prototype,"init",null),e}(a);function wP(t){var e=t.length,r=0;if(e<=1)return t;for(var n=0;n<t.length;n++){var o=t[n],i=o.toString().split("e-");i.length>1?r=Math.max(r,parseInt(i[1],10)):Math.floor(o)!==o&&(r=Math.max(r,o.toString().split(".")[1].length))}for(var a=0,s=0,l=0,u=0,c=0,p=0;p<e;p++)a+=p,s+=c=t[p],u+=p*p,l+=p*c;var d=(e*l-a*s)/(e*u-a*a),h=s/e-d*a/e,f=[];for(p=0;p<=e;p++)f.push(parseFloat((p*d+h).toFixed(r)));return f}var xP=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),OP=function(){return(OP=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},EP=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},TP=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},PP=function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t},DP=function(t){function e(){var r=t.call(this,e.TEMPLATE)||this;return r.markedCells=[],r.cellValues=[],r.isUp=!1,r.isLeft=!1,r.isReduce=!1,r.type=dt.FILL,r}return xP(e,t),e.prototype.updateValuesOnMove=function(e){t.prototype.updateValuesOnMove.call(this,e),this.initialXY||(this.initialXY=this.mouseEventService.getNormalisedPosition(e));var r,n=this.initialXY,o=n.x,i=n.y,a=this.mouseEventService.getNormalisedPosition(e),s=a.x,l=a.y,u=Math.abs(o-s),c=Math.abs(i-l),p=this.getFillHandleDirection();(r="xy"===p?u>c?"x":"y":p)!==this.dragAxis&&(this.dragAxis=r,this.changedCalculatedValues=!0)},e.prototype.onDrag=function(t){if(!this.initialPosition){var e=this.getCellCtrl();if(!e)return;this.initialPosition=e.getCellPosition()}var r=this.getLastCellHovered();r&&this.markPathFrom(this.initialPosition,r)},e.prototype.onDragEnd=function(t){if(this.initialXY=null,this.markedCells.length){var e,r="x"===this.dragAxis,n=this.getCellRange(),o=n.columns.length,i=this.getRangeStartRow(),a=this.getRangeEndRow();if(this.isUp||this.isLeft){var s=r?i:this.lastCellMarked;e=this.rangeService.createCellRangeFromCellRangeParams({rowStartIndex:s.rowIndex,rowStartPinned:s.rowPinned,columnStart:r?this.lastCellMarked.column:n.columns[0],rowEndIndex:a.rowIndex,rowEndPinned:a.rowPinned,columnEnd:n.columns[o-1]})}else e=this.rangeService.createCellRangeFromCellRangeParams({rowStartIndex:i.rowIndex,rowStartPinned:i.rowPinned,columnStart:n.columns[0],rowEndIndex:r?a.rowIndex:this.lastCellMarked.rowIndex,rowEndPinned:r?a.rowPinned:this.lastCellMarked.rowPinned,columnEnd:r?this.lastCellMarked.column:n.columns[o-1]});e&&(this.raiseFillStartEvent(),this.handleValueChanged(n,e,t),this.rangeService.setCellRanges([e]),this.raiseFillEndEvent(n,e))}},e.prototype.getFillHandleDirection=function(){var t=this.gridOptionsService.get("fillHandleDirection");return t?"x"!==t&&"y"!==t&&"xy"!==t?(u.doOnce((function(){return console.warn("AG Grid: valid values for fillHandleDirection are 'x', 'y' and 'xy'. Default to 'xy'.")}),"warn invalid fill direction"),"xy"):t:"xy"},e.prototype.raiseFillStartEvent=function(){var t={type:l.EVENT_FILL_START};this.eventService.dispatchEvent(t)},e.prototype.raiseFillEndEvent=function(t,e){var r={type:l.EVENT_FILL_END,initialRange:t,finalRange:e};this.eventService.dispatchEvent(r)},e.prototype.handleValueChanged=function(t,e,r){var n=this,o=this.rangeService.getRangeEndRow(t),i=this.rangeService.getRangeStartRow(t),a=this.rangeService.getRangeEndRow(e),s=this.rangeService.getRangeStartRow(e),l="y"===this.dragAxis;if(!this.isReduce||this.gridOptionsService.is("suppressClearOnFillReduction")){var c=!0,p=[],d=[],h=0,f=function(){p.length=0,d.length=0,h=0},v=function(e,r){var d=n.isUp?o:i,h=!1;l&&(c=!0,f());for(var v=function(){var v=n.rowPositionUtils.getRowNode(d);if(!v)return"break";l&&e?y(p,e,v,(function(){return!n.rowPositionUtils.sameRow(d,n.isUp?i:o)})):r&&(c=!0,f(),r.forEach((function(e){return y(p,e,v,(function(){return e!==(n.isLeft?t.columns[0]:u.last(t.columns))}))}))),h=n.rowPositionUtils.sameRow(d,n.isUp?s:a),d=n.isUp?n.cellNavigationService.getRowAbove(d):n.cellNavigationService.getRowBelow(d)};!h&&d;){if("break"===v())break}},y=function(t,e,o,i){var a,s,l,p=!1;if(c)l=n.valueService.getValue(e,o),d.push(l),c=i();else{var f=n.processValues(r,t,d,e,o,h++),v=f.value,y=f.fromUserFunction,g=f.sourceCol,m=f.sourceRowNode;if(l=v,e.isCellEditable(o)){var b=n.valueService.getValue(e,o);y||((null===(a=null==g?void 0:g.getColDef())||void 0===a?void 0:a.useValueFormatterForExport)&&(l=null!==(s=n.valueFormatterService.formatValue(g,m,l))&&void 0!==s?s:l),e.getColDef().useValueParserForImport&&(l=n.valueParserService.parseValue(e,o,g?l:u.toStringOrNull(l),b))),y&&b===l?p=!0:o.setDataValue(e,l,"rangeService")}}p||t.push({value:l,column:e,rowNode:o})};if(l)t.columns.forEach((function(t){v(t)}));else{g=this.isLeft?PP([],TP(e.columns)).reverse():e.columns;v(void 0,g)}}else{var g=l?t.columns:t.columns.filter((function(t){return e.columns.indexOf(t)<0})),m=l?this.cellNavigationService.getRowBelow(a):s;m&&this.clearCellsInRange(m,o,g)}},e.prototype.clearCellsInRange=function(t,e,r){var n={startRow:t,endRow:e,columns:r,startColumn:r[0]};this.rangeService.clearCellRangeCellValues({cellRanges:[n]})},e.prototype.processValues=function(t,e,r,n,o,i){var a,s=this.gridOptionsService.getCallback("fillOperation");if(a="y"===this.dragAxis?this.isUp?"up":"down":this.isLeft?"left":"right",s){var l=s({event:t,values:e.map((function(t){return t.value})),initialValues:r,currentIndex:i,currentCellValue:this.valueService.getValue(n,o),direction:a,column:n,rowNode:o});if(!1!==l)return{value:l,fromUserFunction:!0}}var c=!e.some((function(t){var e=t.value,r=parseFloat(e);return isNaN(r)||r.toString()!==e.toString()}));if(t.altKey||!c){if(c&&1===r.length){var p=this.isUp||this.isLeft?-1:1;return{value:parseFloat(u.last(e).value)+1*p,fromUserFunction:!1}}var d=e[i%e.length];return{value:d.value,fromUserFunction:!1,sourceCol:d.column,sourceRowNode:d.rowNode}}return{value:u.last(wP(e.map((function(t){var e=t.value;return Number(e)})))),fromUserFunction:!1}},e.prototype.clearValues=function(){this.clearMarkedPath(),this.clearCellValues(),this.lastCellMarked=void 0,t.prototype.clearValues.call(this)},e.prototype.clearMarkedPath=function(){this.markedCells.forEach((function(t){if(t.isAlive()){var e=t.getComp();e.addOrRemoveCssClass("ag-selection-fill-top",!1),e.addOrRemoveCssClass("ag-selection-fill-right",!1),e.addOrRemoveCssClass("ag-selection-fill-bottom",!1),e.addOrRemoveCssClass("ag-selection-fill-left",!1)}})),this.markedCells.length=0,this.isUp=!1,this.isLeft=!1,this.isReduce=!1},e.prototype.clearCellValues=function(){this.cellValues.length=0},e.prototype.markPathFrom=function(t,e){if(this.clearMarkedPath(),this.clearCellValues(),"y"===this.dragAxis){if(this.rowPositionUtils.sameRow(e,t))return;var r=this.rowPositionUtils.before(e,t),n=this.getRangeStartRow(),o=this.getRangeEndRow();r&&(e.rowPinned==n.rowPinned&&e.rowIndex>=n.rowIndex||n.rowPinned!=o.rowPinned&&e.rowPinned==o.rowPinned&&e.rowIndex<=o.rowIndex)?(this.reduceVertical(t,e),this.isReduce=!0):(this.extendVertical(t,e,r),this.isReduce=!1)}else{var i=t.column,a=e.column;if(i===a)return;var s=this.columnModel.getAllDisplayedColumns(),l=s.indexOf(i),u=s.indexOf(a);u<=l&&u>=s.indexOf(this.getCellRange().columns[0])?(this.reduceHorizontal(t,e),this.isReduce=!0):(this.extendHorizontal(t,e,u<l),this.isReduce=!1)}this.lastCellMarked=e},e.prototype.extendVertical=function(t,e,r){var n=this.navigationService,o=this.rangeService,i=t;do{for(var a=this.getCellRange(),s=a.columns.length,l=0;l<s;l++){var u=a.columns[l],c={rowIndex:i.rowIndex,rowPinned:i.rowPinned},p=OP(OP({},c),{column:u}),d=o.isCellInSpecificRange(p,a),h=this.rowPositionUtils.sameRow(i,t);if(r&&(this.isUp=!0),!h){var f=n.getCellByPosition(p);if(f){this.markedCells.push(f);var v=f.getComp();d||(v.addOrRemoveCssClass("ag-selection-fill-left",0===l),v.addOrRemoveCssClass("ag-selection-fill-right",l===s-1)),v.addOrRemoveCssClass(r?"ag-selection-fill-top":"ag-selection-fill-bottom",this.rowPositionUtils.sameRow(i,e))}}}if(this.rowPositionUtils.sameRow(i,e))break}while(i=r?this.cellNavigationService.getRowAbove(i):this.cellNavigationService.getRowBelow(i))},e.prototype.reduceVertical=function(t,e){var r=t;do{for(var n=this.getCellRange(),o=n.columns.length,i=this.rowPositionUtils.sameRow(r,e),a=0;a<o;a++){var s={rowIndex:r.rowIndex,rowPinned:r.rowPinned},l=OP(OP({},s),{column:n.columns[a]}),u=this.navigationService.getCellByPosition(l);if(u)this.markedCells.push(u),u.getComp().addOrRemoveCssClass("ag-selection-fill-bottom",this.rowPositionUtils.sameRow(r,e))}if(i)break}while(r=this.cellNavigationService.getRowAbove(r))},e.prototype.extendHorizontal=function(t,e,r){var n=this,o=this.columnModel.getAllDisplayedColumns(),i=o.indexOf(r?e.column:t.column),a=o.indexOf(r?this.getCellRange().columns[0]:e.column),s=r?0:1,l=o.slice(i+s,a+s),c=this.getRangeStartRow(),p=this.getRangeEndRow();l.forEach((function(t){var e=c,o=!1;do{o=n.rowPositionUtils.sameRow(e,p);var i=n.navigationService.getCellByPosition({rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:t});if(i){n.markedCells.push(i);var a=i.getComp();a.addOrRemoveCssClass("ag-selection-fill-top",n.rowPositionUtils.sameRow(e,c)),a.addOrRemoveCssClass("ag-selection-fill-bottom",n.rowPositionUtils.sameRow(e,p)),r?(n.isLeft=!0,a.addOrRemoveCssClass("ag-selection-fill-left",t===l[0])):a.addOrRemoveCssClass("ag-selection-fill-right",t===u.last(l))}e=n.cellNavigationService.getRowBelow(e)}while(!o)}))},e.prototype.reduceHorizontal=function(t,e){var r=this,n=this.columnModel.getAllDisplayedColumns(),o=n.indexOf(e.column),i=n.indexOf(t.column),a=n.slice(o,i),s=this.getRangeStartRow(),l=this.getRangeEndRow();a.forEach((function(t){var e=s,n=!1;do{n=r.rowPositionUtils.sameRow(e,l);var o=r.navigationService.getCellByPosition({rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:t});if(o)r.markedCells.push(o),o.getComp().addOrRemoveCssClass("ag-selection-fill-right",t===a[0]);e=r.cellNavigationService.getRowBelow(e)}while(!n)}))},e.prototype.refresh=function(e){var r=this.rangeService.getCellRanges()[0];r.startRow&&r.endRow?t.prototype.refresh.call(this,e):this.destroy()},e.TEMPLATE='<div class="ag-fill-handle"></div>',EP([n("valueService")],e.prototype,"valueService",void 0),EP([n("valueParserService")],e.prototype,"valueParserService",void 0),EP([n("valueFormatterService")],e.prototype,"valueFormatterService",void 0),e}(SP),AP=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),MP=function(){return(MP=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},_P=function(t){function e(){var r=t.call(this,e.TEMPLATE)||this;return r.type=dt.RANGE,r.rangeFixed=!1,r}return AP(e,t),e.prototype.onDrag=function(t){var e=this.getLastCellHovered();if(e){var r=this.rangeService.getCellRanges(),n=u.last(r);if(this.rangeFixed||(this.fixRangeStartEnd(n),this.rangeFixed=!0),this.endPosition={rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:e.column},2===r.length&&r[0].type===ct.DIMENSION&&n.type===ct.VALUE)!this.rowPositionUtils.sameRow(this.endPosition,this.rangeService.getRangeEndRow(n))&&this.rangeService.updateRangeEnd(r[0],MP(MP({},this.endPosition),{column:r[0].columns[0]}),!0);this.rangeService.extendLatestRangeToCell(this.endPosition)}},e.prototype.onDragEnd=function(t){var e=u.last(this.rangeService.getCellRanges());this.fixRangeStartEnd(e),this.rangeFixed=!1},e.prototype.fixRangeStartEnd=function(t){var e=this.rangeService.getRangeStartRow(t),r=this.rangeService.getRangeEndRow(t),n=t.columns[0];t.startRow=e,t.endRow=r,t.startColumn=n},e.TEMPLATE='<div class="ag-range-handle"></div>',e}(SP),RP=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),kP=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},FP=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return RP(r,t),r.prototype.createSelectionHandle=function(t){return this.createBean(t===dt.RANGE?new _P:new DP)},r=kP([e("selectionHandleFactory")],r)}(r),IP={version:"30.2.0",moduleName:s.RangeSelectionModule,beans:[mP,FP],agStackComponents:[{componentName:"AgFillHandle",componentClass:DP},{componentName:"AgRangeHandle",componentClass:_P}],dependantModules:[Ft]},LP=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),NP=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},GP=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},jP=function(t){function e(r){var n=t.call(this,e.TEMPLATE)||this;return n.H=1,n.S=1,n.B=1,n.A=1,n.isSpectrumDragging=!1,n.isSpectrumHueDragging=!1,n.isSpectrumAlphaDragging=!1,n.colorChanged=!1,n.picker=r.picker,n}return LP(e,t),e.prototype.postConstruct=function(){var t=this;this.initTabIndex(),this.initRecentColors(),this.addGuiEventListener("focus",(function(){return t.spectrumColor.focus()})),this.addGuiEventListener("keydown",(function(e){e.key!==c.ENTER||e.defaultPrevented||t.destroy()})),this.addManagedListener(this.spectrumColor,"keydown",(function(e){return t.moveDragger(e)})),this.addManagedListener(this.spectrumAlphaSlider,"keydown",(function(e){return t.moveAlphaSlider(e)})),this.addManagedListener(this.spectrumHueSlider,"keydown",(function(e){return t.moveHueSlider(e)})),this.addManagedListener(this.spectrumVal,"mousedown",this.onSpectrumDraggerDown.bind(this)),this.addManagedListener(this.spectrumHue,"mousedown",this.onSpectrumHueDown.bind(this)),this.addManagedListener(this.spectrumAlpha,"mousedown",this.onSpectrumAlphaDown.bind(this)),this.addGuiEventListener("mousemove",(function(e){t.onSpectrumDraggerMove(e),t.onSpectrumHueMove(e),t.onSpectrumAlphaMove(e)})),this.addManagedListener(document,"mouseup",this.onMouseUp.bind(this)),this.addManagedListener(this.recentColors,"click",this.onRecentColorClick.bind(this)),this.addManagedListener(this.recentColors,"keydown",(function(e){e.key!==c.ENTER&&e.key!==c.SPACE||(e.preventDefault(),t.onRecentColorClick(e))}))},e.prototype.initTabIndex=function(){var t=this.tabIndex=(this.gridOptionsService.getNum("tabIndex")||0).toString();this.spectrumColor.setAttribute("tabindex",t),this.spectrumHueSlider.setAttribute("tabindex",t),this.spectrumAlphaSlider.setAttribute("tabindex",t)},e.prototype.refreshSpectrumRect=function(){return this.spectrumValRect=this.spectrumVal.getBoundingClientRect()},e.prototype.refreshHueRect=function(){return this.spectrumHueRect=this.spectrumHue.getBoundingClientRect()},e.prototype.refreshAlphaRect=function(){return this.spectrumAlphaRect=this.spectrumAlpha.getBoundingClientRect()},e.prototype.onSpectrumDraggerDown=function(t){this.refreshSpectrumRect(),this.isSpectrumDragging=!0,this.moveDragger(t)},e.prototype.onSpectrumDraggerMove=function(t){this.isSpectrumDragging&&this.moveDragger(t)},e.prototype.onSpectrumHueDown=function(t){this.refreshHueRect(),this.isSpectrumHueDragging=!0,this.moveHueSlider(t)},e.prototype.onSpectrumHueMove=function(t){this.isSpectrumHueDragging&&this.moveHueSlider(t)},e.prototype.onSpectrumAlphaDown=function(t){this.refreshAlphaRect(),this.isSpectrumAlphaDragging=!0,this.moveAlphaSlider(t)},e.prototype.onSpectrumAlphaMove=function(t){this.isSpectrumAlphaDragging&&this.moveAlphaSlider(t)},e.prototype.onMouseUp=function(){this.isSpectrumDragging=!1,this.isSpectrumHueDragging=!1,this.isSpectrumAlphaDragging=!1},e.prototype.moveDragger=function(t){var e=this.spectrumValRect;if(e){var r,n;if(t instanceof MouseEvent)r=t.clientX-e.left,n=t.clientY-e.top;else{var o=t.key===c.LEFT,i=t.key===c.RIGHT,a=t.key===c.UP,s=t.key===c.DOWN,l=a||s,u=o||i;if(!l&&!u)return;t.preventDefault();var p=this.getSpectrumValue();r=p.x+(u?o?-5:5:0),n=p.y+(l?a?-5:5:0)}r=Math.max(r,0),r=Math.min(r,e.width),n=Math.max(n,0),n=Math.min(n,e.height),this.setSpectrumValue(r/e.width,1-n/e.height)}},e.prototype.moveHueSlider=function(t){var e=this.spectrumHueRect;if(e){var r=this.moveSlider(this.spectrumHueSlider,t);null!=r&&(this.H=1-r/e.width,this.update())}},e.prototype.moveAlphaSlider=function(t){var e=this.spectrumAlphaRect;if(e){var r=this.moveSlider(this.spectrumAlphaSlider,t);null!=r&&(this.A=r/e.width,this.update())}},e.prototype.moveSlider=function(t,e){var r,n,o=t.getBoundingClientRect(),i=null===(r=t.parentElement)||void 0===r?void 0:r.getBoundingClientRect();if(!t||!i)return null;if(e instanceof MouseEvent)n=e.clientX-i.left;else{var a=e.key===c.LEFT,s=e.key===c.RIGHT;if(!a&&!s)return null;e.preventDefault();var l=a?-5:5;n=parseFloat(t.style.left)-o.width/2+l}return n=Math.max(n,0),n=Math.min(n,i.width),t.style.left=n+o.width/2+"px",n},e.prototype.update=function(){var t=Ql.fromHSB(360*this.H,this.S,this.B,this.A),e=Ql.fromHSB(360*this.H,1,1),r=t.toRgbaString(),n=this.picker;Ql.fromString(n.getValue()).toRgbaString()!==r&&(this.colorChanged=!0),n.setValue(r),this.spectrumColor.style.backgroundColor=e.toRgbaString(),this.spectrumDragger.style.backgroundColor=r},e.prototype.setSpectrumValue=function(t,e){var r=this.spectrumValRect||this.refreshSpectrumRect();if(null!=r){var n=this.spectrumDragger,o=n.getBoundingClientRect();t=Math.max(0,t),t=Math.min(1,t),e=Math.max(0,e),e=Math.min(1,e),this.S=t,this.B=e,n.style.left=t*r.width-o.width/2+"px",n.style.top=(1-e)*r.height-o.height/2+"px",this.update()}},e.prototype.getSpectrumValue=function(){var t=this.spectrumDragger,e=t.getBoundingClientRect();return{x:parseFloat(t.style.left)+e.width/2,y:parseFloat(t.style.top)+e.height/2}},e.prototype.initRecentColors=function(){var t=this,r=e.recentColors.map((function(e,r){return'<div class="ag-recent-color" id='+r+' style="background-color: '+e+'; width: 15px; height: 15px;" recent-color="'+e+'" tabIndex="'+t.tabIndex+'"></div>'}));this.recentColors.innerHTML=r.join("")},e.prototype.setValue=function(t){var e=Ql.fromString(t),r=GP(e.toHSB(),3),n=r[0],o=r[1],i=r[2];this.H=(isNaN(n)?0:n)/360,this.A=e.a;var a=this.spectrumHueRect||this.refreshHueRect(),s=this.spectrumAlphaRect||this.refreshAlphaRect();this.spectrumHueSlider.style.left=(this.H-1)*-a.width+"px",this.spectrumAlphaSlider.style.left=this.A*s.width+"px",this.setSpectrumValue(o,i)},e.prototype.onRecentColorClick=function(t){var r=t.target;if(u.exists(r.id)){var n=parseInt(r.id,10);this.setValue(e.recentColors[n]),this.destroy()}},e.prototype.addRecentColor=function(){var t=Ql.fromHSB(360*this.H,this.S,this.B,this.A).toRgbaString(),r=e.recentColors;this.colorChanged&&r[0]!==t&&(r=r.filter((function(e){return e!=t})),(r=[t].concat(r)).length>e.maxRecentColors&&(r=r.slice(0,e.maxRecentColors)),e.recentColors=r)},e.prototype.destroy=function(){this.addRecentColor(),t.prototype.destroy.call(this)},e.maxRecentColors=8,e.recentColors=[],e.TEMPLATE='<div class="ag-color-panel" tabindex="-1">\n            <div ref="spectrumColor" class="ag-spectrum-color">\n                <div class="ag-spectrum-sat ag-spectrum-fill">\n                    <div ref="spectrumVal" class="ag-spectrum-val ag-spectrum-fill">\n                        <div ref="spectrumDragger" class="ag-spectrum-dragger"></div>\n                    </div>\n                </div>\n            </div>\n            <div class="ag-spectrum-tools">\n                <div ref="spectrumHue" class="ag-spectrum-hue ag-spectrum-tool">\n                    <div class="ag-spectrum-hue-background"></div>\n                    <div ref="spectrumHueSlider" class="ag-spectrum-slider"></div>\n                </div>\n                <div ref="spectrumAlpha" class="ag-spectrum-alpha ag-spectrum-tool">\n                    <div class="ag-spectrum-alpha-background"></div>\n                    <div ref="spectrumAlphaSlider" class="ag-spectrum-slider"></div>\n                </div>\n                <div ref="recentColors" class="ag-recent-colors"></div>\n            </div>\n        </div>',NP([o("spectrumColor")],e.prototype,"spectrumColor",void 0),NP([o("spectrumVal")],e.prototype,"spectrumVal",void 0),NP([o("spectrumDragger")],e.prototype,"spectrumDragger",void 0),NP([o("spectrumHue")],e.prototype,"spectrumHue",void 0),NP([o("spectrumHueSlider")],e.prototype,"spectrumHueSlider",void 0),NP([o("spectrumAlpha")],e.prototype,"spectrumAlpha",void 0),NP([o("spectrumAlphaSlider")],e.prototype,"spectrumAlphaSlider",void 0),NP([o("recentColors")],e.prototype,"recentColors",void 0),NP([i],e.prototype,"postConstruct",null),e}(a),VP=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),BP=function(){return(BP=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},UP=function(t){function e(e){var r=t.call(this,BP({pickerAriaLabelKey:"ariaLabelColorPicker",pickerAriaLabelValue:"Color Picker",pickerType:"ag-list",className:"ag-color-picker",pickerIcon:"colorPicker"},e))||this;return e&&e.color&&(r.value=e.color),r}return VP(e,t),e.prototype.postConstruct=function(){t.prototype.postConstruct.call(this),this.value&&this.setValue(this.value)},e.prototype.createPickerComponent=function(){var t=this.getGui().getBoundingClientRect();return this.createBean(new S({closable:!1,modal:!0,hideTitleBar:!0,minWidth:190,width:190,height:250,x:t.right-190,y:t.top-250}))},e.prototype.renderAndPositionPicker=function(){var t=this,e=this.pickerComponent,r=this.createBean(new jP({picker:this}));return e.addCssClass("ag-color-dialog"),r.addDestroyFunc((function(){e.isAlive()&&t.destroyBean(e)})),e.setParentComponent(this),e.setBodyComponent(r),r.setValue(this.getValue()),r.getGui().focus(),e.addDestroyFunc((function(){t.isDestroyingPicker?t.isDestroyingPicker=!1:(t.beforeHidePicker(),t.isDestroyingPicker=!0,r.isAlive()&&t.destroyBean(r),t.isAlive()&&t.getFocusableElement().focus())})),function(){var e;return null===(e=t.pickerComponent)||void 0===e?void 0:e.close()}},e.prototype.setValue=function(e){return this.value===e?this:(this.eDisplayField.style.backgroundColor=e,t.prototype.setValue.call(this,e))},e.prototype.getValue=function(){return this.value},e}(ht),HP=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a};function zP(t){return t&&t.match(/\d+\.\d+\.\d+/)}function WP(t){var e=t.type,r=t.gridVersion,n=t.chartsVersion,o="AG Grid: AG Grid version is incompatible. Please see https://www.ag-grid.com/javascript-data-grid/modules/ for more information.";if(!r)return o;var i=function(t){if(t&&zP(t)){var e=HP(t.split(".")||[],2),r=e[0],n=e[1],o=r+"."+n+".x",i=parseInt(r,10)-28+6;if(!(i<0))return{gridMajorMinor:o,chartsMajorMinor:i+"."+n+".x"}}}(r);if(!i)return o;var a=i.gridMajorMinor,s=i.chartsMajorMinor;return"incompatible"===e?"AG Grid version "+r+" and AG Charts version "+n+" is not supported. AG Grid version "+a+" should be used with AG Chart "+s+". Please see https://www.ag-grid.com/javascript-data-grid/modules/ for more information.":"invalidCharts"===e?"AG Grid version "+a+" should be used with AG Chart "+s+". Please see https://www.ag-grid.com/javascript-data-grid/modules/ for more information.":o}function KP(t){var e=t.gridVersion,r=t.chartsVersion;if(!zP(r))return{isValid:!1,message:WP({type:"invalidCharts",gridVersion:e,chartsVersion:r})};if(!zP(e))return{isValid:!1,message:WP({type:"invalidGrid",gridVersion:e,chartsVersion:r})};var n=HP(e.split(".")||[],2),o=n[0],i=n[1],a=HP(r.split(".")||[],2),s=a[0],l=a[1],u=function(t){var e=t.gridMajorVersion,r=t.chartsMajorVersion,n=parseInt(e,10)-28;return n===parseInt(r,10)-6&&n>=0}({gridMajorVersion:o,chartsMajorVersion:s});return u&&i===l?{isValid:!0}:u&&i===l?{isValid:!1,message:WP({type:"invalid",gridVersion:e,chartsVersion:r})}:{isValid:!1,message:WP({type:"incompatible",gridVersion:e,chartsVersion:r})}}var XP,YP={version:"30.2.0",validate:function(){return KP({gridVersion:"30.2.0",chartsVersion:iP.CHARTS_VERSION})},moduleName:s.GridChartsModule,beans:[iP,lP,pP],agStackComponents:[{componentName:"AgColorPicker",componentClass:UP},{componentName:"AgAngleSelect",componentClass:wx}],dependantModules:[IP,Ft]},qP=0,ZP={time:Ms,AgChart:Cw},JP=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),$P=function(){return($P=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},QP=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},tD=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.loadRowDataVersion=0,e}return JP(e,t),e.prototype.init=function(t,e){this.params=e,this.comp=t,null!=e.pinned||(this.setAutoHeightClasses(),this.setupRefreshStrategy(),this.addThemeToDetailGrid(),this.createDetailGrid(),this.loadRowData(),this.addManagedListener(this.eventService,l.EVENT_FULL_WIDTH_ROW_FOCUSED,this.onFullWidthRowFocused.bind(this)))},e.prototype.onFullWidthRowFocused=function(t){var e=this.params,r={rowIndex:e.node.rowIndex,rowPinned:e.node.rowPinned},n={rowIndex:t.rowIndex,rowPinned:t.rowPinned};this.rowPositionUtils.sameRow(r,n)&&this.focusService.focusInto(this.comp.getGui(),t.fromBelow)},e.prototype.setAutoHeightClasses=function(){var t=this.gridOptionsService.is("detailRowAutoHeight"),e=t?"ag-details-row-auto-height":"ag-details-row-fixed-height",r=t?"ag-details-grid-auto-height":"ag-details-grid-fixed-height";this.comp.addOrRemoveCssClass(e,!0),this.comp.addOrRemoveDetailGridCssClass(r,!0)},e.prototype.setupRefreshStrategy=function(){var t=this.params.refreshStrategy;"everything"==t||"nothing"==t||"rows"==t?this.refreshStrategy=t:(null!=t&&console.warn("AG Grid: invalid cellRendererParams.refreshStrategy = '"+t+"' supplied, defaulting to refreshStrategy = 'rows'."),this.refreshStrategy="rows")},e.prototype.addThemeToDetailGrid=function(){var t=this.environment.getTheme().theme;t&&this.comp.addOrRemoveDetailGridCssClass(t,!0)},e.prototype.createDetailGrid=function(){if(u.missing(this.params.detailGridOptions))console.warn("AG Grid: could not find detail grid options for master detail, please set gridOptions.detailCellRendererParams.detailGridOptions");else{var t=this.gridOptionsService.is("detailRowAutoHeight"),e=$P({},this.params.detailGridOptions);t&&(e.domLayout="autoHeight"),this.comp.setDetailGrid(e)}},e.prototype.registerDetailWithMaster=function(t,e){var r=this.params.node.id,n=this.params.api,o={id:r,api:t,columnApi:e},i=this.params.node;n.addDetailGridInfo(r,o),i.detailGridInfo=o,this.addDestroyFunc((function(){i.detailGridInfo===o&&(n.removeDetailGridInfo(r),i.detailGridInfo=null)}))},e.prototype.loadRowData=function(){var t=this;this.loadRowDataVersion++;var e=this.loadRowDataVersion,r=this.params.getDetailRowData;if(r){r({node:this.params.node,data:this.params.node.data,successCallback:function(r){t.loadRowDataVersion===e&&t.comp.setRowData(r)},context:this.gridOptionsService.context})}else console.warn("AG Grid: could not find getDetailRowData for master / detail, please set gridOptions.detailCellRendererParams.getDetailRowData")},e.prototype.refresh=function(){switch(this.refreshStrategy){case"nothing":return!0;case"everything":return!1}return this.loadRowData(),!0},QP([n("rowPositionUtils")],e.prototype,"rowPositionUtils",void 0),QP([n("focusService")],e.prototype,"focusService",void 0),e}(r),eD=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),rD=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},nD=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return eD(e,t),e.prototype.init=function(t){var e=this;this.params=t,this.selectAndSetTemplate();var r={addOrRemoveCssClass:function(t,r){return e.addOrRemoveCssClass(t,r)},addOrRemoveDetailGridCssClass:function(t,r){return e.eDetailGrid.classList.toggle(t,r)},setDetailGrid:function(t){return e.setDetailGrid(t)},setRowData:function(t){return e.setRowData(t)},getGui:function(){return e.eDetailGrid}};this.ctrl=this.createManagedBean(new tD),this.ctrl.init(r,t)},e.prototype.refresh=function(){return this.ctrl&&this.ctrl.refresh()},e.prototype.destroy=function(){t.prototype.destroy.call(this)},e.prototype.selectAndSetTemplate=function(){var t=this;if(this.params.pinned)this.setTemplate('<div class="ag-details-row"></div>');else{var r=function(){t.setTemplate(e.TEMPLATE)};if(u.missing(this.params.template))r();else if("string"==typeof this.params.template)this.setTemplate(this.params.template);else if("function"==typeof this.params.template){var n=(0,this.params.template)(this.params);this.setTemplate(n)}else console.warn("AG Grid: detailCellRendererParams.template should be function or string"),r();null==this.eDetailGrid&&console.warn('AG Grid: reference to eDetailGrid was missing from the details template. Please add ref="eDetailGrid" to the template.')}},e.prototype.setDetailGrid=function(t){if(this.eDetailGrid){var e=this.context.getBean("agGridReact"),r=e?u.cloneObject(e):void 0,n=this.context.getBean("frameworkComponentWrapper"),o=this.getFrameworkOverrides();new ft(this.eDetailGrid,t,{frameworkOverrides:o,providedBeanInstances:{agGridReact:r,frameworkComponentWrapper:n},modules:B.__getGridRegisteredModules(this.params.api.getGridId())}),this.detailApi=t.api,this.ctrl.registerDetailWithMaster(t.api,t.columnApi),this.addDestroyFunc((function(){t.api&&t.api.destroy()}))}},e.prototype.setRowData=function(t){this.detailApi&&this.detailApi.setRowData(t)},e.TEMPLATE='<div class="ag-details-row" role="gridcell">\n            <div ref="eDetailGrid" class="ag-details-grid" role="presentation"></div>\n        </div>',rD([o("eDetailGrid")],e.prototype,"eDetailGrid",void 0),e}(a),oD={version:"30.2.0",moduleName:s.MasterDetailModule,beans:[],userComponents:[{componentName:"agDetailCellRenderer",componentClass:nD}],controllers:[{controllerName:"detailCellRenderer",controllerClass:tD}],dependantModules:[Ft]},iD=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),aD=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},sD=function(t){function o(){return null!==t&&t.apply(this,arguments)||this}return iD(o,t),o.prototype.hideActiveMenu=function(){this.destroyBean(this.activeMenu)},o.prototype.showMenuAfterMouseEvent=function(t,e,r){var n=this;this.showMenu(t,(function(o){var i=o.getGui();n.popupService.positionPopupUnderMouseEvent({type:"columnMenu",column:t,mouseEvent:e,ePopup:i}),r&&o.showTab(r)}),"columnMenu",r,void 0,e.target)},o.prototype.showMenuAfterButtonClick=function(t,e,r,n,o){var i=this,a=-1,s="left";this.gridOptionsService.is("enableRtl")&&(a=1,s="right"),this.showMenu(t,(function(o){var l=o.getGui();i.popupService.positionPopupByComponent({type:r,column:t,eventSource:e,ePopup:l,alignSide:s,nudgeX:9*a,nudgeY:-23,position:"under",keepWithinBounds:!0}),n&&o.showTab(n)}),r,n,o,e)},o.prototype.showMenu=function(t,e,n,o,i,a){var s=this,l=this.getMenuParams(t,i,a),u=l.menu,c=l.eMenuGui,p=l.currentHeaderPosition,d=l.currentColumnIndex,h=l.anchorToElement,f=[];f.push(this.getClosedCallback(t,u,p,d,a));var v=this.localeService.getLocaleTextFunc();this.popupService.addPopup({modal:!0,eChild:c,closeOnEsc:!0,closedCallback:function(t){f.forEach((function(e){return e(t)}))},afterGuiAttached:function(t){return u.afterGuiAttached(Object.assign({},{container:n},t))},positionCallback:o?function(){return e(u)}:void 0,ariaLabel:v("ariaLabelColumnMenu","Column Menu")}),o||(u.showTabBasedOnPreviousSelection(),e(u));var y=this.popupService.setPopupPositionRelatedToElement(c,h);y&&this.addStopAnchoring(y,t,f),u.addEventListener(lD.EVENT_TAB_SELECTED,(function(t){s.lastSelectedTab=t.key})),t.setMenuVisible(!0,"contextMenu"),this.activeMenu=u,u.addEventListener(r.EVENT_DESTROYED,(function(){s.activeMenu===u&&(s.activeMenu=null)}))},o.prototype.addStopAnchoring=function(t,e,r){t.then((function(t){e.addEventListener("leftChanged",t),e.addEventListener("visibleChanged",t),r.push((function(){e.removeEventListener("leftChanged",t),e.removeEventListener("visibleChanged",t)}))}))},o.prototype.getClosedCallback=function(t,e,r,n,o){var i=this;return function(a){if(i.destroyBean(e),t.setMenuVisible(!1,"contextMenu"),a instanceof KeyboardEvent&&o)if(i.columnModel.getAllDisplayedColumns().some((function(e){return e===t}))&&u.isVisible(o)){var s=i.focusService.findTabbableParent(o);s&&(t&&i.headerNavigationService.scrollToColumn(t),s.focus())}else if(r&&-1!==n){var l=i.columnModel.getAllDisplayedColumns(),c=l[n]||u.last(l);c&&i.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:r.headerRowIndex,column:c}})}}},o.prototype.getMenuParams=function(t,e,r){var n=this.createBean(new lD(t,this.lastSelectedTab,e));return{menu:n,eMenuGui:n.getGui(),currentHeaderPosition:this.focusService.getFocusedHeader(),currentColumnIndex:this.columnModel.getAllDisplayedColumns().indexOf(t),anchorToElement:r||this.ctrlsService.getGridBodyCtrl().getGui()}},o.prototype.isMenuEnabled=function(t){return t.getMenuTabs(lD.TABS_DEFAULT).length>0},aD([n("popupService")],o.prototype,"popupService",void 0),aD([n("focusService")],o.prototype,"focusService",void 0),aD([n("headerNavigationService")],o.prototype,"headerNavigationService",void 0),aD([n("ctrlsService")],o.prototype,"ctrlsService",void 0),aD([n("columnModel")],o.prototype,"columnModel",void 0),o=aD([e("menuFactory")],o)}(r),lD=function(t){function e(r,n,o){var i=t.call(this)||this;return i.tabFactories={},i.includeChecks={},i.column=r,i.initialSelection=n,i.tabFactories[e.TAB_GENERAL]=i.createMainPanel.bind(i),i.tabFactories[e.TAB_FILTER]=i.createFilterPanel.bind(i),i.tabFactories[e.TAB_COLUMNS]=i.createColumnsPanel.bind(i),i.includeChecks[e.TAB_GENERAL]=function(){return!0},i.includeChecks[e.TAB_FILTER]=function(){return i.filterManager.isFilterAllowed(r)},i.includeChecks[e.TAB_COLUMNS]=function(){return!0},i.restrictTo=o,i}return iD(e,t),e.prototype.init=function(){var t=this,e=this.getTabsToCreate().map((function(e){return t.createTab(e)}));this.tabbedLayout=new it({items:e,cssClass:"ag-menu",onActiveItemClicked:this.onHidePopup.bind(this),onItemClicked:this.onTabItemClicked.bind(this)}),this.createBean(this.tabbedLayout),this.mainMenuList&&this.mainMenuList.setParentComponent(this.tabbedLayout),this.addDestroyFunc((function(){return t.destroyBean(t.tabbedLayout)}))},e.prototype.getTabsToCreate=function(){var t=this;return this.restrictTo?this.restrictTo:this.column.getMenuTabs(e.TABS_DEFAULT).filter((function(e){return t.isValidMenuTabItem(e)})).filter((function(e){return t.isNotSuppressed(e)})).filter((function(e){return t.isModuleLoaded(e)}))},e.prototype.isModuleLoaded=function(t){return t!==e.TAB_COLUMNS||B.__isRegistered(s.ColumnsToolPanelModule,this.context.getGridId())},e.prototype.isValidMenuTabItem=function(t){var r=!0,n=e.TABS_DEFAULT;return null!=this.restrictTo&&(r=this.restrictTo.indexOf(t)>-1,n=this.restrictTo),(r=r&&e.TABS_DEFAULT.indexOf(t)>-1)||console.warn("AG Grid: Trying to render an invalid menu item '"+t+"'. Check that your 'menuTabs' contains one of ["+n+"]"),r},e.prototype.isNotSuppressed=function(t){return this.includeChecks[t]()},e.prototype.createTab=function(t){return this.tabFactories[t]()},e.prototype.showTabBasedOnPreviousSelection=function(){this.showTab(this.initialSelection)},e.prototype.showTab=function(t){this.tabItemColumns&&t===e.TAB_COLUMNS?this.tabbedLayout.showItem(this.tabItemColumns):this.tabItemFilter&&t===e.TAB_FILTER?this.tabbedLayout.showItem(this.tabItemFilter):this.tabItemGeneral&&t===e.TAB_GENERAL?this.tabbedLayout.showItem(this.tabItemGeneral):this.tabbedLayout.showFirstItem()},e.prototype.onTabItemClicked=function(t){var r=null;switch(t.item){case this.tabItemColumns:r=e.TAB_COLUMNS;break;case this.tabItemFilter:r=e.TAB_FILTER;break;case this.tabItemGeneral:r=e.TAB_GENERAL}r&&this.activateTab(r)},e.prototype.activateTab=function(t){var r={type:e.EVENT_TAB_SELECTED,key:t};this.dispatchEvent(r)},e.prototype.getMenuItems=function(){var t,r=this.getDefaultMenuOptions(),n=this.gridOptionsService.getCallback("getMainMenuItems");return t=n?n({column:this.column,defaultItems:r}):r,u.removeRepeatsFromArray(t,e.MENU_ITEM_SEPARATOR),t},e.prototype.getDefaultMenuOptions=function(){var t=[],r=!this.column.getColDef().lockPinned,n=this.columnModel.getRowGroupColumns().length,o=n>0,i=this.columnModel.getRowGroupColumns().indexOf(this.column)>=0,a=this.column.isAllowValue(),s=this.column.isAllowRowGroup(),l=this.column.isPrimary(),u=this.columnModel.isPivotMode(),c="clientSide"===this.rowModel.getType(),p=this.gridOptionsService.is("treeData"),d=l&&o&&a||!l;return r&&t.push("pinSubMenu"),d&&t.push("valueAggSubMenu"),(r||d)&&t.push(e.MENU_ITEM_SEPARATOR),t.push("autoSizeThis"),t.push("autoSizeAll"),t.push(e.MENU_ITEM_SEPARATOR),this.column.getColDef().showRowGroup&&t.push("rowUnGroup"),s&&this.column.isPrimary()&&(i?t.push("rowUnGroup"):t.push("rowGroup")),t.push(e.MENU_ITEM_SEPARATOR),t.push("resetColumns"),c&&(p||n>(u?1:0))&&(t.push("expandAll"),t.push("contractAll")),t},e.prototype.createMainPanel=function(){this.mainMenuList=this.createManagedBean(new M);var t=this.getMenuItems(),r=this.menuItemMapper.mapWithStockItems(t,this.column);return this.mainMenuList.addMenuItems(r),this.mainMenuList.addEventListener(_.EVENT_MENU_ITEM_SELECTED,this.onHidePopup.bind(this)),this.tabItemGeneral={title:u.createIconNoSpan("menu",this.gridOptionsService,this.column),titleLabel:e.TAB_GENERAL.replace("MenuTab",""),bodyPromise:V.resolve(this.mainMenuList.getGui()),name:e.TAB_GENERAL},this.tabItemGeneral},e.prototype.onHidePopup=function(t){var e;t&&t.event&&t.event instanceof KeyboardEvent&&(e=t.event),this.hidePopupFunc(e&&{keyboardEvent:e});var r=this.focusService.getFocusedCell(),n=this.gridOptionsService.getDocument();if(n.activeElement===n.body&&r){var o=r.rowIndex,i=r.rowPinned,a=r.column;this.focusService.setFocusedCell({rowIndex:o,column:a,rowPinned:i,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}},e.prototype.createFilterPanel=function(){var t=this.filterManager.getOrCreateFilterWrapper(this.column,"COLUMN_MENU");if(!t)throw new Error("AG Grid - Unable to instantiate filter");return this.tabItemFilter={title:u.createIconNoSpan("filter",this.gridOptionsService,this.column),titleLabel:e.TAB_FILTER.replace("MenuTab",""),bodyPromise:null==t?void 0:t.guiPromise,afterAttachedCallback:function(e){(null==t?void 0:t.filterPromise)&&t.filterPromise.then((function(t){t&&t.afterGuiAttached&&t.afterGuiAttached(e)}))},afterDetachedCallback:function(){var e;return null===(e=null==t?void 0:t.filterPromise)||void 0===e?void 0:e.then((function(t){var e;return null===(e=null==t?void 0:t.afterGuiDetached)||void 0===e?void 0:e.call(t)}))},name:e.TAB_FILTER},this.tabItemFilter},e.prototype.createColumnsPanel=function(){var t=document.createElement("div");t.classList.add("ag-menu-column-select-wrapper");var r=this.createManagedBean(new Hn),n=this.column.getColDef().columnsMenuParams;n||(n={});var o=n.contractColumnSelection,i=n.suppressColumnExpandAll,a=n.suppressColumnFilter,s=n.suppressColumnSelectAll,l=n.suppressSyncLayoutWithGrid,c=n.columnLayout;r.init(!1,{suppressColumnMove:!1,suppressValues:!1,suppressPivots:!1,suppressRowGroups:!1,suppressPivotMode:!1,contractColumnSelection:!!o,suppressColumnExpandAll:!!i,suppressColumnFilter:!!a,suppressColumnSelectAll:!!s,suppressSyncLayoutWithGrid:!!c||!!l,api:this.gridApi,columnApi:this.columnApi,context:this.gridOptionsService.context},"columnMenu"),c&&r.setColumnLayout(c);var p=r.getGui();return p.classList.add("ag-menu-column-select"),t.appendChild(p),this.tabItemColumns={title:u.createIconNoSpan("columns",this.gridOptionsService,this.column),titleLabel:e.TAB_COLUMNS.replace("MenuTab",""),bodyPromise:V.resolve(t),name:e.TAB_COLUMNS},this.tabItemColumns},e.prototype.afterGuiAttached=function(t){var e=t.container,r=t.hidePopup;this.tabbedLayout.setAfterAttachedParams({container:e,hidePopup:r}),r&&(this.hidePopupFunc=r,this.addDestroyFunc(r))},e.prototype.getGui=function(){return this.tabbedLayout.getGui()},e.EVENT_TAB_SELECTED="tabSelected",e.TAB_FILTER="filterMenuTab",e.TAB_GENERAL="generalMenuTab",e.TAB_COLUMNS="columnsMenuTab",e.TABS_DEFAULT=[e.TAB_GENERAL,e.TAB_FILTER,e.TAB_COLUMNS],e.MENU_ITEM_SEPARATOR="separator",aD([n("columnModel")],e.prototype,"columnModel",void 0),aD([n("filterManager")],e.prototype,"filterManager",void 0),aD([n("gridApi")],e.prototype,"gridApi",void 0),aD([n("columnApi")],e.prototype,"columnApi",void 0),aD([n("menuItemMapper")],e.prototype,"menuItemMapper",void 0),aD([n("rowModel")],e.prototype,"rowModel",void 0),aD([n("focusService")],e.prototype,"focusService",void 0),aD([i],e.prototype,"init",null),e}(r),uD=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),cD=function(){return(cD=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},pD=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},dD=function(t){function o(){return null!==t&&t.apply(this,arguments)||this}return uD(o,t),o.prototype.hideActiveMenu=function(){this.destroyBean(this.activeMenu)},o.prototype.getMenuItems=function(t,e,r){var n=[];if(u.exists(t)&&B.__isRegistered(s.ClipboardModule,this.context.getGridId())&&e&&(this.gridOptionsService.is("suppressCutToClipboard")||n.push("cut"),n.push("copy","copyWithHeaders","copyWithGroupHeaders","paste","separator")),this.gridOptionsService.is("enableCharts")&&B.__isRegistered(s.GridChartsModule,this.context.getGridId())&&(this.columnModel.isPivotMode()&&n.push("pivotChart"),this.rangeService&&!this.rangeService.isEmpty()&&n.push("chartRange")),u.exists(t)){var o=!B.__isRegistered(s.CsvExportModule,this.context.getGridId()),i=!B.__isRegistered(s.ExcelExportModule,this.context.getGridId()),a=this.gridOptionsService.is("suppressExcelExport")||i,l=this.gridOptionsService.is("suppressCsvExport")||o;!(u.isIOSUserAgent()||a&&l)&&n.push("export")}var c=this.gridOptionsService.getCallback("getContextMenuItems");return c?c({node:t,column:e,value:r,defaultItems:n.length?n:void 0}):n},o.prototype.onContextMenu=function(t,e,r,n,o,i){if((this.gridOptionsService.is("allowContextMenuWithControlKey")||!t||!t.ctrlKey&&!t.metaKey)&&(t&&this.blockMiddleClickScrollsIfNeeded(t),!this.gridOptionsService.is("suppressContextMenu"))){var a=t||e.touches[0];if(this.showMenu(r,n,o,a,i))(t||e).preventDefault()}},o.prototype.blockMiddleClickScrollsIfNeeded=function(t){var e=this.gridOptionsService,r=t.which;e.is("suppressMiddleClickScrolls")&&2===r&&t.preventDefault()},o.prototype.showMenu=function(t,e,n,o,i){var a=this,s=this.getMenuItems(t,e,n),l=this.ctrlsService.getGridBodyCtrl().getGui();if(void 0===s||u.missingOrEmpty(s))return!1;var c=new hD(s);this.createBean(c);var p=c.getGui(),d={column:e,rowNode:t,type:"contextMenu",mouseEvent:o,ePopup:p,nudgeY:1},h=this.localeService.getLocaleTextFunc(),f=this.popupService.addPopup({modal:!0,eChild:p,closeOnEsc:!0,closedCallback:function(){l.classList.remove("ag-context-menu-open"),a.destroyBean(c)},click:o,positionCallback:function(){var t=a.gridOptionsService.is("enableRtl");a.popupService.positionPopupUnderMouseEvent(cD(cD({},d),{nudgeX:t?-1*(p.offsetWidth+1):1}))},anchorToElement:i,ariaLabel:h("ariaLabelContextMenu","Context Menu")});return f&&(l.classList.add("ag-context-menu-open"),c.afterGuiAttached({container:"contextMenu",hidePopup:f.hideFunc})),this.activeMenu&&this.hideActiveMenu(),this.activeMenu=c,c.addEventListener(r.EVENT_DESTROYED,(function(){a.activeMenu===c&&(a.activeMenu=null)})),f&&c.addEventListener(_.EVENT_MENU_ITEM_SELECTED,f.hideFunc),!0},pD([n("popupService")],o.prototype,"popupService",void 0),pD([E("rangeService")],o.prototype,"rangeService",void 0),pD([n("ctrlsService")],o.prototype,"ctrlsService",void 0),pD([n("columnModel")],o.prototype,"columnModel",void 0),o=pD([e("contextMenuFactory")],o)}(r),hD=function(t){function e(e){var r=t.call(this,'<div class="ag-menu" role="presentation"></div>')||this;return r.menuList=null,r.focusedCell=null,r.menuItems=e,r}return uD(e,t),e.prototype.addMenuItems=function(){var t=this,e=this.createManagedBean(new M),r=this.menuItemMapper.mapWithStockItems(this.menuItems,null);e.addMenuItems(r),this.appendChild(e),this.menuList=e,e.addEventListener(_.EVENT_MENU_ITEM_SELECTED,(function(e){return t.dispatchEvent(e)}))},e.prototype.afterGuiAttached=function(t){t.hidePopup&&this.addDestroyFunc(t.hidePopup),this.focusedCell=this.focusService.getFocusedCell(),this.menuList&&this.focusService.focusInto(this.menuList.getGui())},e.prototype.restoreFocusedCell=function(){var t=this.focusService.getFocusedCell();if(t&&this.focusedCell&&this.cellPositionUtils.equals(t,this.focusedCell)){var e=this.focusedCell,r=e.rowIndex,n=e.rowPinned,o=e.column,i=this.gridOptionsService.getDocument();i.activeElement===i.body&&this.focusService.setFocusedCell({rowIndex:r,column:o,rowPinned:n,forceBrowserFocus:!0})}},e.prototype.destroy=function(){this.restoreFocusedCell(),t.prototype.destroy.call(this)},pD([n("menuItemMapper")],e.prototype,"menuItemMapper",void 0),pD([n("focusService")],e.prototype,"focusService",void 0),pD([n("cellPositionUtils")],e.prototype,"cellPositionUtils",void 0),pD([i],e.prototype,"addMenuItems",null),e}(a),fD=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),vD=function(){return(vD=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},yD=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},gD=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return fD(r,t),r.prototype.mapWithStockItems=function(t,e){var r=this;if(!t)return[];var n=[];return t.forEach((function(t){var o;if(o="string"==typeof t?r.getStockMenuItem(t,e):vD({},t)){var i=o,a=i.subMenu;a&&a instanceof Array&&(i.subMenu=r.mapWithStockItems(a,e)),null!=o&&n.push(o)}})),n},r.prototype.getStockMenuItem=function(t,e){var r,n,o=this,i=this.localeService.getLocaleTextFunc(),a=this.gridOptionsService.is("skipHeaderOnAutoSize");switch(t){case"pinSubMenu":return{name:i("pinColumn","Pin Column"),icon:u.createIconNoSpan("menuPin",this.gridOptionsService,null),subMenu:["clearPinned","pinLeft","pinRight"]};case"pinLeft":return{name:i("pinLeft","Pin Left"),action:function(){return o.columnModel.setColumnPinned(e,"left","contextMenu")},checked:!!e&&e.isPinnedLeft()};case"pinRight":return{name:i("pinRight","Pin Right"),action:function(){return o.columnModel.setColumnPinned(e,"right","contextMenu")},checked:!!e&&e.isPinnedRight()};case"clearPinned":return{name:i("noPin","No Pin"),action:function(){return o.columnModel.setColumnPinned(e,null,"contextMenu")},checked:!!e&&!e.isPinned()};case"valueAggSubMenu":return B.__assertRegistered(s.RowGroupingModule,"Aggregation from Menu",this.context.getGridId())&&((null==e?void 0:e.isPrimary())||(null==e?void 0:e.getColDef().pivotValueColumn))?{name:i("valueAggregation","Value Aggregation"),icon:u.createIconNoSpan("menuValue",this.gridOptionsService,null),subMenu:this.createAggregationSubMenu(e)}:null;case"autoSizeThis":return{name:i("autosizeThiscolumn","Autosize This Column"),action:function(){return o.columnModel.autoSizeColumn(e,a,"contextMenu")}};case"autoSizeAll":return{name:i("autosizeAllColumns","Autosize All Columns"),action:function(){return o.columnModel.autoSizeAllColumns(a,"contextMenu")}};case"rowGroup":return{name:i("groupBy","Group by")+" "+u.escapeString(this.columnModel.getDisplayNameForColumn(e,"header")),disabled:(null==e?void 0:e.isRowGroupActive())||!(null==e?void 0:e.getColDef().enableRowGroup),action:function(){return o.columnModel.addRowGroupColumn(e,"contextMenu")},icon:u.createIconNoSpan("menuAddRowGroup",this.gridOptionsService,null)};case"rowUnGroup":var l=u.createIconNoSpan("menuRemoveRowGroup",this.gridOptionsService,null),c=null==e?void 0:e.getColDef().showRowGroup;if(!0===c)return{name:i("ungroupAll","Un-Group All"),disabled:!(null==e?void 0:e.getColDef().showRowGroup),action:function(){return o.columnModel.setRowGroupColumns([],"contextMenu")},icon:l};if("string"==typeof c){var p=null===(r=this.columnModel.getSourceColumnsForGroupColumn(e))||void 0===r?void 0:r[0],d=null!=p?u.escapeString(this.columnModel.getDisplayNameForColumn(p,"header")):c;return{name:i("ungroupBy","Un-Group by")+" "+d,disabled:!(null==e?void 0:e.getColDef().showRowGroup),action:function(){return o.columnModel.removeRowGroupColumn(c,"contextMenu")},icon:l}}return{name:i("ungroupBy","Un-Group by")+" "+u.escapeString(this.columnModel.getDisplayNameForColumn(e,"header")),disabled:!(null==e?void 0:e.isRowGroupActive())||!(null==e?void 0:e.getColDef().enableRowGroup),action:function(){return o.columnModel.removeRowGroupColumn(e,"contextMenu")},icon:l};case"resetColumns":return{name:i("resetColumns","Reset Columns"),action:function(){return o.columnModel.resetColumnState("contextMenu")}};case"expandAll":return{name:i("expandAll","Expand All Row Groups"),action:function(){return o.gridApi.expandAll()}};case"contractAll":return{name:i("collapseAll","Collapse All Row Groups"),action:function(){return o.gridApi.collapseAll()}};case"copy":return B.__assertRegistered(s.ClipboardModule,"Copy from Menu",this.context.getGridId())?{name:i("copy","Copy"),shortcut:i("ctrlC","Ctrl+C"),icon:u.createIconNoSpan("clipboardCopy",this.gridOptionsService,null),action:function(){return o.clipboardService.copyToClipboard()}}:null;case"copyWithHeaders":return B.__assertRegistered(s.ClipboardModule,"Copy with Headers from Menu",this.context.getGridId())?{name:i("copyWithHeaders","Copy with Headers"),icon:u.createIconNoSpan("clipboardCopy",this.gridOptionsService,null),action:function(){return o.clipboardService.copyToClipboard({includeHeaders:!0})}}:null;case"copyWithGroupHeaders":return B.__assertRegistered(s.ClipboardModule,"Copy with Group Headers from Menu",this.context.getGridId())?{name:i("copyWithGroupHeaders","Copy with Group Headers"),icon:u.createIconNoSpan("clipboardCopy",this.gridOptionsService,null),action:function(){return o.clipboardService.copyToClipboard({includeHeaders:!0,includeGroupHeaders:!0})}}:null;case"cut":if(B.__assertRegistered(s.ClipboardModule,"Cut from Menu",this.context.getGridId())){var h=this.focusService.getFocusedCell(),f=h?this.rowPositionUtils.getRowNode(h):null,v=!!f&&(null==h?void 0:h.column.isCellEditable(f));return{name:i("cut","Cut"),shortcut:i("ctrlX","Ctrl+X"),icon:u.createIconNoSpan("clipboardCut",this.gridOptionsService,null),disabled:!v||this.gridOptionsService.is("suppressCutToClipboard"),action:function(){return o.clipboardService.cutToClipboard(void 0,"contextMenu")}}}return null;case"paste":return B.__assertRegistered(s.ClipboardModule,"Paste from Clipboard",this.context.getGridId())?{name:i("paste","Paste"),shortcut:i("ctrlV","Ctrl+V"),disabled:!0,icon:u.createIconNoSpan("clipboardPaste",this.gridOptionsService,null),action:function(){return o.clipboardService.pasteFromClipboard()}}:null;case"export":var y=[],g=B.__isRegistered(s.CsvExportModule,this.context.getGridId()),m=B.__isRegistered(s.ExcelExportModule,this.context.getGridId());return!this.gridOptionsService.is("suppressCsvExport")&&g&&y.push("csvExport"),!this.gridOptionsService.is("suppressExcelExport")&&m&&y.push("excelExport"),{name:i("export","Export"),subMenu:y,icon:u.createIconNoSpan("save",this.gridOptionsService,null)};case"csvExport":return{name:i("csvExport","CSV Export"),icon:u.createIconNoSpan("csvExport",this.gridOptionsService,null),action:function(){return o.gridApi.exportDataAsCsv({})}};case"excelExport":return{name:i("excelExport","Excel Export"),icon:u.createIconNoSpan("excelExport",this.gridOptionsService,null),action:function(){return o.gridApi.exportDataAsExcel()}};case"separator":return"separator";case"pivotChart":case"chartRange":return null!==(n=this.chartMenuItemMapper.getChartItems(t))&&void 0!==n?n:null;default:return console.warn("AG Grid: unknown menu item type "+t),null}},r.prototype.createAggregationSubMenu=function(t){var e,r=this,n=this.localeService.getLocaleTextFunc();if(t.isPrimary())e=t;else{var o=t.getColDef().pivotValueColumn;e=u.exists(o)?o:void 0}var i=[];if(e){var a=e.isValueActive(),s=this.aggFuncService.getFuncNames(e);i.push({name:n("noAggregation","None"),action:function(){r.columnModel.removeValueColumn(e,"contextMenu"),r.columnModel.setColumnAggFunc(e,void 0,"contextMenu")},checked:!a}),s.forEach((function(t){i.push({name:n(t,u.capitalise(t)),action:function(){r.columnModel.setColumnAggFunc(e,t,"contextMenu"),r.columnModel.addValueColumn(e,"contextMenu")},checked:a&&e.getAggFunc()===t})}))}return i},yD([n("columnModel")],r.prototype,"columnModel",void 0),yD([n("gridApi")],r.prototype,"gridApi",void 0),yD([E("clipboardService")],r.prototype,"clipboardService",void 0),yD([E("aggFuncService")],r.prototype,"aggFuncService",void 0),yD([n("focusService")],r.prototype,"focusService",void 0),yD([n("rowPositionUtils")],r.prototype,"rowPositionUtils",void 0),yD([n("chartMenuItemMapper")],r.prototype,"chartMenuItemMapper",void 0),r=yD([e("menuItemMapper")],r)}(r),mD=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),bD=function(){return(bD=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},CD=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},SD=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},wD=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}var n;return mD(r,t),n=r,r.prototype.getChartItems=function(t){var e,r;if(this.chartService){var o="pivotChart"===t?new xD(this.gridOptionsService,this.chartService,this.localeService):new OD(this.gridOptionsService,this.chartService,this.localeService),i=o.getMenuItem(),a=null===(r=null===(e=this.gridOptionsService.get("chartToolPanelsDef"))||void 0===e?void 0:e.settingsPanel)||void 0===r?void 0:r.chartGroupsDef;return a&&(i=n.filterAndOrderChartMenu(i,a,o.getConfigLookup())),this.cleanInternals(i)}B.__assertRegistered(s.GridChartsModule,'the Context Menu key "'+t+'"',this.context.getGridId())},r.prototype.cleanInternals=function(t){if(!t)return t;var e=function(t){var r;return null==t||delete t._key,null===(r=null==t?void 0:t.subMenu)||void 0===r||r.forEach((function(t){return e(t)})),t};return e(t)},r.buildLookup=function(t){var e={},r=function(t){e[t._key]=t,t.subMenu&&t.subMenu.forEach((function(t){return r(t)}))};return r(t),e},r.filterAndOrderChartMenu=function(t,e,r){var n,o=this.buildLookup(t),i=bD(bD({},t),{subMenu:[]});if(Object.entries(e).forEach((function(t){var e,n,a=SD(t,2),s=a[0],l=a[1],c=r[s];if(null!=c){var p=o[c._key];if(p)if(p.subMenu){var d=l.map((function(t){var e=c[t];if(null!=e)return o[e];u.doOnce((function(){return console.warn("AG Grid - invalid chartGroupsDef config '"+s+"."+t+"'")}),"invalid_chartGroupsDef"+t+"_"+s)})).filter((function(t){return void 0!==t}));d.length>0&&(p.subMenu=d,null===(e=i.subMenu)||void 0===e||e.push(p))}else null===(n=i.subMenu)||void 0===n||n.push(p)}else u.doOnce((function(){return console.warn("AG Grid - invalid chartGroupsDef config '"+s+"'")}),"invalid_chartGroupsDef"+s)})),0!=(null===(n=i.subMenu)||void 0===n?void 0:n.length))return i},CD([E("chartService")],r.prototype,"chartService",void 0),r=n=CD([e("chartMenuItemMapper")],r)}(r),xD=function(){function t(t,e,r){this.gridOptionsService=t,this.chartService=e,this.localeService=r}return t.prototype.getMenuItem=function(){var t=this,e=this.localeService.getLocaleTextFunc(),r=function(r,n,o,i){return{name:e(r,n),action:function(){return t.chartService.createPivotChart({chartType:o})},_key:i}};return{name:e("pivotChart","Pivot Chart"),_key:"pivotChart",subMenu:[{_key:"pivotColumnChart",name:e("columnChart","Column"),subMenu:[r("groupedColumn","Grouped&lrm;","groupedColumn","pivotGroupedColumn"),r("stackedColumn","Stacked&lrm;","stackedColumn","pivotStackedColumn"),r("normalizedColumn","100% Stacked&lrm;","normalizedColumn","pivotNormalizedColumn")]},{_key:"pivotBarChart",name:e("barChart","Bar"),subMenu:[r("groupedBar","Grouped&lrm;","groupedBar","pivotGroupedBar"),r("stackedBar","Stacked&lrm;","stackedBar","pivotStackedBar"),r("normalizedBar","100% Stacked&lrm;","normalizedBar","pivotNormalizedBar")]},{_key:"pivotPieChart",name:e("pieChart","Pie"),subMenu:[r("pie","Pie&lrm;","pie","pivotPie"),r("doughnut","Doughnut&lrm;","doughnut","pivotDoughnut")]},r("line","Line&lrm;","line","pivotLineChart"),{_key:"pivotXYChart",name:e("xyChart","X Y (Scatter)"),subMenu:[r("scatter","Scatter&lrm;","scatter","pivotScatter"),r("bubble","Bubble&lrm;","bubble","pivotBubble")]},{_key:"pivotAreaChart",name:e("areaChart","Area"),subMenu:[r("area","Area&lrm;","area","pivotArea"),r("stackedArea","Stacked&lrm;","stackedArea","pivotStackedArea"),r("normalizedArea","100% Stacked&lrm;","normalizedArea","pivotNormalizedArea")]},r("histogramChart","Histogram&lrm;","histogram","pivotHistogramChart"),{_key:"pivotCombinationChart",name:e("combinationChart","Combination"),subMenu:[r("columnLineCombo","Column & Line&lrm;","columnLineCombo","pivotColumnLineCombo"),r("AreaColumnCombo","Area & Column&lrm;","areaColumnCombo","pivotAreaColumnCombo")]}],icon:u.createIconNoSpan("chart",this.gridOptionsService,void 0)}},t.prototype.getConfigLookup=function(){return{columnGroup:{_key:"pivotColumnChart",column:"pivotGroupedColumn",stackedColumn:"pivotStackedColumn",normalizedColumn:"pivotNormalizedColumn"},barGroup:{_key:"pivotBarChart",bar:"pivotGroupedBar",stackedBar:"pivotStackedBar",normalizedBar:"pivotNormalizedBar"},pieGroup:{_key:"pivotPieChart",pie:"pivotPie",doughnut:"pivotDoughnut"},lineGroup:{_key:"pivotLineChart",line:"pivotLineChart"},scatterGroup:{_key:"pivotXYChart",bubble:"pivotBubble",scatter:"pivotScatter"},areaGroup:{_key:"pivotAreaChart",area:"pivotArea",stackedArea:"pivotStackedArea",normalizedArea:"pivotNormalizedArea"},histogramGroup:{_key:"pivotHistogramChart",histogram:"pivotHistogramChart"},combinationGroup:{_key:"pivotCombinationChart",columnLineCombo:"pivotColumnLineCombo",areaColumnCombo:"pivotAreaColumnCombo",customCombo:""}}},t}(),OD=function(){function t(t,e,r){this.gridOptionsService=t,this.chartService=e,this.localeService=r}return t.prototype.getMenuItem=function(){var t=this,e=this.localeService.getLocaleTextFunc(),r=function(r,n,o,i){return{name:e(r,n),action:function(){return t.chartService.createChartFromCurrentRange(o)},_key:i}};return{name:e("chartRange","Chart Range"),_key:"chartRange",subMenu:[{name:e("columnChart","Column"),subMenu:[r("groupedColumn","Grouped&lrm;","groupedColumn","rangeGroupedColumn"),r("stackedColumn","Stacked&lrm;","stackedColumn","rangeStackedColumn"),r("normalizedColumn","100% Stacked&lrm;","normalizedColumn","rangeNormalizedColumn")],_key:"rangeColumnChart"},{name:e("barChart","Bar"),subMenu:[r("groupedBar","Grouped&lrm;","groupedBar","rangeGroupedBar"),r("stackedBar","Stacked&lrm;","stackedBar","rangeStackedBar"),r("normalizedBar","100% Stacked&lrm;","normalizedBar","rangeNormalizedBar")],_key:"rangeBarChart"},{name:e("pieChart","Pie"),subMenu:[r("pie","Pie&lrm;","pie","rangePie"),r("doughnut","Doughnut&lrm;","doughnut","rangeDoughnut")],_key:"rangePieChart"},r("line","Line&lrm;","line","rangeLineChart"),{name:e("xyChart","X Y (Scatter)"),subMenu:[r("scatter","Scatter&lrm;","scatter","rangeScatter"),r("bubble","Bubble&lrm;","bubble","rangeBubble")],_key:"rangeXYChart"},{name:e("areaChart","Area"),subMenu:[r("area","Area&lrm;","area","rangeArea"),r("stackedArea","Stacked&lrm;","stackedArea","rangeStackedArea"),r("normalizedArea","100% Stacked&lrm;","normalizedArea","rangeNormalizedArea")],_key:"rangeAreaChart"},r("histogramChart","Histogram&lrm;","histogram","rangeHistogramChart"),{name:e("combinationChart","Combination"),subMenu:[r("columnLineCombo","Column & Line&lrm;","columnLineCombo","rangeColumnLineCombo"),r("AreaColumnCombo","Area & Column&lrm;","areaColumnCombo","rangeAreaColumnCombo")],_key:"rangeCombinationChart"}],icon:u.createIconNoSpan("chart",this.gridOptionsService,void 0)}},t.prototype.getConfigLookup=function(){return{columnGroup:{_key:"rangeColumnChart",column:"rangeGroupedColumn",stackedColumn:"rangeStackedColumn",normalizedColumn:"rangeNormalizedColumn"},barGroup:{_key:"rangeBarChart",bar:"rangeGroupedBar",stackedBar:"rangeStackedBar",normalizedBar:"rangeNormalizedBar"},pieGroup:{_key:"rangePieChart",pie:"rangePie",doughnut:"rangeDoughnut"},lineGroup:{_key:"rangeLineChart",line:"rangeLineChart"},scatterGroup:{_key:"rangeXYChart",bubble:"rangeBubble",scatter:"rangeScatter"},areaGroup:{_key:"rangeAreaChart",area:"rangeArea",stackedArea:"rangeStackedArea",normalizedArea:"rangeNormalizedArea"},histogramGroup:{_key:"rangeHistogramChart",histogram:"rangeHistogramChart"},combinationGroup:{_key:"rangeCombinationChart",columnLineCombo:"rangeColumnLineCombo",areaColumnCombo:"rangeAreaColumnCombo",customCombo:""}}},t}(),ED={version:"30.2.0",moduleName:s.MenuModule,beans:[sD,dD,gD,wD],dependantModules:[Ft]},TD=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),PD=function(){return(PD=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},DD=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},AD=function(t){function e(){var e=t.call(this,'<div class="ag-multi-filter ag-menu-list-compact"></div>')||this;return e.filterDefs=[],e.filters=[],e.guiDestroyFuncs=[],e.activeFilterIndices=[],e.lastActivatedMenuItem=null,e.afterFiltersReadyFuncs=[],e}return TD(e,t),e.prototype.postConstruct=function(){var t=this;this.initialiseTabGuard({onFocusIn:function(e){return t.onFocusIn(e)}})},e.getFilterDefs=function(t){var e=t.filters;return e&&e.length>0?e:[{filter:"agTextColumnFilter"},{filter:"agSetColumnFilter"}]},e.prototype.init=function(t){var r=this;this.params=t,this.filterDefs=e.getFilterDefs(t);var n=t.column,o=t.filterChangedCallback;this.column=n,this.filterChangedCallback=o;var i=[];return this.filterDefs.forEach((function(t,e){var n=r.createFilter(t,e);null!=n&&i.push(n)})),V.all(i).then((function(t){r.filters=t,r.refreshGui("columnMenu"),r.afterFiltersReadyFuncs.forEach((function(t){return t()})),r.afterFiltersReadyFuncs.length=0}))},e.prototype.refreshGui=function(t){var e=this;t!==this.lastOpenedInContainer&&(this.removeAllChildrenExceptTabGuards(),this.destroyChildren(),this.filters.forEach((function(r,n){n>0&&e.appendChild(u.loadTemplate('<div class="ag-filter-separator"></div>'));var o,i=e.filterDefs[n],a=e.getFilterTitle(r,i);if("subMenu"===i.display&&"toolPanel"!==t)o=e.insertFilterMenu(r,a).getGui();else if("subMenu"===i.display||"accordion"===i.display){o=e.insertFilterGroup(r,a).getGui()}else o=r.getGui();e.appendChild(o)})),this.lastOpenedInContainer=t)},e.prototype.getFilterTitle=function(t,e){if(null!=e.title)return e.title;var r=t;return"function"==typeof r.getFilterTitle?r.getFilterTitle():"Filter"},e.prototype.destroyChildren=function(){this.guiDestroyFuncs.forEach((function(t){return t()})),this.guiDestroyFuncs.length=0},e.prototype.insertFilterMenu=function(t,e){var r=this,n=this.createBean(new _({name:e,subMenu:t,cssClasses:["ag-multi-filter-menu-item"],isCompact:!0,isAnotherSubMenuOpen:function(){return!1}}));return n.setParentComponent(this),this.guiDestroyFuncs.push((function(){return r.destroyBean(n)})),this.addManagedListener(n,_.EVENT_MENU_ITEM_ACTIVATED,(function(t){r.lastActivatedMenuItem&&r.lastActivatedMenuItem!==t.menuItem&&r.lastActivatedMenuItem.deactivate(),r.lastActivatedMenuItem=t.menuItem})),n.addGuiEventListener("focusin",(function(){return n.activate()})),n.addGuiEventListener("focusout",(function(){n.isSubMenuOpen()||n.deactivate()})),n},e.prototype.insertFilterGroup=function(t,e){var r=this,n=this.createBean(new J({title:e,cssIdentifier:"multi-filter"}));return this.guiDestroyFuncs.push((function(){return r.destroyBean(n)})),n.addItem(t.getGui()),n.toggleGroupExpand(!1),t.afterGuiAttached&&n.addManagedListener(n,J.EVENT_EXPANDED,(function(){return t.afterGuiAttached({container:r.lastOpenedInContainer,suppressFocus:!0,hidePopup:r.hidePopup})})),n},e.prototype.isFilterActive=function(){return this.filters.some((function(t){return t.isFilterActive()}))},e.prototype.getLastActiveFilterIndex=function(){return this.activeFilterIndices.length>0?this.activeFilterIndices[this.activeFilterIndices.length-1]:null},e.prototype.doesFilterPass=function(t,e){var r=!0;return this.filters.forEach((function(n){r&&n!==e&&n.isFilterActive()&&(r=n.doesFilterPass(t))})),r},e.prototype.getFilterType=function(){return"multi"},e.prototype.getModelFromUi=function(){return{filterType:this.getFilterType(),filterModels:this.filters.map((function(t){var e=t;return"function"==typeof e.getModelFromUi?e.getModelFromUi():null}))}},e.prototype.getModel=function(){return this.isFilterActive()?{filterType:this.getFilterType(),filterModels:this.filters.map((function(t){return t.isFilterActive()?t.getModel():null}))}:null},e.prototype.setModel=function(t){var e=this,r=function(t,e){return new V((function(r){var n=t.setModel(e);n?n.then((function(){return r()})):r()}))},n=[];return null==t?n=this.filters.map((function(t,n){return r(t,null).then((function(){e.updateActiveList(n)}))})):this.filters.forEach((function(o,i){var a=t.filterModels.length>i?t.filterModels[i]:null,s=r(o,a).then((function(){e.updateActiveList(i)}));n.push(s)})),V.all(n).then((function(){}))},e.prototype.applyModel=function(t){void 0===t&&(t="api");var e=!1;return this.filters.forEach((function(r){r instanceof vt&&(e=r.applyModel(t)||e)})),e},e.prototype.getChildFilterInstance=function(t){return this.filters[t]},e.prototype.afterGuiAttached=function(t){t?(this.hidePopup=t.hidePopup,this.refreshGui(t.container)):this.hidePopup=void 0;var e=this.params.filters,r=e&&e.some((function(t){return t.display&&"inline"!==t.display}));this.executeFunctionIfExists("afterGuiAttached",PD(PD({},t||{}),{suppressFocus:r}));var n=this.gridOptionsService.getDocument(),o=n.activeElement;r&&(o===n.body||this.getGui().contains(o))&&this.forceFocusOutOfContainer(!0)},e.prototype.afterGuiDetached=function(){this.executeFunctionIfExists("afterGuiDetached")},e.prototype.onAnyFilterChanged=function(){this.executeFunctionIfExists("onAnyFilterChanged")},e.prototype.onNewRowsLoaded=function(){this.executeFunctionIfExists("onNewRowsLoaded")},e.prototype.destroy=function(){var e=this;this.filters.forEach((function(t){t.setModel(null),e.destroyBean(t)})),this.filters.length=0,this.destroyChildren(),this.hidePopup=void 0,t.prototype.destroy.call(this)},e.prototype.executeFunctionIfExists=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];u.forEachReverse(this.filters,(function(r){var n=r[t];"function"==typeof n&&n.apply(r,e)}))},e.prototype.createFilter=function(t,e){var r,n=this,o=this.params,i=o.filterModifiedCallback,a=o.doesRowPassOtherFilter,s=PD(PD({},this.filterManager.createFilterParams(this.column,this.column.getColDef())),{filterModifiedCallback:i,filterChangedCallback:function(t){n.executeWhenAllFiltersReady((function(){return n.filterChanged(e,t)}))},doesRowPassOtherFilter:function(t){return a(t)&&n.doesFilterPass({node:t,data:t.data},r)}}),l=this.userComponentFactory.getFilterDetails(t,s,"agTextColumnFilter");if(!l)return null;var u=l.newAgStackInstance();return u&&u.then((function(t){return r=t})),u},e.prototype.executeWhenAllFiltersReady=function(t){this.filters&&this.filters.length>0?t():this.afterFiltersReadyFuncs.push(t)},e.prototype.updateActiveList=function(t){var e=this.filters[t];u.removeFromArray(this.activeFilterIndices,t),e.isFilterActive()&&this.activeFilterIndices.push(t)},e.prototype.filterChanged=function(t,e){this.updateActiveList(t),this.filterChangedCallback(e);var r=this.filters[t];this.filters.forEach((function(t){t!==r&&"function"==typeof t.onAnyFilterChanged&&t.onAnyFilterChanged()}))},e.prototype.onFocusIn=function(t){return null==this.lastActivatedMenuItem||this.lastActivatedMenuItem.getGui().contains(t.target)||(this.lastActivatedMenuItem.deactivate(),this.lastActivatedMenuItem=null),!0},e.prototype.getModelAsString=function(t){var e,r,n,o;if(!this.filters||!(null===(e=null==t?void 0:t.filterModels)||void 0===e?void 0:e.length))return"";var i=null!==(r=this.getLastActiveFilterIndex())&&void 0!==r?r:0,a=this.filters[i];return null!==(o=null===(n=a.getModelAsString)||void 0===n?void 0:n.call(a,t.filterModels[i]))&&void 0!==o?o:""},DD([n("filterManager")],e.prototype,"filterManager",void 0),DD([n("userComponentFactory")],e.prototype,"userComponentFactory",void 0),DD([i],e.prototype,"postConstruct",null),e}(b),MD=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),_D=function(){return(_D=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},RD=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},kD=function(t){function e(){var e=t.call(this,'<div class="ag-multi-floating-filter ag-floating-filter-input"></div>')||this;return e.floatingFilters=[],e.compDetailsList=[],e}return MD(e,t),e.prototype.init=function(t){this.params=t;var e=this.getCompDetailsList(t).compDetailsList;return this.setParams(e)},e.prototype.setParams=function(t){var e=this,r=[];return t.forEach((function(t){var n=null==t?void 0:t.newAgStackInstance();null!=n&&(e.compDetailsList.push(t),r.push(n))})),V.all(r).then((function(t){t.forEach((function(t,r){e.floatingFilters.push(t);var n=t.getGui();e.appendChild(n),r>0&&u.setDisplayed(n,!1)}))}))},e.prototype.onParamsUpdated=function(t){var e=this;this.params=t;var r=this.getCompDetailsList(t),n=r.compDetailsList,o=r.floatingFilterParamsList;n.length===this.compDetailsList.length&&n.every((function(t,r){return!e.filterManager.areFilterCompsDifferent(e.compDetailsList[r],t)}))?o.forEach((function(t,r){var n,o=e.floatingFilters[r];null===(n=o.onParamsUpdated)||void 0===n||n.call(o,t)})):(u.clearElement(this.getGui()),this.destroyBeans(this.floatingFilters),this.floatingFilters=[],this.compDetailsList=[],this.setParams(n))},e.prototype.getCompDetailsList=function(t){var e=this,r=[],n=[],o=t.filterParams;return AD.getFilterDefs(o).forEach((function(o,i){var a=_D(_D({},t),{parentFilterInstance:function(t){e.parentMultiFilterInstance((function(e){var r=e.getChildFilterInstance(i);null!=r&&t(r)}))}});u.mergeDeep(a.filterParams,o.filterParams);var s=e.getCompDetails(o,a);s&&(r.push(s),n.push(a))})),{compDetailsList:r,floatingFilterParamsList:n}},e.prototype.onParentModelChanged=function(t,e){var r=this;e&&e.afterFloatingFilter||this.parentMultiFilterInstance((function(n){if(null==t)r.floatingFilters.forEach((function(t,r){t.onParentModelChanged(null,e),u.setDisplayed(t.getGui(),0===r)}));else{var o=n.getLastActiveFilterIndex();r.floatingFilters.forEach((function(r,n){var i=t.filterModels.length>n?t.filterModels[n]:null;r.onParentModelChanged(i,e);var a=null==o?0===n:n===o;u.setDisplayed(r.getGui(),a)}))}}))},e.prototype.destroy=function(){this.destroyBeans(this.floatingFilters),this.floatingFilters.length=0,t.prototype.destroy.call(this)},e.prototype.getCompDetails=function(t,e){var r,n=this,o=null!==(r=this.userComponentFactory.getDefaultFloatingFilterType(t,(function(){return n.filterManager.getDefaultFloatingFilter(n.params.column)})))&&void 0!==r?r:"agReadOnlyFloatingFilter";return this.userComponentFactory.getFloatingFilterCompDetails(t,e,o)},e.prototype.parentMultiFilterInstance=function(t){this.params.parentFilterInstance((function(e){if(!(e instanceof AD))throw new Error("AG Grid - MultiFloatingFilterComp expects MultiFilter as its parent");t(e)}))},RD([n("userComponentFactory")],e.prototype,"userComponentFactory",void 0),RD([n("filterManager")],e.prototype,"filterManager",void 0),e}(a),FD={version:"30.2.0",moduleName:s.MultiFilterModule,beans:[],userComponents:[{componentName:"agMultiColumnFilter",componentClass:AD},{componentName:"agMultiColumnFloatingFilter",componentClass:kD}],dependantModules:[Ft]},ID=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),LD=function(t){function e(){return t.call(this,'<div class="ag-cell-edit-wrapper"></div>')||this}return ID(e,t),e.prototype.init=function(t){var e=this;this.params=t;var r=t.cellStartedEdit,n=t.cellHeight,o=t.values;if(u.missing(o))console.warn("AG Grid: richSelectCellEditor requires values for it to work");else{var i=this.buildRichSelectParams(),a=i.params,s=i.valuesPromise;this.richSelect=this.createManagedBean(new p(a)),this.appendChild(this.richSelect),s&&s.then((function(t){e.richSelect.setValueList({valueList:t,refresh:!0});var r=e.getSearchStringCallback(t);r&&e.richSelect.setSearchStringCreator(r)})),this.addManagedListener(this.richSelect,l.EVENT_FIELD_PICKER_VALUE_SELECTED,this.onEditorPickerValueSelected.bind(this)),this.addManagedListener(this.richSelect.getGui(),"focusout",this.onEditorFocusOut.bind(this)),this.focusAfterAttached=r,u.exists(n)&&this.richSelect.setRowHeight(n)}},e.prototype.onEditorPickerValueSelected=function(t){this.params.stopEditing(!t.fromEnterKey)},e.prototype.onEditorFocusOut=function(t){this.richSelect.getGui().contains(t.relatedTarget)||this.params.stopEditing(!0)},e.prototype.buildRichSelectParams=function(){var t,e,r=this.params,n=r.cellRenderer,o=r.value,i=r.values,a=r.formatValue,s=r.searchDebounceDelay,l=r.valueListGap,u=r.valueListMaxHeight,c=r.valueListMaxWidth,p={value:o,cellRenderer:n,searchDebounceDelay:s,valueFormatter:a,pickerAriaLabelKey:"ariaLabelRichSelectField",pickerAriaLabelValue:"Rich Select Field",pickerType:"virtual-list",pickerGap:l,allowTyping:r.allowTyping,filterList:r.filterList,searchType:r.searchType,highlightMatch:r.highlightMatch,maxPickerHeight:u,maxPickerWidth:c,placeholder:r.valuePlaceholder};return t="function"==typeof i?i(this.params):i,Array.isArray(t)?(p.valueList=t,p.searchStringCreator=this.getSearchStringCallback(t)):e=t,{params:p,valuesPromise:e}},e.prototype.getSearchStringCallback=function(t){var e=this,r=this.params.colDef;if("object"==typeof t[0]&&r.keyCreator)return function(t){return t.map((function(t){var n={value:t,colDef:e.params.colDef,column:e.params.column,node:e.params.node,data:e.params.data,api:e.gridOptionsService.api,columnApi:e.gridOptionsService.columnApi,context:e.gridOptionsService.context};return r.keyCreator(n)}))}},e.prototype.afterGuiAttached=function(){var t=this,e=this.focusAfterAttached,r=this.params;setTimeout((function(){if(t.isAlive()){e&&t.richSelect.getFocusableElement().focus(),t.richSelect.showPicker();var n=r.eventKey;n&&1===(null==n?void 0:n.length)&&t.richSelect.searchTextFromString(n)}}))},e.prototype.getValue=function(){return this.richSelect.getValue()},e.prototype.isPopup=function(){return!1},e}(yt),ND={version:"30.2.0",moduleName:s.RichSelectModule,beans:[],userComponents:[{componentName:"agRichSelect",componentClass:LD},{componentName:"agRichSelectCellEditor",componentClass:LD}],dependantModules:[Ft]},GD=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),jD=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},VD=function(t){function e(e,r,n){var o=t.call(this,0)||this;return o.nodeIdSequence=new I,o.info={},o.ssrmParams=e,o.parentRowNode=n,o.level=n.level+1,o.groupLevel=e.rowGroupCols?o.level<e.rowGroupCols.length:void 0,o.leafGroup=!!e.rowGroupCols&&o.level===e.rowGroupCols.length-1,o}return GD(e,t),e.prototype.postConstruct=function(){var t=this;if(this.usingTreeData=this.gridOptionsService.is("treeData"),this.nodeIdPrefix=this.blockUtils.createNodeIdPrefix(this.parentRowNode),!this.usingTreeData&&this.groupLevel){var e=this.ssrmParams.rowGroupCols[this.level];this.groupField=e.field,this.rowGroupColumn=this.columnModel.getRowGroupColumns()[this.level]}var r=1,n=-1===this.parentRowNode.level,o=this.storeUtils.getServerSideInitialRowCount();n&&void 0!==o&&(r=o),this.initialiseRowNodes(r),this.rowNodeBlockLoader.addBlock(this),this.addDestroyFunc((function(){return t.rowNodeBlockLoader.removeBlock(t)})),this.postSortFunc=this.gridOptionsService.getCallback("postSortRows")},e.prototype.destroyRowNodes=function(){this.blockUtils.destroyRowNodes(this.allRowNodes),this.allRowNodes=[],this.nodesAfterSort=[],this.nodesAfterFilter=[],this.allNodesMap={}},e.prototype.initialiseRowNodes=function(t,e){void 0===e&&(e=!1),this.destroyRowNodes();for(var r=0;r<t;r++){var n=this.blockUtils.createRowNode({field:this.groupField,group:this.groupLevel,leafGroup:this.leafGroup,level:this.level,parent:this.parentRowNode,rowGroupColumn:this.rowGroupColumn});e&&(n.failedLoad=!0),this.allRowNodes.push(n),this.nodesAfterFilter.push(n),this.nodesAfterSort.push(n)}},e.prototype.getBlockStateJson=function(){return{id:this.nodeIdPrefix?this.nodeIdPrefix:"",state:this.getState()}},e.prototype.loadFromDatasource=function(){this.storeUtils.loadFromDatasource({startRow:void 0,endRow:void 0,parentBlock:this,parentNode:this.parentRowNode,storeParams:this.ssrmParams,successCallback:this.pageLoaded.bind(this,this.getVersion()),success:this.success.bind(this,this.getVersion()),failCallback:this.pageLoadFailed.bind(this,this.getVersion()),fail:this.pageLoadFailed.bind(this,this.getVersion())})},e.prototype.getStartRow=function(){return 0},e.prototype.getEndRow=function(){return this.nodesAfterSort.length},e.prototype.createDataNode=function(t,e){var r=this.blockUtils.createRowNode({field:this.groupField,group:this.groupLevel,leafGroup:this.leafGroup,level:this.level,parent:this.parentRowNode,rowGroupColumn:this.rowGroupColumn});null!=e?u.insertIntoArray(this.allRowNodes,r,e):this.allRowNodes.push(r);var n=this.prefixId(this.nodeIdSequence.next());return this.blockUtils.setDataIntoRowNode(r,t,n,void 0),this.nodeManager.addRowNode(r),this.blockUtils.checkOpenByDefault(r),this.allNodesMap[r.id]=r,r},e.prototype.prefixId=function(t){return this.nodeIdPrefix?this.nodeIdPrefix+"-"+t:t.toString()},e.prototype.processServerFail=function(){this.initialiseRowNodes(1,!0),this.fireStoreUpdatedEvent(),this.flushAsyncTransactions()},e.prototype.processServerResult=function(t){if(this.isAlive()){var e=t.storeInfo||t.groupLevelInfo;e&&Object.assign(this.info,e),t.pivotResultFields&&this.serverSideRowModel.generateSecondaryColumns(t.pivotResultFields);var r=this.allRowNodes.length>0?this.allNodesMap:void 0;if(this.allRowNodes=[],this.nodesAfterSort=[],this.nodesAfterFilter=[],this.allNodesMap={},!t.rowData){u.doOnce((function(){return console.warn('AG Grid: "params.data" is missing from Server-Side Row Model success() callback. Please use the "data" attribute. If no data is returned, set an empty list.',t)}),"FullStore.noData")}this.createOrRecycleNodes(r,t.rowData),r&&this.blockUtils.destroyRowNodes(u.getAllValuesInObject(r)),this.filterAndSortNodes(),this.fireStoreUpdatedEvent(),this.flushAsyncTransactions()}},e.prototype.createOrRecycleNodes=function(t,e){var r=this;if(e){e.forEach((function(e){var n=function(e){if(t){var n=r.gridOptionsService.getCallback("getRowId");if(n){var o=r.parentRowNode.getGroupKeys(),i=r.level,a=n({data:e,parentKeys:o.length>0?o:void 0,level:i}),s=t[a];if(s)return delete t[a],s}}}(e);n?function(t,e){r.allNodesMap[t.id]=t,r.blockUtils.updateDataIntoRowNode(t,e),r.allRowNodes.push(t)}(n,e):r.createDataNode(e)}))}},e.prototype.flushAsyncTransactions=function(){var t=this;window.setTimeout((function(){return t.transactionManager.flushAsyncTransactions()}),0)},e.prototype.filterAndSortNodes=function(){this.filterRowNodes(),this.sortRowNodes()},e.prototype.sortRowNodes=function(){var t=this.storeUtils.isServerSideSortAllLevels()||this.storeUtils.isServerSideSortOnServer(),e=this.sortController.getSortOptions(),r=!e||0==e.length;if(t||r)this.nodesAfterSort=this.nodesAfterFilter;else if(this.nodesAfterSort=this.rowNodeSorter.doFullSort(this.nodesAfterFilter,e),this.postSortFunc){var n={nodes:this.nodesAfterSort};this.postSortFunc(n)}},e.prototype.filterRowNodes=function(){var t=this,e=!this.storeUtils.isServerSideOnlyRefreshFilteredGroups()||this.storeUtils.isServerSideFilterOnServer(),r=this.groupLevel;this.nodesAfterFilter=e||r?this.allRowNodes:this.allRowNodes.filter((function(e){return t.filterManager.doesRowPassFilter({rowNode:e})}))},e.prototype.clearDisplayIndexes=function(){var t=this;this.displayIndexStart=void 0,this.displayIndexEnd=void 0,this.allRowNodes.forEach((function(e){return t.blockUtils.clearDisplayIndex(e)}))},e.prototype.getDisplayIndexEnd=function(){return this.displayIndexEnd},e.prototype.isDisplayIndexInStore=function(t){return 0!==this.getRowCount()&&(t>=this.displayIndexStart&&t<this.displayIndexEnd)},e.prototype.setDisplayIndexes=function(t,e){var r=this;this.displayIndexStart=t.peek(),this.topPx=e.value;var n={};this.nodesAfterSort.forEach((function(o){r.blockUtils.setDisplayIndex(o,t,e),n[o.id]=!0})),this.allRowNodes.forEach((function(t){n[t.id]||r.blockUtils.clearDisplayIndex(t)})),this.displayIndexEnd=t.peek(),this.heightPx=e.value-this.topPx},e.prototype.forEachStoreDeep=function(t,e){void 0===e&&(e=new I),t(this,e.next()),this.allRowNodes.forEach((function(r){var n=r.childStore;n&&n.forEachStoreDeep(t,e)}))},e.prototype.forEachNodeDeep=function(t,e){void 0===e&&(e=new I),this.allRowNodes.forEach((function(r){t(r,e.next());var n=r.childStore;n&&n.forEachNodeDeep(t,e)}))},e.prototype.forEachNodeDeepAfterFilterAndSort=function(t,e,r){void 0===e&&(e=new I),void 0===r&&(r=!1),this.nodesAfterSort.forEach((function(n){t(n,e.next());var o=n.childStore;o&&o.forEachNodeDeepAfterFilterAndSort(t,e,r)})),r&&this.parentRowNode.sibling&&t(this.parentRowNode.sibling,e.next())},e.prototype.getRowUsingDisplayIndex=function(t){if(this.isDisplayIndexInStore(t))return this.blockUtils.binarySearchForDisplayIndex(t,this.nodesAfterSort)},e.prototype.getRowBounds=function(t){for(var e=0;e<this.nodesAfterSort.length;e++){var r=this.nodesAfterSort[e],n=this.blockUtils.extractRowBounds(r,t);if(n)return n}return null},e.prototype.isPixelInRange=function(t){return t>=this.topPx&&t<this.topPx+this.heightPx},e.prototype.getRowIndexAtPixel=function(t){var e=this;if(t<=this.topPx)return this.nodesAfterSort[0].rowIndex;if(t>=this.topPx+this.heightPx){var r=this.nodesAfterSort[this.nodesAfterSort.length-1],n=r.rowTop+r.rowHeight;if(t>=n&&r.expanded){if(r.childStore&&r.childStore.getRowCount()>0)return r.childStore.getRowIndexAtPixel(t);if(r.detailNode)return r.detailNode.rowIndex}return r.rowIndex}var o=null;return this.nodesAfterSort.forEach((function(r){var n=e.blockUtils.getIndexAtPixel(r,t);null!=n&&(o=n)})),null==o?this.displayIndexEnd-1:o},e.prototype.getChildStore=function(t){var e=this;return this.storeUtils.getChildStore(t,this,(function(t){return e.allRowNodes.find((function(e){return e.key==t}))}))},e.prototype.forEachChildStoreShallow=function(t){this.allRowNodes.forEach((function(e){var r=e.childStore;r&&t(r)}))},e.prototype.refreshAfterFilter=function(t){var e=this.storeUtils.isServerSideFilterOnServer(),r=this.storeUtils.isServerRefreshNeeded(this.parentRowNode,this.ssrmParams.rowGroupCols,t);if(!this.storeUtils.isServerSideOnlyRefreshFilteredGroups()||e&&r)return this.refreshStore(!0),void this.sortRowNodes();this.filterRowNodes(),this.sortRowNodes(),this.forEachChildStoreShallow((function(e){return e.refreshAfterFilter(t)}))},e.prototype.refreshAfterSort=function(t){var e=this.storeUtils.isServerSideSortOnServer(),r=this.storeUtils.isServerRefreshNeeded(this.parentRowNode,this.ssrmParams.rowGroupCols,t);if(this.storeUtils.isServerSideSortAllLevels()||e&&r)return this.refreshStore(!0),void this.filterRowNodes();this.filterRowNodes(),this.sortRowNodes(),this.forEachChildStoreShallow((function(e){return e.refreshAfterSort(t)}))},e.prototype.applyTransaction=function(t){switch(this.getState()){case gt.STATE_FAILED:return{status:mt.StoreLoadingFailed};case gt.STATE_LOADING:return{status:mt.StoreLoading};case gt.STATE_WAITING_TO_LOAD:return{status:mt.StoreWaitingToLoad}}var e=this.gridOptionsService.getCallback("isApplyServerSideTransaction");if(e&&!e({transaction:t,parentNode:this.parentRowNode,storeInfo:this.info,groupLevelInfo:this.info}))return{status:mt.Cancelled};var r={status:mt.Applied,remove:[],update:[],add:[]},n=[];return this.executeAdd(t,r),this.executeRemove(t,r,n),this.executeUpdate(t,r,n),this.filterAndSortNodes(),this.updateSelection(n),r},e.prototype.updateSelection=function(t){if(t.length>0){this.selectionService.setNodesSelected({newValue:!1,nodes:t,suppressFinishActions:!0,clearSelection:!1,source:"rowDataChanged"});var e={type:l.EVENT_SELECTION_CHANGED,source:"rowDataChanged"};this.eventService.dispatchEvent(e)}},e.prototype.executeAdd=function(t,e){var r=this,n=t.add,o=t.addIndex;u.missingOrEmpty(n)||("number"==typeof o&&o>=0?n.reverse().forEach((function(t){var n=r.createDataNode(t,o);e.add.push(n)})):n.forEach((function(t){var n=r.createDataNode(t);e.add.push(n)})))},e.prototype.executeRemove=function(t,e,r){var n=this,o=t.remove;if(null!=o){var i={};o.forEach((function(t){var o=n.lookupRowNode(t);o&&(o.isSelected()&&r.push(o),o.clearRowTopAndRowIndex(),i[o.id]=!0,delete n.allNodesMap[o.id],e.remove.push(o),n.nodeManager.removeNode(o))})),this.allRowNodes=this.allRowNodes.filter((function(t){return!i[t.id]}))}},e.prototype.executeUpdate=function(t,e,r){var n=this,o=t.update;null!=o&&o.forEach((function(t){var o=n.lookupRowNode(t);o&&(n.blockUtils.updateDataIntoRowNode(o,t),!o.selectable&&o.isSelected()&&r.push(o),e.update.push(o))}))},e.prototype.lookupRowNode=function(t){var e,r=this.gridOptionsService.getCallback("getRowId");if(null!=r){var n=this.level,o=this.parentRowNode.getGroupKeys(),i=r({data:t,parentKeys:o.length>0?o:void 0,level:n});if(!(e=this.allNodesMap[i]))return console.error("AG Grid: could not find row id="+i+", data item was not found for this id"),null}else if(!(e=this.allRowNodes.find((function(e){return e.data===t}))))return console.error("AG Grid: could not find data item as object was not found",t),null;return e},e.prototype.addStoreStates=function(t){t.push({suppressInfiniteScroll:!0,route:this.parentRowNode.getGroupKeys(),rowCount:this.allRowNodes.length,info:this.info}),this.forEachChildStoreShallow((function(e){return e.addStoreStates(t)}))},e.prototype.refreshStore=function(t){if(t){var e=this.nodesAfterSort?this.nodesAfterSort.length:1;this.initialiseRowNodes(e)}this.scheduleLoad(),this.fireStoreUpdatedEvent()},e.prototype.retryLoads=function(){this.getState()===gt.STATE_FAILED&&(this.initialiseRowNodes(1),this.scheduleLoad()),this.forEachChildStoreShallow((function(t){return t.retryLoads()}))},e.prototype.scheduleLoad=function(){this.setStateWaitingToLoad(),this.rowNodeBlockLoader.checkBlockToLoad()},e.prototype.fireStoreUpdatedEvent=function(){var t={type:l.EVENT_STORE_UPDATED};this.eventService.dispatchEvent(t)},e.prototype.getRowCount=function(){return this.nodesAfterSort.length},e.prototype.getTopLevelRowDisplayedIndex=function(t){return this.nodesAfterSort[t].rowIndex},e.prototype.isLastRowIndexKnown=function(){return this.getState()==gt.STATE_LOADED},e.prototype.getRowNodesInRange=function(t,e){var r=[],n=!1;return u.missing(t)&&(n=!0),this.nodesAfterSort.forEach((function(o){var i=o===t||o===e;(n||i)&&r.push(o),i&&(n=!n)})),n?[]:r},e.prototype.getStoreBounds=function(){return{topPx:this.topPx,heightPx:this.heightPx}},jD([n("ssrmStoreUtils")],e.prototype,"storeUtils",void 0),jD([n("ssrmBlockUtils")],e.prototype,"blockUtils",void 0),jD([n("columnModel")],e.prototype,"columnModel",void 0),jD([n("rowNodeBlockLoader")],e.prototype,"rowNodeBlockLoader",void 0),jD([n("rowNodeSorter")],e.prototype,"rowNodeSorter",void 0),jD([n("sortController")],e.prototype,"sortController",void 0),jD([n("selectionService")],e.prototype,"selectionService",void 0),jD([n("ssrmNodeManager")],e.prototype,"nodeManager",void 0),jD([n("filterManager")],e.prototype,"filterManager",void 0),jD([n("ssrmTransactionManager")],e.prototype,"transactionManager",void 0),jD([n("rowModel")],e.prototype,"serverSideRowModel",void 0),jD([i],e.prototype,"postConstruct",null),jD([F],e.prototype,"destroyRowNodes",null),e}(gt),BD=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),UD=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},HD=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},zD=function(t){function e(e,r,n){var o=t.call(this)||this;return o.loadingNodes=new Set,o.checkForLoadQueued=!1,o.loaderTimeout=void 0,o.nextBlockToLoad=void 0,o.parentNode=r,o.cache=e,o.storeParams=n,o}return BD(e,t),e.prototype.init=function(){var t=this;this.addManagedListener(this.rowNodeBlockLoader,bt.BLOCK_LOADED_EVENT,(function(){return t.queueLoadAction()}))},e.prototype.isRowLoading=function(t){return this.loadingNodes.has(t)},e.prototype.getBlockToLoad=function(){for(var t,e=this,r=this.api.getFirstDisplayedRow(),n=this.api.getLastDisplayedRow(),o=r;o<=n;o++){var i=this.cache.getNodeCachedByDisplayIndex(o);if(i){var a=this.cache.getNodes().getBy("node",i);if(a&&!this.isRowLoading(a.index)&&(i.__needsRefreshWhenVisible||i.stub&&!i.failedLoad))return this.getBlockStartIndexForIndex(a.index)}}var s=this.cache.getNodesToRefresh(),l=null,u=Number.MAX_SAFE_INTEGER;s.forEach((function(t){if(null!=t.rowIndex){if(!e.isRowLoading(t.rowIndex)){var o=Math.abs(r-t.rowIndex),i=Math.abs(t.rowIndex-n);o<u&&(l=t,u=o),i<u&&(l=t,u=i)}}else l=t}));var c=null===(t=this.cache.getNodes().getBy("node",l))||void 0===t?void 0:t.index;return null==c?void 0:this.getBlockStartIndexForIndex(c)},e.prototype.reset=function(){this.loadingNodes.clear(),clearTimeout(this.loaderTimeout),this.loaderTimeout=void 0},e.prototype.executeLoad=function(t,e){var r,n=this,o=this.cache.getSsrmParams(),i={startRow:t,endRow:e,rowGroupCols:o.rowGroupCols,valueCols:o.valueCols,pivotCols:o.pivotCols,pivotMode:o.pivotMode,groupKeys:this.parentNode.getGroupKeys(),filterModel:o.filterModel,sortModel:o.sortModel},a=function(){for(var r=0;r<e-t;r++)n.loadingNodes.delete(t+r)},s=function(r){n.rowNodeBlockLoader.loadComplete(),n.cache.onLoadSuccess(t,e-t,r),a(),n.queueLoadAction()},l=function(){n.rowNodeBlockLoader.loadComplete(),n.cache.onLoadFailed(t,e-t),a(),n.queueLoadAction()},u={request:i,successCallback:function(t,e){return s({rowData:t,rowCount:e})},success:s,failCallback:l,fail:l,parentNode:this.parentNode,api:this.api,columnApi:this.columnApi,context:this.gridOptionsService.context};!function(){for(var r=0;r<e-t;r++)n.loadingNodes.add(t+r)}(),null===(r=this.cache.getSsrmParams().datasource)||void 0===r||r.getRows(u)},e.prototype.getNextBlockToLoad=function(){var t=this.getBlockToLoad();return null!=t?[String(t),t+this.getBlockSize()]:null},e.prototype.queueLoadCheck=function(){var t=this;this.checkForLoadQueued||(this.checkForLoadQueued=!0,window.queueMicrotask((function(){t.checkForLoadQueued=!1,t.queueLoadAction()})))},e.prototype.queueLoadAction=function(){var t,e=this,r=this.getNextBlockToLoad();if(!r)return window.clearTimeout(this.loaderTimeout),this.loaderTimeout=void 0,void(this.nextBlockToLoad=void 0);if(!this.nextBlockToLoad||this.nextBlockToLoad[0]!==r[0]&&this.nextBlockToLoad[1]!==r[1]){this.nextBlockToLoad=r,window.clearTimeout(this.loaderTimeout);var n=HD(this.nextBlockToLoad,2),o=n[0],i=n[1],a=Number(o);this.loaderTimeout=window.setTimeout((function(){e.cache.isAlive()&&(e.loaderTimeout=void 0,e.attemptLoad(a,i),e.nextBlockToLoad=void 0)}),null!==(t=this.gridOptionsService.getNum("blockLoadDebounceMillis"))&&void 0!==t?t:0)}},e.prototype.attemptLoad=function(t,e){var r=this.rowNodeBlockLoader.getAvailableLoadingCount();null!=r&&0===r||(this.rowNodeBlockLoader.registerLoads(1),this.executeLoad(t,e),this.queueLoadAction())},e.prototype.getBlockSize=function(){return this.storeParams.cacheBlockSize||e.DEFAULT_BLOCK_SIZE},e.prototype.getBlockStartIndexForIndex=function(t){return t-t%this.getBlockSize()},e.prototype.getBlockBoundsForIndex=function(t){var e=this.getBlockStartIndexForIndex(t);return[e,e+this.getBlockSize()]},e.DEFAULT_BLOCK_SIZE=100,UD([n("gridApi")],e.prototype,"api",void 0),UD([n("columnApi")],e.prototype,"columnApi",void 0),UD([n("rowNodeBlockLoader")],e.prototype,"rowNodeBlockLoader",void 0),UD([i],e.prototype,"init",null),e}(r),WD=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(t.length<1)throw new Error("AG Grid: At least one index must be provided.");this.indexes=t,this.maps=new Map(this.indexes.map((function(t){return[t,new Map]})))}return t.prototype.getBy=function(t,e){var r=this.maps.get(t);if(!r)throw new Error("AG Grid: "+String(t)+" not found");return r.get(e)},t.prototype.set=function(t){var e=this;this.indexes.forEach((function(r){var n=e.maps.get(r);if(!n)throw new Error("AG Grid: "+String(r)+" not found");n.set(t[r],t)}))},t.prototype.delete=function(t){var e=this;this.indexes.forEach((function(r){var n=e.maps.get(r);if(!n)throw new Error("AG Grid: "+String(r)+" not found");n.delete(t[r])}))},t.prototype.clear=function(){this.maps.forEach((function(t){return t.clear()}))},t.prototype.getIterator=function(t){var e=this.maps.get(t);if(!e)throw new Error("AG Grid: "+String(t)+" not found");return e.values()},t.prototype.forEach=function(t){for(var e,r=this.getIterator(this.indexes[0]);(e=r.next())&&!e.done;)t(e.value)},t.prototype.find=function(t){for(var e,r=this.getIterator(this.indexes[0]);(e=r.next())&&!e.done;)if(t(e.value))return e.value},t.prototype.filter=function(t){for(var e,r=this.getIterator(this.indexes[0]),n=[];(e=r.next())&&!e.done;)t(e.value)&&n.push(e.value);return n},t}(),KD=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),XD=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},YD=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},qD=function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t},ZD=function(t){function e(e,r,n){var o=t.call(this)||this;return o.live=!0,o.removedNodeCache=new Map,o.store=e,o.numberOfRows=r,o.isLastRowKnown=!1,o.storeParams=n,o}return KD(e,t),e.prototype.init=function(){this.nodeMap=new WD("index","id","node"),this.nodeDisplayIndexMap=new Map,this.nodesToRefresh=new Set,this.defaultNodeIdPrefix=this.blockUtils.createNodeIdPrefix(this.store.getParentNode()),this.rowLoader=this.createManagedBean(new zD(this,this.store.getParentNode(),this.storeParams)),this.getRowIdFunc=this.gridOptionsService.getCallback("getRowId"),this.isMasterDetail=this.gridOptionsService.is("masterDetail")},e.prototype.destroyRowNodes=function(){var t=this;this.numberOfRows=0,this.nodeMap.forEach((function(e){return t.blockUtils.destroyRowNode(e.node)})),this.nodeMap.clear(),this.nodeDisplayIndexMap.clear(),this.nodesToRefresh.clear(),this.live=!1},e.prototype.getRowByDisplayIndex=function(t){var e,r,n,o;if(this.store.isDisplayIndexInStore(t)){var i=this.nodeDisplayIndexMap.get(t);if(i)return(i.stub||i.__needsRefreshWhenVisible)&&this.rowLoader.queueLoadCheck(),i;if(t===this.store.getDisplayIndexStart())return this.createStubNode(0,t);var a=this.nodeDisplayIndexMap.get(t-1);if(a){if(this.isMasterDetail&&a.master&&a.expanded)return a.detailNode;if(a.expanded&&(null===(e=a.childStore)||void 0===e?void 0:e.isDisplayIndexInStore(t)))return null===(r=a.childStore)||void 0===r?void 0:r.getRowUsingDisplayIndex(t);var s=this.nodeMap.getBy("node",a);return this.createStubNode(s.index+1,t)}var l=this.getSurroundingNodesByDisplayIndex(t);if(null==l){var u=this.store.getRowCount()-(this.store.getDisplayIndexEnd()-t);return this.createStubNode(u,t)}var c=l.previousNode,p=l.nextNode;if(c&&c.node.expanded&&(null===(n=c.node.childStore)||void 0===n?void 0:n.isDisplayIndexInStore(t)))return null===(o=c.node.childStore)||void 0===o?void 0:o.getRowUsingDisplayIndex(t);if(p){var d=p.node.rowIndex-t,h=p.index-d;return this.createStubNode(h,t)}var f=this.store.getRowCount()-(this.store.getDisplayIndexEnd()-t);return this.createStubNode(f,t)}},e.prototype.createStubNode=function(t,e){var r=this,n=this.store.getRowBounds(e),o=this.createRowAtIndex(t,null,(function(t){t.setRowIndex(e),t.setRowTop(n.rowTop),r.nodeDisplayIndexMap.set(e,t)}));return this.rowLoader.queueLoadCheck(),o},e.prototype.getRowByStoreIndex=function(t){var e;return null===(e=this.nodeMap.getBy("index",t))||void 0===e?void 0:e.node},e.prototype.skipDisplayIndexes=function(t,e,r){if(0!==t){var n=this.gridOptionsService.getRowHeightAsNumber();e.skip(t),r.value+=t*n}},e.prototype.setDisplayIndexes=function(t,e){this.nodeDisplayIndexMap.clear();var r={};this.nodeMap.forEach((function(t){r[t.index]=t.node}));var n=-1;for(var o in r){var i=r[o],a=Number(o),s=a-1-n;this.skipDisplayIndexes(s,t,e),this.blockUtils.setDisplayIndex(i,t,e),this.nodeDisplayIndexMap.set(i.rowIndex,i),n=a}var l=this.numberOfRows-1-n;this.skipDisplayIndexes(l,t,e),this.purgeExcessRows()},e.prototype.getRowCount=function(){return this.numberOfRows},e.prototype.setRowCount=function(t,e){if(t<0)throw new Error("AG Grid: setRowCount can only accept a positive row count.");this.numberOfRows=t,null!=e&&(this.isLastRowKnown=e,!1===e&&(this.numberOfRows+=1)),this.fireStoreUpdatedEvent()},e.prototype.getNodes=function(){return this.nodeMap},e.prototype.getNodeCachedByDisplayIndex=function(t){var e;return null!==(e=this.nodeDisplayIndexMap.get(t))&&void 0!==e?e:null},e.prototype.getNodesToRefresh=function(){return this.nodesToRefresh},e.prototype.getSurroundingNodesByDisplayIndex=function(t){var e,r;return this.nodeMap.forEach((function(n){t>n.node.rowIndex?(null==r||r.node.rowIndex<n.node.rowIndex)&&(r=n):(null==e||e.node.rowIndex>n.node.rowIndex)&&(e=n)})),r||e?{previousNode:r,nextNode:e}:null},e.prototype.getDisplayIndexFromStoreIndex=function(t){var e,r,n,o,i=this.nodeMap.getBy("index",t);if(i)return i.node.rowIndex;if(this.nodeMap.forEach((function(e){t>e.index?(null==o||o.index<e.index)&&(o=e):(null==n||n.index>e.index)&&(n=e)})),!n)return this.store.getDisplayIndexEnd()-(this.numberOfRows-t);if(!o)return this.store.getDisplayIndexStart()+t;var a=t-o.index;return(null!==(r=null===(e=o.node.childStore)||void 0===e?void 0:e.getDisplayIndexEnd())&&void 0!==r?r:o.node.rowIndex)+a},e.prototype.createRowAtIndex=function(t,e,r){var n,o,i=this.nodeMap.getBy("index",t);if(i){if((u=i.node).__needsRefreshWhenVisible=!1,this.doesNodeMatch(e,u))return this.blockUtils.updateDataIntoRowNode(u,e),this.nodesToRefresh.delete(u),u;if(null==this.getRowIdFunc&&u.hasChildren()&&u.expanded)return this.nodesToRefresh.delete(u),u;this.destroyRowAtIndex(t)}if(e&&null!=this.getRowIdFunc){var a=this.getRowId(e),s=a&&(null===(n=this.removedNodeCache)||void 0===n?void 0:n.get(a));if(s)return null===(o=this.removedNodeCache)||void 0===o||o.delete(a),this.blockUtils.updateDataIntoRowNode(s,e),this.nodeMap.set({id:s.id,node:s,index:t}),s;var l=this.nodeMap.getBy("id",a);if(l){this.nodeMap.delete(l);var u=l.node,c=l.index;return this.blockUtils.updateDataIntoRowNode(u,e),this.nodeMap.set({id:u.id,node:u,index:t}),this.nodesToRefresh.delete(u),this.rowLoader.getBlockStartIndexForIndex(c)===this.rowLoader.getBlockStartIndexForIndex(t)?u:(this.markBlockForVerify(c),u)}}var p=this.blockUtils.createRowNode(this.store.getRowDetails());if(null!=e){var d=this.getPrefixedId(this.store.getIdSequence().next());this.blockUtils.setDataIntoRowNode(p,e,d,void 0),this.blockUtils.checkOpenByDefault(p),this.nodeManager.addRowNode(p)}return this.nodeMap.set({id:p.id,node:p,index:t}),r&&r(p),p},e.prototype.getBlockStates=function(){var t=this,e={},r={};this.nodeMap.forEach((function(n){var o,i=n.node,a=n.index,s=t.rowLoader.getBlockStartIndexForIndex(a);i.stub||i.failedLoad||(e[s]=(null!==(o=e[s])&&void 0!==o?o:0)+1);var l="loaded";i.failedLoad?l="failed":t.rowLoader.isRowLoading(s)?l="loading":(t.nodesToRefresh.has(i)||i.stub)&&(l="needsLoading"),r[s]||(r[s]=new Set),r[s].add(l)}));var n={loading:4,failed:3,needsLoading:2,loaded:1},o=this.blockUtils.createNodeIdPrefix(this.store.getParentNode()),i={};return Object.entries(r).forEach((function(r){var a,s=YD(r,2),l=s[0],u=s[1],c=qD([],YD(u)).sort((function(t,e){var r,o;return(null!==(r=n[t])&&void 0!==r?r:0)-(null!==(o=n[e])&&void 0!==o?o:0)}))[0],p=Number(l)/t.rowLoader.getBlockSize(),d=o?o+"-"+p:String(p);i[d]={blockNumber:p,startRow:Number(l),endRow:Number(l)+t.rowLoader.getBlockSize(),pageStatus:c,loadedRowCount:null!==(a=e[l])&&void 0!==a?a:0}})),i},e.prototype.destroyRowAtIndex=function(t){var e=this.nodeMap.getBy("index",t);e&&(this.nodeMap.delete(e),this.nodeDisplayIndexMap.delete(e.node.rowIndex),e.node.hasChildren()&&this.nodesToRefresh.size>0?this.removedNodeCache.set(e.node.id,e.node):this.blockUtils.destroyRowNode(e.node),this.nodesToRefresh.delete(e.node))},e.prototype.getSsrmParams=function(){return this.store.getSsrmParams()},e.prototype.getPrefixedId=function(t){return this.defaultNodeIdPrefix?this.defaultNodeIdPrefix+"-"+t:t.toString()},e.prototype.markBlockForVerify=function(t){var e=YD(this.rowLoader.getBlockBoundsForIndex(t),2),r=e[0],n=e[1];this.nodeMap.filter((function(t){return t.index>=r&&t.index<n})).forEach((function(t){t.node.__needsRefreshWhenVisible=!0}))},e.prototype.doesNodeMatch=function(t,e){if(e.stub)return!1;if(null!=this.getRowIdFunc){var r=this.getRowId(t);return e.id===r}return e.data===t},e.prototype.purgeStubsOutsideOfViewport=function(){var t=this,e=this.api.getFirstDisplayedRow(),r=this.api.getLastDisplayedRow(),n=this.rowLoader.getBlockStartIndexForIndex(e),o=YD(this.rowLoader.getBlockBoundsForIndex(r),2);o[0];var i=o[1];this.nodeMap.forEach((function(e){t.rowLoader.isRowLoading(e.index)||e.node.failedLoad||e.node.stub&&(e.index<n||e.index>i)&&t.destroyRowAtIndex(e.index)}))},e.prototype.getBlocksDistanceFromRow=function(t,e){var r=this,n={};return t.forEach((function(t){var o=t.node,i=t.index,a=YD(r.rowLoader.getBlockBoundsForIndex(i),2),s=a[0],l=a[1];if(!(s in n)){var u,c=Math.abs(o.rowIndex-e),p=r.nodeMap.getBy("index",[l-1]);p&&(u=Math.abs(p.node.rowIndex-e));var d=null==u||c<u?c:u;n[s]=d}})),Object.entries(n)},e.prototype.purgeExcessRows=function(){var t,e=this;if(this.purgeStubsOutsideOfViewport(),null!=this.store.getDisplayIndexEnd()&&null!=this.storeParams.maxBlocksInCache){var r=this.api.getFirstDisplayedRow(),n=this.api.getLastDisplayedRow(),o=new Set,i=new Set;this.nodeMap.forEach((function(t){var a=t.index,s=t.node,l=e.rowLoader.getBlockStartIndexForIndex(a);o.add(l),s.rowIndex>=r&&s.rowIndex<=n&&i.add(l)}));var a=Math.max(i.size,null!==(t=this.storeParams.maxBlocksInCache)&&void 0!==t?t:0),s=o.size-a;if(!(s<=0)){var l=Number.MAX_SAFE_INTEGER,u=Number.MIN_SAFE_INTEGER;i.forEach((function(t){l>t&&(l=t),u<t&&(u=t)}));var c=this.nodeMap.filter((function(t){var r=t.node,n=t.index,o=e.rowLoader.getBlockStartIndexForIndex(n);return!(o>=l&&o<=u)&&!e.isNodeCached(r)}));if(0!==c.length){var p=r+(n-r)/2,d=this.getBlocksDistanceFromRow(c,p),h=this.rowLoader.getBlockSize();d.sort((function(t,e){return Math.sign(e[1]-t[1])}));for(var f=0;f<Math.min(s,d.length);f++)for(var v=Number(d[f][0]),y=v;y<v+h;y++){var g=this.nodeMap.getBy("index",y);g&&!this.isNodeCached(g.node)&&this.destroyRowAtIndex(y)}}}}},e.prototype.isNodeFocused=function(t){var e=this.focusService.getFocusCellToUseAfterRefresh();return!!e&&(null==e.rowPinned&&e.rowIndex===t.rowIndex)},e.prototype.isNodeCached=function(t){return t.isExpandable()&&t.expanded||this.isNodeFocused(t)},e.prototype.extractDuplicateIds=function(t){var e=this;if(null!=this.getRowIdFunc)return[];var r=new Set,n=new Set;return t.forEach((function(t){var o=e.getRowId(t);r.has(o)?n.add(o):r.add(o)})),qD([],YD(n))},e.prototype.onLoadSuccess=function(t,e,r){var n,o=this;if(this.live){var i=null!==(n=r.groupLevelInfo)&&void 0!==n?n:r.storeInfo;if(this.store.setStoreInfo(i),null!=this.getRowIdFunc){var a=this.extractDuplicateIds(r.rowData);if(a.length>0){var s=a.join(", ");return console.warn("AG Grid: Unable to display rows as duplicate row ids ("+s+") were returned by the getRowId callback. Please modify the getRowId callback to provide unique ids."),void this.onLoadFailed(t,e)}}r.pivotResultFields&&this.serverSideRowModel.generateSecondaryColumns(r.pivotResultFields);var l=this.nodesToRefresh.size>0;r.rowData.forEach((function(e,r){var n,i=t+r,a=o.nodeMap.getBy("index",i);if(!(null===(n=null==a?void 0:a.node)||void 0===n?void 0:n.stub))return a&&o.doesNodeMatch(e,a.node)?(o.blockUtils.updateDataIntoRowNode(a.node,e),o.nodesToRefresh.delete(a.node),void(a.node.__needsRefreshWhenVisible=!1)):void o.createRowAtIndex(i,e);o.createRowAtIndex(i,e)}));var u=0===this.nodesToRefresh.size;if(l&&u&&this.fireRefreshFinishedEvent(),null!=r.rowCount&&-1!==r.rowCount)this.numberOfRows=r.rowCount,this.isLastRowKnown=!0;else if(e>r.rowData.length)this.numberOfRows=t+r.rowData.length,this.isLastRowKnown=!0;else if(!this.isLastRowKnown){var c=t+r.rowData.length+1;c>this.numberOfRows&&(this.numberOfRows=c)}if(this.isLastRowKnown)this.nodeMap.filter((function(t){return t.index>=o.numberOfRows})).forEach((function(t){return o.destroyRowAtIndex(t.index)}));this.fireStoreUpdatedEvent()}},e.prototype.fireRefreshFinishedEvent=function(){var t=this;0===this.nodesToRefresh.size&&(this.removedNodeCache.forEach((function(e){t.blockUtils.destroyRowNode(e)})),this.removedNodeCache=new Map,this.store.fireRefreshFinishedEvent())},e.prototype.isLastRowIndexKnown=function(){return this.isLastRowKnown},e.prototype.onLoadFailed=function(t,e){var r;if(this.live){for(var n=this.nodesToRefresh.size>0,o=t;o<t+e&&o<this.getRowCount();o++){var i=(null!==(r=this.nodeMap.getBy("index",o))&&void 0!==r?r:{}).node;i&&this.nodesToRefresh.delete(i),i&&i.stub||(i&&!i.stub&&this.destroyRowAtIndex(o),i=this.createRowAtIndex(o)),i.__needsRefreshWhenVisible=!1,i.failedLoad=!0}var a=0===this.nodesToRefresh.size;n&&a&&this.fireRefreshFinishedEvent(),this.fireStoreUpdatedEvent()}},e.prototype.markNodesForRefresh=function(){var t=this;this.nodeMap.forEach((function(e){e.node.stub&&!e.node.failedLoad||t.nodesToRefresh.add(e.node)})),this.rowLoader.queueLoadCheck(),this.isLastRowKnown&&0===this.numberOfRows&&(this.numberOfRows=1,this.isLastRowKnown=!1,this.fireStoreUpdatedEvent())},e.prototype.isNodeInCache=function(t){return!!this.nodeMap.getBy("id",t)},e.prototype.fireStoreUpdatedEvent=function(){this.live&&this.store.fireStoreUpdatedEvent()},e.prototype.getRowId=function(t){if(null==this.getRowIdFunc)return null;var e=this.store.getRowDetails().level,r=this.store.getParentNode().getGroupKeys(),n=this.getRowIdFunc({data:t,parentKeys:r.length>0?r:void 0,level:e});return String(n)},e.prototype.updateRowNodes=function(t){var e=this;if(null==this.getRowIdFunc)throw new Error("AG Grid: Transactions can only be applied when row ids are supplied.");var r=[];return t.forEach((function(t){var n=e.getRowId(t),o=e.nodeMap.getBy("id",n);o&&(e.blockUtils.updateDataIntoRowNode(o.node,t),r.push(o.node))})),r},e.prototype.insertRowNodes=function(t,e){var r=this,n=this.store.getRowCount()-(this.store.getParentNode().sibling?1:0),o=null==e&&this.isLastRowKnown?n:e;if(null==o||n<o)return[];if(null==this.getRowIdFunc)throw new Error("AG Grid: Transactions can only be applied when row ids are supplied.");var i={};t.forEach((function(t){var e=r.getRowId(t);e&&r.isNodeInCache(e)||(i[e]=t)}));var a=Object.values(i),s=a.length;if(0===s)return[];var l=this.nodeMap.filter((function(t){return t.index>=o}));return l.forEach((function(t){return r.nodeMap.delete(t)})),l.forEach((function(t){r.nodeMap.set({node:t.node,index:t.index+s,id:t.id})})),this.numberOfRows+=s,a.map((function(t,e){return r.createRowAtIndex(o+e,t)}))},e.prototype.getOrderedNodeMap=function(){var t={};return this.nodeMap.forEach((function(e){return t[e.index]=e})),t},e.prototype.clearDisplayIndexes=function(){this.nodeDisplayIndexMap.clear()},e.prototype.removeRowNodes=function(t){if(null==this.getRowIdFunc)throw new Error("AG Grid: Transactions can only be applied when row ids are supplied.");var e=[],r=[],n=0,o=qD([],YD(t)),i=this.getOrderedNodeMap(),a=-1,s=function(t){a+=1;var s=i[t],u=o.findIndex((function(t){return t===s.id}));if(-1!==u)return o.splice(u,1),l.destroyRowAtIndex(Number(t)),e.push(s.node),n+=1,"continue";if(0===n)return"continue";var c=Number(t);a!==c&&r.push(s.node),l.nodeMap.delete(i[t]),l.nodeMap.set({id:s.id,node:s.node,index:c-n})},l=this;for(var u in i)s(u);return this.numberOfRows-=this.isLastRowIndexKnown()?t.length:n,o.length>0&&r.length>0&&(r.forEach((function(t){return t.__needsRefreshWhenVisible=!0})),this.rowLoader.queueLoadCheck()),e},XD([n("gridApi")],e.prototype,"api",void 0),XD([n("ssrmBlockUtils")],e.prototype,"blockUtils",void 0),XD([n("focusService")],e.prototype,"focusService",void 0),XD([n("ssrmNodeManager")],e.prototype,"nodeManager",void 0),XD([n("rowModel")],e.prototype,"serverSideRowModel",void 0),XD([i],e.prototype,"init",null),XD([F],e.prototype,"destroyRowNodes",null),e}(r),JD=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),$D=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},QD=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},tA=function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t},eA=function(t){function e(e,r,n){var o=t.call(this)||this;return o.idSequence=new I,o.ssrmParams=e,o.parentRowNode=n,o.storeParams=r,o.level=n.level+1,o.group=!!e.rowGroupCols&&o.level<e.rowGroupCols.length,o.leafGroup=!!e.rowGroupCols&&o.level===e.rowGroupCols.length-1,o.info={},o}return JD(e,t),e.prototype.init=function(){var t=1;if(0===this.level&&(t=this.storeUtils.getServerSideInitialRowCount()),this.cache=this.createManagedBean(new ZD(this,t,this.storeParams)),!this.gridOptionsService.is("treeData")&&this.group){var e=this.ssrmParams.rowGroupCols[this.level];this.groupField=e.field,this.rowGroupColumn=this.columnModel.getRowGroupColumns()[this.level]}},e.prototype.destroyRowNodes=function(){this.displayIndexStart=void 0,this.displayIndexEnd=void 0,this.destroyBean(this.cache)},e.prototype.applyRowData=function(t,e,r){this.cache.onLoadSuccess(e,r,t)},e.prototype.applyTransaction=function(t){var e,r,n,o=this,i=this.gridOptionsService.getCallback("getRowId");if(!i)return console.warn("AG Grid: getRowId callback must be implemented for transactions to work. Transaction was ignored."),{status:mt.Cancelled};var a=this.gridOptionsService.getCallback("isApplyServerSideTransaction");if(a&&!a({transaction:t,parentNode:this.parentRowNode,storeInfo:this.info,groupLevelInfo:this.info}))return{status:mt.Cancelled};var s=void 0;(null===(e=t.update)||void 0===e?void 0:e.length)&&(s=this.cache.updateRowNodes(t.update));var l=void 0;if(null===(r=t.add)||void 0===r?void 0:r.length){var u=t.addIndex;null!=u&&u<0&&(u=void 0),l=this.cache.insertRowNodes(t.add,u)}var c=void 0;if(null===(n=t.remove)||void 0===n?void 0:n.length){var p=t.remove.map((function(t){return i({level:o.level,parentKeys:o.parentRowNode.getGroupKeys(),data:t})})),d=tA([],QD(new Set(p)));c=this.cache.removeRowNodes(d)}return this.updateSelectionAfterTransaction(s,c),{status:mt.Applied,update:s,add:l,remove:c}},e.prototype.updateSelectionAfterTransaction=function(t,e){var r=[];null==t||t.forEach((function(t){t.isSelected()&&!t.selectable&&r.push(t)})),null==e||e.forEach((function(t){t.isSelected()&&r.push(t)})),r.length&&this.selectionService.setNodesSelected({newValue:!1,clearSelection:!1,nodes:r,source:"rowDataChanged"})},e.prototype.clearDisplayIndexes=function(){var t=this;this.displayIndexStart=void 0,this.displayIndexEnd=void 0,this.cache.getNodes().forEach((function(e){return t.blockUtils.clearDisplayIndex(e.node)})),this.parentRowNode.sibling&&this.blockUtils.clearDisplayIndex(this.parentRowNode.sibling),this.cache.clearDisplayIndexes()},e.prototype.getDisplayIndexStart=function(){return this.displayIndexStart},e.prototype.getDisplayIndexEnd=function(){return this.displayIndexEnd},e.prototype.getRowCount=function(){return this.parentRowNode.sibling?this.cache.getRowCount()+1:this.cache.getRowCount()},e.prototype.setRowCount=function(t,e){this.cache.setRowCount(t,e)},e.prototype.isDisplayIndexInStore=function(t){return 0!==this.cache.getRowCount()&&(this.displayIndexStart<=t&&t<this.getDisplayIndexEnd())},e.prototype.setDisplayIndexes=function(t,e){this.displayIndexStart=t.peek(),this.topPx=e.value,this.cache.setDisplayIndexes(t,e),this.parentRowNode.sibling&&this.blockUtils.setDisplayIndex(this.parentRowNode.sibling,t,e),this.displayIndexEnd=t.peek(),this.heightPx=e.value-this.topPx},e.prototype.forEachStoreDeep=function(t,e){void 0===e&&(e=new I),t(this,e.next()),this.cache.getNodes().forEach((function(r){var n=r.node.childStore;n&&n.forEachStoreDeep(t,e)}))},e.prototype.forEachNodeDeep=function(t,e){void 0===e&&(e=new I),this.cache.getNodes().forEach((function(r){t(r.node,e.next());var n=r.node.childStore;n&&n.forEachNodeDeep(t,e)}))},e.prototype.forEachNodeDeepAfterFilterAndSort=function(t,e,r){void 0===e&&(e=new I),void 0===r&&(r=!1);var n=this.cache.getOrderedNodeMap();for(var o in n){var i=n[o];t(i.node,e.next());var a=i.node.childStore;a&&a.forEachNodeDeepAfterFilterAndSort(t,e,r)}r&&this.parentRowNode.sibling&&t(this.parentRowNode.sibling,e.next())},e.prototype.retryLoads=function(){this.cache.getNodes().forEach((function(t){var e=t.node;e.failedLoad&&(e.failedLoad=!1,e.__needsRefreshWhenVisible=!0,e.stub=!0)})),this.forEachChildStoreShallow((function(t){return t.retryLoads()})),this.fireStoreUpdatedEvent()},e.prototype.getRowUsingDisplayIndex=function(t){return this.parentRowNode.sibling&&t===this.parentRowNode.sibling.rowIndex?this.parentRowNode.sibling:this.cache.getRowByDisplayIndex(t)},e.prototype.getRowBounds=function(t){var e;if(!this.isDisplayIndexInStore(t))return null;var r=this.cache.getNodeCachedByDisplayIndex(t);if(r&&(n=this.blockUtils.extractRowBounds(r,t)))return n;var n,o=null!==(e=this.cache.getSurroundingNodesByDisplayIndex(t))&&void 0!==e?e:{},i=o.previousNode,a=o.nextNode;if(i&&null!=(n=this.blockUtils.extractRowBounds(i.node,t)))return n;var s=this.gridOptionsService.getRowHeightAsNumber();if(a){var l=(a.node.rowIndex-t)*s;return{rowTop:a.node.rowTop-l,rowHeight:s}}return{rowTop:this.topPx+this.heightPx-(this.getDisplayIndexEnd()-t)*s,rowHeight:s}},e.prototype.isPixelInRange=function(t){return t>=this.topPx&&t<this.topPx+this.heightPx},e.prototype.getRowIndexAtPixel=function(t){if(t<this.topPx)return this.getDisplayIndexStart();if(t>=this.topPx+this.heightPx)return this.getDisplayIndexEnd()-1;var e=Number.MAX_SAFE_INTEGER,r=null,n=Number.MAX_SAFE_INTEGER,o=null;if(this.cache.getNodes().forEach((function(i){var a=i.node,s=Math.abs(t-a.rowTop);a.rowTop<t?s<e&&(e=s,r=a):s<n&&(n=s,o=a)})),o=o,r=r){var i=this.blockUtils.getIndexAtPixel(r,t);if(null!=i)return i}var a=this.gridOptionsService.getRowHeightAsNumber();if(o){var s=o.rowTop,l=Math.ceil((s-t)/a);return o.rowIndex-l}var u=this.topPx+this.heightPx,c=Math.floor((u-t)/a);return this.getDisplayIndexEnd()-c},e.prototype.getChildStore=function(t){var e=this;return this.storeUtils.getChildStore(t,this,(function(t){var r=e.cache.getNodes().find((function(e){return e.node.key==t}));return r?r.node:null}))},e.prototype.forEachChildStoreShallow=function(t){this.cache.getNodes().forEach((function(e){var r=e.node;r.childStore&&t(r.childStore)}))},e.prototype.refreshAfterSort=function(t){if(this.storeUtils.isServerSideSortAllLevels()||this.storeUtils.isServerRefreshNeeded(this.parentRowNode,this.ssrmParams.rowGroupCols,t)){var e=this.cache.getRowCount();return this.destroyBean(this.cache),this.cache=this.createManagedBean(new ZD(this,e,this.storeParams)),void this.fireStoreUpdatedEvent()}this.forEachChildStoreShallow((function(e){return e.refreshAfterSort(t)}))},e.prototype.refreshAfterFilter=function(t){!this.storeUtils.isServerSideOnlyRefreshFilteredGroups()||this.storeUtils.isServerRefreshNeeded(this.parentRowNode,this.ssrmParams.rowGroupCols,t)?this.refreshStore(!0):this.forEachChildStoreShallow((function(e){return e.refreshAfterFilter(t)}))},e.prototype.refreshStore=function(t){if(t)return this.destroyBean(this.cache),this.cache=this.createManagedBean(new ZD(this,1,this.storeParams)),void this.fireStoreUpdatedEvent();this.cache.markNodesForRefresh()},e.prototype.getTopLevelRowDisplayedIndex=function(t){var e=this.cache.getDisplayIndexFromStoreIndex(t);return null!=e?e:t},e.prototype.isLastRowIndexKnown=function(){return this.cache.isLastRowIndexKnown()},e.prototype.getRowNodesInRange=function(t,e){return u.missing(t),this.cache.getNodes().filter((function(r){var n=r.node;return n.rowIndex>=t.rowIndex&&n.rowIndex<=e.rowIndex})).map((function(t){return t.node}))},e.prototype.addStoreStates=function(t){t.push({suppressInfiniteScroll:!1,route:this.parentRowNode.getGroupKeys(),rowCount:this.getRowCount(),lastRowIndexKnown:this.isLastRowIndexKnown(),info:this.info,maxBlocksInCache:this.storeParams.maxBlocksInCache,cacheBlockSize:this.storeParams.cacheBlockSize}),this.forEachChildStoreShallow((function(e){return e.addStoreStates(t)}))},e.prototype.getIdSequence=function(){return this.idSequence},e.prototype.getParentNode=function(){return this.parentRowNode},e.prototype.getRowDetails=function(){return{field:this.groupField,group:this.group,leafGroup:this.leafGroup,level:this.level,parent:this.parentRowNode,rowGroupColumn:this.rowGroupColumn}},e.prototype.getSsrmParams=function(){return this.ssrmParams},e.prototype.setStoreInfo=function(t){t&&Object.assign(this.info,t)},e.prototype.fireStoreUpdatedEvent=function(){var t={type:l.EVENT_STORE_UPDATED};this.eventService.dispatchEvent(t)},e.prototype.fireRefreshFinishedEvent=function(){var t={type:l.EVENT_STORE_REFRESHED,route:this.parentRowNode.getRoute()};this.eventService.dispatchEvent(t)},e.prototype.getBlockStates=function(){return this.cache.getBlockStates()},e.prototype.getStoreBounds=function(){return{topPx:this.topPx,heightPx:this.heightPx}},$D([n("ssrmBlockUtils")],e.prototype,"blockUtils",void 0),$D([n("ssrmStoreUtils")],e.prototype,"storeUtils",void 0),$D([n("columnModel")],e.prototype,"columnModel",void 0),$D([n("selectionService")],e.prototype,"selectionService",void 0),$D([i],e.prototype,"init",null),$D([F],e.prototype,"destroyRowNodes",null),e}(r),rA=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),nA=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},oA=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},iA=function(t){function r(){var e=null!==t&&t.apply(this,arguments)||this;return e.onRowHeightChanged_debounced=u.debounce(e.onRowHeightChanged.bind(e),100),e.pauseStoreUpdateListening=!1,e.started=!1,e.managingPivotResultColumns=!1,e}return rA(r,t),r.prototype.ensureRowHeightsValid=function(){return!1},r.prototype.start=function(){this.started=!0;var t=this.gridOptionsService.get("serverSideDatasource");t&&this.setDatasource(t)},r.prototype.destroyDatasource=function(){this.datasource&&(this.datasource.destroy&&this.datasource.destroy(),this.rowRenderer.datasourceChanged(),this.datasource=void 0)},r.prototype.addEventListeners=function(){this.addManagedListener(this.eventService,l.EVENT_NEW_COLUMNS_LOADED,this.onColumnEverything.bind(this)),this.addManagedListener(this.eventService,l.EVENT_STORE_UPDATED,this.onStoreUpdated.bind(this));var t=this.resetRootStore.bind(this);this.addManagedListener(this.eventService,l.EVENT_COLUMN_VALUE_CHANGED,t),this.addManagedListener(this.eventService,l.EVENT_COLUMN_PIVOT_CHANGED,t),this.addManagedListener(this.eventService,l.EVENT_COLUMN_ROW_GROUP_CHANGED,t),this.addManagedListener(this.eventService,l.EVENT_COLUMN_PIVOT_MODE_CHANGED,t),this.addManagedPropertyListener("treeData",t),this.verifyProps()},r.prototype.verifyProps=function(){if(this.gridOptionsService.exists("initialGroupOrderComparator")){u.doOnce((function(){return console.warn("AG Grid: initialGroupOrderComparator cannot be used with Server Side Row Model. If using Full Store, then provide the rows to the grid in the desired sort order. If using Infinite Scroll, then sorting is done on the server side, nothing to do with the client.")}),"SSRM.InitialGroupOrderComparator")}if(this.gridOptionsService.isRowSelection()&&!this.gridOptionsService.exists("getRowId")){u.doOnce((function(){return console.warn("AG Grid: getRowId callback must be provided for Server Side Row Model selection to work correctly.")}),"SSRM.SelectionNeedsRowNodeIdFunc")}},r.prototype.setDatasource=function(t){this.started&&(this.destroyDatasource(),this.datasource=t,this.resetRootStore())},r.prototype.applyRowData=function(t,e,r){var n=this.getRootStore();if(n){var o=n.getChildStore(r);o&&(o instanceof eA?o.applyRowData(t,e,t.rowData.length):o instanceof VD&&o.processServerResult(t))}},r.prototype.isLastRowIndexKnown=function(){var t=this.getRootStore();return!!t&&t.isLastRowIndexKnown()},r.prototype.onColumnEverything=function(){if(this.storeParams){var t=this.columnsToValueObjects(this.columnModel.getRowGroupColumns()),e=this.columnsToValueObjects(this.columnModel.getValueColumns()),r=this.columnsToValueObjects(this.columnModel.getPivotColumns()),n=function(t){var e={};t.oldCols.forEach((function(t){return e[t.id]=t}));var r=t.newCols.every((function(t){var r=e[t.id];return r&&delete e[t.id],r&&r.field===t.field&&r.aggFunc===t.aggFunc})),n=!t.allowRemovedColumns&&!!Object.values(e).length;return r&&!n},o=!u.jsonEquals(this.storeParams.sortModel,this.sortListener.extractSortModel()),i=!n({oldCols:this.storeParams.rowGroupCols,newCols:t}),a=!n({oldCols:this.storeParams.pivotCols,newCols:r}),s=!!(null==t?void 0:t.length)&&!n({oldCols:this.storeParams.valueCols,newCols:e,allowRemovedColumns:!0});if(o||i||a||s)this.resetRootStore();else{var l=this.createStoreParams();this.storeParams.rowGroupCols=l.rowGroupCols,this.storeParams.pivotCols=l.pivotCols,this.storeParams.valueCols=l.valueCols}}else this.resetRootStore()},r.prototype.destroyRootStore=function(){this.rootNode&&this.rootNode.childStore&&(this.rootNode.childStore=this.destroyBean(this.rootNode.childStore),this.nodeManager.clear())},r.prototype.refreshAfterSort=function(t,e){this.storeParams&&(this.storeParams.sortModel=t);var r=this.getRootStore();r&&(r.refreshAfterSort(e),this.onStoreUpdated())},r.prototype.generateSecondaryColumns=function(t){var e=this.pivotColDefService.createColDefsFromFields(t);this.managingPivotResultColumns=!0,this.columnModel.setSecondaryColumns(e,"rowModelUpdated")},r.prototype.resetRootStore=function(){this.destroyRootStore(),this.rootNode=new L(this.beans),this.rootNode.group=!0,this.rootNode.level=-1,this.datasource&&(this.storeParams=this.createStoreParams(),this.rootNode.childStore=this.createBean(this.storeFactory.createStore(this.storeParams,this.rootNode)),this.updateRowIndexesAndBounds()),this.managingPivotResultColumns&&(this.columnModel.setSecondaryColumns(null),this.managingPivotResultColumns=!1);var t={type:l.EVENT_ROW_DATA_UPDATED};this.eventService.dispatchEvent(t),this.dispatchModelUpdated(!0)},r.prototype.columnsToValueObjects=function(t){var e=this;return t.map((function(t){return{id:t.getId(),aggFunc:t.getAggFunc(),displayName:e.columnModel.getDisplayNameForColumn(t,"model"),field:t.getColDef().field}}))},r.prototype.createStoreParams=function(){var t=this.columnsToValueObjects(this.columnModel.getRowGroupColumns()),e=this.columnsToValueObjects(this.columnModel.getValueColumns()),r=this.columnsToValueObjects(this.columnModel.getPivotColumns()),n=this.gridOptionsService.isGetRowHeightFunction();return{valueCols:e,rowGroupCols:t,pivotCols:r,pivotMode:this.columnModel.isPivotMode(),filterModel:this.filterManager.getFilterModel(),sortModel:this.sortListener.extractSortModel(),datasource:this.datasource,lastAccessedSequence:new I,dynamicRowHeight:n}},r.prototype.getParams=function(){return this.storeParams},r.prototype.dispatchModelUpdated=function(t){void 0===t&&(t=!1);var e={type:l.EVENT_MODEL_UPDATED,animate:!t,keepRenderedRows:!t,newPage:!1,newData:!1};this.eventService.dispatchEvent(e)},r.prototype.onStoreUpdated=function(){this.pauseStoreUpdateListening||(this.updateRowIndexesAndBounds(),this.dispatchModelUpdated())},r.prototype.onRowHeightChangedDebounced=function(){this.onRowHeightChanged_debounced()},r.prototype.onRowHeightChanged=function(){this.updateRowIndexesAndBounds(),this.dispatchModelUpdated()},r.prototype.updateRowIndexesAndBounds=function(){var t=this.getRootStore();t&&t.setDisplayIndexes(new I,{value:0})},r.prototype.retryLoads=function(){var t=this.getRootStore();t&&(t.retryLoads(),this.onStoreUpdated())},r.prototype.getRow=function(t){var e=this.getRootStore();if(e)return e.getRowUsingDisplayIndex(t)},r.prototype.expandAll=function(t){this.pauseStoreUpdateListening=!0,this.forEachNode((function(e){e.stub||e.hasChildren()&&e.setExpanded(t)})),this.pauseStoreUpdateListening=!1,this.onStoreUpdated()},r.prototype.refreshAfterFilter=function(t,e){this.storeParams&&(this.storeParams.filterModel=t);var r=this.getRootStore();r&&(r.refreshAfterFilter(e),this.onStoreUpdated())},r.prototype.getRootStore=function(){if(this.rootNode&&this.rootNode.childStore)return this.rootNode.childStore},r.prototype.getRowCount=function(){var t=this.getRootStore();return t?t.getDisplayIndexEnd():0},r.prototype.getTopLevelRowCount=function(){var t=this.getRootStore();return t?t.getRowCount():1},r.prototype.getTopLevelRowDisplayedIndex=function(t){var e=this.getRootStore();return e?e.getTopLevelRowDisplayedIndex(t):t},r.prototype.getRowBounds=function(t){var e=this.getRootStore();return e?e.getRowBounds(t):{rowTop:0,rowHeight:this.gridOptionsService.getRowHeightAsNumber()}},r.prototype.getBlockStates=function(){var t=this.getRootStore();if(t){var e={};return t.forEachStoreDeep((function(t){if(t instanceof VD){var r=t.getBlockStateJson(),n=r.id,o=r.state;e[n]=o}else{if(!(t instanceof eA))throw new Error("AG Grid: Unsupported store type");Object.entries(t.getBlockStates()).forEach((function(t){var r=oA(t,2),n=r[0],o=r[1];e[n]=o}))}})),e}},r.prototype.getRowIndexAtPixel=function(t){var e=this.getRootStore();return t<=0||!e?0:e.getRowIndexAtPixel(t)},r.prototype.isEmpty=function(){return!1},r.prototype.isRowsToRender=function(){return null!=this.getRootStore()&&this.getRowCount()>0},r.prototype.getType=function(){return"serverSide"},r.prototype.forEachNode=function(t){var e=this.getRootStore();e&&e.forEachNodeDeep(t)},r.prototype.forEachNodeAfterFilterAndSort=function(t,e){void 0===e&&(e=!1);var r=this.getRootStore();r&&r.forEachNodeDeepAfterFilterAndSort(t,void 0,e)},r.prototype.executeOnStore=function(t,e){var r=this.getRootStore();if(r){var n=r.getChildStore(t);n&&e(n)}},r.prototype.refreshStore=function(t){void 0===t&&(t={});var e=t.route?t.route:[];this.executeOnStore(e,(function(e){return e.refreshStore(1==t.purge)}))},r.prototype.getStoreState=function(){var t=[],e=this.getRootStore();return e&&e.addStoreStates(t),t},r.prototype.getNodesInRangeForSelection=function(t,e){if(!u.exists(t))return[];if(!e)return[t];var r=t.rowIndex,n=e.rowIndex;if(null===r||null===n)return[t];var o=[],i=oA([r,n].sort((function(t,e){return t-e})),2),a=i[0],s=i[1];return this.forEachNode((function(t){var e=t.rowIndex;null==e||t.stub||e>=a&&e<=s&&o.push(t)})),o.length!==s-a+1?[t]:o},r.prototype.getRowNode=function(t){var e;return this.forEachNode((function(r){r.id===t&&(e=r),r.detailNode&&r.detailNode.id===t&&(e=r.detailNode)})),e},r.prototype.isRowPresent=function(t){return!!this.getRowNode(t.id)},r.prototype.setRowCount=function(t,e){var r=this.getRootStore();if(r){if(r instanceof eA)return void r.setRowCount(t,e);console.error("AG Grid: Infinite scrolling must be enabled in order to set the row count.")}},nA([n("columnModel")],r.prototype,"columnModel",void 0),nA([n("filterManager")],r.prototype,"filterManager",void 0),nA([n("rowRenderer")],r.prototype,"rowRenderer",void 0),nA([n("ssrmSortService")],r.prototype,"sortListener",void 0),nA([n("ssrmNodeManager")],r.prototype,"nodeManager",void 0),nA([n("ssrmStoreFactory")],r.prototype,"storeFactory",void 0),nA([n("beans")],r.prototype,"beans",void 0),nA([E("pivotColDefService")],r.prototype,"pivotColDefService",void 0),nA([F],r.prototype,"destroyDatasource",null),nA([i],r.prototype,"addEventListeners",null),nA([F],r.prototype,"destroyRootStore",null),r=nA([e("rowModel")],r)}(r),aA=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),sA=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},lA=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return aA(r,t),r.prototype.loadFromDatasource=function(t){var e=t.storeParams,r=t.parentBlock,n=t.parentNode.getGroupKeys();if(e.datasource){var o={startRow:t.startRow,endRow:t.endRow,rowGroupCols:e.rowGroupCols,valueCols:e.valueCols,pivotCols:e.pivotCols,pivotMode:e.pivotMode,groupKeys:n,filterModel:e.filterModel,sortModel:e.sortModel},i={successCallback:t.successCallback,success:t.success,failCallback:t.failCallback,fail:t.fail,request:o,parentNode:t.parentNode,api:this.gridApi,columnApi:this.columnApi,context:this.gridOptionsService.context};window.setTimeout((function(){e.datasource&&r.isAlive()?e.datasource.getRows(i):t.failCallback()}),0)}},r.prototype.getChildStore=function(t,e,r){if(u.missingOrEmpty(t))return e;var n=r(t[0]);if(n){if(1===t.length&&!n.childStore){var o=this.serverSideRowModel.getParams();n.childStore=this.createBean(this.storeFactory.createStore(o,n))}var i=t.slice(1,t.length),a=n.childStore;return a?a.getChildStore(i):null}return null},r.prototype.isServerRefreshNeeded=function(t,e,r){if(r.valueColChanged||r.secondaryColChanged)return!0;var n=t.level+1;if(!(n<e.length))return!0;var o=e[n].id;return r.changedColumns.indexOf(o)>-1||this.columnModel.getAllGridColumns().filter((function(t){return t.getColDef().showRowGroup&&r.changedColumns.includes(t.getId())})).map((function(t){return t.getColDef().showRowGroup})).some((function(t){return!0===t||t===o}))},r.prototype.getServerSideInitialRowCount=function(){var t=this.gridOptionsService.getNum("serverSideInitialRowCount");return"number"==typeof t&&t>0?t:1},r.prototype.assertRowModelIsServerSide=function(t){return!!this.gridOptionsService.isRowModelType("serverSide")||(u.doOnce((function(){return console.warn("AG Grid: The '"+t+"' property can only be used with the Server Side Row Model.")}),t),!1)},r.prototype.assertNotTreeData=function(t){return!this.gridOptionsService.is("treeData")||(u.doOnce((function(){return console.warn("AG Grid: The '"+t+"' property cannot be used while using tree data.")}),t+"_TreeData"),!1)},r.prototype.isServerSideSortAllLevels=function(){return this.gridOptionsService.is("serverSideSortAllLevels")&&this.assertRowModelIsServerSide("serverSideSortAllLevels")},r.prototype.isServerSideOnlyRefreshFilteredGroups=function(){return this.gridOptionsService.is("serverSideOnlyRefreshFilteredGroups")&&this.assertRowModelIsServerSide("serverSideOnlyRefreshFilteredGroups")},r.prototype.isServerSideSortOnServer=function(){return this.gridOptionsService.is("serverSideSortOnServer")&&this.assertRowModelIsServerSide("serverSideSortOnServer")&&this.assertNotTreeData("serverSideSortOnServer")},r.prototype.isServerSideFilterOnServer=function(){return this.gridOptionsService.is("serverSideFilterOnServer")&&this.assertRowModelIsServerSide("serverSideFilterOnServer")&&this.assertNotTreeData("serverSideFilterOnServer")},sA([n("columnApi")],r.prototype,"columnApi",void 0),sA([n("columnModel")],r.prototype,"columnModel",void 0),sA([n("gridApi")],r.prototype,"gridApi",void 0),sA([n("rowModel")],r.prototype,"serverSideRowModel",void 0),sA([n("ssrmStoreFactory")],r.prototype,"storeFactory",void 0),r=sA([e("ssrmStoreUtils")],r)}(r),uA=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),cA=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},pA=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return uA(r,t),r.prototype.postConstruct=function(){this.rowHeight=this.gridOptionsService.getRowHeightAsNumber(),this.usingMasterDetail=this.gridOptionsService.is("masterDetail")},r.prototype.createRowNode=function(t){var e=new L(this.beans),r=null!=t.rowHeight?t.rowHeight:this.rowHeight;return e.setRowHeight(r),e.group=t.group,e.leafGroup=t.leafGroup,e.level=t.level,e.uiLevel=t.level,e.parent=t.parent,e.stub=!0,e.__needsRefreshWhenVisible=!1,e.group&&(e.expanded=!1,e.field=t.field,e.rowGroupColumn=t.rowGroupColumn),e},r.prototype.destroyRowNodes=function(t){var e=this;t&&t.forEach((function(t){return e.destroyRowNode(t)}))},r.prototype.destroyRowNode=function(t,e){void 0===e&&(e=!1),t.childStore&&!e&&(this.destroyBean(t.childStore),t.childStore=null),t.sibling&&!t.footer&&this.destroyRowNode(t.sibling,!1),t.clearRowTopAndRowIndex(),null!=t.id&&this.nodeManager.removeNode(t)},r.prototype.setTreeGroupInfo=function(t){t.updateHasChildren();var e=this.gridOptionsService.get("getServerSideGroupKey");t.hasChildren()&&null!=e&&(t.key=e(t.data)),t.hasChildren()||null==t.childStore||(this.destroyBean(t.childStore),t.childStore=null,t.expanded=!1)},r.prototype.setRowGroupInfo=function(t){t.key=this.valueService.getValue(t.rowGroupColumn,t),null!==t.key&&void 0!==t.key||u.doOnce((function(){console.warn("AG Grid: null and undefined values are not allowed for server side row model keys"),t.rowGroupColumn&&console.warn("column = "+t.rowGroupColumn.getId()),console.warn("data is ",t.data)}),"ServerSideBlock-CannotHaveNullOrUndefinedForKey"),this.beans.gridOptionsService.getGroupIncludeFooter()({node:t})&&(t.createFooter(),t.sibling&&(t.sibling.uiLevel=t.uiLevel+1))},r.prototype.setMasterDetailInfo=function(t){var e=this.gridOptionsService.get("isRowMaster");t.master=null==e||e(t.data)},r.prototype.updateDataIntoRowNode=function(t,e){if(t.updateData(e),this.gridOptionsService.is("treeData"))this.setTreeGroupInfo(t),this.setChildCountIntoRowNode(t);else if(t.group){if(this.setChildCountIntoRowNode(t),!t.footer)this.beans.gridOptionsService.getGroupIncludeFooter()({node:t})?t.sibling?t.sibling.updateData(e):t.createFooter():t.sibling&&t.destroyFooter()}else this.usingMasterDetail},r.prototype.setDataIntoRowNode=function(t,e,r,n){var o;t.stub=!1;var i=this.gridOptionsService.is("treeData");u.exists(e)?(t.setDataAndId(e,r),i?this.setTreeGroupInfo(t):t.group?this.setRowGroupInfo(t):this.usingMasterDetail&&this.setMasterDetailInfo(t)):(t.setDataAndId(void 0,void 0),t.key=null),(i||t.group)&&(this.setGroupDataIntoRowNode(t),this.setChildCountIntoRowNode(t)),u.exists(e)&&(t.setRowHeight(this.gridOptionsService.getRowHeightForNode(t,!1,n).height),null===(o=t.sibling)||void 0===o||o.setRowHeight(this.gridOptionsService.getRowHeightForNode(t.sibling,!1,n).height))},r.prototype.setChildCountIntoRowNode=function(t){var e=this.gridOptionsService.get("getChildCount");e&&t.setAllChildrenCount(e(t.data))},r.prototype.setGroupDataIntoRowNode=function(t){var e=this,r=this.columnModel.getGroupDisplayColumns(),n=this.gridOptionsService.is("treeData");r.forEach((function(r){if(null==t.groupData&&(t.groupData={}),n)t.groupData[r.getColId()]=t.key;else if(r.isRowGroupDisplayed(t.rowGroupColumn.getId())){var o=e.valueService.getValue(t.rowGroupColumn,t);t.groupData[r.getColId()]=o}}))},r.prototype.clearDisplayIndex=function(t){(t.clearRowTopAndRowIndex(),t.hasChildren()&&u.exists(t.childStore))&&t.childStore.clearDisplayIndexes();t.master&&t.detailNode&&t.detailNode.clearRowTopAndRowIndex()},r.prototype.setDisplayIndex=function(t,e,r){if((t.setRowIndex(e.next()),t.setRowTop(r.value),r.value+=t.rowHeight,!t.footer)&&(t.master&&(t.expanded&&t.detailNode?(t.detailNode.setRowIndex(e.next()),t.detailNode.setRowTop(r.value),r.value+=t.detailNode.rowHeight):t.detailNode&&t.detailNode.clearRowTopAndRowIndex()),t.hasChildren()&&u.exists(t.childStore))){var n=t.childStore;t.expanded?n.setDisplayIndexes(e,r):n.clearDisplayIndexes()}},r.prototype.binarySearchForDisplayIndex=function(t,e){var r=0,n=e.length-1;if(u.missing(n)||u.missing(r))console.warn("AG Grid: error: topPointer = "+n+", bottomPointer = "+r);else for(;;){var o=Math.floor((r+n)/2),i=e[o];if(i.rowIndex===t)return i;var a=i.master&&i.expanded,s=i.detailNode;if(a&&s&&s.rowIndex===t)return i.detailNode;var l=i.childStore;if(i.expanded&&l&&l.isDisplayIndexInStore(t))return l.getRowUsingDisplayIndex(t);if(i.rowIndex<t)r=o+1;else{if(!(i.rowIndex>t))return void console.warn("AG Grid: error: unable to locate rowIndex = "+t+" in cache");n=o-1}}},r.prototype.extractRowBounds=function(t,e){var r=function(t){return{rowHeight:t.rowHeight,rowTop:t.rowTop}};if(t.rowIndex===e)return r(t);if(t.hasChildren()&&t.expanded&&u.exists(t.childStore)){var n=t.childStore;if(n.isDisplayIndexInStore(e))return n.getRowBounds(e)}else if(t.master&&t.expanded&&u.exists(t.detailNode)&&t.detailNode.rowIndex===e)return r(t.detailNode)},r.prototype.getIndexAtPixel=function(t,e){if(t.isPixelInRange(e))return t.rowIndex;var r=t.master&&t.expanded,n=t.detailNode;if(r&&n&&n.isPixelInRange(e))return t.detailNode.rowIndex;if(t.hasChildren()&&t.expanded&&u.exists(t.childStore)){var o=t.childStore;if(o.isPixelInRange(e))return o.getRowIndexAtPixel(e)}return null},r.prototype.createNodeIdPrefix=function(t){for(var e=[],r=t;r&&r.level>=0;)""===r.key?e.push("ag-Grid-MissingKey"):e.push(r.key),r=r.parent;if(e.length>0)return e.reverse().join("-")},r.prototype.checkOpenByDefault=function(t){if(t.isExpandable()){var e=this.gridOptionsService.getCallback("isServerSideGroupOpenByDefault");if(e)e({data:t.data,rowNode:t})&&window.setTimeout((function(){return t.setExpanded(!0)}),0)}},cA([n("valueService")],r.prototype,"valueService",void 0),cA([n("columnModel")],r.prototype,"columnModel",void 0),cA([n("ssrmNodeManager")],r.prototype,"nodeManager",void 0),cA([n("beans")],r.prototype,"beans",void 0),cA([i],r.prototype,"postConstruct",null),r=cA([e("ssrmBlockUtils")],r)}(r),dA=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},hA=function(){function t(){this.rowNodes={}}return t.prototype.addRowNode=function(t){var e=t.id;this.rowNodes[e]&&(console.warn("AG Grid: Duplicate node id "+t.id+". Row ID's are provided via the getRowId() callback. Please modify the getRowId() callback code to provide unique row id values."),console.warn("first instance",this.rowNodes[e].data),console.warn("second instance",t.data)),this.rowNodes[e]=t},t.prototype.removeNode=function(t){var e=t.id;this.rowNodes[e]&&(this.rowNodes[e]=void 0)},t.prototype.clear=function(){this.rowNodes={}},dA([F],t.prototype,"clear",null),t=dA([e("ssrmNodeManager")],t)}(),fA=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),vA=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},yA=function(t){function r(){var e=null!==t&&t.apply(this,arguments)||this;return e.asyncTransactions=[],e}return fA(r,t),r.prototype.postConstruct=function(){this.gridOptionsService.isRowModelType("serverSide")},r.prototype.applyTransactionAsync=function(t,e){null==this.asyncTransactionsTimeout&&this.scheduleExecuteAsync(),this.asyncTransactions.push({transaction:t,callback:e})},r.prototype.scheduleExecuteAsync=function(){var t=this,e=this.gridOptionsService.getAsyncTransactionWaitMillis();this.asyncTransactionsTimeout=window.setTimeout((function(){t.executeAsyncTransactions()}),e)},r.prototype.executeAsyncTransactions=function(){var t=this;if(this.asyncTransactions){var e=[],r=[],n=[],o=!1;if(this.asyncTransactions.forEach((function(i){var a;t.serverSideRowModel.executeOnStore(i.transaction.route,(function(t){a=t.applyTransaction(i.transaction)})),null==a&&(a={status:mt.StoreNotFound}),r.push(a),a.status==mt.StoreLoading?n.push(i):(i.callback&&e.push((function(){return i.callback(a)})),a.status===mt.Applied&&(o=!0))})),e.length>0&&window.setTimeout((function(){e.forEach((function(t){return t()}))}),0),this.asyncTransactionsTimeout=void 0,this.asyncTransactions=n,o&&(this.valueCache.onDataChanged(),this.eventService.dispatchEvent({type:l.EVENT_STORE_UPDATED})),r.length>0){var i={type:l.EVENT_ASYNC_TRANSACTIONS_FLUSHED,results:r};this.eventService.dispatchEvent(i)}}},r.prototype.flushAsyncTransactions=function(){null!=this.asyncTransactionsTimeout&&clearTimeout(this.asyncTransactionsTimeout),this.executeAsyncTransactions()},r.prototype.applyTransaction=function(t){var e;if(this.serverSideRowModel.executeOnStore(t.route,(function(r){e=r.applyTransaction(t)})),e){if(this.valueCache.onDataChanged(),e.remove){var r=e.remove.map((function(t){return t.id}));this.selectionService.deleteSelectionStateFromParent(t.route||[],r)}return this.eventService.dispatchEvent({type:l.EVENT_STORE_UPDATED}),e}return{status:mt.StoreNotFound}},vA([n("rowNodeBlockLoader")],r.prototype,"rowNodeBlockLoader",void 0),vA([n("valueCache")],r.prototype,"valueCache",void 0),vA([n("rowModel")],r.prototype,"serverSideRowModel",void 0),vA([n("rowRenderer")],r.prototype,"rowRenderer",void 0),vA([n("selectionService")],r.prototype,"selectionService",void 0),vA([i],r.prototype,"postConstruct",null),r=vA([e("ssrmTransactionManager")],r)}(r),gA=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),mA=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},bA=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return gA(r,t),r.prototype.postConstruct=function(){this.gridOptionsService.isRowModelType("serverSide")&&this.addManagedListener(this.eventService,l.EVENT_ROW_GROUP_OPENED,this.onRowGroupOpened.bind(this))},r.prototype.onRowGroupOpened=function(t){var e=t.node;if(e.expanded){if(e.master)this.createDetailNode(e);else if(u.missing(e.childStore)){var r=this.serverSideRowModel.getParams();e.childStore=this.createBean(this.storeFactory.createStore(r,e))}}else this.gridOptionsService.is("purgeClosedRowNodes")&&u.exists(e.childStore)&&(e.childStore=this.destroyBean(e.childStore));var n={type:l.EVENT_STORE_UPDATED};this.eventService.dispatchEvent(n)},r.prototype.createDetailNode=function(t){if(u.exists(t.detailNode))return t.detailNode;var e=new L(this.beans);e.detail=!0,e.selectable=!1,e.parent=t,u.exists(t.id)&&(e.id="detail_"+t.id),e.data=t.data,e.level=t.level+1;var r=this.gridOptionsService.getRowHeightForNode(e).height;return e.rowHeight=r||200,t.detailNode=e,e},mA([n("rowModel")],r.prototype,"serverSideRowModel",void 0),mA([n("ssrmStoreFactory")],r.prototype,"storeFactory",void 0),mA([n("beans")],r.prototype,"beans",void 0),mA([i],r.prototype,"postConstruct",null),r=mA([e("ssrmExpandListener")],r)}(r),CA=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),SA=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},wA=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return CA(r,t),r.prototype.postConstruct=function(){this.gridOptionsService.isRowModelType("serverSide")&&this.addManagedListener(this.eventService,l.EVENT_SORT_CHANGED,this.onSortChanged.bind(this))},r.prototype.extractSortModel=function(){var t=this.sortController.getSortModel();return this.gridOptionsService.is("treeData")||(this.replaceAutoGroupColumnWithActualRowGroupColumns(t),this.removeMultiColumnPrefixOnColumnIds(t)),t},r.prototype.removeMultiColumnPrefixOnColumnIds=function(t){if(this.gridOptionsService.isGroupMultiAutoColumn())for(var e=Ct+"-",r=0;r<t.length;++r)t[r].colId.indexOf(e)>-1&&(t[r].colId=t[r].colId.substr(e.length))},r.prototype.replaceAutoGroupColumnWithActualRowGroupColumns=function(t){var e=t.find((function(t){return t.colId==Ct}));if(e){var r=t.indexOf(e);u.removeFromArray(t,e);var n=this.columnModel.getRowGroupColumns().filter((function(e){return 0==t.filter((function(t){return t.colId===e.getColId()})).length})).map((function(t){return{colId:t.getId(),sort:e.sort}}));u.insertArrayIntoArray(t,n,r)}},r.prototype.onSortChanged=function(){var t=this.serverSideRowModel.getParams();if(t){var e=this.extractSortModel(),r=t.sortModel,n=this.findChangedColumnsInSort(e,r),o={valueColChanged:this.listenerUtils.isSortingWithValueColumn(n),secondaryColChanged:this.listenerUtils.isSortingWithSecondaryColumn(n),changedColumns:n};this.serverSideRowModel.refreshAfterSort(e,o)}},r.prototype.findChangedColumnsInSort=function(t,e){var r=[];[t,e].forEach((function(t){if(t){var e=t.map((function(t){return t.colId}));r=r.concat(e)}}));return r.filter((function(r){var n=e.find((function(t){return t.colId===r})),o=t.find((function(t){return t.colId===r}));return function(t,e){return(t?t.sort:null)!==(e?e.sort:null)}(n,o)||function(r,n){return(r?e.indexOf(r):-1)!==(n?t.indexOf(n):-1)}(n,o)}))},SA([n("sortController")],r.prototype,"sortController",void 0),SA([n("columnModel")],r.prototype,"columnModel",void 0),SA([n("rowModel")],r.prototype,"serverSideRowModel",void 0),SA([n("ssrmListenerUtils")],r.prototype,"listenerUtils",void 0),SA([i],r.prototype,"postConstruct",null),r=SA([e("ssrmSortService")],r)}(r),xA=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),OA=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},EA=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return xA(r,t),r.prototype.postConstruct=function(){this.gridOptionsService.isRowModelType("serverSide")&&this.addManagedListener(this.eventService,l.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this))},r.prototype.onFilterChanged=function(){var t=this.serverSideRowModel.getParams();if(t){var e=this.filterManager.getFilterModel(),r=t?t.filterModel:{},n=this.findChangedColumns(e,r),o={valueColChanged:this.listenerUtils.isSortingWithValueColumn(n),secondaryColChanged:this.listenerUtils.isSortingWithSecondaryColumn(n),changedColumns:n};this.serverSideRowModel.refreshAfterFilter(e,o)}},r.prototype.findChangedColumns=function(t,e){var r={};Object.keys(t).forEach((function(t){return r[t]=!0})),Object.keys(e).forEach((function(t){return r[t]=!0}));var n=[];return Object.keys(r).forEach((function(r){JSON.stringify(t[r])!=JSON.stringify(e[r])&&n.push(r)})),n},OA([n("rowModel")],r.prototype,"serverSideRowModel",void 0),OA([n("filterManager")],r.prototype,"filterManager",void 0),OA([n("ssrmListenerUtils")],r.prototype,"listenerUtils",void 0),OA([i],r.prototype,"postConstruct",null),r=OA([e("ssrmFilterListener")],r)}(r),TA=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},PA=function(){function t(){}return t.prototype.createStore=function(t,e){var r=this.getStoreParams(t,e);return new(r.suppressInfiniteScroll?VD:eA)(t,r,e)},t.prototype.getStoreParams=function(t,e){var r=this.getLevelSpecificParams(e),n=this.isInfiniteScroll(r);return{suppressInfiniteScroll:!n,cacheBlockSize:this.getBlockSize(n,r),maxBlocksInCache:this.getMaxBlocksInCache(n,t,r)}},t.prototype.getMaxBlocksInCache=function(t,e,r){if(t){var n=r&&null!=r.maxBlocksInCache?r.maxBlocksInCache:this.gridOptionsService.getNum("maxBlocksInCache");if(null!=n&&n>=0)if(e.dynamicRowHeight){u.doOnce((function(){return console.warn("AG Grid: Server Side Row Model does not support Dynamic Row Height and Cache Purging. Either a) remove getRowHeight() callback or b) remove maxBlocksInCache property. Purging has been disabled.")}),"storeFactory.maxBlocksInCache.dynamicRowHeight")}else{if(!this.columnModel.isAutoRowHeightActive())return n;u.doOnce((function(){return console.warn("AG Grid: Server Side Row Model does not support Auto Row Height and Cache Purging. Either a) remove colDef.autoHeight or b) remove maxBlocksInCache property. Purging has been disabled.")}),"storeFactory.maxBlocksInCache.autoRowHeightActive")}}},t.prototype.getBlockSize=function(t,e){if(t){var r=e&&null!=e.cacheBlockSize?e.cacheBlockSize:this.gridOptionsService.getNum("cacheBlockSize");return null!=r&&r>0?r:100}},t.prototype.getLevelSpecificParams=function(t){var e=this.gridOptionsService.getCallback("getServerSideGroupLevelParams");if(e){var r=e({level:t.level+1,parentRowNode:t.level>=0?t:void 0,rowGroupColumns:this.columnModel.getRowGroupColumns(),pivotColumns:this.columnModel.getPivotColumns(),pivotMode:this.columnModel.isPivotMode()});return null!=r.storeType&&(r.suppressInfiniteScroll="partial"!==r.storeType),r}},t.prototype.isInfiniteScroll=function(t){return!(t&&null!=t.suppressInfiniteScroll?t.suppressInfiniteScroll:this.isSuppressServerSideInfiniteScroll())},t.prototype.isSuppressServerSideInfiniteScroll=function(){return this.gridOptionsService.is("suppressServerSideInfiniteScroll")},TA([n("gridOptionsService")],t.prototype,"gridOptionsService",void 0),TA([n("columnModel")],t.prototype,"columnModel",void 0),t=TA([e("ssrmStoreFactory")],t)}(),DA=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},AA=function(){function t(){}return t.prototype.isSortingWithValueColumn=function(t){for(var e=this.columnModel.getValueColumns().map((function(t){return t.getColId()})),r=0;r<t.length;r++)if(e.indexOf(t[r])>-1)return!0;return!1},t.prototype.isSortingWithSecondaryColumn=function(t){if(!this.columnModel.getSecondaryColumns())return!1;for(var e=this.columnModel.getSecondaryColumns().map((function(t){return t.getColId()})),r=0;r<t.length;r++)if(e.indexOf(t[r])>-1)return!0;return!1},DA([n("columnModel")],t.prototype,"columnModel",void 0),t=DA([e("ssrmListenerUtils")],t)}(),MA=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),_A=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},RA=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},kA=function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t},FA=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.selectedState={selectAll:!1,toggledNodes:new Set},e.lastSelected=null,e.selectAllUsed=!1,e.selectedNodes={},e}return MA(e,t),e.prototype.init=function(){var t=this;this.rowSelection=this.gridOptionsService.get("rowSelection"),this.addManagedPropertyListener("rowSelection",(function(e){t.rowSelection=e.currentValue}))},e.prototype.getSelectedState=function(){return{selectAll:this.selectedState.selectAll,toggledNodes:kA([],RA(this.selectedState.toggledNodes))}},e.prototype.setSelectedState=function(t){var e={selectAll:!1,toggledNodes:new Set};"object"==typeof t?"selectAll"in t&&"boolean"==typeof t.selectAll?(e.selectAll=t.selectAll,"toggledNodes"in t&&Array.isArray(t.toggledNodes)?(t.toggledNodes.forEach((function(t){"string"==typeof t?e.toggledNodes.add(t):console.warn("AG Grid: Provided ids must be of string type. Invalid id provided: "+t)})),this.selectedState=e):console.error("AG Grid: `toggledNodes` must be an array of string ids.")):console.error("AG Grid: Select all status should be of boolean type."):console.error("AG Grid: The provided selection state should be an object.")},e.prototype.deleteSelectionStateFromParent=function(t,e){var r=this;if(0===this.selectedState.toggledNodes.size)return!1;var n=!1;return e.forEach((function(t){r.selectedState.toggledNodes.delete(t)&&(n=!0)})),n},e.prototype.setNodesSelected=function(t){var e,r=this;if(0===t.nodes.length)return 0;var n=t.clearSelection&&t.newValue&&!t.rangeSelect;if("multiple"!==this.rowSelection||n){if(t.nodes.length>1)throw new Error("AG Grid: cannot select multiple rows when rowSelection is set to 'single'");var o=t.nodes[0];return t.newValue?(this.selectedNodes=((e={})[o.id]=o,e),this.selectedState={selectAll:!1,toggledNodes:new Set([o.id])}):(this.selectedNodes={},this.selectedState={selectAll:!1,toggledNodes:new Set}),this.lastSelected=o.id,1}var i=function(e){t.newValue?r.selectedNodes[e.id]=e:delete r.selectedNodes[e.id];var n=e.selectable;t.newValue===r.selectedState.selectAll||!n?r.selectedState.toggledNodes.delete(e.id):r.selectedState.toggledNodes.add(e.id)};if(t.rangeSelect&&this.lastSelected){if(t.nodes.length>1)throw new Error("AG Grid: cannot select multiple rows when using rangeSelect");o=t.nodes[0];var a=this.rowModel.getRowNode(this.lastSelected);return this.rowModel.getNodesInRangeForSelection(o,null!=a?a:null).forEach(i),this.lastSelected=o.id,1}return t.nodes.forEach(i),this.lastSelected=t.nodes[t.nodes.length-1].id,1},e.prototype.processNewRow=function(t){this.selectedNodes[t.id]&&(this.selectedNodes[t.id]=t)},e.prototype.isNodeSelected=function(t){var e=this.selectedState.toggledNodes.has(t.id);return this.selectedState.selectAll?!e:e},e.prototype.getSelectedNodes=function(){return this.selectAllUsed&&console.warn("AG Grid: getSelectedNodes and getSelectedRows functions cannot be used with select all functionality with the server-side row model.\n                Use `api.getServerSideSelectionState()` instead."),Object.values(this.selectedNodes)},e.prototype.getSelectedRows=function(){return this.getSelectedNodes().map((function(t){return t.data}))},e.prototype.getSelectionCount=function(){return this.selectedState.selectAll?-1:this.selectedState.toggledNodes.size},e.prototype.clearOtherNodes=function(t,e){var r=this.selectedState.selectAll?1:this.selectedState.toggledNodes.size-1;this.selectedState={selectAll:!1,toggledNodes:new Set([t.id])},this.rowModel.forEachNode((function(r){r!==t&&r.selectThisNode(!1,void 0,e)}));var n={type:l.EVENT_SELECTION_CHANGED,source:e};return this.eventService.dispatchEvent(n),r},e.prototype.isEmpty=function(){var t;return!this.selectedState.selectAll&&!(null===(t=this.selectedState.toggledNodes)||void 0===t?void 0:t.size)},e.prototype.selectAllRowNodes=function(t){this.selectedState={selectAll:!0,toggledNodes:new Set},this.selectedNodes={},this.selectAllUsed=!0},e.prototype.deselectAllRowNodes=function(t){this.selectedState={selectAll:!1,toggledNodes:new Set},this.selectedNodes={}},e.prototype.getSelectAllState=function(t,e){return this.selectedState.selectAll?!(this.selectedState.toggledNodes.size>0)||null:this.selectedState.toggledNodes.size>0&&null},_A([n("rowModel")],e.prototype,"rowModel",void 0),_A([i],e.prototype,"init",null),e}(r),IA=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),LA=function(){return(LA=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},NA=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},GA=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(t,n[o])&&(r[n[o]]=t[n[o]])}return r},jA=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},VA=function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t},BA=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.selectedState={selectAllChildren:!1,toggledNodes:new Map},e.lastSelected=null,e}return IA(e,t),e.prototype.init=function(){var t=this;this.addManagedListener(this.eventService,l.EVENT_MODEL_UPDATED,(function(){return t.removeRedundantState()})),this.addManagedListener(this.eventService,l.EVENT_COLUMN_ROW_GROUP_CHANGED,(function(){return t.selectionService.reset()}))},e.prototype.getSelectedState=function(){var t=this,e=function(r,n,o){var i={nodeId:o};if(n<=t.columnModel.getRowGroupColumns().length&&(i.selectAllChildren=r.selectAllChildren),r.toggledNodes.size){var a=[];r.toggledNodes.forEach((function(t,r){var o=e(t,n+1,r);a.push(o)})),i.toggledNodes=a}return i};return e(this.selectedState,0)},e.prototype.setSelectedState=function(t){var e=function(t,r){var n,o;if("object"!=typeof t)throw new Error("AG Grid: Each provided state object must be an object.");if("selectAllChildren"in t&&"boolean"!=typeof t.selectAllChildren)throw new Error("AG Grid: `selectAllChildren` must be a boolean value or undefined.");if("toggledNodes"in t){if(!Array.isArray(t.toggledNodes))throw new Error("AG Grid: `toggledNodes` must be an array.");if(!t.toggledNodes.every((function(t){return"object"==typeof t&&"nodeId"in t&&"string"==typeof t.nodeId})))throw new Error("AG Grid: Every `toggledNode` requires an associated string id.")}var i=null!==(n=t.selectAllChildren)&&void 0!==n?n:!r,a=null===(o=t.toggledNodes)||void 0===o?void 0:o.map((function(t){return[t.nodeId,e(t,i)]}));if(null==a?void 0:a.some((function(t){var e=jA(t,2);e[0];var r=e[1];return i===r.selectAllChildren&&0===r.toggledNodes.size})))throw new Error("\n                    AG Grid: AG Grid: Row selection state could not be parsed due to invalid data. Ensure all child state has toggledNodes or does not conform with the parent rule.\n                    Please rebuild the selection state and reapply it.\n                ");return{selectAllChildren:i,toggledNodes:new Map(a)}};try{this.selectedState=e(t,!!t.selectAllChildren)}catch(t){console.error(t.message)}},e.prototype.deleteSelectionStateFromParent=function(t,e){for(var r=this.selectedState,n=VA([],jA(t));r&&n.length;)r=r.toggledNodes.get(n.pop());if(!r)return!1;var o=!1;return e.forEach((function(t){(null==r?void 0:r.toggledNodes.delete(t))&&(o=!0)})),o&&this.removeRedundantState(),o},e.prototype.setNodesSelected=function(t){var e=this,r=t.nodes,n=GA(t,["nodes"]);if(0===r.length)return 0;if(t.rangeSelect){if(r.length>1)throw new Error("AG Grid: cannot select multiple rows when using rangeSelect");var o=r[0],i=this.rowModel.getNodesInRangeForSelection(o,this.lastSelected).map(this.getRouteToNode).sort((function(t,e){return e.length-t.length})),a=new Set;return i.forEach((function(t){a.has(t[t.length-1])||(t.forEach((function(t){return a.add(t)})),e.recursivelySelectNode(t,e.selectedState,LA({node:o},n)))})),this.removeRedundantState(),this.lastSelected=o,1}return t.nodes.forEach((function(t){var r=e.getRouteToNode(t);e.recursivelySelectNode(r,e.selectedState,LA(LA({},n),{node:t}))})),this.removeRedundantState(),this.lastSelected=t.nodes[t.nodes.length-1],1},e.prototype.isNodeSelected=function(t){var e=this.getRouteToNode(t);return this.isNodePathSelected(e,this.selectedState)},e.prototype.isNodePathSelected=function(t,e){var r=jA(t),n=r[0],o=r.slice(1);if(0===o.length){var i=e.toggledNodes.has(n.id);if(n.hasChildren()){var a=e.toggledNodes.get(n.id);if(a&&a.toggledNodes.size)return}return e.selectAllChildren?!i:i}if(e.toggledNodes.has(n.id)){var s=e.toggledNodes.get(n.id);if(s)return this.isNodePathSelected(o,s)}return!!e.selectAllChildren},e.prototype.getRouteToNode=function(t){for(var e=[],r=t;r.parent;)e.push(r),r=r.parent;return e.reverse()},e.prototype.removeRedundantState=function(){var t=this;if(!this.filterManager.isAnyFilterPresent()){var e=function(r,n,o){void 0===r&&(r=t.selectedState),void 0===n&&(n=t.serverSideRowModel.getRootStore());var i=!0,a=!0;return r.toggledNodes.forEach((function(n,o){var s=t.rowModel.getRowNode(o);s||(i=!1);var l=null==s?void 0:s.childStore;l?(e(n,l,s)&&r.selectAllChildren===n.selectAllChildren&&r.toggledNodes.delete(o),n.toggledNodes.size>0&&(a=!1)):n.toggledNodes.size>0&&(a=!1)})),!(!n||!n.isLastRowIndexKnown()||n.getRowCount()!==r.toggledNodes.size)&&(!(!a||!i)&&(r.toggledNodes.clear(),r.selectAllChildren=!r.selectAllChildren,o&&(null==o?void 0:o.isSelected())!==r.selectAllChildren&&o.selectThisNode(r.selectAllChildren,void 0,"api"),!0))};e()}},e.prototype.recursivelySelectNode=function(t,e,r){var n=jA(t),o=n[0],i=n.slice(1);if(o)if(!i.length){var a=o.selectable;if(e.selectAllChildren===r.newValue||!a)return void e.toggledNodes.delete(o.id);var s={selectAllChildren:r.newValue,toggledNodes:new Map};e.toggledNodes.set(o.id,s)}else{var l=e.toggledNodes.has(o.id),u=l?e.toggledNodes.get(o.id):{selectAllChildren:e.selectAllChildren,toggledNodes:new Map};l||e.toggledNodes.set(o.id,u),this.recursivelySelectNode(i,u,r),e.selectAllChildren===u.selectAllChildren&&0===u.toggledNodes.size&&e.toggledNodes.delete(o.id)}},e.prototype.getSelectedNodes=function(){console.warn("AG Grid: `getSelectedNodes` and `getSelectedRows` functions cannot be used with `groupSelectsChildren` and the server-side row model.\n            Use `api.getServerSideSelectionState()` instead.");var t=[];return this.rowModel.forEachNode((function(e){e.isSelected()&&t.push(e)})),t},e.prototype.processNewRow=function(t){},e.prototype.getSelectedRows=function(){return this.getSelectedNodes().map((function(t){return t.data}))},e.prototype.getSelectionCount=function(){return-1},e.prototype.isEmpty=function(){var t;return!this.selectedState.selectAllChildren&&!(null===(t=this.selectedState.toggledNodes)||void 0===t?void 0:t.size)},e.prototype.selectAllRowNodes=function(t){this.selectedState={selectAllChildren:!0,toggledNodes:new Map}},e.prototype.deselectAllRowNodes=function(t){this.selectedState={selectAllChildren:!1,toggledNodes:new Map}},e.prototype.getSelectAllState=function(t,e){return this.selectedState.selectAllChildren?!(this.selectedState.toggledNodes.size>0)||null:this.selectedState.toggledNodes.size>0&&null},NA([n("rowModel")],e.prototype,"rowModel",void 0),NA([n("columnModel")],e.prototype,"columnModel",void 0),NA([n("filterManager")],e.prototype,"filterManager",void 0),NA([n("rowModel")],e.prototype,"serverSideRowModel",void 0),NA([n("selectionService")],e.prototype,"selectionService",void 0),NA([i],e.prototype,"init",null),e}(r),UA=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),HA=function(){return(HA=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},zA=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},WA=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(t,n[o])&&(r[n[o]]=t[n[o]])}return r},KA=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return UA(r,t),r.prototype.init=function(){var t=this,e=this.gridOptionsService.is("groupSelectsChildren");this.addManagedPropertyListener("groupSelectsChildren",(function(e){t.destroyBean(t.selectionStrategy);var r=e.currentValue?BA:FA;t.selectionStrategy=t.createManagedBean(new r),t.shotgunResetNodeSelectionState();var n={type:l.EVENT_SELECTION_CHANGED,source:"api"};t.eventService.dispatchEvent(n)})),this.rowSelection=this.gridOptionsService.get("rowSelection"),this.addManagedPropertyListener("rowSelection",(function(e){return t.rowSelection=e.currentValue}));var r=e?BA:FA;this.selectionStrategy=this.createManagedBean(new r)},r.prototype.getServerSideSelectionState=function(){return this.selectionStrategy.getSelectedState()},r.prototype.setServerSideSelectionState=function(t){this.selectionStrategy.setSelectedState(t),this.shotgunResetNodeSelectionState();var e={type:l.EVENT_SELECTION_CHANGED,source:"api"};this.eventService.dispatchEvent(e)},r.prototype.setNodesSelected=function(t){var e=t.nodes,r=WA(t,["nodes"]);if(e.length>1&&"multiple"!==this.rowSelection)return console.warn("AG Grid: cannot multi select while rowSelection='single'"),0;if(e.length>1&&t.rangeSelect)return console.warn("AG Grid: cannot use range selection when multi selecting rows"),0;var n=HA({nodes:e.filter((function(t){return t.selectable}))},r);if(!n.nodes.length)return 0;var o=this.selectionStrategy.setNodesSelected(n);this.shotgunResetNodeSelectionState(n.source);var i={type:l.EVENT_SELECTION_CHANGED,source:n.source};return this.eventService.dispatchEvent(i),o},r.prototype.deleteSelectionStateFromParent=function(t,e){if(this.selectionStrategy.deleteSelectionStateFromParent(t,e)){this.shotgunResetNodeSelectionState();var r={type:l.EVENT_SELECTION_CHANGED,source:"api"};this.eventService.dispatchEvent(r)}},r.prototype.shotgunResetNodeSelectionState=function(t){var e=this;this.rowModel.forEachNode((function(r){if(!r.stub){var n=e.selectionStrategy.isNodeSelected(r);n!==r.isSelected()&&r.selectThisNode(n,void 0,t)}}))},r.prototype.getSelectedNodes=function(){return this.selectionStrategy.getSelectedNodes()},r.prototype.getSelectedRows=function(){return this.selectionStrategy.getSelectedRows()},r.prototype.getSelectionCount=function(){return this.selectionStrategy.getSelectionCount()},r.prototype.syncInRowNode=function(t,e){this.selectionStrategy.processNewRow(t);var r=this.selectionStrategy.isNodeSelected(t);if(0==r||t.selectable)t.setSelectedInitialValue(r);else{this.selectionStrategy.setNodesSelected({nodes:[t],newValue:!1,source:"api"}),this.shotgunResetNodeSelectionState();var n={type:l.EVENT_SELECTION_CHANGED,source:"api"};this.eventService.dispatchEvent(n)}},r.prototype.reset=function(){this.selectionStrategy.deselectAllRowNodes({source:"api"})},r.prototype.isEmpty=function(){return this.selectionStrategy.isEmpty()},r.prototype.selectAllRowNodes=function(t){(t.justCurrentPage||t.justFiltered)&&console.warn("AG Grid: selecting just filtered only works when gridOptions.rowModelType='clientSide'"),this.selectionStrategy.selectAllRowNodes(t),this.rowModel.forEachNode((function(e){e.stub||e.selectThisNode(!0,void 0,t.source)}));var e={type:l.EVENT_SELECTION_CHANGED,source:t.source};this.eventService.dispatchEvent(e)},r.prototype.deselectAllRowNodes=function(t){(t.justCurrentPage||t.justFiltered)&&console.warn("AG Grid: selecting just filtered only works when gridOptions.rowModelType='clientSide'"),this.selectionStrategy.deselectAllRowNodes(t),this.rowModel.forEachNode((function(e){e.stub||e.selectThisNode(!1,void 0,t.source)}));var e={type:l.EVENT_SELECTION_CHANGED,source:t.source};this.eventService.dispatchEvent(e)},r.prototype.getSelectAllState=function(t,e){return this.selectionStrategy.getSelectAllState(t,e)},r.prototype.updateGroupsFromChildrenSelections=function(t,e){return!1},r.prototype.getBestCostNodeSelection=function(){console.warn("AG Grid: calling gridApi.getBestCostNodeSelection() is only possible when using rowModelType=`clientSide`.")},r.prototype.filterFromSelection=function(){},zA([n("rowModel")],r.prototype,"rowModel",void 0),zA([i],r.prototype,"init",null),r=zA([e("selectionService")],r)}(r),XA={version:"30.2.0",moduleName:s.ServerSideRowModelModule,rowModel:"serverSide",beans:[iA,bA,wA,lA,pA,hA,yA,EA,PA,AA,KA],dependantModules:[Ft]},YA=function(){function t(t,e,r,n,o,i,a,s,l,u){this.rowModel=t,this.filterParams=e,this.createKey=r,this.caseFormat=n,this.columnModel=o,this.valueService=i,this.treeDataOrGrouping=a,this.treeData=s,this.getDataPath=l,this.groupAllowUnbalanced=u}return t.prototype.extractUniqueValues=function(t,e){var r=this,n=new Map,o=this.extractExistingFormattedKeys(e),i=new Set,a=this.treeData&&!!this.getDataPath,s=this.columnModel.getRowGroupColumns(),l=function(t,a){var s=r.caseFormat(t);if(!i.has(s)){i.add(s);var l=t,c=u.makeNull(a),p=null==o?void 0:o.get(s);null!=p&&(l=p,c=e.get(p)),n.set(l,c)}};return this.rowModel.forEachLeafNode((function(e){if(e.data&&t(e))if(r.treeDataOrGrouping)r.addValueForTreeDataOrGrouping(e,a,s,l);else{var n=r.getValue(e);r.filterParams.convertValuesToStrings?r.addValueForConvertValuesToString(e,n,l):null!=n&&Array.isArray(n)?(n.forEach((function(t){l(r.createKey(t,e),t)})),0===n.length&&l(null,null)):l(r.createKey(n,e),n)}})),n},t.prototype.addValueForConvertValuesToString=function(t,e,r){var n=this.createKey(e,t);null!=n&&Array.isArray(n)?(n.forEach((function(t){var e=u.toStringOrNull(u.makeNull(t));r(e,e)})),0===n.length&&r(null,null)):r(n,n)},t.prototype.addValueForTreeDataOrGrouping=function(t,e,r,n){var o,i,a=this;if(e){if(null===(o=t.childrenAfterGroup)||void 0===o?void 0:o.length)return;i=this.getDataPath(t.data)}else(i=r.map((function(e){return a.valueService.getKeyForNode(e,t)}))).push(this.getValue(t));i&&(i=i.map((function(t){return u.toStringOrNull(u.makeNull(t))}))),!e&&this.groupAllowUnbalanced&&(null==i?void 0:i.some((function(t){return null==t})))&&(i=i.filter((function(t){return null!=t}))),n(this.createKey(i),i)},t.prototype.getValue=function(t){var e=this.filterParams,r=e.api,n=e.colDef,o=e.column,i=e.columnApi,a=e.context;return this.filterParams.valueGetter({api:r,colDef:n,column:o,columnApi:i,context:a,data:t.data,getValue:function(e){return t.data[e]},node:t})},t.prototype.extractExistingFormattedKeys=function(t){var e=this;if(!t)return null;var r=new Map;return t.forEach((function(t,n){r.set(e.caseFormat(n),n)})),r},t}(),qA=function(){function t(){}return t.SELECT_ALL="__AG_SELECT_ALL__",t.ADD_SELECTION_TO_FILTER="__AG_ADD_SELECTION_TO_FILTER__",t}(),ZA=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},JA=function(){function t(t,e,r,n){this.valueFormatterService=t,this.valueFormatter=e,this.formatter=r,this.column=n,this.displayedKeys=[]}return t.prototype.updateDisplayedValuesToAllAvailable=function(t,e,r){this.displayedKeys=Array.from(r)},t.prototype.updateDisplayedValuesToMatchMiniFilter=function(t,e,r,n,o){var i,a;this.displayedKeys=[];try{for(var s=ZA(r),l=s.next();!l.done;l=s.next()){var u=l.value;if(null==u)o&&this.displayedKeys.push(u);else{var c=t(u),p=this.valueFormatterService.formatValue(this.column,null,c,this.valueFormatter,!1);n(this.formatter(p))&&this.displayedKeys.push(u)}}}catch(t){i={error:t}}finally{try{l&&!l.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}},t.prototype.getDisplayedValueCount=function(){return this.displayedKeys.length},t.prototype.getDisplayedItem=function(t){return this.displayedKeys[t]},t.prototype.getSelectAllItem=function(){return qA.SELECT_ALL},t.prototype.getAddSelectionToFilterItem=function(){return qA.ADD_SELECTION_TO_FILTER},t.prototype.getDisplayedKeys=function(){return this.displayedKeys},t.prototype.forEachDisplayedKey=function(t){this.displayedKeys.forEach(t)},t.prototype.someDisplayedKey=function(t){return this.displayedKeys.some(t)},t.prototype.hasGroups=function(){return!1},t.prototype.refresh=function(){},t}(),$A=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},QA=function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t},tM=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},eM=function(){function t(t,e,r,n){this.formatter=t,this.treeListPathGetter=e,this.treeListFormatter=r,this.treeDataOrGrouping=n,this.allDisplayedItemsTree=[],this.activeDisplayedItemsFlat=[],this.selectAllItem={depth:0,filterPasses:!0,available:!0,treeKey:qA.SELECT_ALL,children:this.allDisplayedItemsTree,expanded:!0,key:qA.SELECT_ALL,parentTreeKeys:[]},this.addSelectionToFilterItem={depth:0,filterPasses:!0,available:!0,treeKey:qA.ADD_SELECTION_TO_FILTER,expanded:!0,key:qA.ADD_SELECTION_TO_FILTER,parentTreeKeys:[]}}return t.prototype.updateDisplayedValuesToAllAvailable=function(t,e,r,n){"reload"===n?this.generateItemTree(t,e,r):"otherFilter"===n?(this.updateAvailable(r),this.updateExpandAll()):"miniFilter"===n&&(this.resetFilter(),this.updateExpandAll()),this.flattenItems()},t.prototype.updateDisplayedValuesToMatchMiniFilter=function(t,e,r,n,o,i){"reload"===i?this.generateItemTree(t,e,r):"otherFilter"===i&&this.updateAvailable(r),this.updateFilter(n,o),this.updateExpandAll(),this.flattenItems()},t.prototype.generateItemTree=function(t,e,r){var n,o,i;this.allDisplayedItemsTree=[],this.groupsExist=!1;var a=this.getTreeListPathGetter(t,r),s=function(e){var n=t(e),o=null!==(i=a(n))&&void 0!==i?i:[null];o.length>1&&(l.groupsExist=!0);var s,u=r.has(e),c=l.allDisplayedItemsTree,p=[];o.forEach((function(t,r){c||(c=[],s.children=c),(s=c.find((function(e){var r;return(null===(r=e.treeKey)||void 0===r?void 0:r.toUpperCase())===(null==t?void 0:t.toUpperCase())})))||(s={treeKey:t,depth:r,filterPasses:!0,expanded:!1,available:u,parentTreeKeys:p},r===o.length-1&&(s.key=e),c.push(s)),c=s.children,p=QA(QA([],$A(p)),[t])}))},l=this;try{for(var u=tM(e),c=u.next();!c.done;c=u.next()){s(c.value)}}catch(t){n={error:t}}finally{try{c&&!c.done&&(o=u.return)&&o.call(u)}finally{if(n)throw n.error}}this.updateAvailable(r),this.selectAllItem.children=this.allDisplayedItemsTree,this.selectAllItem.expanded=!1},t.prototype.getTreeListPathGetter=function(e,r){var n,o;if(this.treeListPathGetter)return this.treeListPathGetter;if(this.treeDataOrGrouping)return function(t){return t};var i=!1;try{for(var a=tM(r),s=a.next();!s.done;s=a.next()){var l=e(s.value);if(l instanceof Date){i=!0;break}if(null!=l)break}}catch(t){n={error:t}}finally{try{s&&!s.done&&(o=a.return)&&o.call(a)}finally{if(n)throw n.error}}return i?t.DATE_TREE_LIST_PATH_GETTER:(u.doOnce((function(){return console.warn("AG Grid: property treeList=true for Set Filter params, but you did not provide a treeListPathGetter or values of type Date.")}),"getTreeListPathGetter"),function(t){return[String(t)]})},t.prototype.flattenItems=function(){var t=this;this.activeDisplayedItemsFlat=[];var e=function(r){r.forEach((function(r){r.filterPasses&&r.available&&(t.activeDisplayedItemsFlat.push(r),r.children&&r.expanded&&e(r.children))}))};e(this.allDisplayedItemsTree)},t.prototype.resetFilter=function(){var t=function(e){e.children&&e.children.forEach((function(e){t(e)})),e.filterPasses=!0};this.allDisplayedItemsTree.forEach((function(e){return t(e)}))},t.prototype.updateFilter=function(t,e){var r=this,n=function(n){return!!n.available&&(null==n.treeKey?e:t(r.formatter(r.treeListFormatter?r.treeListFormatter(n.treeKey,n.depth,n.parentTreeKeys):n.treeKey)))};this.allDisplayedItemsTree.forEach((function(t){return r.recursiveItemCheck(t,!1,n,"filterPasses")}))},t.prototype.getDisplayedValueCount=function(){return this.activeDisplayedItemsFlat.length},t.prototype.getDisplayedItem=function(t){return this.activeDisplayedItemsFlat[t]},t.prototype.getSelectAllItem=function(){return this.selectAllItem},t.prototype.getAddSelectionToFilterItem=function(){return this.addSelectionToFilterItem},t.prototype.getDisplayedKeys=function(){var t=[];return this.forEachDisplayedKey((function(e){return t.push(e)})),t},t.prototype.forEachDisplayedKey=function(t){var e=function(r,n){r.children?r.expanded&&n||r.children.forEach((function(t){t.filterPasses&&e(t,!1)})):t(r.key)};this.activeDisplayedItemsFlat.forEach((function(t){return e(t,!0)}))},t.prototype.someDisplayedKey=function(t){var e=function(r,n){return r.children?(!r.expanded||!n)&&r.children.some((function(t){return!!t.filterPasses&&e(t,!1)})):t(r.key)};return this.activeDisplayedItemsFlat.some((function(t){return e(t,!0)}))},t.prototype.hasGroups=function(){return this.groupsExist},t.prototype.refresh=function(){this.updateExpandAll(),this.flattenItems()},t.prototype.updateExpandAll=function(){var t=function(e,r,n){var o,i;try{for(var a=tM(e),s=a.next();!s.done;s=a.next()){var l=s.value;if(l.filterPasses&&l.available&&l.children){if(r=r||!!l.expanded,n=n||!l.expanded,r&&n)return;var u=t(l.children,r,n);if(void 0===u)return;u?r=!0:n=!0}}}catch(t){o={error:t}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(o)throw o.error}}return r&&n?void 0:r},e=this.getSelectAllItem();e.expanded=t(e.children,!1,!1)},t.prototype.recursiveItemCheck=function(t,e,r,n){var o=this,i=!1;t.children&&t.children.forEach((function(a){var s=o.recursiveItemCheck(a,e||r(t),r,n);i=i||s}));var a=e||i||r(t);return t[n]=a,a},t.prototype.updateAvailable=function(t){var e=this,r=function(e){return t.has(e.key)};this.allDisplayedItemsTree.forEach((function(t){return e.recursiveItemCheck(t,!1,r,"available")}))},t.DATE_TREE_LIST_PATH_GETTER=function(t){return t?[String(t.getFullYear()),String(t.getMonth()+1),String(t.getDate())]:null},t}(),rM=function(){function t(t){var e=t.caseFormat;this.filteringKeys=null,this.filteringKeysCaseFormatted=null,this.hasNoAppliedFilteringKeys=!1,this.caseFormat=e}return t.prototype.allFilteringKeys=function(){return this.filteringKeys},t.prototype.allFilteringKeysCaseFormatted=function(){return this.filteringKeysCaseFormatted},t.prototype.noAppliedFilteringKeys=function(){return this.hasNoAppliedFilteringKeys},t.prototype.setFilteringKeys=function(t){var e=this;this.filteringKeys=new Set(t),this.hasNoAppliedFilteringKeys=!this.filteringKeys||0===this.filteringKeys.size,this.filteringKeysCaseFormatted=new Set,this.filteringKeys.forEach((function(t){return e.filteringKeysCaseFormatted.add(e.caseFormat(t))}))},t.prototype.addFilteringKey=function(t){null==this.filteringKeys&&(this.filteringKeys=new Set,this.filteringKeysCaseFormatted=new Set),this.filteringKeys.add(t),this.filteringKeysCaseFormatted.add(this.caseFormat(t)),this.hasNoAppliedFilteringKeys&&(this.hasNoAppliedFilteringKeys=!1)},t.prototype.hasCaseFormattedFilteringKey=function(t){return this.filteringKeysCaseFormatted.has(this.caseFormat(t))},t.prototype.hasFilteringKey=function(t){return this.filteringKeys.has(t)},t.prototype.reset=function(){this.filteringKeys=null,this.filteringKeysCaseFormatted=null,this.hasNoAppliedFilteringKeys=!1},t}(),nM=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},oM=function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t};!function(t){t[t.PROVIDED_LIST=0]="PROVIDED_LIST",t[t.PROVIDED_CALLBACK=1]="PROVIDED_CALLBACK",t[t.TAKEN_FROM_GRID_VALUES=2]="TAKEN_FROM_GRID_VALUES"}(XP||(XP={}));var iM,aM=function(){function t(t){var e,r=this;this.localEventService=new P,this.miniFilterText=null,this.addCurrentSelectionToFilter=!1,this.providedValues=null,this.allValues=new Map,this.availableKeys=new Set,this.selectedKeys=new Set,this.initialised=!1;var n=t.usingComplexObjects,o=t.columnModel,i=t.valueService,a=t.treeDataTreeList,s=t.groupingTreeList,l=t.filterParams,c=t.gridOptionsService,p=t.valueFormatterService,d=t.valueFormatter,h=l.column,f=l.colDef,v=l.textFormatter,y=l.doesRowPassOtherFilter,g=l.suppressSorting,m=l.comparator,b=l.rowModel,C=l.values,S=l.caseSensitive,w=l.convertValuesToStrings,x=l.treeList,O=l.treeListPathGetter,E=l.treeListFormatter;this.filterParams=l,this.setIsLoading=t.setIsLoading,this.translate=t.translate,this.caseFormat=t.caseFormat,this.createKey=t.createKey,this.usingComplexObjects=!!t.usingComplexObjects,this.formatter=v||St.DEFAULT_FORMATTER,this.doesRowPassOtherFilters=y,this.suppressSorting=g||!1,this.convertValuesToStrings=!!w,this.filteringKeys=new rM({caseFormat:this.caseFormat});var T=null!=m?m:f.comparator,D=!!a||!!s;this.compareByValue=!!(n&&T||D||x&&!O),this.entryComparator=D&&!T?this.createTreeDataOrGroupingComparator():!x||O||T?function(t,e){var r=nM(t,2);r[0];var n=r[1],o=nM(e,2);o[0];var i=o[1];return T(n,i)}:function(t,e){var r=nM(t,2);r[0];var n=r[1],o=nM(e,2);o[0];var i=o[1];return u.defaultComparator(n,i)},this.keyComparator=null!==(e=T)&&void 0!==e?e:u.defaultComparator,this.caseSensitive=!!S;var A=c.get("getDataPath"),M=c.is("groupAllowUnbalanced");"clientSide"===b.getType()&&(this.clientSideValuesExtractor=new YA(b,this.filterParams,this.createKey,this.caseFormat,o,i,D,!!a,A,M)),null==C?this.valuesType=XP.TAKEN_FROM_GRID_VALUES:(this.valuesType=Array.isArray(C)?XP.PROVIDED_LIST:XP.PROVIDED_CALLBACK,this.providedValues=C),this.displayValueModel=x?new eM(this.formatter,O,E,a||s):new JA(p,d,this.formatter,h),this.updateAllValues().then((function(t){return r.resetSelectionState(t||[])}))}return t.prototype.addEventListener=function(t,e,r){this.localEventService.addEventListener(t,e,r)},t.prototype.removeEventListener=function(t,e,r){this.localEventService.removeEventListener(t,e,r)},t.prototype.refreshValues=function(){var t=this.getModel();return this.updateAllValues(),this.setModel(t)},t.prototype.overrideValues=function(t){var e=this;return new V((function(r){e.allValuesPromise.then((function(){e.valuesType=XP.PROVIDED_LIST,e.providedValues=t,e.refreshValues().then((function(){return r()}))}))}))},t.prototype.refreshAfterAnyFilterChanged=function(){var t=this;return this.showAvailableOnly()?this.allValuesPromise.then((function(e){return t.updateAvailableKeys(null!=e?e:[],"otherFilter"),!0})):V.resolve(!1)},t.prototype.isInitialised=function(){return this.initialised},t.prototype.updateAllValues=function(){var t=this;return this.allValuesPromise=new V((function(e){switch(t.valuesType){case XP.TAKEN_FROM_GRID_VALUES:case XP.PROVIDED_LIST:e(t.processAllKeys(t.valuesType===XP.TAKEN_FROM_GRID_VALUES,t.providedValues));break;case XP.PROVIDED_CALLBACK:t.setIsLoading(!0);var r=t.providedValues,n=t.filterParams,o=n.columnApi,i=n.api,a=n.context,s=n.column,l={success:function(r){t.setIsLoading(!1),e(t.processAllKeys(!1,r))},colDef:n.colDef,column:s,columnApi:o,api:i,context:a};window.setTimeout((function(){return r(l)}),0);break;default:throw new Error("Unrecognised valuesType")}})),this.allValuesPromise.then((function(e){return t.updateAvailableKeys(e||[],"reload")})).then((function(){return t.initialised=!0})),this.allValuesPromise},t.prototype.processAllKeys=function(t,e){var r=t?this.getValuesFromRows(!1):this.uniqueValues(this.validateProvidedValues(e)),n=this.sortKeys(r);return this.allValues=null!=r?r:new Map,n},t.prototype.validateProvidedValues=function(t){if(this.usingComplexObjects&&(null==t?void 0:t.length)){var e=t[0];if(e&&"object"!=typeof e&&"function"!=typeof e)null==this.createKey(e)?u.doOnce((function(){return console.warn("Set Filter Key Creator is returning null for provided values and provided values are primitives. Please provide complex objects or set convertValuesToStrings=true in the filterParams. See https://www.ag-grid.com/javascript-data-grid/filter-set-filter-list/#filter-value-types")}),"setFilterComplexObjectsProvidedNull"):u.doOnce((function(){return console.warn("AG Grid: Set Filter has a Key Creator, but provided values are primitives. Did you mean to provide complex objects or enable convertValuesToStrings?")}),"setFilterComplexObjectsProvidedPrimitive")}return t},t.prototype.setValuesType=function(t){this.valuesType=t},t.prototype.getValuesType=function(){return this.valuesType},t.prototype.isKeyAvailable=function(t){return this.availableKeys.has(t)},t.prototype.showAvailableOnly=function(){return this.valuesType===XP.TAKEN_FROM_GRID_VALUES},t.prototype.updateAvailableKeys=function(e,r){var n=this.showAvailableOnly()?this.sortKeys(this.getValuesFromRows(!0)):e;this.availableKeys=new Set(n),this.localEventService.dispatchEvent({type:t.EVENT_AVAILABLE_VALUES_CHANGED}),this.updateDisplayedValues(r,e)},t.prototype.sortKeys=function(t){var e,r=null!=t?t:new Map;return this.suppressSorting?Array.from(r.keys()):(e=this.compareByValue?Array.from(r.entries()).sort(this.entryComparator).map((function(t){return nM(t,1)[0]})):Array.from(r.keys()).sort(this.keyComparator),this.filterParams.excelMode&&r.has(null)&&(e=e.filter((function(t){return null!=t}))).push(null),e)},t.prototype.getValuesFromRows=function(t){var e=this;if(void 0===t&&(t=!1),!this.clientSideValuesExtractor)return console.error("AG Grid: Set Filter cannot initialise because you are using a row model that does not contain all rows in the browser. Either use a different filter type, or configure Set Filter such that you provide it with values"),null;return this.clientSideValuesExtractor.extractUniqueValues((function(r){return!t||e.doesRowPassOtherFilters(r)}),t&&!this.caseSensitive?this.allValues:void 0)},t.prototype.setMiniFilter=function(t){return t=u.makeNull(t),this.miniFilterText!==t&&(null===t&&this.setAddCurrentSelectionToFilter(!1),this.miniFilterText=t,this.updateDisplayedValues("miniFilter"),!0)},t.prototype.getMiniFilter=function(){return this.miniFilterText},t.prototype.updateDisplayedValues=function(t,e){var r=this;if("expansion"!==t)if(null!=this.miniFilterText){var n=this.caseFormat(this.formatter(this.miniFilterText)||""),o=function(t){return null!=t&&r.caseFormat(t).indexOf(n)>=0},i=!!this.filterParams.excelMode&&o(this.translate("blanks"));this.displayValueModel.updateDisplayedValuesToMatchMiniFilter((function(t){return r.getValue(t)}),e,this.availableKeys,o,i,t)}else this.displayValueModel.updateDisplayedValuesToAllAvailable((function(t){return r.getValue(t)}),e,this.availableKeys,t);else this.displayValueModel.refresh()},t.prototype.getDisplayedValueCount=function(){return this.displayValueModel.getDisplayedValueCount()},t.prototype.getDisplayedItem=function(t){return this.displayValueModel.getDisplayedItem(t)},t.prototype.getSelectAllItem=function(){return this.displayValueModel.getSelectAllItem()},t.prototype.getAddSelectionToFilterItem=function(){return this.displayValueModel.getAddSelectionToFilterItem()},t.prototype.hasSelections=function(){return this.filterParams.defaultToNothingSelected?this.selectedKeys.size>0:this.allValues.size!==this.selectedKeys.size},t.prototype.getKeys=function(){return Array.from(this.allValues.keys())},t.prototype.getValues=function(){return Array.from(this.allValues.values())},t.prototype.getValue=function(t){return this.allValues.get(t)},t.prototype.setAddCurrentSelectionToFilter=function(t){this.addCurrentSelectionToFilter=t},t.prototype.isInWindowsExcelMode=function(){return"windows"===this.filterParams.excelMode},t.prototype.isAddCurrentSelectionToFilterChecked=function(){return this.isInWindowsExcelMode()&&this.addCurrentSelectionToFilter},t.prototype.showAddCurrentSelectionToFilter=function(){return this.isInWindowsExcelMode()&&u.exists(this.miniFilterText)&&this.miniFilterText.length>0},t.prototype.selectAllMatchingMiniFilter=function(t){var e=this;void 0===t&&(t=!1),null==this.miniFilterText?this.selectedKeys=new Set(this.allValues.keys()):(t&&this.selectedKeys.clear(),this.displayValueModel.forEachDisplayedKey((function(t){return e.selectedKeys.add(t)})))},t.prototype.deselectAllMatchingMiniFilter=function(){var t=this;null==this.miniFilterText?this.selectedKeys.clear():this.displayValueModel.forEachDisplayedKey((function(e){return t.selectedKeys.delete(e)}))},t.prototype.selectKey=function(t){this.selectedKeys.add(t)},t.prototype.deselectKey=function(t){this.filterParams.excelMode&&this.isEverythingVisibleSelected()&&this.resetSelectionState(this.displayValueModel.getDisplayedKeys()),this.selectedKeys.delete(t)},t.prototype.isKeySelected=function(t){return this.selectedKeys.has(t)},t.prototype.isEverythingVisibleSelected=function(){var t=this;return!this.displayValueModel.someDisplayedKey((function(e){return!t.isKeySelected(e)}))},t.prototype.isNothingVisibleSelected=function(){var t=this;return!this.displayValueModel.someDisplayedKey((function(e){return t.isKeySelected(e)}))},t.prototype.getModel=function(){if(!this.hasSelections())return null;var t=this.isAddCurrentSelectionToFilterChecked()?this.filteringKeys.allFilteringKeys():null;if(t&&t.size>0){if(this.selectedKeys){var e=new Set(oM(oM([],nM(Array.from(t))),nM(Array.from(this.selectedKeys).filter((function(e){return!t.has(e)})))));return Array.from(e)}return Array.from(t)}return Array.from(this.selectedKeys)},t.prototype.setModel=function(t){var e=this;return this.allValuesPromise.then((function(r){if(null==t)e.resetSelectionState(null!=r?r:[]);else{e.selectedKeys.clear();var n=new Map;e.allValues.forEach((function(t,r){n.set(e.caseFormat(r),r)})),t.forEach((function(t){var r=e.caseFormat(u.makeNull(t)),o=n.get(r);void 0!==o&&e.selectKey(o)}))}}))},t.prototype.uniqueValues=function(t){var e=this,r=new Map,n=new Set;return(null!=t?t:[]).forEach((function(t){var o=u.makeNull(t),i=e.convertAndGetKey(o),a=e.caseFormat(i);n.has(a)||(n.add(a),r.set(i,o))})),r},t.prototype.convertAndGetKey=function(t){return this.convertValuesToStrings?t:this.createKey(t)},t.prototype.resetSelectionState=function(t){this.filterParams.defaultToNothingSelected?this.selectedKeys.clear():this.selectedKeys=new Set(t)},t.prototype.hasGroups=function(){return this.displayValueModel.hasGroups()},t.prototype.createTreeDataOrGroupingComparator=function(){return function(t,e){var r=nM(t,2);r[0];var n=r[1],o=nM(e,2);o[0];var i=o[1];if(null==n)return null==i?0:-1;if(null==i)return 1;for(var a=0;a<n.length;a++){if(a>=i.length)return 1;var s=u.defaultComparator(n[a],i[a]);if(0!==s)return s}return 0}},t.prototype.setAppliedModelKeys=function(t){this.filteringKeys.setFilteringKeys(t)},t.prototype.addToAppliedModelKeys=function(t){this.filteringKeys.addFilteringKey(t)},t.prototype.getAppliedModelKeys=function(){return this.filteringKeys.allFilteringKeys()},t.prototype.getCaseFormattedAppliedModelKeys=function(){return this.filteringKeys.allFilteringKeysCaseFormatted()},t.prototype.hasAppliedModelKey=function(t){return this.filteringKeys.hasCaseFormattedFilteringKey(t)},t.prototype.hasAnyAppliedModelKey=function(){return!this.filteringKeys.noAppliedFilteringKeys()},t.EVENT_AVAILABLE_VALUES_CHANGED="availableValuesChanged",t}(),sM=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),lM=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},uM=function(t){function e(r){var n,o=t.call(this,r.isGroup?e.GROUP_TEMPLATE:e.TEMPLATE)||this;return o.focusWrapper=r.focusWrapper,o.value=r.value,o.params=r.params,o.translate=r.translate,o.valueFormatter=r.valueFormatter,o.item=r.item,o.isSelected=r.isSelected,o.isTree=r.isTree,o.depth=null!==(n=r.depth)&&void 0!==n?n:0,o.isGroup=r.isGroup,o.groupsExist=r.groupsExist,o.isExpanded=r.isExpanded,o.hasIndeterminateExpandState=r.hasIndeterminateExpandState,o}return sM(e,t),e.prototype.init=function(){var t=this;this.addDestroyFunc((function(){var e;return null===(e=t.destroyCellRendererComponent)||void 0===e?void 0:e.call(t)})),this.render(),this.eCheckbox.setLabelEllipsis(!0),this.eCheckbox.setValue(this.isSelected,!0),this.eCheckbox.setDisabled(!!this.params.readOnly),this.eCheckbox.getInputElement().setAttribute("tabindex","-1"),this.refreshVariableAriaLabels(),this.isTree&&(this.depth>0&&this.addCssClass("ag-set-filter-indent-"+this.depth),this.isGroup?this.setupExpansion():this.groupsExist&&this.addCssClass("ag-set-filter-add-group-indent"),u.setAriaLevel(this.focusWrapper,this.depth+1)),this.params.readOnly||this.eCheckbox.onValueChange((function(e){return t.onCheckboxChanged(!!e)}))},e.prototype.setupExpansion=function(){this.eGroupClosedIcon.appendChild(u.createIcon("setFilterGroupClosed",this.gridOptionsService,null)),this.eGroupOpenedIcon.appendChild(u.createIcon("setFilterGroupOpen",this.gridOptionsService,null)),this.addManagedListener(this.eGroupClosedIcon,"click",this.onExpandOrContractClicked.bind(this)),this.addManagedListener(this.eGroupOpenedIcon,"click",this.onExpandOrContractClicked.bind(this)),this.hasIndeterminateExpandState&&(this.eGroupIndeterminateIcon.appendChild(u.createIcon("setFilterGroupIndeterminate",this.gridOptionsService,null)),this.addManagedListener(this.eGroupIndeterminateIcon,"click",this.onExpandOrContractClicked.bind(this))),this.setExpandedIcons(),this.refreshAriaExpanded()},e.prototype.onExpandOrContractClicked=function(){this.setExpanded(!this.isExpanded)},e.prototype.setExpanded=function(t,r){if(this.isGroup&&t!==this.isExpanded){this.isExpanded=t;var n={type:e.EVENT_EXPANDED_CHANGED,isExpanded:!!t,item:this.item};r||this.dispatchEvent(n),this.setExpandedIcons(),this.refreshAriaExpanded()}},e.prototype.refreshAriaExpanded=function(){u.setAriaExpanded(this.focusWrapper,!!this.isExpanded)},e.prototype.setExpandedIcons=function(){u.setDisplayed(this.eGroupClosedIcon,this.hasIndeterminateExpandState?!1===this.isExpanded:!this.isExpanded),u.setDisplayed(this.eGroupOpenedIcon,!0===this.isExpanded),this.hasIndeterminateExpandState&&u.setDisplayed(this.eGroupIndeterminateIcon,void 0===this.isExpanded)},e.prototype.onCheckboxChanged=function(t){this.isSelected=t;var r={type:e.EVENT_SELECTION_CHANGED,isSelected:t,item:this.item};this.dispatchEvent(r),this.refreshVariableAriaLabels()},e.prototype.toggleSelected=function(){this.params.readOnly||this.setSelected(!this.isSelected)},e.prototype.setSelected=function(t,e){this.isSelected=t,this.eCheckbox.setValue(this.isSelected,e)},e.prototype.refreshVariableAriaLabels=function(){if(this.isTree){var t=this.localeService.getLocaleTextFunc(),e=this.eCheckbox.getValue(),r=void 0===e?t("ariaIndeterminate","indeterminate"):e?t("ariaVisible","visible"):t("ariaHidden","hidden"),n=t("ariaToggleVisibility","Press SPACE to toggle visibility");u.setAriaLabelledBy(this.eCheckbox.getInputElement(),void 0),this.eCheckbox.setInputAriaLabel(n+" ("+r+")")}},e.prototype.setupFixedAriaLabels=function(t){if(this.isTree){var e=this.localeService.getLocaleTextFunc()("ariaFilterValue","Filter Value");u.setAriaLabel(this.focusWrapper,t+" "+e),u.setAriaDescribedBy(this.focusWrapper,this.eCheckbox.getInputElement().id)}},e.prototype.refresh=function(t,e,r){var n,o;if(this.item=t,e!==this.isSelected&&this.setSelected(e,!0),this.setExpanded(r,!0),this.valueFunction){var i=this.valueFunction();this.setTooltipAndCellRendererParams(i,i),this.cellRendererComponent||this.renderCellWithoutCellRenderer()}if(this.cellRendererComponent&&!(null===(o=(n=this.cellRendererComponent).refresh)||void 0===o?void 0:o.call(n,this.cellRendererParams))){var a=this.cellRendererComponent;this.renderCell(),this.destroyBean(a)}},e.prototype.render=function(){var t=this.params.column,e=this.value,r=null;"function"==typeof e?(this.valueFunction=e,e=r=this.valueFunction()):r=this.isTree?u.toStringOrNull(e):this.getFormattedValue(t,e),this.setTooltipAndCellRendererParams(e,r),this.renderCell()},e.prototype.setTooltipAndCellRendererParams=function(t,e){if(this.params.showTooltips){var r=null!=e?e:u.toStringOrNull(t);this.setTooltip(r)}this.cellRendererParams={value:t,valueFormatted:e,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context,colDef:this.params.colDef,column:this.params.column}},e.prototype.getTooltipParams=function(){var e=t.prototype.getTooltipParams.call(this);return e.location="setFilterValue",e.colDef=this.getComponentHolder(),this.isTree&&(e.level=this.depth),e},e.prototype.getFormattedValue=function(t,e){return this.valueFormatterService.formatValue(t,null,e,this.valueFormatter,!1)},e.prototype.renderCell=function(){var t=this,e=this.userComponentFactory.getSetFilterCellRendererDetails(this.params,this.cellRendererParams),r=e?e.newAgStackInstance():void 0;null!=r?r.then((function(e){e&&(t.cellRendererComponent=e,t.eCheckbox.setLabel(e.getGui()),t.destroyCellRendererComponent=function(){return t.destroyBean(e)})})):this.renderCellWithoutCellRenderer()},e.prototype.renderCellWithoutCellRenderer=function(){var t,e=null!==(t=null==this.cellRendererParams.valueFormatted?this.cellRendererParams.value:this.cellRendererParams.valueFormatted)&&void 0!==t?t:this.translate("blanks");"string"!=typeof e&&(u.doOnce((function(){return console.warn("AG Grid: Set Filter Value Formatter must return string values. Please ensure the Set Filter Value Formatter returns string values for complex objects, or set convertValuesToStrings=true in the filterParams. See https://www.ag-grid.com/javascript-data-grid/filter-set-filter-list/#filter-value-types")}),"setFilterComplexObjectsValueFormatter"),e=""),this.eCheckbox.setLabel(e),this.setupFixedAriaLabels(e)},e.prototype.getComponentHolder=function(){return this.params.column.getColDef()},e.EVENT_SELECTION_CHANGED="selectionChanged",e.EVENT_EXPANDED_CHANGED="expandedChanged",e.GROUP_TEMPLATE='\n        <div class="ag-set-filter-item" aria-hidden="true">\n            <span class="ag-set-filter-group-icons">\n                <span class="ag-set-filter-group-closed-icon" ref="eGroupClosedIcon"></span>\n                <span class="ag-set-filter-group-opened-icon" ref="eGroupOpenedIcon"></span>\n                <span class="ag-set-filter-group-indeterminate-icon" ref="eGroupIndeterminateIcon"></span>\n            </span>\n            <ag-checkbox ref="eCheckbox" class="ag-set-filter-item-checkbox"></ag-checkbox>\n        </div>',e.TEMPLATE='\n        <div class="ag-set-filter-item">\n            <ag-checkbox ref="eCheckbox" class="ag-set-filter-item-checkbox"></ag-checkbox>\n        </div>',lM([n("valueFormatterService")],e.prototype,"valueFormatterService",void 0),lM([n("userComponentFactory")],e.prototype,"userComponentFactory",void 0),lM([o("eCheckbox")],e.prototype,"eCheckbox",void 0),lM([o("eGroupOpenedIcon")],e.prototype,"eGroupOpenedIcon",void 0),lM([o("eGroupClosedIcon")],e.prototype,"eGroupClosedIcon",void 0),lM([o("eGroupIndeterminateIcon")],e.prototype,"eGroupIndeterminateIcon",void 0),lM([i],e.prototype,"init",null),e}(a),cM={loadingOoo:"Loading...",blanks:"(Blanks)",searchOoo:"Search...",selectAll:"(Select All)",selectAllSearchResults:"(Select All Search Results)",addCurrentSelectionToFilter:"Add current selection to filter",noMatches:"No matches."},pM=function(){function t(){}return t.prototype.getModelAsString=function(t,e){var r=(t||e.getModel()||{}).values,n=e.getValueModel();if(null==r||null==n)return"";var o=r.filter((function(t){return n.isKeyAvailable(t)})),i=o.length;return"("+i+") "+o.slice(0,10).map((function(t){return e.getFormattedValue(t)})).join(",")+(i>10?",...":"")},t}(),dM=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),hM=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},fM=function(t){function e(){var e=t.call(this,"setFilter")||this;return e.valueModel=null,e.setFilterParams=null,e.virtualList=null,e.caseSensitive=!1,e.convertValuesToStrings=!1,e.treeDataTreeList=!1,e.groupingTreeList=!1,e.hardRefreshVirtualList=!1,e.noValueFormatterSupplied=!1,e.filterModelFormatter=new pM,e}return dM(e,t),e.prototype.postConstruct=function(){t.prototype.postConstruct.call(this)},e.prototype.updateUiVisibility=function(){},e.prototype.createBodyTemplate=function(){return'\n            <div class="ag-set-filter">\n                <div ref="eFilterLoading" class="ag-filter-loading ag-hidden">'+this.translateForSetFilter("loadingOoo")+'</div>\n                <ag-input-text-field class="ag-mini-filter" ref="eMiniFilter"></ag-input-text-field>\n                <div ref="eFilterNoMatches" class="ag-filter-no-matches ag-hidden">'+this.translateForSetFilter("noMatches")+'</div>\n                <div ref="eSetFilterList" class="ag-set-filter-list" role="presentation"></div>\n            </div>'},e.prototype.handleKeyDown=function(e){if(t.prototype.handleKeyDown.call(this,e),!e.defaultPrevented)switch(e.key){case c.SPACE:this.handleKeySpace(e);break;case c.ENTER:this.handleKeyEnter(e);break;case c.LEFT:this.handleKeyLeft(e);break;case c.RIGHT:this.handleKeyRight(e)}},e.prototype.handleKeySpace=function(t){var e;null===(e=this.getComponentForKeyEvent(t))||void 0===e||e.toggleSelected()},e.prototype.handleKeyEnter=function(t){if(this.setFilterParams){var e=this.setFilterParams||{},r=e.excelMode,n=e.readOnly;r&&!n&&(t.preventDefault(),this.onBtApply(!1,!1,t),"mac"===this.setFilterParams.excelMode&&this.eMiniFilter.getInputElement().select())}},e.prototype.handleKeyLeft=function(t){var e;null===(e=this.getComponentForKeyEvent(t))||void 0===e||e.setExpanded(!1)},e.prototype.handleKeyRight=function(t){var e;null===(e=this.getComponentForKeyEvent(t))||void 0===e||e.setExpanded(!0)},e.prototype.getComponentForKeyEvent=function(t){var e,r=this.gridOptionsService.getDocument();if(this.eSetFilterList.contains(r.activeElement)&&this.virtualList){var n=this.virtualList.getLastFocusedRow();if(null!=n){var o=this.virtualList.getComponentAt(n);if(null!=o)if(t.preventDefault(),!(null!==(e=this.setFilterParams)&&void 0!==e?e:{}).readOnly)return o}}},e.prototype.getCssIdentifier=function(){return"set-filter"},e.prototype.setModel=function(e){var r;return null==e&&null==(null===(r=this.valueModel)||void 0===r?void 0:r.getModel())?(this.setMiniFilter(null),V.resolve()):t.prototype.setModel.call(this,e)},e.prototype.setModelAndRefresh=function(t){var e=this;return this.valueModel?this.valueModel.setModel(t).then((function(){return e.refresh()})):V.resolve()},e.prototype.resetUiToDefaults=function(){return this.setMiniFilter(null),this.setModelAndRefresh(null)},e.prototype.setModelIntoUi=function(t){this.setMiniFilter(null);var e=null==t?null:t.values;return this.setModelAndRefresh(e)},e.prototype.getModelFromUi=function(){if(!this.valueModel)throw new Error("Value model has not been created.");var t=this.valueModel.getModel();return t?{values:t,filterType:this.getFilterType()}:null},e.prototype.getFilterType=function(){return"set"},e.prototype.getValueModel=function(){return this.valueModel},e.prototype.areModelsEqual=function(t,e){return null==t&&null==e||null!=t&&null!=e&&u.areEqual(t.values,e.values)},e.prototype.setParams=function(e){var r,n=this;this.applyExcelModeOptions(e),t.prototype.setParams.call(this,e),this.setFilterParams=e,this.convertValuesToStrings=!!e.convertValuesToStrings,this.caseSensitive=!!e.caseSensitive;var o=null!==(r=e.keyCreator)&&void 0!==r?r:e.colDef.keyCreator;this.setValueFormatter(e.valueFormatter,o,this.convertValuesToStrings,!!e.treeList,!!e.colDef.refData);var i=e.column.getId().startsWith(Ct);this.treeDataTreeList=this.gridOptionsService.is("treeData")&&!!e.treeList&&i,this.getDataPath=this.gridOptionsService.get("getDataPath"),this.groupingTreeList=!!this.columnModel.getRowGroupColumns().length&&!!e.treeList&&i,this.createKey=this.generateCreateKey(o,this.convertValuesToStrings,this.treeDataTreeList||this.groupingTreeList),this.valueModel=new aM({filterParams:e,setIsLoading:function(t){return n.setIsLoading(t)},valueFormatterService:this.valueFormatterService,translate:function(t){return n.translateForSetFilter(t)},caseFormat:function(t){return n.caseFormat(t)},createKey:this.createKey,valueFormatter:this.valueFormatter,usingComplexObjects:!!o,gridOptionsService:this.gridOptionsService,columnModel:this.columnModel,valueService:this.valueService,treeDataTreeList:this.treeDataTreeList,groupingTreeList:this.groupingTreeList}),this.initialiseFilterBodyUi(),this.addEventListenersForDataChanges()},e.prototype.onAddCurrentSelectionToFilterChange=function(t){if(!this.valueModel)throw new Error("Value model has not been created.");this.valueModel.setAddCurrentSelectionToFilter(t)},e.prototype.setValueFormatter=function(t,e,r,n,o){var i=t;if(!i){if(e&&!r&&!n)throw new Error("AG Grid: Must supply a Value Formatter in Set Filter params when using a Key Creator unless convertValuesToStrings is enabled");this.noValueFormatterSupplied=!0,o||(i=function(t){return u.toStringOrNull(t.value)})}this.valueFormatter=i},e.prototype.generateCreateKey=function(t,e,r){var n=this;if(r&&!t)throw new Error("AG Grid: Must supply a Key Creator in Set Filter params when `treeList = true` on a group column, and Tree Data or Row Grouping is enabled.");return t?function(e,r){void 0===r&&(r=null);var o=n.getKeyCreatorParams(e,r);return u.makeNull(t(o))}:e?function(t){return Array.isArray(t)?t:u.makeNull(u.toStringOrNull(t))}:function(t){return u.makeNull(u.toStringOrNull(t))}},e.prototype.getFormattedValue=function(t){var e,r=this.valueModel.getValue(t);this.noValueFormatterSupplied&&(this.treeDataTreeList||this.groupingTreeList)&&Array.isArray(r)&&(r=u.last(r));var n=this.valueFormatterService.formatValue(this.setFilterParams.column,null,r,this.valueFormatter,!1);return null!==(e=null==n?u.toStringOrNull(r):n)&&void 0!==e?e:this.translateForSetFilter("blanks")},e.prototype.applyExcelModeOptions=function(t){"windows"===t.excelMode?(t.buttons||(t.buttons=["apply","cancel"]),null==t.closeOnApply&&(t.closeOnApply=!0)):"mac"===t.excelMode&&(t.buttons||(t.buttons=["reset"]),null==t.applyMiniFilterWhileTyping&&(t.applyMiniFilterWhileTyping=!0),null==t.debounceMs&&(t.debounceMs=500)),t.excelMode&&t.defaultToNothingSelected&&(t.defaultToNothingSelected=!1,u.doOnce((function(){return console.warn('AG Grid: The Set Filter Parameter "defaultToNothingSelected" value was ignored because it does not work when "excelMode" is used.')}),"setFilterExcelModeDefaultToNothingSelect"))},e.prototype.addEventListenersForDataChanges=function(){var t=this;this.isValuesTakenFromGrid()&&this.addManagedListener(this.eventService,l.EVENT_CELL_VALUE_CHANGED,(function(e){t.setFilterParams&&e.column===t.setFilterParams.column&&t.syncAfterDataChange()}))},e.prototype.syncAfterDataChange=function(){var t=this;if(!this.valueModel)throw new Error("Value model has not been created.");return this.valueModel.refreshValues().then((function(){t.refresh(),t.onBtApply(!1,!0)}))},e.prototype.setIsLoading=function(t){u.setDisplayed(this.eFilterLoading,t),t||(this.hardRefreshVirtualList=!0)},e.prototype.initialiseFilterBodyUi=function(){this.initVirtualList(),this.initMiniFilter()},e.prototype.initVirtualList=function(){var t=this;if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");var e=this.localeService.getLocaleTextFunc()("ariaFilterList","Filter List"),r=!!this.setFilterParams.treeList,n=this.virtualList=this.createBean(new C({cssIdentifier:"filter",ariaRole:r?"tree":"listbox",listName:e})),o=this.getRefElement("eSetFilterList");r&&o.classList.add("ag-set-filter-tree-list"),o&&o.appendChild(n.getGui());var i=this.setFilterParams.cellHeight;null!=i&&n.setRowHeight(i);n.setComponentCreator((function(e,n){return t.createSetListItem(e,r,n)}));var a;n.setComponentUpdater((function(e,r){return t.updateSetListItem(e,r)})),a=this.setFilterParams.suppressSelectAll?new vM(this.valueModel):new yM(this.valueModel,(function(){return t.isSelectAllSelected()})),r&&(a=new gM(a)),n.setModel(a)},e.prototype.getSelectAllLabel=function(){if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");var t=null!=this.valueModel.getMiniFilter()&&this.setFilterParams.excelMode?"selectAllSearchResults":"selectAll";return this.translateForSetFilter(t)},e.prototype.getAddSelectionToFilterLabel=function(){if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");return this.translateForSetFilter("addCurrentSelectionToFilter")},e.prototype.createSetListItem=function(t,e,r){var n=this;if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");var o=this.valueModel.hasGroups(),i=this.isSelectedExpanded(t),a=i.isSelected,s=i.isExpanded,l=this.newSetListItemAttributes(t,e),u=l.value,c=l.depth,p=l.isGroup,d=l.hasIndeterminateExpandState,h=l.selectedListener,f=l.expandedListener,v={focusWrapper:r,value:u,params:this.setFilterParams,translate:function(t){return n.translateForSetFilter(t)},valueFormatter:this.valueFormatter,item:t,isSelected:a,isTree:e,depth:c,groupsExist:o,isGroup:p,isExpanded:s,hasIndeterminateExpandState:d},y=this.createBean(new uM(v));return y.addEventListener(uM.EVENT_SELECTION_CHANGED,h),f&&y.addEventListener(uM.EVENT_EXPANDED_CHANGED,f),y},e.prototype.newSetTreeItemAttributes=function(t,e){var r,n,o,i,a,s,l=this;if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");var u=this.valueModel.hasGroups();return t.key===qA.SELECT_ALL?{value:function(){return l.getSelectAllLabel()},isGroup:u,depth:t.depth,hasIndeterminateExpandState:!0,selectedListener:function(t){return l.onSelectAll(t.isSelected)},expandedListener:function(t){return l.onExpandAll(t.item,t.isExpanded)}}:t.key===qA.ADD_SELECTION_TO_FILTER?{value:function(){return l.getAddSelectionToFilterLabel()},depth:t.depth,isGroup:!1,hasIndeterminateExpandState:!1,selectedListener:function(t){l.onAddCurrentSelectionToFilterChange(t.isSelected)}}:t.children?{value:null!==(o=null===(n=(r=this.setFilterParams).treeListFormatter)||void 0===n?void 0:n.call(r,t.treeKey,t.depth,t.parentTreeKeys))&&void 0!==o?o:t.treeKey,depth:t.depth,isGroup:!0,selectedListener:function(t){return l.onGroupItemSelected(t.item,t.isSelected)},expandedListener:function(t){return l.onExpandedChanged(t.item,t.isExpanded)}}:{value:null!==(s=null===(a=(i=this.setFilterParams).treeListFormatter)||void 0===a?void 0:a.call(i,t.treeKey,t.depth,t.parentTreeKeys))&&void 0!==s?s:t.treeKey,depth:t.depth,selectedListener:function(t){return l.onItemSelected(t.item.key,t.isSelected)}}},e.prototype.newSetListItemAttributes=function(t,e){var r=this;if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");return this.isSetFilterModelTreeItem(t)?this.newSetTreeItemAttributes(t,e):t===qA.SELECT_ALL?{value:function(){return r.getSelectAllLabel()},selectedListener:function(t){return r.onSelectAll(t.isSelected)}}:t===qA.ADD_SELECTION_TO_FILTER?{value:function(){return r.getAddSelectionToFilterLabel()},selectedListener:function(t){r.onAddCurrentSelectionToFilterChange(t.isSelected)}}:{value:this.valueModel.getValue(t),selectedListener:function(t){return r.onItemSelected(t.item,t.isSelected)}}},e.prototype.updateSetListItem=function(t,e){var r=this.isSelectedExpanded(t),n=r.isSelected,o=r.isExpanded;e.refresh(t,n,o)},e.prototype.isSelectedExpanded=function(t){var e,r;return this.isSetFilterModelTreeItem(t)?(r=t.expanded,e=t.key===qA.SELECT_ALL?this.isSelectAllSelected():t.key===qA.ADD_SELECTION_TO_FILTER?this.valueModel.isAddCurrentSelectionToFilterChecked():t.children?this.areAllChildrenSelected(t):this.valueModel.isKeySelected(t.key)):e=t===qA.SELECT_ALL?this.isSelectAllSelected():t===qA.ADD_SELECTION_TO_FILTER?this.valueModel.isAddCurrentSelectionToFilterChecked():this.valueModel.isKeySelected(t),{isSelected:e,isExpanded:r}},e.prototype.isSetFilterModelTreeItem=function(t){return void 0!==(null==t?void 0:t.treeKey)},e.prototype.initMiniFilter=function(){var t=this;if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");var e=this.eMiniFilter,r=this.localeService.getLocaleTextFunc();e.setDisplayed(!this.setFilterParams.suppressMiniFilter),e.setValue(this.valueModel.getMiniFilter()),e.onValueChange((function(){return t.onMiniFilterInput()})),e.setInputAriaLabel(r("ariaSearchFilterValues","Search filter values")),this.addManagedListener(e.getInputElement(),"keydown",(function(e){return t.onMiniFilterKeyDown(e)}))},e.prototype.afterGuiAttached=function(e){if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");t.prototype.afterGuiAttached.call(this,e),this.resetExpansion(),this.refreshVirtualList();var r=this.eMiniFilter;r.setInputPlaceholder(this.translateForSetFilter("searchOoo")),e&&e.suppressFocus||r.getFocusableElement().focus()},e.prototype.afterGuiDetached=function(){var e,r;t.prototype.afterGuiDetached.call(this),(null===(e=this.setFilterParams)||void 0===e?void 0:e.excelMode)&&this.resetMiniFilter();var n=this.getModel();!(null===(r=this.setFilterParams)||void 0===r?void 0:r.excelMode)&&this.areModelsEqual(n,this.getModelFromUi())||(this.resetUiToActiveModel(n),this.showOrHideResults())},e.prototype.applyModel=function(e){var r=this;if(void 0===e&&(e="api"),!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");this.setFilterParams.excelMode&&"rowDataUpdated"!==e&&this.valueModel.isEverythingVisibleSelected()&&this.valueModel.selectAllMatchingMiniFilter();var n=this.valueModel.showAddCurrentSelectionToFilter()&&this.valueModel.isAddCurrentSelectionToFilterChecked();if(n&&!this.getModel())return!1;var o=t.prototype.applyModel.call(this,e),i=this.getModel();return i?(n||this.valueModel.setAppliedModelKeys(new Set),i.values.forEach((function(t){r.valueModel.addToAppliedModelKeys(t)}))):n||this.valueModel.setAppliedModelKeys(null),o},e.prototype.isModelValid=function(t){return!this.setFilterParams||!this.setFilterParams.excelMode||(null==t||t.values.length>0)},e.prototype.doesFilterPass=function(t){var e=this;if(!this.setFilterParams||!this.valueModel||!this.valueModel.getCaseFormattedAppliedModelKeys())return!0;if(!this.valueModel.hasAnyAppliedModelKey())return!1;var r=t.node,n=t.data;if(this.treeDataTreeList)return this.doesFilterPassForTreeData(r,n);if(this.groupingTreeList)return this.doesFilterPassForGrouping(r,n);var o=this.getValueFromNode(r,n);return this.convertValuesToStrings?this.doesFilterPassForConvertValuesToString(r,o):null!=o&&Array.isArray(o)?0===o.length?this.valueModel.hasAppliedModelKey(null):o.some((function(t){return e.isInAppliedModel(e.createKey(t,r))})):this.isInAppliedModel(this.createKey(o,r))},e.prototype.doesFilterPassForConvertValuesToString=function(t,e){var r=this,n=this.createKey(e,t);return null!=n&&Array.isArray(n)?0===n.length?this.valueModel.hasAppliedModelKey(null):n.some((function(t){return r.isInAppliedModel(t)})):this.isInAppliedModel(n)},e.prototype.doesFilterPassForTreeData=function(t,e){var r;return!(null===(r=t.childrenAfterGroup)||void 0===r?void 0:r.length)&&this.isInAppliedModel(this.createKey(this.checkMakeNullDataPath(this.getDataPath(e))))},e.prototype.doesFilterPassForGrouping=function(t,e){var r=this,n=this.columnModel.getRowGroupColumns().map((function(e){return r.valueService.getKeyForNode(e,t)}));return n.push(this.getValueFromNode(t,e)),this.isInAppliedModel(this.createKey(this.checkMakeNullDataPath(n)))},e.prototype.checkMakeNullDataPath=function(t){return t&&(t=t.map((function(t){return u.toStringOrNull(u.makeNull(t))}))),(null==t?void 0:t.some((function(t){return null==t})))?null:t},e.prototype.isInAppliedModel=function(t){return this.valueModel.hasAppliedModelKey(t)},e.prototype.getValueFromNode=function(t,e){var r=this.setFilterParams;return(0,r.valueGetter)({api:r.api,colDef:r.colDef,column:r.column,columnApi:r.columnApi,context:r.context,data:e,getValue:function(t){return e[t]},node:t})},e.prototype.getKeyCreatorParams=function(t,e){return void 0===e&&(e=null),{value:t,colDef:this.setFilterParams.colDef,column:this.setFilterParams.column,node:e,data:null==e?void 0:e.data,api:this.setFilterParams.api,columnApi:this.setFilterParams.columnApi,context:this.setFilterParams.context}},e.prototype.onNewRowsLoaded=function(){this.isValuesTakenFromGrid()&&this.syncAfterDataChange()},e.prototype.isValuesTakenFromGrid=function(){return!!this.valueModel&&this.valueModel.getValuesType()===XP.TAKEN_FROM_GRID_VALUES},e.prototype.setFilterValues=function(t){var e=this;if(!this.valueModel)throw new Error("Value model has not been created.");this.valueModel.overrideValues(t).then((function(){e.refresh(),e.onUiChanged()}))},e.prototype.resetFilterValues=function(){if(!this.valueModel)throw new Error("Value model has not been created.");this.valueModel.setValuesType(XP.TAKEN_FROM_GRID_VALUES),this.syncAfterDataChange()},e.prototype.refreshFilterValues=function(){var t=this;if(!this.valueModel)throw new Error("Value model has not been created.");this.valueModel.isInitialised()&&this.valueModel.refreshValues().then((function(){t.refresh(),t.onUiChanged()}))},e.prototype.onAnyFilterChanged=function(){var t=this;setTimeout((function(){if(t.isAlive()){if(!t.valueModel)throw new Error("Value model has not been created.");t.valueModel.refreshAfterAnyFilterChanged().then((function(e){e&&(t.refresh(),t.showOrHideResults())}))}}),0)},e.prototype.onMiniFilterInput=function(){if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");if(this.valueModel.setMiniFilter(this.eMiniFilter.getValue())){var t=this.setFilterParams||{},e=t.applyMiniFilterWhileTyping;!t.readOnly&&e?this.filterOnAllVisibleValues(!1):this.updateUiAfterMiniFilterChange()}},e.prototype.updateUiAfterMiniFilterChange=function(){if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");var t=this.setFilterParams||{},e=t.excelMode,r=t.readOnly;null==e||r?this.refresh():null==this.valueModel.getMiniFilter()?this.resetUiToActiveModel(this.getModel()):(this.valueModel.selectAllMatchingMiniFilter(!0),this.refresh(),this.onUiChanged()),this.showOrHideResults()},e.prototype.showOrHideResults=function(){if(!this.valueModel)throw new Error("Value model has not been created.");var t=null!=this.valueModel.getMiniFilter()&&this.valueModel.getDisplayedValueCount()<1;u.setDisplayed(this.eNoMatches,t),u.setDisplayed(this.eSetFilterList,!t)},e.prototype.resetMiniFilter=function(){var t;this.eMiniFilter.setValue(null,!0),null===(t=this.valueModel)||void 0===t||t.setMiniFilter(null)},e.prototype.resetUiToActiveModel=function(t,e){var r=this;this.setModelAndRefresh(null==t?null:t.values).then((function(){r.onUiChanged(!1,"prevent"),null==e||e()}))},e.prototype.handleCancelEnd=function(e){this.setMiniFilter(null),t.prototype.handleCancelEnd.call(this,e)},e.prototype.onMiniFilterKeyDown=function(t){var e=this.setFilterParams||{},r=e.excelMode,n=e.readOnly;t.key!==c.ENTER||r||n||this.filterOnAllVisibleValues()},e.prototype.filterOnAllVisibleValues=function(t){void 0===t&&(t=!0);var e=(this.setFilterParams||{}).readOnly;if(!this.valueModel)throw new Error("Value model has not been created.");if(e)throw new Error("Unable to filter in readOnly mode.");this.valueModel.selectAllMatchingMiniFilter(!0),this.refresh(),this.onUiChanged(!1,t?"immediately":"debounce"),this.showOrHideResults()},e.prototype.focusRowIfAlive=function(t){var e=this;null!=t&&window.setTimeout((function(){if(!e.virtualList)throw new Error("Virtual list has not been created.");e.isAlive()&&e.virtualList.focusRow(t)}),0)},e.prototype.onSelectAll=function(t){if(!this.valueModel)throw new Error("Value model has not been created.");if(!this.virtualList)throw new Error("Virtual list has not been created.");t?this.valueModel.selectAllMatchingMiniFilter():this.valueModel.deselectAllMatchingMiniFilter(),this.refreshAfterSelection()},e.prototype.onGroupItemSelected=function(t,e){var r=this,n=function(t){t.children?t.children.forEach((function(t){return n(t)})):r.selectItem(t.key,e)};n(t),this.refreshAfterSelection()},e.prototype.onItemSelected=function(t,e){if(!this.valueModel)throw new Error("Value model has not been created.");if(!this.virtualList)throw new Error("Virtual list has not been created.");this.selectItem(t,e),this.refreshAfterSelection()},e.prototype.selectItem=function(t,e){e?this.valueModel.selectKey(t):this.valueModel.deselectKey(t)},e.prototype.onExpandAll=function(t,e){var r=function(t){t.filterPasses&&t.available&&t.children&&(t.children.forEach((function(t){return r(t)})),t.expanded=e)};r(t),this.refreshAfterExpansion()},e.prototype.onExpandedChanged=function(t,e){t.expanded=e,this.refreshAfterExpansion()},e.prototype.refreshAfterExpansion=function(){var t=this.virtualList.getLastFocusedRow();this.valueModel.updateDisplayedValues("expansion"),this.refresh(),this.focusRowIfAlive(t)},e.prototype.refreshAfterSelection=function(){var t=this.virtualList.getLastFocusedRow();this.refresh(),this.onUiChanged(),this.focusRowIfAlive(t)},e.prototype.setMiniFilter=function(t){this.eMiniFilter.setValue(t),this.onMiniFilterInput()},e.prototype.getMiniFilter=function(){return this.valueModel?this.valueModel.getMiniFilter():null},e.prototype.refresh=function(){if(!this.virtualList)throw new Error("Virtual list has not been created.");this.virtualList.refresh(!this.hardRefreshVirtualList),this.hardRefreshVirtualList&&(this.hardRefreshVirtualList=!1)},e.prototype.getFilterKeys=function(){return this.valueModel?this.valueModel.getKeys():[]},e.prototype.getFilterValues=function(){return this.valueModel?this.valueModel.getValues():[]},e.prototype.getValues=function(){return this.getFilterKeys()},e.prototype.refreshVirtualList=function(){this.setFilterParams&&this.setFilterParams.refreshValuesOnOpen?this.refreshFilterValues():this.refresh()},e.prototype.translateForSetFilter=function(t){return this.localeService.getLocaleTextFunc()(t,cM[t])},e.prototype.isSelectAllSelected=function(){if(!this.setFilterParams||!this.valueModel)return!1;if(this.setFilterParams.defaultToNothingSelected){if(this.valueModel.hasSelections()&&this.valueModel.isEverythingVisibleSelected())return!0;if(this.valueModel.isNothingVisibleSelected())return!1}else{if(this.valueModel.hasSelections()&&this.valueModel.isNothingVisibleSelected())return!1;if(this.valueModel.isEverythingVisibleSelected())return!0}},e.prototype.areAllChildrenSelected=function(t){var e=this,r=function(t){if(t.children){var n=!1,o=!1;return t.children.some((function(t){if(!t.filterPasses||!t.available)return!1;var e=r(t);return void 0===e||(e?n=!0:o=!0,n&&o)}))?void 0:n}return e.valueModel.isKeySelected(t.key)};return this.setFilterParams.defaultToNothingSelected?this.valueModel.hasSelections()&&r(t):r(t)},e.prototype.destroy=function(){null!=this.virtualList&&(this.virtualList.destroy(),this.virtualList=null),t.prototype.destroy.call(this)},e.prototype.caseFormat=function(t){return null==t||"string"!=typeof t||this.caseSensitive?t:t.toUpperCase()},e.prototype.resetExpansion=function(){var t,e;if(null===(t=this.setFilterParams)||void 0===t?void 0:t.treeList){var r=null===(e=this.valueModel)||void 0===e?void 0:e.getSelectAllItem();if(this.isSetFilterModelTreeItem(r)){var n=function(t){t.children&&(t.children.forEach((function(t){return n(t)})),t.expanded=!1)};n(r),this.valueModel.updateDisplayedValues("expansion")}}},e.prototype.getModelAsString=function(t){return this.filterModelFormatter.getModelAsString(t,this)},e.prototype.getPositionableElement=function(){return this.eSetFilterList},hM([o("eMiniFilter")],e.prototype,"eMiniFilter",void 0),hM([o("eFilterLoading")],e.prototype,"eFilterLoading",void 0),hM([o("eSetFilterList")],e.prototype,"eSetFilterList",void 0),hM([o("eFilterNoMatches")],e.prototype,"eNoMatches",void 0),hM([n("valueFormatterService")],e.prototype,"valueFormatterService",void 0),hM([n("columnModel")],e.prototype,"columnModel",void 0),hM([n("valueService")],e.prototype,"valueService",void 0),e}(vt),vM=function(){function t(t){this.model=t}return t.prototype.getRowCount=function(){return this.model.getDisplayedValueCount()},t.prototype.getRow=function(t){return this.model.getDisplayedItem(t)},t.prototype.isRowSelected=function(t){return this.model.isKeySelected(this.getRow(t))},t.prototype.areRowsEqual=function(t,e){return t===e},t}(),yM=function(){function t(t,e){this.model=t,this.isSelectAllSelected=e}return t.prototype.getRowCount=function(){var t=this.model.showAddCurrentSelectionToFilter()?2:1;return this.model.getDisplayedValueCount()+t},t.prototype.getRow=function(t){if(0===t)return this.model.getSelectAllItem();var e=this.model.showAddCurrentSelectionToFilter(),r=e?2:1;return 1===t&&e?this.model.getAddSelectionToFilterItem():this.model.getDisplayedItem(t-r)},t.prototype.isRowSelected=function(t){return 0===t?this.isSelectAllSelected():1===t&&this.model.showAddCurrentSelectionToFilter()?this.model.isAddCurrentSelectionToFilterChecked():this.model.isKeySelected(this.getRow(t))},t.prototype.areRowsEqual=function(t,e){return t===e},t}(),gM=function(){function t(t){this.model=t}return t.prototype.getRowCount=function(){return this.model.getRowCount()},t.prototype.getRow=function(t){return this.model.getRow(t)},t.prototype.areRowsEqual=function(t,e){return null==t&&null==e||null!=t&&null!=e&&t.treeKey===e.treeKey&&t.depth===e.depth},t}(),mM=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),bM=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},CM=function(t){function e(){var e=t.call(this,'\n            <div class="ag-floating-filter-input ag-set-floating-filter-input" role="presentation">\n                <ag-input-text-field ref="eFloatingFilterText"></ag-input-text-field>\n            </div>')||this;return e.availableValuesListenerAdded=!1,e.filterModelFormatter=new pM,e}return mM(e,t),e.prototype.destroy=function(){t.prototype.destroy.call(this)},e.prototype.init=function(t){var e=this;this.params=t,this.eFloatingFilterText.setDisabled(!0).addGuiEventListener("click",(function(){return e.params.showParentFilter()})),this.setParams(t)},e.prototype.setParams=function(t){var e=this.columnModel.getDisplayNameForColumn(t.column,"header",!0),r=this.localeService.getLocaleTextFunc();this.eFloatingFilterText.setInputAriaLabel(e+" "+r("ariaFilterInput","Filter Input"))},e.prototype.onParamsUpdated=function(t){this.params=t,this.setParams(t)},e.prototype.onParentModelChanged=function(t){this.updateFloatingFilterText(t)},e.prototype.parentSetFilterInstance=function(t){this.params.parentFilterInstance((function(e){if(!(e instanceof fM))throw new Error("AG Grid - SetFloatingFilter expects SetFilter as its parent");t(e)}))},e.prototype.addAvailableValuesListener=function(){var t=this;this.parentSetFilterInstance((function(e){var r=e.getValueModel();r&&t.addManagedListener(r,aM.EVENT_AVAILABLE_VALUES_CHANGED,(function(){return t.updateFloatingFilterText()}))})),this.availableValuesListenerAdded=!0},e.prototype.updateFloatingFilterText=function(t){var e=this;this.availableValuesListenerAdded||this.addAvailableValuesListener(),this.parentSetFilterInstance((function(r){e.eFloatingFilterText.setValue(e.filterModelFormatter.getModelAsString(t,r))}))},bM([o("eFloatingFilterText")],e.prototype,"eFloatingFilterText",void 0),bM([n("columnModel")],e.prototype,"columnModel",void 0),e}(a),SM={version:"30.2.0",moduleName:s.SetFilterModule,beans:[],userComponents:[{componentName:"agSetColumnFilter",componentClass:fM},{componentName:"agSetColumnFloatingFilter",componentClass:CM}],dependantModules:[Ft]},wM=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),xM=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},OM=function(t){function r(){var e=t.call(this)||this;return e.allComponents={},e}return wM(r,t),r.prototype.registerStatusPanel=function(t,e){this.allComponents[t]=e},r.prototype.getStatusPanel=function(t){return this.allComponents[t]},r=xM([e("statusBarService")],r)}(r),EM=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),TM=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},PM=function(t){function e(){return t.call(this,e.TEMPLATE)||this}return EM(e,t),e.prototype.postConstruct=function(){var t,e=null===(t=this.gridOptionsService.get("statusBar"))||void 0===t?void 0:t.statusPanels;if(e){var r=e.filter((function(t){return"left"===t.align}));this.createAndRenderComponents(r,this.eStatusBarLeft);var n=e.filter((function(t){return"center"===t.align}));this.createAndRenderComponents(n,this.eStatusBarCenter);var o=e.filter((function(t){return!t.align||"right"===t.align}));this.createAndRenderComponents(o,this.eStatusBarRight)}else this.setDisplayed(!1)},e.prototype.createAndRenderComponents=function(t,e){var r=this,n=[];t.forEach((function(t){var e=r.userComponentFactory.getStatusPanelCompDetails(t,{}).newAgStackInstance();e&&n.push({key:t.key||t.statusPanel,promise:e})})),V.all(n.map((function(t){return t.promise}))).then((function(){n.forEach((function(t){t.promise.then((function(n){var o=function(){r.getContext().destroyBean(n)};r.isAlive()?(r.statusBarService.registerStatusPanel(t.key,n),e.appendChild(n.getGui()),r.addDestroyFunc(o)):o()}))}))}))},e.TEMPLATE='<div class="ag-status-bar">\n            <div ref="eStatusBarLeft" class="ag-status-bar-left" role="status"></div>\n            <div ref="eStatusBarCenter" class="ag-status-bar-center" role="status"></div>\n            <div ref="eStatusBarRight" class="ag-status-bar-right" role="status"></div>\n        </div>',TM([n("userComponentFactory")],e.prototype,"userComponentFactory",void 0),TM([n("statusBarService")],e.prototype,"statusBarService",void 0),TM([o("eStatusBarLeft")],e.prototype,"eStatusBarLeft",void 0),TM([o("eStatusBarCenter")],e.prototype,"eStatusBarCenter",void 0),TM([o("eStatusBarRight")],e.prototype,"eStatusBarRight",void 0),TM([i],e.prototype,"postConstruct",null),e}(a),DM=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),AM=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},MM=function(t){function e(){return t.call(this,e.TEMPLATE)||this}return DM(e,t),e.prototype.setLabel=function(t,e){this.setDisplayed(!1);var r=this.localeService.getLocaleTextFunc();this.eLabel.innerHTML=r(t,e)},e.prototype.setValue=function(t){this.eValue.innerHTML=t},e.TEMPLATE='<div class="ag-status-name-value">\n            <span ref="eLabel"></span>:&nbsp;\n            <span ref="eValue" class="ag-status-name-value-value"></span>\n        </div>',AM([o("eLabel")],e.prototype,"eLabel",void 0),AM([o("eValue")],e.prototype,"eValue",void 0),e}(a),_M=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),RM=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},kM=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _M(e,t),e.prototype.postConstruct=function(){"clientSide"===this.gridApi.getModel().getType()?(this.setLabel("totalAndFilteredRows","Rows"),this.addCssClass("ag-status-panel"),this.addCssClass("ag-status-panel-total-and-filtered-row-count"),this.setDisplayed(!0),this.addManagedListener(this.eventService,l.EVENT_MODEL_UPDATED,this.onDataChanged.bind(this)),this.onDataChanged()):console.warn("AG Grid: agTotalAndFilteredRowCountComponent should only be used with the client side row model.")},e.prototype.onDataChanged=function(){var t=this.localeService.getLocaleTextFunc(),e=t("thousandSeparator",","),r=t("decimalSeparator","."),n=u.formatNumberCommas(this.getFilteredRowCountValue(),e,r),o=u.formatNumberCommas(this.getTotalRowCount(),e,r);if(n===o)this.setValue(n);else{var i=this.localeService.getLocaleTextFunc();this.setValue(n+" "+i("of","of")+" "+o)}},e.prototype.getFilteredRowCountValue=function(){var t=0;return this.gridApi.forEachNodeAfterFilter((function(e){e.group||t++})),t},e.prototype.getTotalRowCount=function(){var t=0;return this.gridApi.forEachNode((function(e){e.group||t++})),t},e.prototype.init=function(){},e.prototype.destroy=function(){t.prototype.destroy.call(this)},RM([n("gridApi")],e.prototype,"gridApi",void 0),RM([i],e.prototype,"postConstruct",null),e}(MM),FM=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),IM=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},LM=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return FM(e,t),e.prototype.postConstruct=function(){if(this.setLabel("filteredRows","Filtered"),"clientSide"===this.gridApi.getModel().getType()){this.addCssClass("ag-status-panel"),this.addCssClass("ag-status-panel-filtered-row-count"),this.setDisplayed(!0);var t=this.onDataChanged.bind(this);this.addManagedListener(this.eventService,l.EVENT_MODEL_UPDATED,t),t()}else console.warn("AG Grid: agFilteredRowCountComponent should only be used with the client side row model.")},e.prototype.onDataChanged=function(){var t=this.getTotalRowCountValue(),e=this.getFilteredRowCountValue(),r=this.localeService.getLocaleTextFunc(),n=r("thousandSeparator",","),o=r("decimalSeparator",".");this.setValue(u.formatNumberCommas(e,n,o)),this.setDisplayed(t!==e)},e.prototype.getTotalRowCountValue=function(){var t=0;return this.gridApi.forEachNode((function(e){return t+=1})),t},e.prototype.getFilteredRowCountValue=function(){var t=0;return this.gridApi.forEachNodeAfterFilter((function(e){e.group||(t+=1)})),t},e.prototype.init=function(){},e.prototype.destroy=function(){t.prototype.destroy.call(this)},IM([n("gridApi")],e.prototype,"gridApi",void 0),IM([i],e.prototype,"postConstruct",null),e}(MM),NM=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),GM=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},jM=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return NM(e,t),e.prototype.postConstruct=function(){this.setLabel("totalRows","Total Rows"),"clientSide"===this.gridApi.getModel().getType()?(this.addCssClass("ag-status-panel"),this.addCssClass("ag-status-panel-total-row-count"),this.setDisplayed(!0),this.addManagedListener(this.eventService,l.EVENT_MODEL_UPDATED,this.onDataChanged.bind(this)),this.onDataChanged()):console.warn("AG Grid: agTotalRowCountComponent should only be used with the client side row model.")},e.prototype.onDataChanged=function(){var t=this.localeService.getLocaleTextFunc(),e=t("thousandSeparator",","),r=t("decimalSeparator",".");this.setValue(u.formatNumberCommas(this.getRowCountValue(),e,r))},e.prototype.getRowCountValue=function(){var t=0;return this.gridApi.forEachLeafNode((function(e){return t+=1})),t},e.prototype.init=function(){},e.prototype.destroy=function(){t.prototype.destroy.call(this)},GM([n("gridApi")],e.prototype,"gridApi",void 0),GM([i],e.prototype,"postConstruct",null),e}(MM),VM=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),BM=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},UM=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return VM(e,t),e.prototype.postConstruct=function(){if(this.isValidRowModel()){this.setLabel("selectedRows","Selected"),this.addCssClass("ag-status-panel"),this.addCssClass("ag-status-panel-selected-row-count"),this.onRowSelectionChanged();var t=this.onRowSelectionChanged.bind(this);this.addManagedListener(this.eventService,l.EVENT_MODEL_UPDATED,t),this.addManagedListener(this.eventService,l.EVENT_SELECTION_CHANGED,t)}else console.warn("AG Grid: agSelectedRowCountComponent should only be used with the client and server side row model.")},e.prototype.isValidRowModel=function(){var t=this.gridApi.getModel().getType();return"clientSide"===t||"serverSide"===t},e.prototype.onRowSelectionChanged=function(){var t=this.selectionService.getSelectionCount();if(t<0)return this.setValue("?"),void this.setDisplayed(!0);var e=this.localeService.getLocaleTextFunc(),r=e("thousandSeparator",","),n=e("decimalSeparator",".");this.setValue(u.formatNumberCommas(t,r,n)),this.setDisplayed(t>0)},e.prototype.init=function(){},e.prototype.destroy=function(){t.prototype.destroy.call(this)},BM([n("gridApi")],e.prototype,"gridApi",void 0),BM([n("selectionService")],e.prototype,"selectionService",void 0),BM([i],e.prototype,"postConstruct",null),e}(MM),HM=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),zM=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},WM=function(t){function e(){return t.call(this,e.TEMPLATE)||this}return HM(e,t),e.prototype.destroy=function(){t.prototype.destroy.call(this)},e.prototype.postConstruct=function(){this.isValidRowModel()?(this.avgAggregationComp.setLabel("avg","Average"),this.countAggregationComp.setLabel("count","Count"),this.minAggregationComp.setLabel("min","Min"),this.maxAggregationComp.setLabel("max","Max"),this.sumAggregationComp.setLabel("sum","Sum"),this.addManagedListener(this.eventService,l.EVENT_RANGE_SELECTION_CHANGED,this.onRangeSelectionChanged.bind(this)),this.addManagedListener(this.eventService,l.EVENT_MODEL_UPDATED,this.onRangeSelectionChanged.bind(this))):console.warn("AG Grid: agAggregationComponent should only be used with the client and server side row model.")},e.prototype.isValidRowModel=function(){var t=this.gridApi.getModel().getType();return"clientSide"===t||"serverSide"===t},e.prototype.init=function(){},e.prototype.setAggregationComponentValue=function(t,e,r){var n=this.getAggregationValueComponent(t);if(u.exists(n)&&n){var o=this.localeService.getLocaleTextFunc(),i=o("thousandSeparator",","),a=o("decimalSeparator",".");n.setValue(u.formatNumberTwoDecimalPlacesAndCommas(e,i,a)),n.setDisplayed(r)}},e.prototype.getAggregationValueComponent=function(t){var e=t+"AggregationComp",r=null,n=this.gridOptionsService.get("statusBar"),o=u.exists(n)&&n?n.statusPanels.find((function(t){return"agAggregationComponent"===t.statusPanel})):null;return u.exists(o)&&o?(!u.exists(o.statusPanelParams)||u.exists(o.statusPanelParams)&&u.exists(o.statusPanelParams.aggFuncs)&&u.exists(o.statusPanelParams.aggFuncs.find((function(e){return e===t}))))&&(r=this[e]):r=this[e],r},e.prototype.onRangeSelectionChanged=function(){var t=this,e=this.rangeService?this.rangeService.getCellRanges():void 0,r=0,n=0,o=0,i=null,a=null,s={};e&&!u.missingOrEmpty(e)&&e.forEach((function(e){for(var l=t.rangeService.getRangeStartRow(e),c=t.rangeService.getRangeEndRow(e);;){if(u.missing(l)||!l||t.rowPositionUtils.before(c,l)||!l||!e.columns)break;e.columns.forEach((function(e){if(null!==l){var c=t.cellPositionUtils.createId({rowPinned:l.rowPinned,column:e,rowIndex:l.rowIndex});if(!s[c]){s[c]=!0;var p=t.rowRenderer.getRowNode(l);if(!u.missing(p)){var d=t.valueService.getValue(e,p);u.missing(d)||""===d||(n++,"object"==typeof d&&"value"in d&&""===(d=d.value)||("string"==typeof d&&(d=Number(d)),"number"!=typeof d||isNaN(d)||(r+=d,(null===a||d>a)&&(a=d),(null===i||d<i)&&(i=d),o++)))}}}})),l=t.cellNavigationService.getRowBelow(l)}}));var l=n>1,c=o>1;this.setAggregationComponentValue("count",n,l),this.setAggregationComponentValue("sum",r,c),this.setAggregationComponentValue("min",i,c),this.setAggregationComponentValue("max",a,c),this.setAggregationComponentValue("avg",r/o,c)},e.TEMPLATE='<div class="ag-status-panel ag-status-panel-aggregations">\n            <ag-name-value ref="avgAggregationComp"></ag-name-value>\n            <ag-name-value ref="countAggregationComp"></ag-name-value>\n            <ag-name-value ref="minAggregationComp"></ag-name-value>\n            <ag-name-value ref="maxAggregationComp"></ag-name-value>\n            <ag-name-value ref="sumAggregationComp"></ag-name-value>\n        </div>',zM([E("rangeService")],e.prototype,"rangeService",void 0),zM([n("valueService")],e.prototype,"valueService",void 0),zM([n("cellNavigationService")],e.prototype,"cellNavigationService",void 0),zM([n("rowRenderer")],e.prototype,"rowRenderer",void 0),zM([n("gridApi")],e.prototype,"gridApi",void 0),zM([n("cellPositionUtils")],e.prototype,"cellPositionUtils",void 0),zM([n("rowPositionUtils")],e.prototype,"rowPositionUtils",void 0),zM([o("sumAggregationComp")],e.prototype,"sumAggregationComp",void 0),zM([o("countAggregationComp")],e.prototype,"countAggregationComp",void 0),zM([o("minAggregationComp")],e.prototype,"minAggregationComp",void 0),zM([o("maxAggregationComp")],e.prototype,"maxAggregationComp",void 0),zM([o("avgAggregationComp")],e.prototype,"avgAggregationComp",void 0),zM([i],e.prototype,"postConstruct",null),e}(a),KM={version:"30.2.0",moduleName:s.StatusBarModule,beans:[OM],agStackComponents:[{componentName:"AgStatusBar",componentClass:PM},{componentName:"AgNameValue",componentClass:MM}],userComponents:[{componentName:"agAggregationComponent",componentClass:WM},{componentName:"agSelectedRowCountComponent",componentClass:UM},{componentName:"agTotalRowCountComponent",componentClass:jM},{componentName:"agFilteredRowCountComponent",componentClass:LM},{componentName:"agTotalAndFilteredRowCountComponent",componentClass:kM}],dependantModules:[Ft]},XM=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),YM=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},qM=function(t){function r(){var e=null!==t&&t.apply(this,arguments)||this;return e.firstRow=-1,e.lastRow=-1,e.rowCount=-1,e.rowNodesByIndex={},e}return XM(r,t),r.prototype.ensureRowHeightsValid=function(t,e,r,n){return!1},r.prototype.init=function(){this.rowHeight=this.gridOptionsService.getRowHeightAsNumber(),this.addManagedListener(this.eventService,l.EVENT_VIEWPORT_CHANGED,this.onViewportChanged.bind(this))},r.prototype.start=function(){this.gridOptionsService.get("viewportDatasource")&&this.setViewportDatasource(this.gridOptionsService.get("viewportDatasource"))},r.prototype.isLastRowIndexKnown=function(){return!0},r.prototype.destroyDatasource=function(){this.viewportDatasource&&(this.viewportDatasource.destroy&&this.viewportDatasource.destroy(),this.rowRenderer.datasourceChanged(),this.firstRow=-1,this.lastRow=-1)},r.prototype.getViewportRowModelPageSize=function(){return u.oneOrGreater(this.gridOptionsService.getNum("viewportRowModelPageSize"),5)},r.prototype.getViewportRowModelBufferSize=function(){return u.zeroOrGreater(this.gridOptionsService.getNum("viewportRowModelBufferSize"),5)},r.prototype.calculateFirstRow=function(t){var e=this.getViewportRowModelBufferSize(),r=this.getViewportRowModelPageSize(),n=t-e;return n<0?0:Math.floor(n/r)*r},r.prototype.calculateLastRow=function(t){if(-1===t)return t;var e=this.getViewportRowModelBufferSize(),r=this.getViewportRowModelPageSize(),n=t+e,o=Math.ceil(n/r)*r,i=this.rowCount-1;return Math.min(o,i)},r.prototype.onViewportChanged=function(t){var e=this.calculateFirstRow(t.firstRow),r=this.calculateLastRow(t.lastRow);this.firstRow===e&&this.lastRow===r||(this.firstRow=e,this.lastRow=r,this.purgeRowsNotInViewport(),this.viewportDatasource&&this.viewportDatasource.setViewportRange(this.firstRow,this.lastRow))},r.prototype.purgeRowsNotInViewport=function(){var t=this;Object.keys(this.rowNodesByIndex).forEach((function(e){var r=parseInt(e,10);if(r<t.firstRow||r>t.lastRow){if(t.isRowFocused(r))return;delete t.rowNodesByIndex[r]}}))},r.prototype.isRowFocused=function(t){var e=this.focusService.getFocusCellToUseAfterRefresh();return!!e&&(null==e.rowPinned&&e.rowIndex===t)},r.prototype.setViewportDatasource=function(t){this.destroyDatasource(),this.viewportDatasource=t,this.rowCount=-1,t.init?t.init({setRowCount:this.setRowCount.bind(this),setRowData:this.setRowData.bind(this),getRow:this.getRow.bind(this)}):console.warn("AG Grid: viewport is missing init method.")},r.prototype.getType=function(){return"viewport"},r.prototype.getRow=function(t){return this.rowNodesByIndex[t]||(this.rowNodesByIndex[t]=this.createBlankRowNode(t)),this.rowNodesByIndex[t]},r.prototype.getRowNode=function(t){var e;return this.forEachNode((function(r){r.id===t&&(e=r)})),e},r.prototype.getRowCount=function(){return-1===this.rowCount?0:this.rowCount},r.prototype.getRowIndexAtPixel=function(t){return 0!==this.rowHeight?Math.floor(t/this.rowHeight):0},r.prototype.getRowBounds=function(t){return{rowHeight:this.rowHeight,rowTop:this.rowHeight*t}},r.prototype.getTopLevelRowCount=function(){return this.getRowCount()},r.prototype.getTopLevelRowDisplayedIndex=function(t){return t},r.prototype.isEmpty=function(){return this.rowCount>0},r.prototype.isRowsToRender=function(){return this.rowCount>0},r.prototype.getNodesInRangeForSelection=function(t,e){var r=u.missing(t)?0:t.rowIndex,n=e.rowIndex,o=r<this.firstRow||r>this.lastRow,i=n<this.firstRow||n>this.lastRow;if(o||i)return[];for(var a=[],s=r<=n?n:r,l=r<=n?r:n;l<=s;l++)a.push(this.rowNodesByIndex[l]);return a},r.prototype.forEachNode=function(t){var e=this,r=0;Object.keys(this.rowNodesByIndex).forEach((function(n){var o=parseInt(n,10),i=e.rowNodesByIndex[o];t(i,r),r++}))},r.prototype.setRowData=function(t){var e=this;u.iterateObject(t,(function(t,r){var n=parseInt(t,10);if(n>=e.firstRow&&n<=e.lastRow){var o=e.rowNodesByIndex[n];u.missing(o)&&(o=e.createBlankRowNode(n),e.rowNodesByIndex[n]=o),o.setDataAndId(r,n.toString())}}))},r.prototype.createBlankRowNode=function(t){var e=new L(this.beans);return e.setRowHeight(this.rowHeight),e.setRowTop(this.rowHeight*t),e.setRowIndex(t),e},r.prototype.setRowCount=function(t,e){if(void 0===e&&(e=!1),t!==this.rowCount){this.rowCount=t;var r={type:l.EVENT_MODEL_UPDATED,newData:!1,newPage:!1,keepRenderedRows:e,animate:!1};this.eventService.dispatchEvent(r)}},r.prototype.isRowPresent=function(t){return!!this.getRowNode(t.id)},YM([n("rowRenderer")],r.prototype,"rowRenderer",void 0),YM([n("focusService")],r.prototype,"focusService",void 0),YM([n("beans")],r.prototype,"beans",void 0),YM([i],r.prototype,"init",null),YM([F],r.prototype,"destroyDatasource",null),r=YM([e("rowModel")],r)}(r),ZM={version:"30.2.0",moduleName:s.ViewportRowModelModule,rowModel:"viewport",beans:[qM],dependantModules:[Ft]},JM=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},$M=cv,QM=Jl,t_=Kl,e_=Xl,r_=function(t){return t instanceof Date&&!isNaN(+t)},n_=Us,o_=pp,i_=Xv,a_=cf,s_=Bf;!function(t){t[t.SERIES_FILL_ZINDEX=50]="SERIES_FILL_ZINDEX",t[t.AXIS_LINE_ZINDEX=500]="AXIS_LINE_ZINDEX",t[t.SERIES_STROKE_ZINDEX=1e3]="SERIES_STROKE_ZINDEX",t[t.SERIES_LABEL_ZINDEX=1500]="SERIES_LABEL_ZINDEX",t[t.CROSSHAIR_ZINDEX=2e3]="CROSSHAIR_ZINDEX",t[t.SERIES_MARKERS_ZINDEX=2500]="SERIES_MARKERS_ZINDEX"}(iM||(iM={}));var l_=function(){this.type="category",this.stroke="rgb(204, 214, 235)",this.strokeWidth=1},u_=function(){function t(){this.id=n_(this),this.seriesRect={x:0,y:0,width:0,height:0},this._context=void 0,this._container=void 0,this._data=void 0,this.padding=new o_(3),this.xKey="x",this.yKey="y",this.dataType=void 0,this.xData=[],this.yData=[],this.min=void 0,this.max=void 0,this.yScale=new i_,this.axis=new l_,this.highlightStyle={size:6,fill:"yellow",stroke:"silver",strokeWidth:1},this._width=100,this._height=100,this.smallestInterval=void 0,this.layoutId=0,this.defaultDateFormatter=new Intl.DateTimeFormat("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}),this._onMouseMove=this.onMouseMove.bind(this),this._onMouseOut=this.onMouseOut.bind(this);var e=new fl;this.rootGroup=e;var r=document.createElement("div");r.setAttribute("class","ag-sparkline-wrapper");var n=new xl({document:document});if(this.scene=n,this.canvasElement=n.canvas.element,n.root=e,n.container=r,n.resize(this.width,this.height),this.seriesRect.width=this.width,this.seriesRect.height=this.height,-1===t.tooltipDocuments.indexOf(document)){var o=document.createElement("style");o.innerHTML="\n.ag-sparkline-tooltip-wrapper {\n    position: absolute;\n    user-select: none;\n    pointer-events: none;\n}\n\n.ag-sparkline-tooltip {\n    position: relative;\n    font: 12px arial,sans-serif;\n    border-radius: 2px;\n    box-shadow: 0 1px 3px rgb(0 0 0 / 20%), 0 1px 1px rgb(0 0 0 / 14%);\n    line-height: 1.7em;\n    overflow: hidden;\n    white-space: nowrap;\n    z-index: 99999;\n    background-color: rgb(255, 255, 255);\n    color: rgba(0,0,0, 0.67);\n}\n\n.ag-sparkline-tooltip-content {\n    padding: 0 7px;\n    opacity: 1;\n}\n\n.ag-sparkline-tooltip-title {\n    padding-left: 7px;\n    opacity: 1;\n}\n\n.ag-sparkline-tooltip-wrapper-hidden {\n    top: -10000px !important;\n}\n\n.ag-sparkline-wrapper {\n    box-sizing: border-box;\n    overflow: hidden;\n}\n",document.head.insertBefore(o,document.head.querySelector("style")),t.tooltipDocuments.push(document)}this.setupDomEventListeners(this.scene.canvas.element)}return Object.defineProperty(t.prototype,"context",{get:function(){return this._context},set:function(t){this._context!==t&&(this._context=t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"container",{get:function(){return this._container},set:function(t){if(this._container!==t){var e=this.canvasElement.parentNode;null!=e&&e.removeChild(this.canvasElement),t&&t.appendChild(this.canvasElement),this._container=t}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"data",{get:function(){return this._data},set:function(t){this._data!==t&&(this._data=t,this.processData(),this.mouseMoveEvent&&this.highlightedDatum&&this.updateHitPoint(this.mouseMoveEvent))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._width},set:function(t){this._width!==t&&(this._width=t,this.scene.resize(t,this.height),this.scheduleLayout())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},set:function(t){this._height!==t&&(this._height=t,this.scene.resize(this.width,t),this.scheduleLayout())},enumerable:!1,configurable:!0}),t.prototype.update=function(){},t.prototype.updateYScale=function(){this.updateYScaleRange(),this.updateYScaleDomain()},t.prototype.updateYScaleDomain=function(){},t.prototype.updateYScaleRange=function(){var t=this.yScale,e=this.seriesRect;t.range=[e.height,0]},t.prototype.updateXScale=function(){var t=this.axis.type;this.xScale=this.getXScale(t),this.updateXScaleRange(),this.updateXScaleDomain()},t.prototype.updateXScaleRange=function(){this.xScale.range=[0,this.seriesRect.width]},t.prototype.updateXScaleDomain=function(){var t,e=this.xData,r=this.xScale;(r instanceof i_||r instanceof s_)&&(t=$M(e)),this.xScale.domain=t?t.slice():e},t.prototype.getXScale=function(t){switch(void 0===t&&(t="category"),t){case"number":return new i_;case"time":return new s_;case"category":default:return new a_}},t.prototype.updateAxisLine=function(){},t.prototype.updateAxes=function(){this.updateYScale(),this.updateXScale(),this.updateAxisLine()},t.prototype.updateCrosshairs=function(){this.updateXCrosshairLine(),this.updateYCrosshairLine()},t.prototype.generateNodeData=function(){return[]},t.prototype.getNodeData=function(){return[]},t.prototype.updateNodes=function(){},t.prototype.updateXCrosshairLine=function(){},t.prototype.updateYCrosshairLine=function(){},t.prototype.highlightDatum=function(t){this.updateNodes()},t.prototype.dehighlightDatum=function(){this.highlightedDatum=void 0,this.updateNodes(),this.updateCrosshairs()},t.prototype.onMouseMove=function(t){this.mouseMoveEvent=t,this.updateHitPoint(t)},t.prototype.updateHitPoint=function(t){var e,r,n,o=this.pickClosestSeriesNodeDatum(t.offsetX,t.offsetY);if(o){var i=this.highlightedDatum;this.highlightedDatum=o,(this.highlightedDatum&&!i||this.highlightedDatum&&i&&this.highlightedDatum!==i)&&(this.highlightDatum(o),this.updateCrosshairs(),this.scene.render().catch((function(t){return console.error("AG Grid - chart rendering failed",t)}))),(null===(n=null===(r=null===(e=this.processedOptions)||void 0===e?void 0:e.tooltip)||void 0===r?void 0:r.enabled)||void 0===n||n)&&this.handleTooltip(t,o)}},t.prototype.onMouseOut=function(t){this.dehighlightDatum(),this.tooltip.toggle(!1),this.scene.render().catch((function(t){return console.error("AG Grid - chart rendering failed",t)}))},t.prototype.processData=function(){var t=this,e=this.data,r=this.yData,n=this.xData;if(e&&!this.invalidData(this.data)){r.length=0,n.length=0;var o=e.length,i=this.getDataType(e);this.dataType=i;var a,s=this.axis.type,l="number"!==s&&"time"!==s?"category":s,u="number"===l||"time"===l,c=function(e,r){null==t.smallestInterval&&(t.smallestInterval={x:1/0,y:1/0});var n=t.smallestInterval.x,o=Math.abs(e-r);o>0&&o<n&&(t.smallestInterval.x=o)};if("number"===i)for(var p=0;p<o;p++){var d=p,h=e[p],f=this.getDatum(d,l),v=this.getDatum(h,"number");u&&c(f,a),n.push(f),r.push(v),a=f}else if("array"===i)for(p=0;p<o;p++){var y=e[p];if(Array.isArray(y)){d=y[0],h=y[1],f=this.getDatum(d,l),v=this.getDatum(h,"number");if(null==f)continue;u&&c(f,a),n.push(f),r.push(v),a=f}}else if("object"===i){var g=this.yKey,m=this.xKey;for(p=0;p<o;p++){if("object"==typeof(y=e[p])&&!Array.isArray(y)){d=y[m],h=y[g],f=this.getDatum(d,l),v=this.getDatum(h,"number");if(null==f)continue;u&&c(f,a),n.push(f),r.push(v),a=f}}}this.updateAxes(),this.immediateLayout()}},t.prototype.getDataType=function(t){var e,r;try{for(var n=JM(t),o=n.next();!o.done;o=n.next()){var i=o.value;if(null!=i){if(QM(i))return"number";if(Array.isArray(i))return"array";if("object"==typeof i)return"object"}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}},t.prototype.getDatum=function(t,e){if("number"===e&&QM(t)||"time"===e&&(QM(t)||r_(t)))return t;if("category"===e){if(t_(t)||r_(t)||QM(t))return{toString:function(){return String(t)}};if(e_(t))return t}},Object.defineProperty(t.prototype,"layoutScheduled",{get:function(){return!!this.layoutId},enumerable:!1,configurable:!0}),t.prototype.scheduleLayout=function(){var t=this;this.layoutId&&cancelAnimationFrame(this.layoutId),this.layoutId=requestAnimationFrame((function(){t.immediateLayout(),t.layoutId=0}))},t.prototype.immediateLayout=function(){this.setSparklineDimensions(),this.invalidData(this.data)||(this.updateXScaleRange(),this.updateYScaleRange(),this.updateAxisLine(),this.update(),this.scene.render().catch((function(t){return console.error("AG Grid - chart rendering failed",t)})))},t.prototype.setSparklineDimensions=function(){var t=this,e=t.width,r=t.height,n=t.padding,o=t.seriesRect,i=t.rootGroup,a=e-n.left-n.right,s=r-n.top-n.bottom;o.width=a,o.height=s,o.x=n.left,o.y=n.top,i.translationX=o.x,i.translationY=o.y},t.prototype.pickClosestSeriesNodeDatum=function(t,e){for(var r,n=1/0,o=this.rootGroup.transformPoint(t,e),i=this.getNodeData(),a=0;a<i.length;a++){var s=i[a];if(!s.point)return;var l=this.getDistance(o,s.point);l<=n&&(n=l,r=s)}return r},t.prototype.getDistance=function(t,e){return Math.abs(t.x-e.x)},t.prototype.handleTooltip=function(t,e){var r,n,o=e.seriesDatum,i=this.canvasElement,a=t.clientX,s=t.clientY,l=null===(r=this.processedOptions)||void 0===r?void 0:r.tooltip,u={pageX:a,pageY:s,position:{xOffset:null==l?void 0:l.xOffset,yOffset:null==l?void 0:l.yOffset},container:null==l?void 0:l.container};null==u.container&&(u.container=i);var c=o.y,p=o.x,d=null===(n=null==l?void 0:l.enabled)||void 0===n||n,h=null==l?void 0:l.renderer;if(h){var f=h({context:this.context,datum:o,yValue:c,xValue:p});d="string"!=typeof f&&void 0!==f.enabled?f.enabled:d}var v=d&&void 0!==o.y&&this.getTooltipHtml(e);v&&this.tooltip.show(u,v)},t.prototype.formatNumericDatum=function(t){return String(Math.round(10*t)/10)},t.prototype.formatDatum=function(t){var e=this.axis.type||"category";return"number"===e&&"number"==typeof t?this.formatNumericDatum(t):"time"===e&&(t instanceof Date||QM(t))?this.defaultDateFormatter.format(t):String(t)},t.prototype.setupDomEventListeners=function(t){t.addEventListener("mousemove",this._onMouseMove),t.addEventListener("mouseout",this._onMouseOut)},t.prototype.cleanupDomEventListeners=function(t){t.removeEventListener("mousemove",this._onMouseMove),t.removeEventListener("mouseout",this._onMouseOut)},t.prototype.invalidData=function(t){return!t||!Array.isArray(t)||0===t.length},t.prototype.destroy=function(){this.scene.container=void 0,this.container=void 0,this.cleanupDomEventListeners(this.scene.canvas.element)},t.tooltipDocuments=[],t}();function c_(t,e){var r,n,o;if("string"==typeof t)return t;e=null!=e?e:{};var i,a,s=t.content,l=void 0===s?null!==(r=e.content)&&void 0!==r?r:"":s,u=t.title,c=void 0===u?null!==(n=e.title)&&void 0!==n?n:void 0:u,p=t.color,d=void 0===p?e.color:p,h=t.backgroundColor,f=void 0===h?e.backgroundColor:h,v=t.opacity,y=void 0===v?null!==(o=e.opacity)&&void 0!==o?o:1:v;d?(i=c?'<span class="'+p_.class+'-title"; style="color: '+d+'">'+c+"</span>":"",a='<span class="'+p_.class+'-content" style="color: '+d+'">'+l+"</span>"):(i=c?'<span class="'+p_.class+'-title">'+c+"</span>":"",a='<span class="'+p_.class+'-content">'+l+"</span>");var g="opacity: "+y;return f&&(g+="; background-color: "+f.toLowerCase()),'<div class="'+p_.class+'" style="'+g+'">\n                '+i+"\n                "+a+"\n            </div>"}var p_=function(){function t(){this.element=document.createElement("div"),document.body.appendChild(this.element)}return t.prototype.isVisible=function(){var e=this.element;if(e.classList)return!e.classList.contains(t.class+"-wrapper-hidden");var r=e.getAttribute("class");return!!r&&r.split(" ").indexOf(t.class+"-wrapper-hidden")<0},t.prototype.updateClass=function(e){var r=[t.class+"-wrapper"];!0!==e&&r.push(t.class+"-wrapper-hidden"),this.element.setAttribute("class",r.join(" "))},t.prototype.show=function(t,e){var r,n,o,i;this.toggle(!1);var a=this.element;if(void 0!==e)a.innerHTML=e;else if(!a.innerHTML)return;var s=null!==(n=null===(r=t.position)||void 0===r?void 0:r.xOffset)&&void 0!==n?n:10,l=null!==(i=null===(o=t.position)||void 0===o?void 0:o.yOffset)&&void 0!==i?i:0,u=t.pageX+s,c=t.pageY+l,p=a.getBoundingClientRect(),d=window.innerWidth-p.width;if(t.container){var h=t.container.getBoundingClientRect();d=h.left+(h.width-p.width)}u>d&&(u=t.pageX-a.clientWidth-s),"undefined"!=typeof scrollX&&(u+=scrollX),"undefined"!=typeof scrollY&&(c+=scrollY),a.style.left=Math.round(u)+"px",a.style.top=Math.round(c)+"px",this.toggle(!0)},t.prototype.toggle=function(t){this.updateClass(t)},t.prototype.destroy=function(){var t=this.element.parentNode;t&&t.removeChild(this.element)},t.class="ag-sparkline-tooltip",t}();function d_(t){switch(t){case"circle":return oh;case"square":return Qd;case"diamond":return lh;default:return oh}}function h_(t,e){void 0===e&&(e="solid");var r={solid:[],dash:[4,3],dot:[1,3],dashDot:[4,3,1,3],dashDotDot:[4,3,1,3,1,3],shortDot:[1,1],shortDash:[3,1],shortDashDot:[3,1,1,1],shortDashDotDot:[3,1,1,1,1,1],longDash:[8,3],longDashDot:[8,3,1,3],longDashDotDot:[8,3,1,3,1,3]},n={solid:[],dash:[3,3],dot:[0,3],dashDot:[3,3,0,3],dashDotDot:[3,3,0,3,0,3],shortDot:[0,2],shortDash:[2,2],shortDashDot:[2,2,0,2],shortDashDotDot:[2,2,0,2,0,2],longDash:[7,3],longDashDot:[7,3,0,3],longDashDotDot:[7,3,0,3,0,3]};return"round"===t||"square"===t?null==n[e]?(console.warn("'"+e+"' is not a valid 'lineDash' option."),n.solid):n[e]:null==r[e]?(console.warn("'"+e+"' is not a valid 'lineDash' option."),r.solid):r[e]}var f_,v_,y_=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),g_=cv,m_=cf,b_=function(){this.enabled=!0,this.shape="circle",this.size=0,this.fill="rgb(124, 181, 236)",this.stroke="rgb(124, 181, 236)",this.strokeWidth=1,this.formatter=void 0},C_=function(){this.stroke="rgb(124, 181, 236)",this.strokeWidth=1},S_=function(){this.xLine={enabled:!0,stroke:"rgba(0,0,0, 0.54)",strokeWidth:1,lineDash:"solid",lineCap:void 0},this.yLine={enabled:!1,stroke:"rgba(0,0,0, 0.54)",strokeWidth:1,lineDash:"solid",lineCap:void 0}},w_=function(t){function e(){var e=t.call(this)||this;return e.fill="rgba(124, 181, 236, 0.25)",e.strokePath=new Xd,e.fillPath=new Xd,e.xCrosshairLine=new hf,e.yCrosshairLine=new hf,e.areaSparklineGroup=new fl,e.xAxisLine=new hf,e.markers=new fl,e.markerSelection=Fd.select(e.markers,(function(){return e.markerFactory()})),e.markerSelectionData=[],e.marker=new b_,e.line=new C_,e.crosshairs=new S_,e.rootGroup.append(e.areaSparklineGroup),e.xAxisLine.zIndex=iM.AXIS_LINE_ZINDEX,e.fillPath.zIndex=iM.SERIES_FILL_ZINDEX,e.strokePath.zIndex=iM.SERIES_STROKE_ZINDEX,e.xCrosshairLine.zIndex=iM.CROSSHAIR_ZINDEX,e.yCrosshairLine.zIndex=iM.CROSSHAIR_ZINDEX,e.markers.zIndex=iM.SERIES_MARKERS_ZINDEX,e.areaSparklineGroup.append([e.fillPath,e.xAxisLine,e.strokePath,e.xCrosshairLine,e.yCrosshairLine,e.markers]),e}return y_(e,t),e.prototype.markerFactory=function(){return new(d_(this.marker.shape))},e.prototype.getNodeData=function(){return this.markerSelectionData},e.prototype.update=function(){var t=this.generateNodeData();if(t){var e=t.nodeData,r=t.fillData,n=t.strokeData;this.markerSelectionData=e,this.updateSelection(e),this.updateNodes(),this.updateStroke(n),this.updateFill(r)}},e.prototype.updateYScaleDomain=function(){var t=this.yData,e=this.yScale,r=g_(t),n=0,o=1;void 0!==r&&(n=this.min=r[0],o=this.max=r[1]),n=n<0?n:0,o=o<0?0:o,e.domain=[n,o]},e.prototype.generateNodeData=function(){var t=this,e=t.data,r=t.yData,n=t.xData,o=t.xScale,i=t.yScale;if(e){for(var a,s,l,u,c=!(o instanceof m_),p=c?0:o.bandwidth/2,d=r.length,h=[],f=[],v=[],y=i.convert(0),g=0;g<d;g++){var m=r[g],b=n[g],C=o.convert(c?o.toDomain(b):b)+p,S=void 0===m?NaN:i.convert(m);g+1<d&&(u=o.convert(c?o.toDomain(n[g+1]):n[g+1])+p),v.push({seriesDatum:{x:b,y:m},point:{x:C,y:S}}),void 0===m&&void 0!==l?(f.push({seriesDatum:void 0,point:{x:l,y:y}}),void 0!==u&&f.push({seriesDatum:void 0,point:{x:u,y:y}})):void 0!==m&&(f.push({seriesDatum:{x:b,y:m},point:{x:C,y:S}}),h.push({seriesDatum:{x:b,y:m},point:{x:C,y:S}}),a=void 0!==a?a:C,s=C),l=C}return f.push({seriesDatum:void 0,point:{x:s,y:y}},{seriesDatum:void 0,point:{x:a,y:y}}),{nodeData:h,fillData:f,strokeData:v}}},e.prototype.updateAxisLine=function(){var t=this.xScale,e=this.yScale,r=this.axis,n=this.xAxisLine;n.x1=t.range[0],n.x2=t.range[1],n.y1=n.y2=0,n.stroke=r.stroke,n.strokeWidth=r.strokeWidth;var o=e.convert(0);n.translationY=o},e.prototype.updateSelection=function(t){this.markerSelection.update(t)},e.prototype.updateNodes=function(){var t=this,e=this.highlightedDatum,r=this.highlightStyle,n=this.marker,o=r.size,i=r.fill,a=r.stroke,s=r.strokeWidth,l=n.formatter;this.markerSelection.each((function(r,u,c){var p=u.point,d=u.seriesDatum;if(p){var h,f=u===e,v=f&&void 0!==i?i:n.fill,y=f&&void 0!==a?a:n.stroke,g=f&&void 0!==s?s:n.strokeWidth,m=f&&void 0!==o?o:n.size;if(l){var b=0===c,C=c===t.markerSelectionData.length-1,S=d.y===t.min,w=d.y===t.max;h=l({datum:u,xValue:d.x,yValue:d.y,min:S,max:w,first:b,last:C,fill:v,stroke:y,strokeWidth:g,size:m,highlighted:f})}r.size=h&&null!=h.size?h.size:m,r.fill=h&&null!=h.fill?h.fill:v,r.stroke=h&&null!=h.stroke?h.stroke:y,r.strokeWidth=h&&null!=h.strokeWidth?h.strokeWidth:g,r.translationX=p.x,r.translationY=p.y,r.visible=h&&null!=h.enabled?h.enabled:n.enabled&&r.size>0}}))},e.prototype.updateStroke=function(t){var e=this.strokePath,r=this.yData,n=this.line;if(!(r.length<2)){var o=e.path,i=t.length,a=!0;o.clear();for(var s=0;s<i;s++){var l=t[s],u=l.point,c=l.seriesDatum,p=u.x,d=u.y;null==c.y?a=!0:a?(o.moveTo(p,d),a=!1):o.lineTo(p,d)}e.lineJoin=e.lineCap="round",e.fill=void 0,e.stroke=n.stroke,e.strokeWidth=n.strokeWidth}},e.prototype.updateFill=function(t){var e=this.fillPath,r=this.yData,n=this.fill,o=e.path,i=t.length;if(o.clear(),!(r.length<2)){for(var a=0;a<i;a++){var s=t[a].point,l=s.x,u=s.y;a>0?o.lineTo(l,u):o.moveTo(l,u)}o.closePath(),e.lineJoin="round",e.stroke=void 0,e.fill=n}},e.prototype.updateXCrosshairLine=function(){var t,e=this.yScale,r=this.xCrosshairLine,n=this.highlightedDatum,o=this.crosshairs.xLine;if(o.enabled&&null!=n){r.y1=e.range[0],r.y2=e.range[1],r.x1=r.x2=0,r.stroke=o.stroke,r.strokeWidth=null!==(t=o.strokeWidth)&&void 0!==t?t:1,r.lineCap="round"===o.lineCap||"square"===o.lineCap?o.lineCap:void 0;var i=o.lineDash;r.lineDash=Array.isArray(i)?i:h_(r.lineCap,o.lineDash),r.translationX=n.point.x}else r.strokeWidth=0},e.prototype.updateYCrosshairLine=function(){var t,e=this.xScale,r=this.yCrosshairLine,n=this.highlightedDatum,o=this.crosshairs.yLine;if(o.enabled&&null!=n){r.x1=e.range[0],r.x2=e.range[1],r.y1=r.y2=0,r.stroke=o.stroke,r.strokeWidth=null!==(t=o.strokeWidth)&&void 0!==t?t:1,r.lineCap="round"===o.lineCap||"square"===o.lineCap?o.lineCap:void 0;var i=o.lineDash;r.lineDash=Array.isArray(i)?i:h_(r.lineCap,o.lineDash),r.translationY=n.point.y}else r.strokeWidth=0},e.prototype.getTooltipHtml=function(t){var e,r,n=this.dataType,o=t.seriesDatum,i=o.y,a=o.x,s={content:this.formatNumericDatum(i),title:"array"===n||"object"===n?this.formatDatum(a):void 0},l=null===(r=null===(e=this.processedOptions)||void 0===e?void 0:e.tooltip)||void 0===r?void 0:r.renderer;return l?c_(l({context:this.context,datum:o,yValue:i,xValue:a}),s):c_(s)},e.className="AreaSparkline",e}(u_),x_=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),O_=cv,E_=cf,T_=function(){this.enabled=!0,this.shape="circle",this.size=0,this.fill="rgb(124, 181, 236)",this.stroke="rgb(124, 181, 236)",this.strokeWidth=1,this.formatter=void 0},P_=function(){this.stroke="rgb(124, 181, 236)",this.strokeWidth=1},D_=function(){this.xLine={enabled:!0,stroke:"rgba(0,0,0, 0.54)",strokeWidth:1,lineDash:"solid",lineCap:void 0},this.yLine={enabled:!1,stroke:"rgba(0,0,0, 0.54)",strokeWidth:1,lineDash:"solid",lineCap:void 0}},A_=function(t){function e(){var e=t.call(this)||this;return e.linePath=new Xd,e.xCrosshairLine=new hf,e.yCrosshairLine=new hf,e.lineSparklineGroup=new fl,e.markers=new fl,e.markerSelection=Fd.select(e.markers,(function(){return e.markerFactory()})),e.markerSelectionData=[],e.marker=new T_,e.line=new P_,e.crosshairs=new D_,e.rootGroup.append(e.lineSparklineGroup),e.linePath.zIndex=iM.SERIES_STROKE_ZINDEX,e.xCrosshairLine.zIndex=iM.CROSSHAIR_ZINDEX,e.yCrosshairLine.zIndex=iM.CROSSHAIR_ZINDEX,e.markers.zIndex=iM.SERIES_MARKERS_ZINDEX,e.lineSparklineGroup.append([e.linePath,e.xCrosshairLine,e.yCrosshairLine,e.markers]),e}return x_(e,t),e.prototype.getNodeData=function(){return this.markerSelectionData},e.prototype.markerFactory=function(){return new(d_(this.marker.shape))},e.prototype.onMarkerShapeChange=function(){this.markerSelection=this.markerSelection.clear(),this.scheduleLayout()},e.prototype.update=function(){var t=this.generateNodeData();t&&(this.markerSelectionData=t,this.updateSelection(t),this.updateNodes(),this.updateLine())},e.prototype.updateYScaleDomain=function(){var t=this.yData,e=this.yScale,r=O_(t),n=0,o=1;if(void 0!==r&&(n=this.min=r[0],o=this.max=r[1]),n===o){var i=Math.abs(.01*n);n-=i,o+=i}e.domain=[n,o]},e.prototype.generateNodeData=function(){var t=this,e=t.data,r=t.yData,n=t.xData,o=t.xScale,i=t.yScale;if(e){for(var a=!(o instanceof E_),s=a?0:o.bandwidth/2,l=[],u=0;u<r.length;u++){var c=r[u],p=n[u];if(null!=c){var d=o.convert(a?o.toDomain(p):p)+s,h=void 0===c?NaN:i.convert(c);l.push({seriesDatum:{x:p,y:c},point:{x:d,y:h}})}}return l}},e.prototype.updateSelection=function(t){this.markerSelection.update(t)},e.prototype.updateNodes=function(){var t=this,e=this.highlightedDatum,r=this.highlightStyle,n=this.marker,o=r.size,i=r.fill,a=r.stroke,s=r.strokeWidth,l=n.formatter;this.markerSelection.each((function(r,u,c){var p,d=u===e,h=d&&void 0!==i?i:n.fill,f=d&&void 0!==a?a:n.stroke,v=d&&void 0!==s?s:n.strokeWidth,y=d&&void 0!==o?o:n.size,g=u.seriesDatum,m=u.point;if(l){var b=0===c,C=c===t.markerSelectionData.length-1,S=g.y===t.min,w=g.y===t.max;p=l({datum:u,xValue:g.x,yValue:g.y,min:S,max:w,first:b,last:C,fill:h,stroke:f,strokeWidth:v,size:y,highlighted:d})}r.size=p&&null!=p.size?p.size:y,r.fill=p&&null!=p.fill?p.fill:h,r.stroke=p&&null!=p.stroke?p.stroke:f,r.strokeWidth=p&&null!=p.strokeWidth?p.strokeWidth:v,r.translationX=m.x,r.translationY=m.y,r.visible=p&&null!=p.enabled?p.enabled:n.enabled&&r.size>0}))},e.prototype.updateLine=function(){var t=this,e=t.linePath,r=t.yData,n=t.xData,o=t.xScale,i=t.yScale,a=t.line;if(!(r.length<2)){var s=!(o instanceof E_),l=e.path,u=r.length,c=s?0:o.bandwidth/2,p=!0;l.clear();for(var d=0;d<u;d++){var h=n[d],f=r[d],v=o.convert(s?o.toDomain(h):h)+c,y=void 0===f?NaN:i.convert(f);null==f?p=!0:p?(l.moveTo(v,y),p=!1):l.lineTo(v,y)}e.fill=void 0,e.stroke=a.stroke,e.strokeWidth=a.strokeWidth}},e.prototype.updateXCrosshairLine=function(){var t,e=this.yScale,r=this.xCrosshairLine,n=this.highlightedDatum,o=this.crosshairs.xLine;if(o.enabled&&null!=n){r.y1=e.range[0],r.y2=e.range[1],r.x1=r.x2=0,r.stroke=o.stroke,r.strokeWidth=null!==(t=o.strokeWidth)&&void 0!==t?t:1,r.lineCap="round"===o.lineCap||"square"===o.lineCap?o.lineCap:void 0;var i=o.lineDash;r.lineDash=Array.isArray(i)?i:h_(r.lineCap,o.lineDash),r.translationX=n.point.x}else r.strokeWidth=0},e.prototype.updateYCrosshairLine=function(){var t,e=this.xScale,r=this.yCrosshairLine,n=this.highlightedDatum,o=this.crosshairs.yLine;if(o.enabled&&null!=n){r.x1=e.range[0],r.x2=e.range[1],r.y1=r.y2=0,r.stroke=o.stroke,r.strokeWidth=null!==(t=o.strokeWidth)&&void 0!==t?t:1,r.lineCap="round"===o.lineCap||"square"===o.lineCap?o.lineCap:void 0;var i=o.lineDash;r.lineDash=Array.isArray(i)?i:h_(r.lineCap,o.lineDash),r.translationY=n.point.y}else r.strokeWidth=0},e.prototype.getTooltipHtml=function(t){var e,r,n=this.dataType,o=t.seriesDatum,i=o.y,a=o.x,s={content:this.formatNumericDatum(i),title:"array"===n||"object"===n?this.formatDatum(a):void 0},l=null===(r=null===(e=this.processedOptions)||void 0===e?void 0:e.tooltip)||void 0===r?void 0:r.renderer;return l?c_(l({context:this.context,datum:o,yValue:i,xValue:a}),s):c_(s)},e.className="LineSparkline",e}(u_),M_=function(){this.enabled=!0,this.fontSize=8,this.fontFamily="Verdana, sans-serif",this.fontStyle=void 0,this.fontWeight=void 0,this.color="rgba(70, 70, 70, 1)"},__=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),R_=cv;!function(t){t[t.Rect=0]="Rect",t[t.Label=1]="Label"}(f_||(f_={})),function(t){t.InsideBase="insideBase",t.InsideEnd="insideEnd",t.Center="center",t.OutsideEnd="outsideEnd"}(v_||(v_={}));var k_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.formatter=void 0,e.placement=v_.InsideEnd,e}return __(e,t),e}(M_),F_=function(t){function e(){var e=t.call(this)||this;return e.fill="rgb(124, 181, 236)",e.stroke="silver",e.strokeWidth=0,e.paddingInner=.1,e.paddingOuter=.2,e.valueAxisDomain=void 0,e.formatter=void 0,e.axisLine=new hf,e.bandWidth=0,e.sparklineGroup=new fl,e.rectGroup=new fl,e.labelGroup=new fl,e.rectSelection=Fd.select(e.rectGroup,Ym),e.labelSelection=Fd.select(e.labelGroup,Gl),e.nodeSelectionData=[],e.label=new k_,e.rootGroup.append(e.sparklineGroup),e.rectGroup.zIndex=iM.SERIES_FILL_ZINDEX,e.axisLine.zIndex=iM.AXIS_LINE_ZINDEX,e.labelGroup.zIndex=iM.SERIES_LABEL_ZINDEX,e.sparklineGroup.append([e.rectGroup,e.axisLine,e.labelGroup]),e.axisLine.lineCap="round",e.label.enabled=!1,e}return __(e,t),e.prototype.getNodeData=function(){return this.nodeSelectionData},e.prototype.update=function(){this.updateSelections(),this.updateNodes()},e.prototype.updateSelections=function(){var t=this.generateNodeData();t&&(this.nodeSelectionData=t,this.updateRectSelection(t),this.updateLabelSelection(t))},e.prototype.updateNodes=function(){this.updateRectNodes(),this.updateLabelNodes()},e.prototype.calculateStep=function(t){var e,r=this.xScale,n=this.paddingInner,o=this.paddingOuter,i=this.smallestInterval,a=(r.domain[1]-r.domain[0])/(null!==(e=null==i?void 0:i.x)&&void 0!==e?e:1)+1,s=Math.min(a,50),l=s-1;return t/Math.max(1,2*o+l*n+s)},e.prototype.updateYScaleDomain=function(){var t=this.yScale,e=this.yData,r=this.valueAxisDomain,n=R_(e),o=0,i=1;void 0!==n&&(o=this.min=n[0],i=this.max=n[1]),o=o<0?o:0,i=i<0?0:i,r&&(r[1]<i&&(r[1]=i),r[0]>o&&(r[0]=o)),t.domain=r||[o,i]},e.prototype.updateRectSelection=function(t){this.rectSelection.update(t)},e.prototype.updateRectNodes=function(){var t=this,e=this,r=e.highlightedDatum,n=e.formatter,o=e.fill,i=e.stroke,a=e.strokeWidth,s=this.highlightStyle,l=s.fill,u=s.stroke,c=s.strokeWidth;this.rectSelection.each((function(e,s,p){var d,h=s===r,f=h&&void 0!==l?l:o,v=h&&void 0!==u?u:i,y=h&&void 0!==c?c:a,g=s.x,m=s.y,b=s.width,C=s.height,S=s.seriesDatum;if(n){var w=0===p,x=p===t.nodeSelectionData.length-1,O=S.y===t.min,E=S.y===t.max;d=n({datum:s,xValue:S.x,yValue:S.y,width:b,height:C,min:O,max:E,first:w,last:x,fill:f,stroke:v,strokeWidth:y,highlighted:h})}e.fill=d&&d.fill||f,e.stroke=d&&d.stroke||v,e.strokeWidth=d&&d.strokeWidth||y,e.x=e.y=0,e.width=b,e.height=C,e.visible=e.height>0,e.translationX=g,e.translationY=m}))},e.prototype.updateLabelSelection=function(t){this.labelSelection.update(t,(function(t){t.tag=f_.Label,t.pointerEvents=Ws.None}))},e.prototype.updateLabelNodes=function(){var t=this.label,e=t.enabled,r=t.fontStyle,n=t.fontWeight,o=t.fontSize,i=t.fontFamily,a=t.color;this.labelSelection.each((function(t,s){var l=s.label;l&&e?(t.fontStyle=r,t.fontWeight=n,t.fontSize=o,t.fontFamily=i,t.textAlign=l.textAlign,t.textBaseline=l.textBaseline,t.text=l.text,t.x=l.x,t.y=l.y,t.fill=a,t.visible=!0):t.visible=!1}))},e.prototype.getTooltipHtml=function(t){var e,r,n=this.dataType,o=t.seriesDatum,i=o.y,a=o.x,s={content:this.formatNumericDatum(i),title:"array"===n||"object"===n?this.formatDatum(a):void 0},l=null===(r=null===(e=this.processedOptions)||void 0===e?void 0:e.tooltip)||void 0===r?void 0:r.renderer;return l?c_(l({context:this.context,datum:o,yValue:i,xValue:a}),s):c_(s)},e.prototype.formatLabelValue=function(t){return t%1!=0?t.toFixed(1):t.toFixed(0)},e}(u_),I_=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),L_=Jl,N_=cf,G_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return I_(e,t),e.prototype.updateYScaleRange=function(){var t=this.seriesRect;this.yScale.range=[0,t.width]},e.prototype.updateXScaleRange=function(){var t=this.xScale,e=this.seriesRect,r=this.paddingOuter,n=this.paddingInner;if(t instanceof N_)t.range=[0,e.height],t.paddingInner=n,t.paddingOuter=r;else{var o=this.calculateStep(e.height),i=o*r;this.bandWidth=o*(1-n),t.range=[i,e.height-i-this.bandWidth]}},e.prototype.updateAxisLine=function(){var t=this.yScale,e=this.axis,r=this.axisLine,n=this.seriesRect,o=e.strokeWidth;r.x1=0,r.x2=0,r.y1=0,r.y2=n.height,r.stroke=e.stroke,r.strokeWidth=o+(o%2==1?1:0);var i=t.convert(0);r.translationX=i},e.prototype.generateNodeData=function(){var t=this,e=t.data,r=t.yData,n=t.xData,o=t.xScale,i=t.yScale,a=t.fill,s=t.stroke,l=t.strokeWidth,u=t.label;if(e){for(var c=u.fontStyle,p=u.fontWeight,d=u.fontSize,h=u.fontFamily,f=u.color,v=u.formatter,y=u.placement,g=[],m=i.convert(0),b=!(o instanceof N_),C=0,S=r.length;C<S;C++){var w=r[C],x=n[C],O=void 0===w;O&&(w=0);var E=o.convert(b?o.toDomain(x):x),T=Math.min(void 0===w?NaN:i.convert(w),m),P=Math.max(void 0===w?NaN:i.convert(w),m),D=b?this.bandWidth:o.bandwidth,A=P-T,M={x:m,y:E},_=void 0;_=v?v({value:w}):void 0!==w&&L_(w)?this.formatLabelValue(w):"";var R=E+D/2,k=void 0,F=void 0,I=void 0!==w&&w>=0;if(y===v_.Center)k=T+A/2,F="center";else if(y===v_.OutsideEnd)k=T+(I?A+4:-4),F=I?"start":"end";else if(y===v_.InsideEnd){k=T+(I?A-4:4),F=I?"end":"start";var L=Fs.getTextSize(_,h).width||20;(I&&k<m+L||!I&&k>m-L)&&(k=m+4*(I?1:-1),F=I?"start":"end")}else k=m+4*(I?1:-1),F=I?"start":"end";g.push({x:T,y:E,width:A,height:D,fill:a,stroke:s,strokeWidth:l,seriesDatum:{x:x,y:O?void 0:w},point:M,label:{x:k,y:R,text:_,fontStyle:c,fontWeight:p,fontSize:d,fontFamily:h,textAlign:F,textBaseline:"middle",fill:f}})}return g}},e.prototype.getDistance=function(t,e){return Math.abs(t.y-e.y)},e.className="BarSparkline",e}(F_),j_=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),V_=Jl,B_=cf,U_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return j_(e,t),e.prototype.updateYScaleRange=function(){var t=this.seriesRect;this.yScale.range=[t.height,0]},e.prototype.updateXScaleRange=function(){var t=this.xScale,e=this.seriesRect,r=this.paddingOuter,n=this.paddingInner;if(t instanceof B_)t.range=[0,e.width],t.paddingInner=n,t.paddingOuter=r;else{var o=this.calculateStep(e.width),i=o*r;this.bandWidth=o*(1-n),t.range=[i,e.width-i-this.bandWidth]}},e.prototype.updateAxisLine=function(){var t=this.yScale,e=this.axis,r=this.axisLine,n=this.seriesRect,o=e.strokeWidth;r.x1=0,r.x2=n.width,r.y1=0,r.y2=0,r.stroke=e.stroke,r.strokeWidth=o+(o%2==1?1:0);var i=t.convert(0);r.translationY=i},e.prototype.generateNodeData=function(){var t=this,e=t.data,r=t.yData,n=t.xData,o=t.xScale,i=t.yScale,a=t.fill,s=t.stroke,l=t.strokeWidth,u=t.label;if(e){for(var c=u.fontStyle,p=u.fontWeight,d=u.fontSize,h=u.fontFamily,f=u.color,v=u.formatter,y=u.placement,g=[],m=i.convert(0),b=!(o instanceof B_),C=0,S=r.length;C<S;C++){var w=r[C],x=n[C],O=void 0===w;O&&(w=0);var E=Math.min(void 0===w?NaN:i.convert(w),m),T=o.convert(b?o.toDomain(x):x),P=Math.max(void 0===w?NaN:i.convert(w),m),D=b?this.bandWidth:o.bandwidth,A=P-E,M={x:T+D/2,y:m},_=void 0;_=v?v({value:w}):void 0!==w&&V_(w)?this.formatLabelValue(w):"";var R=T+D/2,k=void 0,F=void 0,I=void 0!==w&&w>=0;if(y===v_.Center)k=E+A/2,F="middle";else if(y===v_.OutsideEnd)k=E+(I?-2:A+2),F=I?"bottom":"top";else if(y===v_.InsideEnd){k=E+(I?2:A-2),F=I?"top":"bottom";var L=Fs.getTextSize(_,h).height||10;(I&&k>m-L||!I&&k<m+L)&&(k=m+2*(I?-1:1),F=I?"bottom":"top")}else k=m+2*(I?-1:1),F=I?"bottom":"top";g.push({x:T,y:E,width:D,height:A,fill:a,stroke:s,strokeWidth:l,seriesDatum:{x:x,y:O?void 0:w},point:M,label:{x:R,y:k,text:_,fontStyle:c,fontWeight:p,fontSize:d,fontFamily:h,textAlign:"center",textBaseline:F,fill:f}})}return g}},e.className="ColumnSparkline",e}(F_),H_=Jl,z_=function(){function t(){}return t.create=function(t,e){var r=function(t){void 0===t&&(t="line");switch(t){case"column":return new U_;case"bar":return new G_;case"area":return new w_;case"line":default:return new A_}}((t=Mp([t])).type);return e&&(r.tooltip=e),function(t,e){Q_(t,"context",e.context,e),Q_(t,"width",e.width,e),Q_(t,"height",e.height,e),Q_(t,"container",e.container,e),Q_(t,"xKey",e.xKey,e),Q_(t,"yKey",e.yKey,e),e.padding&&function(t,e){Q_(t,"top",e.top,e),Q_(t,"right",e.right,e),Q_(t,"bottom",e.bottom,e),Q_(t,"left",e.left,e)}(t.padding,e.padding);e.axis&&function(t,e){Q_(t,"type",e.type,e),Q_(t,"stroke",e.stroke,e),Q_(t,"strokeWidth",e.strokeWidth,e)}(t.axis,e.axis);e.highlightStyle&&function(t,e){Q_(t,"fill",e.fill,e),Q_(t,"size",e.size,e),Q_(t,"stroke",e.stroke,e),Q_(t,"strokeWidth",e.strokeWidth,e)}(t.highlightStyle,e.highlightStyle)}(r,t),function(t,e){switch(e.type){case"bar":case"column":W_(t,e);break;case"area":!function(t,e){Q_(t,"fill",e.fill,e),e.marker&&K_(t.marker,e.marker);e.line&&X_(t.line,e.line);e.crosshairs&&Y_(t.crosshairs,e.crosshairs)}(t,e);break;case"line":default:!function(t,e){e.marker&&K_(t.marker,e.marker);e.line&&X_(t.line,e.line);e.crosshairs&&Y_(t.crosshairs,e.crosshairs)}(t,e)}}(r,t),t.data&&(r.data=t.data),r.processedOptions=t,r},t}();function W_(t,e){Q_(t,"valueAxisDomain",e.valueAxisDomain,e),Q_(t,"fill",e.fill,e),Q_(t,"stroke",e.stroke,e),Q_(t,"strokeWidth",e.strokeWidth,e),Q_(t,"paddingInner",e.paddingInner,e),Q_(t,"paddingOuter",e.paddingOuter,e),Q_(t,"formatter",e.formatter,e),e.label&&function(t,e){Q_(t,"enabled",e.enabled,e),Q_(t,"fontStyle",e.fontStyle,e),Q_(t,"fontWeight",e.fontWeight,e),Q_(t,"fontSize",e.fontSize,e),Q_(t,"fontFamily",e.fontFamily,e),Q_(t,"textAlign",e.textAlign,e),Q_(t,"textBaseline",e.textBaseline,e),Q_(t,"color",e.color,e),Q_(t,"formatter",e.formatter,e),Q_(t,"placement",e.placement,e)}(t.label,e.label)}function K_(t,e){Q_(t,"enabled",e.enabled,e),Q_(t,"size",e.size,e),Q_(t,"shape",e.shape,e),Q_(t,"fill",e.fill,e),Q_(t,"stroke",e.stroke,e),Q_(t,"strokeWidth",e.strokeWidth,e),Q_(t,"formatter",e.formatter,e)}function X_(t,e){Q_(t,"stroke",e.stroke,e),Q_(t,"strokeWidth",e.strokeWidth,e)}function Y_(t,e){t.xLine&&e.xLine&&q_(t.xLine,e.xLine),t.yLine&&e.yLine&&q_(t.yLine,e.yLine)}function q_(t,e){Q_(t,"enabled",e.enabled,e),Q_(t,"stroke",e.stroke,e),Q_(t,"strokeWidth",e.strokeWidth,e),Q_(t,"lineDash",e.lineDash,e),Q_(t,"lineCap",e.lineCap,e)}var Z_={};var J_=function(t,e,r){if(H_(e))return!0;var n,o,i="AG Charts: "+t+" must be a number, the value you provided is not a valid number. Using the default of "+r+"px.";return n=function(){return console.warn(i)},Z_[o=t+" not a number"]||(n(),Z_[o]=!0),!1},$_={xOffset:J_,yOffset:J_};function Q_(t,e,r,n){if(e in n)if(e in t){var o=$_[e];(!o||o(e,r,t[e]))&&t[e]!==r&&(t[e]=r)}else console.warn("Property "+e+" does not exist on the target object.")}var tR=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),eR=function(){return(eR=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},rR=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},nR=function(t){function e(){return t.call(this,e.TEMPLATE)||this}return tR(e,t),e.prototype.init=function(t){var e=this,r=!0,n=this.resizeObserverService.observeResize(this.getGui(),(function(){var n=e.getGui(),o=n.clientWidth,i=n.clientHeight;if(0!==o&&0!==i)if(r){var a=eR({data:t.value,width:o,height:i,context:{data:t.data}},t.sparklineOptions);e.sparkline=z_.create(a,e.sparklineTooltipSingleton.getSparklineTooltip()),e.eSparkline.appendChild(e.sparkline.canvasElement),r=!1}else e.sparkline.width=o,e.sparkline.height=i}));this.addDestroyFunc((function(){return n()}))},e.prototype.refresh=function(t){return!!this.sparkline&&(this.sparkline.data=t.value,!0)},e.prototype.destroy=function(){this.sparkline&&this.sparkline.destroy(),t.prototype.destroy.call(this)},e.TEMPLATE='<div class="ag-sparkline-wrapper">\n            <span ref="eSparkline"></span>\n        </div>',rR([o("eSparkline")],e.prototype,"eSparkline",void 0),rR([n("resizeObserverService")],e.prototype,"resizeObserverService",void 0),rR([n("sparklineTooltipSingleton")],e.prototype,"sparklineTooltipSingleton",void 0),e}(a),oR=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),iR=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},aR=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return oR(r,t),r.prototype.postConstruct=function(){this.tooltip=new p_},r.prototype.getSparklineTooltip=function(){return this.tooltip},r.prototype.destroyTooltip=function(){this.tooltip&&this.tooltip.destroy()},iR([i],r.prototype,"postConstruct",null),iR([F],r.prototype,"destroyTooltip",null),r=iR([e("sparklineTooltipSingleton")],r)}(r),sR={version:"30.2.0",moduleName:s.SparklinesModule,beans:[aR],userComponents:[{componentName:"agSparklineCellRenderer",componentClass:nR}],dependantModules:[Ft]};const lR=[Qe,sr,mo,Va,ns,YP,oD,ED,FD,IP,ND,Nn,XA,SM,vo,KM,ZM,sR],uR=wt.concat(lR);B.registerModules(lR);export{Qe as AdvancedFilterModule,lR as AllEnterpriseModules,uR as AllModules,sr as ClipboardModule,mo as ColumnsToolPanelModule,Ft as EnterpriseCoreModule,Va as ExcelExportModule,ns as FiltersToolPanelModule,YP as GridChartsModule,Mt as LicenseManager,oD as MasterDetailModule,ED as MenuModule,AD as MultiFilter,FD as MultiFilterModule,On as PivotDropZonePanel,Hn as PrimaryColsPanel,IP as RangeSelectionModule,ND as RichSelectModule,Sn as RowGroupDropZonePanel,Nn as RowGroupingModule,XA as ServerSideRowModelModule,fM as SetFilter,SM as SetFilterModule,vo as SideBarModule,sR as SparklinesModule,KM as StatusBarModule,fo as ToolPanelColDefService,Vn as ValuesDropZonePanel,ZM as ViewportRowModelModule,qP as __FORCE_MODULE_DETECTION_AG_GRID_CORE_EXT,ZP as agCharts,Na as exportMultipleSheetsAsExcel,La as getMultipleSheetsAsExcel};