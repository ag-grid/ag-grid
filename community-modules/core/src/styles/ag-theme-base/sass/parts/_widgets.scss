
@mixin ag-theme-base-part-widgets {
    
    .ag-checkbox,
    .ag-radio-button,
    .ag-toggle-button {
        // TODO structural styles
        display: flex;
        align-items: center;
        cursor: default;
        label {
            cursor: default;
            &:empty {
                margin: 0;
            }
        }
        &:not(.ag-label-align-left) {
            label {
                margin-left: $ag-grid-size;
            }
        }
    }

    .ag-input-wrapper {
        input:not([type]),
        input[type='text'],
        input[type='number'],
        input[type='tel'],
        input[type='date'],
        input[type='datetime-local'] {
            @include ag-textbox();
        }

        // TODO structural styles
        input[type='date'] {
            flex: 1 1 auto;
        }
        input[type='range'] {
            padding: 0;
        }

        textarea {
            @include ag-textbox();
        }
    }

    ////////////////////////////////////////
    // Virtual List
    ////////////////////////////////////////
    .ag-virtual-list-container {
        .ag-virtual-list-item {
            height: $ag-virtual-item-height;
        }
    }
    ////////////////////////////////////////
    // Rich Select
    ////////////////////////////////////////
    .ag-rich-select {
        background-color: $ag-editor-background-color;

        .ag-rich-select-list {
            width: 100%;
            min-width: 200px;
            height: $ag-row-height * 6.5; // intentional
        }

        .ag-rich-select-value {
            padding: 0 $ag-grid-size 0 $ag-cell-horizontal-padding;
            height: $ag-rich-select-item-height;
        }

        .ag-virtual-list-item {
            cursor: default;
            height: $ag-rich-select-item-height;

            &:hover {
                background-color: $ag-hover-color;
            }
        }

        .ag-rich-select-row {
            padding-left: $ag-cell-horizontal-padding;
        }

        .ag-rich-select-row-selected {
            background-color: $ag-selected-color;
        }
    }

    ////////////////////////////////////////
    // Selection checkbox
    ////////////////////////////////////////
    @include ag-auto-rtl(
        ".ag-row-drag"
        // TODO nesting
        ".ag-cell-wrapper .ag-selection-checkbox"
        // TODO nesting
        ".ag-cell-wrapper .ag-group-expanded"
        // TODO nesting
        ".ag-cell-wrapper .ag-group-contracted",
        ( margin-right: $ag-cell-widget-spacing )
    );
    @include ag-auto-rtl(
        ".ag-group-child-count",
        ( margin-left: 2px )
    );

    .ag-group {
        background-color: $ag-group-background-color;
        @if $ag-group-border-color {
            border-top: 1px solid $ag-group-border-color;
        }
    }

    .ag-group-item {
        margin-top: $ag-grid-size / 2;
        margin-bottom: $ag-grid-size / 2;
    }

    .ag-group-title-bar {
        background-color: $ag-group-title-background-color;
        padding: $ag-grid-size;
    }
    
    .ag-group-toolbar {
        background-color: $ag-group-toolbar-background-color;
        padding: $ag-grid-size;
    }


    .ag-disabled-group-title-bar, .ag-disabled-group-container {
        opacity: 0.5
    }

    .group-item {
        margin: $ag-grid-size / 2 0;
    }

    .ag-labeled {
        label {
            margin-right: $ag-grid-size;
            white-space: nowrap;
        }
    }

    .ag-labeled.ag-label-align-top {
        label {
            margin-bottom: $ag-grid-size / 2;
        }
    }

    .ag-slider,
    .ag-angle-select {
        > .ag-wrapper {
            > div:not(:first-of-type) {
                margin-left: $ag-grid-size * 2;
            }
        }
    }

    .ag-angle-select {
        .ag-angle-select-field {
            .ag-parent-circle {
                width: 24px;
                height: 24px;
                border-radius: 12px;
                box-shadow: 0 0 2px rgba(0, 0, 0, 0.9);
                background-color: #ffffff;
            }
            .ag-child-circle {
                top: 4px;
                left: 12px;
                width: 6px;
                height: 6px;
                margin-left: -3px;
                margin-top: -4px;
                border-radius: 3px;
                background-color: #4c4c4c;
            }
        }
    }

    .ag-toggle-button {
        // TODO do this without reaching into input wrapper
        .ag-input-wrapper {
            height: $ag-icon-size;
            width: 40px;
            background-color: $ag-background-color;
            border: 1px solid $ag-icon-color;
            border-radius: 500rem;
            .ag-icon {
                width: $ag-icon-size;
                height: $ag-icon-size;
                border: 1px solid $ag-icon-color;
                border-radius: 500rem;
                right: calc(100% - #{$ag-icon-size});
            }
        }
        &.ag-selected {
            // TODO do this without reaching into input wrapper
            .ag-input-wrapper {
                background-color: $ag-accent-color;
                .ag-icon {
                    background: $ag-background-color;
                    right: -1px;
                }
            }
        }
    }

    .ag-color-picker {
        > .ag-wrapper {
            border: 1px solid $ag-border-color;
            border-radius: 5px;
            > div {
                width: $ag-icon-size;
                height: $ag-icon-size;
            }
            button {
                background-color: $ag-background-color;
            }
            button:hover {
                background-color: $ag-hover-color;
            }
        }
    }

    .ag-dialog.ag-color-dialog {
        border-radius: 5px;
    }

    .ag-color-panel {
        padding: $ag-grid-size;

        .ag-spectrum-color {
            background-color: rgb(255, 0, 0);
            border-radius: 2px;
        }

        .ag-spectrum-tools {
            padding: 10px;
        }

        .ag-spectrum-sat {
            background-image: linear-gradient(to right, white, rgba(204, 154, 129, 0));
        }

        .ag-spectrum-val {
            background-image: linear-gradient(to top, black, rgba(204, 154, 129, 0));
        }

        .ag-spectrum-dragger {
            border-radius: 12px;
            height: 12px;
            width: 12px;
            border: 1px solid white;
            background: black;
            box-shadow: 0 0 2px 0px rgba(0, 0, 0, 0.24);
        }

        .ag-spectrum-hue-background {
            border-radius: 2px;
        }

        .ag-spectrum-alpha-background {
            border-radius: 2px;
        }

        .ag-hue-alpha {
            margin-bottom: 10px;
            height: 11px;
            border-radius: 2px;
        }

        .ag-spectrum-slider {
            margin-top: -12px;
            width: 13px;
            height: 13px;
            border-radius: 13px;
            background-color: rgb(248, 248, 248);
            box-shadow: 0 1px 4px 0 rgba(0, 0, 0, 0.37);
        }

        .ag-recent-colors {
            > div {
                margin: 0 3px;
                &:first-child {
                    margin-left: 0;
                }
                &:last-child {
                    margin-right: 0;
                }
            }
        }
    }


    ////////////////////////////////////////
    // Popup
    ////////////////////////////////////////
    &.ag-popup > div:not(.ag-tooltip-custom) {
        box-shadow: 5px 5px 10px rgba(0, 0, 0, 0.3);
    }

    ////////////////////////////////////////
    // Dialog
    ////////////////////////////////////////
    .ag-panel {
        background-color: $ag-dialog-background-color;
        border: $ag-dialog-border-size $ag-dialog-border-style $ag-dialog-border-color;
        .ag-dragging-range-handle &.ag-dialog,
        .ag-dragging-fill-handle &.ag-dialog {
            opacity: 0.7;
            pointer-events: none;
        }

        .ag-title-bar {
            background-color: $ag-dialog-title-background-color;
            border-bottom: 1px solid lighten($ag-border-color, 10%);
            color: $ag-dialog-title-foreground-color;
            height: $ag-dialog-title-height;
            font-size: $ag-dialog-title-font-size;
            font-weight: $ag-dialog-title-font-weight;
            font-family: $ag-dialog-title-font-family;
            padding: $ag-dialog-title-padding;
            padding-left: $ag-cell-horizontal-padding;

            .ag-title-bar-buttons {
                .ag-button {
                    height: $ag-dialog-title-icon-size;
                    width: $ag-dialog-title-icon-size;
                    .ag-icon {
                        line-height: $ag-dialog-title-icon-size;
                        font-size: $ag-dialog-title-icon-size;
                    }
                    border-radius: 5px;
                    &:hover,
                    &.ag-has-popup {
                        background-color: darken($ag-dialog-title-background-color, 10%);
                    }
                    &:not(:last-child) {
                        margin-right: 5px;
                    }
                }
            }
        }

        .ag-message-box {
            .ag-message-box-button-bar {
                height: 30px;
                background-color: $ag-header-background-color;
                padding: 2px;
                button {
                    border-radius: $ag-card-radius;
                }
            }
        }
    }
    ////////////////////////////////////////
    // Tooltip
    ////////////////////////////////////////
    .ag-tooltip {
        background-color: $ag-tooltip-background-color;
        color: $ag-tooltip-foreground-color;
        border-radius: $ag-tooltip-border-radius;
        padding: $ag-tooltip-padding;
        border-width: $ag-tooltip-border-width;
        border-style: $ag-tooltip-border-style;
        border-color: $ag-tooltip-border-color;
        transition: opacity 1s;

        &.ag-tooltip-hiding {
            opacity: 0;
        }
    }

    .ag-rtl {
        .ag-checkbox,
        .ag-radio-button,
        .ag-toggle-button {
            &:not(.ag-label-align-left) {
                label {
                    margin-right: $ag-grid-size;
                    margin-left: 0;
                }
            }
        }
    }
}
