{"version":3,"sources":["../../src/ts/widgets/agGroupComponent.ts"],"names":[],"mappings":"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","file":"agGroupComponent.js","sourcesContent":["import { Component } from \"./component\";\nimport { RefSelector } from \"./componentAnnotations\";\nimport { Autowired, PostConstruct } from \"../context/context\";\nimport { GridOptionsWrapper } from \"../gridOptionsWrapper\";\nimport { AgCheckbox } from \"./agCheckbox\";\nimport { _ } from \"../utils\";\n\ntype GroupItem = Component | HTMLElement;\n\ntype Align = 'start' | 'end' | 'center' | 'stretch';\nconst defaultItemAlign: Align = 'center';\n\ntype Direction = 'horizontal' | 'vertical';\nconst defaultDirection = 'vertical';\n\nexport interface AgGroupComponentParams {\n    title?: string;\n    enabled?: boolean;\n    suppressEnabledCheckbox?: boolean;\n    suppressOpenCloseIcons?: boolean;\n    cssIdentifier?: string;\n    items?: GroupItem[];\n    alignItems?: Align;\n    direction?: Direction;\n}\n\nexport class AgGroupComponent extends Component {\n\n    private items: GroupItem[];\n    private title: string;\n    private cssIdentifier: string;\n    private enabled: boolean;\n    private expanded: boolean;\n    private suppressEnabledCheckbox: boolean = true;\n    private suppressOpenCloseIcons: boolean = false;\n    private alignItems: Align;\n\n    @Autowired('gridOptionsWrapper') private gridOptionsWrapper: GridOptionsWrapper;\n\n    @RefSelector('eTitleBar') private eTitleBar: HTMLElement;\n    @RefSelector('eGroupOpenedIcon') private eGroupOpenedIcon: HTMLElement;\n    @RefSelector('eGroupClosedIcon') private eGroupClosedIcon: HTMLElement;\n    @RefSelector('eToolbar') private eToolbar: HTMLElement;\n    @RefSelector('cbGroupEnabled') private cbGroupEnabled: AgCheckbox;\n    @RefSelector('eTitle') private eTitle: HTMLElement;\n    @RefSelector('eContainer') private eContainer: HTMLElement;\n\n    constructor(params: AgGroupComponentParams = {}) {\n        super(AgGroupComponent.getTemplate(params));\n\n        const { title, enabled, items, suppressEnabledCheckbox, suppressOpenCloseIcons } = params;\n\n        this.title = title;\n        this.cssIdentifier = params.cssIdentifier || 'default';\n        this.enabled = enabled != null ? enabled : true;\n        this.items = items || [];\n\n        this.alignItems = params.alignItems || 'center';\n\n        if (suppressEnabledCheckbox != null) {\n            this.suppressEnabledCheckbox = suppressEnabledCheckbox;\n        }\n\n        if (suppressOpenCloseIcons != null) {\n            this.suppressOpenCloseIcons = suppressOpenCloseIcons;\n        }\n    }\n\n    private static getTemplate(params: AgGroupComponentParams) {\n        const cssIdentifier = params.cssIdentifier || 'default';\n        const direction: Direction = params.direction || 'vertical';\n        return `<div class=\"ag-group ag-${cssIdentifier}-group\">\n            <div class=\"ag-group-title-bar ag-${cssIdentifier}-group-title-bar ag-unselectable\" ref=\"eTitleBar\">\n                <span class=\"ag-group-title-bar-icon ag-${cssIdentifier}-group-title-bar-icon\" ref=\"eGroupOpenedIcon\"></span>\n                <span class=\"ag-group-title-bar-icon ag-${cssIdentifier}-group-title-bar-icon\" ref=\"eGroupClosedIcon\"></span>\n                <span ref=\"eTitle\" class=\"ag-group-title ag-${cssIdentifier}-group-title\"></span>\n            </div>\n            <div ref=\"eToolbar\" class=\"ag-group-toolbar ag-${cssIdentifier}-group-toolbar\">\n                <ag-checkbox ref=\"cbGroupEnabled\"></ag-checkbox>\n            </div>\n            <div ref=\"eContainer\" class=\"ag-group-container ag-group-container-${direction} ag-${cssIdentifier}-group-container\"></div>\n        </div>`;\n    }\n\n    @PostConstruct\n    private postConstruct() {\n        if (this.items.length) {\n            const initialItems = this.items;\n            this.items = [];\n\n            this.addItems(initialItems);\n        }\n\n        const localeTextFunc = this.gridOptionsWrapper.getLocaleTextFunc();\n        this.cbGroupEnabled.setLabel(localeTextFunc('enabled', 'Enabled'));\n\n        if (this.title) {\n            this.setTitle(this.title);\n        }\n\n        if (this.enabled) {\n            this.setEnabled(this.enabled);\n        }\n\n        this.setAlignItems(this.alignItems);\n\n        this.hideEnabledCheckbox(this.suppressEnabledCheckbox);\n        this.hideOpenCloseIcons(this.suppressOpenCloseIcons);\n\n        this.setupExpandContract();\n        this.refreshChildDisplay();\n    }\n\n    private setupExpandContract(): void {\n        this.eGroupClosedIcon.appendChild(_.createIcon('columnSelectClosed', this.gridOptionsWrapper, null));\n        this.eGroupOpenedIcon.appendChild(_.createIcon('columnSelectOpen', this.gridOptionsWrapper, null));\n        this.addDestroyableEventListener(this.eTitleBar, 'click', () => this.toggleGroupExpand());\n    }\n\n    private refreshChildDisplay(): void {\n        const showIcon = !this.suppressOpenCloseIcons;\n        _.setDisplayed(this.eGroupClosedIcon, showIcon && !this.expanded);\n        _.setDisplayed(this.eGroupOpenedIcon, showIcon && this.expanded);\n        _.setDisplayed(this.eToolbar, this.expanded && !this.suppressEnabledCheckbox);\n    }\n\n    public isExpanded(): boolean {\n        return this.expanded;\n    }\n\n    public setAlignItems(alignment: AgGroupComponentParams['alignItems']): this {\n        const eGui = this.getGui();\n\n        if (this.alignItems !== alignment) {\n            _.removeCssClass(eGui, `ag-group-item-alignment-${this.alignItems}`);\n        }\n\n        this.alignItems = alignment;\n        const newCls = `ag-group-item-alignment-${this.alignItems}`;\n\n        _.addCssClass(eGui, newCls);\n\n        return this;\n    }\n\n    public toggleGroupExpand(expanded?: boolean): this {\n        if (this.suppressOpenCloseIcons) {\n            this.expanded = true;\n            this.refreshChildDisplay();\n            _.setDisplayed(this.eContainer, true);\n            return this;\n        }\n\n        expanded = expanded != null ? expanded : !this.expanded;\n\n        if (this.expanded === expanded) {\n            return this;\n        }\n\n        this.expanded = expanded;\n        this.refreshChildDisplay();\n        _.setDisplayed(this.eContainer, expanded);\n\n        if (this.expanded) {\n            const event = {\n                type: 'expanded',\n            };\n            this.dispatchEvent(event);\n        } else {\n            const event = {\n                type: 'collapsed',\n            };\n            this.dispatchEvent(event);\n        }\n\n        return this;\n    }\n\n    public addItems(items: GroupItem[]) {\n        items.forEach(item => this.addItem(item));\n    }\n\n    public addItem(item: GroupItem) {\n        const container = this.eContainer;\n        const el = item instanceof Component ? item.getGui() : item;\n        _.addCssClass(el, 'ag-group-item');\n        _.addCssClass(el, `ag-${this.cssIdentifier}-group-item`);\n\n        container.appendChild(el);\n        this.items.push(el);\n    }\n\n    public hideItem(hide: boolean, index: number) {\n        const itemToHide = this.items[index] as HTMLElement;\n        _.addOrRemoveCssClass(itemToHide, 'ag-hidden', hide);\n    }\n\n    public setTitle(title: string): this {\n        this.eTitle.innerText = title;\n        return this;\n    }\n\n    public addCssClassToTitleBar(cssClass: string) {\n        _.addCssClass(this.eTitleBar, cssClass);\n    }\n\n    public setEnabled(enabled: boolean, skipToggle?: boolean): this {\n        this.enabled = enabled;\n        this.refreshDisabledStyles();\n\n        this.toggleGroupExpand(enabled);\n\n        if (!skipToggle) {\n            this.cbGroupEnabled.setValue(enabled);\n        }\n\n        return this;\n    }\n\n    public isEnabled(): boolean {\n        return this.enabled;\n    }\n\n    public onEnableChange(callbackFn: (enabled: boolean) => void): this {\n        this.cbGroupEnabled.onValueChange((newSelection: boolean) => {\n            this.setEnabled(newSelection, true);\n            callbackFn(newSelection);\n        });\n\n        return this;\n    }\n\n    public hideEnabledCheckbox(hide: boolean): this {\n        this.suppressEnabledCheckbox = hide;\n        this.refreshChildDisplay();\n        this.refreshDisabledStyles();\n        return this;\n    }\n\n    public hideOpenCloseIcons(hide: boolean): this {\n        this.suppressOpenCloseIcons = hide;\n\n        if (hide) {\n            this.toggleGroupExpand(true);\n        }\n        return this;\n    }\n\n    private refreshDisabledStyles() {\n        _.addOrRemoveCssClass(this.getGui(), 'ag-disabled', !this.enabled);\n        _.addOrRemoveCssClass(this.eTitleBar, 'ag-disabled-group-title-bar', this.suppressEnabledCheckbox && !this.enabled);\n        _.addOrRemoveCssClass(this.eContainer, 'ag-disabled-group-container', !this.enabled);\n    }\n}"]}