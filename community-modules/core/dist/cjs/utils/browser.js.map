{"version":3,"sources":["../../src/ts/utils/browser.ts"],"names":[],"mappings":"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","file":"browser.js","sourcesContent":["/**\n * These variables are lazy loaded, as otherwise they try and get initialised when we are loading\n * unit tests and we don't have references to window or document in the unit tests\n * from http://stackoverflow.com/questions/9847580/how-to-detect-safari-chrome-ie-firefox-and-opera-browser\n */\nlet isSafari: boolean;\nlet isIE: boolean;\nlet isEdge: boolean;\nlet isChrome: boolean;\nlet isFirefox: boolean;\nlet isIOS: boolean;\nlet invisibleScrollbar: boolean;\nlet browserScrollbarWidth: number;\n\nexport function isBrowserIE(): boolean {\n    if (isIE === undefined) {\n        isIE = /*@cc_on!@*/false || !!(document as any).documentMode; // At least IE6\n    }\n\n    return isIE;\n}\n\nexport function isBrowserEdge(): boolean {\n    if (isEdge === undefined) {\n        isEdge = !isBrowserIE() && !!(window as any).StyleMedia;\n    }\n\n    return isEdge;\n}\n\nexport function isBrowserSafari(): boolean {\n    if (isSafari === undefined) {\n        // taken from https://stackoverflow.com/a/23522755/1388233\n        isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\n    }\n\n    return isSafari;\n}\n\nexport function isBrowserChrome(): boolean {\n    if (isChrome === undefined) {\n        const win = window as any;\n        isChrome = (!!win.chrome && (!!win.chrome.webstore || !!win.chrome.runtime)) ||\n            (/Chrome/.test(navigator.userAgent) && /Google Inc/.test(navigator.vendor));\n    }\n\n    return isChrome;\n}\n\nexport function isBrowserFirefox(): boolean {\n    if (isFirefox === undefined) {\n        const win = window as any;\n\n        isFirefox = typeof win.InstallTrigger !== 'undefined';\n    }\n\n    return isFirefox;\n}\n\nexport function isIOSUserAgent(): boolean {\n    if (isIOS === undefined) {\n        // taken from https://stackoverflow.com/a/58064481/1388233\n        isIOS = (/iPad|iPhone|iPod/.test(navigator.platform) ||\n            // eslint-disable-next-line\n            (navigator.platform === 'MacIntel' && navigator.maxTouchPoints > 1)) &&\n            !window.MSStream;\n    }\n\n    return isIOS;\n}\n\nexport function getTabIndex(el: HTMLElement | null): string | null {\n    if (!el) { return null; }\n\n    const numberTabIndex = el.tabIndex;\n    const tabIndex = el.getAttribute('tabIndex');\n\n    if (isBrowserIE() && numberTabIndex === 0 && tabIndex === null) {\n        const map: { [key: string]: boolean; } = {\n            a: true,\n            body: true,\n            button: true,\n            frame: true,\n            iframe: true,\n            img: true,\n            input: true,\n            isindex: true,\n            object: true,\n            select: true,\n            textarea: true\n        };\n\n        return map[el.nodeName.toLowerCase()] === true ? '0' : null;\n    }\n\n    if (numberTabIndex === -1 && (tabIndex === null || (tabIndex === '' && !isBrowserFirefox()))) {\n        return null;\n    }\n\n    return numberTabIndex.toString();\n}\n\nexport function getMaxDivHeight(): number {\n    if (!document.body) { return -1; }\n\n    let res = 1000000;\n    // FF reports the height back but still renders blank after ~6M px\n    const testUpTo = navigator.userAgent.toLowerCase().match(/firefox/) ? 6000000 : 1000000000;\n    const div = document.createElement('div');\n    document.body.appendChild(div);\n\n    while (true) {\n        const test = res * 2;\n        div.style.height = test + 'px';\n\n        if (test > testUpTo || div.clientHeight !== test) {\n            break;\n        } else {\n            res = test;\n        }\n    }\n\n    document.body.removeChild(div);\n\n    return res;\n}\n\nexport function getScrollbarWidth(): number | null {\n    if (browserScrollbarWidth == null) {\n        initScrollbarWidthAndVisibility();\n    }\n    return browserScrollbarWidth;\n}\n\nfunction initScrollbarWidthAndVisibility(): void {\n\n    const body = document.body;\n    const div = document.createElement('div');\n\n    div.style.width = div.style.height = '100px';\n    div.style.opacity = '0';\n    div.style.overflow = 'scroll';\n    (div.style as any).msOverflowStyle = 'scrollbar'; // needed for WinJS apps\n    div.style.position = 'absolute';\n\n    body.appendChild(div);\n\n    let width: number | null = div.offsetWidth - div.clientWidth;\n\n    // if width is 0 and client width is 0, means the DOM isn't ready\n    if (width === 0 && div.clientWidth === 0) { width = null; }\n\n    // remove div\n    if (div.parentNode) {\n        div.parentNode.removeChild(div);\n    }\n\n    if (width != null) {\n        browserScrollbarWidth = width;\n        invisibleScrollbar = width === 0;\n    }\n}\n\nexport function isInvisibleScrollbar(): boolean {\n    if (invisibleScrollbar == null) {\n        initScrollbarWidthAndVisibility();\n    }\n    return invisibleScrollbar;\n}\n\n/** @deprecated */\nexport function hasOverflowScrolling(): boolean {\n    const prefixes: string[] = ['webkit', 'moz', 'o', 'ms'];\n    const div: HTMLElement = document.createElement('div');\n    const body: HTMLBodyElement = document.getElementsByTagName('body')[0];\n    let found: boolean = false;\n    let p: string;\n\n    body.appendChild(div);\n    div.setAttribute('style', prefixes.map(prefix => `-${prefix}-overflow-scrolling: touch`).concat('overflow-scrolling: touch').join(';'));\n\n    const computedStyle: CSSStyleDeclaration = window.getComputedStyle(div);\n\n    if ((computedStyle as any).overflowScrolling === 'touch') {\n        found = true;\n    }\n\n    if (!found) {\n        for (p of prefixes) {\n            if ((computedStyle as any)[`${p}OverflowScrolling`] === 'touch') {\n                found = true;\n                break;\n            }\n        }\n    }\n\n    if (div.parentNode) {\n        div.parentNode.removeChild(div);\n    }\n\n    return found;\n}\n\n/**\n * Gets the document body width\n * from: http://stackoverflow.com/questions/1038727/how-to-get-browser-width-using-javascript-code\n * @returns {number}\n */\nexport function getBodyWidth(): number {\n    if (document.body) {\n        return document.body.clientWidth;\n    }\n\n    if (window.innerHeight) {\n        return window.innerWidth;\n    }\n\n    if (document.documentElement && document.documentElement.clientWidth) {\n        return document.documentElement.clientWidth;\n    }\n\n    return -1;\n}\n\n/**\n * Gets the body height\n * from: http://stackoverflow.com/questions/1038727/how-to-get-browser-width-using-javascript-code\n * @returns {number}\n */\nexport function getBodyHeight(): number {\n    if (document.body) {\n        return document.body.clientHeight;\n    }\n\n    if (window.innerHeight) {\n        return window.innerHeight;\n    }\n\n    if (document.documentElement && document.documentElement.clientHeight) {\n        return document.documentElement.clientHeight;\n    }\n\n    return -1;\n}\n"]}