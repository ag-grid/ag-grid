{"version":3,"sources":["../../../src/ts/components/framework/userComponentFactory.ts"],"names":[],"mappings":"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","file":"userComponentFactory.js","sourcesContent":["import { BeanStub } from \"../../context/beanStub\";\nimport { Autowired, Bean, Optional } from \"../../context/context\";\nimport { CellEditorSelectorFunc, CellRendererSelectorFunc, ColDef, ColGroupDef } from \"../../entities/colDef\";\nimport { GridOptions } from \"../../entities/gridOptions\";\nimport { ToolPanelDef } from \"../../entities/sideBar\";\nimport { IFloatingFilterParams } from \"../../filter/floating/floatingFilter\";\nimport { IHeaderParams } from \"../../headerRendering/cells/column/headerComp\";\nimport { IHeaderGroupParams } from \"../../headerRendering/cells/columnGroup/headerGroupComp\";\nimport { ICellEditorParams } from \"../../interfaces/iCellEditor\";\nimport { IFilterDef, IFilterParams } from \"../../interfaces/iFilter\";\nimport { IRichCellEditorParams } from \"../../interfaces/iRichCellEditorParams\";\nimport { ISetFilterParams } from \"../../interfaces/iSetFilter\";\nimport { IStatusPanelParams, StatusPanelDef } from \"../../interfaces/iStatusPanel\";\nimport { IToolPanelParams } from \"../../interfaces/iToolPanel\";\nimport { GroupCellRendererParams } from \"../../rendering/cellRenderers/groupCellRendererCtrl\";\nimport { ICellRendererParams, ISetFilterCellRendererParams } from \"../../rendering/cellRenderers/iCellRenderer\";\nimport { IDateParams } from \"../../rendering/dateComponent\";\nimport { ILoadingOverlayParams } from \"../../rendering/overlays/loadingOverlayComponent\";\nimport { INoRowsOverlayParams } from \"../../rendering/overlays/noRowsOverlayComponent\";\nimport { ITooltipParams } from \"../../rendering/tooltipComponent\";\nimport { AgPromise } from \"../../utils\";\nimport { mergeDeep } from '../../utils/object';\nimport { AgComponentUtils } from \"./agComponentUtils\";\nimport { ComponentMetadata, ComponentMetadataProvider } from \"./componentMetadataProvider\";\nimport {\n    CellEditorComponent,\n    CellRendererComponent,\n    ComponentType,\n    DateComponent,\n    FilterComponent,\n    FloatingFilterComponent,\n    FullWidth,\n    FullWidthDetail,\n    FullWidthGroup,\n    FullWidthLoading,\n    HeaderComponent,\n    HeaderGroupComponent,\n    InnerRendererComponent,\n    LoadingOverlayComponent,\n    NoRowsOverlayComponent,\n    StatusPanelComponent,\n    ToolPanelComponent,\n    TooltipComponent\n} from \"./componentTypes\";\nimport { FrameworkComponentWrapper } from \"./frameworkComponentWrapper\";\nimport { UserComponentRegistry } from \"./userComponentRegistry\";\nimport { FloatingFilterMapper } from '../../filter/floating/floatingFilterMapper';\nimport { ModuleNames } from '../../modules/moduleNames';\nimport { ModuleRegistry } from '../../modules/moduleRegistry';\nimport { doOnce } from \"../../utils/function\";\n\nexport type DefinitionObject =\n    GridOptions\n    | ColDef\n    | ColGroupDef\n    | IFilterDef\n    | ISetFilterParams\n    | IRichCellEditorParams\n    | ToolPanelDef\n    | StatusPanelDef;\n\nexport interface UserCompDetails {\n    componentClass: any;\n    componentFromFramework: boolean;\n    params: any;\n    type: ComponentType;\n    newAgStackInstance: () => AgPromise<any>;\n}\n\nconst ANNOTATIONS = '__annotations__';\n\n@Bean('userComponentFactory')\nexport class UserComponentFactory extends BeanStub {\n\n    @Autowired('gridOptions') private readonly gridOptions: GridOptions;\n    @Autowired('agComponentUtils') private readonly agComponentUtils: AgComponentUtils;\n    @Autowired('componentMetadataProvider') private readonly componentMetadataProvider: ComponentMetadataProvider;\n    @Autowired('userComponentRegistry') private readonly userComponentRegistry: UserComponentRegistry;\n    @Optional('frameworkComponentWrapper') private readonly frameworkComponentWrapper: FrameworkComponentWrapper;\n\n    public getHeaderCompDetails(colDef: ColDef, params: IHeaderParams): UserCompDetails | undefined {\n        return this.getCompDetails(colDef, HeaderComponent, 'agColumnHeader', params);\n    }\n\n    public getHeaderGroupCompDetails(params: IHeaderGroupParams): UserCompDetails | undefined {\n        const colGroupDef = params.columnGroup.getColGroupDef()!;\n        return this.getCompDetails(colGroupDef, HeaderGroupComponent, 'agColumnGroupHeader', params);\n    }\n\n    // this one is unusual, as it can be LoadingCellRenderer, DetailCellRenderer, FullWidthCellRenderer or GroupRowRenderer.\n    // so we have to pass the type in.\n    public getFullWidthCellRendererDetails(params: ICellRendererParams): UserCompDetails {\n        return this.getCompDetails(this.gridOptions, FullWidth, null, params, true)!;\n    }\n\n    public getFullWidthLoadingCellRendererDetails(params: ICellRendererParams): UserCompDetails {\n        return this.getCompDetails(this.gridOptions, FullWidthLoading, 'agLoadingCellRenderer', params, true)!;\n    }\n\n    public getFullWidthGroupCellRendererDetails(params: ICellRendererParams): UserCompDetails {\n        return this.getCompDetails(this.gridOptions, FullWidthGroup, 'agGroupRowRenderer', params, true)!;\n    }\n\n    public getFullWidthDetailCellRendererDetails(params: ICellRendererParams): UserCompDetails {\n        return this.getCompDetails(this.gridOptions, FullWidthDetail, 'agDetailCellRenderer', params, true)!;\n    }\n\n    // CELL RENDERER\n    public getInnerRendererDetails(def: GroupCellRendererParams, params: ICellRendererParams): UserCompDetails | undefined {\n        return this.getCompDetails(def, InnerRendererComponent, null, params);\n    }\n    public getFullWidthGroupRowInnerCellRenderer(def: any, params: ICellRendererParams): UserCompDetails | undefined {\n        return this.getCompDetails(def, InnerRendererComponent, null, params);\n    }\n    public getCellRendererDetails(def: ColDef | IRichCellEditorParams, params: ICellRendererParams): UserCompDetails | undefined {\n        return this.getCompDetails(def, CellRendererComponent, null, params);\n    }\n\n    // CELL EDITOR\n    public getCellEditorDetails(def: ColDef, params: ICellEditorParams): UserCompDetails | undefined {\n        return this.getCompDetails(def, CellEditorComponent, 'agCellEditor', params, true);\n    }\n\n    // FILTER\n    public getFilterDetails(def: IFilterDef, params: IFilterParams, defaultFilter: string): UserCompDetails | undefined {\n        return this.getCompDetails(def, FilterComponent, defaultFilter, params, true);\n    }\n\n    public getDateCompDetails(params: IDateParams): UserCompDetails {\n        return this.getCompDetails(this.gridOptions, DateComponent, 'agDateInput', params, true)!;\n    }\n\n    public getLoadingOverlayCompDetails(params: ILoadingOverlayParams): UserCompDetails {\n        return this.getCompDetails(this.gridOptions, LoadingOverlayComponent, 'agLoadingOverlay', params, true)!;\n    }\n\n    public getNoRowsOverlayCompDetails(params: INoRowsOverlayParams): UserCompDetails {\n        return this.getCompDetails(this.gridOptions, NoRowsOverlayComponent, 'agNoRowsOverlay', params, true)!;\n    }\n\n    public getTooltipCompDetails(params: ITooltipParams): UserCompDetails {\n        return this.getCompDetails(params.colDef!, TooltipComponent, 'agTooltipComponent', params, true)!;\n    }\n\n    public getSetFilterCellRendererDetails(def: ISetFilterParams, params: ISetFilterCellRendererParams): UserCompDetails | undefined {\n        return this.getCompDetails(def, CellRendererComponent, null, params);\n    }\n\n    public getFloatingFilterCompDetails(def: IFilterDef, params: IFloatingFilterParams<any>, defaultFloatingFilter: string | null):  UserCompDetails | undefined {\n        return this.getCompDetails(def, FloatingFilterComponent, defaultFloatingFilter, params);\n    }\n\n    public getToolPanelCompDetails(toolPanelDef: ToolPanelDef, params: IToolPanelParams):  UserCompDetails {\n        return this.getCompDetails(toolPanelDef, ToolPanelComponent, null, params, true)!;\n    }\n\n    public getStatusPanelCompDetails(def: StatusPanelDef, params: IStatusPanelParams):  UserCompDetails {\n        return this.getCompDetails(def, StatusPanelComponent, null, params, true)!;\n    }\n\n    private getCompDetails(defObject: DefinitionObject, type: ComponentType, defaultName: string | null | undefined, params: any, mandatory = false): UserCompDetails | undefined {\n\n        const {propertyName, cellRenderer} = type;\n\n        let {compName, jsComp, fwComp, paramsFromSelector} = this.getCompKeys(defObject, type, params);\n\n        const lookupFromRegistry = (key: string) => {\n            const item = this.userComponentRegistry.retrieve(key);\n            if (item) {\n                jsComp = !item.componentFromFramework ? item.component : undefined;\n                fwComp = item.componentFromFramework ? item.component : undefined;\n            }\n        };\n\n        // if compOption is a string, means we need to look the item up\n        if (compName != null) {\n            lookupFromRegistry(compName);\n        }\n\n        // if lookup brought nothing back, and we have a default, lookup the default\n        if (jsComp == null && fwComp == null && defaultName != null) {\n            lookupFromRegistry(defaultName);\n        }\n\n        // if we have a comp option, and it's a function, replace it with an object equivalent adaptor\n        if (jsComp && cellRenderer && !this.agComponentUtils.doesImplementIComponent(jsComp)) {\n            jsComp = this.agComponentUtils.adaptFunction(propertyName, jsComp);\n        }\n\n        if (!jsComp && !fwComp) {\n            if (mandatory) {\n                console.error(`Could not find component ${compName}, did you forget to configure this component?`);\n            }\n            return;\n        }\n\n        const paramsMerged = this.mergeParamsWithApplicationProvidedParams(defObject, type, params, paramsFromSelector);\n\n        const componentFromFramework = jsComp == null;\n        const componentClass = jsComp ? jsComp : fwComp;\n\n        return {\n            componentFromFramework,\n            componentClass,\n            params: paramsMerged,\n            type: type,\n            newAgStackInstance: () => this.newAgStackInstance(componentClass, componentFromFramework, paramsMerged, type)\n        };\n    }\n\n    private getCompKeys(defObject: DefinitionObject, type: ComponentType, params?: any): \n                                                {\n                                                    compName: string | undefined, \n                                                    jsComp: any, \n                                                    fwComp: any, \n                                                    paramsFromSelector: any\n                                                } {\n\n        const {propertyName} = type;\n\n        let compName: string | undefined;\n        let jsComp: any;\n        let fwComp: any;\n\n        let paramsFromSelector: any;\n\n        // there are two types of js comps, class based and func based. we can only check for\n        // class based, by checking if getGui() exists. no way to differentiate js func based vs eg react func based\n        // const isJsClassComp = (comp: any) => this.agComponentUtils.doesImplementIComponent(comp);\n        // const fwActive = this.frameworkComponentWrapper != null;\n\n        // pull from defObject if available\n        if (defObject) {\n            const defObjectAny = defObject as any;\n\n            // if selector, use this\n            const selectorFunc: CellEditorSelectorFunc | CellRendererSelectorFunc = defObjectAny[propertyName + 'Selector'];\n            const selectorRes = selectorFunc ? selectorFunc(params) : null;\n\n            const assignComp = (providedJsComp: any, providedFwComp: any) => {\n\n                const xxxFrameworkDeprecatedWarn = ()=> {\n                    const warningMessage = `AG Grid: As of v27, the property ${propertyName}Framework is deprecated. The property ${propertyName} can now be used for JavaScript AND Framework Components.`;\n                    doOnce( ()=> console.warn(warningMessage), `UserComponentFactory.${propertyName}FrameworkDeprecated`);\n                };\n\n                if (typeof providedJsComp === 'string') {\n                    compName = providedJsComp as string;\n                } else if (typeof providedFwComp === 'string') {\n                    xxxFrameworkDeprecatedWarn();\n                    compName = providedFwComp as string;\n                // comp===true for filters, which means use the default comp\n                } else if (providedJsComp!=null && providedJsComp!==true) {\n                    const isFwkComp = this.getFrameworkOverrides().isFrameworkComponent(providedJsComp);\n                    if (isFwkComp) {\n                        fwComp = providedJsComp;\n                    } else {\n                        jsComp = providedJsComp;\n                    }\n                } else if (providedFwComp!=null) {\n                    xxxFrameworkDeprecatedWarn();\n                    fwComp = providedFwComp;\n                }\n            };\n            \n            if (selectorRes) {\n                if (selectorRes.frameworkComponent!=null) {\n                    const warningMessage = `AG Grid: As of v27, the return for ${propertyName}Selector has attributes [component, params] only. The attribute frameworkComponent is deprecated. You should now return back Framework Components using the 'component' attribute and the grid works out if it's a framework component or not.`;\n                    doOnce( ()=> console.warn(warningMessage), `UserComponentFactory.${propertyName}FrameworkSelectorDeprecated`);\n                    assignComp(selectorRes.frameworkComponent, undefined);\n                } else {\n                    assignComp(selectorRes.component, undefined);\n                }\n                paramsFromSelector = selectorRes.params;\n            } else {\n                // if no selector, or result of selector is empty, take from defObject\n                assignComp(defObjectAny[propertyName], defObjectAny[propertyName + 'Framework']);\n            }\n        }\n\n        return {compName, jsComp, fwComp, paramsFromSelector};\n    }\n\n    private newAgStackInstance(\n        ComponentClass: any,\n        componentFromFramework: boolean,\n        params: any,\n        type: ComponentType\n    ): AgPromise<any> {\n        const propertyName = type.propertyName;\n        const jsComponent = !componentFromFramework;\n        // using javascript component\n        let instance: any;\n\n        if (jsComponent) {\n            instance = new ComponentClass();\n        } else {\n            // Using framework component\n            const thisComponentConfig: ComponentMetadata = this.componentMetadataProvider.retrieve(propertyName);\n            instance = this.frameworkComponentWrapper.wrap(\n                ComponentClass,\n                thisComponentConfig.mandatoryMethodList,\n                thisComponentConfig.optionalMethodList,\n                type\n            );\n        }\n\n        const deferredInit = this.initComponent(instance, params);\n\n        if (deferredInit == null) {\n            return AgPromise.resolve(instance);\n        }\n        return (deferredInit as AgPromise<void>).then(() => instance);\n    }\n\n    // used by Floating Filter\n    public mergeParamsWithApplicationProvidedParams(\n        defObject: DefinitionObject,\n        type: ComponentType,\n        paramsFromGrid: any,\n        paramsFromSelector: any = null\n    ): any {\n        const params = {} as any;\n\n        mergeDeep(params, paramsFromGrid);\n\n        // pull user params from either the old prop name and new prop name\n        // eg either cellRendererParams and cellCompParams\n        const defObjectAny = defObject as any;\n        const userParams = defObjectAny && defObjectAny[type.propertyName + 'Params'];\n\n        if (typeof userParams === 'function') {\n            const userParamsFromFunc = userParams(paramsFromGrid);\n            mergeDeep(params, userParamsFromFunc);\n        } else if (typeof userParams === 'object') {\n            mergeDeep(params, userParams);\n        }\n\n        mergeDeep(params, paramsFromSelector);\n\n        return params;\n    }\n\n    private initComponent(component: any, params: any): AgPromise<void> | void {\n        this.context.createBean(component);\n        if (component.init == null) { return; }\n        return component.init(params);\n    }\n\n    public getDefaultFloatingFilterType(def: IFilterDef): string | null {\n        if (def == null) { return null; }\n\n        let defaultFloatingFilterType: string | null = null;\n\n        let {compName, jsComp, fwComp} = this.getCompKeys(def, FilterComponent);\n\n        if (compName) {\n            // will be undefined if not in the map\n            defaultFloatingFilterType = FloatingFilterMapper.getFloatingFilterType(compName);\n        } else {\n            const usingDefaultFilter = (jsComp==null && fwComp==null) && (def.filter===true);\n            if (usingDefaultFilter) {\n                const setFilterModuleLoaded = ModuleRegistry.isRegistered(ModuleNames.SetFilterModule);\n                defaultFloatingFilterType = setFilterModuleLoaded ? 'agSetColumnFloatingFilter' : 'agTextColumnFloatingFilter';\n            }\n        }\n\n        return defaultFloatingFilterType;\n    }\n}\n"]}