{"version":3,"sources":["../../../src/ts/headerRendering/cells/column/headerCellComp.ts"],"names":[],"mappings":"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","file":"headerCellComp.js","sourcesContent":["import { UserCompDetails } from \"../../../components/framework/userComponentFactory\";\nimport { PostConstruct, PreDestroy } from \"../../../context/context\";\nimport { Column } from \"../../../entities/column\";\nimport { removeAriaSort, setAriaDescribedBy, setAriaSort } from \"../../../utils/aria\";\nimport { RefSelector } from \"../../../widgets/componentAnnotations\";\nimport { AbstractHeaderCellComp } from \"../abstractCell/abstractHeaderCellComp\";\nimport { HeaderCellCtrl, IHeaderCellComp } from \"./headerCellCtrl\";\nimport { IHeaderComp } from \"./headerComp\";\n\nexport class HeaderCellComp extends AbstractHeaderCellComp<HeaderCellCtrl> {\n\n    private static TEMPLATE = /* html */\n        `<div class=\"ag-header-cell\" role=\"columnheader\" tabindex=\"-1\">\n            <div ref=\"eResize\" class=\"ag-header-cell-resize\" role=\"presentation\"></div>\n        </div>`;\n\n    @RefSelector('eResize') private eResize: HTMLElement;\n\n    protected readonly column: Column;\n    protected readonly pinned: string | null;\n\n    private headerComp: IHeaderComp | undefined;\n    private headerCompGui: HTMLElement | undefined;\n    private headerCompVersion = 0;\n\n    constructor(ctrl: HeaderCellCtrl) {\n        super(HeaderCellComp.TEMPLATE, ctrl);\n        this.column = ctrl.getColumnGroupChild() as Column;\n        this.pinned = ctrl.getPinned();\n    }\n\n    @PostConstruct\n    private postConstruct(): void {\n\n        const eGui = this.getGui();\n\n        const setAttribute = (name: string, value: string | null | undefined, element?: HTMLElement) => {\n            const actualElement = element ? element : eGui;\n            if (value != null && value != '') {\n                actualElement.setAttribute(name, value);\n            } else {\n                actualElement.removeAttribute(name);\n            }\n        };\n\n        const compProxy: IHeaderCellComp = {\n            setWidth: width => eGui.style.width = width,\n            addOrRemoveCssClass: (cssClassName, on) => this.addOrRemoveCssClass(cssClassName, on),\n            setAriaSort: sort => sort ? setAriaSort(eGui, sort) : removeAriaSort(eGui),\n            setColId: id => setAttribute('col-id', id),\n            setTitle: title => setAttribute('title', title),\n            setAriaDescribedBy: value => setAriaDescribedBy(eGui, value),\n            setUserCompDetails: compDetails => this.setUserCompDetails(compDetails),\n            getUserCompInstance: () => this.headerComp\n        };\n\n        this.ctrl.setComp(compProxy, this.getGui(), this.eResize);\n\n        const selectAllGui = this.ctrl.getSelectAllGui();\n        this.eResize.insertAdjacentElement('afterend', selectAllGui);\n    }\n\n    @PreDestroy\n    private destroyHeaderComp(): void {\n        if (this.headerComp) {\n            this.getGui().removeChild(this.headerCompGui!);\n            this.headerComp = this.destroyBean(this.headerComp);\n            this.headerCompGui = undefined;\n        }\n    }\n\n    private setUserCompDetails(compDetails: UserCompDetails): void {\n        this.headerCompVersion++;\n\n        const versionCopy = this.headerCompVersion;\n\n        compDetails.newAgStackInstance()!.then(comp => this.afterCompCreated(versionCopy, comp));\n    }\n\n    private afterCompCreated(version: number, headerComp: IHeaderComp): void {\n\n        if (version != this.headerCompVersion || !this.isAlive()) {\n            this.destroyBean(headerComp);\n            return;\n        }\n\n        this.destroyHeaderComp();\n\n        this.headerComp = headerComp;\n        this.headerCompGui = headerComp.getGui();\n        this.getGui().appendChild(this.headerCompGui);\n        this.ctrl.setDragSource(this.headerCompGui!);\n    }\n}\n"]}