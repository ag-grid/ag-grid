{"version":3,"sources":["../../src/ts/filter/floating/provided/readOnlyFloatingFilter.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AACA,wDAAuD;AACvD,8EAAoE;AAEpE,oDAAqD;AAGrD,+FAA+F;AAC/F,+FAA+F;AAC/F,8CAA8C;AAC9C;IAA4C,0CAAS;IAMjD;eACI,kBAAM,UAAU,CAAA,2LAGL,CAAC;IAChB,CAAC;IAED,4FAA4F;IAC5F,mEAAmE;IAC5D,wCAAO,GAAd;QACI,iBAAM,OAAO,WAAE,CAAC;IACpB,CAAC;IAEM,qCAAI,GAAX,UAAY,MAA6B;QACrC,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;QACrB,IAAM,WAAW,GAAG,IAAI,CAAC,gBAAgB,CAAC,uBAAuB,CAAC,MAAM,CAAC,MAAM,EAAE,QAAQ,EAAE,IAAI,CAAC,CAAC;QACjG,IAAM,SAAS,GAAG,IAAI,CAAC,kBAAkB,CAAC,iBAAiB,EAAE,CAAC;QAC9D,IAAI,CAAC,mBAAmB;aACnB,WAAW,CAAC,IAAI,CAAC;aACjB,iBAAiB,CAAI,WAAW,SAAI,SAAS,CAAC,iBAAiB,EAAE,cAAc,CAAG,CAAC,CAAC;IAC7F,CAAC;IAEM,qDAAoB,GAA3B,UAA4B,WAAgB;QAA5C,iBAgBC;QAfG,IAAI,CAAC,WAAW,EAAE;YACd,IAAI,CAAC,mBAAmB,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC;YACtC,OAAO;SACV;QAED,IAAI,CAAC,MAAM,CAAC,oBAAoB,CAAC,UAAA,cAAc;YAC3C,4FAA4F;YAC5F,wGAAwG;YACxG,0GAA0G;YAC1G,mEAAmE;YACnE,IAAI,cAAc,CAAC,gBAAgB,EAAE;gBACjC,IAAM,aAAa,GAAG,cAAc,CAAC,gBAAgB,CAAC,WAAW,CAAC,CAAC;gBACnE,KAAI,CAAC,mBAAmB,CAAC,QAAQ,CAAC,aAAa,CAAC,CAAC;aACpD;QACL,CAAC,CAAC,CAAC;IACP,CAAC;IA3CmC;QAAnC,kCAAW,CAAC,qBAAqB,CAAC;uEAA+C;IACnD;QAA9B,mBAAS,CAAC,kBAAkB,CAAC;oEAA4C;IA2C9E,6BAAC;CA7CD,AA6CC,CA7C2C,qBAAS,GA6CpD;AA7CY,wDAAsB","file":"readOnlyFloatingFilter.js","sourcesContent":["import { IFloatingFilterComp, IFloatingFilterParams } from '../floatingFilter';\nimport { Component } from '../../../widgets/component';\nimport { RefSelector } from '../../../widgets/componentAnnotations';\nimport { AgInputTextField } from '../../../widgets/agInputTextField';\nimport { Autowired } from '../../../context/context';\nimport { ColumnController } from '../../../columnController/columnController';\n\n// optional floating filter for user provided filters - instead of providing a floating filter,\n// they can provide a getModelAsString() method on the filter instead. this class just displays\n// the string returned from getModelAsString()\nexport class ReadOnlyFloatingFilter extends Component implements IFloatingFilterComp {\n    @RefSelector('eFloatingFilterText') private eFloatingFilterText: AgInputTextField;\n    @Autowired('columnController') private columnController: ColumnController;\n\n    private params: IFloatingFilterParams;\n\n    constructor() {\n        super(/* html */`\n            <div class=\"ag-floating-filter-input\" role=\"presentation\">\n                <ag-input-text-field ref=\"eFloatingFilterText\"></ag-input-text-field>\n            </div>`);\n    }\n\n    // this is a user component, and IComponent has \"public destroy()\" as part of the interface.\n    // so we need to override destroy() just to make the method public.\n    public destroy(): void {\n        super.destroy();\n    }\n\n    public init(params: IFloatingFilterParams): void {\n        this.params = params;\n        const displayName = this.columnController.getDisplayNameForColumn(params.column, 'header', true);\n        const translate = this.gridOptionsWrapper.getLocaleTextFunc();\n        this.eFloatingFilterText\n            .setDisabled(true)\n            .setInputAriaLabel(`${displayName} ${translate('ariaFilterInput', 'Filter Input')}`);\n    }\n\n    public onParentModelChanged(parentModel: any): void {\n        if (!parentModel) {\n            this.eFloatingFilterText.setValue('');\n            return;\n        }\n\n        this.params.parentFilterInstance(filterInstance => {\n            // it would be nice to check if getModelAsString was present before creating this component,\n            // however that is not possible, as React Hooks and VueJS don't attached the methods to the Filter until\n            // AFTER the filter is created, not allowing inspection before this (we create floating filters as columns\n            // are drawn, but the parent filters are only created when needed).\n            if (filterInstance.getModelAsString) {\n                const modelAsString = filterInstance.getModelAsString(parentModel);\n                this.eFloatingFilterText.setValue(modelAsString);\n            }\n        });\n    }\n}\n"]}