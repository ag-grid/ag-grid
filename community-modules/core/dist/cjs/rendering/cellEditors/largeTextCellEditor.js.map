{"version":3,"sources":["../../src/ts/rendering/cellEditors/largeTextCellEditor.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AACA,6CAA4C;AAE5C,+DAA8D;AAC9D,2EAAiE;AACjE,qCAAgC;AAQhC;IAAyC,uCAAc;IAUnD;eACI,kBAAM,mBAAmB,CAAC,QAAQ,CAAC;IACvC,CAAC;IAEM,kCAAI,GAAX,UAAY,MAA6B;QACrC,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;QAErB,IAAI,CAAC,kBAAkB,GAAG,MAAM,CAAC,eAAe,CAAC;QAEjD,IAAI,CAAC,SAAS;aACT,YAAY,CAAC,MAAM,CAAC,SAAS,IAAI,GAAG,CAAC;aACrC,OAAO,CAAC,MAAM,CAAC,IAAI,IAAI,EAAE,CAAC;aAC1B,OAAO,CAAC,MAAM,CAAC,IAAI,IAAI,EAAE,CAAC,CAAC;QAEhC,IAAI,SAAC,CAAC,MAAM,CAAC,MAAM,CAAC,KAAK,CAAC,EAAE;YACxB,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,MAAM,CAAC,KAAK,CAAC,QAAQ,EAAE,EAAE,IAAI,CAAC,CAAC;SAC1D;QAED,IAAI,CAAC,mBAAmB,CAAC,SAAS,EAAE,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;IACnE,CAAC;IAEO,uCAAS,GAAjB,UAAkB,KAAmB;QACjC,IAAM,GAAG,GAAG,KAAK,CAAC,KAAK,IAAI,KAAK,CAAC,OAAO,CAAC;QACzC,IAAI,GAAG,IAAI,qBAAS,CAAC,QAAQ;YACzB,GAAG,IAAI,qBAAS,CAAC,MAAM;YACvB,GAAG,IAAI,qBAAS,CAAC,SAAS;YAC1B,GAAG,IAAI,qBAAS,CAAC,QAAQ;YACzB,CAAC,KAAK,CAAC,QAAQ,IAAI,GAAG,IAAI,qBAAS,CAAC,SAAS,CAAC,EAAE,EAAE,kCAAkC;YACpF,KAAK,CAAC,eAAe,EAAE,CAAC;SAC3B;IACL,CAAC;IAEM,8CAAgB,GAAvB;QACI,IAAI,IAAI,CAAC,kBAAkB,EAAE;YACzB,IAAI,CAAC,SAAS,CAAC,mBAAmB,EAAE,CAAC,KAAK,EAAE,CAAC;SAChD;IACL,CAAC;IAEM,sCAAQ,GAAf;QACI,OAAO,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,IAAI,CAAC,SAAS,CAAC,QAAQ,EAAE,CAAC,CAAC;IAC7D,CAAC;IAjDc,4BAAQ,GACnB,qKAEO,CAAC;IAGc;QAAzB,kCAAW,CAAC,WAAW,CAAC;0DAAoC;IA4CjE,0BAAC;CAnDD,AAmDC,CAnDwC,+BAAc,GAmDtD;AAnDY,kDAAmB","file":"largeTextCellEditor.js","sourcesContent":["import { AgInputTextArea } from \"../../widgets/agInputTextArea\";\nimport { Constants } from \"../../constants\";\nimport { ICellEditorComp, ICellEditorParams } from \"../../interfaces/iCellEditor\";\nimport { PopupComponent } from \"../../widgets/popupComponent\";\nimport { RefSelector } from \"../../widgets/componentAnnotations\";\nimport { _ } from \"../../utils\";\n\nexport interface ILargeTextEditorParams extends ICellEditorParams {\n    maxLength: number;\n    rows: number;\n    cols: number;\n}\n\nexport class LargeTextCellEditor extends PopupComponent implements ICellEditorComp {\n    private static TEMPLATE = /* html */\n        `<div class=\"ag-large-text\" tabindex=\"0\">\n            <ag-input-text-area ref=\"eTextArea\" class=\"ag-large-text-input\"></ag-input-text-area>\n        </div>`;\n\n    private params: ILargeTextEditorParams;\n    @RefSelector(\"eTextArea\") private eTextArea: AgInputTextArea;\n    private focusAfterAttached: boolean;\n\n    constructor() {\n        super(LargeTextCellEditor.TEMPLATE);\n    }\n\n    public init(params:ILargeTextEditorParams): void {\n        this.params = params;\n\n        this.focusAfterAttached = params.cellStartedEdit;\n\n        this.eTextArea\n            .setMaxLength(params.maxLength || 200)\n            .setCols(params.cols || 60)\n            .setRows(params.rows || 10);\n\n        if (_.exists(params.value)) {\n            this.eTextArea.setValue(params.value.toString(), true);\n        }\n\n        this.addGuiEventListener('keydown', this.onKeyDown.bind(this));\n    }\n\n    private onKeyDown(event:KeyboardEvent): void {\n        const key = event.which || event.keyCode;\n        if (key == Constants.KEY_LEFT ||\n            key == Constants.KEY_UP ||\n            key == Constants.KEY_RIGHT ||\n            key == Constants.KEY_DOWN ||\n            (event.shiftKey && key == Constants.KEY_ENTER)) { // shift+enter allows for newlines\n            event.stopPropagation();\n        }\n    }\n\n    public afterGuiAttached(): void {\n        if (this.focusAfterAttached) {\n            this.eTextArea.getFocusableElement().focus();\n        }\n    }\n\n    public getValue(): any {\n        return this.params.parseValue(this.eTextArea.getValue());\n    }\n}\n"]}